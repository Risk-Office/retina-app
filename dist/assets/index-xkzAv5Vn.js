var cZ=Object.defineProperty;var dZ=(e,t,r)=>t in e?cZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Tn=(e,t,r)=>dZ(e,typeof t!="symbol"?t+"":t,r);function a9(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var G0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var iN={exports:{}},Ex={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ER;function uZ(){if(ER)return Ex;ER=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:e,type:a,key:o,ref:s!==void 0?s:null,props:i}}return Ex.Fragment=t,Ex.jsx=r,Ex.jsxs=r,Ex}var TR;function fZ(){return TR||(TR=1,iN.exports=uZ()),iN.exports}var n=fZ(),oN={exports:{}},Lr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RR;function hZ(){if(RR)return Lr;RR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),p=Symbol.iterator;function g(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function j(F,z,H){this.props=F,this.context=z,this.refs=y,this.updater=H||b}j.prototype.isReactComponent={},j.prototype.setState=function(F,z){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,z,"setState")},j.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function _(){}_.prototype=j.prototype;function C(F,z,H){this.props=F,this.context=z,this.refs=y,this.updater=H||b}var A=C.prototype=new _;A.constructor=C,v(A,j.prototype),A.isPureReactComponent=!0;var S=Array.isArray;function T(){}var O={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function M(F,z,H){var X=H.ref;return{$$typeof:e,type:F,key:z,ref:X!==void 0?X:null,props:H}}function I(F,z){return M(F.type,z,F.props)}function D(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function $(F){var z={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(H){return z[H]})}var K=/\/+/g;function U(F,z){return typeof F=="object"&&F!==null&&F.key!=null?$(""+F.key):z.toString(36)}function J(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(T,T):(F.status="pending",F.then(function(z){F.status==="pending"&&(F.status="fulfilled",F.value=z)},function(z){F.status==="pending"&&(F.status="rejected",F.reason=z)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function V(F,z,H,X,ne){var ie=typeof F;(ie==="undefined"||ie==="boolean")&&(F=null);var ce=!1;if(F===null)ce=!0;else switch(ie){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(F.$$typeof){case e:case t:ce=!0;break;case f:return ce=F._init,V(ce(F._payload),z,H,X,ne)}}if(ce)return ne=ne(F),ce=X===""?"."+U(F,0):X,S(ne)?(H="",ce!=null&&(H=ce.replace(K,"$&/")+"/"),V(ne,z,H,"",function(ue){return ue})):ne!=null&&(D(ne)&&(ne=I(ne,H+(ne.key==null||F&&F.key===ne.key?"":(""+ne.key).replace(K,"$&/")+"/")+ce)),z.push(ne)),1;ce=0;var ge=X===""?".":X+":";if(S(F))for(var he=0;he<F.length;he++)X=F[he],ie=ge+U(X,he),ce+=V(X,z,H,ie,ne);else if(he=g(F),typeof he=="function")for(F=he.call(F),he=0;!(X=F.next()).done;)X=X.value,ie=ge+U(X,he++),ce+=V(X,z,H,ie,ne);else if(ie==="object"){if(typeof F.then=="function")return V(J(F),z,H,X,ne);throw z=String(F),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return ce}function G(F,z,H){if(F==null)return F;var X=[],ne=0;return V(F,X,"","",function(ie){return z.call(H,ie,ne++)}),X}function q(F){if(F._status===-1){var z=F._result;z=z(),z.then(function(H){(F._status===0||F._status===-1)&&(F._status=1,F._result=H)},function(H){(F._status===0||F._status===-1)&&(F._status=2,F._result=H)}),F._status===-1&&(F._status=0,F._result=z)}if(F._status===1)return F._result.default;throw F._result}var Y=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Q={map:G,forEach:function(F,z,H){G(F,function(){z.apply(this,arguments)},H)},count:function(F){var z=0;return G(F,function(){z++}),z},toArray:function(F){return G(F,function(z){return z})||[]},only:function(F){if(!D(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Lr.Activity=m,Lr.Children=Q,Lr.Component=j,Lr.Fragment=r,Lr.Profiler=s,Lr.PureComponent=C,Lr.StrictMode=a,Lr.Suspense=d,Lr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Lr.__COMPILER_RUNTIME={__proto__:null,c:function(F){return O.H.useMemoCache(F)}},Lr.cache=function(F){return function(){return F.apply(null,arguments)}},Lr.cacheSignal=function(){return null},Lr.cloneElement=function(F,z,H){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var X=v({},F.props),ne=F.key;if(z!=null)for(ie in z.key!==void 0&&(ne=""+z.key),z)!R.call(z,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&z.ref===void 0||(X[ie]=z[ie]);var ie=arguments.length-2;if(ie===1)X.children=H;else if(1<ie){for(var ce=Array(ie),ge=0;ge<ie;ge++)ce[ge]=arguments[ge+2];X.children=ce}return M(F.type,ne,X)},Lr.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:i,_context:F},F},Lr.createElement=function(F,z,H){var X,ne={},ie=null;if(z!=null)for(X in z.key!==void 0&&(ie=""+z.key),z)R.call(z,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(ne[X]=z[X]);var ce=arguments.length-2;if(ce===1)ne.children=H;else if(1<ce){for(var ge=Array(ce),he=0;he<ce;he++)ge[he]=arguments[he+2];ne.children=ge}if(F&&F.defaultProps)for(X in ce=F.defaultProps,ce)ne[X]===void 0&&(ne[X]=ce[X]);return M(F,ie,ne)},Lr.createRef=function(){return{current:null}},Lr.forwardRef=function(F){return{$$typeof:l,render:F}},Lr.isValidElement=D,Lr.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:q}},Lr.memo=function(F,z){return{$$typeof:u,type:F,compare:z===void 0?null:z}},Lr.startTransition=function(F){var z=O.T,H={};O.T=H;try{var X=F(),ne=O.S;ne!==null&&ne(H,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(T,Y)}catch(ie){Y(ie)}finally{z!==null&&H.types!==null&&(z.types=H.types),O.T=z}},Lr.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Lr.use=function(F){return O.H.use(F)},Lr.useActionState=function(F,z,H){return O.H.useActionState(F,z,H)},Lr.useCallback=function(F,z){return O.H.useCallback(F,z)},Lr.useContext=function(F){return O.H.useContext(F)},Lr.useDebugValue=function(){},Lr.useDeferredValue=function(F,z){return O.H.useDeferredValue(F,z)},Lr.useEffect=function(F,z){return O.H.useEffect(F,z)},Lr.useEffectEvent=function(F){return O.H.useEffectEvent(F)},Lr.useId=function(){return O.H.useId()},Lr.useImperativeHandle=function(F,z,H){return O.H.useImperativeHandle(F,z,H)},Lr.useInsertionEffect=function(F,z){return O.H.useInsertionEffect(F,z)},Lr.useLayoutEffect=function(F,z){return O.H.useLayoutEffect(F,z)},Lr.useMemo=function(F,z){return O.H.useMemo(F,z)},Lr.useOptimistic=function(F,z){return O.H.useOptimistic(F,z)},Lr.useReducer=function(F,z,H){return O.H.useReducer(F,z,H)},Lr.useRef=function(F){return O.H.useRef(F)},Lr.useState=function(F){return O.H.useState(F)},Lr.useSyncExternalStore=function(F,z,H){return O.H.useSyncExternalStore(F,z,H)},Lr.useTransition=function(){return O.H.useTransition()},Lr.version="19.2.1",Lr}var PR;function xy(){return PR||(PR=1,oN.exports=hZ()),oN.exports}var N=xy();const pe=jn(N),Gk=a9({__proto__:null,default:pe},[N]);var lN={exports:{}},fi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MR;function mZ(){if(MR)return fi;MR=1;var e=xy();function t(d){var u="https://react.dev/errors/"+d;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+d+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(d,u,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:d,containerInfo:u,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,u){if(d==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return fi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,fi.createPortal=function(d,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(d,u,null,f)},fi.flushSync=function(d){var u=o.T,f=a.p;try{if(o.T=null,a.p=2,d)return d()}finally{o.T=u,a.p=f,a.d.f()}},fi.preconnect=function(d,u){typeof d=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,a.d.C(d,u))},fi.prefetchDNS=function(d){typeof d=="string"&&a.d.D(d)},fi.preinit=function(d,u){if(typeof d=="string"&&u&&typeof u.as=="string"){var f=u.as,m=l(f,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?a.d.S(d,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:m,integrity:p,fetchPriority:g}):f==="script"&&a.d.X(d,{crossOrigin:m,integrity:p,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},fi.preinitModule=function(d,u){if(typeof d=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=l(u.as,u.crossOrigin);a.d.M(d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&a.d.M(d)},fi.preload=function(d,u){if(typeof d=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,m=l(f,u.crossOrigin);a.d.L(d,f,{crossOrigin:m,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},fi.preloadModule=function(d,u){if(typeof d=="string")if(u){var f=l(u.as,u.crossOrigin);a.d.m(d,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else a.d.m(d)},fi.requestFormReset=function(d){a.d.r(d)},fi.unstable_batchedUpdates=function(d,u){return d(u)},fi.useFormState=function(d,u,f){return o.H.useFormState(d,u,f)},fi.useFormStatus=function(){return o.H.useHostTransitionStatus()},fi.version="19.2.1",fi}var DR;function s9(){if(DR)return lN.exports;DR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),lN.exports=mZ(),lN.exports}var bg=s9();const i9=jn(bg),pZ=a9({__proto__:null,default:i9},[bg]);var cN={exports:{}},Tx={},dN={exports:{}},uN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LR;function gZ(){return LR||(LR=1,(function(e){function t(V,G){var q=V.length;V.push(G);e:for(;0<q;){var Y=q-1>>>1,Q=V[Y];if(0<s(Q,G))V[Y]=G,V[q]=Q,q=Y;else break e}}function r(V){return V.length===0?null:V[0]}function a(V){if(V.length===0)return null;var G=V[0],q=V.pop();if(q!==G){V[0]=q;e:for(var Y=0,Q=V.length,F=Q>>>1;Y<F;){var z=2*(Y+1)-1,H=V[z],X=z+1,ne=V[X];if(0>s(H,q))X<Q&&0>s(ne,H)?(V[Y]=ne,V[X]=q,Y=X):(V[Y]=H,V[z]=q,Y=z);else if(X<Q&&0>s(ne,q))V[Y]=ne,V[X]=q,Y=X;else break e}}return G}function s(V,G){var q=V.sortIndex-G.sortIndex;return q!==0?q:V.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],u=[],f=1,m=null,p=3,g=!1,b=!1,v=!1,y=!1,j=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function A(V){for(var G=r(u);G!==null;){if(G.callback===null)a(u);else if(G.startTime<=V)a(u),G.sortIndex=G.expirationTime,t(d,G);else break;G=r(u)}}function S(V){if(v=!1,A(V),!b)if(r(d)!==null)b=!0,T||(T=!0,$());else{var G=r(u);G!==null&&J(S,G.startTime-V)}}var T=!1,O=-1,R=5,M=-1;function I(){return y?!0:!(e.unstable_now()-M<R)}function D(){if(y=!1,T){var V=e.unstable_now();M=V;var G=!0;try{e:{b=!1,v&&(v=!1,_(O),O=-1),g=!0;var q=p;try{t:{for(A(V),m=r(d);m!==null&&!(m.expirationTime>V&&I());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,p=m.priorityLevel;var Q=Y(m.expirationTime<=V);if(V=e.unstable_now(),typeof Q=="function"){m.callback=Q,A(V),G=!0;break t}m===r(d)&&a(d),A(V)}else a(d);m=r(d)}if(m!==null)G=!0;else{var F=r(u);F!==null&&J(S,F.startTime-V),G=!1}}break e}finally{m=null,p=q,g=!1}G=void 0}}finally{G?$():T=!1}}}var $;if(typeof C=="function")$=function(){C(D)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,U=K.port2;K.port1.onmessage=D,$=function(){U.postMessage(null)}}else $=function(){j(D,0)};function J(V,G){O=j(function(){V(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(V){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var q=p;p=G;try{return V()}finally{p=q}},e.unstable_requestPaint=function(){y=!0},e.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var q=p;p=V;try{return G()}finally{p=q}},e.unstable_scheduleCallback=function(V,G,q){var Y=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Y+q:Y):q=Y,V){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=q+Q,V={id:f++,callback:G,priorityLevel:V,startTime:q,expirationTime:Q,sortIndex:-1},q>Y?(V.sortIndex=q,t(u,V),r(d)===null&&V===r(u)&&(v?(_(O),O=-1):v=!0,J(S,q-Y))):(V.sortIndex=Q,t(d,V),b||g||(b=!0,T||(T=!0,$()))),V},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(V){var G=p;return function(){var q=p;p=G;try{return V.apply(this,arguments)}finally{p=q}}}})(uN)),uN}var IR;function xZ(){return IR||(IR=1,dN.exports=gZ()),dN.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $R;function vZ(){if($R)return Tx;$R=1;var e=xZ(),t=xy(),r=s9();function a(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var h=c,x=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(x=h.return),c=h.return;while(c)}return h.tag===3?x:null}function o(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function l(c){if(c.tag===31){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function d(c){if(i(c)!==c)throw Error(a(188))}function u(c){var h=c.alternate;if(!h){if(h=i(c),h===null)throw Error(a(188));return h!==c?null:c}for(var x=c,w=h;;){var E=x.return;if(E===null)break;var L=E.alternate;if(L===null){if(w=E.return,w!==null){x=w;continue}break}if(E.child===L.child){for(L=E.child;L;){if(L===x)return d(E),c;if(L===w)return d(E),h;L=L.sibling}throw Error(a(188))}if(x.return!==w.return)x=E,w=L;else{for(var ee=!1,de=E.child;de;){if(de===x){ee=!0,x=E,w=L;break}if(de===w){ee=!0,w=E,x=L;break}de=de.sibling}if(!ee){for(de=L.child;de;){if(de===x){ee=!0,x=L,w=E;break}if(de===w){ee=!0,w=L,x=E;break}de=de.sibling}if(!ee)throw Error(a(189))}}if(x.alternate!==w)throw Error(a(190))}if(x.tag!==3)throw Error(a(188));return x.stateNode.current===x?c:h}function f(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(h=f(c),h!==null)return h;c=c.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function $(c){return c===null||typeof c!="object"?null:(c=D&&c[D]||c["@@iterator"],typeof c=="function"?c:null)}var K=Symbol.for("react.client.reference");function U(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===K?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case v:return"Fragment";case j:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case T:return"SuspenseList";case M:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case b:return"Portal";case C:return c.displayName||"Context";case _:return(c._context.displayName||"Context")+".Consumer";case A:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case O:return h=c.displayName||null,h!==null?h:U(c.type)||"Memo";case R:h=c._payload,c=c._init;try{return U(c(h))}catch{}}return null}var J=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},Y=[],Q=-1;function F(c){return{current:c}}function z(c){0>Q||(c.current=Y[Q],Y[Q]=null,Q--)}function H(c,h){Q++,Y[Q]=c.current,c.current=h}var X=F(null),ne=F(null),ie=F(null),ce=F(null);function ge(c,h){switch(H(ie,h),H(ne,c),H(X,null),h.nodeType){case 9:case 11:c=(c=h.documentElement)&&(c=c.namespaceURI)?QT(c):0;break;default:if(c=h.tagName,h=h.namespaceURI)h=QT(h),c=eR(h,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}z(X),H(X,c)}function he(){z(X),z(ne),z(ie)}function ue(c){c.memoizedState!==null&&H(ce,c);var h=X.current,x=eR(h,c.type);h!==x&&(H(ne,c),H(X,x))}function Se(c){ne.current===c&&(z(X),z(ne)),ce.current===c&&(z(ce),_x._currentValue=q)}var je,Be;function $e(c){if(je===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);je=h&&h[1]||"",Be=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+je+c+Be}var oe=!1;function Xe(c,h){if(!c||oe)return"";oe=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(h){var ot=function(){throw Error()};if(Object.defineProperty(ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ot,[])}catch(Je){var We=Je}Reflect.construct(c,[],ot)}else{try{ot.call()}catch(Je){We=Je}c.call(ot.prototype)}}else{try{throw Error()}catch(Je){We=Je}(ot=c())&&typeof ot.catch=="function"&&ot.catch(function(){})}}catch(Je){if(Je&&We&&typeof Je.stack=="string")return[Je.stack,We.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=w.DetermineComponentFrameRoot(),ee=L[0],de=L[1];if(ee&&de){var _e=ee.split(`
`),Ve=de.split(`
`);for(E=w=0;w<_e.length&&!_e[w].includes("DetermineComponentFrameRoot");)w++;for(;E<Ve.length&&!Ve[E].includes("DetermineComponentFrameRoot");)E++;if(w===_e.length||E===Ve.length)for(w=_e.length-1,E=Ve.length-1;1<=w&&0<=E&&_e[w]!==Ve[E];)E--;for(;1<=w&&0<=E;w--,E--)if(_e[w]!==Ve[E]){if(w!==1||E!==1)do if(w--,E--,0>E||_e[w]!==Ve[E]){var tt=`
`+_e[w].replace(" at new "," at ");return c.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",c.displayName)),tt}while(1<=w&&0<=E);break}}}finally{oe=!1,Error.prepareStackTrace=x}return(x=c?c.displayName||c.name:"")?$e(x):""}function pt(c,h){switch(c.tag){case 26:case 27:case 5:return $e(c.type);case 16:return $e("Lazy");case 13:return c.child!==h&&h!==null?$e("Suspense Fallback"):$e("Suspense");case 19:return $e("SuspenseList");case 0:case 15:return Xe(c.type,!1);case 11:return Xe(c.type.render,!1);case 1:return Xe(c.type,!0);case 31:return $e("Activity");default:return""}}function Oe(c){try{var h="",x=null;do h+=pt(c,x),x=c,c=c.return;while(c);return h}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var Ee=Object.prototype.hasOwnProperty,lt=e.unstable_scheduleCallback,ut=e.unstable_cancelCallback,gt=e.unstable_shouldYield,dt=e.unstable_requestPaint,Nt=e.unstable_now,zt=e.unstable_getCurrentPriorityLevel,Dt=e.unstable_ImmediatePriority,Gt=e.unstable_UserBlockingPriority,rr=e.unstable_NormalPriority,jt=e.unstable_LowPriority,Ce=e.unstable_IdlePriority,Ke=e.log,Jt=e.unstable_setDisableYieldValue,Bt=null,bt=null;function Lt(c){if(typeof Ke=="function"&&Jt(c),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(Bt,c)}catch{}}var sr=Math.clz32?Math.clz32:fr,or=Math.log,wn=Math.LN2;function fr(c){return c>>>=0,c===0?32:31-(or(c)/wn|0)|0}var kr=256,mn=262144,Er=4194304;function nr(c){var h=c&42;if(h!==0)return h;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Wr(c,h,x){var w=c.pendingLanes;if(w===0)return 0;var E=0,L=c.suspendedLanes,ee=c.pingedLanes;c=c.warmLanes;var de=w&134217727;return de!==0?(w=de&~L,w!==0?E=nr(w):(ee&=de,ee!==0?E=nr(ee):x||(x=de&~c,x!==0&&(E=nr(x))))):(de=w&~L,de!==0?E=nr(de):ee!==0?E=nr(ee):x||(x=w&~c,x!==0&&(E=nr(x)))),E===0?0:h!==0&&h!==E&&(h&L)===0&&(L=E&-E,x=h&-h,L>=x||L===32&&(x&4194048)!==0)?h:E}function wi(c,h){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&h)===0}function Za(c,h){switch(c){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function As(){var c=Er;return Er<<=1,(Er&62914560)===0&&(Er=4194304),c}function ii(c){for(var h=[],x=0;31>x;x++)h.push(c);return h}function Zt(c,h){c.pendingLanes|=h,h!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Gi(c,h,x,w,E,L){var ee=c.pendingLanes;c.pendingLanes=x,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=x,c.entangledLanes&=x,c.errorRecoveryDisabledLanes&=x,c.shellSuspendCounter=0;var de=c.entanglements,_e=c.expirationTimes,Ve=c.hiddenUpdates;for(x=ee&~x;0<x;){var tt=31-sr(x),ot=1<<tt;de[tt]=0,_e[tt]=-1;var We=Ve[tt];if(We!==null)for(Ve[tt]=null,tt=0;tt<We.length;tt++){var Je=We[tt];Je!==null&&(Je.lane&=-536870913)}x&=~ot}w!==0&&qs(c,w,0),L!==0&&E===0&&c.tag!==0&&(c.suspendedLanes|=L&~(ee&~h))}function qs(c,h,x){c.pendingLanes|=h,c.suspendedLanes&=~h;var w=31-sr(h);c.entangledLanes|=h,c.entanglements[w]=c.entanglements[w]|1073741824|x&261930}function ks(c,h){var x=c.entangledLanes|=h;for(c=c.entanglements;x;){var w=31-sr(x),E=1<<w;E&h|c[w]&h&&(c[w]|=h),x&=~E}}function Ha(c,h){var x=h&-h;return x=(x&42)!==0?1:Mn(x),(x&(c.suspendedLanes|h))!==0?0:x}function Mn(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function Cn(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function Sa(){var c=G.p;return c!==0?c:(c=window.event,c===void 0?32:NR(c.type))}function Ni(c,h){var x=G.p;try{return G.p=c,h()}finally{G.p=x}}var Qa=Math.random().toString(36).slice(2),pn="__reactFiber$"+Qa,_n="__reactProps$"+Qa,es="__reactContainer$"+Qa,Us="__reactEvents$"+Qa,oi="__reactListeners$"+Qa,Ll="__reactHandles$"+Qa,Si="__reactResources$"+Qa,Ci="__reactMarker$"+Qa;function _i(c){delete c[pn],delete c[_n],delete c[Us],delete c[oi],delete c[Ll]}function Ai(c){var h=c[pn];if(h)return h;for(var x=c.parentNode;x;){if(h=x[es]||x[pn]){if(x=h.alternate,h.child!==null||x!==null&&x.child!==null)for(c=oR(c);c!==null;){if(x=c[pn])return x;c=oR(c)}return h}c=x,x=c.parentNode}return null}function ki(c){if(c=c[pn]||c[es]){var h=c.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return c}return null}function bo(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c.stateNode;throw Error(a(33))}function Os(c){var h=c[Si];return h||(h=c[Si]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function An(c){c[Ci]=!0}var _c=new Set,Vs={};function Oi(c,h){jo(c,h),jo(c+"Capture",h)}function jo(c,h){for(Vs[c]=h,c=0;c<h.length;c++)_c.add(h[c])}var Ac=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kc={},Oc={};function De(c){return Ee.call(Oc,c)?!0:Ee.call(kc,c)?!1:Ac.test(c)?Oc[c]=!0:(kc[c]=!0,!1)}function ft(c,h,x){if(De(h))if(x===null)c.removeAttribute(h);else{switch(typeof x){case"undefined":case"function":case"symbol":c.removeAttribute(h);return;case"boolean":var w=h.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){c.removeAttribute(h);return}}c.setAttribute(h,""+x)}}function It(c,h,x){if(x===null)c.removeAttribute(h);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(h);return}c.setAttribute(h,""+x)}}function Pt(c,h,x,w){if(w===null)c.removeAttribute(x);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(x);return}c.setAttributeNS(h,x,""+w)}}function lr(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ts(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function li(c,h,x){var w=Object.getOwnPropertyDescriptor(c.constructor.prototype,h);if(!c.hasOwnProperty(h)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var E=w.get,L=w.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return E.call(this)},set:function(ee){x=""+ee,L.call(this,ee)}}),Object.defineProperty(c,h,{enumerable:w.enumerable}),{getValue:function(){return x},setValue:function(ee){x=""+ee},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function Ei(c){if(!c._valueTracker){var h=ts(c)?"checked":"value";c._valueTracker=li(c,h,""+c[h])}}function ta(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var x=h.getValue(),w="";return c&&(w=ts(c)?c.checked?"true":"false":c.value),c=w,c!==x?(h.setValue(c),!0):!1}function Xn(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Jn=/[\n"\\]/g;function Un(c){return c.replace(Jn,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function ha(c,h,x,w,E,L,ee,de){c.name="",ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?c.type=ee:c.removeAttribute("type"),h!=null?ee==="number"?(h===0&&c.value===""||c.value!=h)&&(c.value=""+lr(h)):c.value!==""+lr(h)&&(c.value=""+lr(h)):ee!=="submit"&&ee!=="reset"||c.removeAttribute("value"),h!=null?Il(c,ee,lr(h)):x!=null?Il(c,ee,lr(x)):w!=null&&c.removeAttribute("value"),E==null&&L!=null&&(c.defaultChecked=!!L),E!=null&&(c.checked=E&&typeof E!="function"&&typeof E!="symbol"),de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?c.name=""+lr(de):c.removeAttribute("name")}function Wi(c,h,x,w,E,L,ee,de){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(c.type=L),h!=null||x!=null){if(!(L!=="submit"&&L!=="reset"||h!=null)){Ei(c);return}x=x!=null?""+lr(x):"",h=h!=null?""+lr(h):x,de||h===c.value||(c.value=h),c.defaultValue=h}w=w??E,w=typeof w!="function"&&typeof w!="symbol"&&!!w,c.checked=de?c.checked:!!w,c.defaultChecked=!!w,ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"&&(c.name=ee),Ei(c)}function Il(c,h,x){h==="number"&&Xn(c.ownerDocument)===c||c.defaultValue===""+x||(c.defaultValue=""+x)}function us(c,h,x,w){if(c=c.options,h){h={};for(var E=0;E<x.length;E++)h["$"+x[E]]=!0;for(x=0;x<c.length;x++)E=h.hasOwnProperty("$"+c[x].value),c[x].selected!==E&&(c[x].selected=E),E&&w&&(c[x].defaultSelected=!0)}else{for(x=""+lr(x),h=null,E=0;E<c.length;E++){if(c[E].value===x){c[E].selected=!0,w&&(c[E].defaultSelected=!0);return}h!==null||c[E].disabled||(h=c[E])}h!==null&&(h.selected=!0)}}function Hr(c,h,x){if(h!=null&&(h=""+lr(h),h!==c.value&&(c.value=h),x==null)){c.defaultValue!==h&&(c.defaultValue=h);return}c.defaultValue=x!=null?""+lr(x):""}function Ca(c,h,x,w){if(h==null){if(w!=null){if(x!=null)throw Error(a(92));if(J(w)){if(1<w.length)throw Error(a(93));w=w[0]}x=w}x==null&&(x=""),h=x}x=lr(h),c.defaultValue=x,w=c.textContent,w===x&&w!==""&&w!==null&&(c.value=w),Ei(c)}function Hs(c,h){if(h){var x=c.firstChild;if(x&&x===c.lastChild&&x.nodeType===3){x.nodeValue=h;return}}c.textContent=h}var xd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function om(c,h,x){var w=h.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?w?c.setProperty(h,""):h==="float"?c.cssFloat="":c[h]="":w?c.setProperty(h,x):typeof x!="number"||x===0||xd.has(h)?h==="float"?c.cssFloat=x:c[h]=(""+x).trim():c[h]=x+"px"}function lm(c,h,x){if(h!=null&&typeof h!="object")throw Error(a(62));if(c=c.style,x!=null){for(var w in x)!x.hasOwnProperty(w)||h!=null&&h.hasOwnProperty(w)||(w.indexOf("--")===0?c.setProperty(w,""):w==="float"?c.cssFloat="":c[w]="");for(var E in h)w=h[E],h.hasOwnProperty(E)&&x[E]!==w&&om(c,E,w)}else for(var L in h)h.hasOwnProperty(L)&&om(c,L,h[L])}function Ff(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ci(c){return cm.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}function wo(){}var $l=null;function vd(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Ec=null,mr=null;function dm(c){var h=ki(c);if(h&&(c=h.stateNode)){var x=c[_n]||null;e:switch(c=h.stateNode,h.type){case"input":if(ha(c,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),h=x.name,x.type==="radio"&&h!=null){for(x=c;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Un(""+h)+'"][type="radio"]'),h=0;h<x.length;h++){var w=x[h];if(w!==c&&w.form===c.form){var E=w[_n]||null;if(!E)throw Error(a(90));ha(w,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(h=0;h<x.length;h++)w=x[h],w.form===c.form&&ta(w)}break e;case"textarea":Hr(c,x.value,x.defaultValue);break e;case"select":h=x.value,h!=null&&us(c,!!x.multiple,h,!1)}}}var zf=!1;function um(c,h,x){if(zf)return c(h,x);zf=!0;try{var w=c(h);return w}finally{if(zf=!1,(Ec!==null||mr!==null)&&(S0(),Ec&&(h=Ec,c=mr,mr=Ec=null,dm(h),c)))for(h=0;h<c.length;h++)dm(c[h])}}function Ti(c,h){var x=c.stateNode;if(x===null)return null;var w=x[_n]||null;if(w===null)return null;x=w[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(c=c.type,w=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!w;break e;default:c=!1}if(c)return null;if(x&&typeof x!="function")throw Error(a(231,h,typeof x));return x}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qf=!1;if(fs)try{var yd={};Object.defineProperty(yd,"passive",{get:function(){qf=!0}}),window.addEventListener("test",yd,yd),window.removeEventListener("test",yd,yd)}catch{qf=!1}var Ri=null,bd=null,Ko=null;function fm(){if(Ko)return Ko;var c,h=bd,x=h.length,w,E="value"in Ri?Ri.value:Ri.textContent,L=E.length;for(c=0;c<x&&h[c]===E[c];c++);var ee=x-c;for(w=1;w<=ee&&h[x-w]===E[L-w];w++);return Ko=E.slice(c,1<w?1-w:void 0)}function Ki(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function Nu(){return!0}function Su(){return!1}function rs(c){function h(x,w,E,L,ee){this._reactName=x,this._targetInst=E,this.type=w,this.nativeEvent=L,this.target=ee,this.currentTarget=null;for(var de in c)c.hasOwnProperty(de)&&(x=c[de],this[de]=x?x(L):L[de]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?Nu:Su,this.isPropagationStopped=Su,this}return m(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Nu)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Nu)},persist:function(){},isPersistent:Nu}),h}var Yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yi=rs(Yo),Fl=m({},Yo,{view:0,detail:0}),Cu=rs(Fl),jd,Bl,zl,wd=m({},Fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_r,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==zl&&(zl&&c.type==="mousemove"?(jd=c.screenX-zl.screenX,Bl=c.screenY-zl.screenY):Bl=jd=0,zl=c),jd)},movementY:function(c){return"movementY"in c?c.movementY:Bl}}),Uf=rs(wd),ql=m({},wd,{dataTransfer:0}),Ul=rs(ql),hm=m({},Fl,{relatedTarget:0}),Vl=rs(hm),mm=m({},Yo,{animationName:0,elapsedTime:0,pseudoElement:0}),B=rs(mm),te=m({},Yo,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),ye=rs(te),ke=m({},Yo,{data:0}),Le=rs(ke),nt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ht={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qt(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=Vt[c])?!!h[c]:!1}function _r(){return Qt}var Mr=m({},Fl,{key:function(c){if(c.key){var h=nt[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=Ki(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?ht[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_r,charCode:function(c){return c.type==="keypress"?Ki(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Ki(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),rn=rs(Mr),ra=m({},wd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_a=rs(ra),Dn=m({},Fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_r}),Ga=rs(Dn),Da=m({},Yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),hs=rs(Da),Hl=m({},wd,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),No=rs(Hl),Gl=m({},Yo,{newState:0,oldState:0}),Vf=rs(Gl),_u=[9,13,27,32],Xo=fs&&"CompositionEvent"in window,So=null;fs&&"documentMode"in document&&(So=document.documentMode);var Nd=fs&&"TextEvent"in window&&!So,Wl=fs&&(!Xo||So&&8<So&&11>=So),ns=" ",Tc=!1;function Rc(c,h){switch(c){case"keyup":return _u.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Au(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Jo=!1;function Gs(c,h){switch(c){case"compositionend":return Au(h);case"keypress":return h.which!==32?null:(Tc=!0,ns);case"textInput":return c=h.data,c===ns&&Tc?null:c;default:return null}}function Kl(c,h){if(Jo)return c==="compositionend"||!Xo&&Rc(c,h)?(c=fm(),Ko=bd=Ri=null,Jo=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Wl&&h.locale!=="ko"?null:h.data;default:return null}}var ku={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hf(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!ku[c.type]:h==="textarea"}function Pi(c,h,x,w){Ec?mr?mr.push(w):mr=[w]:Ec=w,h=T0(h,"onChange"),0<h.length&&(x=new Yi("onChange","change",null,x,w),c.push({event:x,listeners:h}))}var Co=null,Yl=null;function Gf(c){WT(c,0)}function _o(c){var h=bo(c);if(ta(h))return c}function Pc(c,h){if(c==="change")return h}var di=!1;if(fs){var Ws;if(fs){var Zo="oninput"in document;if(!Zo){var Qo=document.createElement("div");Qo.setAttribute("oninput","return;"),Zo=typeof Qo.oninput=="function"}Ws=Zo}else Ws=!1;di=Ws&&(!document.documentMode||9<document.documentMode)}function Xl(){Co&&(Co.detachEvent("onpropertychange",Ou),Yl=Co=null)}function Ou(c){if(c.propertyName==="value"&&_o(Yl)){var h=[];Pi(h,Yl,c,vd(c)),um(Gf,h)}}function Eu(c,h,x){c==="focusin"?(Xl(),Co=h,Yl=x,Co.attachEvent("onpropertychange",Ou)):c==="focusout"&&Xl()}function Aa(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return _o(Yl)}function pm(c,h){if(c==="click")return _o(h)}function el(c,h){if(c==="input"||c==="change")return _o(h)}function tl(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var ms=typeof Object.is=="function"?Object.is:tl;function Jl(c,h){if(ms(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var x=Object.keys(c),w=Object.keys(h);if(x.length!==w.length)return!1;for(w=0;w<x.length;w++){var E=x[w];if(!Ee.call(h,E)||!ms(c[E],h[E]))return!1}return!0}function Tu(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Ru(c,h){var x=Tu(c);c=0;for(var w;x;){if(x.nodeType===3){if(w=c+x.textContent.length,c<=h&&w>=h)return{node:x,offset:h-c};c=w}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Tu(x)}}function Zl(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?Zl(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function Ql(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var h=Xn(c.document);h instanceof c.HTMLIFrameElement;){try{var x=typeof h.contentWindow.location.href=="string"}catch{x=!1}if(x)c=h.contentWindow;else break;h=Xn(c.document)}return h}function rl(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}var Sd=fs&&"documentMode"in document&&11>=document.documentMode,Mi=null,ec=null,Es=null,Xi=!1;function cn(c,h,x){var w=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Xi||Mi==null||Mi!==Xn(w)||(w=Mi,"selectionStart"in w&&rl(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Es&&Jl(Es,w)||(Es=w,w=T0(ec,"onSelect"),0<w.length&&(h=new Yi("onSelect","select",null,h,x),c.push({event:h,listeners:w}),h.target=Mi)))}function nn(c,h){var x={};return x[c.toLowerCase()]=h.toLowerCase(),x["Webkit"+c]="webkit"+h,x["Moz"+c]="moz"+h,x}var Ln={animationend:nn("Animation","AnimationEnd"),animationiteration:nn("Animation","AnimationIteration"),animationstart:nn("Animation","AnimationStart"),transitionrun:nn("Transition","TransitionRun"),transitionstart:nn("Transition","TransitionStart"),transitioncancel:nn("Transition","TransitionCancel"),transitionend:nn("Transition","TransitionEnd")},ka={},nl={};fs&&(nl=document.createElement("div").style,"AnimationEvent"in window||(delete Ln.animationend.animation,delete Ln.animationiteration.animation,delete Ln.animationstart.animation),"TransitionEvent"in window||delete Ln.transitionend.transition);function Ao(c){if(ka[c])return ka[c];if(!Ln[c])return c;var h=Ln[c],x;for(x in h)if(h.hasOwnProperty(x)&&x in nl)return ka[c]=h[x];return c}var Cd=Ao("animationend"),Wf=Ao("animationiteration"),Yg=Ao("animationstart"),e0=Ao("transitionrun"),t0=Ao("transitionstart"),r0=Ao("transitioncancel"),Xg=Ao("transitionend"),Jg=new Map,_d="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_d.push("scrollEnd");function Ji(c,h){Jg.set(c,h),Oi(h,[c])}var Kf=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},Di=[],Ad=0,gm=0;function Yf(){for(var c=Ad,h=gm=Ad=0;h<c;){var x=Di[h];Di[h++]=null;var w=Di[h];Di[h++]=null;var E=Di[h];Di[h++]=null;var L=Di[h];if(Di[h++]=null,w!==null&&E!==null){var ee=w.pending;ee===null?E.next=E:(E.next=ee.next,ee.next=E),w.pending=E}L!==0&&Jf(x,E,L)}}function Xf(c,h,x,w){Di[Ad++]=c,Di[Ad++]=h,Di[Ad++]=x,Di[Ad++]=w,gm|=w,c.lanes|=w,c=c.alternate,c!==null&&(c.lanes|=w)}function xm(c,h,x,w){return Xf(c,h,x,w),Ts(c)}function tc(c,h){return Xf(c,null,null,h),Ts(c)}function Jf(c,h,x){c.lanes|=x;var w=c.alternate;w!==null&&(w.lanes|=x);for(var E=!1,L=c.return;L!==null;)L.childLanes|=x,w=L.alternate,w!==null&&(w.childLanes|=x),L.tag===22&&(c=L.stateNode,c===null||c._visibility&1||(E=!0)),c=L,L=L.return;return c.tag===3?(L=c.stateNode,E&&h!==null&&(E=31-sr(x),c=L.hiddenUpdates,w=c[E],w===null?c[E]=[h]:w.push(h),h.lane=x|536870912),L):null}function Ts(c){if(50<yx)throw yx=0,Ew=null,Error(a(185));for(var h=c.return;h!==null;)c=h,h=c.return;return c.tag===3?c.stateNode:null}var ps={};function vm(c,h,x,w){this.tag=c,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(c,h,x,w){return new vm(c,h,x,w)}function ym(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Zi(c,h){var x=c.alternate;return x===null?(x=Rs(c.tag,h,c.key,c.mode),x.elementType=c.elementType,x.type=c.type,x.stateNode=c.stateNode,x.alternate=c,c.alternate=x):(x.pendingProps=h,x.type=c.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=c.flags&65011712,x.childLanes=c.childLanes,x.lanes=c.lanes,x.child=c.child,x.memoizedProps=c.memoizedProps,x.memoizedState=c.memoizedState,x.updateQueue=c.updateQueue,h=c.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=c.sibling,x.index=c.index,x.ref=c.ref,x.refCleanup=c.refCleanup,x}function Zf(c,h){c.flags&=65011714;var x=c.alternate;return x===null?(c.childLanes=0,c.lanes=h,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=x.childLanes,c.lanes=x.lanes,c.child=x.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=x.memoizedProps,c.memoizedState=x.memoizedState,c.updateQueue=x.updateQueue,c.type=x.type,h=x.dependencies,c.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),c}function Pu(c,h,x,w,E,L){var ee=0;if(w=c,typeof c=="function")ym(c)&&(ee=1);else if(typeof c=="string")ee=JJ(c,x,X.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case M:return c=Rs(31,x,h,E),c.elementType=M,c.lanes=L,c;case v:return Mc(x.children,E,L,h);case y:ee=8,E|=24;break;case j:return c=Rs(12,x,h,E|2),c.elementType=j,c.lanes=L,c;case S:return c=Rs(13,x,h,E),c.elementType=S,c.lanes=L,c;case T:return c=Rs(19,x,h,E),c.elementType=T,c.lanes=L,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case C:ee=10;break e;case _:ee=9;break e;case A:ee=11;break e;case O:ee=14;break e;case R:ee=16,w=null;break e}ee=29,x=Error(a(130,c===null?"null":typeof c,"")),w=null}return h=Rs(ee,x,h,E),h.elementType=c,h.type=w,h.lanes=L,h}function Mc(c,h,x,w){return c=Rs(7,c,w,h),c.lanes=x,c}function Qf(c,h,x){return c=Rs(6,c,null,h),c.lanes=x,c}function bm(c){var h=Rs(18,null,null,0);return h.stateNode=c,h}function Mu(c,h,x){return h=Rs(4,c.children!==null?c.children:[],c.key,h),h.lanes=x,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}var jm=new WeakMap;function Qi(c,h){if(typeof c=="object"&&c!==null){var x=jm.get(c);return x!==void 0?x:(h={value:c,source:h,stack:Oe(h)},jm.set(c,h),h)}return{value:c,source:h,stack:Oe(h)}}var Du=[],kd=0,wm=null,eh=0,eo=[],to=0,Dc=null,ro=1,no="";function Li(c,h){Du[kd++]=eh,Du[kd++]=wm,wm=c,eh=h}function n0(c,h,x){eo[to++]=ro,eo[to++]=no,eo[to++]=Dc,Dc=c;var w=ro;c=no;var E=32-sr(w)-1;w&=~(1<<E),x+=1;var L=32-sr(h)+E;if(30<L){var ee=E-E%5;L=(w&(1<<ee)-1).toString(32),w>>=ee,E-=ee,ro=1<<32-sr(h)+E|x<<E|w,no=L+c}else ro=1<<L|x<<E|w,no=c}function Zg(c){c.return!==null&&(Li(c,1),n0(c,1,0))}function Nm(c){for(;c===wm;)wm=Du[--kd],Du[kd]=null,eh=Du[--kd],Du[kd]=null;for(;c===Dc;)Dc=eo[--to],eo[to]=null,no=eo[--to],eo[to]=null,ro=eo[--to],eo[to]=null}function a0(c,h){eo[to++]=ro,eo[to++]=no,eo[to++]=Dc,ro=h.id,no=h.overflow,Dc=c}var gs=null,Vn=null,Xr=!1,Ks=null,ma=!1,ko=Error(a(519));function Lc(c){var h=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Lu(Qi(h,c)),ko}function Qg(c){var h=c.stateNode,x=c.type,w=c.memoizedProps;switch(h[pn]=c,h[_n]=w,x){case"dialog":Zr("cancel",h),Zr("close",h);break;case"iframe":case"object":case"embed":Zr("load",h);break;case"video":case"audio":for(x=0;x<jx.length;x++)Zr(jx[x],h);break;case"source":Zr("error",h);break;case"img":case"image":case"link":Zr("error",h),Zr("load",h);break;case"details":Zr("toggle",h);break;case"input":Zr("invalid",h),Wi(h,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":Zr("invalid",h);break;case"textarea":Zr("invalid",h),Ca(h,w.value,w.defaultValue,w.children)}x=w.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||h.textContent===""+x||w.suppressHydrationWarning===!0||JT(h.textContent,x)?(w.popover!=null&&(Zr("beforetoggle",h),Zr("toggle",h)),w.onScroll!=null&&Zr("scroll",h),w.onScrollEnd!=null&&Zr("scrollend",h),w.onClick!=null&&(h.onclick=wo),h=!0):h=!1,h||Lc(c,!0)}function rc(c){for(gs=c.return;gs;)switch(gs.tag){case 5:case 31:case 13:ma=!1;return;case 27:case 3:ma=!0;return;default:gs=gs.return}}function xs(c){if(c!==gs)return!1;if(!Xr)return rc(c),Xr=!0,!1;var h=c.tag,x;if((x=h!==3&&h!==27)&&((x=h===5)&&(x=c.type,x=!(x!=="form"&&x!=="button")||Hw(c.type,c.memoizedProps)),x=!x),x&&Vn&&Lc(c),rc(c),h===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));Vn=iR(c)}else if(h===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));Vn=iR(c)}else h===27?(h=Vn,Xu(c.type)?(c=Xw,Xw=null,Vn=c):Vn=h):Vn=gs?ol(c.stateNode.nextSibling):null;return!0}function Od(){Vn=gs=null,Xr=!1}function ex(){var c=Ks;return c!==null&&(co===null?co=c:co.push.apply(co,c),Ks=null),c}function Lu(c){Ks===null?Ks=[c]:Ks.push(c)}var Sm=F(null),Ic=null,al=null;function $c(c,h,x){H(Sm,h._currentValue),h._currentValue=x}function ao(c){c._currentValue=Sm.current,z(Sm)}function Iu(c,h,x){for(;c!==null;){var w=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,w!==null&&(w.childLanes|=h)):w!==null&&(w.childLanes&h)!==h&&(w.childLanes|=h),c===x)break;c=c.return}}function Ed(c,h,x,w){var E=c.child;for(E!==null&&(E.return=c);E!==null;){var L=E.dependencies;if(L!==null){var ee=E.child;L=L.firstContext;e:for(;L!==null;){var de=L;L=E;for(var _e=0;_e<h.length;_e++)if(de.context===h[_e]){L.lanes|=x,de=L.alternate,de!==null&&(de.lanes|=x),Iu(L.return,x,c),w||(ee=null);break e}L=de.next}}else if(E.tag===18){if(ee=E.return,ee===null)throw Error(a(341));ee.lanes|=x,L=ee.alternate,L!==null&&(L.lanes|=x),Iu(ee,x,c),ee=null}else ee=E.child;if(ee!==null)ee.return=E;else for(ee=E;ee!==null;){if(ee===c){ee=null;break}if(E=ee.sibling,E!==null){E.return=ee.return,ee=E;break}ee=ee.return}E=ee}}function Fc(c,h,x,w){c=null;for(var E=h,L=!1;E!==null;){if(!L){if((E.flags&524288)!==0)L=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var ee=E.alternate;if(ee===null)throw Error(a(387));if(ee=ee.memoizedProps,ee!==null){var de=E.type;ms(E.pendingProps.value,ee.value)||(c!==null?c.push(de):c=[de])}}else if(E===ce.current){if(ee=E.alternate,ee===null)throw Error(a(387));ee.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(c!==null?c.push(_x):c=[_x])}E=E.return}c!==null&&Ed(h,c,x,w),h.flags|=262144}function Cm(c){for(c=c.firstContext;c!==null;){if(!ms(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Bc(c){Ic=c,al=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function vs(c){return s0(Ic,c)}function _m(c,h){return Ic===null&&Bc(c),s0(c,h)}function s0(c,h){var x=h._currentValue;if(h={context:h,memoizedValue:x,next:null},al===null){if(c===null)throw Error(a(308));al=h,c.dependencies={lanes:0,firstContext:h},c.flags|=524288}else al=al.next=h;return x}var Y2=typeof AbortController<"u"?AbortController:function(){var c=[],h=this.signal={aborted:!1,addEventListener:function(x,w){c.push(w)}};this.abort=function(){h.aborted=!0,c.forEach(function(x){return x()})}},X2=e.unstable_scheduleCallback,J2=e.unstable_NormalPriority,Oa={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $u(){return{controller:new Y2,data:new Map,refCount:0}}function th(c){c.refCount--,c.refCount===0&&X2(J2,function(){c.controller.abort()})}var rh=null,Am=0,k=0,P=null;function W(c,h){if(rh===null){var x=rh=[];Am=0,k=Lw(),P={status:"pending",value:void 0,then:function(w){x.push(w)}}}return Am++,h.then(Z,Z),h}function Z(){if(--Am===0&&rh!==null){P!==null&&(P.status="fulfilled");var c=rh;rh=null,k=0,P=null;for(var h=0;h<c.length;h++)(0,c[h])()}}function re(c,h){var x=[],w={status:"pending",value:null,reason:null,then:function(E){x.push(E)}};return c.then(function(){w.status="fulfilled",w.value=h;for(var E=0;E<x.length;E++)(0,x[E])(h)},function(E){for(w.status="rejected",w.reason=E,E=0;E<x.length;E++)(0,x[E])(void 0)}),w}var ae=V.S;V.S=function(c,h){jT=Nt(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&W(c,h),ae!==null&&ae(c,h)};var se=F(null);function fe(){var c=se.current;return c!==null?c:Gn.pooledCache}function me(c,h){h===null?H(se,se.current):H(se,h.pool)}function ve(){var c=fe();return c===null?null:{parent:Oa._currentValue,pool:c}}var Te=Error(a(460)),qe=Error(a(474)),xe=Error(a(542)),Me={then:function(){}};function Fe(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Qe(c,h,x){switch(x=c[x],x===void 0?c.push(h):x!==h&&(h.then(wo,wo),h=x),h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,xt(c),c;default:if(typeof h.status=="string")h.then(wo,wo);else{if(c=Gn,c!==null&&100<c.shellSuspendCounter)throw Error(a(482));c=h,c.status="pending",c.then(function(w){if(h.status==="pending"){var E=h;E.status="fulfilled",E.value=w}},function(w){if(h.status==="pending"){var E=h;E.status="rejected",E.reason=w}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,xt(c),c}throw Ze=h,Te}}function ze(c){try{var h=c._init;return h(c._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(Ze=x,Te):x}}var Ze=null;function at(){if(Ze===null)throw Error(a(459));var c=Ze;return Ze=null,c}function xt(c){if(c===Te||c===xe)throw Error(a(483))}var ct=null,Wt=0;function $t(c){var h=Wt;return Wt+=1,ct===null&&(ct=[]),Qe(ct,c,h)}function Tr(c,h){h=h.props.ref,c.ref=h!==void 0?h:null}function qt(c,h){throw h.$$typeof===p?Error(a(525)):(c=Object.prototype.toString.call(h),Error(a(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c)))}function Yr(c){function h(Ie,Pe){if(c){var Ue=Ie.deletions;Ue===null?(Ie.deletions=[Pe],Ie.flags|=16):Ue.push(Pe)}}function x(Ie,Pe){if(!c)return null;for(;Pe!==null;)h(Ie,Pe),Pe=Pe.sibling;return null}function w(Ie){for(var Pe=new Map;Ie!==null;)Ie.key!==null?Pe.set(Ie.key,Ie):Pe.set(Ie.index,Ie),Ie=Ie.sibling;return Pe}function E(Ie,Pe){return Ie=Zi(Ie,Pe),Ie.index=0,Ie.sibling=null,Ie}function L(Ie,Pe,Ue){return Ie.index=Ue,c?(Ue=Ie.alternate,Ue!==null?(Ue=Ue.index,Ue<Pe?(Ie.flags|=67108866,Pe):Ue):(Ie.flags|=67108866,Pe)):(Ie.flags|=1048576,Pe)}function ee(Ie){return c&&Ie.alternate===null&&(Ie.flags|=67108866),Ie}function de(Ie,Pe,Ue,st){return Pe===null||Pe.tag!==6?(Pe=Qf(Ue,Ie.mode,st),Pe.return=Ie,Pe):(Pe=E(Pe,Ue),Pe.return=Ie,Pe)}function _e(Ie,Pe,Ue,st){var ur=Ue.type;return ur===v?tt(Ie,Pe,Ue.props.children,st,Ue.key):Pe!==null&&(Pe.elementType===ur||typeof ur=="object"&&ur!==null&&ur.$$typeof===R&&ze(ur)===Pe.type)?(Pe=E(Pe,Ue.props),Tr(Pe,Ue),Pe.return=Ie,Pe):(Pe=Pu(Ue.type,Ue.key,Ue.props,null,Ie.mode,st),Tr(Pe,Ue),Pe.return=Ie,Pe)}function Ve(Ie,Pe,Ue,st){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==Ue.containerInfo||Pe.stateNode.implementation!==Ue.implementation?(Pe=Mu(Ue,Ie.mode,st),Pe.return=Ie,Pe):(Pe=E(Pe,Ue.children||[]),Pe.return=Ie,Pe)}function tt(Ie,Pe,Ue,st,ur){return Pe===null||Pe.tag!==7?(Pe=Mc(Ue,Ie.mode,st,ur),Pe.return=Ie,Pe):(Pe=E(Pe,Ue),Pe.return=Ie,Pe)}function ot(Ie,Pe,Ue){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=Qf(""+Pe,Ie.mode,Ue),Pe.return=Ie,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case g:return Ue=Pu(Pe.type,Pe.key,Pe.props,null,Ie.mode,Ue),Tr(Ue,Pe),Ue.return=Ie,Ue;case b:return Pe=Mu(Pe,Ie.mode,Ue),Pe.return=Ie,Pe;case R:return Pe=ze(Pe),ot(Ie,Pe,Ue)}if(J(Pe)||$(Pe))return Pe=Mc(Pe,Ie.mode,Ue,null),Pe.return=Ie,Pe;if(typeof Pe.then=="function")return ot(Ie,$t(Pe),Ue);if(Pe.$$typeof===C)return ot(Ie,_m(Ie,Pe),Ue);qt(Ie,Pe)}return null}function We(Ie,Pe,Ue,st){var ur=Pe!==null?Pe.key:null;if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint")return ur!==null?null:de(Ie,Pe,""+Ue,st);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case g:return Ue.key===ur?_e(Ie,Pe,Ue,st):null;case b:return Ue.key===ur?Ve(Ie,Pe,Ue,st):null;case R:return Ue=ze(Ue),We(Ie,Pe,Ue,st)}if(J(Ue)||$(Ue))return ur!==null?null:tt(Ie,Pe,Ue,st,null);if(typeof Ue.then=="function")return We(Ie,Pe,$t(Ue),st);if(Ue.$$typeof===C)return We(Ie,Pe,_m(Ie,Ue),st);qt(Ie,Ue)}return null}function Je(Ie,Pe,Ue,st,ur){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return Ie=Ie.get(Ue)||null,de(Pe,Ie,""+st,ur);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case g:return Ie=Ie.get(st.key===null?Ue:st.key)||null,_e(Pe,Ie,st,ur);case b:return Ie=Ie.get(st.key===null?Ue:st.key)||null,Ve(Pe,Ie,st,ur);case R:return st=ze(st),Je(Ie,Pe,Ue,st,ur)}if(J(st)||$(st))return Ie=Ie.get(Ue)||null,tt(Pe,Ie,st,ur,null);if(typeof st.then=="function")return Je(Ie,Pe,Ue,$t(st),ur);if(st.$$typeof===C)return Je(Ie,Pe,Ue,_m(Pe,st),ur);qt(Pe,st)}return null}function Ht(Ie,Pe,Ue,st){for(var ur=null,un=null,er=Pe,Vr=Pe=0,en=null;er!==null&&Vr<Ue.length;Vr++){er.index>Vr?(en=er,er=null):en=er.sibling;var fn=We(Ie,er,Ue[Vr],st);if(fn===null){er===null&&(er=en);break}c&&er&&fn.alternate===null&&h(Ie,er),Pe=L(fn,Pe,Vr),un===null?ur=fn:un.sibling=fn,un=fn,er=en}if(Vr===Ue.length)return x(Ie,er),Xr&&Li(Ie,Vr),ur;if(er===null){for(;Vr<Ue.length;Vr++)er=ot(Ie,Ue[Vr],st),er!==null&&(Pe=L(er,Pe,Vr),un===null?ur=er:un.sibling=er,un=er);return Xr&&Li(Ie,Vr),ur}for(er=w(er);Vr<Ue.length;Vr++)en=Je(er,Ie,Vr,Ue[Vr],st),en!==null&&(c&&en.alternate!==null&&er.delete(en.key===null?Vr:en.key),Pe=L(en,Pe,Vr),un===null?ur=en:un.sibling=en,un=en);return c&&er.forEach(function(tf){return h(Ie,tf)}),Xr&&Li(Ie,Vr),ur}function jr(Ie,Pe,Ue,st){if(Ue==null)throw Error(a(151));for(var ur=null,un=null,er=Pe,Vr=Pe=0,en=null,fn=Ue.next();er!==null&&!fn.done;Vr++,fn=Ue.next()){er.index>Vr?(en=er,er=null):en=er.sibling;var tf=We(Ie,er,fn.value,st);if(tf===null){er===null&&(er=en);break}c&&er&&tf.alternate===null&&h(Ie,er),Pe=L(tf,Pe,Vr),un===null?ur=tf:un.sibling=tf,un=tf,er=en}if(fn.done)return x(Ie,er),Xr&&Li(Ie,Vr),ur;if(er===null){for(;!fn.done;Vr++,fn=Ue.next())fn=ot(Ie,fn.value,st),fn!==null&&(Pe=L(fn,Pe,Vr),un===null?ur=fn:un.sibling=fn,un=fn);return Xr&&Li(Ie,Vr),ur}for(er=w(er);!fn.done;Vr++,fn=Ue.next())fn=Je(er,Ie,Vr,fn.value,st),fn!==null&&(c&&fn.alternate!==null&&er.delete(fn.key===null?Vr:fn.key),Pe=L(fn,Pe,Vr),un===null?ur=fn:un.sibling=fn,un=fn);return c&&er.forEach(function(lZ){return h(Ie,lZ)}),Xr&&Li(Ie,Vr),ur}function Bn(Ie,Pe,Ue,st){if(typeof Ue=="object"&&Ue!==null&&Ue.type===v&&Ue.key===null&&(Ue=Ue.props.children),typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case g:e:{for(var ur=Ue.key;Pe!==null;){if(Pe.key===ur){if(ur=Ue.type,ur===v){if(Pe.tag===7){x(Ie,Pe.sibling),st=E(Pe,Ue.props.children),st.return=Ie,Ie=st;break e}}else if(Pe.elementType===ur||typeof ur=="object"&&ur!==null&&ur.$$typeof===R&&ze(ur)===Pe.type){x(Ie,Pe.sibling),st=E(Pe,Ue.props),Tr(st,Ue),st.return=Ie,Ie=st;break e}x(Ie,Pe);break}else h(Ie,Pe);Pe=Pe.sibling}Ue.type===v?(st=Mc(Ue.props.children,Ie.mode,st,Ue.key),st.return=Ie,Ie=st):(st=Pu(Ue.type,Ue.key,Ue.props,null,Ie.mode,st),Tr(st,Ue),st.return=Ie,Ie=st)}return ee(Ie);case b:e:{for(ur=Ue.key;Pe!==null;){if(Pe.key===ur)if(Pe.tag===4&&Pe.stateNode.containerInfo===Ue.containerInfo&&Pe.stateNode.implementation===Ue.implementation){x(Ie,Pe.sibling),st=E(Pe,Ue.children||[]),st.return=Ie,Ie=st;break e}else{x(Ie,Pe);break}else h(Ie,Pe);Pe=Pe.sibling}st=Mu(Ue,Ie.mode,st),st.return=Ie,Ie=st}return ee(Ie);case R:return Ue=ze(Ue),Bn(Ie,Pe,Ue,st)}if(J(Ue))return Ht(Ie,Pe,Ue,st);if($(Ue)){if(ur=$(Ue),typeof ur!="function")throw Error(a(150));return Ue=ur.call(Ue),jr(Ie,Pe,Ue,st)}if(typeof Ue.then=="function")return Bn(Ie,Pe,$t(Ue),st);if(Ue.$$typeof===C)return Bn(Ie,Pe,_m(Ie,Ue),st);qt(Ie,Ue)}return typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint"?(Ue=""+Ue,Pe!==null&&Pe.tag===6?(x(Ie,Pe.sibling),st=E(Pe,Ue),st.return=Ie,Ie=st):(x(Ie,Pe),st=Qf(Ue,Ie.mode,st),st.return=Ie,Ie=st),ee(Ie)):x(Ie,Pe)}return function(Ie,Pe,Ue,st){try{Wt=0;var ur=Bn(Ie,Pe,Ue,st);return ct=null,ur}catch(er){if(er===Te||er===xe)throw er;var un=Rs(29,er,null,Ie.mode);return un.lanes=st,un.return=Ie,un}finally{}}}var Hn=Yr(!0),Dr=Yr(!1),Ft=!1;function wt(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function na(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function pr(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Br(c,h,x){var w=c.updateQueue;if(w===null)return null;if(w=w.shared,(vn&2)!==0){var E=w.pending;return E===null?h.next=h:(h.next=E.next,E.next=h),w.pending=h,h=Ts(c),Jf(c,null,x),h}return Xf(c,w,h,x),Ts(c)}function gn(c,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194048)!==0)){var w=h.lanes;w&=c.pendingLanes,x|=w,h.lanes=x,ks(c,x)}}function Wa(c,h){var x=c.updateQueue,w=c.alternate;if(w!==null&&(w=w.updateQueue,x===w)){var E=null,L=null;if(x=x.firstBaseUpdate,x!==null){do{var ee={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};L===null?E=L=ee:L=L.next=ee,x=x.next}while(x!==null);L===null?E=L=h:L=L.next=h}else E=L=h;x={baseState:w.baseState,firstBaseUpdate:E,lastBaseUpdate:L,shared:w.shared,callbacks:w.callbacks},c.updateQueue=x;return}c=x.lastBaseUpdate,c===null?x.firstBaseUpdate=h:c.next=h,x.lastBaseUpdate=h}var ys=!1;function In(){if(ys){var c=P;if(c!==null)throw c}}function La(c,h,x,w){ys=!1;var E=c.updateQueue;Ft=!1;var L=E.firstBaseUpdate,ee=E.lastBaseUpdate,de=E.shared.pending;if(de!==null){E.shared.pending=null;var _e=de,Ve=_e.next;_e.next=null,ee===null?L=Ve:ee.next=Ve,ee=_e;var tt=c.alternate;tt!==null&&(tt=tt.updateQueue,de=tt.lastBaseUpdate,de!==ee&&(de===null?tt.firstBaseUpdate=Ve:de.next=Ve,tt.lastBaseUpdate=_e))}if(L!==null){var ot=E.baseState;ee=0,tt=Ve=_e=null,de=L;do{var We=de.lane&-536870913,Je=We!==de.lane;if(Je?(Qr&We)===We:(w&We)===We){We!==0&&We===k&&(ys=!0),tt!==null&&(tt=tt.next={lane:0,tag:de.tag,payload:de.payload,callback:null,next:null});e:{var Ht=c,jr=de;We=h;var Bn=x;switch(jr.tag){case 1:if(Ht=jr.payload,typeof Ht=="function"){ot=Ht.call(Bn,ot,We);break e}ot=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=jr.payload,We=typeof Ht=="function"?Ht.call(Bn,ot,We):Ht,We==null)break e;ot=m({},ot,We);break e;case 2:Ft=!0}}We=de.callback,We!==null&&(c.flags|=64,Je&&(c.flags|=8192),Je=E.callbacks,Je===null?E.callbacks=[We]:Je.push(We))}else Je={lane:We,tag:de.tag,payload:de.payload,callback:de.callback,next:null},tt===null?(Ve=tt=Je,_e=ot):tt=tt.next=Je,ee|=We;if(de=de.next,de===null){if(de=E.shared.pending,de===null)break;Je=de,de=Je.next,Je.next=null,E.lastBaseUpdate=Je,E.shared.pending=null}}while(!0);tt===null&&(_e=ot),E.baseState=_e,E.firstBaseUpdate=Ve,E.lastBaseUpdate=tt,L===null&&(E.shared.lanes=0),Hu|=ee,c.lanes=ee,c.memoizedState=ot}}function Ps(c,h){if(typeof c!="function")throw Error(a(191,c));c.call(h)}function Ia(c,h){var x=c.callbacks;if(x!==null)for(c.callbacks=null,c=0;c<x.length;c++)Ps(x[c],h)}var Gr=F(null),sn=F(0);function aa(c,h){c=Bd,H(sn,c),H(Gr,h),Bd=c|h.baseLanes}function dn(){H(sn,Bd),H(Gr,Gr.current)}function Ka(){Bd=sn.current,z(Gr),z(sn)}var sa=F(null),on=null;function Ea(c){var h=c.alternate;H(an,an.current&1),H(sa,c),on===null&&(h===null||Gr.current!==null||h.memoizedState!==null)&&(on=c)}function xn(c){H(an,an.current),H(sa,c),on===null&&(on=c)}function $a(c){c.tag===22?(H(an,an.current),H(sa,c),on===null&&(on=c)):Fa()}function Fa(){H(an,an.current),H(sa,sa.current)}function kn(c){z(sa),on===c&&(on=null),z(an)}var an=F(0);function Ms(c){for(var h=c;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Kw(x)||Yw(x)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var pa=0,cr=null,dr=null,ln=null,ui=!1,so=!1,Ys=!1,Ba=0,zc=0,qc=null,km=0;function $n(){throw Error(a(321))}function tx(c,h){if(h===null)return!1;for(var x=0;x<h.length&&x<c.length;x++)if(!ms(c[x],h[x]))return!1;return!0}function rx(c,h,x,w,E,L){return pa=L,cr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,V.H=c===null||c.memoizedState===null?RE:sw,Ys=!1,L=x(w,E),Ys=!1,so&&(L=nc(h,x,w,E)),Om(c),L}function Om(c){V.H=dx;var h=dr!==null&&dr.next!==null;if(pa=0,ln=dr=cr=null,ui=!1,zc=0,qc=null,h)throw Error(a(300));c===null||ss||(c=c.dependencies,c!==null&&Cm(c)&&(ss=!0))}function nc(c,h,x,w){cr=c;var E=0;do{if(so&&(qc=null),zc=0,so=!1,25<=E)throw Error(a(301));if(E+=1,ln=dr=null,c.updateQueue!=null){var L=c.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}V.H=PE,L=h(x,w)}while(so);return L}function Z2(){var c=V.H,h=c.useState()[0];return h=typeof h.then=="function"?Uc(h):h,c=c.useState()[0],(dr!==null?dr.memoizedState:null)!==c&&(cr.flags|=1024),h}function nx(){var c=Ba!==0;return Ba=0,c}function ax(c,h,x){h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~x}function Em(c){if(ui){for(c=c.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}ui=!1}pa=0,ln=dr=cr=null,so=!1,zc=Ba=0,qc=null}function as(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?cr.memoizedState=ln=c:ln=ln.next=c,ln}function ga(){if(dr===null){var c=cr.alternate;c=c!==null?c.memoizedState:null}else c=dr.next;var h=ln===null?cr.memoizedState:ln.next;if(h!==null)ln=h,dr=c;else{if(c===null)throw cr.alternate===null?Error(a(467)):Error(a(310));dr=c,c={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},ln===null?cr.memoizedState=ln=c:ln=ln.next=c}return ln}function nh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uc(c){var h=zc;return zc+=1,qc===null&&(qc=[]),c=Qe(qc,c,h),h=cr,(ln===null?h.memoizedState:ln.next)===null&&(h=h.alternate,V.H=h===null||h.memoizedState===null?RE:sw),c}function Fu(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Uc(c);if(c.$$typeof===C)return vs(c)}throw Error(a(438,String(c)))}function Td(c){var h=null,x=cr.updateQueue;if(x!==null&&(h=x.memoCache),h==null){var w=cr.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(h={data:w.data.map(function(E){return E.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),x===null&&(x=nh(),cr.updateQueue=x),x.memoCache=h,x=h.data[h.index],x===void 0)for(x=h.data[h.index]=Array(c),w=0;w<c;w++)x[w]=I;return h.index++,x}function sl(c,h){return typeof h=="function"?h(c):h}function Tm(c){var h=ga();return Bu(h,dr,c)}function Bu(c,h,x){var w=c.queue;if(w===null)throw Error(a(311));w.lastRenderedReducer=x;var E=c.baseQueue,L=w.pending;if(L!==null){if(E!==null){var ee=E.next;E.next=L.next,L.next=ee}h.baseQueue=E=L,w.pending=null}if(L=c.baseState,E===null)c.memoizedState=L;else{h=E.next;var de=ee=null,_e=null,Ve=h,tt=!1;do{var ot=Ve.lane&-536870913;if(ot!==Ve.lane?(Qr&ot)===ot:(pa&ot)===ot){var We=Ve.revertLane;if(We===0)_e!==null&&(_e=_e.next={lane:0,revertLane:0,gesture:null,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),ot===k&&(tt=!0);else if((pa&We)===We){Ve=Ve.next,We===k&&(tt=!0);continue}else ot={lane:0,revertLane:Ve.revertLane,gesture:null,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null},_e===null?(de=_e=ot,ee=L):_e=_e.next=ot,cr.lanes|=We,Hu|=We;ot=Ve.action,Ys&&x(L,ot),L=Ve.hasEagerState?Ve.eagerState:x(L,ot)}else We={lane:ot,revertLane:Ve.revertLane,gesture:Ve.gesture,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null},_e===null?(de=_e=We,ee=L):_e=_e.next=We,cr.lanes|=ot,Hu|=ot;Ve=Ve.next}while(Ve!==null&&Ve!==h);if(_e===null?ee=L:_e.next=de,!ms(L,c.memoizedState)&&(ss=!0,tt&&(x=P,x!==null)))throw x;c.memoizedState=L,c.baseState=ee,c.baseQueue=_e,w.lastRenderedState=L}return E===null&&(w.lanes=0),[c.memoizedState,w.dispatch]}function Rm(c){var h=ga(),x=h.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=c;var w=x.dispatch,E=x.pending,L=h.memoizedState;if(E!==null){x.pending=null;var ee=E=E.next;do L=c(L,ee.action),ee=ee.next;while(ee!==E);ms(L,h.memoizedState)||(ss=!0),h.memoizedState=L,h.baseQueue===null&&(h.baseState=L),x.lastRenderedState=L}return[L,w]}function Pm(c,h,x){var w=cr,E=ga(),L=Xr;if(L){if(x===void 0)throw Error(a(407));x=x()}else x=h();var ee=!ms((dr||E).memoizedState,x);if(ee&&(E.memoizedState=x,ss=!0),E=E.queue,Q2(ix.bind(null,w,E,c),[c]),E.getSnapshot!==h||ee||ln!==null&&ln.memoizedState.tag&1){if(w.flags|=2048,Pd(9,{destroy:void 0},sx.bind(null,w,E,x,h),null),Gn===null)throw Error(a(349));L||(pa&127)!==0||ac(w,h,x)}return x}function ac(c,h,x){c.flags|=16384,c={getSnapshot:h,value:x},h=cr.updateQueue,h===null?(h=nh(),cr.updateQueue=h,h.stores=[c]):(x=h.stores,x===null?h.stores=[c]:x.push(c))}function sx(c,h,x,w){h.value=x,h.getSnapshot=w,i0(h)&&ox(c)}function ix(c,h,x){return x(function(){i0(h)&&ox(c)})}function i0(c){var h=c.getSnapshot;c=c.value;try{var x=h();return!ms(c,x)}catch{return!0}}function ox(c){var h=tc(c,2);h!==null&&uo(h,c,2)}function Vc(c){var h=as();if(typeof c=="function"){var x=c;if(c=x(),Ys){Lt(!0);try{x()}finally{Lt(!1)}}}return h.memoizedState=h.baseState=c,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:c},h}function o0(c,h,x,w){return c.baseState=x,Bu(c,dr,typeof w=="function"?w:sl)}function l0(c,h,x,w,E){if(f0(c))throw Error(a(485));if(c=h.action,c!==null){var L={payload:E,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ee){L.listeners.push(ee)}};V.T!==null?x(!0):L.isTransition=!1,w(L),x=h.pending,x===null?(L.next=h.pending=L,c0(h,L)):(L.next=x.next,h.pending=x.next=L)}}function c0(c,h){var x=h.action,w=h.payload,E=c.state;if(h.isTransition){var L=V.T,ee={};V.T=ee;try{var de=x(E,w),_e=V.S;_e!==null&&_e(ee,de),lx(c,h,de)}catch(Ve){Rd(c,h,Ve)}finally{L!==null&&ee.types!==null&&(L.types=ee.types),V.T=L}}else try{L=x(E,w),lx(c,h,L)}catch(Ve){Rd(c,h,Ve)}}function lx(c,h,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(w){d0(c,h,w)},function(w){return Rd(c,h,w)}):d0(c,h,x)}function d0(c,h,x){h.status="fulfilled",h.value=x,Mm(h),c.state=x,h=c.pending,h!==null&&(x=h.next,x===h?c.pending=null:(x=x.next,h.next=x,c0(c,x)))}function Rd(c,h,x){var w=c.pending;if(c.pending=null,w!==null){w=w.next;do h.status="rejected",h.reason=x,Mm(h),h=h.next;while(h!==w)}c.action=null}function Mm(c){c=c.listeners;for(var h=0;h<c.length;h++)(0,c[h])()}function ah(c,h){return h}function il(c,h){if(Xr){var x=Gn.formState;if(x!==null){e:{var w=cr;if(Xr){if(Vn){t:{for(var E=Vn,L=ma;E.nodeType!==8;){if(!L){E=null;break t}if(E=ol(E.nextSibling),E===null){E=null;break t}}L=E.data,E=L==="F!"||L==="F"?E:null}if(E){Vn=ol(E.nextSibling),w=E.data==="F!";break e}}Lc(w)}w=!1}w&&(h=x[0])}}return x=as(),x.memoizedState=x.baseState=h,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ah,lastRenderedState:h},x.queue=w,x=OE.bind(null,cr,w),w.dispatch=x,w=Vc(!1),L=aw.bind(null,cr,!1,w.queue),w=as(),E={state:h,dispatch:null,action:c,pending:null},w.queue=E,x=l0.bind(null,cr,E,L,x),E.dispatch=x,w.memoizedState=c,[h,x,!1]}function sc(c){var h=ga();return ic(h,dr,c)}function ic(c,h,x){if(h=Bu(c,h,ah)[0],c=Tm(sl)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var w=Uc(h)}catch(ee){throw ee===Te?xe:ee}else w=h;h=ga();var E=h.queue,L=E.dispatch;return x!==h.memoizedState&&(cr.flags|=2048,Pd(9,{destroy:void 0},Dm.bind(null,E,x),null)),[w,L,c]}function Dm(c,h){c.action=h}function Lm(c){var h=ga(),x=dr;if(x!==null)return ic(h,x,c);ga(),h=h.memoizedState,x=ga();var w=x.queue.dispatch;return x.memoizedState=c,[h,w,!1]}function Pd(c,h,x,w){return c={tag:c,create:x,deps:w,inst:h,next:null},h=cr.updateQueue,h===null&&(h=nh(),cr.updateQueue=h),x=h.lastEffect,x===null?h.lastEffect=c.next=c:(w=x.next,x.next=c,c.next=w,h.lastEffect=c),c}function u0(){return ga().memoizedState}function zu(c,h,x,w){var E=as();cr.flags|=c,E.memoizedState=Pd(1|h,{destroy:void 0},x,w===void 0?null:w)}function qu(c,h,x,w){var E=ga();w=w===void 0?null:w;var L=E.memoizedState.inst;dr!==null&&w!==null&&tx(w,dr.memoizedState.deps)?E.memoizedState=Pd(h,L,x,w):(cr.flags|=c,E.memoizedState=Pd(1|h,L,x,w))}function pE(c,h){zu(8390656,8,c,h)}function Q2(c,h){qu(2048,8,c,h)}function rJ(c){cr.flags|=4;var h=cr.updateQueue;if(h===null)h=nh(),cr.updateQueue=h,h.events=[c];else{var x=h.events;x===null?h.events=[c]:x.push(c)}}function gE(c){var h=ga().memoizedState;return rJ({ref:h,nextImpl:c}),function(){if((vn&2)!==0)throw Error(a(440));return h.impl.apply(void 0,arguments)}}function xE(c,h){return qu(4,2,c,h)}function vE(c,h){return qu(4,4,c,h)}function yE(c,h){if(typeof h=="function"){c=c();var x=h(c);return function(){typeof x=="function"?x():h(null)}}if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function bE(c,h,x){x=x!=null?x.concat([c]):null,qu(4,4,yE.bind(null,h,c),x)}function ew(){}function jE(c,h){var x=ga();h=h===void 0?null:h;var w=x.memoizedState;return h!==null&&tx(h,w[1])?w[0]:(x.memoizedState=[c,h],c)}function wE(c,h){var x=ga();h=h===void 0?null:h;var w=x.memoizedState;if(h!==null&&tx(h,w[1]))return w[0];if(w=c(),Ys){Lt(!0);try{c()}finally{Lt(!1)}}return x.memoizedState=[w,h],w}function tw(c,h,x){return x===void 0||(pa&1073741824)!==0&&(Qr&261930)===0?c.memoizedState=h:(c.memoizedState=x,c=NT(),cr.lanes|=c,Hu|=c,x)}function NE(c,h,x,w){return ms(x,h)?x:Gr.current!==null?(c=tw(c,x,w),ms(c,h)||(ss=!0),c):(pa&42)===0||(pa&1073741824)!==0&&(Qr&261930)===0?(ss=!0,c.memoizedState=x):(c=NT(),cr.lanes|=c,Hu|=c,h)}function SE(c,h,x,w,E){var L=G.p;G.p=L!==0&&8>L?L:8;var ee=V.T,de={};V.T=de,aw(c,!1,h,x);try{var _e=E(),Ve=V.S;if(Ve!==null&&Ve(de,_e),_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var tt=re(_e,w);cx(c,h,tt,To(c))}else cx(c,h,w,To(c))}catch(ot){cx(c,h,{then:function(){},status:"rejected",reason:ot},To())}finally{G.p=L,ee!==null&&de.types!==null&&(ee.types=de.types),V.T=ee}}function nJ(){}function rw(c,h,x,w){if(c.tag!==5)throw Error(a(476));var E=CE(c).queue;SE(c,E,h,q,x===null?nJ:function(){return _E(c),x(w)})}function CE(c){var h=c.memoizedState;if(h!==null)return h;h={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:q},next:null};var x={};return h.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:x},next:null},c.memoizedState=h,c=c.alternate,c!==null&&(c.memoizedState=h),h}function _E(c){var h=CE(c);h.next===null&&(h=c.alternate.memoizedState),cx(c,h.next.queue,{},To())}function nw(){return vs(_x)}function AE(){return ga().memoizedState}function kE(){return ga().memoizedState}function aJ(c){for(var h=c.return;h!==null;){switch(h.tag){case 24:case 3:var x=To();c=pr(x);var w=Br(h,c,x);w!==null&&(uo(w,h,x),gn(w,h,x)),h={cache:$u()},c.payload=h;return}h=h.return}}function sJ(c,h,x){var w=To();x={lane:w,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},f0(c)?EE(h,x):(x=xm(c,h,x,w),x!==null&&(uo(x,c,w),TE(x,h,w)))}function OE(c,h,x){var w=To();cx(c,h,x,w)}function cx(c,h,x,w){var E={lane:w,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(f0(c))EE(h,E);else{var L=c.alternate;if(c.lanes===0&&(L===null||L.lanes===0)&&(L=h.lastRenderedReducer,L!==null))try{var ee=h.lastRenderedState,de=L(ee,x);if(E.hasEagerState=!0,E.eagerState=de,ms(de,ee))return Xf(c,h,E,0),Gn===null&&Yf(),!1}catch{}finally{}if(x=xm(c,h,E,w),x!==null)return uo(x,c,w),TE(x,h,w),!0}return!1}function aw(c,h,x,w){if(w={lane:2,revertLane:Lw(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},f0(c)){if(h)throw Error(a(479))}else h=xm(c,x,w,2),h!==null&&uo(h,c,2)}function f0(c){var h=c.alternate;return c===cr||h!==null&&h===cr}function EE(c,h){so=ui=!0;var x=c.pending;x===null?h.next=h:(h.next=x.next,x.next=h),c.pending=h}function TE(c,h,x){if((x&4194048)!==0){var w=h.lanes;w&=c.pendingLanes,x|=w,h.lanes=x,ks(c,x)}}var dx={readContext:vs,use:Fu,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n,useHostTransitionStatus:$n,useFormState:$n,useActionState:$n,useOptimistic:$n,useMemoCache:$n,useCacheRefresh:$n};dx.useEffectEvent=$n;var RE={readContext:vs,use:Fu,useCallback:function(c,h){return as().memoizedState=[c,h===void 0?null:h],c},useContext:vs,useEffect:pE,useImperativeHandle:function(c,h,x){x=x!=null?x.concat([c]):null,zu(4194308,4,yE.bind(null,h,c),x)},useLayoutEffect:function(c,h){return zu(4194308,4,c,h)},useInsertionEffect:function(c,h){zu(4,2,c,h)},useMemo:function(c,h){var x=as();h=h===void 0?null:h;var w=c();if(Ys){Lt(!0);try{c()}finally{Lt(!1)}}return x.memoizedState=[w,h],w},useReducer:function(c,h,x){var w=as();if(x!==void 0){var E=x(h);if(Ys){Lt(!0);try{x(h)}finally{Lt(!1)}}}else E=h;return w.memoizedState=w.baseState=E,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:E},w.queue=c,c=c.dispatch=sJ.bind(null,cr,c),[w.memoizedState,c]},useRef:function(c){var h=as();return c={current:c},h.memoizedState=c},useState:function(c){c=Vc(c);var h=c.queue,x=OE.bind(null,cr,h);return h.dispatch=x,[c.memoizedState,x]},useDebugValue:ew,useDeferredValue:function(c,h){var x=as();return tw(x,c,h)},useTransition:function(){var c=Vc(!1);return c=SE.bind(null,cr,c.queue,!0,!1),as().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,h,x){var w=cr,E=as();if(Xr){if(x===void 0)throw Error(a(407));x=x()}else{if(x=h(),Gn===null)throw Error(a(349));(Qr&127)!==0||ac(w,h,x)}E.memoizedState=x;var L={value:x,getSnapshot:h};return E.queue=L,pE(ix.bind(null,w,L,c),[c]),w.flags|=2048,Pd(9,{destroy:void 0},sx.bind(null,w,L,x,h),null),x},useId:function(){var c=as(),h=Gn.identifierPrefix;if(Xr){var x=no,w=ro;x=(w&~(1<<32-sr(w)-1)).toString(32)+x,h="_"+h+"R_"+x,x=Ba++,0<x&&(h+="H"+x.toString(32)),h+="_"}else x=km++,h="_"+h+"r_"+x.toString(32)+"_";return c.memoizedState=h},useHostTransitionStatus:nw,useFormState:il,useActionState:il,useOptimistic:function(c){var h=as();h.memoizedState=h.baseState=c;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=x,h=aw.bind(null,cr,!0,x),x.dispatch=h,[c,h]},useMemoCache:Td,useCacheRefresh:function(){return as().memoizedState=aJ.bind(null,cr)},useEffectEvent:function(c){var h=as(),x={impl:c};return h.memoizedState=x,function(){if((vn&2)!==0)throw Error(a(440));return x.impl.apply(void 0,arguments)}}},sw={readContext:vs,use:Fu,useCallback:jE,useContext:vs,useEffect:Q2,useImperativeHandle:bE,useInsertionEffect:xE,useLayoutEffect:vE,useMemo:wE,useReducer:Tm,useRef:u0,useState:function(){return Tm(sl)},useDebugValue:ew,useDeferredValue:function(c,h){var x=ga();return NE(x,dr.memoizedState,c,h)},useTransition:function(){var c=Tm(sl)[0],h=ga().memoizedState;return[typeof c=="boolean"?c:Uc(c),h]},useSyncExternalStore:Pm,useId:AE,useHostTransitionStatus:nw,useFormState:sc,useActionState:sc,useOptimistic:function(c,h){var x=ga();return o0(x,dr,c,h)},useMemoCache:Td,useCacheRefresh:kE};sw.useEffectEvent=gE;var PE={readContext:vs,use:Fu,useCallback:jE,useContext:vs,useEffect:Q2,useImperativeHandle:bE,useInsertionEffect:xE,useLayoutEffect:vE,useMemo:wE,useReducer:Rm,useRef:u0,useState:function(){return Rm(sl)},useDebugValue:ew,useDeferredValue:function(c,h){var x=ga();return dr===null?tw(x,c,h):NE(x,dr.memoizedState,c,h)},useTransition:function(){var c=Rm(sl)[0],h=ga().memoizedState;return[typeof c=="boolean"?c:Uc(c),h]},useSyncExternalStore:Pm,useId:AE,useHostTransitionStatus:nw,useFormState:Lm,useActionState:Lm,useOptimistic:function(c,h){var x=ga();return dr!==null?o0(x,dr,c,h):(x.baseState=c,[c,x.queue.dispatch])},useMemoCache:Td,useCacheRefresh:kE};PE.useEffectEvent=gE;function iw(c,h,x,w){h=c.memoizedState,x=x(w,h),x=x==null?h:m({},h,x),c.memoizedState=x,c.lanes===0&&(c.updateQueue.baseState=x)}var ow={enqueueSetState:function(c,h,x){c=c._reactInternals;var w=To(),E=pr(w);E.payload=h,x!=null&&(E.callback=x),h=Br(c,E,w),h!==null&&(uo(h,c,w),gn(h,c,w))},enqueueReplaceState:function(c,h,x){c=c._reactInternals;var w=To(),E=pr(w);E.tag=1,E.payload=h,x!=null&&(E.callback=x),h=Br(c,E,w),h!==null&&(uo(h,c,w),gn(h,c,w))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var x=To(),w=pr(x);w.tag=2,h!=null&&(w.callback=h),h=Br(c,w,x),h!==null&&(uo(h,c,x),gn(h,c,x))}};function ME(c,h,x,w,E,L,ee){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(w,L,ee):h.prototype&&h.prototype.isPureReactComponent?!Jl(x,w)||!Jl(E,L):!0}function DE(c,h,x,w){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,w),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,w),h.state!==c&&ow.enqueueReplaceState(h,h.state,null)}function sh(c,h){var x=h;if("ref"in h){x={};for(var w in h)w!=="ref"&&(x[w]=h[w])}if(c=c.defaultProps){x===h&&(x=m({},x));for(var E in c)x[E]===void 0&&(x[E]=c[E])}return x}function LE(c){Kf(c)}function IE(c){console.error(c)}function $E(c){Kf(c)}function h0(c,h){try{var x=c.onUncaughtError;x(h.value,{componentStack:h.stack})}catch(w){setTimeout(function(){throw w})}}function FE(c,h,x){try{var w=c.onCaughtError;w(x.value,{componentStack:x.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function lw(c,h,x){return x=pr(x),x.tag=3,x.payload={element:null},x.callback=function(){h0(c,h)},x}function BE(c){return c=pr(c),c.tag=3,c}function zE(c,h,x,w){var E=x.type.getDerivedStateFromError;if(typeof E=="function"){var L=w.value;c.payload=function(){return E(L)},c.callback=function(){FE(h,x,w)}}var ee=x.stateNode;ee!==null&&typeof ee.componentDidCatch=="function"&&(c.callback=function(){FE(h,x,w),typeof E!="function"&&(Gu===null?Gu=new Set([this]):Gu.add(this));var de=w.stack;this.componentDidCatch(w.value,{componentStack:de!==null?de:""})})}function iJ(c,h,x,w,E){if(x.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(h=x.alternate,h!==null&&Fc(h,x,E,!0),x=sa.current,x!==null){switch(x.tag){case 31:case 13:return on===null?C0():x.alternate===null&&za===0&&(za=3),x.flags&=-257,x.flags|=65536,x.lanes=E,w===Me?x.flags|=16384:(h=x.updateQueue,h===null?x.updateQueue=new Set([w]):h.add(w),Pw(c,w,E)),!1;case 22:return x.flags|=65536,w===Me?x.flags|=16384:(h=x.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([w])},x.updateQueue=h):(x=h.retryQueue,x===null?h.retryQueue=new Set([w]):x.add(w)),Pw(c,w,E)),!1}throw Error(a(435,x.tag))}return Pw(c,w,E),C0(),!1}if(Xr)return h=sa.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=E,w!==ko&&(c=Error(a(422),{cause:w}),Lu(Qi(c,x)))):(w!==ko&&(h=Error(a(423),{cause:w}),Lu(Qi(h,x))),c=c.current.alternate,c.flags|=65536,E&=-E,c.lanes|=E,w=Qi(w,x),E=lw(c.stateNode,w,E),Wa(c,E),za!==4&&(za=2)),!1;var L=Error(a(520),{cause:w});if(L=Qi(L,x),vx===null?vx=[L]:vx.push(L),za!==4&&(za=2),h===null)return!0;w=Qi(w,x),x=h;do{switch(x.tag){case 3:return x.flags|=65536,c=E&-E,x.lanes|=c,c=lw(x.stateNode,w,c),Wa(x,c),!1;case 1:if(h=x.type,L=x.stateNode,(x.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Gu===null||!Gu.has(L))))return x.flags|=65536,E&=-E,x.lanes|=E,E=BE(E),zE(E,c,x,w),Wa(x,E),!1}x=x.return}while(x!==null);return!1}var cw=Error(a(461)),ss=!1;function Xs(c,h,x,w){h.child=c===null?Dr(h,null,x,w):Hn(h,c.child,x,w)}function qE(c,h,x,w,E){x=x.render;var L=h.ref;if("ref"in w){var ee={};for(var de in w)de!=="ref"&&(ee[de]=w[de])}else ee=w;return Bc(h),w=rx(c,h,x,ee,L,E),de=nx(),c!==null&&!ss?(ax(c,h,E),Md(c,h,E)):(Xr&&de&&Zg(h),h.flags|=1,Xs(c,h,w,E),h.child)}function UE(c,h,x,w,E){if(c===null){var L=x.type;return typeof L=="function"&&!ym(L)&&L.defaultProps===void 0&&x.compare===null?(h.tag=15,h.type=L,VE(c,h,L,w,E)):(c=Pu(x.type,null,w,h,h.mode,E),c.ref=h.ref,c.return=h,h.child=c)}if(L=c.child,!xw(c,E)){var ee=L.memoizedProps;if(x=x.compare,x=x!==null?x:Jl,x(ee,w)&&c.ref===h.ref)return Md(c,h,E)}return h.flags|=1,c=Zi(L,w),c.ref=h.ref,c.return=h,h.child=c}function VE(c,h,x,w,E){if(c!==null){var L=c.memoizedProps;if(Jl(L,w)&&c.ref===h.ref)if(ss=!1,h.pendingProps=w=L,xw(c,E))(c.flags&131072)!==0&&(ss=!0);else return h.lanes=c.lanes,Md(c,h,E)}return dw(c,h,x,w,E)}function HE(c,h,x,w){var E=w.children,L=c!==null?c.memoizedState:null;if(c===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((h.flags&128)!==0){if(L=L!==null?L.baseLanes|x:x,c!==null){for(w=h.child=c.child,E=0;w!==null;)E=E|w.lanes|w.childLanes,w=w.sibling;w=E&~L}else w=0,h.child=null;return GE(c,h,L,x,w)}if((x&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},c!==null&&me(h,L!==null?L.cachePool:null),L!==null?aa(h,L):dn(),$a(h);else return w=h.lanes=536870912,GE(c,h,L!==null?L.baseLanes|x:x,x,w)}else L!==null?(me(h,L.cachePool),aa(h,L),Fa(),h.memoizedState=null):(c!==null&&me(h,null),dn(),Fa());return Xs(c,h,E,x),h.child}function ux(c,h){return c!==null&&c.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function GE(c,h,x,w,E){var L=fe();return L=L===null?null:{parent:Oa._currentValue,pool:L},h.memoizedState={baseLanes:x,cachePool:L},c!==null&&me(h,null),dn(),$a(h),c!==null&&Fc(c,h,w,!0),h.childLanes=E,null}function m0(c,h){return h=g0({mode:h.mode,children:h.children},c.mode),h.ref=c.ref,c.child=h,h.return=c,h}function WE(c,h,x){return Hn(h,c.child,null,x),c=m0(h,h.pendingProps),c.flags|=2,kn(h),h.memoizedState=null,c}function oJ(c,h,x){var w=h.pendingProps,E=(h.flags&128)!==0;if(h.flags&=-129,c===null){if(Xr){if(w.mode==="hidden")return c=m0(h,w),h.lanes=536870912,ux(null,c);if(xn(h),(c=Vn)?(c=sR(c,ma),c=c!==null&&c.data==="&"?c:null,c!==null&&(h.memoizedState={dehydrated:c,treeContext:Dc!==null?{id:ro,overflow:no}:null,retryLane:536870912,hydrationErrors:null},x=bm(c),x.return=h,h.child=x,gs=h,Vn=null)):c=null,c===null)throw Lc(h);return h.lanes=536870912,null}return m0(h,w)}var L=c.memoizedState;if(L!==null){var ee=L.dehydrated;if(xn(h),E)if(h.flags&256)h.flags&=-257,h=WE(c,h,x);else if(h.memoizedState!==null)h.child=c.child,h.flags|=128,h=null;else throw Error(a(558));else if(ss||Fc(c,h,x,!1),E=(x&c.childLanes)!==0,ss||E){if(w=Gn,w!==null&&(ee=Ha(w,x),ee!==0&&ee!==L.retryLane))throw L.retryLane=ee,tc(c,ee),uo(w,c,ee),cw;C0(),h=WE(c,h,x)}else c=L.treeContext,Vn=ol(ee.nextSibling),gs=h,Xr=!0,Ks=null,ma=!1,c!==null&&a0(h,c),h=m0(h,w),h.flags|=4096;return h}return c=Zi(c.child,{mode:w.mode,children:w.children}),c.ref=h.ref,h.child=c,c.return=h,c}function p0(c,h){var x=h.ref;if(x===null)c!==null&&c.ref!==null&&(h.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(a(284));(c===null||c.ref!==x)&&(h.flags|=4194816)}}function dw(c,h,x,w,E){return Bc(h),x=rx(c,h,x,w,void 0,E),w=nx(),c!==null&&!ss?(ax(c,h,E),Md(c,h,E)):(Xr&&w&&Zg(h),h.flags|=1,Xs(c,h,x,E),h.child)}function KE(c,h,x,w,E,L){return Bc(h),h.updateQueue=null,x=nc(h,w,x,E),Om(c),w=nx(),c!==null&&!ss?(ax(c,h,L),Md(c,h,L)):(Xr&&w&&Zg(h),h.flags|=1,Xs(c,h,x,L),h.child)}function YE(c,h,x,w,E){if(Bc(h),h.stateNode===null){var L=ps,ee=x.contextType;typeof ee=="object"&&ee!==null&&(L=vs(ee)),L=new x(w,L),h.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=ow,h.stateNode=L,L._reactInternals=h,L=h.stateNode,L.props=w,L.state=h.memoizedState,L.refs={},wt(h),ee=x.contextType,L.context=typeof ee=="object"&&ee!==null?vs(ee):ps,L.state=h.memoizedState,ee=x.getDerivedStateFromProps,typeof ee=="function"&&(iw(h,x,ee,w),L.state=h.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(ee=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),ee!==L.state&&ow.enqueueReplaceState(L,L.state,null),La(h,w,L,E),In(),L.state=h.memoizedState),typeof L.componentDidMount=="function"&&(h.flags|=4194308),w=!0}else if(c===null){L=h.stateNode;var de=h.memoizedProps,_e=sh(x,de);L.props=_e;var Ve=L.context,tt=x.contextType;ee=ps,typeof tt=="object"&&tt!==null&&(ee=vs(tt));var ot=x.getDerivedStateFromProps;tt=typeof ot=="function"||typeof L.getSnapshotBeforeUpdate=="function",de=h.pendingProps!==de,tt||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(de||Ve!==ee)&&DE(h,L,w,ee),Ft=!1;var We=h.memoizedState;L.state=We,La(h,w,L,E),In(),Ve=h.memoizedState,de||We!==Ve||Ft?(typeof ot=="function"&&(iw(h,x,ot,w),Ve=h.memoizedState),(_e=Ft||ME(h,x,_e,w,We,Ve,ee))?(tt||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(h.flags|=4194308)):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=w,h.memoizedState=Ve),L.props=w,L.state=Ve,L.context=ee,w=_e):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),w=!1)}else{L=h.stateNode,na(c,h),ee=h.memoizedProps,tt=sh(x,ee),L.props=tt,ot=h.pendingProps,We=L.context,Ve=x.contextType,_e=ps,typeof Ve=="object"&&Ve!==null&&(_e=vs(Ve)),de=x.getDerivedStateFromProps,(Ve=typeof de=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(ee!==ot||We!==_e)&&DE(h,L,w,_e),Ft=!1,We=h.memoizedState,L.state=We,La(h,w,L,E),In();var Je=h.memoizedState;ee!==ot||We!==Je||Ft||c!==null&&c.dependencies!==null&&Cm(c.dependencies)?(typeof de=="function"&&(iw(h,x,de,w),Je=h.memoizedState),(tt=Ft||ME(h,x,tt,w,We,Je,_e)||c!==null&&c.dependencies!==null&&Cm(c.dependencies))?(Ve||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(w,Je,_e),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(w,Je,_e)),typeof L.componentDidUpdate=="function"&&(h.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof L.componentDidUpdate!="function"||ee===c.memoizedProps&&We===c.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||ee===c.memoizedProps&&We===c.memoizedState||(h.flags|=1024),h.memoizedProps=w,h.memoizedState=Je),L.props=w,L.state=Je,L.context=_e,w=tt):(typeof L.componentDidUpdate!="function"||ee===c.memoizedProps&&We===c.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||ee===c.memoizedProps&&We===c.memoizedState||(h.flags|=1024),w=!1)}return L=w,p0(c,h),w=(h.flags&128)!==0,L||w?(L=h.stateNode,x=w&&typeof x.getDerivedStateFromError!="function"?null:L.render(),h.flags|=1,c!==null&&w?(h.child=Hn(h,c.child,null,E),h.child=Hn(h,null,x,E)):Xs(c,h,x,E),h.memoizedState=L.state,c=h.child):c=Md(c,h,E),c}function XE(c,h,x,w){return Od(),h.flags|=256,Xs(c,h,x,w),h.child}var uw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fw(c){return{baseLanes:c,cachePool:ve()}}function hw(c,h,x){return c=c!==null?c.childLanes&~x:0,h&&(c|=Eo),c}function JE(c,h,x){var w=h.pendingProps,E=!1,L=(h.flags&128)!==0,ee;if((ee=L)||(ee=c!==null&&c.memoizedState===null?!1:(an.current&2)!==0),ee&&(E=!0,h.flags&=-129),ee=(h.flags&32)!==0,h.flags&=-33,c===null){if(Xr){if(E?Ea(h):Fa(),(c=Vn)?(c=sR(c,ma),c=c!==null&&c.data!=="&"?c:null,c!==null&&(h.memoizedState={dehydrated:c,treeContext:Dc!==null?{id:ro,overflow:no}:null,retryLane:536870912,hydrationErrors:null},x=bm(c),x.return=h,h.child=x,gs=h,Vn=null)):c=null,c===null)throw Lc(h);return Yw(c)?h.lanes=32:h.lanes=536870912,null}var de=w.children;return w=w.fallback,E?(Fa(),E=h.mode,de=g0({mode:"hidden",children:de},E),w=Mc(w,E,x,null),de.return=h,w.return=h,de.sibling=w,h.child=de,w=h.child,w.memoizedState=fw(x),w.childLanes=hw(c,ee,x),h.memoizedState=uw,ux(null,w)):(Ea(h),mw(h,de))}var _e=c.memoizedState;if(_e!==null&&(de=_e.dehydrated,de!==null)){if(L)h.flags&256?(Ea(h),h.flags&=-257,h=pw(c,h,x)):h.memoizedState!==null?(Fa(),h.child=c.child,h.flags|=128,h=null):(Fa(),de=w.fallback,E=h.mode,w=g0({mode:"visible",children:w.children},E),de=Mc(de,E,x,null),de.flags|=2,w.return=h,de.return=h,w.sibling=de,h.child=w,Hn(h,c.child,null,x),w=h.child,w.memoizedState=fw(x),w.childLanes=hw(c,ee,x),h.memoizedState=uw,h=ux(null,w));else if(Ea(h),Yw(de)){if(ee=de.nextSibling&&de.nextSibling.dataset,ee)var Ve=ee.dgst;ee=Ve,w=Error(a(419)),w.stack="",w.digest=ee,Lu({value:w,source:null,stack:null}),h=pw(c,h,x)}else if(ss||Fc(c,h,x,!1),ee=(x&c.childLanes)!==0,ss||ee){if(ee=Gn,ee!==null&&(w=Ha(ee,x),w!==0&&w!==_e.retryLane))throw _e.retryLane=w,tc(c,w),uo(ee,c,w),cw;Kw(de)||C0(),h=pw(c,h,x)}else Kw(de)?(h.flags|=192,h.child=c.child,h=null):(c=_e.treeContext,Vn=ol(de.nextSibling),gs=h,Xr=!0,Ks=null,ma=!1,c!==null&&a0(h,c),h=mw(h,w.children),h.flags|=4096);return h}return E?(Fa(),de=w.fallback,E=h.mode,_e=c.child,Ve=_e.sibling,w=Zi(_e,{mode:"hidden",children:w.children}),w.subtreeFlags=_e.subtreeFlags&65011712,Ve!==null?de=Zi(Ve,de):(de=Mc(de,E,x,null),de.flags|=2),de.return=h,w.return=h,w.sibling=de,h.child=w,ux(null,w),w=h.child,de=c.child.memoizedState,de===null?de=fw(x):(E=de.cachePool,E!==null?(_e=Oa._currentValue,E=E.parent!==_e?{parent:_e,pool:_e}:E):E=ve(),de={baseLanes:de.baseLanes|x,cachePool:E}),w.memoizedState=de,w.childLanes=hw(c,ee,x),h.memoizedState=uw,ux(c.child,w)):(Ea(h),x=c.child,c=x.sibling,x=Zi(x,{mode:"visible",children:w.children}),x.return=h,x.sibling=null,c!==null&&(ee=h.deletions,ee===null?(h.deletions=[c],h.flags|=16):ee.push(c)),h.child=x,h.memoizedState=null,x)}function mw(c,h){return h=g0({mode:"visible",children:h},c.mode),h.return=c,c.child=h}function g0(c,h){return c=Rs(22,c,null,h),c.lanes=0,c}function pw(c,h,x){return Hn(h,c.child,null,x),c=mw(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function ZE(c,h,x){c.lanes|=h;var w=c.alternate;w!==null&&(w.lanes|=h),Iu(c.return,h,x)}function gw(c,h,x,w,E,L){var ee=c.memoizedState;ee===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:w,tail:x,tailMode:E,treeForkCount:L}:(ee.isBackwards=h,ee.rendering=null,ee.renderingStartTime=0,ee.last=w,ee.tail=x,ee.tailMode=E,ee.treeForkCount=L)}function QE(c,h,x){var w=h.pendingProps,E=w.revealOrder,L=w.tail;w=w.children;var ee=an.current,de=(ee&2)!==0;if(de?(ee=ee&1|2,h.flags|=128):ee&=1,H(an,ee),Xs(c,h,w,x),w=Xr?eh:0,!de&&c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&ZE(c,x,h);else if(c.tag===19)ZE(c,x,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(E){case"forwards":for(x=h.child,E=null;x!==null;)c=x.alternate,c!==null&&Ms(c)===null&&(E=x),x=x.sibling;x=E,x===null?(E=h.child,h.child=null):(E=x.sibling,x.sibling=null),gw(h,!1,E,x,L,w);break;case"backwards":case"unstable_legacy-backwards":for(x=null,E=h.child,h.child=null;E!==null;){if(c=E.alternate,c!==null&&Ms(c)===null){h.child=E;break}c=E.sibling,E.sibling=x,x=E,E=c}gw(h,!0,x,null,L,w);break;case"together":gw(h,!1,null,null,void 0,w);break;default:h.memoizedState=null}return h.child}function Md(c,h,x){if(c!==null&&(h.dependencies=c.dependencies),Hu|=h.lanes,(x&h.childLanes)===0)if(c!==null){if(Fc(c,h,x,!1),(x&h.childLanes)===0)return null}else return null;if(c!==null&&h.child!==c.child)throw Error(a(153));if(h.child!==null){for(c=h.child,x=Zi(c,c.pendingProps),h.child=x,x.return=h;c.sibling!==null;)c=c.sibling,x=x.sibling=Zi(c,c.pendingProps),x.return=h;x.sibling=null}return h.child}function xw(c,h){return(c.lanes&h)!==0?!0:(c=c.dependencies,!!(c!==null&&Cm(c)))}function lJ(c,h,x){switch(h.tag){case 3:ge(h,h.stateNode.containerInfo),$c(h,Oa,c.memoizedState.cache),Od();break;case 27:case 5:ue(h);break;case 4:ge(h,h.stateNode.containerInfo);break;case 10:$c(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,xn(h),null;break;case 13:var w=h.memoizedState;if(w!==null)return w.dehydrated!==null?(Ea(h),h.flags|=128,null):(x&h.child.childLanes)!==0?JE(c,h,x):(Ea(h),c=Md(c,h,x),c!==null?c.sibling:null);Ea(h);break;case 19:var E=(c.flags&128)!==0;if(w=(x&h.childLanes)!==0,w||(Fc(c,h,x,!1),w=(x&h.childLanes)!==0),E){if(w)return QE(c,h,x);h.flags|=128}if(E=h.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),H(an,an.current),w)break;return null;case 22:return h.lanes=0,HE(c,h,x,h.pendingProps);case 24:$c(h,Oa,c.memoizedState.cache)}return Md(c,h,x)}function eT(c,h,x){if(c!==null)if(c.memoizedProps!==h.pendingProps)ss=!0;else{if(!xw(c,x)&&(h.flags&128)===0)return ss=!1,lJ(c,h,x);ss=(c.flags&131072)!==0}else ss=!1,Xr&&(h.flags&1048576)!==0&&n0(h,eh,h.index);switch(h.lanes=0,h.tag){case 16:e:{var w=h.pendingProps;if(c=ze(h.elementType),h.type=c,typeof c=="function")ym(c)?(w=sh(c,w),h.tag=1,h=YE(null,h,c,w,x)):(h.tag=0,h=dw(null,h,c,w,x));else{if(c!=null){var E=c.$$typeof;if(E===A){h.tag=11,h=qE(null,h,c,w,x);break e}else if(E===O){h.tag=14,h=UE(null,h,c,w,x);break e}}throw h=U(c)||c,Error(a(306,h,""))}}return h;case 0:return dw(c,h,h.type,h.pendingProps,x);case 1:return w=h.type,E=sh(w,h.pendingProps),YE(c,h,w,E,x);case 3:e:{if(ge(h,h.stateNode.containerInfo),c===null)throw Error(a(387));w=h.pendingProps;var L=h.memoizedState;E=L.element,na(c,h),La(h,w,null,x);var ee=h.memoizedState;if(w=ee.cache,$c(h,Oa,w),w!==L.cache&&Ed(h,[Oa],x,!0),In(),w=ee.element,L.isDehydrated)if(L={element:w,isDehydrated:!1,cache:ee.cache},h.updateQueue.baseState=L,h.memoizedState=L,h.flags&256){h=XE(c,h,w,x);break e}else if(w!==E){E=Qi(Error(a(424)),h),Lu(E),h=XE(c,h,w,x);break e}else{switch(c=h.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Vn=ol(c.firstChild),gs=h,Xr=!0,Ks=null,ma=!0,x=Dr(h,null,w,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(Od(),w===E){h=Md(c,h,x);break e}Xs(c,h,w,x)}h=h.child}return h;case 26:return p0(c,h),c===null?(x=uR(h.type,null,h.pendingProps,null))?h.memoizedState=x:Xr||(x=h.type,c=h.pendingProps,w=R0(ie.current).createElement(x),w[pn]=h,w[_n]=c,Js(w,x,c),An(w),h.stateNode=w):h.memoizedState=uR(h.type,c.memoizedProps,h.pendingProps,c.memoizedState),null;case 27:return ue(h),c===null&&Xr&&(w=h.stateNode=lR(h.type,h.pendingProps,ie.current),gs=h,ma=!0,E=Vn,Xu(h.type)?(Xw=E,Vn=ol(w.firstChild)):Vn=E),Xs(c,h,h.pendingProps.children,x),p0(c,h),c===null&&(h.flags|=4194304),h.child;case 5:return c===null&&Xr&&((E=w=Vn)&&(w=$J(w,h.type,h.pendingProps,ma),w!==null?(h.stateNode=w,gs=h,Vn=ol(w.firstChild),ma=!1,E=!0):E=!1),E||Lc(h)),ue(h),E=h.type,L=h.pendingProps,ee=c!==null?c.memoizedProps:null,w=L.children,Hw(E,L)?w=null:ee!==null&&Hw(E,ee)&&(h.flags|=32),h.memoizedState!==null&&(E=rx(c,h,Z2,null,null,x),_x._currentValue=E),p0(c,h),Xs(c,h,w,x),h.child;case 6:return c===null&&Xr&&((c=x=Vn)&&(x=FJ(x,h.pendingProps,ma),x!==null?(h.stateNode=x,gs=h,Vn=null,c=!0):c=!1),c||Lc(h)),null;case 13:return JE(c,h,x);case 4:return ge(h,h.stateNode.containerInfo),w=h.pendingProps,c===null?h.child=Hn(h,null,w,x):Xs(c,h,w,x),h.child;case 11:return qE(c,h,h.type,h.pendingProps,x);case 7:return Xs(c,h,h.pendingProps,x),h.child;case 8:return Xs(c,h,h.pendingProps.children,x),h.child;case 12:return Xs(c,h,h.pendingProps.children,x),h.child;case 10:return w=h.pendingProps,$c(h,h.type,w.value),Xs(c,h,w.children,x),h.child;case 9:return E=h.type._context,w=h.pendingProps.children,Bc(h),E=vs(E),w=w(E),h.flags|=1,Xs(c,h,w,x),h.child;case 14:return UE(c,h,h.type,h.pendingProps,x);case 15:return VE(c,h,h.type,h.pendingProps,x);case 19:return QE(c,h,x);case 31:return oJ(c,h,x);case 22:return HE(c,h,x,h.pendingProps);case 24:return Bc(h),w=vs(Oa),c===null?(E=fe(),E===null&&(E=Gn,L=$u(),E.pooledCache=L,L.refCount++,L!==null&&(E.pooledCacheLanes|=x),E=L),h.memoizedState={parent:w,cache:E},wt(h),$c(h,Oa,E)):((c.lanes&x)!==0&&(na(c,h),La(h,null,null,x),In()),E=c.memoizedState,L=h.memoizedState,E.parent!==w?(E={parent:w,cache:w},h.memoizedState=E,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=E),$c(h,Oa,w)):(w=L.cache,$c(h,Oa,w),w!==E.cache&&Ed(h,[Oa],x,!0))),Xs(c,h,h.pendingProps.children,x),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function Dd(c){c.flags|=4}function vw(c,h,x,w,E){if((h=(c.mode&32)!==0)&&(h=!1),h){if(c.flags|=16777216,(E&335544128)===E)if(c.stateNode.complete)c.flags|=8192;else if(AT())c.flags|=8192;else throw Ze=Me,qe}else c.flags&=-16777217}function tT(c,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!gR(h))if(AT())c.flags|=8192;else throw Ze=Me,qe}function x0(c,h){h!==null&&(c.flags|=4),c.flags&16384&&(h=c.tag!==22?As():536870912,c.lanes|=h,Bm|=h)}function fx(c,h){if(!Xr)switch(c.tailMode){case"hidden":h=c.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?c.tail=null:x.sibling=null;break;case"collapsed":x=c.tail;for(var w=null;x!==null;)x.alternate!==null&&(w=x),x=x.sibling;w===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:w.sibling=null}}function ia(c){var h=c.alternate!==null&&c.alternate.child===c.child,x=0,w=0;if(h)for(var E=c.child;E!==null;)x|=E.lanes|E.childLanes,w|=E.subtreeFlags&65011712,w|=E.flags&65011712,E.return=c,E=E.sibling;else for(E=c.child;E!==null;)x|=E.lanes|E.childLanes,w|=E.subtreeFlags,w|=E.flags,E.return=c,E=E.sibling;return c.subtreeFlags|=w,c.childLanes=x,h}function cJ(c,h,x){var w=h.pendingProps;switch(Nm(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ia(h),null;case 1:return ia(h),null;case 3:return x=h.stateNode,w=null,c!==null&&(w=c.memoizedState.cache),h.memoizedState.cache!==w&&(h.flags|=2048),ao(Oa),he(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(c===null||c.child===null)&&(xs(h)?Dd(h):c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,ex())),ia(h),null;case 26:var E=h.type,L=h.memoizedState;return c===null?(Dd(h),L!==null?(ia(h),tT(h,L)):(ia(h),vw(h,E,null,w,x))):L?L!==c.memoizedState?(Dd(h),ia(h),tT(h,L)):(ia(h),h.flags&=-16777217):(c=c.memoizedProps,c!==w&&Dd(h),ia(h),vw(h,E,c,w,x)),null;case 27:if(Se(h),x=ie.current,E=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==w&&Dd(h);else{if(!w){if(h.stateNode===null)throw Error(a(166));return ia(h),null}c=X.current,xs(h)?Qg(h):(c=lR(E,w,x),h.stateNode=c,Dd(h))}return ia(h),null;case 5:if(Se(h),E=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==w&&Dd(h);else{if(!w){if(h.stateNode===null)throw Error(a(166));return ia(h),null}if(L=X.current,xs(h))Qg(h);else{var ee=R0(ie.current);switch(L){case 1:L=ee.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:L=ee.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":L=ee.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":L=ee.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":L=ee.createElement("div"),L.innerHTML="<script><\/script>",L=L.removeChild(L.firstChild);break;case"select":L=typeof w.is=="string"?ee.createElement("select",{is:w.is}):ee.createElement("select"),w.multiple?L.multiple=!0:w.size&&(L.size=w.size);break;default:L=typeof w.is=="string"?ee.createElement(E,{is:w.is}):ee.createElement(E)}}L[pn]=h,L[_n]=w;e:for(ee=h.child;ee!==null;){if(ee.tag===5||ee.tag===6)L.appendChild(ee.stateNode);else if(ee.tag!==4&&ee.tag!==27&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===h)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===h)break e;ee=ee.return}ee.sibling.return=ee.return,ee=ee.sibling}h.stateNode=L;e:switch(Js(L,E,w),E){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&Dd(h)}}return ia(h),vw(h,h.type,c===null?null:c.memoizedProps,h.pendingProps,x),null;case 6:if(c&&h.stateNode!=null)c.memoizedProps!==w&&Dd(h);else{if(typeof w!="string"&&h.stateNode===null)throw Error(a(166));if(c=ie.current,xs(h)){if(c=h.stateNode,x=h.memoizedProps,w=null,E=gs,E!==null)switch(E.tag){case 27:case 5:w=E.memoizedProps}c[pn]=h,c=!!(c.nodeValue===x||w!==null&&w.suppressHydrationWarning===!0||JT(c.nodeValue,x)),c||Lc(h,!0)}else c=R0(c).createTextNode(w),c[pn]=h,h.stateNode=c}return ia(h),null;case 31:if(x=h.memoizedState,c===null||c.memoizedState!==null){if(w=xs(h),x!==null){if(c===null){if(!w)throw Error(a(318));if(c=h.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(557));c[pn]=h}else Od(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;ia(h),c=!1}else x=ex(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=x),c=!0;if(!c)return h.flags&256?(kn(h),h):(kn(h),null);if((h.flags&128)!==0)throw Error(a(558))}return ia(h),null;case 13:if(w=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(E=xs(h),w!==null&&w.dehydrated!==null){if(c===null){if(!E)throw Error(a(318));if(E=h.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));E[pn]=h}else Od(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;ia(h),E=!1}else E=ex(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=E),E=!0;if(!E)return h.flags&256?(kn(h),h):(kn(h),null)}return kn(h),(h.flags&128)!==0?(h.lanes=x,h):(x=w!==null,c=c!==null&&c.memoizedState!==null,x&&(w=h.child,E=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(E=w.alternate.memoizedState.cachePool.pool),L=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(L=w.memoizedState.cachePool.pool),L!==E&&(w.flags|=2048)),x!==c&&x&&(h.child.flags|=8192),x0(h,h.updateQueue),ia(h),null);case 4:return he(),c===null&&Bw(h.stateNode.containerInfo),ia(h),null;case 10:return ao(h.type),ia(h),null;case 19:if(z(an),w=h.memoizedState,w===null)return ia(h),null;if(E=(h.flags&128)!==0,L=w.rendering,L===null)if(E)fx(w,!1);else{if(za!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(L=Ms(c),L!==null){for(h.flags|=128,fx(w,!1),c=L.updateQueue,h.updateQueue=c,x0(h,c),h.subtreeFlags=0,c=x,x=h.child;x!==null;)Zf(x,c),x=x.sibling;return H(an,an.current&1|2),Xr&&Li(h,w.treeForkCount),h.child}c=c.sibling}w.tail!==null&&Nt()>w0&&(h.flags|=128,E=!0,fx(w,!1),h.lanes=4194304)}else{if(!E)if(c=Ms(L),c!==null){if(h.flags|=128,E=!0,c=c.updateQueue,h.updateQueue=c,x0(h,c),fx(w,!0),w.tail===null&&w.tailMode==="hidden"&&!L.alternate&&!Xr)return ia(h),null}else 2*Nt()-w.renderingStartTime>w0&&x!==536870912&&(h.flags|=128,E=!0,fx(w,!1),h.lanes=4194304);w.isBackwards?(L.sibling=h.child,h.child=L):(c=w.last,c!==null?c.sibling=L:h.child=L,w.last=L)}return w.tail!==null?(c=w.tail,w.rendering=c,w.tail=c.sibling,w.renderingStartTime=Nt(),c.sibling=null,x=an.current,H(an,E?x&1|2:x&1),Xr&&Li(h,w.treeForkCount),c):(ia(h),null);case 22:case 23:return kn(h),Ka(),w=h.memoizedState!==null,c!==null?c.memoizedState!==null!==w&&(h.flags|=8192):w&&(h.flags|=8192),w?(x&536870912)!==0&&(h.flags&128)===0&&(ia(h),h.subtreeFlags&6&&(h.flags|=8192)):ia(h),x=h.updateQueue,x!==null&&x0(h,x.retryQueue),x=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==x&&(h.flags|=2048),c!==null&&z(se),null;case 24:return x=null,c!==null&&(x=c.memoizedState.cache),h.memoizedState.cache!==x&&(h.flags|=2048),ao(Oa),ia(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function dJ(c,h){switch(Nm(h),h.tag){case 1:return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return ao(Oa),he(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 26:case 27:case 5:return Se(h),null;case 31:if(h.memoizedState!==null){if(kn(h),h.alternate===null)throw Error(a(340));Od()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 13:if(kn(h),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(a(340));Od()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return z(an),null;case 4:return he(),null;case 10:return ao(h.type),null;case 22:case 23:return kn(h),Ka(),c!==null&&z(se),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 24:return ao(Oa),null;case 25:return null;default:return null}}function rT(c,h){switch(Nm(h),h.tag){case 3:ao(Oa),he();break;case 26:case 27:case 5:Se(h);break;case 4:he();break;case 31:h.memoizedState!==null&&kn(h);break;case 13:kn(h);break;case 19:z(an);break;case 10:ao(h.type);break;case 22:case 23:kn(h),Ka(),c!==null&&z(se);break;case 24:ao(Oa)}}function hx(c,h){try{var x=h.updateQueue,w=x!==null?x.lastEffect:null;if(w!==null){var E=w.next;x=E;do{if((x.tag&c)===c){w=void 0;var L=x.create,ee=x.inst;w=L(),ee.destroy=w}x=x.next}while(x!==E)}}catch(de){En(h,h.return,de)}}function Uu(c,h,x){try{var w=h.updateQueue,E=w!==null?w.lastEffect:null;if(E!==null){var L=E.next;w=L;do{if((w.tag&c)===c){var ee=w.inst,de=ee.destroy;if(de!==void 0){ee.destroy=void 0,E=h;var _e=x,Ve=de;try{Ve()}catch(tt){En(E,_e,tt)}}}w=w.next}while(w!==L)}}catch(tt){En(h,h.return,tt)}}function nT(c){var h=c.updateQueue;if(h!==null){var x=c.stateNode;try{Ia(h,x)}catch(w){En(c,c.return,w)}}}function aT(c,h,x){x.props=sh(c.type,c.memoizedProps),x.state=c.memoizedState;try{x.componentWillUnmount()}catch(w){En(c,h,w)}}function mx(c,h){try{var x=c.ref;if(x!==null){switch(c.tag){case 26:case 27:case 5:var w=c.stateNode;break;case 30:w=c.stateNode;break;default:w=c.stateNode}typeof x=="function"?c.refCleanup=x(w):x.current=w}}catch(E){En(c,h,E)}}function Hc(c,h){var x=c.ref,w=c.refCleanup;if(x!==null)if(typeof w=="function")try{w()}catch(E){En(c,h,E)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(E){En(c,h,E)}else x.current=null}function sT(c){var h=c.type,x=c.memoizedProps,w=c.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":x.autoFocus&&w.focus();break e;case"img":x.src?w.src=x.src:x.srcSet&&(w.srcset=x.srcSet)}}catch(E){En(c,c.return,E)}}function yw(c,h,x){try{var w=c.stateNode;RJ(w,c.type,x,h),w[_n]=h}catch(E){En(c,c.return,E)}}function iT(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Xu(c.type)||c.tag===4}function bw(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||iT(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Xu(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function jw(c,h,x){var w=c.tag;if(w===5||w===6)c=c.stateNode,h?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(c,h):(h=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,h.appendChild(c),x=x._reactRootContainer,x!=null||h.onclick!==null||(h.onclick=wo));else if(w!==4&&(w===27&&Xu(c.type)&&(x=c.stateNode,h=null),c=c.child,c!==null))for(jw(c,h,x),c=c.sibling;c!==null;)jw(c,h,x),c=c.sibling}function v0(c,h,x){var w=c.tag;if(w===5||w===6)c=c.stateNode,h?x.insertBefore(c,h):x.appendChild(c);else if(w!==4&&(w===27&&Xu(c.type)&&(x=c.stateNode),c=c.child,c!==null))for(v0(c,h,x),c=c.sibling;c!==null;)v0(c,h,x),c=c.sibling}function oT(c){var h=c.stateNode,x=c.memoizedProps;try{for(var w=c.type,E=h.attributes;E.length;)h.removeAttributeNode(E[0]);Js(h,w,x),h[pn]=c,h[_n]=x}catch(L){En(c,c.return,L)}}var Ld=!1,is=!1,ww=!1,lT=typeof WeakSet=="function"?WeakSet:Set,Ds=null;function uJ(c,h){if(c=c.containerInfo,Uw=F0,c=Ql(c),rl(c)){if("selectionStart"in c)var x={start:c.selectionStart,end:c.selectionEnd};else e:{x=(x=c.ownerDocument)&&x.defaultView||window;var w=x.getSelection&&x.getSelection();if(w&&w.rangeCount!==0){x=w.anchorNode;var E=w.anchorOffset,L=w.focusNode;w=w.focusOffset;try{x.nodeType,L.nodeType}catch{x=null;break e}var ee=0,de=-1,_e=-1,Ve=0,tt=0,ot=c,We=null;t:for(;;){for(var Je;ot!==x||E!==0&&ot.nodeType!==3||(de=ee+E),ot!==L||w!==0&&ot.nodeType!==3||(_e=ee+w),ot.nodeType===3&&(ee+=ot.nodeValue.length),(Je=ot.firstChild)!==null;)We=ot,ot=Je;for(;;){if(ot===c)break t;if(We===x&&++Ve===E&&(de=ee),We===L&&++tt===w&&(_e=ee),(Je=ot.nextSibling)!==null)break;ot=We,We=ot.parentNode}ot=Je}x=de===-1||_e===-1?null:{start:de,end:_e}}else x=null}x=x||{start:0,end:0}}else x=null;for(Vw={focusedElem:c,selectionRange:x},F0=!1,Ds=h;Ds!==null;)if(h=Ds,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,Ds=c;else for(;Ds!==null;){switch(h=Ds,L=h.alternate,c=h.flags,h.tag){case 0:if((c&4)!==0&&(c=h.updateQueue,c=c!==null?c.events:null,c!==null))for(x=0;x<c.length;x++)E=c[x],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((c&1024)!==0&&L!==null){c=void 0,x=h,E=L.memoizedProps,L=L.memoizedState,w=x.stateNode;try{var Ht=sh(x.type,E);c=w.getSnapshotBeforeUpdate(Ht,L),w.__reactInternalSnapshotBeforeUpdate=c}catch(jr){En(x,x.return,jr)}}break;case 3:if((c&1024)!==0){if(c=h.stateNode.containerInfo,x=c.nodeType,x===9)Ww(c);else if(x===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":Ww(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(a(163))}if(c=h.sibling,c!==null){c.return=h.return,Ds=c;break}Ds=h.return}}function cT(c,h,x){var w=x.flags;switch(x.tag){case 0:case 11:case 15:$d(c,x),w&4&&hx(5,x);break;case 1:if($d(c,x),w&4)if(c=x.stateNode,h===null)try{c.componentDidMount()}catch(ee){En(x,x.return,ee)}else{var E=sh(x.type,h.memoizedProps);h=h.memoizedState;try{c.componentDidUpdate(E,h,c.__reactInternalSnapshotBeforeUpdate)}catch(ee){En(x,x.return,ee)}}w&64&&nT(x),w&512&&mx(x,x.return);break;case 3:if($d(c,x),w&64&&(c=x.updateQueue,c!==null)){if(h=null,x.child!==null)switch(x.child.tag){case 27:case 5:h=x.child.stateNode;break;case 1:h=x.child.stateNode}try{Ia(c,h)}catch(ee){En(x,x.return,ee)}}break;case 27:h===null&&w&4&&oT(x);case 26:case 5:$d(c,x),h===null&&w&4&&sT(x),w&512&&mx(x,x.return);break;case 12:$d(c,x);break;case 31:$d(c,x),w&4&&fT(c,x);break;case 13:$d(c,x),w&4&&hT(c,x),w&64&&(c=x.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(x=bJ.bind(null,x),BJ(c,x))));break;case 22:if(w=x.memoizedState!==null||Ld,!w){h=h!==null&&h.memoizedState!==null||is,E=Ld;var L=is;Ld=w,(is=h)&&!L?Fd(c,x,(x.subtreeFlags&8772)!==0):$d(c,x),Ld=E,is=L}break;case 30:break;default:$d(c,x)}}function dT(c){var h=c.alternate;h!==null&&(c.alternate=null,dT(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&_i(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var xa=null,io=!1;function Id(c,h,x){for(x=x.child;x!==null;)uT(c,h,x),x=x.sibling}function uT(c,h,x){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(Bt,x)}catch{}switch(x.tag){case 26:is||Hc(x,h),Id(c,h,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:is||Hc(x,h);var w=xa,E=io;Xu(x.type)&&(xa=x.stateNode,io=!1),Id(c,h,x),Nx(x.stateNode),xa=w,io=E;break;case 5:is||Hc(x,h);case 6:if(w=xa,E=io,xa=null,Id(c,h,x),xa=w,io=E,xa!==null)if(io)try{(xa.nodeType===9?xa.body:xa.nodeName==="HTML"?xa.ownerDocument.body:xa).removeChild(x.stateNode)}catch(L){En(x,h,L)}else try{xa.removeChild(x.stateNode)}catch(L){En(x,h,L)}break;case 18:xa!==null&&(io?(c=xa,nR(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,x.stateNode),Km(c)):nR(xa,x.stateNode));break;case 4:w=xa,E=io,xa=x.stateNode.containerInfo,io=!0,Id(c,h,x),xa=w,io=E;break;case 0:case 11:case 14:case 15:Uu(2,x,h),is||Uu(4,x,h),Id(c,h,x);break;case 1:is||(Hc(x,h),w=x.stateNode,typeof w.componentWillUnmount=="function"&&aT(x,h,w)),Id(c,h,x);break;case 21:Id(c,h,x);break;case 22:is=(w=is)||x.memoizedState!==null,Id(c,h,x),is=w;break;default:Id(c,h,x)}}function fT(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{Km(c)}catch(x){En(h,h.return,x)}}}function hT(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Km(c)}catch(x){En(h,h.return,x)}}function fJ(c){switch(c.tag){case 31:case 13:case 19:var h=c.stateNode;return h===null&&(h=c.stateNode=new lT),h;case 22:return c=c.stateNode,h=c._retryCache,h===null&&(h=c._retryCache=new lT),h;default:throw Error(a(435,c.tag))}}function y0(c,h){var x=fJ(c);h.forEach(function(w){if(!x.has(w)){x.add(w);var E=jJ.bind(null,c,w);w.then(E,E)}})}function oo(c,h){var x=h.deletions;if(x!==null)for(var w=0;w<x.length;w++){var E=x[w],L=c,ee=h,de=ee;e:for(;de!==null;){switch(de.tag){case 27:if(Xu(de.type)){xa=de.stateNode,io=!1;break e}break;case 5:xa=de.stateNode,io=!1;break e;case 3:case 4:xa=de.stateNode.containerInfo,io=!0;break e}de=de.return}if(xa===null)throw Error(a(160));uT(L,ee,E),xa=null,io=!1,L=E.alternate,L!==null&&(L.return=null),E.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)mT(h,c),h=h.sibling}var oc=null;function mT(c,h){var x=c.alternate,w=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:oo(h,c),lo(c),w&4&&(Uu(3,c,c.return),hx(3,c),Uu(5,c,c.return));break;case 1:oo(h,c),lo(c),w&512&&(is||x===null||Hc(x,x.return)),w&64&&Ld&&(c=c.updateQueue,c!==null&&(w=c.callbacks,w!==null&&(x=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=x===null?w:x.concat(w))));break;case 26:var E=oc;if(oo(h,c),lo(c),w&512&&(is||x===null||Hc(x,x.return)),w&4){var L=x!==null?x.memoizedState:null;if(w=c.memoizedState,x===null)if(w===null)if(c.stateNode===null){e:{w=c.type,x=c.memoizedProps,E=E.ownerDocument||E;t:switch(w){case"title":L=E.getElementsByTagName("title")[0],(!L||L[Ci]||L[pn]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=E.createElement(w),E.head.insertBefore(L,E.querySelector("head > title"))),Js(L,w,x),L[pn]=c,An(L),w=L;break e;case"link":var ee=mR("link","href",E).get(w+(x.href||""));if(ee){for(var de=0;de<ee.length;de++)if(L=ee[de],L.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&L.getAttribute("rel")===(x.rel==null?null:x.rel)&&L.getAttribute("title")===(x.title==null?null:x.title)&&L.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){ee.splice(de,1);break t}}L=E.createElement(w),Js(L,w,x),E.head.appendChild(L);break;case"meta":if(ee=mR("meta","content",E).get(w+(x.content||""))){for(de=0;de<ee.length;de++)if(L=ee[de],L.getAttribute("content")===(x.content==null?null:""+x.content)&&L.getAttribute("name")===(x.name==null?null:x.name)&&L.getAttribute("property")===(x.property==null?null:x.property)&&L.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&L.getAttribute("charset")===(x.charSet==null?null:x.charSet)){ee.splice(de,1);break t}}L=E.createElement(w),Js(L,w,x),E.head.appendChild(L);break;default:throw Error(a(468,w))}L[pn]=c,An(L),w=L}c.stateNode=w}else pR(E,c.type,c.stateNode);else c.stateNode=hR(E,w,c.memoizedProps);else L!==w?(L===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):L.count--,w===null?pR(E,c.type,c.stateNode):hR(E,w,c.memoizedProps)):w===null&&c.stateNode!==null&&yw(c,c.memoizedProps,x.memoizedProps)}break;case 27:oo(h,c),lo(c),w&512&&(is||x===null||Hc(x,x.return)),x!==null&&w&4&&yw(c,c.memoizedProps,x.memoizedProps);break;case 5:if(oo(h,c),lo(c),w&512&&(is||x===null||Hc(x,x.return)),c.flags&32){E=c.stateNode;try{Hs(E,"")}catch(Ht){En(c,c.return,Ht)}}w&4&&c.stateNode!=null&&(E=c.memoizedProps,yw(c,E,x!==null?x.memoizedProps:E)),w&1024&&(ww=!0);break;case 6:if(oo(h,c),lo(c),w&4){if(c.stateNode===null)throw Error(a(162));w=c.memoizedProps,x=c.stateNode;try{x.nodeValue=w}catch(Ht){En(c,c.return,Ht)}}break;case 3:if(D0=null,E=oc,oc=P0(h.containerInfo),oo(h,c),oc=E,lo(c),w&4&&x!==null&&x.memoizedState.isDehydrated)try{Km(h.containerInfo)}catch(Ht){En(c,c.return,Ht)}ww&&(ww=!1,pT(c));break;case 4:w=oc,oc=P0(c.stateNode.containerInfo),oo(h,c),lo(c),oc=w;break;case 12:oo(h,c),lo(c);break;case 31:oo(h,c),lo(c),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,y0(c,w)));break;case 13:oo(h,c),lo(c),c.child.flags&8192&&c.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(j0=Nt()),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,y0(c,w)));break;case 22:E=c.memoizedState!==null;var _e=x!==null&&x.memoizedState!==null,Ve=Ld,tt=is;if(Ld=Ve||E,is=tt||_e,oo(h,c),is=tt,Ld=Ve,lo(c),w&8192)e:for(h=c.stateNode,h._visibility=E?h._visibility&-2:h._visibility|1,E&&(x===null||_e||Ld||is||ih(c)),x=null,h=c;;){if(h.tag===5||h.tag===26){if(x===null){_e=x=h;try{if(L=_e.stateNode,E)ee=L.style,typeof ee.setProperty=="function"?ee.setProperty("display","none","important"):ee.display="none";else{de=_e.stateNode;var ot=_e.memoizedProps.style,We=ot!=null&&ot.hasOwnProperty("display")?ot.display:null;de.style.display=We==null||typeof We=="boolean"?"":(""+We).trim()}}catch(Ht){En(_e,_e.return,Ht)}}}else if(h.tag===6){if(x===null){_e=h;try{_e.stateNode.nodeValue=E?"":_e.memoizedProps}catch(Ht){En(_e,_e.return,Ht)}}}else if(h.tag===18){if(x===null){_e=h;try{var Je=_e.stateNode;E?aR(Je,!0):aR(_e.stateNode,!1)}catch(Ht){En(_e,_e.return,Ht)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;x===h&&(x=null),h=h.return}x===h&&(x=null),h.sibling.return=h.return,h=h.sibling}w&4&&(w=c.updateQueue,w!==null&&(x=w.retryQueue,x!==null&&(w.retryQueue=null,y0(c,x))));break;case 19:oo(h,c),lo(c),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,y0(c,w)));break;case 30:break;case 21:break;default:oo(h,c),lo(c)}}function lo(c){var h=c.flags;if(h&2){try{for(var x,w=c.return;w!==null;){if(iT(w)){x=w;break}w=w.return}if(x==null)throw Error(a(160));switch(x.tag){case 27:var E=x.stateNode,L=bw(c);v0(c,L,E);break;case 5:var ee=x.stateNode;x.flags&32&&(Hs(ee,""),x.flags&=-33);var de=bw(c);v0(c,de,ee);break;case 3:case 4:var _e=x.stateNode.containerInfo,Ve=bw(c);jw(c,Ve,_e);break;default:throw Error(a(161))}}catch(tt){En(c,c.return,tt)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function pT(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var h=c;pT(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),c=c.sibling}}function $d(c,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)cT(c,h.alternate,h),h=h.sibling}function ih(c){for(c=c.child;c!==null;){var h=c;switch(h.tag){case 0:case 11:case 14:case 15:Uu(4,h,h.return),ih(h);break;case 1:Hc(h,h.return);var x=h.stateNode;typeof x.componentWillUnmount=="function"&&aT(h,h.return,x),ih(h);break;case 27:Nx(h.stateNode);case 26:case 5:Hc(h,h.return),ih(h);break;case 22:h.memoizedState===null&&ih(h);break;case 30:ih(h);break;default:ih(h)}c=c.sibling}}function Fd(c,h,x){for(x=x&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var w=h.alternate,E=c,L=h,ee=L.flags;switch(L.tag){case 0:case 11:case 15:Fd(E,L,x),hx(4,L);break;case 1:if(Fd(E,L,x),w=L,E=w.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Ve){En(w,w.return,Ve)}if(w=L,E=w.updateQueue,E!==null){var de=w.stateNode;try{var _e=E.shared.hiddenCallbacks;if(_e!==null)for(E.shared.hiddenCallbacks=null,E=0;E<_e.length;E++)Ps(_e[E],de)}catch(Ve){En(w,w.return,Ve)}}x&&ee&64&&nT(L),mx(L,L.return);break;case 27:oT(L);case 26:case 5:Fd(E,L,x),x&&w===null&&ee&4&&sT(L),mx(L,L.return);break;case 12:Fd(E,L,x);break;case 31:Fd(E,L,x),x&&ee&4&&fT(E,L);break;case 13:Fd(E,L,x),x&&ee&4&&hT(E,L);break;case 22:L.memoizedState===null&&Fd(E,L,x),mx(L,L.return);break;case 30:break;default:Fd(E,L,x)}h=h.sibling}}function Nw(c,h){var x=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),c=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(c=h.memoizedState.cachePool.pool),c!==x&&(c!=null&&c.refCount++,x!=null&&th(x))}function Sw(c,h){c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&th(c))}function lc(c,h,x,w){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)gT(c,h,x,w),h=h.sibling}function gT(c,h,x,w){var E=h.flags;switch(h.tag){case 0:case 11:case 15:lc(c,h,x,w),E&2048&&hx(9,h);break;case 1:lc(c,h,x,w);break;case 3:lc(c,h,x,w),E&2048&&(c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&th(c)));break;case 12:if(E&2048){lc(c,h,x,w),c=h.stateNode;try{var L=h.memoizedProps,ee=L.id,de=L.onPostCommit;typeof de=="function"&&de(ee,h.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(_e){En(h,h.return,_e)}}else lc(c,h,x,w);break;case 31:lc(c,h,x,w);break;case 13:lc(c,h,x,w);break;case 23:break;case 22:L=h.stateNode,ee=h.alternate,h.memoizedState!==null?L._visibility&2?lc(c,h,x,w):px(c,h):L._visibility&2?lc(c,h,x,w):(L._visibility|=2,Im(c,h,x,w,(h.subtreeFlags&10256)!==0||!1)),E&2048&&Nw(ee,h);break;case 24:lc(c,h,x,w),E&2048&&Sw(h.alternate,h);break;default:lc(c,h,x,w)}}function Im(c,h,x,w,E){for(E=E&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var L=c,ee=h,de=x,_e=w,Ve=ee.flags;switch(ee.tag){case 0:case 11:case 15:Im(L,ee,de,_e,E),hx(8,ee);break;case 23:break;case 22:var tt=ee.stateNode;ee.memoizedState!==null?tt._visibility&2?Im(L,ee,de,_e,E):px(L,ee):(tt._visibility|=2,Im(L,ee,de,_e,E)),E&&Ve&2048&&Nw(ee.alternate,ee);break;case 24:Im(L,ee,de,_e,E),E&&Ve&2048&&Sw(ee.alternate,ee);break;default:Im(L,ee,de,_e,E)}h=h.sibling}}function px(c,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var x=c,w=h,E=w.flags;switch(w.tag){case 22:px(x,w),E&2048&&Nw(w.alternate,w);break;case 24:px(x,w),E&2048&&Sw(w.alternate,w);break;default:px(x,w)}h=h.sibling}}var gx=8192;function $m(c,h,x){if(c.subtreeFlags&gx)for(c=c.child;c!==null;)xT(c,h,x),c=c.sibling}function xT(c,h,x){switch(c.tag){case 26:$m(c,h,x),c.flags&gx&&c.memoizedState!==null&&ZJ(x,oc,c.memoizedState,c.memoizedProps);break;case 5:$m(c,h,x);break;case 3:case 4:var w=oc;oc=P0(c.stateNode.containerInfo),$m(c,h,x),oc=w;break;case 22:c.memoizedState===null&&(w=c.alternate,w!==null&&w.memoizedState!==null?(w=gx,gx=16777216,$m(c,h,x),gx=w):$m(c,h,x));break;default:$m(c,h,x)}}function vT(c){var h=c.alternate;if(h!==null&&(c=h.child,c!==null)){h.child=null;do h=c.sibling,c.sibling=null,c=h;while(c!==null)}}function xx(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var x=0;x<h.length;x++){var w=h[x];Ds=w,bT(w,c)}vT(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)yT(c),c=c.sibling}function yT(c){switch(c.tag){case 0:case 11:case 15:xx(c),c.flags&2048&&Uu(9,c,c.return);break;case 3:xx(c);break;case 12:xx(c);break;case 22:var h=c.stateNode;c.memoizedState!==null&&h._visibility&2&&(c.return===null||c.return.tag!==13)?(h._visibility&=-3,b0(c)):xx(c);break;default:xx(c)}}function b0(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var x=0;x<h.length;x++){var w=h[x];Ds=w,bT(w,c)}vT(c)}for(c=c.child;c!==null;){switch(h=c,h.tag){case 0:case 11:case 15:Uu(8,h,h.return),b0(h);break;case 22:x=h.stateNode,x._visibility&2&&(x._visibility&=-3,b0(h));break;default:b0(h)}c=c.sibling}}function bT(c,h){for(;Ds!==null;){var x=Ds;switch(x.tag){case 0:case 11:case 15:Uu(8,x,h);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var w=x.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:th(x.memoizedState.cache)}if(w=x.child,w!==null)w.return=x,Ds=w;else e:for(x=c;Ds!==null;){w=Ds;var E=w.sibling,L=w.return;if(dT(w),w===x){Ds=null;break e}if(E!==null){E.return=L,Ds=E;break e}Ds=L}}}var hJ={getCacheForType:function(c){var h=vs(Oa),x=h.data.get(c);return x===void 0&&(x=c(),h.data.set(c,x)),x},cacheSignal:function(){return vs(Oa).controller.signal}},mJ=typeof WeakMap=="function"?WeakMap:Map,vn=0,Gn=null,Jr=null,Qr=0,On=0,Oo=null,Vu=!1,Fm=!1,Cw=!1,Bd=0,za=0,Hu=0,oh=0,_w=0,Eo=0,Bm=0,vx=null,co=null,Aw=!1,j0=0,jT=0,w0=1/0,N0=null,Gu=null,bs=0,Wu=null,zm=null,zd=0,kw=0,Ow=null,wT=null,yx=0,Ew=null;function To(){return(vn&2)!==0&&Qr!==0?Qr&-Qr:V.T!==null?Lw():Sa()}function NT(){if(Eo===0)if((Qr&536870912)===0||Xr){var c=mn;mn<<=1,(mn&3932160)===0&&(mn=262144),Eo=c}else Eo=536870912;return c=sa.current,c!==null&&(c.flags|=32),Eo}function uo(c,h,x){(c===Gn&&(On===2||On===9)||c.cancelPendingCommit!==null)&&(qm(c,0),Ku(c,Qr,Eo,!1)),Zt(c,x),((vn&2)===0||c!==Gn)&&(c===Gn&&((vn&2)===0&&(oh|=x),za===4&&Ku(c,Qr,Eo,!1)),Gc(c))}function ST(c,h,x){if((vn&6)!==0)throw Error(a(327));var w=!x&&(h&127)===0&&(h&c.expiredLanes)===0||wi(c,h),E=w?xJ(c,h):Rw(c,h,!0),L=w;do{if(E===0){Fm&&!w&&Ku(c,h,0,!1);break}else{if(x=c.current.alternate,L&&!pJ(x)){E=Rw(c,h,!1),L=!1;continue}if(E===2){if(L=h,c.errorRecoveryDisabledLanes&L)var ee=0;else ee=c.pendingLanes&-536870913,ee=ee!==0?ee:ee&536870912?536870912:0;if(ee!==0){h=ee;e:{var de=c;E=vx;var _e=de.current.memoizedState.isDehydrated;if(_e&&(qm(de,ee).flags|=256),ee=Rw(de,ee,!1),ee!==2){if(Cw&&!_e){de.errorRecoveryDisabledLanes|=L,oh|=L,E=4;break e}L=co,co=E,L!==null&&(co===null?co=L:co.push.apply(co,L))}E=ee}if(L=!1,E!==2)continue}}if(E===1){qm(c,0),Ku(c,h,0,!0);break}e:{switch(w=c,L=E,L){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:Ku(w,h,Eo,!Vu);break e;case 2:co=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(E=j0+300-Nt(),10<E)){if(Ku(w,h,Eo,!Vu),Wr(w,0,!0)!==0)break e;zd=h,w.timeoutHandle=tR(CT.bind(null,w,x,co,N0,Aw,h,Eo,oh,Bm,Vu,L,"Throttled",-0,0),E);break e}CT(w,x,co,N0,Aw,h,Eo,oh,Bm,Vu,L,null,-0,0)}}break}while(!0);Gc(c)}function CT(c,h,x,w,E,L,ee,de,_e,Ve,tt,ot,We,Je){if(c.timeoutHandle=-1,ot=h.subtreeFlags,ot&8192||(ot&16785408)===16785408){ot={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wo},xT(h,L,ot);var Ht=(L&62914560)===L?j0-Nt():(L&4194048)===L?jT-Nt():0;if(Ht=QJ(ot,Ht),Ht!==null){zd=L,c.cancelPendingCommit=Ht(PT.bind(null,c,h,L,x,w,E,ee,de,_e,tt,ot,null,We,Je)),Ku(c,L,ee,!Ve);return}}PT(c,h,L,x,w,E,ee,de,_e)}function pJ(c){for(var h=c;;){var x=h.tag;if((x===0||x===11||x===15)&&h.flags&16384&&(x=h.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var w=0;w<x.length;w++){var E=x[w],L=E.getSnapshot;E=E.value;try{if(!ms(L(),E))return!1}catch{return!1}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ku(c,h,x,w){h&=~_w,h&=~oh,c.suspendedLanes|=h,c.pingedLanes&=~h,w&&(c.warmLanes|=h),w=c.expirationTimes;for(var E=h;0<E;){var L=31-sr(E),ee=1<<L;w[L]=-1,E&=~ee}x!==0&&qs(c,x,h)}function S0(){return(vn&6)===0?(bx(0),!1):!0}function Tw(){if(Jr!==null){if(On===0)var c=Jr.return;else c=Jr,al=Ic=null,Em(c),ct=null,Wt=0,c=Jr;for(;c!==null;)rT(c.alternate,c),c=c.return;Jr=null}}function qm(c,h){var x=c.timeoutHandle;x!==-1&&(c.timeoutHandle=-1,DJ(x)),x=c.cancelPendingCommit,x!==null&&(c.cancelPendingCommit=null,x()),zd=0,Tw(),Gn=c,Jr=x=Zi(c.current,null),Qr=h,On=0,Oo=null,Vu=!1,Fm=wi(c,h),Cw=!1,Bm=Eo=_w=oh=Hu=za=0,co=vx=null,Aw=!1,(h&8)!==0&&(h|=h&32);var w=c.entangledLanes;if(w!==0)for(c=c.entanglements,w&=h;0<w;){var E=31-sr(w),L=1<<E;h|=c[E],w&=~L}return Bd=h,Yf(),x}function _T(c,h){cr=null,V.H=dx,h===Te||h===xe?(h=at(),On=3):h===qe?(h=at(),On=4):On=h===cw?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Oo=h,Jr===null&&(za=1,h0(c,Qi(h,c.current)))}function AT(){var c=sa.current;return c===null?!0:(Qr&4194048)===Qr?on===null:(Qr&62914560)===Qr||(Qr&536870912)!==0?c===on:!1}function kT(){var c=V.H;return V.H=dx,c===null?dx:c}function OT(){var c=V.A;return V.A=hJ,c}function C0(){za=4,Vu||(Qr&4194048)!==Qr&&sa.current!==null||(Fm=!0),(Hu&134217727)===0&&(oh&134217727)===0||Gn===null||Ku(Gn,Qr,Eo,!1)}function Rw(c,h,x){var w=vn;vn|=2;var E=kT(),L=OT();(Gn!==c||Qr!==h)&&(N0=null,qm(c,h)),h=!1;var ee=za;e:do try{if(On!==0&&Jr!==null){var de=Jr,_e=Oo;switch(On){case 8:Tw(),ee=6;break e;case 3:case 2:case 9:case 6:sa.current===null&&(h=!0);var Ve=On;if(On=0,Oo=null,Um(c,de,_e,Ve),x&&Fm){ee=0;break e}break;default:Ve=On,On=0,Oo=null,Um(c,de,_e,Ve)}}gJ(),ee=za;break}catch(tt){_T(c,tt)}while(!0);return h&&c.shellSuspendCounter++,al=Ic=null,vn=w,V.H=E,V.A=L,Jr===null&&(Gn=null,Qr=0,Yf()),ee}function gJ(){for(;Jr!==null;)ET(Jr)}function xJ(c,h){var x=vn;vn|=2;var w=kT(),E=OT();Gn!==c||Qr!==h?(N0=null,w0=Nt()+500,qm(c,h)):Fm=wi(c,h);e:do try{if(On!==0&&Jr!==null){h=Jr;var L=Oo;t:switch(On){case 1:On=0,Oo=null,Um(c,h,L,1);break;case 2:case 9:if(Fe(L)){On=0,Oo=null,TT(h);break}h=function(){On!==2&&On!==9||Gn!==c||(On=7),Gc(c)},L.then(h,h);break e;case 3:On=7;break e;case 4:On=5;break e;case 7:Fe(L)?(On=0,Oo=null,TT(h)):(On=0,Oo=null,Um(c,h,L,7));break;case 5:var ee=null;switch(Jr.tag){case 26:ee=Jr.memoizedState;case 5:case 27:var de=Jr;if(ee?gR(ee):de.stateNode.complete){On=0,Oo=null;var _e=de.sibling;if(_e!==null)Jr=_e;else{var Ve=de.return;Ve!==null?(Jr=Ve,_0(Ve)):Jr=null}break t}}On=0,Oo=null,Um(c,h,L,5);break;case 6:On=0,Oo=null,Um(c,h,L,6);break;case 8:Tw(),za=6;break e;default:throw Error(a(462))}}vJ();break}catch(tt){_T(c,tt)}while(!0);return al=Ic=null,V.H=w,V.A=E,vn=x,Jr!==null?0:(Gn=null,Qr=0,Yf(),za)}function vJ(){for(;Jr!==null&&!gt();)ET(Jr)}function ET(c){var h=eT(c.alternate,c,Bd);c.memoizedProps=c.pendingProps,h===null?_0(c):Jr=h}function TT(c){var h=c,x=h.alternate;switch(h.tag){case 15:case 0:h=KE(x,h,h.pendingProps,h.type,void 0,Qr);break;case 11:h=KE(x,h,h.pendingProps,h.type.render,h.ref,Qr);break;case 5:Em(h);default:rT(x,h),h=Jr=Zf(h,Bd),h=eT(x,h,Bd)}c.memoizedProps=c.pendingProps,h===null?_0(c):Jr=h}function Um(c,h,x,w){al=Ic=null,Em(h),ct=null,Wt=0;var E=h.return;try{if(iJ(c,E,h,x,Qr)){za=1,h0(c,Qi(x,c.current)),Jr=null;return}}catch(L){if(E!==null)throw Jr=E,L;za=1,h0(c,Qi(x,c.current)),Jr=null;return}h.flags&32768?(Xr||w===1?c=!0:Fm||(Qr&536870912)!==0?c=!1:(Vu=c=!0,(w===2||w===9||w===3||w===6)&&(w=sa.current,w!==null&&w.tag===13&&(w.flags|=16384))),RT(h,c)):_0(h)}function _0(c){var h=c;do{if((h.flags&32768)!==0){RT(h,Vu);return}c=h.return;var x=cJ(h.alternate,h,Bd);if(x!==null){Jr=x;return}if(h=h.sibling,h!==null){Jr=h;return}Jr=h=c}while(h!==null);za===0&&(za=5)}function RT(c,h){do{var x=dJ(c.alternate,c);if(x!==null){x.flags&=32767,Jr=x;return}if(x=c.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!h&&(c=c.sibling,c!==null)){Jr=c;return}Jr=c=x}while(c!==null);za=6,Jr=null}function PT(c,h,x,w,E,L,ee,de,_e){c.cancelPendingCommit=null;do A0();while(bs!==0);if((vn&6)!==0)throw Error(a(327));if(h!==null){if(h===c.current)throw Error(a(177));if(L=h.lanes|h.childLanes,L|=gm,Gi(c,x,L,ee,de,_e),c===Gn&&(Jr=Gn=null,Qr=0),zm=h,Wu=c,zd=x,kw=L,Ow=E,wT=w,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,wJ(rr,function(){return $T(),null})):(c.callbackNode=null,c.callbackPriority=0),w=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||w){w=V.T,V.T=null,E=G.p,G.p=2,ee=vn,vn|=4;try{uJ(c,h,x)}finally{vn=ee,G.p=E,V.T=w}}bs=1,MT(),DT(),LT()}}function MT(){if(bs===1){bs=0;var c=Wu,h=zm,x=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||x){x=V.T,V.T=null;var w=G.p;G.p=2;var E=vn;vn|=4;try{mT(h,c);var L=Vw,ee=Ql(c.containerInfo),de=L.focusedElem,_e=L.selectionRange;if(ee!==de&&de&&de.ownerDocument&&Zl(de.ownerDocument.documentElement,de)){if(_e!==null&&rl(de)){var Ve=_e.start,tt=_e.end;if(tt===void 0&&(tt=Ve),"selectionStart"in de)de.selectionStart=Ve,de.selectionEnd=Math.min(tt,de.value.length);else{var ot=de.ownerDocument||document,We=ot&&ot.defaultView||window;if(We.getSelection){var Je=We.getSelection(),Ht=de.textContent.length,jr=Math.min(_e.start,Ht),Bn=_e.end===void 0?jr:Math.min(_e.end,Ht);!Je.extend&&jr>Bn&&(ee=Bn,Bn=jr,jr=ee);var Ie=Ru(de,jr),Pe=Ru(de,Bn);if(Ie&&Pe&&(Je.rangeCount!==1||Je.anchorNode!==Ie.node||Je.anchorOffset!==Ie.offset||Je.focusNode!==Pe.node||Je.focusOffset!==Pe.offset)){var Ue=ot.createRange();Ue.setStart(Ie.node,Ie.offset),Je.removeAllRanges(),jr>Bn?(Je.addRange(Ue),Je.extend(Pe.node,Pe.offset)):(Ue.setEnd(Pe.node,Pe.offset),Je.addRange(Ue))}}}}for(ot=[],Je=de;Je=Je.parentNode;)Je.nodeType===1&&ot.push({element:Je,left:Je.scrollLeft,top:Je.scrollTop});for(typeof de.focus=="function"&&de.focus(),de=0;de<ot.length;de++){var st=ot[de];st.element.scrollLeft=st.left,st.element.scrollTop=st.top}}F0=!!Uw,Vw=Uw=null}finally{vn=E,G.p=w,V.T=x}}c.current=h,bs=2}}function DT(){if(bs===2){bs=0;var c=Wu,h=zm,x=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||x){x=V.T,V.T=null;var w=G.p;G.p=2;var E=vn;vn|=4;try{cT(c,h.alternate,h)}finally{vn=E,G.p=w,V.T=x}}bs=3}}function LT(){if(bs===4||bs===3){bs=0,dt();var c=Wu,h=zm,x=zd,w=wT;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?bs=5:(bs=0,zm=Wu=null,IT(c,c.pendingLanes));var E=c.pendingLanes;if(E===0&&(Gu=null),Cn(x),h=h.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(Bt,h,void 0,(h.current.flags&128)===128)}catch{}if(w!==null){h=V.T,E=G.p,G.p=2,V.T=null;try{for(var L=c.onRecoverableError,ee=0;ee<w.length;ee++){var de=w[ee];L(de.value,{componentStack:de.stack})}}finally{V.T=h,G.p=E}}(zd&3)!==0&&A0(),Gc(c),E=c.pendingLanes,(x&261930)!==0&&(E&42)!==0?c===Ew?yx++:(yx=0,Ew=c):yx=0,bx(0)}}function IT(c,h){(c.pooledCacheLanes&=h)===0&&(h=c.pooledCache,h!=null&&(c.pooledCache=null,th(h)))}function A0(){return MT(),DT(),LT(),$T()}function $T(){if(bs!==5)return!1;var c=Wu,h=kw;kw=0;var x=Cn(zd),w=V.T,E=G.p;try{G.p=32>x?32:x,V.T=null,x=Ow,Ow=null;var L=Wu,ee=zd;if(bs=0,zm=Wu=null,zd=0,(vn&6)!==0)throw Error(a(331));var de=vn;if(vn|=4,yT(L.current),gT(L,L.current,ee,x),vn=de,bx(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(Bt,L)}catch{}return!0}finally{G.p=E,V.T=w,IT(c,h)}}function FT(c,h,x){h=Qi(x,h),h=lw(c.stateNode,h,2),c=Br(c,h,2),c!==null&&(Zt(c,2),Gc(c))}function En(c,h,x){if(c.tag===3)FT(c,c,x);else for(;h!==null;){if(h.tag===3){FT(h,c,x);break}else if(h.tag===1){var w=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Gu===null||!Gu.has(w))){c=Qi(x,c),x=BE(2),w=Br(h,x,2),w!==null&&(zE(x,w,h,c),Zt(w,2),Gc(w));break}}h=h.return}}function Pw(c,h,x){var w=c.pingCache;if(w===null){w=c.pingCache=new mJ;var E=new Set;w.set(h,E)}else E=w.get(h),E===void 0&&(E=new Set,w.set(h,E));E.has(x)||(Cw=!0,E.add(x),c=yJ.bind(null,c,h,x),h.then(c,c))}function yJ(c,h,x){var w=c.pingCache;w!==null&&w.delete(h),c.pingedLanes|=c.suspendedLanes&x,c.warmLanes&=~x,Gn===c&&(Qr&x)===x&&(za===4||za===3&&(Qr&62914560)===Qr&&300>Nt()-j0?(vn&2)===0&&qm(c,0):_w|=x,Bm===Qr&&(Bm=0)),Gc(c)}function BT(c,h){h===0&&(h=As()),c=tc(c,h),c!==null&&(Zt(c,h),Gc(c))}function bJ(c){var h=c.memoizedState,x=0;h!==null&&(x=h.retryLane),BT(c,x)}function jJ(c,h){var x=0;switch(c.tag){case 31:case 13:var w=c.stateNode,E=c.memoizedState;E!==null&&(x=E.retryLane);break;case 19:w=c.stateNode;break;case 22:w=c.stateNode._retryCache;break;default:throw Error(a(314))}w!==null&&w.delete(h),BT(c,x)}function wJ(c,h){return lt(c,h)}var k0=null,Vm=null,Mw=!1,O0=!1,Dw=!1,Yu=0;function Gc(c){c!==Vm&&c.next===null&&(Vm===null?k0=Vm=c:Vm=Vm.next=c),O0=!0,Mw||(Mw=!0,SJ())}function bx(c,h){if(!Dw&&O0){Dw=!0;do for(var x=!1,w=k0;w!==null;){if(c!==0){var E=w.pendingLanes;if(E===0)var L=0;else{var ee=w.suspendedLanes,de=w.pingedLanes;L=(1<<31-sr(42|c)+1)-1,L&=E&~(ee&~de),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(x=!0,VT(w,L))}else L=Qr,L=Wr(w,w===Gn?L:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(L&3)===0||wi(w,L)||(x=!0,VT(w,L));w=w.next}while(x);Dw=!1}}function NJ(){zT()}function zT(){O0=Mw=!1;var c=0;Yu!==0&&MJ()&&(c=Yu);for(var h=Nt(),x=null,w=k0;w!==null;){var E=w.next,L=qT(w,h);L===0?(w.next=null,x===null?k0=E:x.next=E,E===null&&(Vm=x)):(x=w,(c!==0||(L&3)!==0)&&(O0=!0)),w=E}bs!==0&&bs!==5||bx(c),Yu!==0&&(Yu=0)}function qT(c,h){for(var x=c.suspendedLanes,w=c.pingedLanes,E=c.expirationTimes,L=c.pendingLanes&-62914561;0<L;){var ee=31-sr(L),de=1<<ee,_e=E[ee];_e===-1?((de&x)===0||(de&w)!==0)&&(E[ee]=Za(de,h)):_e<=h&&(c.expiredLanes|=de),L&=~de}if(h=Gn,x=Qr,x=Wr(c,c===h?x:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),w=c.callbackNode,x===0||c===h&&(On===2||On===9)||c.cancelPendingCommit!==null)return w!==null&&w!==null&&ut(w),c.callbackNode=null,c.callbackPriority=0;if((x&3)===0||wi(c,x)){if(h=x&-x,h===c.callbackPriority)return h;switch(w!==null&&ut(w),Cn(x)){case 2:case 8:x=Gt;break;case 32:x=rr;break;case 268435456:x=Ce;break;default:x=rr}return w=UT.bind(null,c),x=lt(x,w),c.callbackPriority=h,c.callbackNode=x,h}return w!==null&&w!==null&&ut(w),c.callbackPriority=2,c.callbackNode=null,2}function UT(c,h){if(bs!==0&&bs!==5)return c.callbackNode=null,c.callbackPriority=0,null;var x=c.callbackNode;if(A0()&&c.callbackNode!==x)return null;var w=Qr;return w=Wr(c,c===Gn?w:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),w===0?null:(ST(c,w,h),qT(c,Nt()),c.callbackNode!=null&&c.callbackNode===x?UT.bind(null,c):null)}function VT(c,h){if(A0())return null;ST(c,h,!0)}function SJ(){LJ(function(){(vn&6)!==0?lt(Dt,NJ):zT()})}function Lw(){if(Yu===0){var c=k;c===0&&(c=kr,kr<<=1,(kr&261888)===0&&(kr=256)),Yu=c}return Yu}function HT(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:ci(""+c)}function GT(c,h){var x=h.ownerDocument.createElement("input");return x.name=h.name,x.value=h.value,c.id&&x.setAttribute("form",c.id),h.parentNode.insertBefore(x,h),c=new FormData(c),x.parentNode.removeChild(x),c}function CJ(c,h,x,w,E){if(h==="submit"&&x&&x.stateNode===E){var L=HT((E[_n]||null).action),ee=w.submitter;ee&&(h=(h=ee[_n]||null)?HT(h.formAction):ee.getAttribute("formAction"),h!==null&&(L=h,ee=null));var de=new Yi("action","action",null,w,E);c.push({event:de,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Yu!==0){var _e=ee?GT(E,ee):new FormData(E);rw(x,{pending:!0,data:_e,method:E.method,action:L},null,_e)}}else typeof L=="function"&&(de.preventDefault(),_e=ee?GT(E,ee):new FormData(E),rw(x,{pending:!0,data:_e,method:E.method,action:L},L,_e))},currentTarget:E}]})}}for(var Iw=0;Iw<_d.length;Iw++){var $w=_d[Iw],_J=$w.toLowerCase(),AJ=$w[0].toUpperCase()+$w.slice(1);Ji(_J,"on"+AJ)}Ji(Cd,"onAnimationEnd"),Ji(Wf,"onAnimationIteration"),Ji(Yg,"onAnimationStart"),Ji("dblclick","onDoubleClick"),Ji("focusin","onFocus"),Ji("focusout","onBlur"),Ji(e0,"onTransitionRun"),Ji(t0,"onTransitionStart"),Ji(r0,"onTransitionCancel"),Ji(Xg,"onTransitionEnd"),jo("onMouseEnter",["mouseout","mouseover"]),jo("onMouseLeave",["mouseout","mouseover"]),jo("onPointerEnter",["pointerout","pointerover"]),jo("onPointerLeave",["pointerout","pointerover"]),Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kJ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jx));function WT(c,h){h=(h&4)!==0;for(var x=0;x<c.length;x++){var w=c[x],E=w.event;w=w.listeners;e:{var L=void 0;if(h)for(var ee=w.length-1;0<=ee;ee--){var de=w[ee],_e=de.instance,Ve=de.currentTarget;if(de=de.listener,_e!==L&&E.isPropagationStopped())break e;L=de,E.currentTarget=Ve;try{L(E)}catch(tt){Kf(tt)}E.currentTarget=null,L=_e}else for(ee=0;ee<w.length;ee++){if(de=w[ee],_e=de.instance,Ve=de.currentTarget,de=de.listener,_e!==L&&E.isPropagationStopped())break e;L=de,E.currentTarget=Ve;try{L(E)}catch(tt){Kf(tt)}E.currentTarget=null,L=_e}}}}function Zr(c,h){var x=h[Us];x===void 0&&(x=h[Us]=new Set);var w=c+"__bubble";x.has(w)||(KT(h,c,2,!1),x.add(w))}function Fw(c,h,x){var w=0;h&&(w|=4),KT(x,c,w,h)}var E0="_reactListening"+Math.random().toString(36).slice(2);function Bw(c){if(!c[E0]){c[E0]=!0,_c.forEach(function(x){x!=="selectionchange"&&(kJ.has(x)||Fw(x,!1,c),Fw(x,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[E0]||(h[E0]=!0,Fw("selectionchange",!1,h))}}function KT(c,h,x,w){switch(NR(h)){case 2:var E=rZ;break;case 8:E=nZ;break;default:E=tN}x=E.bind(null,h,x,c),E=void 0,!qf||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(E=!0),w?E!==void 0?c.addEventListener(h,x,{capture:!0,passive:E}):c.addEventListener(h,x,!0):E!==void 0?c.addEventListener(h,x,{passive:E}):c.addEventListener(h,x,!1)}function zw(c,h,x,w,E){var L=w;if((h&1)===0&&(h&2)===0&&w!==null)e:for(;;){if(w===null)return;var ee=w.tag;if(ee===3||ee===4){var de=w.stateNode.containerInfo;if(de===E)break;if(ee===4)for(ee=w.return;ee!==null;){var _e=ee.tag;if((_e===3||_e===4)&&ee.stateNode.containerInfo===E)return;ee=ee.return}for(;de!==null;){if(ee=Ai(de),ee===null)return;if(_e=ee.tag,_e===5||_e===6||_e===26||_e===27){w=L=ee;continue e}de=de.parentNode}}w=w.return}um(function(){var Ve=L,tt=vd(x),ot=[];e:{var We=Jg.get(c);if(We!==void 0){var Je=Yi,Ht=c;switch(c){case"keypress":if(Ki(x)===0)break e;case"keydown":case"keyup":Je=rn;break;case"focusin":Ht="focus",Je=Vl;break;case"focusout":Ht="blur",Je=Vl;break;case"beforeblur":case"afterblur":Je=Vl;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Je=Uf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Je=Ul;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Je=Ga;break;case Cd:case Wf:case Yg:Je=B;break;case Xg:Je=hs;break;case"scroll":case"scrollend":Je=Cu;break;case"wheel":Je=No;break;case"copy":case"cut":case"paste":Je=ye;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Je=_a;break;case"toggle":case"beforetoggle":Je=Vf}var jr=(h&4)!==0,Bn=!jr&&(c==="scroll"||c==="scrollend"),Ie=jr?We!==null?We+"Capture":null:We;jr=[];for(var Pe=Ve,Ue;Pe!==null;){var st=Pe;if(Ue=st.stateNode,st=st.tag,st!==5&&st!==26&&st!==27||Ue===null||Ie===null||(st=Ti(Pe,Ie),st!=null&&jr.push(wx(Pe,st,Ue))),Bn)break;Pe=Pe.return}0<jr.length&&(We=new Je(We,Ht,null,x,tt),ot.push({event:We,listeners:jr}))}}if((h&7)===0){e:{if(We=c==="mouseover"||c==="pointerover",Je=c==="mouseout"||c==="pointerout",We&&x!==$l&&(Ht=x.relatedTarget||x.fromElement)&&(Ai(Ht)||Ht[es]))break e;if((Je||We)&&(We=tt.window===tt?tt:(We=tt.ownerDocument)?We.defaultView||We.parentWindow:window,Je?(Ht=x.relatedTarget||x.toElement,Je=Ve,Ht=Ht?Ai(Ht):null,Ht!==null&&(Bn=i(Ht),jr=Ht.tag,Ht!==Bn||jr!==5&&jr!==27&&jr!==6)&&(Ht=null)):(Je=null,Ht=Ve),Je!==Ht)){if(jr=Uf,st="onMouseLeave",Ie="onMouseEnter",Pe="mouse",(c==="pointerout"||c==="pointerover")&&(jr=_a,st="onPointerLeave",Ie="onPointerEnter",Pe="pointer"),Bn=Je==null?We:bo(Je),Ue=Ht==null?We:bo(Ht),We=new jr(st,Pe+"leave",Je,x,tt),We.target=Bn,We.relatedTarget=Ue,st=null,Ai(tt)===Ve&&(jr=new jr(Ie,Pe+"enter",Ht,x,tt),jr.target=Ue,jr.relatedTarget=Bn,st=jr),Bn=st,Je&&Ht)t:{for(jr=OJ,Ie=Je,Pe=Ht,Ue=0,st=Ie;st;st=jr(st))Ue++;st=0;for(var ur=Pe;ur;ur=jr(ur))st++;for(;0<Ue-st;)Ie=jr(Ie),Ue--;for(;0<st-Ue;)Pe=jr(Pe),st--;for(;Ue--;){if(Ie===Pe||Pe!==null&&Ie===Pe.alternate){jr=Ie;break t}Ie=jr(Ie),Pe=jr(Pe)}jr=null}else jr=null;Je!==null&&YT(ot,We,Je,jr,!1),Ht!==null&&Bn!==null&&YT(ot,Bn,Ht,jr,!0)}}e:{if(We=Ve?bo(Ve):window,Je=We.nodeName&&We.nodeName.toLowerCase(),Je==="select"||Je==="input"&&We.type==="file")var un=Pc;else if(Hf(We))if(di)un=el;else{un=Aa;var er=Eu}else Je=We.nodeName,!Je||Je.toLowerCase()!=="input"||We.type!=="checkbox"&&We.type!=="radio"?Ve&&Ff(Ve.elementType)&&(un=Pc):un=pm;if(un&&(un=un(c,Ve))){Pi(ot,un,x,tt);break e}er&&er(c,We,Ve),c==="focusout"&&Ve&&We.type==="number"&&Ve.memoizedProps.value!=null&&Il(We,"number",We.value)}switch(er=Ve?bo(Ve):window,c){case"focusin":(Hf(er)||er.contentEditable==="true")&&(Mi=er,ec=Ve,Es=null);break;case"focusout":Es=ec=Mi=null;break;case"mousedown":Xi=!0;break;case"contextmenu":case"mouseup":case"dragend":Xi=!1,cn(ot,x,tt);break;case"selectionchange":if(Sd)break;case"keydown":case"keyup":cn(ot,x,tt)}var Vr;if(Xo)e:{switch(c){case"compositionstart":var en="onCompositionStart";break e;case"compositionend":en="onCompositionEnd";break e;case"compositionupdate":en="onCompositionUpdate";break e}en=void 0}else Jo?Rc(c,x)&&(en="onCompositionEnd"):c==="keydown"&&x.keyCode===229&&(en="onCompositionStart");en&&(Wl&&x.locale!=="ko"&&(Jo||en!=="onCompositionStart"?en==="onCompositionEnd"&&Jo&&(Vr=fm()):(Ri=tt,bd="value"in Ri?Ri.value:Ri.textContent,Jo=!0)),er=T0(Ve,en),0<er.length&&(en=new Le(en,c,null,x,tt),ot.push({event:en,listeners:er}),Vr?en.data=Vr:(Vr=Au(x),Vr!==null&&(en.data=Vr)))),(Vr=Nd?Gs(c,x):Kl(c,x))&&(en=T0(Ve,"onBeforeInput"),0<en.length&&(er=new Le("onBeforeInput","beforeinput",null,x,tt),ot.push({event:er,listeners:en}),er.data=Vr)),CJ(ot,c,Ve,x,tt)}WT(ot,h)})}function wx(c,h,x){return{instance:c,listener:h,currentTarget:x}}function T0(c,h){for(var x=h+"Capture",w=[];c!==null;){var E=c,L=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||L===null||(E=Ti(c,x),E!=null&&w.unshift(wx(c,E,L)),E=Ti(c,h),E!=null&&w.push(wx(c,E,L))),c.tag===3)return w;c=c.return}return[]}function OJ(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function YT(c,h,x,w,E){for(var L=h._reactName,ee=[];x!==null&&x!==w;){var de=x,_e=de.alternate,Ve=de.stateNode;if(de=de.tag,_e!==null&&_e===w)break;de!==5&&de!==26&&de!==27||Ve===null||(_e=Ve,E?(Ve=Ti(x,L),Ve!=null&&ee.unshift(wx(x,Ve,_e))):E||(Ve=Ti(x,L),Ve!=null&&ee.push(wx(x,Ve,_e)))),x=x.return}ee.length!==0&&c.push({event:h,listeners:ee})}var EJ=/\r\n?/g,TJ=/\u0000|\uFFFD/g;function XT(c){return(typeof c=="string"?c:""+c).replace(EJ,`
`).replace(TJ,"")}function JT(c,h){return h=XT(h),XT(c)===h}function Fn(c,h,x,w,E,L){switch(x){case"children":typeof w=="string"?h==="body"||h==="textarea"&&w===""||Hs(c,w):(typeof w=="number"||typeof w=="bigint")&&h!=="body"&&Hs(c,""+w);break;case"className":It(c,"class",w);break;case"tabIndex":It(c,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":It(c,x,w);break;case"style":lm(c,w,L);break;case"data":if(h!=="object"){It(c,"data",w);break}case"src":case"href":if(w===""&&(h!=="a"||x!=="href")){c.removeAttribute(x);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){c.removeAttribute(x);break}w=ci(""+w),c.setAttribute(x,w);break;case"action":case"formAction":if(typeof w=="function"){c.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(x==="formAction"?(h!=="input"&&Fn(c,h,"name",E.name,E,null),Fn(c,h,"formEncType",E.formEncType,E,null),Fn(c,h,"formMethod",E.formMethod,E,null),Fn(c,h,"formTarget",E.formTarget,E,null)):(Fn(c,h,"encType",E.encType,E,null),Fn(c,h,"method",E.method,E,null),Fn(c,h,"target",E.target,E,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){c.removeAttribute(x);break}w=ci(""+w),c.setAttribute(x,w);break;case"onClick":w!=null&&(c.onclick=wo);break;case"onScroll":w!=null&&Zr("scroll",c);break;case"onScrollEnd":w!=null&&Zr("scrollend",c);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(a(61));if(x=w.__html,x!=null){if(E.children!=null)throw Error(a(60));c.innerHTML=x}}break;case"multiple":c.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":c.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){c.removeAttribute("xlink:href");break}x=ci(""+w),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(x,""+w):c.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(x,""):c.removeAttribute(x);break;case"capture":case"download":w===!0?c.setAttribute(x,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(x,w):c.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?c.setAttribute(x,w):c.removeAttribute(x);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?c.removeAttribute(x):c.setAttribute(x,w);break;case"popover":Zr("beforetoggle",c),Zr("toggle",c),ft(c,"popover",w);break;case"xlinkActuate":Pt(c,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Pt(c,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Pt(c,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Pt(c,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Pt(c,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Pt(c,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Pt(c,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Pt(c,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Pt(c,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":ft(c,"is",w);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=Bf.get(x)||x,ft(c,x,w))}}function qw(c,h,x,w,E,L){switch(x){case"style":lm(c,w,L);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(a(61));if(x=w.__html,x!=null){if(E.children!=null)throw Error(a(60));c.innerHTML=x}}break;case"children":typeof w=="string"?Hs(c,w):(typeof w=="number"||typeof w=="bigint")&&Hs(c,""+w);break;case"onScroll":w!=null&&Zr("scroll",c);break;case"onScrollEnd":w!=null&&Zr("scrollend",c);break;case"onClick":w!=null&&(c.onclick=wo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vs.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(E=x.endsWith("Capture"),h=x.slice(2,E?x.length-7:void 0),L=c[_n]||null,L=L!=null?L[x]:null,typeof L=="function"&&c.removeEventListener(h,L,E),typeof w=="function")){typeof L!="function"&&L!==null&&(x in c?c[x]=null:c.hasAttribute(x)&&c.removeAttribute(x)),c.addEventListener(h,w,E);break e}x in c?c[x]=w:w===!0?c.setAttribute(x,""):ft(c,x,w)}}}function Js(c,h,x){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zr("error",c),Zr("load",c);var w=!1,E=!1,L;for(L in x)if(x.hasOwnProperty(L)){var ee=x[L];if(ee!=null)switch(L){case"src":w=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Fn(c,h,L,ee,x,null)}}E&&Fn(c,h,"srcSet",x.srcSet,x,null),w&&Fn(c,h,"src",x.src,x,null);return;case"input":Zr("invalid",c);var de=L=ee=E=null,_e=null,Ve=null;for(w in x)if(x.hasOwnProperty(w)){var tt=x[w];if(tt!=null)switch(w){case"name":E=tt;break;case"type":ee=tt;break;case"checked":_e=tt;break;case"defaultChecked":Ve=tt;break;case"value":L=tt;break;case"defaultValue":de=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(a(137,h));break;default:Fn(c,h,w,tt,x,null)}}Wi(c,L,de,_e,Ve,ee,E,!1);return;case"select":Zr("invalid",c),w=ee=L=null;for(E in x)if(x.hasOwnProperty(E)&&(de=x[E],de!=null))switch(E){case"value":L=de;break;case"defaultValue":ee=de;break;case"multiple":w=de;default:Fn(c,h,E,de,x,null)}h=L,x=ee,c.multiple=!!w,h!=null?us(c,!!w,h,!1):x!=null&&us(c,!!w,x,!0);return;case"textarea":Zr("invalid",c),L=E=w=null;for(ee in x)if(x.hasOwnProperty(ee)&&(de=x[ee],de!=null))switch(ee){case"value":w=de;break;case"defaultValue":E=de;break;case"children":L=de;break;case"dangerouslySetInnerHTML":if(de!=null)throw Error(a(91));break;default:Fn(c,h,ee,de,x,null)}Ca(c,w,E,L);return;case"option":for(_e in x)if(x.hasOwnProperty(_e)&&(w=x[_e],w!=null))switch(_e){case"selected":c.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:Fn(c,h,_e,w,x,null)}return;case"dialog":Zr("beforetoggle",c),Zr("toggle",c),Zr("cancel",c),Zr("close",c);break;case"iframe":case"object":Zr("load",c);break;case"video":case"audio":for(w=0;w<jx.length;w++)Zr(jx[w],c);break;case"image":Zr("error",c),Zr("load",c);break;case"details":Zr("toggle",c);break;case"embed":case"source":case"link":Zr("error",c),Zr("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ve in x)if(x.hasOwnProperty(Ve)&&(w=x[Ve],w!=null))switch(Ve){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Fn(c,h,Ve,w,x,null)}return;default:if(Ff(h)){for(tt in x)x.hasOwnProperty(tt)&&(w=x[tt],w!==void 0&&qw(c,h,tt,w,x,void 0));return}}for(de in x)x.hasOwnProperty(de)&&(w=x[de],w!=null&&Fn(c,h,de,w,x,null))}function RJ(c,h,x,w){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,L=null,ee=null,de=null,_e=null,Ve=null,tt=null;for(Je in x){var ot=x[Je];if(x.hasOwnProperty(Je)&&ot!=null)switch(Je){case"checked":break;case"value":break;case"defaultValue":_e=ot;default:w.hasOwnProperty(Je)||Fn(c,h,Je,null,w,ot)}}for(var We in w){var Je=w[We];if(ot=x[We],w.hasOwnProperty(We)&&(Je!=null||ot!=null))switch(We){case"type":L=Je;break;case"name":E=Je;break;case"checked":Ve=Je;break;case"defaultChecked":tt=Je;break;case"value":ee=Je;break;case"defaultValue":de=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(a(137,h));break;default:Je!==ot&&Fn(c,h,We,Je,w,ot)}}ha(c,ee,de,_e,Ve,tt,L,E);return;case"select":Je=ee=de=We=null;for(L in x)if(_e=x[L],x.hasOwnProperty(L)&&_e!=null)switch(L){case"value":break;case"multiple":Je=_e;default:w.hasOwnProperty(L)||Fn(c,h,L,null,w,_e)}for(E in w)if(L=w[E],_e=x[E],w.hasOwnProperty(E)&&(L!=null||_e!=null))switch(E){case"value":We=L;break;case"defaultValue":de=L;break;case"multiple":ee=L;default:L!==_e&&Fn(c,h,E,L,w,_e)}h=de,x=ee,w=Je,We!=null?us(c,!!x,We,!1):!!w!=!!x&&(h!=null?us(c,!!x,h,!0):us(c,!!x,x?[]:"",!1));return;case"textarea":Je=We=null;for(de in x)if(E=x[de],x.hasOwnProperty(de)&&E!=null&&!w.hasOwnProperty(de))switch(de){case"value":break;case"children":break;default:Fn(c,h,de,null,w,E)}for(ee in w)if(E=w[ee],L=x[ee],w.hasOwnProperty(ee)&&(E!=null||L!=null))switch(ee){case"value":We=E;break;case"defaultValue":Je=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:E!==L&&Fn(c,h,ee,E,w,L)}Hr(c,We,Je);return;case"option":for(var Ht in x)if(We=x[Ht],x.hasOwnProperty(Ht)&&We!=null&&!w.hasOwnProperty(Ht))switch(Ht){case"selected":c.selected=!1;break;default:Fn(c,h,Ht,null,w,We)}for(_e in w)if(We=w[_e],Je=x[_e],w.hasOwnProperty(_e)&&We!==Je&&(We!=null||Je!=null))switch(_e){case"selected":c.selected=We&&typeof We!="function"&&typeof We!="symbol";break;default:Fn(c,h,_e,We,w,Je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jr in x)We=x[jr],x.hasOwnProperty(jr)&&We!=null&&!w.hasOwnProperty(jr)&&Fn(c,h,jr,null,w,We);for(Ve in w)if(We=w[Ve],Je=x[Ve],w.hasOwnProperty(Ve)&&We!==Je&&(We!=null||Je!=null))switch(Ve){case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(a(137,h));break;default:Fn(c,h,Ve,We,w,Je)}return;default:if(Ff(h)){for(var Bn in x)We=x[Bn],x.hasOwnProperty(Bn)&&We!==void 0&&!w.hasOwnProperty(Bn)&&qw(c,h,Bn,void 0,w,We);for(tt in w)We=w[tt],Je=x[tt],!w.hasOwnProperty(tt)||We===Je||We===void 0&&Je===void 0||qw(c,h,tt,We,w,Je);return}}for(var Ie in x)We=x[Ie],x.hasOwnProperty(Ie)&&We!=null&&!w.hasOwnProperty(Ie)&&Fn(c,h,Ie,null,w,We);for(ot in w)We=w[ot],Je=x[ot],!w.hasOwnProperty(ot)||We===Je||We==null&&Je==null||Fn(c,h,ot,We,w,Je)}function ZT(c){switch(c){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function PJ(){if(typeof performance.getEntriesByType=="function"){for(var c=0,h=0,x=performance.getEntriesByType("resource"),w=0;w<x.length;w++){var E=x[w],L=E.transferSize,ee=E.initiatorType,de=E.duration;if(L&&de&&ZT(ee)){for(ee=0,de=E.responseEnd,w+=1;w<x.length;w++){var _e=x[w],Ve=_e.startTime;if(Ve>de)break;var tt=_e.transferSize,ot=_e.initiatorType;tt&&ZT(ot)&&(_e=_e.responseEnd,ee+=tt*(_e<de?1:(de-Ve)/(_e-Ve)))}if(--w,h+=8*(L+ee)/(E.duration/1e3),c++,10<c)break}}if(0<c)return h/c/1e6}return navigator.connection&&(c=navigator.connection.downlink,typeof c=="number")?c:5}var Uw=null,Vw=null;function R0(c){return c.nodeType===9?c:c.ownerDocument}function QT(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eR(c,h){if(c===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&h==="foreignObject"?0:c}function Hw(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Gw=null;function MJ(){var c=window.event;return c&&c.type==="popstate"?c===Gw?!1:(Gw=c,!0):(Gw=null,!1)}var tR=typeof setTimeout=="function"?setTimeout:void 0,DJ=typeof clearTimeout=="function"?clearTimeout:void 0,rR=typeof Promise=="function"?Promise:void 0,LJ=typeof queueMicrotask=="function"?queueMicrotask:typeof rR<"u"?function(c){return rR.resolve(null).then(c).catch(IJ)}:tR;function IJ(c){setTimeout(function(){throw c})}function Xu(c){return c==="head"}function nR(c,h){var x=h,w=0;do{var E=x.nextSibling;if(c.removeChild(x),E&&E.nodeType===8)if(x=E.data,x==="/$"||x==="/&"){if(w===0){c.removeChild(E),Km(h);return}w--}else if(x==="$"||x==="$?"||x==="$~"||x==="$!"||x==="&")w++;else if(x==="html")Nx(c.ownerDocument.documentElement);else if(x==="head"){x=c.ownerDocument.head,Nx(x);for(var L=x.firstChild;L;){var ee=L.nextSibling,de=L.nodeName;L[Ci]||de==="SCRIPT"||de==="STYLE"||de==="LINK"&&L.rel.toLowerCase()==="stylesheet"||x.removeChild(L),L=ee}}else x==="body"&&Nx(c.ownerDocument.body);x=E}while(x);Km(h)}function aR(c,h){var x=c;c=0;do{var w=x.nextSibling;if(x.nodeType===1?h?(x._stashedDisplay=x.style.display,x.style.display="none"):(x.style.display=x._stashedDisplay||"",x.getAttribute("style")===""&&x.removeAttribute("style")):x.nodeType===3&&(h?(x._stashedText=x.nodeValue,x.nodeValue=""):x.nodeValue=x._stashedText||""),w&&w.nodeType===8)if(x=w.data,x==="/$"){if(c===0)break;c--}else x!=="$"&&x!=="$?"&&x!=="$~"&&x!=="$!"||c++;x=w}while(x)}function Ww(c){var h=c.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var x=h;switch(h=h.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":Ww(x),_i(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}c.removeChild(x)}}function $J(c,h,x,w){for(;c.nodeType===1;){var E=x;if(c.nodeName.toLowerCase()!==h.toLowerCase()){if(!w&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(w){if(!c[Ci])switch(h){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(L=c.getAttribute("rel"),L==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(L!==E.rel||c.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||c.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||c.getAttribute("title")!==(E.title==null?null:E.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(L=c.getAttribute("src"),(L!==(E.src==null?null:E.src)||c.getAttribute("type")!==(E.type==null?null:E.type)||c.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&L&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(h==="input"&&c.type==="hidden"){var L=E.name==null?null:""+E.name;if(E.type==="hidden"&&c.getAttribute("name")===L)return c}else return c;if(c=ol(c.nextSibling),c===null)break}return null}function FJ(c,h,x){if(h==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!x||(c=ol(c.nextSibling),c===null))return null;return c}function sR(c,h){for(;c.nodeType!==8;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!h||(c=ol(c.nextSibling),c===null))return null;return c}function Kw(c){return c.data==="$?"||c.data==="$~"}function Yw(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState!=="loading"}function BJ(c,h){var x=c.ownerDocument;if(c.data==="$~")c._reactRetry=h;else if(c.data!=="$?"||x.readyState!=="loading")h();else{var w=function(){h(),x.removeEventListener("DOMContentLoaded",w)};x.addEventListener("DOMContentLoaded",w),c._reactRetry=w}}function ol(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return c}var Xw=null;function iR(c){c=c.nextSibling;for(var h=0;c;){if(c.nodeType===8){var x=c.data;if(x==="/$"||x==="/&"){if(h===0)return ol(c.nextSibling);h--}else x!=="$"&&x!=="$!"&&x!=="$?"&&x!=="$~"&&x!=="&"||h++}c=c.nextSibling}return null}function oR(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var x=c.data;if(x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"){if(h===0)return c;h--}else x!=="/$"&&x!=="/&"||h++}c=c.previousSibling}return null}function lR(c,h,x){switch(h=R0(x),c){case"html":if(c=h.documentElement,!c)throw Error(a(452));return c;case"head":if(c=h.head,!c)throw Error(a(453));return c;case"body":if(c=h.body,!c)throw Error(a(454));return c;default:throw Error(a(451))}}function Nx(c){for(var h=c.attributes;h.length;)c.removeAttributeNode(h[0]);_i(c)}var ll=new Map,cR=new Set;function P0(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var qd=G.d;G.d={f:zJ,r:qJ,D:UJ,C:VJ,L:HJ,m:GJ,X:KJ,S:WJ,M:YJ};function zJ(){var c=qd.f(),h=S0();return c||h}function qJ(c){var h=ki(c);h!==null&&h.tag===5&&h.type==="form"?_E(h):qd.r(c)}var Hm=typeof document>"u"?null:document;function dR(c,h,x){var w=Hm;if(w&&typeof h=="string"&&h){var E=Un(h);E='link[rel="'+c+'"][href="'+E+'"]',typeof x=="string"&&(E+='[crossorigin="'+x+'"]'),cR.has(E)||(cR.add(E),c={rel:c,crossOrigin:x,href:h},w.querySelector(E)===null&&(h=w.createElement("link"),Js(h,"link",c),An(h),w.head.appendChild(h)))}}function UJ(c){qd.D(c),dR("dns-prefetch",c,null)}function VJ(c,h){qd.C(c,h),dR("preconnect",c,h)}function HJ(c,h,x){qd.L(c,h,x);var w=Hm;if(w&&c&&h){var E='link[rel="preload"][as="'+Un(h)+'"]';h==="image"&&x&&x.imageSrcSet?(E+='[imagesrcset="'+Un(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(E+='[imagesizes="'+Un(x.imageSizes)+'"]')):E+='[href="'+Un(c)+'"]';var L=E;switch(h){case"style":L=Gm(c);break;case"script":L=Wm(c)}ll.has(L)||(c=m({rel:"preload",href:h==="image"&&x&&x.imageSrcSet?void 0:c,as:h},x),ll.set(L,c),w.querySelector(E)!==null||h==="style"&&w.querySelector(Sx(L))||h==="script"&&w.querySelector(Cx(L))||(h=w.createElement("link"),Js(h,"link",c),An(h),w.head.appendChild(h)))}}function GJ(c,h){qd.m(c,h);var x=Hm;if(x&&c){var w=h&&typeof h.as=="string"?h.as:"script",E='link[rel="modulepreload"][as="'+Un(w)+'"][href="'+Un(c)+'"]',L=E;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=Wm(c)}if(!ll.has(L)&&(c=m({rel:"modulepreload",href:c},h),ll.set(L,c),x.querySelector(E)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(Cx(L)))return}w=x.createElement("link"),Js(w,"link",c),An(w),x.head.appendChild(w)}}}function WJ(c,h,x){qd.S(c,h,x);var w=Hm;if(w&&c){var E=Os(w).hoistableStyles,L=Gm(c);h=h||"default";var ee=E.get(L);if(!ee){var de={loading:0,preload:null};if(ee=w.querySelector(Sx(L)))de.loading=5;else{c=m({rel:"stylesheet",href:c,"data-precedence":h},x),(x=ll.get(L))&&Jw(c,x);var _e=ee=w.createElement("link");An(_e),Js(_e,"link",c),_e._p=new Promise(function(Ve,tt){_e.onload=Ve,_e.onerror=tt}),_e.addEventListener("load",function(){de.loading|=1}),_e.addEventListener("error",function(){de.loading|=2}),de.loading|=4,M0(ee,h,w)}ee={type:"stylesheet",instance:ee,count:1,state:de},E.set(L,ee)}}}function KJ(c,h){qd.X(c,h);var x=Hm;if(x&&c){var w=Os(x).hoistableScripts,E=Wm(c),L=w.get(E);L||(L=x.querySelector(Cx(E)),L||(c=m({src:c,async:!0},h),(h=ll.get(E))&&Zw(c,h),L=x.createElement("script"),An(L),Js(L,"link",c),x.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},w.set(E,L))}}function YJ(c,h){qd.M(c,h);var x=Hm;if(x&&c){var w=Os(x).hoistableScripts,E=Wm(c),L=w.get(E);L||(L=x.querySelector(Cx(E)),L||(c=m({src:c,async:!0,type:"module"},h),(h=ll.get(E))&&Zw(c,h),L=x.createElement("script"),An(L),Js(L,"link",c),x.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},w.set(E,L))}}function uR(c,h,x,w){var E=(E=ie.current)?P0(E):null;if(!E)throw Error(a(446));switch(c){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(h=Gm(x.href),x=Os(E).hoistableStyles,w=x.get(h),w||(w={type:"style",instance:null,count:0,state:null},x.set(h,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){c=Gm(x.href);var L=Os(E).hoistableStyles,ee=L.get(c);if(ee||(E=E.ownerDocument||E,ee={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(c,ee),(L=E.querySelector(Sx(c)))&&!L._p&&(ee.instance=L,ee.state.loading=5),ll.has(c)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},ll.set(c,x),L||XJ(E,c,x,ee.state))),h&&w===null)throw Error(a(528,""));return ee}if(h&&w!==null)throw Error(a(529,""));return null;case"script":return h=x.async,x=x.src,typeof x=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Wm(x),x=Os(E).hoistableScripts,w=x.get(h),w||(w={type:"script",instance:null,count:0,state:null},x.set(h,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,c))}}function Gm(c){return'href="'+Un(c)+'"'}function Sx(c){return'link[rel="stylesheet"]['+c+"]"}function fR(c){return m({},c,{"data-precedence":c.precedence,precedence:null})}function XJ(c,h,x,w){c.querySelector('link[rel="preload"][as="style"]['+h+"]")?w.loading=1:(h=c.createElement("link"),w.preload=h,h.addEventListener("load",function(){return w.loading|=1}),h.addEventListener("error",function(){return w.loading|=2}),Js(h,"link",x),An(h),c.head.appendChild(h))}function Wm(c){return'[src="'+Un(c)+'"]'}function Cx(c){return"script[async]"+c}function hR(c,h,x){if(h.count++,h.instance===null)switch(h.type){case"style":var w=c.querySelector('style[data-href~="'+Un(x.href)+'"]');if(w)return h.instance=w,An(w),w;var E=m({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return w=(c.ownerDocument||c).createElement("style"),An(w),Js(w,"style",E),M0(w,x.precedence,c),h.instance=w;case"stylesheet":E=Gm(x.href);var L=c.querySelector(Sx(E));if(L)return h.state.loading|=4,h.instance=L,An(L),L;w=fR(x),(E=ll.get(E))&&Jw(w,E),L=(c.ownerDocument||c).createElement("link"),An(L);var ee=L;return ee._p=new Promise(function(de,_e){ee.onload=de,ee.onerror=_e}),Js(L,"link",w),h.state.loading|=4,M0(L,x.precedence,c),h.instance=L;case"script":return L=Wm(x.src),(E=c.querySelector(Cx(L)))?(h.instance=E,An(E),E):(w=x,(E=ll.get(L))&&(w=m({},x),Zw(w,E)),c=c.ownerDocument||c,E=c.createElement("script"),An(E),Js(E,"link",w),c.head.appendChild(E),h.instance=E);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(w=h.instance,h.state.loading|=4,M0(w,x.precedence,c));return h.instance}function M0(c,h,x){for(var w=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=w.length?w[w.length-1]:null,L=E,ee=0;ee<w.length;ee++){var de=w[ee];if(de.dataset.precedence===h)L=de;else if(L!==E)break}L?L.parentNode.insertBefore(c,L.nextSibling):(h=x.nodeType===9?x.head:x,h.insertBefore(c,h.firstChild))}function Jw(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.title==null&&(c.title=h.title)}function Zw(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.integrity==null&&(c.integrity=h.integrity)}var D0=null;function mR(c,h,x){if(D0===null){var w=new Map,E=D0=new Map;E.set(x,w)}else E=D0,w=E.get(x),w||(w=new Map,E.set(x,w));if(w.has(c))return w;for(w.set(c,null),x=x.getElementsByTagName(c),E=0;E<x.length;E++){var L=x[E];if(!(L[Ci]||L[pn]||c==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var ee=L.getAttribute(h)||"";ee=c+ee;var de=w.get(ee);de?de.push(L):w.set(ee,[L])}}return w}function pR(c,h,x){c=c.ownerDocument||c,c.head.insertBefore(x,h==="title"?c.querySelector("head > title"):null)}function JJ(c,h,x){if(x===1||h.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return c=h.disabled,typeof h.precedence=="string"&&c==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function gR(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}function ZJ(c,h,x,w){if(x.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var E=Gm(w.href),L=h.querySelector(Sx(E));if(L){h=L._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(c.count++,c=L0.bind(c),h.then(c,c)),x.state.loading|=4,x.instance=L,An(L);return}L=h.ownerDocument||h,w=fR(w),(E=ll.get(E))&&Jw(w,E),L=L.createElement("link"),An(L);var ee=L;ee._p=new Promise(function(de,_e){ee.onload=de,ee.onerror=_e}),Js(L,"link",w),x.instance=L}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(x,h),(h=x.state.preload)&&(x.state.loading&3)===0&&(c.count++,x=L0.bind(c),h.addEventListener("load",x),h.addEventListener("error",x))}}var Qw=0;function QJ(c,h){return c.stylesheets&&c.count===0&&$0(c,c.stylesheets),0<c.count||0<c.imgCount?function(x){var w=setTimeout(function(){if(c.stylesheets&&$0(c,c.stylesheets),c.unsuspend){var L=c.unsuspend;c.unsuspend=null,L()}},6e4+h);0<c.imgBytes&&Qw===0&&(Qw=62500*PJ());var E=setTimeout(function(){if(c.waitingForImages=!1,c.count===0&&(c.stylesheets&&$0(c,c.stylesheets),c.unsuspend)){var L=c.unsuspend;c.unsuspend=null,L()}},(c.imgBytes>Qw?50:800)+h);return c.unsuspend=x,function(){c.unsuspend=null,clearTimeout(w),clearTimeout(E)}}:null}function L0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$0(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var I0=null;function $0(c,h){c.stylesheets=null,c.unsuspend!==null&&(c.count++,I0=new Map,h.forEach(eZ,c),I0=null,L0.call(c))}function eZ(c,h){if(!(h.state.loading&4)){var x=I0.get(c);if(x)var w=x.get(null);else{x=new Map,I0.set(c,x);for(var E=c.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<E.length;L++){var ee=E[L];(ee.nodeName==="LINK"||ee.getAttribute("media")!=="not all")&&(x.set(ee.dataset.precedence,ee),w=ee)}w&&x.set(null,w)}E=h.instance,ee=E.getAttribute("data-precedence"),L=x.get(ee)||w,L===w&&x.set(null,E),x.set(ee,E),this.count++,w=L0.bind(this),E.addEventListener("load",w),E.addEventListener("error",w),L?L.parentNode.insertBefore(E,L.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(E,c.firstChild)),h.state.loading|=4}}var _x={$$typeof:C,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function tZ(c,h,x,w,E,L,ee,de,_e){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ii(0),this.hiddenUpdates=ii(null),this.identifierPrefix=w,this.onUncaughtError=E,this.onCaughtError=L,this.onRecoverableError=ee,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function xR(c,h,x,w,E,L,ee,de,_e,Ve,tt,ot){return c=new tZ(c,h,x,ee,_e,Ve,tt,ot,de),h=1,L===!0&&(h|=24),L=Rs(3,null,null,h),c.current=L,L.stateNode=c,h=$u(),h.refCount++,c.pooledCache=h,h.refCount++,L.memoizedState={element:w,isDehydrated:x,cache:h},wt(L),c}function vR(c){return c?(c=ps,c):ps}function yR(c,h,x,w,E,L){E=vR(E),w.context===null?w.context=E:w.pendingContext=E,w=pr(h),w.payload={element:x},L=L===void 0?null:L,L!==null&&(w.callback=L),x=Br(c,w,h),x!==null&&(uo(x,c,h),gn(x,c,h))}function bR(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var x=c.retryLane;c.retryLane=x!==0&&x<h?x:h}}function eN(c,h){bR(c,h),(c=c.alternate)&&bR(c,h)}function jR(c){if(c.tag===13||c.tag===31){var h=tc(c,67108864);h!==null&&uo(h,c,67108864),eN(c,67108864)}}function wR(c){if(c.tag===13||c.tag===31){var h=To();h=Mn(h);var x=tc(c,h);x!==null&&uo(x,c,h),eN(c,h)}}var F0=!0;function rZ(c,h,x,w){var E=V.T;V.T=null;var L=G.p;try{G.p=2,tN(c,h,x,w)}finally{G.p=L,V.T=E}}function nZ(c,h,x,w){var E=V.T;V.T=null;var L=G.p;try{G.p=8,tN(c,h,x,w)}finally{G.p=L,V.T=E}}function tN(c,h,x,w){if(F0){var E=rN(w);if(E===null)zw(c,h,w,B0,x),SR(c,w);else if(sZ(E,c,h,x,w))w.stopPropagation();else if(SR(c,w),h&4&&-1<aZ.indexOf(c)){for(;E!==null;){var L=ki(E);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var ee=nr(L.pendingLanes);if(ee!==0){var de=L;for(de.pendingLanes|=2,de.entangledLanes|=2;ee;){var _e=1<<31-sr(ee);de.entanglements[1]|=_e,ee&=~_e}Gc(L),(vn&6)===0&&(w0=Nt()+500,bx(0))}}break;case 31:case 13:de=tc(L,2),de!==null&&uo(de,L,2),S0(),eN(L,2)}if(L=rN(w),L===null&&zw(c,h,w,B0,x),L===E)break;E=L}E!==null&&w.stopPropagation()}else zw(c,h,w,null,x)}}function rN(c){return c=vd(c),nN(c)}var B0=null;function nN(c){if(B0=null,c=Ai(c),c!==null){var h=i(c);if(h===null)c=null;else{var x=h.tag;if(x===13){if(c=o(h),c!==null)return c;c=null}else if(x===31){if(c=l(h),c!==null)return c;c=null}else if(x===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null)}}return B0=c,null}function NR(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zt()){case Dt:return 2;case Gt:return 8;case rr:case jt:return 32;case Ce:return 268435456;default:return 32}default:return 32}}var aN=!1,Ju=null,Zu=null,Qu=null,Ax=new Map,kx=new Map,ef=[],aZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function SR(c,h){switch(c){case"focusin":case"focusout":Ju=null;break;case"dragenter":case"dragleave":Zu=null;break;case"mouseover":case"mouseout":Qu=null;break;case"pointerover":case"pointerout":Ax.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":kx.delete(h.pointerId)}}function Ox(c,h,x,w,E,L){return c===null||c.nativeEvent!==L?(c={blockedOn:h,domEventName:x,eventSystemFlags:w,nativeEvent:L,targetContainers:[E]},h!==null&&(h=ki(h),h!==null&&jR(h)),c):(c.eventSystemFlags|=w,h=c.targetContainers,E!==null&&h.indexOf(E)===-1&&h.push(E),c)}function sZ(c,h,x,w,E){switch(h){case"focusin":return Ju=Ox(Ju,c,h,x,w,E),!0;case"dragenter":return Zu=Ox(Zu,c,h,x,w,E),!0;case"mouseover":return Qu=Ox(Qu,c,h,x,w,E),!0;case"pointerover":var L=E.pointerId;return Ax.set(L,Ox(Ax.get(L)||null,c,h,x,w,E)),!0;case"gotpointercapture":return L=E.pointerId,kx.set(L,Ox(kx.get(L)||null,c,h,x,w,E)),!0}return!1}function CR(c){var h=Ai(c.target);if(h!==null){var x=i(h);if(x!==null){if(h=x.tag,h===13){if(h=o(x),h!==null){c.blockedOn=h,Ni(c.priority,function(){wR(x)});return}}else if(h===31){if(h=l(x),h!==null){c.blockedOn=h,Ni(c.priority,function(){wR(x)});return}}else if(h===3&&x.stateNode.current.memoizedState.isDehydrated){c.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}c.blockedOn=null}function z0(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var x=rN(c.nativeEvent);if(x===null){x=c.nativeEvent;var w=new x.constructor(x.type,x);$l=w,x.target.dispatchEvent(w),$l=null}else return h=ki(x),h!==null&&jR(h),c.blockedOn=x,!1;h.shift()}return!0}function _R(c,h,x){z0(c)&&x.delete(h)}function iZ(){aN=!1,Ju!==null&&z0(Ju)&&(Ju=null),Zu!==null&&z0(Zu)&&(Zu=null),Qu!==null&&z0(Qu)&&(Qu=null),Ax.forEach(_R),kx.forEach(_R)}function q0(c,h){c.blockedOn===h&&(c.blockedOn=null,aN||(aN=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,iZ)))}var U0=null;function AR(c){U0!==c&&(U0=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){U0===c&&(U0=null);for(var h=0;h<c.length;h+=3){var x=c[h],w=c[h+1],E=c[h+2];if(typeof w!="function"){if(nN(w||x)===null)continue;break}var L=ki(x);L!==null&&(c.splice(h,3),h-=3,rw(L,{pending:!0,data:E,method:x.method,action:w},w,E))}}))}function Km(c){function h(_e){return q0(_e,c)}Ju!==null&&q0(Ju,c),Zu!==null&&q0(Zu,c),Qu!==null&&q0(Qu,c),Ax.forEach(h),kx.forEach(h);for(var x=0;x<ef.length;x++){var w=ef[x];w.blockedOn===c&&(w.blockedOn=null)}for(;0<ef.length&&(x=ef[0],x.blockedOn===null);)CR(x),x.blockedOn===null&&ef.shift();if(x=(c.ownerDocument||c).$$reactFormReplay,x!=null)for(w=0;w<x.length;w+=3){var E=x[w],L=x[w+1],ee=E[_n]||null;if(typeof L=="function")ee||AR(x);else if(ee){var de=null;if(L&&L.hasAttribute("formAction")){if(E=L,ee=L[_n]||null)de=ee.formAction;else if(nN(E)!==null)continue}else de=ee.action;typeof de=="function"?x[w+1]=de:(x.splice(w,3),w-=3),AR(x)}}}function kR(){function c(L){L.canIntercept&&L.info==="react-transition"&&L.intercept({handler:function(){return new Promise(function(ee){return E=ee})},focusReset:"manual",scroll:"manual"})}function h(){E!==null&&(E(),E=null),w||setTimeout(x,20)}function x(){if(!w&&!navigation.transition){var L=navigation.currentEntry;L&&L.url!=null&&navigation.navigate(L.url,{state:L.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,E=null;return navigation.addEventListener("navigate",c),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(x,100),function(){w=!0,navigation.removeEventListener("navigate",c),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),E!==null&&(E(),E=null)}}}function sN(c){this._internalRoot=c}V0.prototype.render=sN.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(a(409));var x=h.current,w=To();yR(x,w,c,h,null,null)},V0.prototype.unmount=sN.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;yR(c.current,2,null,c,null,null),S0(),h[es]=null}};function V0(c){this._internalRoot=c}V0.prototype.unstable_scheduleHydration=function(c){if(c){var h=Sa();c={blockedOn:null,target:c,priority:h};for(var x=0;x<ef.length&&h!==0&&h<ef[x].priority;x++);ef.splice(x,0,c),x===0&&CR(c)}};var OR=t.version;if(OR!=="19.2.1")throw Error(a(527,OR,"19.2.1"));G.findDOMNode=function(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(a(188)):(c=Object.keys(c).join(","),Error(a(268,c)));return c=u(h),c=c!==null?f(c):null,c=c===null?null:c.stateNode,c};var oZ={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var H0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!H0.isDisabled&&H0.supportsFiber)try{Bt=H0.inject(oZ),bt=H0}catch{}}return Tx.createRoot=function(c,h){if(!s(c))throw Error(a(299));var x=!1,w="",E=LE,L=IE,ee=$E;return h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(L=h.onCaughtError),h.onRecoverableError!==void 0&&(ee=h.onRecoverableError)),h=xR(c,1,!1,null,null,x,w,null,E,L,ee,kR),c[es]=h.current,Bw(c),new sN(h)},Tx.hydrateRoot=function(c,h,x){if(!s(c))throw Error(a(299));var w=!1,E="",L=LE,ee=IE,de=$E,_e=null;return x!=null&&(x.unstable_strictMode===!0&&(w=!0),x.identifierPrefix!==void 0&&(E=x.identifierPrefix),x.onUncaughtError!==void 0&&(L=x.onUncaughtError),x.onCaughtError!==void 0&&(ee=x.onCaughtError),x.onRecoverableError!==void 0&&(de=x.onRecoverableError),x.formState!==void 0&&(_e=x.formState)),h=xR(c,1,!0,h,x??null,w,E,_e,L,ee,de,kR),h.context=vR(null),x=h.current,w=To(),w=Mn(w),E=pr(w),E.callback=null,Br(x,E,w),x=w,h.current.lanes=x,Zt(h,x),Gc(h),c[es]=h.current,Bw(c),new V0(h)},Tx.version="19.2.1",Tx}var FR;function yZ(){if(FR)return cN.exports;FR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),cN.exports=vZ(),cN.exports}var bZ=yZ();/**
 * react-router v7.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var BR="popstate";function jZ(e={}){function t(a,s){let{pathname:i,search:o,hash:l}=a.location;return vA("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(a,s){return typeof s=="string"?s:xv(s)}return NZ(t,r,null,e)}function Na(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qo(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function wZ(){return Math.random().toString(36).substring(2,10)}function zR(e,t){return{usr:e.state,key:e.key,idx:t}}function vA(e,t,r=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?jg(t):t,state:r,key:t&&t.key||a||wZ()}}function xv({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function jg(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function NZ(e,t,r,a={}){let{window:s=document.defaultView,v5Compat:i=!1}=a,o=s.history,l="POP",d=null,u=f();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function f(){return(o.state||{idx:null}).idx}function m(){l="POP";let y=f(),j=y==null?null:y-u;u=y,d&&d({action:l,location:v.location,delta:j})}function p(y,j){l="PUSH";let _=vA(v.location,y,j);u=f()+1;let C=zR(_,u),A=v.createHref(_);try{o.pushState(C,"",A)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(A)}i&&d&&d({action:l,location:v.location,delta:1})}function g(y,j){l="REPLACE";let _=vA(v.location,y,j);u=f();let C=zR(_,u),A=v.createHref(_);o.replaceState(C,"",A),i&&d&&d({action:l,location:v.location,delta:0})}function b(y){return SZ(y)}let v={get action(){return l},get location(){return e(s,o)},listen(y){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(BR,m),d=y,()=>{s.removeEventListener(BR,m),d=null}},createHref(y){return t(s,y)},createURL:b,encodeLocation(y){let j=b(y);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:p,replace:g,go(y){return o.go(y)}};return v}function SZ(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Na(r,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:xv(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function o9(e,t,r="/"){return CZ(e,t,r,!1)}function CZ(e,t,r,a){let s=typeof t=="string"?jg(t):t,i=au(s.pathname||"/",r);if(i==null)return null;let o=l9(e);_Z(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let u=IZ(i);l=DZ(o[d],u,a)}return l}function l9(e,t=[],r=[],a="",s=!1){let i=(o,l,d=s,u)=>{let f={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(a)&&d)return;Na(f.relativePath.startsWith(a),`Absolute route path "${f.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(a.length)}let m=Qd([a,f.relativePath]),p=r.concat(f);o.children&&o.children.length>0&&(Na(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),l9(o.children,t,p,m,d)),!(o.path==null&&!o.index)&&t.push({path:m,score:PZ(m,o.index),routesMeta:p})};return e.forEach((o,l)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,l);else for(let u of c9(o.path))i(o,l,!0,u)}),t}function c9(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return s?[i,""]:[i];let o=c9(a.join("/")),l=[];return l.push(...o.map(d=>d===""?i:[i,d].join("/"))),s&&l.push(...o),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function _Z(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:MZ(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var AZ=/^:[\w-]+$/,kZ=3,OZ=2,EZ=1,TZ=10,RZ=-2,qR=e=>e==="*";function PZ(e,t){let r=e.split("/"),a=r.length;return r.some(qR)&&(a+=RZ),t&&(a+=OZ),r.filter(s=>!qR(s)).reduce((s,i)=>s+(AZ.test(i)?kZ:i===""?EZ:TZ),a)}function MZ(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function DZ(e,t,r=!1){let{routesMeta:a}=e,s={},i="/",o=[];for(let l=0;l<a.length;++l){let d=a[l],u=l===a.length-1,f=i==="/"?t:t.slice(i.length)||"/",m=Hb({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},f),p=d.route;if(!m&&u&&r&&!a[a.length-1].route.index&&(m=Hb({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Qd([i,m.pathname]),pathnameBase:qZ(Qd([i,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(i=Qd([i,m.pathnameBase]))}return o}function Hb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=LZ(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:a.reduce((u,{paramName:f,isOptional:m},p)=>{if(f==="*"){let b=l[p]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const g=l[p];return m&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function LZ(e,t=!1,r=!0){qo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(a.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function IZ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qo(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function au(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}var $Z=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FZ=e=>$Z.test(e);function BZ(e,t="/"){let{pathname:r,search:a="",hash:s=""}=typeof e=="string"?jg(e):e,i;if(r)if(FZ(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),qo(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${r}`)}r.startsWith("/")?i=UR(r.substring(1),"/"):i=UR(r,t)}else i=t;return{pathname:i,search:UZ(a),hash:VZ(s)}}function UR(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function fN(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zZ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Wk(e){let t=zZ(e);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function Kk(e,t,r,a=!1){let s;typeof e=="string"?s=jg(e):(s={...e},Na(!s.pathname||!s.pathname.includes("?"),fN("?","pathname","search",s)),Na(!s.pathname||!s.pathname.includes("#"),fN("#","pathname","hash",s)),Na(!s.search||!s.search.includes("#"),fN("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let m=t.length-1;if(!a&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}l=m>=0?t[m]:"/"}let d=BZ(s,l),u=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(u||f)&&(d.pathname+="/"),d}var Qd=e=>e.join("/").replace(/\/\/+/g,"/"),qZ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),UZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,VZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function HZ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function GZ(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var d9=["POST","PUT","PATCH","DELETE"];new Set(d9);var WZ=["GET",...d9];new Set(WZ);var wg=N.createContext(null);wg.displayName="DataRouter";var vj=N.createContext(null);vj.displayName="DataRouterState";N.createContext(!1);var u9=N.createContext({isTransitioning:!1});u9.displayName="ViewTransition";var KZ=N.createContext(new Map);KZ.displayName="Fetchers";var YZ=N.createContext(null);YZ.displayName="Await";var El=N.createContext(null);El.displayName="Navigation";var vy=N.createContext(null);vy.displayName="Location";var dd=N.createContext({outlet:null,matches:[],isDataRoute:!1});dd.displayName="Route";var Yk=N.createContext(null);Yk.displayName="RouteError";function XZ(e,{relative:t}={}){Na(Ng(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=N.useContext(El),{hash:s,pathname:i,search:o}=yy(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:Qd([r,i])),a.createHref({pathname:l,search:o,hash:s})}function Ng(){return N.useContext(vy)!=null}function Tl(){return Na(Ng(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(vy).location}var f9="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function h9(e){N.useContext(El).static||N.useLayoutEffect(e)}function Sg(){let{isDataRoute:e}=N.useContext(dd);return e?cQ():JZ()}function JZ(){Na(Ng(),"useNavigate() may be used only in the context of a <Router> component.");let e=N.useContext(wg),{basename:t,navigator:r}=N.useContext(El),{matches:a}=N.useContext(dd),{pathname:s}=Tl(),i=JSON.stringify(Wk(a)),o=N.useRef(!1);return h9(()=>{o.current=!0}),N.useCallback((d,u={})=>{if(qo(o.current,f9),!o.current)return;if(typeof d=="number"){r.go(d);return}let f=Kk(d,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Qd([t,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[t,r,i,s,e])}N.createContext(null);function yy(e,{relative:t}={}){let{matches:r}=N.useContext(dd),{pathname:a}=Tl(),s=JSON.stringify(Wk(r));return N.useMemo(()=>Kk(e,JSON.parse(s),a,t==="path"),[e,s,a,t])}function ZZ(e,t){return m9(e,t)}function m9(e,t,r,a,s){var _;Na(Ng(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=N.useContext(El),{matches:o}=N.useContext(dd),l=o[o.length-1],d=l?l.params:{},u=l?l.pathname:"/",f=l?l.pathnameBase:"/",m=l&&l.route;{let C=m&&m.path||"";p9(u,!m||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let p=Tl(),g;if(t){let C=typeof t=="string"?jg(t):t;Na(f==="/"||((_=C.pathname)==null?void 0:_.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),g=C}else g=p;let b=g.pathname||"/",v=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let y=o9(e,{pathname:v});qo(m||y!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),qo(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=nQ(y&&y.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Qd([f,i.encodeLocation?i.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Qd([f,i.encodeLocation?i.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),o,r,a,s);return t&&j?N.createElement(vy.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},j):j}function QZ(){let e=lQ(),t=HZ(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:i},"ErrorBoundary")," or"," ",N.createElement("code",{style:i},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:s},r):null,o)}var eQ=N.createElement(QZ,null),tQ=class extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?N.createElement(dd.Provider,{value:this.props.routeContext},N.createElement(Yk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rQ({routeContext:e,match:t,children:r}){let a=N.useContext(wg);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(dd.Provider,{value:e},r)}function nQ(e,t=[],r=null,a=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let f=i.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);Na(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let l=!1,d=-1;if(r)for(let f=0;f<i.length;f++){let m=i[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:p,errors:g}=r,b=m.route.loader&&!p.hasOwnProperty(m.route.id)&&(!g||g[m.route.id]===void 0);if(m.route.lazy||b){l=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}let u=r&&a?(f,m)=>{var p,g;a(f,{location:r.location,params:((g=(p=r.matches)==null?void 0:p[0])==null?void 0:g.params)??{},unstable_pattern:GZ(r.matches),errorInfo:m})}:void 0;return i.reduceRight((f,m,p)=>{let g,b=!1,v=null,y=null;r&&(g=o&&m.route.id?o[m.route.id]:void 0,v=m.route.errorElement||eQ,l&&(d<0&&p===0?(p9("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,y=null):d===p&&(b=!0,y=m.route.hydrateFallbackElement||null)));let j=t.concat(i.slice(0,p+1)),_=()=>{let C;return g?C=v:b?C=y:m.route.Component?C=N.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=f,N.createElement(rQ,{match:m,routeContext:{outlet:f,matches:j,isDataRoute:r!=null},children:C})};return r&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?N.createElement(tQ,{location:r.location,revalidation:r.revalidation,component:v,error:g,children:_(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:u}):_()},null)}function Xk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aQ(e){let t=N.useContext(wg);return Na(t,Xk(e)),t}function sQ(e){let t=N.useContext(vj);return Na(t,Xk(e)),t}function iQ(e){let t=N.useContext(dd);return Na(t,Xk(e)),t}function Jk(e){let t=iQ(e),r=t.matches[t.matches.length-1];return Na(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function oQ(){return Jk("useRouteId")}function lQ(){var a;let e=N.useContext(Yk),t=sQ("useRouteError"),r=Jk("useRouteError");return e!==void 0?e:(a=t.errors)==null?void 0:a[r]}function cQ(){let{router:e}=aQ("useNavigate"),t=Jk("useNavigate"),r=N.useRef(!1);return h9(()=>{r.current=!0}),N.useCallback(async(s,i={})=>{qo(r.current,f9),r.current&&(typeof s=="number"?await e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var VR={};function p9(e,t,r){!t&&!VR[e]&&(VR[e]=!0,qo(!1,r))}N.memo(dQ);function dQ({routes:e,future:t,state:r,unstable_onError:a}){return m9(e,void 0,r,a,t)}function uQ({to:e,replace:t,state:r,relative:a}){Na(Ng(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=N.useContext(El);qo(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=N.useContext(dd),{pathname:o}=Tl(),l=Sg(),d=Kk(e,Wk(i),o,a==="path"),u=JSON.stringify(d);return N.useEffect(()=>{l(JSON.parse(u),{replace:t,state:r,relative:a})},[l,u,a,t,r]),null}function oa(e){Na(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fQ({basename:e="/",children:t=null,location:r,navigationType:a="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){Na(!Ng(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:l,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[l,s,i,o]);typeof r=="string"&&(r=jg(r));let{pathname:u="/",search:f="",hash:m="",state:p=null,key:g="default"}=r,b=N.useMemo(()=>{let v=au(u,l);return v==null?null:{location:{pathname:v,search:f,hash:m,state:p,key:g},navigationType:a}},[l,u,f,m,p,g,a]);return qo(b!=null,`<Router basename="${l}"> is not able to match the URL "${u}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:N.createElement(El.Provider,{value:d},N.createElement(vy.Provider,{children:t,value:b}))}function hQ({children:e,location:t}){return ZZ(yA(e),t)}function yA(e,t=[]){let r=[];return N.Children.forEach(e,(a,s)=>{if(!N.isValidElement(a))return;let i=[...t,s];if(a.type===N.Fragment){r.push.apply(r,yA(a.props.children,i));return}Na(a.type===oa,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Na(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=yA(a.props.children,i)),r.push(o)}),r}var kb="get",Ob="application/x-www-form-urlencoded";function yj(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function mQ(e){return yj(e)&&e.tagName.toLowerCase()==="button"}function pQ(e){return yj(e)&&e.tagName.toLowerCase()==="form"}function gQ(e){return yj(e)&&e.tagName.toLowerCase()==="input"}function xQ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function vQ(e,t){return e.button===0&&(!t||t==="_self")&&!xQ(e)}function bA(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let a=e[r];return t.concat(Array.isArray(a)?a.map(s=>[r,s]):[[r,a]])},[]))}function yQ(e,t){let r=bA(e);return t&&t.forEach((a,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var W0=null;function bQ(){if(W0===null)try{new FormData(document.createElement("form"),0),W0=!1}catch{W0=!0}return W0}var jQ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hN(e){return e!=null&&!jQ.has(e)?(qo(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ob}"`),null):e}function wQ(e,t){let r,a,s,i,o;if(pQ(e)){let l=e.getAttribute("action");a=l?au(l,t):null,r=e.getAttribute("method")||kb,s=hN(e.getAttribute("enctype"))||Ob,i=new FormData(e)}else if(mQ(e)||gQ(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||l.getAttribute("action");if(a=d?au(d,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||kb,s=hN(e.getAttribute("formenctype"))||hN(l.getAttribute("enctype"))||Ob,i=new FormData(l,e),!bQ()){let{name:u,type:f,value:m}=e;if(f==="image"){let p=u?`${u}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else u&&i.append(u,m)}}else{if(yj(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=kb,a=null,s=Ob,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:a,method:r.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Zk(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function NQ(e,t,r){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a.pathname==="/"?a.pathname=`_root.${r}`:t&&au(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function SQ(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CQ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function _Q(e,t,r){let a=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await SQ(i,r);return o.links?o.links():[]}return[]}));return EQ(a.flat(1).filter(CQ).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function HR(e,t,r,a,s,i){let o=(d,u)=>r[u]?d.route.id!==r[u].route.id:!0,l=(d,u)=>{var f;return r[u].pathname!==d.pathname||((f=r[u].route.path)==null?void 0:f.endsWith("*"))&&r[u].params["*"]!==d.params["*"]};return i==="assets"?t.filter((d,u)=>o(d,u)||l(d,u)):i==="data"?t.filter((d,u)=>{var m;let f=a.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(o(d,u)||l(d,u))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=r[0])==null?void 0:m.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function AQ(e,t,{includeHydrateFallback:r}={}){return kQ(e.map(a=>{let s=t.routes[a.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function kQ(e){return[...new Set(e)]}function OQ(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}function EQ(e,t){let r=new Set;return new Set(t),e.reduce((a,s)=>{let i=JSON.stringify(OQ(s));return r.has(i)||(r.add(i),a.push({key:i,link:s})),a},[])}function g9(){let e=N.useContext(wg);return Zk(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function TQ(){let e=N.useContext(vj);return Zk(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Qk=N.createContext(void 0);Qk.displayName="FrameworkContext";function x9(){let e=N.useContext(Qk);return Zk(e,"You must render this element inside a <HydratedRouter> element"),e}function RQ(e,t){let r=N.useContext(Qk),[a,s]=N.useState(!1),[i,o]=N.useState(!1),{onFocus:l,onBlur:d,onMouseEnter:u,onMouseLeave:f,onTouchStart:m}=t,p=N.useRef(null);N.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let v=j=>{j.forEach(_=>{o(_.isIntersecting)})},y=new IntersectionObserver(v,{threshold:.5});return p.current&&y.observe(p.current),()=>{y.disconnect()}}},[e]),N.useEffect(()=>{if(a){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[a]);let g=()=>{s(!0)},b=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,p,{}]:[i,p,{onFocus:Rx(l,g),onBlur:Rx(d,b),onMouseEnter:Rx(u,g),onMouseLeave:Rx(f,b),onTouchStart:Rx(m,g)}]:[!1,p,{}]}function Rx(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function PQ({page:e,...t}){let{router:r}=g9(),a=N.useMemo(()=>o9(r.routes,e,r.basename),[r.routes,e,r.basename]);return a?N.createElement(DQ,{page:e,matches:a,...t}):null}function MQ(e){let{manifest:t,routeModules:r}=x9(),[a,s]=N.useState([]);return N.useEffect(()=>{let i=!1;return _Q(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),a}function DQ({page:e,matches:t,...r}){let a=Tl(),{manifest:s,routeModules:i}=x9(),{basename:o}=g9(),{loaderData:l,matches:d}=TQ(),u=N.useMemo(()=>HR(e,t,d,s,a,"data"),[e,t,d,s,a]),f=N.useMemo(()=>HR(e,t,d,s,a,"assets"),[e,t,d,s,a]),m=N.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let b=new Set,v=!1;if(t.forEach(j=>{var C;let _=s.routes[j.route.id];!_||!_.hasLoader||(!u.some(A=>A.route.id===j.route.id)&&j.route.id in l&&((C=i[j.route.id])!=null&&C.shouldRevalidate)||_.hasClientLoader?v=!0:b.add(j.route.id))}),b.size===0)return[];let y=NQ(e,o,"data");return v&&b.size>0&&y.searchParams.set("_routes",t.filter(j=>b.has(j.route.id)).map(j=>j.route.id).join(",")),[y.pathname+y.search]},[o,l,a,s,u,t,e,i]),p=N.useMemo(()=>AQ(f,s),[f,s]),g=MQ(f);return N.createElement(N.Fragment,null,m.map(b=>N.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),p.map(b=>N.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),g.map(({key:b,link:v})=>N.createElement("link",{key:b,nonce:r.nonce,...v})))}function LQ(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var v9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{v9&&(window.__reactRouterVersion="7.10.0")}catch{}function IQ({basename:e,children:t,unstable_useTransitions:r,window:a}){let s=N.useRef();s.current==null&&(s.current=jZ({window:a,v5Compat:!0}));let i=s.current,[o,l]=N.useState({action:i.action,location:i.location}),d=N.useCallback(u=>{r===!1?l(u):N.startTransition(()=>l(u))},[r]);return N.useLayoutEffect(()=>i.listen(d),[i,d]),N.createElement(fQ,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:r===!0})}var y9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qr=N.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:s,reloadDocument:i,replace:o,state:l,target:d,to:u,preventScrollReset:f,viewTransition:m,...p},g){let{basename:b,unstable_useTransitions:v}=N.useContext(El),y=typeof u=="string"&&y9.test(u),j,_=!1;if(typeof u=="string"&&y&&(j=u,v9))try{let I=new URL(window.location.href),D=u.startsWith("//")?new URL(I.protocol+u):new URL(u),$=au(D.pathname,b);D.origin===I.origin&&$!=null?u=$+D.search+D.hash:_=!0}catch{qo(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=XZ(u,{relative:s}),[A,S,T]=RQ(a,p),O=zQ(u,{replace:o,state:l,target:d,preventScrollReset:f,relative:s,viewTransition:m,unstable_useTransitions:v});function R(I){t&&t(I),I.defaultPrevented||O(I)}let M=N.createElement("a",{...p,...T,href:j||C,onClick:_||i?t:R,ref:LQ(g,S),target:d,"data-discover":!y&&r==="render"?"true":void 0});return A&&!y?N.createElement(N.Fragment,null,M,N.createElement(PQ,{page:C})):M});qr.displayName="Link";var $Q=N.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:s=!1,style:i,to:o,viewTransition:l,children:d,...u},f){let m=yy(o,{relative:u.relative}),p=Tl(),g=N.useContext(vj),{navigator:b,basename:v}=N.useContext(El),y=g!=null&&GQ(m)&&l===!0,j=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,_=p.pathname,C=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(_=_.toLowerCase(),C=C?C.toLowerCase():null,j=j.toLowerCase()),C&&v&&(C=au(C,v)||C);const A=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let S=_===j||!s&&_.startsWith(j)&&_.charAt(A)==="/",T=C!=null&&(C===j||!s&&C.startsWith(j)&&C.charAt(j.length)==="/"),O={isActive:S,isPending:T,isTransitioning:y},R=S?t:void 0,M;typeof a=="function"?M=a(O):M=[a,S?"active":null,T?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(O):i;return N.createElement(qr,{...u,"aria-current":R,className:M,ref:f,style:I,to:o,viewTransition:l},typeof d=="function"?d(O):d)});$Q.displayName="NavLink";var FQ=N.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:s,state:i,method:o=kb,action:l,onSubmit:d,relative:u,preventScrollReset:f,viewTransition:m,...p},g)=>{let{unstable_useTransitions:b}=N.useContext(El),v=VQ(),y=HQ(l,{relative:u}),j=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&y9.test(l),C=A=>{if(d&&d(A),A.defaultPrevented)return;A.preventDefault();let S=A.nativeEvent.submitter,T=(S==null?void 0:S.getAttribute("formmethod"))||o,O=()=>v(S||A.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:s,state:i,relative:u,preventScrollReset:f,viewTransition:m});b&&r!==!1?N.startTransition(()=>O()):O()};return N.createElement("form",{ref:g,method:j,action:y,onSubmit:a?d:C,...p,"data-discover":!_&&e==="render"?"true":void 0})});FQ.displayName="Form";function BQ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function b9(e){let t=N.useContext(wg);return Na(t,BQ(e)),t}function zQ(e,{target:t,replace:r,state:a,preventScrollReset:s,relative:i,viewTransition:o,unstable_useTransitions:l}={}){let d=Sg(),u=Tl(),f=yy(e,{relative:i});return N.useCallback(m=>{if(vQ(m,t)){m.preventDefault();let p=r!==void 0?r:xv(u)===xv(f),g=()=>d(e,{replace:p,state:a,preventScrollReset:s,relative:i,viewTransition:o});l?N.startTransition(()=>g()):g()}},[u,d,f,r,a,t,e,s,i,o,l])}function j9(e){qo(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=N.useRef(bA(e)),r=N.useRef(!1),a=Tl(),s=N.useMemo(()=>yQ(a.search,r.current?null:t.current),[a.search]),i=Sg(),o=N.useCallback((l,d)=>{const u=bA(typeof l=="function"?l(new URLSearchParams(s)):l);r.current=!0,i("?"+u,d)},[i,s]);return[s,o]}var qQ=0,UQ=()=>`__${String(++qQ)}__`;function VQ(){let{router:e}=b9("useSubmit"),{basename:t}=N.useContext(El),r=oQ(),a=e.fetch,s=e.navigate;return N.useCallback(async(i,o={})=>{let{action:l,method:d,encType:u,formData:f,body:m}=wQ(i,t);if(o.navigate===!1){let p=o.fetcherKey||UQ();await a(p,r,o.action||l,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||d,formEncType:o.encType||u,flushSync:o.flushSync})}else await s(o.action||l,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||d,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[a,s,t,r])}function HQ(e,{relative:t}={}){let{basename:r}=N.useContext(El),a=N.useContext(dd);Na(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),i={...yy(e||".",{relative:t})},o=Tl();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),d=l.getAll("index");if(d.some(f=>f==="")){l.delete("index"),d.filter(m=>m).forEach(m=>l.append("index",m));let f=l.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Qd([r,i.pathname])),xv(i)}function GQ(e,{relative:t}={}){let r=N.useContext(u9);Na(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=b9("useViewTransitionState"),s=yy(e,{relative:t});if(!r.isTransitioning)return!1;let i=au(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=au(r.nextLocation.pathname,a)||r.nextLocation.pathname;return Hb(s.pathname,o)!=null||Hb(s.pathname,i)!=null}const w9=N.createContext(void 0),GR="retina:tenant",WR={tenantId:"t-demo",tenantName:"Demo Co"};function WQ({children:e}){const[t,r]=N.useState(()=>{if(typeof window<"u"){const s=localStorage.getItem(GR);if(s)try{return JSON.parse(s)}catch{return WR}}return WR}),a=s=>{r(s),typeof window<"u"&&localStorage.setItem(GR,JSON.stringify(s))};return n.jsx(w9.Provider,{value:{tenant:t,setTenant:a},children:e})}function Fr(){const e=N.useContext(w9);if(e===void 0)throw new Error("useTenant must be used within a TenantProvider");return e}const by={level:"basic",name:"Basic",description:"Friendly, accessible interface for SMB quick decisions (HIG + Material inspired)",color:{primary:"hsl(210, 100%, 50%)",primaryHover:"hsl(210, 100%, 45%)",primaryActive:"hsl(210, 100%, 40%)",secondary:"hsl(210, 20%, 90%)",secondaryHover:"hsl(210, 20%, 85%)",background:"hsl(0, 0%, 100%)",backgroundElevated:"hsl(0, 0%, 98%)",foreground:"hsl(210, 10%, 20%)",foregroundMuted:"hsl(210, 10%, 50%)",border:"hsl(210, 20%, 85%)",borderSubtle:"hsl(210, 20%, 92%)",success:"hsl(140, 60%, 50%)",warning:"hsl(40, 95%, 55%)",error:"hsl(0, 80%, 60%)",info:"hsl(200, 90%, 55%)",chart:{primary:"hsl(210, 70%, 65%)",secondary:"hsl(140, 55%, 60%)",tertiary:"hsl(280, 60%, 65%)",quaternary:"hsl(30, 75%, 65%)",quinary:"hsl(340, 65%, 65%)"}},typography:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem"},fontWeight:{normal:400,medium:500,semibold:600,bold:700},lineHeight:{tight:1.25,normal:1.5,relaxed:1.75},letterSpacing:{tight:"-0.01em",normal:"0",wide:"0.02em"}},spacing:{xs:"0.5rem",sm:"0.75rem",md:"1rem",lg:"1.5rem",xl:"2rem","2xl":"3rem","3xl":"4rem"},radius:{sm:"0.5rem",md:"0.75rem",lg:"1rem",xl:"1.25rem",full:"9999px"},elevation:{none:"none",sm:"0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.06)",md:"0 4px 6px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.05)",lg:"0 10px 15px rgba(0, 0, 0, 0.08), 0 4px 6px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px rgba(0, 0, 0, 0.1), 0 10px 10px rgba(0, 0, 0, 0.04)"},motion:{fast:"150ms",normal:"250ms",slow:"350ms",easing:{default:"cubic-bezier(0.4, 0, 0.2, 1)",in:"cubic-bezier(0.4, 0, 1, 1)",out:"cubic-bezier(0, 0, 0.2, 1)",inOut:"cubic-bezier(0.4, 0, 0.2, 1)"}}},KQ={level:"intermediate",name:"Intermediate",description:"Professional, data-driven interface for advisors (Fluent + Carbon inspired)",color:{primary:"hsl(210, 100%, 45%)",primaryHover:"hsl(210, 100%, 40%)",primaryActive:"hsl(210, 100%, 35%)",secondary:"hsl(210, 15%, 88%)",secondaryHover:"hsl(210, 15%, 83%)",background:"hsl(0, 0%, 100%)",backgroundElevated:"hsl(0, 0%, 97%)",foreground:"hsl(210, 12%, 16%)",foregroundMuted:"hsl(210, 10%, 45%)",border:"hsl(210, 15%, 82%)",borderSubtle:"hsl(210, 15%, 90%)",success:"hsl(140, 55%, 45%)",warning:"hsl(40, 90%, 50%)",error:"hsl(0, 75%, 55%)",info:"hsl(200, 85%, 50%)",chart:{primary:"hsl(210, 80%, 50%)",secondary:"hsl(180, 60%, 45%)",tertiary:"hsl(270, 55%, 55%)",quaternary:"hsl(30, 70%, 55%)",quinary:"hsl(330, 60%, 55%)"}},typography:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",fontSize:{xs:"0.6875rem",sm:"0.8125rem",base:"0.9375rem",lg:"1.0625rem",xl:"1.1875rem","2xl":"1.375rem","3xl":"1.75rem"},fontWeight:{normal:400,medium:500,semibold:600,bold:700},lineHeight:{tight:1.2,normal:1.4,relaxed:1.6},letterSpacing:{tight:"-0.015em",normal:"0",wide:"0.015em"}},spacing:{xs:"0.375rem",sm:"0.5rem",md:"0.75rem",lg:"1rem",xl:"1.5rem","2xl":"2rem","3xl":"3rem"},radius:{sm:"0.25rem",md:"0.5rem",lg:"0.625rem",xl:"0.75rem",full:"9999px"},elevation:{none:"none",sm:"0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 1px rgba(0, 0, 0, 0.06)",md:"0 2px 4px rgba(0, 0, 0, 0.1), 0 2px 3px rgba(0, 0, 0, 0.06)",lg:"0 6px 10px rgba(0, 0, 0, 0.12), 0 3px 5px rgba(0, 0, 0, 0.08)",xl:"0 12px 20px rgba(0, 0, 0, 0.15), 0 6px 8px rgba(0, 0, 0, 0.1)"},motion:{fast:"120ms",normal:"200ms",slow:"300ms",easing:{default:"cubic-bezier(0.4, 0, 0.2, 1)",in:"cubic-bezier(0.4, 0, 1, 1)",out:"cubic-bezier(0, 0, 0.2, 1)",inOut:"cubic-bezier(0.4, 0, 0.2, 1)"}}},zr={level:"advanced",name:"Advanced",description:"Dense, analytical interface for expert reporting (Clarity + Spectrum + Ant + Atlassian inspired)",color:{primary:"hsl(210, 100%, 42%)",primaryHover:"hsl(210, 100%, 37%)",primaryActive:"hsl(210, 100%, 32%)",secondary:"hsl(210, 12%, 86%)",secondaryHover:"hsl(210, 12%, 81%)",background:"hsl(0, 0%, 100%)",backgroundElevated:"hsl(0, 0%, 98%)",foreground:"hsl(210, 15%, 12%)",foregroundMuted:"hsl(210, 10%, 40%)",border:"hsl(210, 12%, 80%)",borderSubtle:"hsl(210, 12%, 88%)",success:"hsl(140, 50%, 42%)",warning:"hsl(40, 85%, 48%)",error:"hsl(0, 70%, 52%)",info:"hsl(200, 80%, 48%)",chart:{primary:"hsl(210, 90%, 45%)",secondary:"hsl(170, 65%, 40%)",tertiary:"hsl(260, 60%, 50%)",quaternary:"hsl(25, 75%, 50%)",quinary:"hsl(320, 65%, 50%)"}},typography:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",fontSize:{xs:"0.625rem",sm:"0.75rem",base:"0.875rem",lg:"1rem",xl:"1.125rem","2xl":"1.25rem","3xl":"1.625rem"},fontWeight:{normal:400,medium:500,semibold:600,bold:700},lineHeight:{tight:1.15,normal:1.35,relaxed:1.5},letterSpacing:{tight:"-0.02em",normal:"0",wide:"0.01em"}},spacing:{xs:"0.25rem",sm:"0.375rem",md:"0.5rem",lg:"0.75rem",xl:"1rem","2xl":"1.5rem","3xl":"2rem"},radius:{sm:"0.125rem",md:"0.25rem",lg:"0.375rem",xl:"0.5rem",full:"9999px"},elevation:{none:"none",sm:"0 1px 2px rgba(0, 0, 0, 0.12), 0 0 1px rgba(0, 0, 0, 0.08)",md:"0 2px 4px rgba(0, 0, 0, 0.14), 0 1px 2px rgba(0, 0, 0, 0.1)",lg:"0 4px 8px rgba(0, 0, 0, 0.16), 0 2px 4px rgba(0, 0, 0, 0.12)",xl:"0 8px 16px rgba(0, 0, 0, 0.18), 0 4px 6px rgba(0, 0, 0, 0.14)"},motion:{fast:"100ms",normal:"180ms",slow:"250ms",easing:{default:"cubic-bezier(0.4, 0, 0.2, 1)",in:"cubic-bezier(0.4, 0, 1, 1)",out:"cubic-bezier(0, 0, 0.2, 1)",inOut:"cubic-bezier(0.4, 0, 0.2, 1)"}}},YQ={basic:by,intermediate:KQ,advanced:zr};function N9(e){return YQ[e]}const S9={"goals-kpis":"basic","options-tradeoffs":"basic","risk-mapping":"intermediate","scenario-modeling":"intermediate","game-bayesian":"advanced","copula-dependence":"advanced",portfolio:"advanced","close-report":"intermediate"},K0={"/retina/goals":"goals-kpis","/retina/goals/new":"goals-kpis","/retina/goals/map":"goals-kpis","/retina/goals/matrix":"goals-kpis","/retina/stakeholders":"goals-kpis","/retina/modules/i-decide":"options-tradeoffs","/retina/portfolios":"portfolio","/retina":"options-tradeoffs","/retina/dashboard":"options-tradeoffs","/retina/modules":"options-tradeoffs"},XQ={"goal-selector":"goals-kpis","goal-wizard":"goals-kpis","kpi-dashboard":"goals-kpis","options-section":"options-tradeoffs","option-financials":"options-tradeoffs","option-partners":"options-tradeoffs","option-summary":"options-tradeoffs","templates-drawer":"options-tradeoffs","risk-assessment":"risk-mapping","assumptions-panel":"risk-mapping","guardrails-drawer":"risk-mapping","sensitivity-tornado":"risk-mapping","scenario-builder":"scenario-modeling","scenario-templates":"scenario-modeling","simulation-results":"scenario-modeling","metrics-section":"scenario-modeling","stress-test-panel":"scenario-modeling","game-interaction":"game-bayesian","bayesian-prior":"game-bayesian","utility-management":"game-bayesian","copula-matrix":"copula-dependence","dependence-panel":"copula-dependence","portfolio-manager":"portfolio","portfolio-optimizer":"portfolio","portfolio-brief":"portfolio","decision-close":"close-report","board-summary":"close-report","outcome-logger":"close-report","feedback-loop":"close-report"};function C9(e){try{const t=`retina_layer_overrides_${e}`,r=localStorage.getItem(t);if(r)return JSON.parse(r).overrides||{}}catch(t){console.error("Failed to load tenant layer overrides:",t)}return{}}function JQ(e,t){let r;if(K0[e])r=K0[e];else{const a=Object.keys(K0).filter(s=>e.startsWith(s)).sort((s,i)=>i.length-s.length);a.length>0&&(r=K0[a[0]])}if(!r)return"basic";if(t){const a=C9(t);if(a[r])return a[r]}return S9[r]}function ZQ(e,t){const r=XQ[e];if(!r)return"basic";if(t){const a=C9(t);if(a[r])return a[r]}return S9[r]}function QQ(e,t){return e.startsWith("/")?JQ(e,t):ZQ(e,t)}const _9=N.createContext(void 0);function eee(){if(typeof window>"u")return null;try{const e=localStorage.getItem("retina:interfaceLevel");if(e==="basic"||e==="intermediate"||e==="advanced")return e}catch(e){console.warn("Failed to read interface level from localStorage:",e)}return null}function KR(e){if(!(typeof window>"u"))try{localStorage.setItem("retina:interfaceLevel",e)}catch(t){console.warn("Failed to save interface level to localStorage:",t)}}function tee(e){if(!e||typeof window>"u")return null;try{const t=`retina:tenant:${e}:interfaceLevel`,r=localStorage.getItem(t);if(r==="basic"||r==="intermediate"||r==="advanced")return r}catch(t){console.warn("Failed to read tenant interface level:",t)}return null}function mN(e){const t=N9(e);if(typeof window>"u"||!document.documentElement){console.warn("applyTheme called in non-browser environment");return}const r=document.documentElement;r.style.setProperty("--theme-primary",t.color.primary),r.style.setProperty("--theme-primary-hover",t.color.primaryHover),r.style.setProperty("--theme-primary-active",t.color.primaryActive),r.style.setProperty("--theme-secondary",t.color.secondary),r.style.setProperty("--theme-secondary-hover",t.color.secondaryHover),r.style.setProperty("--theme-background",t.color.background),r.style.setProperty("--theme-background-elevated",t.color.backgroundElevated),r.style.setProperty("--theme-foreground",t.color.foreground),r.style.setProperty("--theme-foreground-muted",t.color.foregroundMuted),r.style.setProperty("--theme-border",t.color.border),r.style.setProperty("--theme-border-subtle",t.color.borderSubtle),r.style.setProperty("--theme-success",t.color.success),r.style.setProperty("--theme-warning",t.color.warning),r.style.setProperty("--theme-error",t.color.error),r.style.setProperty("--theme-info",t.color.info),r.style.setProperty("--theme-chart-1",t.color.chart.primary),r.style.setProperty("--theme-chart-2",t.color.chart.secondary),r.style.setProperty("--theme-chart-3",t.color.chart.tertiary),r.style.setProperty("--theme-chart-4",t.color.chart.quaternary),r.style.setProperty("--theme-chart-5",t.color.chart.quinary),r.style.setProperty("--theme-font-family",t.typography.fontFamily),r.style.setProperty("--theme-font-size-xs",t.typography.fontSize.xs),r.style.setProperty("--theme-font-size-sm",t.typography.fontSize.sm),r.style.setProperty("--theme-font-size-base",t.typography.fontSize.base),r.style.setProperty("--theme-font-size-lg",t.typography.fontSize.lg),r.style.setProperty("--theme-font-size-xl",t.typography.fontSize.xl),r.style.setProperty("--theme-font-size-2xl",t.typography.fontSize["2xl"]),r.style.setProperty("--theme-font-size-3xl",t.typography.fontSize["3xl"]),r.style.setProperty("--theme-font-weight-normal",String(t.typography.fontWeight.normal)),r.style.setProperty("--theme-font-weight-medium",String(t.typography.fontWeight.medium)),r.style.setProperty("--theme-font-weight-semibold",String(t.typography.fontWeight.semibold)),r.style.setProperty("--theme-font-weight-bold",String(t.typography.fontWeight.bold)),r.style.setProperty("--theme-line-height-tight",String(t.typography.lineHeight.tight)),r.style.setProperty("--theme-line-height-normal",String(t.typography.lineHeight.normal)),r.style.setProperty("--theme-line-height-relaxed",String(t.typography.lineHeight.relaxed)),r.style.setProperty("--theme-letter-spacing-tight",t.typography.letterSpacing.tight),r.style.setProperty("--theme-letter-spacing-normal",t.typography.letterSpacing.normal),r.style.setProperty("--theme-letter-spacing-wide",t.typography.letterSpacing.wide),r.style.setProperty("--theme-spacing-xs",t.spacing.xs),r.style.setProperty("--theme-spacing-sm",t.spacing.sm),r.style.setProperty("--theme-spacing-md",t.spacing.md),r.style.setProperty("--theme-spacing-lg",t.spacing.lg),r.style.setProperty("--theme-spacing-xl",t.spacing.xl),r.style.setProperty("--theme-spacing-2xl",t.spacing["2xl"]),r.style.setProperty("--theme-spacing-3xl",t.spacing["3xl"]),r.style.setProperty("--theme-radius-sm",t.radius.sm),r.style.setProperty("--theme-radius-md",t.radius.md),r.style.setProperty("--theme-radius-lg",t.radius.lg),r.style.setProperty("--theme-radius-xl",t.radius.xl),r.style.setProperty("--theme-radius-full",t.radius.full),r.style.setProperty("--theme-elevation-none",t.elevation.none),r.style.setProperty("--theme-elevation-sm",t.elevation.sm),r.style.setProperty("--theme-elevation-md",t.elevation.md),r.style.setProperty("--theme-elevation-lg",t.elevation.lg),r.style.setProperty("--theme-elevation-xl",t.elevation.xl),r.style.setProperty("--theme-motion-fast",t.motion.fast),r.style.setProperty("--theme-motion-normal",t.motion.normal),r.style.setProperty("--theme-motion-slow",t.motion.slow),r.style.setProperty("--theme-motion-easing-default",t.motion.easing.default),r.style.setProperty("--theme-motion-easing-in",t.motion.easing.in),r.style.setProperty("--theme-motion-easing-out",t.motion.easing.out),r.style.setProperty("--theme-motion-easing-in-out",t.motion.easing.inOut),r.setAttribute("data-interface-level",e),console.log(` Theme applied: ${e}`,{tokens:t.name,description:t.description,spacing:t.spacing.md,radius:t.radius.md,fontSize:t.typography.fontSize.base})}function ree(){if(typeof window>"u"||!document.documentElement)return;const e=document.documentElement;Array.from(e.style).filter(r=>r.startsWith("--theme-")).forEach(r=>{e.style.removeProperty(r)}),e.removeAttribute("data-interface-level")}function A9({children:e,defaultLevel:t="basic",pageOverride:r,decisionMode:a,enableRouteThemes:s=!0}){const{tenantId:i}=Fr(),o=Tl(),l=N.useCallback(()=>{if(r)return{level:r,source:"page-override"};if(a)return{level:a,source:"decision-mode"};if(s&&(o!=null&&o.pathname))return{level:QQ(o.pathname,i),source:"route-layer"};const v=eee();if(v)return{level:v,source:"user-profile"};const y=tee(i);return y?{level:y,source:"tenant-default"}:{level:t,source:"system-default"}},[r,a,s,o==null?void 0:o.pathname,i,t]),[d,u]=N.useState(l);N.useEffect(()=>(mN(d.level),()=>{ree()}),[d.level]),N.useEffect(()=>{const v=l();(v.level!==d.level||v.source!==d.source)&&(u(v),console.log(` Theme auto-switched: ${v.level} (source: ${v.source}, route: ${o==null?void 0:o.pathname})`))},[r,a,i,o==null?void 0:o.pathname,s,l,d.level,d.source]);const f=N.useMemo(()=>N9(d.level),[d.level]),m=N.useCallback((v,y="user-profile")=>{u({level:v,source:y}),y==="user-profile"&&KR(v),console.log(` Interface level changed: ${v} (source: ${y})`)},[]),p=N.useCallback(v=>{mN(v),u({level:v,source:"user-profile"}),KR(v)},[]),g=N.useCallback(()=>{const v=l();u(v),mN(v.level),console.log(` Theme reset to: ${v.level} (source: ${v.source})`)},[l]),b=N.useMemo(()=>({interfaceLevel:d.level,tokens:f,source:d.source,setInterfaceLevel:m,applyTheme:p,resetTheme:g}),[d.level,d.source,f,m,p,g]);return n.jsx(_9.Provider,{value:b,children:e})}function bj(){const e=N.useContext(_9);return e||(console.warn("useInterfaceLevel called outside ThemeProvider, returning basic theme"),{interfaceLevel:"basic",tokens:by,source:"system-default",setInterfaceLevel:()=>{console.warn("setInterfaceLevel called outside ThemeProvider")},applyTheme:()=>{console.warn("applyTheme called outside ThemeProvider")},resetTheme:()=>{console.warn("resetTheme called outside ThemeProvider")}})}/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nee=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),k9=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aee={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const see=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:o,...l},d)=>N.createElement("svg",{ref:d,...aee,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:k9("lucide",s),...l},[...o.map(([u,f])=>N.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=(e,t)=>{const r=N.forwardRef(({className:a,...s},i)=>N.createElement(see,{ref:i,iconNode:t,className:k9(`lucide-${nee(e)}`,a),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iee=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],vl=it("Activity",iee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oee=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Oh=it("ArrowDown",oee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lee=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],O9=it("ArrowLeft",lee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cee=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Eh=it("ArrowRight",cee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dee=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],uee=it("ArrowUpDown",dee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fee=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Th=it("ArrowUp",fee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hee=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],mee=it("Award",hee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pee=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],vv=it("Bell",pee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gee=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],E9=it("BookOpen",gee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xee=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],vee=it("BrainCircuit",xee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yee=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],jA=it("Brain",yee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bee=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],pN=it("Briefcase",bee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jee=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],yv=it("Building",jee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wee=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Nee=it("Calculator",wee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const See=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Rh=it("Calendar",See);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cee=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Rp=it("ChartColumn",Cee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ee=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Aee=it("CheckCheck",_ee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kee=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],su=it("Check",kee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oee=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],df=it("ChevronDown",Oee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eee=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],T9=it("ChevronLeft",Eee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tee=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ti=it("ChevronRight",Tee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ree=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],e3=it("ChevronUp",Ree);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pee=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],Mee=it("ChevronsLeft",Pee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dee=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],Lee=it("ChevronsRight",Dee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],yn=it("CircleAlert",Iee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ee=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ri=it("CircleCheckBig",$ee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ba=it("CircleCheck",Fee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],R9=it("CircleHelp",Bee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],vp=it("CircleX",zee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],P9=it("Circle",qee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],vc=it("Clock",Uee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vee=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Hee=it("Cloud",Vee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gee=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Wee=it("Code",Gee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kee=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],Yee=it("Columns2",Kee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xee=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Jee=it("Columns3",Xee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zee=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],bv=it("Copy",Zee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qee=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],t3=it("Database",Qee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ete=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],tte=it("DollarSign",ete);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rte=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],qn=it("Download",rte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nte=[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]],ate=it("Dumbbell",nte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ste=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ph=it("ExternalLink",ste);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ite=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ote=it("EyeOff",ite);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lte=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mh=it("Eye",lte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cte=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],YR=it("FileJson",cte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dte=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],cs=it("FileText",dte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ute=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],fte=it("File",ute);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hte=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],Cg=it("Filter",hte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mte=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],pte=it("FlaskConical",mte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gte=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],XR=it("FolderOpen",gte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xte=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Pp=it("Folder",xte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vte=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],gN=it("GitCompare",vte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yte=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],JR=it("Globe",yte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bte=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],jte=it("Grid3x3",bte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wte=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],r3=it("GripVertical",wte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nte=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]],ZR=it("HeartPulse",Nte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ste=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Gb=it("History",Ste);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cte=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],_te=it("House",Cte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ate=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],kte=it("Image",Ate);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ote=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Or=it("Info",Ote);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ete=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],QR=it("Keyboard",Ete);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tte=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Rte=it("Languages",Tte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pte=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Mte=it("LayoutDashboard",Pte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dte=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],M9=it("LayoutGrid",Dte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lte=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],Ite=it("LayoutTemplate",Lte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $te=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Fte=it("Lightbulb",$te);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bte=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],n3=it("Link",Bte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zte=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vh=it("LoaderCircle",zte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],eP=it("LockOpen",qte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ute=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],tP=it("Lock",Ute);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vte=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Xh=it("Mail",Vte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],a3=it("Maximize",Hte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gte=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],Wte=it("Megaphone",Gte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kte=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],rP=it("MessageSquare",Kte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yte=[["path",{d:"M5 12h14",key:"1ays0h"}]],wl=it("Minus",Yte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xte=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],D9=it("Monitor",Xte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jte=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],nP=it("MousePointerClick",Jte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zte=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],jy=it("Network",Zte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qte=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ere=it("Package",Qte);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tre=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],Wb=it("Palette",tre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rre=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],wA=it("PanelsTopLeft",rre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nre=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],are=it("Pause",nre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sre=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],ire=it("Pin",sre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ore=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],s3=it("Play",ore);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lre=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pn=it("Plus",lre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cre=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$i=it("RefreshCw",cre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dre=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],L9=it("RotateCcw",dre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ure=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yp=it("Save",ure);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fre=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],hre=it("Scale",fre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mre=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],NA=it("Scan",mre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pre=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Rl=it("Search",pre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gre=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],xre=it("Send",gre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vre=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mp=it("Settings",vre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yre=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],bre=it("Share",yre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Fo=it("ShieldAlert",jre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wy=it("ShieldCheck",wre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nre=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],Sre=it("ShieldOff",Nre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Dp=it("Shield",Cre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _re=[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]],Are=it("SkipBack",_re);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kre=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],Ore=it("SkipForward",kre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ere=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],qi=it("Sparkles",Ere);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tre=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],jj=it("SquarePen",Tre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rre=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],I9=it("Store",Rre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pre=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],$9=it("Tag",Pre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],eu=it("Target",Mre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dre=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],mo=it("Trash",Dre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lre=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],fa=it("TrendingDown",Lre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ire=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],$r=it("TrendingUp",Ire);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $re=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],tn=it("TriangleAlert",$re);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fre=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],SA=it("Type",Fre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bre=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],jv=it("Upload",Bre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wv=it("User",zre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qre=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Uo=it("Users",qre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ure=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],Vre=it("Utensils",Ure);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hre=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],F9=it("Wind",Hre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gre=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Wre=it("Wrench",Gre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ui=it("X",Kre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yre=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Lp=it("Zap",Yre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xre=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],B9=it("ZoomIn",Xre);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jre=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],z9=it("ZoomOut",Jre),q9="retina:revaluation-tags",U9="retina:signal-history",Zre=.05,Qre=6e4;async function ene(e){await new Promise(r=>setTimeout(r,100));const t={};return e.forEach(r=>{const a=parseFloat(localStorage.getItem(`signal:${r}:base`)||"100"),s=(Math.random()-.5)*.2;t[r]=a*(1+s)}),t}function tne(){try{const e=localStorage.getItem(U9);return e?JSON.parse(e):{}}catch{return{}}}function rne(e){localStorage.setItem(U9,JSON.stringify(e))}function Ny(e){try{const t=localStorage.getItem(q9),r=t?JSON.parse(t):[];return e?r.filter(a=>a.tenant_id===e):r}catch{return[]}}function i3(e){localStorage.setItem(q9,JSON.stringify(e))}function nne(e,t){const r=Ny(),a=r.findIndex(i=>i.decision_id===e.id&&!i.acknowledged),s={decision_id:e.id,decision_title:e.title,tenant_id:e.tenantId,reason:"signal_update",triggered_by:t,tagged_at:Date.now(),acknowledged:!1};return a>=0?r[a]={...r[a],triggered_by:[...r[a].triggered_by,...t],tagged_at:Date.now()}:r.push(s),i3(r),s}function ane(e){const r=Ny().map(a=>a.decision_id===e?{...a,acknowledged:!0}:a);i3(r)}function sne(){const e=Ny(),t=Date.now()-10080*60*1e3,r=e.filter(a=>!a.acknowledged||a.tagged_at>t);i3(r)}function ine(e,t){const r=`retina:signal-updates:${e}`;try{const a=localStorage.getItem(r),s=a?JSON.parse(a):[];s.push(t);const i=s.slice(-100);localStorage.setItem(r,JSON.stringify(i))}catch(a){console.error("Failed to record signal update:",a)}}async function one(e){if(!e.linked_signals||e.linked_signals.length===0)return[];const t=e.linked_signals.map(i=>i.signal_id),r=await ene(t),a=tne(),s=[];return e.linked_signals.forEach(i=>{const o=a[i.signal_id]||i.last_value,l=r[i.signal_id];if(o!==void 0&&l!==void 0){const d=Math.abs((l-o)/o);if(d>=Zre){const u={signal_id:i.signal_id,signal_label:i.signal_label||i.signal_id,old_value:o,new_value:l,change_percent:d,timestamp:Date.now()};s.push(u),ine(e.tenantId,u),a[i.signal_id]=l}}else l!==void 0&&(a[i.signal_id]=l)}),rne(a),s}async function lne(e){const t=[];for(const r of e)if(r.linked_signals&&r.linked_signals.length>0&&r.status!=="closed"){const a=await one(r);if(a.length>0){const s=nne(r,a);t.push(s)}}return t}function cne(e,t){let r=!0;const a=async()=>{if(r){try{const s=e();(await lne(s)).forEach(o=>{t&&t(o)}),sne()}catch(s){console.error("Signal monitoring error:",s)}r&&setTimeout(a,Qre)}};return a(),()=>{r=!1}}function V9(e){return Ny(e).filter(r=>!r.acknowledged).length}function dne(){[{id:"sig-cost-index",base:285.2},{id:"sig-demand-score",base:72.5},{id:"sig-market-volatility",base:18.3},{id:"sig-competitor-price",base:149.99},{id:"sig-supply-chain",base:91.2},{id:"sig-customer-sentiment",base:8.1}].forEach(t=>{localStorage.setItem(`signal:${t.id}:base`,t.base.toString())})}function H9(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=H9(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function Pr(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=H9(e))&&(a&&(a+=" "),a+=t);return a}const une=(e,t)=>{const r=new Array(e.length+t.length);for(let a=0;a<e.length;a++)r[a]=e[a];for(let a=0;a<t.length;a++)r[e.length+a]=t[a];return r},fne=(e,t)=>({classGroupId:e,validator:t}),G9=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),Kb="-",aP=[],hne="arbitrary..",mne=e=>{const t=gne(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return pne(o);const l=o.split(Kb),d=l[0]===""&&l.length>1?1:0;return W9(l,d,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const d=a[o],u=r[o];return d?u?une(u,d):d:u||aP}return r[o]||aP}}},W9=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const s=e[t],i=r.nextPart.get(s);if(i){const u=W9(e,t+1,i);if(u)return u}const o=r.validators;if(o===null)return;const l=t===0?e.join(Kb):e.slice(t).join(Kb),d=o.length;for(let u=0;u<d;u++){const f=o[u];if(f.validator(l))return f.classGroupId}},pne=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),a=t.slice(0,r);return a?hne+a:void 0})(),gne=e=>{const{theme:t,classGroups:r}=e;return xne(r,t)},xne=(e,t)=>{const r=G9();for(const a in e){const s=e[a];o3(s,r,a,t)}return r},o3=(e,t,r,a)=>{const s=e.length;for(let i=0;i<s;i++){const o=e[i];vne(o,t,r,a)}},vne=(e,t,r,a)=>{if(typeof e=="string"){yne(e,t,r);return}if(typeof e=="function"){bne(e,t,r,a);return}jne(e,t,r,a)},yne=(e,t,r)=>{const a=e===""?t:K9(t,e);a.classGroupId=r},bne=(e,t,r,a)=>{if(wne(e)){o3(e(a),t,r,a);return}t.validators===null&&(t.validators=[]),t.validators.push(fne(r,e))},jne=(e,t,r,a)=>{const s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[l,d]=s[o];o3(d,K9(t,l),r,a)}},K9=(e,t)=>{let r=e;const a=t.split(Kb),s=a.length;for(let i=0;i<s;i++){const o=a[i];let l=r.nextPart.get(o);l||(l=G9(),r.nextPart.set(o,l)),r=l}return r},wne=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Nne=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),a=Object.create(null);const s=(i,o)=>{r[i]=o,t++,t>e&&(t=0,a=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=a[i])!==void 0)return s(i,o),o},set(i,o){i in r?r[i]=o:s(i,o)}}},CA="!",sP=":",Sne=[],iP=(e,t,r,a,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:a,isExternal:s}),Cne=e=>{const{prefix:t,experimentalParseClassName:r}=e;let a=s=>{const i=[];let o=0,l=0,d=0,u;const f=s.length;for(let v=0;v<f;v++){const y=s[v];if(o===0&&l===0){if(y===sP){i.push(s.slice(d,v)),d=v+1;continue}if(y==="/"){u=v;continue}}y==="["?o++:y==="]"?o--:y==="("?l++:y===")"&&l--}const m=i.length===0?s:s.slice(d);let p=m,g=!1;m.endsWith(CA)?(p=m.slice(0,-1),g=!0):m.startsWith(CA)&&(p=m.slice(1),g=!0);const b=u&&u>d?u-d:void 0;return iP(i,g,p,b)};if(t){const s=t+sP,i=a;a=o=>o.startsWith(s)?i(o.slice(s.length)):iP(Sne,!1,o,void 0,!0)}if(r){const s=a;a=i=>r({className:i,parseClassName:s})}return a},_ne=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,a)=>{t.set(r,1e6+a)}),r=>{const a=[];let s=[];for(let i=0;i<r.length;i++){const o=r[i],l=o[0]==="[",d=t.has(o);l||d?(s.length>0&&(s.sort(),a.push(...s),s=[]),a.push(o)):s.push(o)}return s.length>0&&(s.sort(),a.push(...s)),a}},Ane=e=>({cache:Nne(e.cacheSize),parseClassName:Cne(e),sortModifiers:_ne(e),...mne(e)}),kne=/\s+/,One=(e,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],l=e.trim().split(kne);let d="";for(let u=l.length-1;u>=0;u-=1){const f=l[u],{isExternal:m,modifiers:p,hasImportantModifier:g,baseClassName:b,maybePostfixModifierPosition:v}=r(f);if(m){d=f+(d.length>0?" "+d:d);continue}let y=!!v,j=a(y?b.substring(0,v):b);if(!j){if(!y){d=f+(d.length>0?" "+d:d);continue}if(j=a(b),!j){d=f+(d.length>0?" "+d:d);continue}y=!1}const _=p.length===0?"":p.length===1?p[0]:i(p).join(":"),C=g?_+CA:_,A=C+j;if(o.indexOf(A)>-1)continue;o.push(A);const S=s(j,y);for(let T=0;T<S.length;++T){const O=S[T];o.push(C+O)}d=f+(d.length>0?" "+d:d)}return d},Ene=(...e)=>{let t=0,r,a,s="";for(;t<e.length;)(r=e[t++])&&(a=Y9(r))&&(s&&(s+=" "),s+=a);return s},Y9=e=>{if(typeof e=="string")return e;let t,r="";for(let a=0;a<e.length;a++)e[a]&&(t=Y9(e[a]))&&(r&&(r+=" "),r+=t);return r},Tne=(e,...t)=>{let r,a,s,i;const o=d=>{const u=t.reduce((f,m)=>m(f),e());return r=Ane(u),a=r.cache.get,s=r.cache.set,i=l,l(d)},l=d=>{const u=a(d);if(u)return u;const f=One(d,r);return s(d,f),f};return i=o,(...d)=>i(Ene(...d))},Rne=[],js=e=>{const t=r=>r[e]||Rne;return t.isThemeGetter=!0,t},X9=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,J9=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Pne=/^\d+\/\d+$/,Mne=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Dne=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Lne=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ine=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$ne=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ym=e=>Pne.test(e),Kr=e=>!!e&&!Number.isNaN(Number(e)),rf=e=>!!e&&Number.isInteger(Number(e)),xN=e=>e.endsWith("%")&&Kr(e.slice(0,-1)),Ud=e=>Mne.test(e),Fne=()=>!0,Bne=e=>Dne.test(e)&&!Lne.test(e),Z9=()=>!1,zne=e=>Ine.test(e),qne=e=>$ne.test(e),Une=e=>!Kt(e)&&!Yt(e),Vne=e=>_g(e,tB,Z9),Kt=e=>X9.test(e),lh=e=>_g(e,rB,Bne),vN=e=>_g(e,Yne,Kr),oP=e=>_g(e,Q9,Z9),Hne=e=>_g(e,eB,qne),Y0=e=>_g(e,nB,zne),Yt=e=>J9.test(e),Px=e=>Ag(e,rB),Gne=e=>Ag(e,Xne),lP=e=>Ag(e,Q9),Wne=e=>Ag(e,tB),Kne=e=>Ag(e,eB),X0=e=>Ag(e,nB,!0),_g=(e,t,r)=>{const a=X9.exec(e);return a?a[1]?t(a[1]):r(a[2]):!1},Ag=(e,t,r=!1)=>{const a=J9.exec(e);return a?a[1]?t(a[1]):r:!1},Q9=e=>e==="position"||e==="percentage",eB=e=>e==="image"||e==="url",tB=e=>e==="length"||e==="size"||e==="bg-size",rB=e=>e==="length",Yne=e=>e==="number",Xne=e=>e==="family-name",nB=e=>e==="shadow",Jne=()=>{const e=js("color"),t=js("font"),r=js("text"),a=js("font-weight"),s=js("tracking"),i=js("leading"),o=js("breakpoint"),l=js("container"),d=js("spacing"),u=js("radius"),f=js("shadow"),m=js("inset-shadow"),p=js("text-shadow"),g=js("drop-shadow"),b=js("blur"),v=js("perspective"),y=js("aspect"),j=js("ease"),_=js("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...A(),Yt,Kt],T=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],R=()=>[Yt,Kt,d],M=()=>[Ym,"full","auto",...R()],I=()=>[rf,"none","subgrid",Yt,Kt],D=()=>["auto",{span:["full",rf,Yt,Kt]},rf,Yt,Kt],$=()=>[rf,"auto",Yt,Kt],K=()=>["auto","min","max","fr",Yt,Kt],U=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...R()],G=()=>[Ym,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],q=()=>[e,Yt,Kt],Y=()=>[...A(),lP,oP,{position:[Yt,Kt]}],Q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",Wne,Vne,{size:[Yt,Kt]}],z=()=>[xN,Px,lh],H=()=>["","none","full",u,Yt,Kt],X=()=>["",Kr,Px,lh],ne=()=>["solid","dashed","dotted","double"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>[Kr,xN,lP,oP],ge=()=>["","none",b,Yt,Kt],he=()=>["none",Kr,Yt,Kt],ue=()=>["none",Kr,Yt,Kt],Se=()=>[Kr,Yt,Kt],je=()=>[Ym,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ud],breakpoint:[Ud],color:[Fne],container:[Ud],"drop-shadow":[Ud],ease:["in","out","in-out"],font:[Une],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ud],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ud],shadow:[Ud],spacing:["px",Kr],text:[Ud],"text-shadow":[Ud],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ym,Kt,Yt,y]}],container:["container"],columns:[{columns:[Kr,Kt,Yt,l]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[rf,"auto",Yt,Kt]}],basis:[{basis:[Ym,"full","auto",l,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Kr,Ym,"auto","initial","none",Kt]}],grow:[{grow:["",Kr,Yt,Kt]}],shrink:[{shrink:["",Kr,Yt,Kt]}],order:[{order:[rf,"first","last","none",Yt,Kt]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...U(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...U()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":U()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[l,"screen",...G()]}],"min-w":[{"min-w":[l,"screen","none",...G()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...G()]}],h:[{h:["screen","lh",...G()]}],"min-h":[{"min-h":["screen","lh","none",...G()]}],"max-h":[{"max-h":["screen","lh",...G()]}],"font-size":[{text:["base",r,Px,lh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Yt,vN]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",xN,Kt]}],"font-family":[{font:[Gne,Kt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Yt,Kt]}],"line-clamp":[{"line-clamp":[Kr,"none",Yt,vN]}],leading:[{leading:[i,...R()]}],"list-image":[{"list-image":["none",Yt,Kt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Yt,Kt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[Kr,"from-font","auto",Yt,lh]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[Kr,"auto",Yt,Kt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Yt,Kt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Yt,Kt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:Q()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},rf,Yt,Kt],radial:["",Yt,Kt],conic:[rf,Yt,Kt]},Kne,Hne]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:z()}],"gradient-via-pos":[{via:z()}],"gradient-to-pos":[{to:z()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:H()}],"rounded-s":[{"rounded-s":H()}],"rounded-e":[{"rounded-e":H()}],"rounded-t":[{"rounded-t":H()}],"rounded-r":[{"rounded-r":H()}],"rounded-b":[{"rounded-b":H()}],"rounded-l":[{"rounded-l":H()}],"rounded-ss":[{"rounded-ss":H()}],"rounded-se":[{"rounded-se":H()}],"rounded-ee":[{"rounded-ee":H()}],"rounded-es":[{"rounded-es":H()}],"rounded-tl":[{"rounded-tl":H()}],"rounded-tr":[{"rounded-tr":H()}],"rounded-br":[{"rounded-br":H()}],"rounded-bl":[{"rounded-bl":H()}],"border-w":[{border:X()}],"border-w-x":[{"border-x":X()}],"border-w-y":[{"border-y":X()}],"border-w-s":[{"border-s":X()}],"border-w-e":[{"border-e":X()}],"border-w-t":[{"border-t":X()}],"border-w-r":[{"border-r":X()}],"border-w-b":[{"border-b":X()}],"border-w-l":[{"border-l":X()}],"divide-x":[{"divide-x":X()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":X()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ne(),"hidden","none"]}],"divide-style":[{divide:[...ne(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Kr,Yt,Kt]}],"outline-w":[{outline:["",Kr,Px,lh]}],"outline-color":[{outline:q()}],shadow:[{shadow:["","none",f,X0,Y0]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",m,X0,Y0]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[Kr,lh]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":X()}],"inset-ring-color":[{"inset-ring":q()}],"text-shadow":[{"text-shadow":["none",p,X0,Y0]}],"text-shadow-color":[{"text-shadow":q()}],opacity:[{opacity:[Kr,Yt,Kt]}],"mix-blend":[{"mix-blend":[...ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Kr]}],"mask-image-linear-from-pos":[{"mask-linear-from":ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":ce()}],"mask-image-linear-from-color":[{"mask-linear-from":q()}],"mask-image-linear-to-color":[{"mask-linear-to":q()}],"mask-image-t-from-pos":[{"mask-t-from":ce()}],"mask-image-t-to-pos":[{"mask-t-to":ce()}],"mask-image-t-from-color":[{"mask-t-from":q()}],"mask-image-t-to-color":[{"mask-t-to":q()}],"mask-image-r-from-pos":[{"mask-r-from":ce()}],"mask-image-r-to-pos":[{"mask-r-to":ce()}],"mask-image-r-from-color":[{"mask-r-from":q()}],"mask-image-r-to-color":[{"mask-r-to":q()}],"mask-image-b-from-pos":[{"mask-b-from":ce()}],"mask-image-b-to-pos":[{"mask-b-to":ce()}],"mask-image-b-from-color":[{"mask-b-from":q()}],"mask-image-b-to-color":[{"mask-b-to":q()}],"mask-image-l-from-pos":[{"mask-l-from":ce()}],"mask-image-l-to-pos":[{"mask-l-to":ce()}],"mask-image-l-from-color":[{"mask-l-from":q()}],"mask-image-l-to-color":[{"mask-l-to":q()}],"mask-image-x-from-pos":[{"mask-x-from":ce()}],"mask-image-x-to-pos":[{"mask-x-to":ce()}],"mask-image-x-from-color":[{"mask-x-from":q()}],"mask-image-x-to-color":[{"mask-x-to":q()}],"mask-image-y-from-pos":[{"mask-y-from":ce()}],"mask-image-y-to-pos":[{"mask-y-to":ce()}],"mask-image-y-from-color":[{"mask-y-from":q()}],"mask-image-y-to-color":[{"mask-y-to":q()}],"mask-image-radial":[{"mask-radial":[Yt,Kt]}],"mask-image-radial-from-pos":[{"mask-radial-from":ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":ce()}],"mask-image-radial-from-color":[{"mask-radial-from":q()}],"mask-image-radial-to-color":[{"mask-radial-to":q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[Kr]}],"mask-image-conic-from-pos":[{"mask-conic-from":ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":ce()}],"mask-image-conic-from-color":[{"mask-conic-from":q()}],"mask-image-conic-to-color":[{"mask-conic-to":q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:Q()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Yt,Kt]}],filter:[{filter:["","none",Yt,Kt]}],blur:[{blur:ge()}],brightness:[{brightness:[Kr,Yt,Kt]}],contrast:[{contrast:[Kr,Yt,Kt]}],"drop-shadow":[{"drop-shadow":["","none",g,X0,Y0]}],"drop-shadow-color":[{"drop-shadow":q()}],grayscale:[{grayscale:["",Kr,Yt,Kt]}],"hue-rotate":[{"hue-rotate":[Kr,Yt,Kt]}],invert:[{invert:["",Kr,Yt,Kt]}],saturate:[{saturate:[Kr,Yt,Kt]}],sepia:[{sepia:["",Kr,Yt,Kt]}],"backdrop-filter":[{"backdrop-filter":["","none",Yt,Kt]}],"backdrop-blur":[{"backdrop-blur":ge()}],"backdrop-brightness":[{"backdrop-brightness":[Kr,Yt,Kt]}],"backdrop-contrast":[{"backdrop-contrast":[Kr,Yt,Kt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Kr,Yt,Kt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Kr,Yt,Kt]}],"backdrop-invert":[{"backdrop-invert":["",Kr,Yt,Kt]}],"backdrop-opacity":[{"backdrop-opacity":[Kr,Yt,Kt]}],"backdrop-saturate":[{"backdrop-saturate":[Kr,Yt,Kt]}],"backdrop-sepia":[{"backdrop-sepia":["",Kr,Yt,Kt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Yt,Kt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Kr,"initial",Yt,Kt]}],ease:[{ease:["linear","initial",j,Yt,Kt]}],delay:[{delay:[Kr,Yt,Kt]}],animate:[{animate:["none",_,Yt,Kt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,Yt,Kt]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:he()}],"rotate-x":[{"rotate-x":he()}],"rotate-y":[{"rotate-y":he()}],"rotate-z":[{"rotate-z":he()}],scale:[{scale:ue()}],"scale-x":[{"scale-x":ue()}],"scale-y":[{"scale-y":ue()}],"scale-z":[{"scale-z":ue()}],"scale-3d":["scale-3d"],skew:[{skew:Se()}],"skew-x":[{"skew-x":Se()}],"skew-y":[{"skew-y":Se()}],transform:[{transform:[Yt,Kt,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:je()}],"translate-x":[{"translate-x":je()}],"translate-y":[{"translate-y":je()}],"translate-z":[{"translate-z":je()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Yt,Kt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Yt,Kt]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[Kr,Px,lh,vN]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Zne=Tne(Jne);function Ye(...e){return Zne(Pr(e))}const yh=[{key:"i-scan",name:"i-Scan",path:"/retina/modules/i-scan",enabled:!0,description:"Intelligent scanning and analysis of documents and data",icon:n.jsx(NA,{className:"h-6 w-6"})},{key:"i-event",name:"i-Event",path:"/retina/modules/i-event",enabled:!0,description:"Event tracking and management system",icon:n.jsx(Rh,{className:"h-6 w-6"})},{key:"i-audit",name:"i-Audit",path:"/retina/modules/i-audit",enabled:!0,description:"Comprehensive audit trail and compliance monitoring",icon:n.jsx(wy,{className:"h-6 w-6"})},{key:"fragile-i",name:"Fragile-i",path:"/retina/modules/fragile-i",enabled:!0,description:"Vulnerability detection and risk assessment",icon:n.jsx(Mh,{className:"h-6 w-6"})},{key:"i-decide",name:"i-Decide",path:"/retina/modules/i-decide",enabled:!0,description:"Decision support and recommendation engine",icon:n.jsx(vee,{className:"h-6 w-6"})}],l3="retina:features:";function tv(e){const t=`${l3}${e}`,r=localStorage.getItem(t);if(r)try{return JSON.parse(r)}catch(s){console.error("Failed to parse feature flags:",s)}const a={};return yh.forEach(s=>{a[s.key]=s.enabled}),a}function Qne(e,t){const r=`${l3}${e}`;localStorage.setItem(r,JSON.stringify(t))}function eae(e,t){return tv(e)[t]??!0}function aB(e){const[t,r]=N.useState(()=>tv(e));return N.useEffect(()=>{r(tv(e))},[e]),N.useEffect(()=>{const i=l=>{const d=`${l3}${e}`;if(l.key===d&&l.newValue)try{r(JSON.parse(l.newValue))}catch(u){console.error("Failed to parse feature flags from storage event:",u)}},o=l=>{var u;((u=l.detail)==null?void 0:u.tenantId)===e&&r(tv(e))};return window.addEventListener("storage",i),window.addEventListener("featureFlagsUpdated",o),()=>{window.removeEventListener("storage",i),window.removeEventListener("featureFlagsUpdated",o)}},[e]),{flags:t,updateFlag:(i,o)=>{const l={...t,[i]:o};r(l),Qne(e,l),window.dispatchEvent(new CustomEvent("featureFlagsUpdated",{detail:{tenantId:e,moduleKey:i,enabled:o}}))},isEnabled:i=>t[i]??!0}}function tae(e){const t=tv(e);return yh.filter(r=>t[r.key]!==!1)}const rae={},cP=e=>{let t;const r=new Set,a=(f,m)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const g=t;t=m??(typeof p!="object"||p===null)?p:Object.assign({},t,p),r.forEach(b=>b(t,g))}},s=()=>t,d={setState:a,getState:s,getInitialState:()=>u,subscribe:f=>(r.add(f),()=>r.delete(f)),destroy:()=>{(rae?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(a,s,d);return d},nae=e=>e?cP(e):cP;var yN={exports:{}},bN={},jN={exports:{}},wN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dP;function aae(){if(dP)return wN;dP=1;var e=xy();function t(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(m,p){var g=p(),b=a({inst:{value:g,getSnapshot:p}}),v=b[0].inst,y=b[1];return i(function(){v.value=g,v.getSnapshot=p,d(v)&&y({inst:v})},[m,g,p]),s(function(){return d(v)&&y({inst:v}),m(function(){d(v)&&y({inst:v})})},[m]),o(g),g}function d(m){var p=m.getSnapshot;m=m.value;try{var g=p();return!r(m,g)}catch{return!0}}function u(m,p){return p()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return wN.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,wN}var uP;function sae(){return uP||(uP=1,jN.exports=aae()),jN.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fP;function iae(){if(fP)return bN;fP=1;var e=xy(),t=sae();function r(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var a=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,d=e.useDebugValue;return bN.useSyncExternalStoreWithSelector=function(u,f,m,p,g){var b=i(null);if(b.current===null){var v={hasValue:!1,value:null};b.current=v}else v=b.current;b=l(function(){function j(T){if(!_){if(_=!0,C=T,T=p(T),g!==void 0&&v.hasValue){var O=v.value;if(g(O,T))return A=O}return A=T}if(O=A,a(C,T))return O;var R=p(T);return g!==void 0&&g(O,R)?(C=T,O):(C=T,A=R)}var _=!1,C,A,S=m===void 0?null:m;return[function(){return j(f())},S===null?void 0:function(){return j(S())}]},[f,m,p,g]);var y=s(u,b[0],b[1]);return o(function(){v.hasValue=!0,v.value=y},[y]),d(y),y},bN}var hP;function oae(){return hP||(hP=1,yN.exports=iae()),yN.exports}var lae=oae();const cae=jn(lae),sB={},{useDebugValue:dae}=pe,{useSyncExternalStoreWithSelector:uae}=cae;let mP=!1;const fae=e=>e;function hae(e,t=fae,r){(sB?"production":void 0)!=="production"&&r&&!mP&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),mP=!0);const a=uae(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return dae(a),a}const pP=e=>{(sB?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?nae(e):e,r=(a,s)=>hae(t,a,s);return Object.assign(r,t),r},iB=e=>e?pP(e):pP,_A="retina:user",gP={viewer:0,editor:1,admin:2},oB=()=>{try{const e=localStorage.getItem(_A);return e?JSON.parse(e):null}catch{return null}},Eb=e=>{e?localStorage.setItem(_A,JSON.stringify(e)):localStorage.removeItem(_A)},kg=iB((e,t)=>({user:oB(),setUser:r=>{Eb(r),e({user:r})},updateRole:r=>{const{user:a}=t();if(a){const s={...a,role:r};Eb(s),e({user:s})}},logout:()=>{Eb(null),e({user:null})},hasPermission:r=>{const{user:a}=t();return a?gP[a.role]>=gP[r]:!1},canModifyFeatureFlags:r=>{const{user:a}=t();return a?a.role==="admin":!1},canEdit:()=>{const{user:r}=t();return r?r.role==="admin"||r.role==="editor":!1},isReadOnly:()=>{const{user:r}=t();return r?r.role==="viewer":!0},fetchCurrentUser:async()=>{const{user:r}=t();if(r)return r;const a={id:"user-1",email:"editor@retina.ai",role:"editor",tenantId:"t-demo"};return t().setUser(a),a}})),mae=()=>{oB()||Eb({id:"user-1",email:"editor@retina.ai",role:"editor",tenantId:"t-demo"})};mae();const xP=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,vP=Pr,Sy=(e,t)=>r=>{var a;if((t==null?void 0:t.variants)==null)return vP(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(u=>{const f=r==null?void 0:r[u],m=i==null?void 0:i[u];if(f===null)return null;const p=xP(f)||xP(m);return s[u][p]}),l=r&&Object.entries(r).reduce((u,f)=>{let[m,p]=f;return p===void 0||(u[m]=p),u},{}),d=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((u,f)=>{let{class:m,className:p,...g}=f;return Object.entries(g).every(b=>{let[v,y]=b;return Array.isArray(y)?y.includes({...i,...l}[v]):{...i,...l}[v]===y})?[...u,m,p]:u},[]);return vP(e,o,d,r==null?void 0:r.class,r==null?void 0:r.className)},pae=Sy("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function be({className:e,variant:t,...r}){return n.jsx("div",{className:Ye(pae({variant:t}),e),...r})}function yt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function yP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ud(...e){return t=>{let r=!1;const a=e.map(s=>{const i=yP(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<a.length;s++){const i=a[s];typeof i=="function"?i():yP(e[s],null)}}}}function br(...e){return N.useCallback(ud(...e),e)}function gae(e,t){const r=N.createContext(t),a=i=>{const{children:o,...l}=i,d=N.useMemo(()=>l,Object.values(l));return n.jsx(r.Provider,{value:d,children:o})};a.displayName=e+"Provider";function s(i){const o=N.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[a,s]}function ai(e,t=[]){let r=[];function a(i,o){const l=N.createContext(o),d=r.length;r=[...r,o];const u=m=>{var j;const{scope:p,children:g,...b}=m,v=((j=p==null?void 0:p[e])==null?void 0:j[d])||l,y=N.useMemo(()=>b,Object.values(b));return n.jsx(v.Provider,{value:y,children:g})};u.displayName=i+"Provider";function f(m,p){var v;const g=((v=p==null?void 0:p[e])==null?void 0:v[d])||l,b=N.useContext(g);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,f]}const s=()=>{const i=r.map(o=>N.createContext(o));return function(l){const d=(l==null?void 0:l[e])||i;return N.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return s.scopeName=e,[a,xae(s,...t)]}function xae(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const a=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=a.reduce((l,{useScope:d,scopeName:u})=>{const m=d(i)[`__scope${u}`];return{...l,...m}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function vae(e){const t=yae(e),r=N.forwardRef((a,s)=>{const{children:i,...o}=a,l=N.Children.toArray(i),d=l.find(jae);if(d){const u=d.props.children,f=l.map(m=>m===d?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:N.isValidElement(u)?N.cloneElement(u,void 0,f):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function yae(e){const t=N.forwardRef((r,a)=>{const{children:s,...i}=r;if(N.isValidElement(s)){const o=Nae(s),l=wae(i,s.props);return s.type!==N.Fragment&&(l.ref=a?ud(a,o):o),N.cloneElement(s,l)}return N.Children.count(s)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var bae=Symbol("radix.slottable");function jae(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===bae}function wae(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Nae(e){var a,s;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Sae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ar=Sae.reduce((e,t)=>{const r=vae(`Primitive.${t}`),a=N.forwardRef((s,i)=>{const{asChild:o,...l}=s,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(d,{...l,ref:i})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function lB(e,t){e&&bg.flushSync(()=>e.dispatchEvent(t))}function Qs(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...r)=>{var a;return(a=t.current)==null?void 0:a.call(t,...r)},[])}function Cae(e,t=globalThis==null?void 0:globalThis.document){const r=Qs(e);N.useEffect(()=>{const a=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[r,t])}var _ae="DismissableLayer",AA="dismissableLayer.update",Aae="dismissableLayer.pointerDownOutside",kae="dismissableLayer.focusOutside",bP,cB=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Og=N.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...d}=e,u=N.useContext(cB),[f,m]=N.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=N.useState({}),b=br(t,O=>m(O)),v=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),j=v.indexOf(y),_=f?v.indexOf(f):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,A=_>=j,S=Tae(O=>{const R=O.target,M=[...u.branches].some(I=>I.contains(R));!A||M||(s==null||s(O),o==null||o(O),O.defaultPrevented||l==null||l())},p),T=Rae(O=>{const R=O.target;[...u.branches].some(I=>I.contains(R))||(i==null||i(O),o==null||o(O),O.defaultPrevented||l==null||l())},p);return Cae(O=>{_===u.layers.size-1&&(a==null||a(O),!O.defaultPrevented&&l&&(O.preventDefault(),l()))},p),N.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(bP=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),jP(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=bP)}},[f,p,r,u]),N.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),jP())},[f,u]),N.useEffect(()=>{const O=()=>g({});return document.addEventListener(AA,O),()=>document.removeEventListener(AA,O)},[]),n.jsx(ar.div,{...d,ref:b,style:{pointerEvents:C?A?"auto":"none":void 0,...e.style},onFocusCapture:yt(e.onFocusCapture,T.onFocusCapture),onBlurCapture:yt(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:yt(e.onPointerDownCapture,S.onPointerDownCapture)})});Og.displayName=_ae;var Oae="DismissableLayerBranch",Eae=N.forwardRef((e,t)=>{const r=N.useContext(cB),a=N.useRef(null),s=br(t,a);return N.useEffect(()=>{const i=a.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),n.jsx(ar.div,{...e,ref:s})});Eae.displayName=Oae;function Tae(e,t=globalThis==null?void 0:globalThis.document){const r=Qs(e),a=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const i=l=>{if(l.target&&!a.current){let d=function(){dB(Aae,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=d,t.addEventListener("click",s.current,{once:!0})):d()}else t.removeEventListener("click",s.current);a.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function Rae(e,t=globalThis==null?void 0:globalThis.document){const r=Qs(e),a=N.useRef(!1);return N.useEffect(()=>{const s=i=>{i.target&&!a.current&&dB(kae,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function jP(){const e=new CustomEvent(AA);document.dispatchEvent(e)}function dB(e,t,r,{discrete:a}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),a?lB(s,i):s.dispatchEvent(i)}var ni=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},Pae=Gk[" useId ".trim().toString()]||(()=>{}),Mae=0;function yl(e){const[t,r]=N.useState(Pae());return ni(()=>{r(a=>a??String(Mae++))},[e]),t?`radix-${t}`:""}const Dae=["top","right","bottom","left"],yf=Math.min,Lo=Math.max,Yb=Math.round,J0=Math.floor,rd=e=>({x:e,y:e}),Lae={left:"right",right:"left",bottom:"top",top:"bottom"},Iae={start:"end",end:"start"};function kA(e,t,r){return Lo(e,yf(t,r))}function iu(e,t){return typeof e=="function"?e(t):e}function ou(e){return e.split("-")[0]}function Eg(e){return e.split("-")[1]}function c3(e){return e==="x"?"y":"x"}function d3(e){return e==="y"?"height":"width"}const $ae=new Set(["top","bottom"]);function Zc(e){return $ae.has(ou(e))?"y":"x"}function u3(e){return c3(Zc(e))}function Fae(e,t,r){r===void 0&&(r=!1);const a=Eg(e),s=u3(e),i=d3(s);let o=s==="x"?a===(r?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Xb(o)),[o,Xb(o)]}function Bae(e){const t=Xb(e);return[OA(e),t,OA(t)]}function OA(e){return e.replace(/start|end/g,t=>Iae[t])}const wP=["left","right"],NP=["right","left"],zae=["top","bottom"],qae=["bottom","top"];function Uae(e,t,r){switch(e){case"top":case"bottom":return r?t?NP:wP:t?wP:NP;case"left":case"right":return t?zae:qae;default:return[]}}function Vae(e,t,r,a){const s=Eg(e);let i=Uae(ou(e),r==="start",a);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(OA)))),i}function Xb(e){return e.replace(/left|right|bottom|top/g,t=>Lae[t])}function Hae(e){return{top:0,right:0,bottom:0,left:0,...e}}function uB(e){return typeof e!="number"?Hae(e):{top:e,right:e,bottom:e,left:e}}function Jb(e){const{x:t,y:r,width:a,height:s}=e;return{width:a,height:s,top:r,left:t,right:t+a,bottom:r+s,x:t,y:r}}function SP(e,t,r){let{reference:a,floating:s}=e;const i=Zc(t),o=u3(t),l=d3(o),d=ou(t),u=i==="y",f=a.x+a.width/2-s.width/2,m=a.y+a.height/2-s.height/2,p=a[l]/2-s[l]/2;let g;switch(d){case"top":g={x:f,y:a.y-s.height};break;case"bottom":g={x:f,y:a.y+a.height};break;case"right":g={x:a.x+a.width,y:m};break;case"left":g={x:a.x-s.width,y:m};break;default:g={x:a.x,y:a.y}}switch(Eg(t)){case"start":g[o]-=p*(r&&u?-1:1);break;case"end":g[o]+=p*(r&&u?-1:1);break}return g}const Gae=async(e,t,r)=>{const{placement:a="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:m}=SP(u,a,d),p=a,g={},b=0;for(let v=0;v<l.length;v++){const{name:y,fn:j}=l[v],{x:_,y:C,data:A,reset:S}=await j({x:f,y:m,initialPlacement:a,placement:p,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:e,floating:t}});f=_??f,m=C??m,g={...g,[y]:{...g[y],...A}},S&&b<=50&&(b++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:f,y:m}=SP(u,p,d)),v=-1)}return{x:f,y:m,placement:p,strategy:s,middlewareData:g}};async function Nv(e,t){var r;t===void 0&&(t={});const{x:a,y:s,platform:i,rects:o,elements:l,strategy:d}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:p=!1,padding:g=0}=iu(t,e),b=uB(g),y=l[p?m==="floating"?"reference":"floating":m],j=Jb(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(y)))==null||r?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:d})),_=m==="floating"?{x:a,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),A=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},S=Jb(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:C,strategy:d}):_);return{top:(j.top-S.top+b.top)/A.y,bottom:(S.bottom-j.bottom+b.bottom)/A.y,left:(j.left-S.left+b.left)/A.x,right:(S.right-j.right+b.right)/A.x}}const Wae=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:a,placement:s,rects:i,platform:o,elements:l,middlewareData:d}=t,{element:u,padding:f=0}=iu(e,t)||{};if(u==null)return{};const m=uB(f),p={x:r,y:a},g=u3(s),b=d3(g),v=await o.getDimensions(u),y=g==="y",j=y?"top":"left",_=y?"bottom":"right",C=y?"clientHeight":"clientWidth",A=i.reference[b]+i.reference[g]-p[g]-i.floating[b],S=p[g]-i.reference[g],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let O=T?T[C]:0;(!O||!await(o.isElement==null?void 0:o.isElement(T)))&&(O=l.floating[C]||i.floating[b]);const R=A/2-S/2,M=O/2-v[b]/2-1,I=yf(m[j],M),D=yf(m[_],M),$=I,K=O-v[b]-D,U=O/2-v[b]/2+R,J=kA($,U,K),V=!d.arrow&&Eg(s)!=null&&U!==J&&i.reference[b]/2-(U<$?I:D)-v[b]/2<0,G=V?U<$?U-$:U-K:0;return{[g]:p[g]+G,data:{[g]:J,centerOffset:U-J-G,...V&&{alignmentOffset:G}},reset:V}}}),Kae=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,a;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:d,elements:u}=t,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:v=!0,...y}=iu(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const j=ou(s),_=Zc(l),C=ou(l)===l,A=await(d.isRTL==null?void 0:d.isRTL(u.floating)),S=p||(C||!v?[Xb(l)]:Bae(l)),T=b!=="none";!p&&T&&S.push(...Vae(l,v,b,A));const O=[l,...S],R=await Nv(t,y),M=[];let I=((a=i.flip)==null?void 0:a.overflows)||[];if(f&&M.push(R[j]),m){const U=Fae(s,o,A);M.push(R[U[0]],R[U[1]])}if(I=[...I,{placement:s,overflows:M}],!M.every(U=>U<=0)){var D,$;const U=(((D=i.flip)==null?void 0:D.index)||0)+1,J=O[U];if(J&&(!(m==="alignment"?_!==Zc(J):!1)||I.every(q=>Zc(q.placement)===_?q.overflows[0]>0:!0)))return{data:{index:U,overflows:I},reset:{placement:J}};let V=($=I.filter(G=>G.overflows[0]<=0).sort((G,q)=>G.overflows[1]-q.overflows[1])[0])==null?void 0:$.placement;if(!V)switch(g){case"bestFit":{var K;const G=(K=I.filter(q=>{if(T){const Y=Zc(q.placement);return Y===_||Y==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(Y=>Y>0).reduce((Y,Q)=>Y+Q,0)]).sort((q,Y)=>q[1]-Y[1])[0])==null?void 0:K[0];G&&(V=G);break}case"initialPlacement":V=l;break}if(s!==V)return{reset:{placement:V}}}return{}}}};function CP(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function _P(e){return Dae.some(t=>e[t]>=0)}const Yae=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:a="referenceHidden",...s}=iu(e,t);switch(a){case"referenceHidden":{const i=await Nv(t,{...s,elementContext:"reference"}),o=CP(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:_P(o)}}}case"escaped":{const i=await Nv(t,{...s,altBoundary:!0}),o=CP(i,r.floating);return{data:{escapedOffsets:o,escaped:_P(o)}}}default:return{}}}}},fB=new Set(["left","top"]);async function Xae(e,t){const{placement:r,platform:a,elements:s}=e,i=await(a.isRTL==null?void 0:a.isRTL(s.floating)),o=ou(r),l=Eg(r),d=Zc(r)==="y",u=fB.has(o)?-1:1,f=i&&d?-1:1,m=iu(t,e);let{mainAxis:p,crossAxis:g,alignmentAxis:b}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof b=="number"&&(g=l==="end"?b*-1:b),d?{x:g*f,y:p*u}:{x:p*u,y:g*f}}const Jae=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,a;const{x:s,y:i,placement:o,middlewareData:l}=t,d=await Xae(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(a=l.arrow)!=null&&a.alignmentOffset?{}:{x:s+d.x,y:i+d.y,data:{...d,placement:o}}}}},Zae=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:a,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:j,y:_}=y;return{x:j,y:_}}},...d}=iu(e,t),u={x:r,y:a},f=await Nv(t,d),m=Zc(ou(s)),p=c3(m);let g=u[p],b=u[m];if(i){const y=p==="y"?"top":"left",j=p==="y"?"bottom":"right",_=g+f[y],C=g-f[j];g=kA(_,g,C)}if(o){const y=m==="y"?"top":"left",j=m==="y"?"bottom":"right",_=b+f[y],C=b-f[j];b=kA(_,b,C)}const v=l.fn({...t,[p]:g,[m]:b});return{...v,data:{x:v.x-r,y:v.y-a,enabled:{[p]:i,[m]:o}}}}}},Qae=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:a,placement:s,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:d=!0,crossAxis:u=!0}=iu(e,t),f={x:r,y:a},m=Zc(s),p=c3(m);let g=f[p],b=f[m];const v=iu(l,t),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(d){const C=p==="y"?"height":"width",A=i.reference[p]-i.floating[C]+y.mainAxis,S=i.reference[p]+i.reference[C]-y.mainAxis;g<A?g=A:g>S&&(g=S)}if(u){var j,_;const C=p==="y"?"width":"height",A=fB.has(ou(s)),S=i.reference[m]-i.floating[C]+(A&&((j=o.offset)==null?void 0:j[m])||0)+(A?0:y.crossAxis),T=i.reference[m]+i.reference[C]+(A?0:((_=o.offset)==null?void 0:_[m])||0)-(A?y.crossAxis:0);b<S?b=S:b>T&&(b=T)}return{[p]:g,[m]:b}}}},ese=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,a;const{placement:s,rects:i,platform:o,elements:l}=t,{apply:d=()=>{},...u}=iu(e,t),f=await Nv(t,u),m=ou(s),p=Eg(s),g=Zc(s)==="y",{width:b,height:v}=i.floating;let y,j;m==="top"||m==="bottom"?(y=m,j=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(j=m,y=p==="end"?"top":"bottom");const _=v-f.top-f.bottom,C=b-f.left-f.right,A=yf(v-f[y],_),S=yf(b-f[j],C),T=!t.middlewareData.shift;let O=A,R=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(R=C),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(O=_),T&&!p){const I=Lo(f.left,0),D=Lo(f.right,0),$=Lo(f.top,0),K=Lo(f.bottom,0);g?R=b-2*(I!==0||D!==0?I+D:Lo(f.left,f.right)):O=v-2*($!==0||K!==0?$+K:Lo(f.top,f.bottom))}await d({...t,availableWidth:R,availableHeight:O});const M=await o.getDimensions(l.floating);return b!==M.width||v!==M.height?{reset:{rects:!0}}:{}}}};function wj(){return typeof window<"u"}function Tg(e){return hB(e)?(e.nodeName||"").toLowerCase():"#document"}function Bo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function fd(e){var t;return(t=(hB(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function hB(e){return wj()?e instanceof Node||e instanceof Bo(e).Node:!1}function yc(e){return wj()?e instanceof Element||e instanceof Bo(e).Element:!1}function od(e){return wj()?e instanceof HTMLElement||e instanceof Bo(e).HTMLElement:!1}function AP(e){return!wj()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Bo(e).ShadowRoot}const tse=new Set(["inline","contents"]);function Cy(e){const{overflow:t,overflowX:r,overflowY:a,display:s}=bc(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!tse.has(s)}const rse=new Set(["table","td","th"]);function nse(e){return rse.has(Tg(e))}const ase=[":popover-open",":modal"];function Nj(e){return ase.some(t=>{try{return e.matches(t)}catch{return!1}})}const sse=["transform","translate","scale","rotate","perspective"],ise=["transform","translate","scale","rotate","perspective","filter"],ose=["paint","layout","strict","content"];function f3(e){const t=h3(),r=yc(e)?bc(e):e;return sse.some(a=>r[a]?r[a]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||ise.some(a=>(r.willChange||"").includes(a))||ose.some(a=>(r.contain||"").includes(a))}function lse(e){let t=bf(e);for(;od(t)&&!Ip(t);){if(f3(t))return t;if(Nj(t))return null;t=bf(t)}return null}function h3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const cse=new Set(["html","body","#document"]);function Ip(e){return cse.has(Tg(e))}function bc(e){return Bo(e).getComputedStyle(e)}function Sj(e){return yc(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function bf(e){if(Tg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||AP(e)&&e.host||fd(e);return AP(t)?t.host:t}function mB(e){const t=bf(e);return Ip(t)?e.ownerDocument?e.ownerDocument.body:e.body:od(t)&&Cy(t)?t:mB(t)}function Sv(e,t,r){var a;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=mB(e),i=s===((a=e.ownerDocument)==null?void 0:a.body),o=Bo(s);if(i){const l=EA(o);return t.concat(o,o.visualViewport||[],Cy(s)?s:[],l&&r?Sv(l):[])}return t.concat(s,Sv(s,[],r))}function EA(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function pB(e){const t=bc(e);let r=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const s=od(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:a,l=Yb(r)!==i||Yb(a)!==o;return l&&(r=i,a=o),{width:r,height:a,$:l}}function m3(e){return yc(e)?e:e.contextElement}function bp(e){const t=m3(e);if(!od(t))return rd(1);const r=t.getBoundingClientRect(),{width:a,height:s,$:i}=pB(t);let o=(i?Yb(r.width):r.width)/a,l=(i?Yb(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const dse=rd(0);function gB(e){const t=Bo(e);return!h3()||!t.visualViewport?dse:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function use(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Bo(e)?!1:t}function Dh(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=m3(e);let o=rd(1);t&&(a?yc(a)&&(o=bp(a)):o=bp(e));const l=use(i,r,a)?gB(i):rd(0);let d=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,f=s.width/o.x,m=s.height/o.y;if(i){const p=Bo(i),g=a&&yc(a)?Bo(a):a;let b=p,v=EA(b);for(;v&&a&&g!==b;){const y=bp(v),j=v.getBoundingClientRect(),_=bc(v),C=j.left+(v.clientLeft+parseFloat(_.paddingLeft))*y.x,A=j.top+(v.clientTop+parseFloat(_.paddingTop))*y.y;d*=y.x,u*=y.y,f*=y.x,m*=y.y,d+=C,u+=A,b=Bo(v),v=EA(b)}}return Jb({width:f,height:m,x:d,y:u})}function Cj(e,t){const r=Sj(e).scrollLeft;return t?t.left+r:Dh(fd(e)).left+r}function xB(e,t){const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-Cj(e,r),s=r.top+t.scrollTop;return{x:a,y:s}}function fse(e){let{elements:t,rect:r,offsetParent:a,strategy:s}=e;const i=s==="fixed",o=fd(a),l=t?Nj(t.floating):!1;if(a===o||l&&i)return r;let d={scrollLeft:0,scrollTop:0},u=rd(1);const f=rd(0),m=od(a);if((m||!m&&!i)&&((Tg(a)!=="body"||Cy(o))&&(d=Sj(a)),od(a))){const g=Dh(a);u=bp(a),f.x=g.x+a.clientLeft,f.y=g.y+a.clientTop}const p=o&&!m&&!i?xB(o,d):rd(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-d.scrollLeft*u.x+f.x+p.x,y:r.y*u.y-d.scrollTop*u.y+f.y+p.y}}function hse(e){return Array.from(e.getClientRects())}function mse(e){const t=fd(e),r=Sj(e),a=e.ownerDocument.body,s=Lo(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),i=Lo(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let o=-r.scrollLeft+Cj(e);const l=-r.scrollTop;return bc(a).direction==="rtl"&&(o+=Lo(t.clientWidth,a.clientWidth)-s),{width:s,height:i,x:o,y:l}}const kP=25;function pse(e,t){const r=Bo(e),a=fd(e),s=r.visualViewport;let i=a.clientWidth,o=a.clientHeight,l=0,d=0;if(s){i=s.width,o=s.height;const f=h3();(!f||f&&t==="fixed")&&(l=s.offsetLeft,d=s.offsetTop)}const u=Cj(a);if(u<=0){const f=a.ownerDocument,m=f.body,p=getComputedStyle(m),g=f.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,b=Math.abs(a.clientWidth-m.clientWidth-g);b<=kP&&(i-=b)}else u<=kP&&(i+=u);return{width:i,height:o,x:l,y:d}}const gse=new Set(["absolute","fixed"]);function xse(e,t){const r=Dh(e,!0,t==="fixed"),a=r.top+e.clientTop,s=r.left+e.clientLeft,i=od(e)?bp(e):rd(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,d=s*i.x,u=a*i.y;return{width:o,height:l,x:d,y:u}}function OP(e,t,r){let a;if(t==="viewport")a=pse(e,r);else if(t==="document")a=mse(fd(e));else if(yc(t))a=xse(t,r);else{const s=gB(e);a={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Jb(a)}function vB(e,t){const r=bf(e);return r===t||!yc(r)||Ip(r)?!1:bc(r).position==="fixed"||vB(r,t)}function vse(e,t){const r=t.get(e);if(r)return r;let a=Sv(e,[],!1).filter(l=>yc(l)&&Tg(l)!=="body"),s=null;const i=bc(e).position==="fixed";let o=i?bf(e):e;for(;yc(o)&&!Ip(o);){const l=bc(o),d=f3(o);!d&&l.position==="fixed"&&(s=null),(i?!d&&!s:!d&&l.position==="static"&&!!s&&gse.has(s.position)||Cy(o)&&!d&&vB(e,o))?a=a.filter(f=>f!==o):s=l,o=bf(o)}return t.set(e,a),a}function yse(e){let{element:t,boundary:r,rootBoundary:a,strategy:s}=e;const o=[...r==="clippingAncestors"?Nj(t)?[]:vse(t,this._c):[].concat(r),a],l=o[0],d=o.reduce((u,f)=>{const m=OP(t,f,s);return u.top=Lo(m.top,u.top),u.right=yf(m.right,u.right),u.bottom=yf(m.bottom,u.bottom),u.left=Lo(m.left,u.left),u},OP(t,l,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function bse(e){const{width:t,height:r}=pB(e);return{width:t,height:r}}function jse(e,t,r){const a=od(t),s=fd(t),i=r==="fixed",o=Dh(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const d=rd(0);function u(){d.x=Cj(s)}if(a||!a&&!i)if((Tg(t)!=="body"||Cy(s))&&(l=Sj(t)),a){const g=Dh(t,!0,i,t);d.x=g.x+t.clientLeft,d.y=g.y+t.clientTop}else s&&u();i&&!a&&s&&u();const f=s&&!a&&!i?xB(s,l):rd(0),m=o.left+l.scrollLeft-d.x-f.x,p=o.top+l.scrollTop-d.y-f.y;return{x:m,y:p,width:o.width,height:o.height}}function NN(e){return bc(e).position==="static"}function EP(e,t){if(!od(e)||bc(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return fd(e)===r&&(r=r.ownerDocument.body),r}function yB(e,t){const r=Bo(e);if(Nj(e))return r;if(!od(e)){let s=bf(e);for(;s&&!Ip(s);){if(yc(s)&&!NN(s))return s;s=bf(s)}return r}let a=EP(e,t);for(;a&&nse(a)&&NN(a);)a=EP(a,t);return a&&Ip(a)&&NN(a)&&!f3(a)?r:a||lse(e)||r}const wse=async function(e){const t=this.getOffsetParent||yB,r=this.getDimensions,a=await r(e.floating);return{reference:jse(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function Nse(e){return bc(e).direction==="rtl"}const Sse={convertOffsetParentRelativeRectToViewportRelativeRect:fse,getDocumentElement:fd,getClippingRect:yse,getOffsetParent:yB,getElementRects:wse,getClientRects:hse,getDimensions:bse,getScale:bp,isElement:yc,isRTL:Nse};function bB(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Cse(e,t){let r=null,a;const s=fd(e);function i(){var l;clearTimeout(a),(l=r)==null||l.disconnect(),r=null}function o(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),i();const u=e.getBoundingClientRect(),{left:f,top:m,width:p,height:g}=u;if(l||t(),!p||!g)return;const b=J0(m),v=J0(s.clientWidth-(f+p)),y=J0(s.clientHeight-(m+g)),j=J0(f),C={rootMargin:-b+"px "+-v+"px "+-y+"px "+-j+"px",threshold:Lo(0,yf(1,d))||1};let A=!0;function S(T){const O=T[0].intersectionRatio;if(O!==d){if(!A)return o();O?o(!1,O):a=setTimeout(()=>{o(!1,1e-7)},1e3)}O===1&&!bB(u,e.getBoundingClientRect())&&o(),A=!1}try{r=new IntersectionObserver(S,{...C,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,C)}r.observe(e)}return o(!0),i}function _se(e,t,r,a){a===void 0&&(a={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=a,u=m3(e),f=s||i?[...u?Sv(u):[],...Sv(t)]:[];f.forEach(j=>{s&&j.addEventListener("scroll",r,{passive:!0}),i&&j.addEventListener("resize",r)});const m=u&&l?Cse(u,r):null;let p=-1,g=null;o&&(g=new ResizeObserver(j=>{let[_]=j;_&&_.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var C;(C=g)==null||C.observe(t)})),r()}),u&&!d&&g.observe(u),g.observe(t));let b,v=d?Dh(e):null;d&&y();function y(){const j=Dh(e);v&&!bB(v,j)&&r(),v=j,b=requestAnimationFrame(y)}return r(),()=>{var j;f.forEach(_=>{s&&_.removeEventListener("scroll",r),i&&_.removeEventListener("resize",r)}),m==null||m(),(j=g)==null||j.disconnect(),g=null,d&&cancelAnimationFrame(b)}}const Ase=Jae,kse=Zae,Ose=Kae,Ese=ese,Tse=Yae,TP=Wae,Rse=Qae,Pse=(e,t,r)=>{const a=new Map,s={platform:Sse,...r},i={...s.platform,_c:a};return Gae(e,t,{...s,platform:i})};var Mse=typeof document<"u",Dse=function(){},Tb=Mse?N.useLayoutEffect:Dse;function Zb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,a,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(a=r;a--!==0;)if(!Zb(e[a],t[a]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!{}.hasOwnProperty.call(t,s[a]))return!1;for(a=r;a--!==0;){const i=s[a];if(!(i==="_owner"&&e.$$typeof)&&!Zb(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function jB(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function RP(e,t){const r=jB(e);return Math.round(t*r)/r}function SN(e){const t=N.useRef(e);return Tb(()=>{t.current=e}),t}function Lse(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:a=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:d,open:u}=e,[f,m]=N.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,g]=N.useState(a);Zb(p,a)||g(a);const[b,v]=N.useState(null),[y,j]=N.useState(null),_=N.useCallback(q=>{q!==T.current&&(T.current=q,v(q))},[]),C=N.useCallback(q=>{q!==O.current&&(O.current=q,j(q))},[]),A=i||b,S=o||y,T=N.useRef(null),O=N.useRef(null),R=N.useRef(f),M=d!=null,I=SN(d),D=SN(s),$=SN(u),K=N.useCallback(()=>{if(!T.current||!O.current)return;const q={placement:t,strategy:r,middleware:p};D.current&&(q.platform=D.current),Pse(T.current,O.current,q).then(Y=>{const Q={...Y,isPositioned:$.current!==!1};U.current&&!Zb(R.current,Q)&&(R.current=Q,bg.flushSync(()=>{m(Q)}))})},[p,t,r,D,$]);Tb(()=>{u===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,m(q=>({...q,isPositioned:!1})))},[u]);const U=N.useRef(!1);Tb(()=>(U.current=!0,()=>{U.current=!1}),[]),Tb(()=>{if(A&&(T.current=A),S&&(O.current=S),A&&S){if(I.current)return I.current(A,S,K);K()}},[A,S,K,I,M]);const J=N.useMemo(()=>({reference:T,floating:O,setReference:_,setFloating:C}),[_,C]),V=N.useMemo(()=>({reference:A,floating:S}),[A,S]),G=N.useMemo(()=>{const q={position:r,left:0,top:0};if(!V.floating)return q;const Y=RP(V.floating,f.x),Q=RP(V.floating,f.y);return l?{...q,transform:"translate("+Y+"px, "+Q+"px)",...jB(V.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Y,top:Q}},[r,l,V.floating,f.x,f.y]);return N.useMemo(()=>({...f,update:K,refs:J,elements:V,floatingStyles:G}),[f,K,J,V,G])}const Ise=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:a,padding:s}=typeof e=="function"?e(r):e;return a&&t(a)?a.current!=null?TP({element:a.current,padding:s}).fn(r):{}:a?TP({element:a,padding:s}).fn(r):{}}}},$se=(e,t)=>({...Ase(e),options:[e,t]}),Fse=(e,t)=>({...kse(e),options:[e,t]}),Bse=(e,t)=>({...Rse(e),options:[e,t]}),zse=(e,t)=>({...Ose(e),options:[e,t]}),qse=(e,t)=>({...Ese(e),options:[e,t]}),Use=(e,t)=>({...Tse(e),options:[e,t]}),Vse=(e,t)=>({...Ise(e),options:[e,t]});var Hse="Arrow",wB=N.forwardRef((e,t)=>{const{children:r,width:a=10,height:s=5,...i}=e;return n.jsx(ar.svg,{...i,ref:t,width:a,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});wB.displayName=Hse;var Gse=wB;function _y(e){const[t,r]=N.useState(void 0);return ni(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const d=i.borderBoxSize,u=Array.isArray(d)?d[0]:d;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else r(void 0)},[e]),t}var p3="Popper",[NB,Cf]=ai(p3),[Wse,SB]=NB(p3),CB=e=>{const{__scopePopper:t,children:r}=e,[a,s]=N.useState(null);return n.jsx(Wse,{scope:t,anchor:a,onAnchorChange:s,children:r})};CB.displayName=p3;var _B="PopperAnchor",AB=N.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:a,...s}=e,i=SB(_B,r),o=N.useRef(null),l=br(t,o),d=N.useRef(null);return N.useEffect(()=>{const u=d.current;d.current=(a==null?void 0:a.current)||o.current,u!==d.current&&i.onAnchorChange(d.current)}),a?null:n.jsx(ar.div,{...s,ref:l})});AB.displayName=_B;var g3="PopperContent",[Kse,Yse]=NB(g3),kB=N.forwardRef((e,t)=>{var ce,ge,he,ue,Se,je;const{__scopePopper:r,side:a="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:b,...v}=e,y=SB(g3,r),[j,_]=N.useState(null),C=br(t,Be=>_(Be)),[A,S]=N.useState(null),T=_y(A),O=(T==null?void 0:T.width)??0,R=(T==null?void 0:T.height)??0,M=a+(i!=="center"?"-"+i:""),I=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},D=Array.isArray(u)?u:[u],$=D.length>0,K={padding:I,boundary:D.filter(Jse),altBoundary:$},{refs:U,floatingStyles:J,placement:V,isPositioned:G,middlewareData:q}=Lse({strategy:"fixed",placement:M,whileElementsMounted:(...Be)=>_se(...Be,{animationFrame:g==="always"}),elements:{reference:y.anchor},middleware:[$se({mainAxis:s+R,alignmentAxis:o}),d&&Fse({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Bse():void 0,...K}),d&&zse({...K}),qse({...K,apply:({elements:Be,rects:$e,availableWidth:oe,availableHeight:Xe})=>{const{width:pt,height:Oe}=$e.reference,Ee=Be.floating.style;Ee.setProperty("--radix-popper-available-width",`${oe}px`),Ee.setProperty("--radix-popper-available-height",`${Xe}px`),Ee.setProperty("--radix-popper-anchor-width",`${pt}px`),Ee.setProperty("--radix-popper-anchor-height",`${Oe}px`)}}),A&&Vse({element:A,padding:l}),Zse({arrowWidth:O,arrowHeight:R}),p&&Use({strategy:"referenceHidden",...K})]}),[Y,Q]=TB(V),F=Qs(b);ni(()=>{G&&(F==null||F())},[G,F]);const z=(ce=q.arrow)==null?void 0:ce.x,H=(ge=q.arrow)==null?void 0:ge.y,X=((he=q.arrow)==null?void 0:he.centerOffset)!==0,[ne,ie]=N.useState();return ni(()=>{j&&ie(window.getComputedStyle(j).zIndex)},[j]),n.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:G?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[(ue=q.transformOrigin)==null?void 0:ue.x,(Se=q.transformOrigin)==null?void 0:Se.y].join(" "),...((je=q.hide)==null?void 0:je.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(Kse,{scope:r,placedSide:Y,onArrowChange:S,arrowX:z,arrowY:H,shouldHideArrow:X,children:n.jsx(ar.div,{"data-side":Y,"data-align":Q,...v,ref:C,style:{...v.style,animation:G?void 0:"none"}})})})});kB.displayName=g3;var OB="PopperArrow",Xse={top:"bottom",right:"left",bottom:"top",left:"right"},EB=N.forwardRef(function(t,r){const{__scopePopper:a,...s}=t,i=Yse(OB,a),o=Xse[i.placedSide];return n.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:n.jsx(Gse,{...s,ref:r,style:{...s.style,display:"block"}})})});EB.displayName=OB;function Jse(e){return e!==null}var Zse=e=>({name:"transformOrigin",options:e,fn(t){var y,j,_;const{placement:r,rects:a,middlewareData:s}=t,o=((y=s.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:e.arrowWidth,d=o?0:e.arrowHeight,[u,f]=TB(r),m={start:"0%",center:"50%",end:"100%"}[f],p=(((j=s.arrow)==null?void 0:j.x)??0)+l/2,g=(((_=s.arrow)==null?void 0:_.y)??0)+d/2;let b="",v="";return u==="bottom"?(b=o?m:`${p}px`,v=`${-d}px`):u==="top"?(b=o?m:`${p}px`,v=`${a.floating.height+d}px`):u==="right"?(b=`${-d}px`,v=o?m:`${g}px`):u==="left"&&(b=`${a.floating.width+d}px`,v=o?m:`${g}px`),{data:{x:b,y:v}}}});function TB(e){const[t,r="center"]=e.split("-");return[t,r]}var _j=CB,Ay=AB,Aj=kB,kj=EB,Qse="Portal",Rg=N.forwardRef((e,t)=>{var l;const{container:r,...a}=e,[s,i]=N.useState(!1);ni(()=>i(!0),[]);const o=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?i9.createPortal(n.jsx(ar.div,{...a,ref:t}),o):null});Rg.displayName=Qse;function eie(e,t){return N.useReducer((r,a)=>t[r][a]??r,e)}var Cs=e=>{const{present:t,children:r}=e,a=tie(t),s=typeof r=="function"?r({present:a.isPresent}):N.Children.only(r),i=br(a.ref,rie(s));return typeof r=="function"||a.isPresent?N.cloneElement(s,{ref:i}):null};Cs.displayName="Presence";function tie(e){const[t,r]=N.useState(),a=N.useRef(null),s=N.useRef(e),i=N.useRef("none"),o=e?"mounted":"unmounted",[l,d]=eie(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const u=Z0(a.current);i.current=l==="mounted"?u:"none"},[l]),ni(()=>{const u=a.current,f=s.current;if(f!==e){const p=i.current,g=Z0(u);e?d("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?d("UNMOUNT"):d(f&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,d]),ni(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,m=g=>{const v=Z0(a.current).includes(CSS.escape(g.animationName));if(g.target===t&&v&&(d("ANIMATION_END"),!s.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},p=g=>{g.target===t&&(i.current=Z0(a.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:N.useCallback(u=>{a.current=u?getComputedStyle(u):null,r(u)},[])}}function Z0(e){return(e==null?void 0:e.animationName)||"none"}function rie(e){var a,s;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var nie=Symbol("radix.slottable");function aie(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=nie,t}var sie=Gk[" useInsertionEffect ".trim().toString()]||ni;function Nl({prop:e,defaultProp:t,onChange:r=()=>{},caller:a}){const[s,i,o]=iie({defaultProp:t,onChange:r}),l=e!==void 0,d=l?e:s;{const f=N.useRef(e!==void 0);N.useEffect(()=>{const m=f.current;m!==l&&console.warn(`${a} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,a])}const u=N.useCallback(f=>{var m;if(l){const p=oie(f)?f(e):f;p!==e&&((m=o.current)==null||m.call(o,p))}else i(f)},[l,e,i,o]);return[d,u]}function iie({defaultProp:e,onChange:t}){const[r,a]=N.useState(e),s=N.useRef(r),i=N.useRef(t);return sie(()=>{i.current=t},[t]),N.useEffect(()=>{var o;s.current!==r&&((o=i.current)==null||o.call(i,r),s.current=r)},[r,s]),[r,a,i]}function oie(e){return typeof e=="function"}var RB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),lie="VisuallyHidden",PB=N.forwardRef((e,t)=>n.jsx(ar.span,{...e,ref:t,style:{...RB,...e.style}}));PB.displayName=lie;var cie=PB,[Oj]=ai("Tooltip",[Cf]),Ej=Cf(),MB="TooltipProvider",die=700,TA="tooltip.open",[uie,x3]=Oj(MB),DB=e=>{const{__scopeTooltip:t,delayDuration:r=die,skipDelayDuration:a=300,disableHoverableContent:s=!1,children:i}=e,o=N.useRef(!0),l=N.useRef(!1),d=N.useRef(0);return N.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),n.jsx(uie,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:N.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,a)},[a]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};DB.displayName=MB;var Cv="Tooltip",[fie,ky]=Oj(Cv),LB=e=>{const{__scopeTooltip:t,children:r,open:a,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,d=x3(Cv,e.__scopeTooltip),u=Ej(t),[f,m]=N.useState(null),p=yl(),g=N.useRef(0),b=o??d.disableHoverableContent,v=l??d.delayDuration,y=N.useRef(!1),[j,_]=Nl({prop:a,defaultProp:s??!1,onChange:O=>{O?(d.onOpen(),document.dispatchEvent(new CustomEvent(TA))):d.onClose(),i==null||i(O)},caller:Cv}),C=N.useMemo(()=>j?y.current?"delayed-open":"instant-open":"closed",[j]),A=N.useCallback(()=>{window.clearTimeout(g.current),g.current=0,y.current=!1,_(!0)},[_]),S=N.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_(!1)},[_]),T=N.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{y.current=!0,_(!0),g.current=0},v)},[v,_]);return N.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),n.jsx(_j,{...u,children:n.jsx(fie,{scope:t,contentId:p,open:j,stateAttribute:C,trigger:f,onTriggerChange:m,onTriggerEnter:N.useCallback(()=>{d.isOpenDelayedRef.current?T():A()},[d.isOpenDelayedRef,T,A]),onTriggerLeave:N.useCallback(()=>{b?S():(window.clearTimeout(g.current),g.current=0)},[S,b]),onOpen:A,onClose:S,disableHoverableContent:b,children:r})})};LB.displayName=Cv;var RA="TooltipTrigger",IB=N.forwardRef((e,t)=>{const{__scopeTooltip:r,...a}=e,s=ky(RA,r),i=x3(RA,r),o=Ej(r),l=N.useRef(null),d=br(t,l,s.onTriggerChange),u=N.useRef(!1),f=N.useRef(!1),m=N.useCallback(()=>u.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),n.jsx(Ay,{asChild:!0,...o,children:n.jsx(ar.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...a,ref:d,onPointerMove:yt(e.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:yt(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:yt(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:yt(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:yt(e.onBlur,s.onClose),onClick:yt(e.onClick,s.onClose)})})});IB.displayName=RA;var v3="TooltipPortal",[hie,mie]=Oj(v3,{forceMount:void 0}),$B=e=>{const{__scopeTooltip:t,forceMount:r,children:a,container:s}=e,i=ky(v3,t);return n.jsx(hie,{scope:t,forceMount:r,children:n.jsx(Cs,{present:r||i.open,children:n.jsx(Rg,{asChild:!0,container:s,children:a})})})};$B.displayName=v3;var $p="TooltipContent",FB=N.forwardRef((e,t)=>{const r=mie($p,e.__scopeTooltip),{forceMount:a=r.forceMount,side:s="top",...i}=e,o=ky($p,e.__scopeTooltip);return n.jsx(Cs,{present:a||o.open,children:o.disableHoverableContent?n.jsx(BB,{side:s,...i,ref:t}):n.jsx(pie,{side:s,...i,ref:t})})}),pie=N.forwardRef((e,t)=>{const r=ky($p,e.__scopeTooltip),a=x3($p,e.__scopeTooltip),s=N.useRef(null),i=br(t,s),[o,l]=N.useState(null),{trigger:d,onClose:u}=r,f=s.current,{onPointerInTransitChange:m}=a,p=N.useCallback(()=>{l(null),m(!1)},[m]),g=N.useCallback((b,v)=>{const y=b.currentTarget,j={x:b.clientX,y:b.clientY},_=bie(j,y.getBoundingClientRect()),C=jie(j,_),A=wie(v.getBoundingClientRect()),S=Sie([...C,...A]);l(S),m(!0)},[m]);return N.useEffect(()=>()=>p(),[p]),N.useEffect(()=>{if(d&&f){const b=y=>g(y,f),v=y=>g(y,d);return d.addEventListener("pointerleave",b),f.addEventListener("pointerleave",v),()=>{d.removeEventListener("pointerleave",b),f.removeEventListener("pointerleave",v)}}},[d,f,g,p]),N.useEffect(()=>{if(o){const b=v=>{const y=v.target,j={x:v.clientX,y:v.clientY},_=(d==null?void 0:d.contains(y))||(f==null?void 0:f.contains(y)),C=!Nie(j,o);_?p():C&&(p(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[d,f,o,u,p]),n.jsx(BB,{...e,ref:i})}),[gie,xie]=Oj(Cv,{isInside:!1}),vie=aie("TooltipContent"),BB=N.forwardRef((e,t)=>{const{__scopeTooltip:r,children:a,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,d=ky($p,r),u=Ej(r),{onClose:f}=d;return N.useEffect(()=>(document.addEventListener(TA,f),()=>document.removeEventListener(TA,f)),[f]),N.useEffect(()=>{if(d.trigger){const m=p=>{const g=p.target;g!=null&&g.contains(d.trigger)&&f()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[d.trigger,f]),n.jsx(Og,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:f,children:n.jsxs(Aj,{"data-state":d.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(vie,{children:a}),n.jsx(gie,{scope:r,isInside:!0,children:n.jsx(cie,{id:d.contentId,role:"tooltip",children:s||a})})]})})});FB.displayName=$p;var zB="TooltipArrow",yie=N.forwardRef((e,t)=>{const{__scopeTooltip:r,...a}=e,s=Ej(r);return xie(zB,r).isInside?null:n.jsx(kj,{...s,...a,ref:t})});yie.displayName=zB;function bie(e,t){const r=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,a,s,i)){case i:return"left";case s:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function jie(e,t,r=5){const a=[];switch(t){case"top":a.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":a.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":a.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":a.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return a}function wie(e){const{top:t,right:r,bottom:a,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:a},{x:s,y:a}]}function Nie(e,t){const{x:r,y:a}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],d=t[o],u=l.x,f=l.y,m=d.x,p=d.y;f>a!=p>a&&r<(m-u)*(a-f)/(p-f)+u&&(s=!s)}return s}function Sie(e){const t=e.slice();return t.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),Cie(t)}function Cie(e){if(e.length<=1)return e.slice();const t=[];for(let a=0;a<e.length;a++){const s=e[a];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let a=e.length-1;a>=0;a--){const s=e[a];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var _ie=DB,Aie=LB,kie=IB,Oie=$B,qB=FB;const At=_ie,Ct=Aie,_t=kie,St=N.forwardRef(({className:e,sideOffset:t=4,...r},a)=>n.jsx(Oie,{children:n.jsx(qB,{ref:a,sideOffset:t,className:Ye("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));St.displayName=qB.displayName;function Eie(){const e=Tl(),{tenant:t}=Fr(),{isEnabled:r}=aB(t.tenantId),{user:a,hasPermission:s}=kg(),[i,o]=pe.useState(0),[l,d]=pe.useState(!0),[u,f]=pe.useState(!0),[m,p]=pe.useState(!0),[g,b]=pe.useState(!0);pe.useEffect(()=>{const S=()=>{o(V9(t.tenantId))};S();const T=setInterval(S,3e4);return()=>clearInterval(T)},[t.tenantId]);const v=yh.filter(S=>r(S.key)),y=[{title:"Overview",href:"/retina",icon:n.jsx(Mte,{className:"w-4 h-4"})},{title:"Daily Learning Feed",href:"/retina/learning-feed",icon:n.jsx(qi,{className:"w-4 h-4"}),tooltip:"System-generated insights from the last 24 hours"}],j=v.map(S=>({title:S.name,href:S.path,icon:S.icon})),_=[{title:"Closed Decisions",href:"/retina/modules/i-decide/closed",icon:n.jsx(Pp,{className:"w-4 h-4"}),tooltip:"View and manage all closed decisions."},{title:"Portfolios",href:"/retina/portfolios",icon:n.jsx(Pp,{className:"w-4 h-4"}),tooltip:"Tracks every time decisions are grouped or reorganized."},{title:"Re-evaluation Tags",href:"/retina/revaluation-tags",icon:n.jsx(vv,{className:"w-4 h-4"}),tooltip:"Decisions flagged for re-evaluation due to signal updates.",badge:i>0?i:void 0}],C=[...s("admin")?[{title:"Admin",href:"/retina/admin",icon:n.jsx(Mp,{className:"w-4 h-4"})}]:[],{title:"Settings",href:"/retina/admin/settings",icon:n.jsx(Mp,{className:"w-4 h-4"}),tooltip:"Configure interface level and preferences"},{title:"Audit",href:"/retina/audit",icon:n.jsx(vl,{className:"w-4 h-4"})},{title:"Tenant Demo",href:"/retina/admin/tenant-demo",icon:n.jsx(yv,{className:"w-4 h-4"})},{title:"Users",href:"/retina/admin/users",icon:n.jsx(Uo,{className:"w-4 h-4"})},{title:"Data",href:"/retina/admin/data",icon:n.jsx(t3,{className:"w-4 h-4"})}],A=S=>S==="/retina"?e.pathname===S:e.pathname.startsWith(S);return n.jsxs("aside",{className:"w-64 border-r border-border bg-card flex flex-col h-screen",children:[n.jsx("div",{className:"p-6 border-b border-border",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary flex items-center justify-center",children:n.jsx(Mh,{className:"w-5 h-5 text-primary-foreground"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Retina"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Intelligence Suite"}),a&&n.jsx(be,{variant:"outline",className:"text-xs mt-1",children:a.role})]})]})}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Dashboard"}),n.jsx("div",{className:"space-y-1",children:y.map(S=>{const T=A(S.href),O=n.jsxs(qr,{to:S.href,className:Ye("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",T?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[n.jsx("div",{children:S.icon}),n.jsx("span",{className:"flex-1",children:S.title})]},S.href);return S.tooltip?n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:O}),n.jsx(St,{side:"right",className:"max-w-xs",children:n.jsx("p",{className:"text-sm",children:S.tooltip})})]})},S.href):O})})]}),n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>d(!l),className:"w-full flex items-center justify-between px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider hover:text-foreground transition-colors",children:[n.jsx("span",{children:"Goals & Objectives"}),l?n.jsx(df,{className:"w-3 h-3"}):n.jsx(ti,{className:"w-3 h-3"})]}),l&&n.jsx("div",{className:"space-y-1",children:[{title:"Goals & Objectives",href:"/retina/goals",icon:n.jsx(eu,{className:"w-4 h-4"}),tooltip:"Manage organizational goals with SMART validation"},{title:"Stakeholders",href:"/retina/stakeholders",icon:n.jsx(Uo,{className:"w-4 h-4"}),tooltip:"Manage stakeholders and view goal ownership"},{title:"Goals Map",href:"/retina/goals/map",icon:n.jsx(jy,{className:"w-4 h-4"}),tooltip:"Visualize goal dependencies and relationships"},{title:"Goals Matrix",href:"/retina/goals/matrix",icon:n.jsx(jte,{className:"w-4 h-4"}),tooltip:"View goals ownership matrix"}].map(S=>{const T=A(S.href),O=n.jsxs(qr,{to:S.href,className:Ye("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",T?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[n.jsx("div",{children:S.icon}),n.jsx("span",{className:"flex-1",children:S.title})]},S.href);return S.tooltip?n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:O}),n.jsx(St,{side:"right",className:"max-w-xs",children:n.jsx("p",{className:"text-sm",children:S.tooltip})})]})},S.href):O})})]}),n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>f(!u),className:"w-full flex items-center justify-between px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider hover:text-foreground transition-colors",children:[n.jsx("span",{children:"Modules"}),u?n.jsx(df,{className:"w-3 h-3"}):n.jsx(ti,{className:"w-3 h-3"})]}),u&&n.jsxs("div",{className:"space-y-1",children:[j.map(S=>{const T=A(S.href),O=n.jsxs(qr,{to:S.href,className:Ye("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",T?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[n.jsx("div",{children:S.icon}),n.jsx("span",{className:"flex-1",children:S.title})]},S.href);return S.tooltip?n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:O}),n.jsx(St,{side:"right",className:"max-w-xs",children:n.jsx("p",{className:"text-sm",children:S.tooltip})})]})},S.href):O}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("button",{onClick:()=>p(!m),className:"w-full flex items-center justify-between px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider hover:text-foreground transition-colors rounded-lg hover:bg-accent",children:[n.jsx("span",{children:"i-Decide"}),m?n.jsx(df,{className:"w-3 h-3"}):n.jsx(ti,{className:"w-3 h-3"})]}),m&&n.jsx("div",{className:"space-y-1 mt-1 ml-2",children:_.map(S=>{const T=A(S.href),O=n.jsxs(qr,{to:S.href,className:Ye("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",T?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[n.jsx("div",{children:S.icon}),n.jsx("span",{className:"flex-1",children:S.title}),S.badge!==void 0&&n.jsx(be,{variant:T?"secondary":"destructive",className:"h-5 min-w-5 px-1 text-xs",children:S.badge})]},S.href);return S.tooltip?n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:O}),n.jsx(St,{side:"right",className:"max-w-xs",children:n.jsx("p",{className:"text-sm",children:S.tooltip})})]})},S.href):O})})]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>b(!g),className:"w-full flex items-center justify-between px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider hover:text-foreground transition-colors",children:[n.jsx("span",{children:"Admin"}),g?n.jsx(df,{className:"w-3 h-3"}):n.jsx(ti,{className:"w-3 h-3"})]}),g&&n.jsx("div",{className:"space-y-1",children:C.map(S=>{const T=A(S.href),O=n.jsxs(qr,{to:S.href,className:Ye("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",T?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[n.jsx("div",{children:S.icon}),n.jsx("span",{className:"flex-1",children:S.title})]},S.href);return S.tooltip?n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:O}),n.jsx(St,{side:"right",className:"max-w-xs",children:n.jsx("p",{className:"text-sm",children:S.tooltip})})]})},S.href):O})})]})]}),n.jsx("div",{className:"p-4 border-t border-border",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:n.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"AD"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:(a==null?void 0:a.email)||"Admin User"}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:(a==null?void 0:a.role)||"admin"})]})]}),a&&n.jsx("div",{className:"px-3",children:n.jsx(be,{variant:"outline",className:"text-xs w-full justify-center",children:a.role})})]})})]})}const et=N.forwardRef(({className:e,type:t,...r},a)=>n.jsx("input",{type:t,className:Ye("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...r}));et.displayName="Input";var Tie=Symbol.for("react.lazy"),Qb=Gk[" use ".trim().toString()];function Rie(e){return typeof e=="object"&&e!==null&&"then"in e}function UB(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Tie&&"_payload"in e&&Rie(e._payload)}function Tj(e){const t=Mie(e),r=N.forwardRef((a,s)=>{let{children:i,...o}=a;UB(i)&&typeof Qb=="function"&&(i=Qb(i._payload));const l=N.Children.toArray(i),d=l.find(Lie);if(d){const u=d.props.children,f=l.map(m=>m===d?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:N.isValidElement(u)?N.cloneElement(u,void 0,f):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var Pie=Tj("Slot");function Mie(e){const t=N.forwardRef((r,a)=>{let{children:s,...i}=r;if(UB(s)&&typeof Qb=="function"&&(s=Qb(s._payload)),N.isValidElement(s)){const o=$ie(s),l=Iie(i,s.props);return s.type!==N.Fragment&&(l.ref=a?ud(a,o):o),N.cloneElement(s,l)}return N.Children.count(s)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Die=Symbol("radix.slottable");function Lie(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Die}function Iie(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function $ie(e){var a,s;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const y3=Sy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),le=N.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...s},i)=>{const o=a?Pie:"button";return n.jsx(o,{className:Ye(y3({variant:t,size:r,className:e})),ref:i,...s})});le.displayName="Button";function PP(e){const t=Fie(e),r=N.forwardRef((a,s)=>{const{children:i,...o}=a,l=N.Children.toArray(i),d=l.find(zie);if(d){const u=d.props.children,f=l.map(m=>m===d?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:N.isValidElement(u)?N.cloneElement(u,void 0,f):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function Fie(e){const t=N.forwardRef((r,a)=>{const{children:s,...i}=r;if(N.isValidElement(s)){const o=Uie(s),l=qie(i,s.props);return s.type!==N.Fragment&&(l.ref=a?ud(a,o):o),N.cloneElement(s,l)}return N.Children.count(s)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Bie=Symbol("radix.slottable");function zie(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Bie}function qie(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Uie(e){var a,s;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Rj(e){const t=e+"CollectionProvider",[r,a]=ai(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:y,children:j}=v,_=pe.useRef(null),C=pe.useRef(new Map).current;return n.jsx(s,{scope:y,itemMap:C,collectionRef:_,children:j})};o.displayName=t;const l=e+"CollectionSlot",d=PP(l),u=pe.forwardRef((v,y)=>{const{scope:j,children:_}=v,C=i(l,j),A=br(y,C.collectionRef);return n.jsx(d,{ref:A,children:_})});u.displayName=l;const f=e+"CollectionItemSlot",m="data-radix-collection-item",p=PP(f),g=pe.forwardRef((v,y)=>{const{scope:j,children:_,...C}=v,A=pe.useRef(null),S=br(y,A),T=i(f,j);return pe.useEffect(()=>(T.itemMap.set(A,{ref:A,...C}),()=>void T.itemMap.delete(A))),n.jsx(p,{[m]:"",ref:S,children:_})});g.displayName=f;function b(v){const y=i(e+"CollectionConsumer",v);return pe.useCallback(()=>{const _=y.collectionRef.current;if(!_)return[];const C=Array.from(_.querySelectorAll(`[${m}]`));return Array.from(y.itemMap.values()).sort((T,O)=>C.indexOf(T.ref.current)-C.indexOf(O.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},b,a]}var Vie=N.createContext(void 0);function Jh(e){const t=N.useContext(Vie);return e||t||"ltr"}var CN=0;function Pj(){N.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??MP()),document.body.insertAdjacentElement("beforeend",e[1]??MP()),CN++,()=>{CN===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),CN--}},[])}function MP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var _N="focusScope.autoFocusOnMount",AN="focusScope.autoFocusOnUnmount",DP={bubbles:!1,cancelable:!0},Hie="FocusScope",Oy=N.forwardRef((e,t)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[l,d]=N.useState(null),u=Qs(s),f=Qs(i),m=N.useRef(null),p=br(t,v=>d(v)),g=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(a){let v=function(C){if(g.paused||!l)return;const A=C.target;l.contains(A)?m.current=A:sf(m.current,{select:!0})},y=function(C){if(g.paused||!l)return;const A=C.relatedTarget;A!==null&&(l.contains(A)||sf(m.current,{select:!0}))},j=function(C){if(document.activeElement===document.body)for(const S of C)S.removedNodes.length>0&&sf(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const _=new MutationObserver(j);return l&&_.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),_.disconnect()}}},[a,l,g.paused]),N.useEffect(()=>{if(l){IP.add(g);const v=document.activeElement;if(!l.contains(v)){const j=new CustomEvent(_N,DP);l.addEventListener(_N,u),l.dispatchEvent(j),j.defaultPrevented||(Gie(Jie(VB(l)),{select:!0}),document.activeElement===v&&sf(l))}return()=>{l.removeEventListener(_N,u),setTimeout(()=>{const j=new CustomEvent(AN,DP);l.addEventListener(AN,f),l.dispatchEvent(j),j.defaultPrevented||sf(v??document.body,{select:!0}),l.removeEventListener(AN,f),IP.remove(g)},0)}}},[l,u,f,g]);const b=N.useCallback(v=>{if(!r&&!a||g.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,j=document.activeElement;if(y&&j){const _=v.currentTarget,[C,A]=Wie(_);C&&A?!v.shiftKey&&j===A?(v.preventDefault(),r&&sf(C,{select:!0})):v.shiftKey&&j===C&&(v.preventDefault(),r&&sf(A,{select:!0})):j===_&&v.preventDefault()}},[r,a,g.paused]);return n.jsx(ar.div,{tabIndex:-1,...o,ref:p,onKeyDown:b})});Oy.displayName=Hie;function Gie(e,{select:t=!1}={}){const r=document.activeElement;for(const a of e)if(sf(a,{select:t}),document.activeElement!==r)return}function Wie(e){const t=VB(e),r=LP(t,e),a=LP(t.reverse(),e);return[r,a]}function VB(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const s=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||s?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function LP(e,t){for(const r of e)if(!Kie(r,{upTo:t}))return r}function Kie(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Yie(e){return e instanceof HTMLInputElement&&"select"in e}function sf(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Yie(e)&&t&&e.select()}}var IP=Xie();function Xie(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=$P(e,t),e.unshift(t)},remove(t){var r;e=$P(e,t),(r=e[0])==null||r.resume()}}}function $P(e,t){const r=[...e],a=r.indexOf(t);return a!==-1&&r.splice(a,1),r}function Jie(e){return e.filter(t=>t.tagName!=="A")}var kN="rovingFocusGroup.onEntryFocus",Zie={bubbles:!1,cancelable:!0},Ey="RovingFocusGroup",[PA,HB,Qie]=Rj(Ey),[eoe,Pg]=ai(Ey,[Qie]),[toe,roe]=eoe(Ey),GB=N.forwardRef((e,t)=>n.jsx(PA.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(PA.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(noe,{...e,ref:t})})}));GB.displayName=Ey;var noe=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...m}=e,p=N.useRef(null),g=br(t,p),b=Jh(i),[v,y]=Nl({prop:o,defaultProp:l??null,onChange:d,caller:Ey}),[j,_]=N.useState(!1),C=Qs(u),A=HB(r),S=N.useRef(!1),[T,O]=N.useState(0);return N.useEffect(()=>{const R=p.current;if(R)return R.addEventListener(kN,C),()=>R.removeEventListener(kN,C)},[C]),n.jsx(toe,{scope:r,orientation:a,dir:b,loop:s,currentTabStopId:v,onItemFocus:N.useCallback(R=>y(R),[y]),onItemShiftTab:N.useCallback(()=>_(!0),[]),onFocusableItemAdd:N.useCallback(()=>O(R=>R+1),[]),onFocusableItemRemove:N.useCallback(()=>O(R=>R-1),[]),children:n.jsx(ar.div,{tabIndex:j||T===0?-1:0,"data-orientation":a,...m,ref:g,style:{outline:"none",...e.style},onMouseDown:yt(e.onMouseDown,()=>{S.current=!0}),onFocus:yt(e.onFocus,R=>{const M=!S.current;if(R.target===R.currentTarget&&M&&!j){const I=new CustomEvent(kN,Zie);if(R.currentTarget.dispatchEvent(I),!I.defaultPrevented){const D=A().filter(V=>V.focusable),$=D.find(V=>V.active),K=D.find(V=>V.id===v),J=[$,K,...D].filter(Boolean).map(V=>V.ref.current);YB(J,f)}}S.current=!1}),onBlur:yt(e.onBlur,()=>_(!1))})})}),WB="RovingFocusGroupItem",KB=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:s=!1,tabStopId:i,children:o,...l}=e,d=yl(),u=i||d,f=roe(WB,r),m=f.currentTabStopId===u,p=HB(r),{onFocusableItemAdd:g,onFocusableItemRemove:b,currentTabStopId:v}=f;return N.useEffect(()=>{if(a)return g(),()=>b()},[a,g,b]),n.jsx(PA.ItemSlot,{scope:r,id:u,focusable:a,active:s,children:n.jsx(ar.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:yt(e.onMouseDown,y=>{a?f.onItemFocus(u):y.preventDefault()}),onFocus:yt(e.onFocus,()=>f.onItemFocus(u)),onKeyDown:yt(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){f.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const j=ioe(y,f.orientation,f.dir);if(j!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let C=p().filter(A=>A.focusable).map(A=>A.ref.current);if(j==="last")C.reverse();else if(j==="prev"||j==="next"){j==="prev"&&C.reverse();const A=C.indexOf(y.currentTarget);C=f.loop?ooe(C,A+1):C.slice(A+1)}setTimeout(()=>YB(C))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:v!=null}):o})})});KB.displayName=WB;var aoe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function soe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ioe(e,t,r){const a=soe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return aoe[a]}function YB(e,t=!1){const r=document.activeElement;for(const a of e)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}function ooe(e,t){return e.map((r,a)=>e[(t+a)%e.length])}var b3=GB,j3=KB;function loe(e){const t=coe(e),r=N.forwardRef((a,s)=>{const{children:i,...o}=a,l=N.Children.toArray(i),d=l.find(uoe);if(d){const u=d.props.children,f=l.map(m=>m===d?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:N.isValidElement(u)?N.cloneElement(u,void 0,f):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function coe(e){const t=N.forwardRef((r,a)=>{const{children:s,...i}=r;if(N.isValidElement(s)){const o=hoe(s),l=foe(i,s.props);return s.type!==N.Fragment&&(l.ref=a?ud(a,o):o),N.cloneElement(s,l)}return N.Children.count(s)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var doe=Symbol("radix.slottable");function uoe(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===doe}function foe(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function hoe(e){var a,s;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var moe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Xm=new WeakMap,Q0=new WeakMap,eb={},ON=0,XB=function(e){return e&&(e.host||XB(e.parentNode))},poe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var a=XB(r);return a&&e.contains(a)?a:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},goe=function(e,t,r,a){var s=poe(t,Array.isArray(e)?e:[e]);eb[r]||(eb[r]=new WeakMap);var i=eb[r],o=[],l=new Set,d=new Set(s),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};s.forEach(u);var f=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))f(p);else try{var g=p.getAttribute(a),b=g!==null&&g!=="false",v=(Xm.get(p)||0)+1,y=(i.get(p)||0)+1;Xm.set(p,v),i.set(p,y),o.push(p),v===1&&b&&Q0.set(p,!0),y===1&&p.setAttribute(r,"true"),b||p.setAttribute(a,"true")}catch(j){console.error("aria-hidden: cannot operate on ",p,j)}})};return f(t),l.clear(),ON++,function(){o.forEach(function(m){var p=Xm.get(m)-1,g=i.get(m)-1;Xm.set(m,p),i.set(m,g),p||(Q0.has(m)||m.removeAttribute(a),Q0.delete(m)),g||m.removeAttribute(r)}),ON--,ON||(Xm=new WeakMap,Xm=new WeakMap,Q0=new WeakMap,eb={})}},Mj=function(e,t,r){r===void 0&&(r="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),s=moe(e);return s?(a.push.apply(a,Array.from(s.querySelectorAll("[aria-live], script"))),goe(a,s,r,"aria-hidden")):function(){return null}},Jc=function(){return Jc=Object.assign||function(t){for(var r,a=1,s=arguments.length;a<s;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Jc.apply(this,arguments)};function JB(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r}function xoe(e,t,r){if(r||arguments.length===2)for(var a=0,s=t.length,i;a<s;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}var Rb="right-scroll-bar-position",Pb="width-before-scroll-bar",voe="with-scroll-bars-hidden",yoe="--removed-body-scroll-bar-size";function EN(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function boe(e,t){var r=N.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(a){var s=r.value;s!==a&&(r.value=a,r.callback(a,s))}}}})[0];return r.callback=t,r.facade}var joe=typeof window<"u"?N.useLayoutEffect:N.useEffect,FP=new WeakMap;function woe(e,t){var r=boe(null,function(a){return e.forEach(function(s){return EN(s,a)})});return joe(function(){var a=FP.get(r);if(a){var s=new Set(a),i=new Set(e),o=r.current;s.forEach(function(l){i.has(l)||EN(l,null)}),i.forEach(function(l){s.has(l)||EN(l,o)})}FP.set(r,e)},[e]),r}function Noe(e){return e}function Soe(e,t){t===void 0&&(t=Noe);var r=[],a=!1,s={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,a);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(a=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){a=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var d=function(){var f=o;o=[],f.forEach(i)},u=function(){return Promise.resolve().then(d)};u(),r={push:function(f){o.push(f),u()},filter:function(f){return o=o.filter(f),r}}}};return s}function Coe(e){e===void 0&&(e={});var t=Soe(null);return t.options=Jc({async:!0,ssr:!1},e),t}var ZB=function(e){var t=e.sideCar,r=JB(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return N.createElement(a,Jc({},r))};ZB.isSideCarExport=!0;function _oe(e,t){return e.useMedium(t),ZB}var QB=Coe(),TN=function(){},Dj=N.forwardRef(function(e,t){var r=N.useRef(null),a=N.useState({onScrollCapture:TN,onWheelCapture:TN,onTouchMoveCapture:TN}),s=a[0],i=a[1],o=e.forwardProps,l=e.children,d=e.className,u=e.removeScrollBar,f=e.enabled,m=e.shards,p=e.sideCar,g=e.noRelative,b=e.noIsolation,v=e.inert,y=e.allowPinchZoom,j=e.as,_=j===void 0?"div":j,C=e.gapMode,A=JB(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=p,T=woe([r,t]),O=Jc(Jc({},A),s);return N.createElement(N.Fragment,null,f&&N.createElement(S,{sideCar:QB,removeScrollBar:u,shards:m,noRelative:g,noIsolation:b,inert:v,setCallbacks:i,allowPinchZoom:!!y,lockRef:r,gapMode:C}),o?N.cloneElement(N.Children.only(l),Jc(Jc({},O),{ref:T})):N.createElement(_,Jc({},O,{className:d,ref:T}),l))});Dj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Dj.classNames={fullWidth:Pb,zeroRight:Rb};var Aoe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function koe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Aoe();return t&&e.setAttribute("nonce",t),e}function Ooe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Eoe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Toe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=koe())&&(Ooe(t,r),Eoe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Roe=function(){var e=Toe();return function(t,r){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},ez=function(){var e=Roe(),t=function(r){var a=r.styles,s=r.dynamic;return e(a,s),null};return t},Poe={left:0,top:0,right:0,gap:0},RN=function(e){return parseInt(e||"",10)||0},Moe=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],a=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[RN(r),RN(a),RN(s)]},Doe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Poe;var t=Moe(e),r=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-r+t[2]-t[0])}},Loe=ez(),jp="data-scroll-locked",Ioe=function(e,t,r,a){var s=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(voe,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(l,"px ").concat(a,`;
  }
  body[`).concat(jp,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(a,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Rb,` {
    right: `).concat(l,"px ").concat(a,`;
  }
  
  .`).concat(Pb,` {
    margin-right: `).concat(l,"px ").concat(a,`;
  }
  
  .`).concat(Rb," .").concat(Rb,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(Pb," .").concat(Pb,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(jp,`] {
    `).concat(yoe,": ").concat(l,`px;
  }
`)},BP=function(){var e=parseInt(document.body.getAttribute(jp)||"0",10);return isFinite(e)?e:0},$oe=function(){N.useEffect(function(){return document.body.setAttribute(jp,(BP()+1).toString()),function(){var e=BP()-1;e<=0?document.body.removeAttribute(jp):document.body.setAttribute(jp,e.toString())}},[])},Foe=function(e){var t=e.noRelative,r=e.noImportant,a=e.gapMode,s=a===void 0?"margin":a;$oe();var i=N.useMemo(function(){return Doe(s)},[s]);return N.createElement(Loe,{styles:Ioe(i,!t,s,r?"":"!important")})},MA=!1;if(typeof window<"u")try{var tb=Object.defineProperty({},"passive",{get:function(){return MA=!0,!0}});window.addEventListener("test",tb,tb),window.removeEventListener("test",tb,tb)}catch{MA=!1}var Jm=MA?{passive:!1}:!1,Boe=function(e){return e.tagName==="TEXTAREA"},tz=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Boe(e)&&r[t]==="visible")},zoe=function(e){return tz(e,"overflowY")},qoe=function(e){return tz(e,"overflowX")},zP=function(e,t){var r=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var s=rz(e,a);if(s){var i=nz(e,a),o=i[1],l=i[2];if(o>l)return!0}a=a.parentNode}while(a&&a!==r.body);return!1},Uoe=function(e){var t=e.scrollTop,r=e.scrollHeight,a=e.clientHeight;return[t,r,a]},Voe=function(e){var t=e.scrollLeft,r=e.scrollWidth,a=e.clientWidth;return[t,r,a]},rz=function(e,t){return e==="v"?zoe(t):qoe(t)},nz=function(e,t){return e==="v"?Uoe(t):Voe(t)},Hoe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Goe=function(e,t,r,a,s){var i=Hoe(e,window.getComputedStyle(t).direction),o=i*a,l=r.target,d=t.contains(l),u=!1,f=o>0,m=0,p=0;do{if(!l)break;var g=nz(e,l),b=g[0],v=g[1],y=g[2],j=v-y-i*b;(b||j)&&rz(e,l)&&(m+=j,p+=b);var _=l.parentNode;l=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!d&&l!==document.body||d&&(t.contains(l)||t===l));return(f&&Math.abs(m)<1||!f&&Math.abs(p)<1)&&(u=!0),u},rb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},qP=function(e){return[e.deltaX,e.deltaY]},UP=function(e){return e&&"current"in e?e.current:e},Woe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Koe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Yoe=0,Zm=[];function Xoe(e){var t=N.useRef([]),r=N.useRef([0,0]),a=N.useRef(),s=N.useState(Yoe++)[0],i=N.useState(ez)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var v=xoe([e.lockRef.current],(e.shards||[]).map(UP),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=N.useCallback(function(v,y){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var j=rb(v),_=r.current,C="deltaX"in v?v.deltaX:_[0]-j[0],A="deltaY"in v?v.deltaY:_[1]-j[1],S,T=v.target,O=Math.abs(C)>Math.abs(A)?"h":"v";if("touches"in v&&O==="h"&&T.type==="range")return!1;var R=window.getSelection(),M=R&&R.anchorNode,I=M?M===T||M.contains(T):!1;if(I)return!1;var D=zP(O,T);if(!D)return!0;if(D?S=O:(S=O==="v"?"h":"v",D=zP(O,T)),!D)return!1;if(!a.current&&"changedTouches"in v&&(C||A)&&(a.current=S),!S)return!0;var $=a.current||S;return Goe($,y,v,$==="h"?C:A)},[]),d=N.useCallback(function(v){var y=v;if(!(!Zm.length||Zm[Zm.length-1]!==i)){var j="deltaY"in y?qP(y):rb(y),_=t.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&Woe(S.delta,j)})[0];if(_&&_.should){y.cancelable&&y.preventDefault();return}if(!_){var C=(o.current.shards||[]).map(UP).filter(Boolean).filter(function(S){return S.contains(y.target)}),A=C.length>0?l(y,C[0]):!o.current.noIsolation;A&&y.cancelable&&y.preventDefault()}}},[]),u=N.useCallback(function(v,y,j,_){var C={name:v,delta:y,target:j,should:_,shadowParent:Joe(j)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(A){return A!==C})},1)},[]),f=N.useCallback(function(v){r.current=rb(v),a.current=void 0},[]),m=N.useCallback(function(v){u(v.type,qP(v),v.target,l(v,e.lockRef.current))},[]),p=N.useCallback(function(v){u(v.type,rb(v),v.target,l(v,e.lockRef.current))},[]);N.useEffect(function(){return Zm.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",d,Jm),document.addEventListener("touchmove",d,Jm),document.addEventListener("touchstart",f,Jm),function(){Zm=Zm.filter(function(v){return v!==i}),document.removeEventListener("wheel",d,Jm),document.removeEventListener("touchmove",d,Jm),document.removeEventListener("touchstart",f,Jm)}},[]);var g=e.removeScrollBar,b=e.inert;return N.createElement(N.Fragment,null,b?N.createElement(i,{styles:Koe(s)}):null,g?N.createElement(Foe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Joe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Zoe=_oe(QB,Xoe);var Ty=N.forwardRef(function(e,t){return N.createElement(Dj,Jc({},e,{ref:t,sideCar:Zoe}))});Ty.classNames=Dj.classNames;var DA=["Enter"," "],Qoe=["ArrowDown","PageUp","Home"],az=["ArrowUp","PageDown","End"],ele=[...Qoe,...az],tle={ltr:[...DA,"ArrowRight"],rtl:[...DA,"ArrowLeft"]},rle={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ry="Menu",[_v,nle,ale]=Rj(Ry),[Zh,sz]=ai(Ry,[ale,Cf,Pg]),Lj=Cf(),iz=Pg(),[sle,Qh]=Zh(Ry),[ile,Py]=Zh(Ry),oz=e=>{const{__scopeMenu:t,open:r=!1,children:a,dir:s,onOpenChange:i,modal:o=!0}=e,l=Lj(t),[d,u]=N.useState(null),f=N.useRef(!1),m=Qs(i),p=Jh(s);return N.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),n.jsx(_j,{...l,children:n.jsx(sle,{scope:t,open:r,onOpenChange:m,content:d,onContentChange:u,children:n.jsx(ile,{scope:t,onClose:N.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:p,modal:o,children:a})})})};oz.displayName=Ry;var ole="MenuAnchor",w3=N.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e,s=Lj(r);return n.jsx(Ay,{...s,...a,ref:t})});w3.displayName=ole;var N3="MenuPortal",[lle,lz]=Zh(N3,{forceMount:void 0}),cz=e=>{const{__scopeMenu:t,forceMount:r,children:a,container:s}=e,i=Qh(N3,t);return n.jsx(lle,{scope:t,forceMount:r,children:n.jsx(Cs,{present:r||i.open,children:n.jsx(Rg,{asChild:!0,container:s,children:a})})})};cz.displayName=N3;var bl="MenuContent",[cle,S3]=Zh(bl),dz=N.forwardRef((e,t)=>{const r=lz(bl,e.__scopeMenu),{forceMount:a=r.forceMount,...s}=e,i=Qh(bl,e.__scopeMenu),o=Py(bl,e.__scopeMenu);return n.jsx(_v.Provider,{scope:e.__scopeMenu,children:n.jsx(Cs,{present:a||i.open,children:n.jsx(_v.Slot,{scope:e.__scopeMenu,children:o.modal?n.jsx(dle,{...s,ref:t}):n.jsx(ule,{...s,ref:t})})})})}),dle=N.forwardRef((e,t)=>{const r=Qh(bl,e.__scopeMenu),a=N.useRef(null),s=br(t,a);return N.useEffect(()=>{const i=a.current;if(i)return Mj(i)},[]),n.jsx(C3,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:yt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),ule=N.forwardRef((e,t)=>{const r=Qh(bl,e.__scopeMenu);return n.jsx(C3,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),fle=loe("MenuContent.ScrollLock"),C3=N.forwardRef((e,t)=>{const{__scopeMenu:r,loop:a=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:p,onDismiss:g,disableOutsideScroll:b,...v}=e,y=Qh(bl,r),j=Py(bl,r),_=Lj(r),C=iz(r),A=nle(r),[S,T]=N.useState(null),O=N.useRef(null),R=br(t,O,y.onContentChange),M=N.useRef(0),I=N.useRef(""),D=N.useRef(0),$=N.useRef(null),K=N.useRef("right"),U=N.useRef(0),J=b?Ty:N.Fragment,V=b?{as:fle,allowPinchZoom:!0}:void 0,G=Y=>{var ce,ge;const Q=I.current+Y,F=A().filter(he=>!he.disabled),z=document.activeElement,H=(ce=F.find(he=>he.ref.current===z))==null?void 0:ce.textValue,X=F.map(he=>he.textValue),ne=Sle(X,Q,H),ie=(ge=F.find(he=>he.textValue===ne))==null?void 0:ge.ref.current;(function he(ue){I.current=ue,window.clearTimeout(M.current),ue!==""&&(M.current=window.setTimeout(()=>he(""),1e3))})(Q),ie&&setTimeout(()=>ie.focus())};N.useEffect(()=>()=>window.clearTimeout(M.current),[]),Pj();const q=N.useCallback(Y=>{var F,z;return K.current===((F=$.current)==null?void 0:F.side)&&_le(Y,(z=$.current)==null?void 0:z.area)},[]);return n.jsx(cle,{scope:r,searchRef:I,onItemEnter:N.useCallback(Y=>{q(Y)&&Y.preventDefault()},[q]),onItemLeave:N.useCallback(Y=>{var Q;q(Y)||((Q=O.current)==null||Q.focus(),T(null))},[q]),onTriggerLeave:N.useCallback(Y=>{q(Y)&&Y.preventDefault()},[q]),pointerGraceTimerRef:D,onPointerGraceIntentChange:N.useCallback(Y=>{$.current=Y},[]),children:n.jsx(J,{...V,children:n.jsx(Oy,{asChild:!0,trapped:s,onMountAutoFocus:yt(i,Y=>{var Q;Y.preventDefault(),(Q=O.current)==null||Q.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:n.jsx(Og,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:p,onDismiss:g,children:n.jsx(b3,{asChild:!0,...C,dir:j.dir,orientation:"vertical",loop:a,currentTabStopId:S,onCurrentTabStopIdChange:T,onEntryFocus:yt(d,Y=>{j.isUsingKeyboardRef.current||Y.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(Aj,{role:"menu","aria-orientation":"vertical","data-state":_z(y.open),"data-radix-menu-content":"",dir:j.dir,..._,...v,ref:R,style:{outline:"none",...v.style},onKeyDown:yt(v.onKeyDown,Y=>{const F=Y.target.closest("[data-radix-menu-content]")===Y.currentTarget,z=Y.ctrlKey||Y.altKey||Y.metaKey,H=Y.key.length===1;F&&(Y.key==="Tab"&&Y.preventDefault(),!z&&H&&G(Y.key));const X=O.current;if(Y.target!==X||!ele.includes(Y.key))return;Y.preventDefault();const ie=A().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);az.includes(Y.key)&&ie.reverse(),wle(ie)}),onBlur:yt(e.onBlur,Y=>{Y.currentTarget.contains(Y.target)||(window.clearTimeout(M.current),I.current="")}),onPointerMove:yt(e.onPointerMove,Av(Y=>{const Q=Y.target,F=U.current!==Y.clientX;if(Y.currentTarget.contains(Q)&&F){const z=Y.clientX>U.current?"right":"left";K.current=z,U.current=Y.clientX}}))})})})})})})});dz.displayName=bl;var hle="MenuGroup",_3=N.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e;return n.jsx(ar.div,{role:"group",...a,ref:t})});_3.displayName=hle;var mle="MenuLabel",uz=N.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e;return n.jsx(ar.div,{...a,ref:t})});uz.displayName=mle;var e1="MenuItem",VP="menu.itemSelect",Ij=N.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:a,...s}=e,i=N.useRef(null),o=Py(e1,e.__scopeMenu),l=S3(e1,e.__scopeMenu),d=br(t,i),u=N.useRef(!1),f=()=>{const m=i.current;if(!r&&m){const p=new CustomEvent(VP,{bubbles:!0,cancelable:!0});m.addEventListener(VP,g=>a==null?void 0:a(g),{once:!0}),lB(m,p),p.defaultPrevented?u.current=!1:o.onClose()}};return n.jsx(fz,{...s,ref:d,disabled:r,onClick:yt(e.onClick,f),onPointerDown:m=>{var p;(p=e.onPointerDown)==null||p.call(e,m),u.current=!0},onPointerUp:yt(e.onPointerUp,m=>{var p;u.current||(p=m.currentTarget)==null||p.click()}),onKeyDown:yt(e.onKeyDown,m=>{const p=l.searchRef.current!=="";r||p&&m.key===" "||DA.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Ij.displayName=e1;var fz=N.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:a=!1,textValue:s,...i}=e,o=S3(e1,r),l=iz(r),d=N.useRef(null),u=br(t,d),[f,m]=N.useState(!1),[p,g]=N.useState("");return N.useEffect(()=>{const b=d.current;b&&g((b.textContent??"").trim())},[i.children]),n.jsx(_v.ItemSlot,{scope:r,disabled:a,textValue:s??p,children:n.jsx(j3,{asChild:!0,...l,focusable:!a,children:n.jsx(ar.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...i,ref:u,onPointerMove:yt(e.onPointerMove,Av(b=>{a?o.onItemLeave(b):(o.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:yt(e.onPointerLeave,Av(b=>o.onItemLeave(b))),onFocus:yt(e.onFocus,()=>m(!0)),onBlur:yt(e.onBlur,()=>m(!1))})})})}),ple="MenuCheckboxItem",hz=N.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:a,...s}=e;return n.jsx(vz,{scope:e.__scopeMenu,checked:r,children:n.jsx(Ij,{role:"menuitemcheckbox","aria-checked":t1(r)?"mixed":r,...s,ref:t,"data-state":k3(r),onSelect:yt(s.onSelect,()=>a==null?void 0:a(t1(r)?!0:!r),{checkForDefaultPrevented:!1})})})});hz.displayName=ple;var mz="MenuRadioGroup",[gle,xle]=Zh(mz,{value:void 0,onValueChange:()=>{}}),pz=N.forwardRef((e,t)=>{const{value:r,onValueChange:a,...s}=e,i=Qs(a);return n.jsx(gle,{scope:e.__scopeMenu,value:r,onValueChange:i,children:n.jsx(_3,{...s,ref:t})})});pz.displayName=mz;var gz="MenuRadioItem",xz=N.forwardRef((e,t)=>{const{value:r,...a}=e,s=xle(gz,e.__scopeMenu),i=r===s.value;return n.jsx(vz,{scope:e.__scopeMenu,checked:i,children:n.jsx(Ij,{role:"menuitemradio","aria-checked":i,...a,ref:t,"data-state":k3(i),onSelect:yt(a.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,r)},{checkForDefaultPrevented:!1})})})});xz.displayName=gz;var A3="MenuItemIndicator",[vz,vle]=Zh(A3,{checked:!1}),yz=N.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:a,...s}=e,i=vle(A3,r);return n.jsx(Cs,{present:a||t1(i.checked)||i.checked===!0,children:n.jsx(ar.span,{...s,ref:t,"data-state":k3(i.checked)})})});yz.displayName=A3;var yle="MenuSeparator",bz=N.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e;return n.jsx(ar.div,{role:"separator","aria-orientation":"horizontal",...a,ref:t})});bz.displayName=yle;var ble="MenuArrow",jz=N.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e,s=Lj(r);return n.jsx(kj,{...s,...a,ref:t})});jz.displayName=ble;var jle="MenuSub",[cMe,wz]=Zh(jle),Xx="MenuSubTrigger",Nz=N.forwardRef((e,t)=>{const r=Qh(Xx,e.__scopeMenu),a=Py(Xx,e.__scopeMenu),s=wz(Xx,e.__scopeMenu),i=S3(Xx,e.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=i,u={__scopeMenu:e.__scopeMenu},f=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>f,[f]),N.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),d(null)}},[l,d]),n.jsx(w3,{asChild:!0,...u,children:n.jsx(fz,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":_z(r.open),...e,ref:ud(t,s.onTriggerChange),onClick:m=>{var p;(p=e.onClick)==null||p.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:yt(e.onPointerMove,Av(m=>{i.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),f()},100))})),onPointerLeave:yt(e.onPointerLeave,Av(m=>{var g,b;f();const p=(g=r.content)==null?void 0:g.getBoundingClientRect();if(p){const v=(b=r.content)==null?void 0:b.dataset.side,y=v==="right",j=y?-5:5,_=p[y?"left":"right"],C=p[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+j,y:m.clientY},{x:_,y:p.top},{x:C,y:p.top},{x:C,y:p.bottom},{x:_,y:p.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:yt(e.onKeyDown,m=>{var g;const p=i.searchRef.current!=="";e.disabled||p&&m.key===" "||tle[a.dir].includes(m.key)&&(r.onOpenChange(!0),(g=r.content)==null||g.focus(),m.preventDefault())})})})});Nz.displayName=Xx;var Sz="MenuSubContent",Cz=N.forwardRef((e,t)=>{const r=lz(bl,e.__scopeMenu),{forceMount:a=r.forceMount,...s}=e,i=Qh(bl,e.__scopeMenu),o=Py(bl,e.__scopeMenu),l=wz(Sz,e.__scopeMenu),d=N.useRef(null),u=br(t,d);return n.jsx(_v.Provider,{scope:e.__scopeMenu,children:n.jsx(Cs,{present:a||i.open,children:n.jsx(_v.Slot,{scope:e.__scopeMenu,children:n.jsx(C3,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var m;o.isUsingKeyboardRef.current&&((m=d.current)==null||m.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:yt(e.onFocusOutside,f=>{f.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:yt(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:yt(e.onKeyDown,f=>{var g;const m=f.currentTarget.contains(f.target),p=rle[o.dir].includes(f.key);m&&p&&(i.onOpenChange(!1),(g=l.trigger)==null||g.focus(),f.preventDefault())})})})})})});Cz.displayName=Sz;function _z(e){return e?"open":"closed"}function t1(e){return e==="indeterminate"}function k3(e){return t1(e)?"indeterminate":e?"checked":"unchecked"}function wle(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function Nle(e,t){return e.map((r,a)=>e[(t+a)%e.length])}function Sle(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=Nle(e,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const d=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return d!==r?d:void 0}function Cle(e,t){const{x:r,y:a}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],d=t[o],u=l.x,f=l.y,m=d.x,p=d.y;f>a!=p>a&&r<(m-u)*(a-f)/(p-f)+u&&(s=!s)}return s}function _le(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return Cle(r,t)}function Av(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Ale=oz,kle=w3,Ole=cz,Ele=dz,Tle=_3,Rle=uz,Ple=Ij,Mle=hz,Dle=pz,Lle=xz,Ile=yz,$le=bz,Fle=jz,Ble=Nz,zle=Cz,$j="DropdownMenu",[qle]=ai($j,[sz]),Hi=sz(),[Ule,Az]=qle($j),kz=e=>{const{__scopeDropdownMenu:t,children:r,dir:a,open:s,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,d=Hi(t),u=N.useRef(null),[f,m]=Nl({prop:s,defaultProp:i??!1,onChange:o,caller:$j});return n.jsx(Ule,{scope:t,triggerId:yl(),triggerRef:u,contentId:yl(),open:f,onOpenChange:m,onOpenToggle:N.useCallback(()=>m(p=>!p),[m]),modal:l,children:n.jsx(Ale,{...d,open:f,onOpenChange:m,dir:a,modal:l,children:r})})};kz.displayName=$j;var Oz="DropdownMenuTrigger",Ez=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:a=!1,...s}=e,i=Az(Oz,r),o=Hi(r);return n.jsx(kle,{asChild:!0,...o,children:n.jsx(ar.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...s,ref:ud(t,i.triggerRef),onPointerDown:yt(e.onPointerDown,l=>{!a&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:yt(e.onKeyDown,l=>{a||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Ez.displayName=Oz;var Vle="DropdownMenuPortal",Tz=e=>{const{__scopeDropdownMenu:t,...r}=e,a=Hi(t);return n.jsx(Ole,{...a,...r})};Tz.displayName=Vle;var Rz="DropdownMenuContent",Pz=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=Az(Rz,r),i=Hi(r),o=N.useRef(!1);return n.jsx(Ele,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...a,ref:t,onCloseAutoFocus:yt(e.onCloseAutoFocus,l=>{var d;o.current||(d=s.triggerRef.current)==null||d.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:yt(e.onInteractOutside,l=>{const d=l.detail.originalEvent,u=d.button===0&&d.ctrlKey===!0,f=d.button===2||u;(!s.modal||f)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Pz.displayName=Rz;var Hle="DropdownMenuGroup",Gle=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=Hi(r);return n.jsx(Tle,{...s,...a,ref:t})});Gle.displayName=Hle;var Wle="DropdownMenuLabel",Mz=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=Hi(r);return n.jsx(Rle,{...s,...a,ref:t})});Mz.displayName=Wle;var Kle="DropdownMenuItem",Dz=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=Hi(r);return n.jsx(Ple,{...s,...a,ref:t})});Dz.displayName=Kle;var Yle="DropdownMenuCheckboxItem",Lz=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=Hi(r);return n.jsx(Mle,{...s,...a,ref:t})});Lz.displayName=Yle;var Xle="DropdownMenuRadioGroup",Jle=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=Hi(r);return n.jsx(Dle,{...s,...a,ref:t})});Jle.displayName=Xle;var Zle="DropdownMenuRadioItem",Iz=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=Hi(r);return n.jsx(Lle,{...s,...a,ref:t})});Iz.displayName=Zle;var Qle="DropdownMenuItemIndicator",$z=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=Hi(r);return n.jsx(Ile,{...s,...a,ref:t})});$z.displayName=Qle;var ece="DropdownMenuSeparator",Fz=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=Hi(r);return n.jsx($le,{...s,...a,ref:t})});Fz.displayName=ece;var tce="DropdownMenuArrow",rce=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=Hi(r);return n.jsx(Fle,{...s,...a,ref:t})});rce.displayName=tce;var nce="DropdownMenuSubTrigger",Bz=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=Hi(r);return n.jsx(Ble,{...s,...a,ref:t})});Bz.displayName=nce;var ace="DropdownMenuSubContent",zz=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=Hi(r);return n.jsx(zle,{...s,...a,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zz.displayName=ace;var sce=kz,ice=Ez,oce=Tz,qz=Pz,Uz=Mz,Vz=Dz,Hz=Lz,Gz=Iz,Wz=$z,Kz=Fz,Yz=Bz,Xz=zz;const Fp=sce,Bp=ice,lce=N.forwardRef(({className:e,inset:t,children:r,...a},s)=>n.jsxs(Yz,{ref:s,className:Ye("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...a,children:[r,n.jsx(ti,{className:"ml-auto"})]}));lce.displayName=Yz.displayName;const cce=N.forwardRef(({className:e,...t},r)=>n.jsx(Xz,{ref:r,className:Ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));cce.displayName=Xz.displayName;const Lh=N.forwardRef(({className:e,sideOffset:t=4,...r},a)=>n.jsx(oce,{children:n.jsx(qz,{ref:a,sideOffset:t,className:Ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Lh.displayName=qz.displayName;const gc=N.forwardRef(({className:e,inset:t,...r},a)=>n.jsx(Vz,{ref:a,className:Ye("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",e),...r}));gc.displayName=Vz.displayName;const dce=N.forwardRef(({className:e,children:t,checked:r,...a},s)=>n.jsxs(Hz,{ref:s,className:Ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...a,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(Wz,{children:n.jsx(su,{className:"h-4 w-4"})})}),t]}));dce.displayName=Hz.displayName;const uce=N.forwardRef(({className:e,children:t,...r},a)=>n.jsxs(Gz,{ref:a,className:Ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(Wz,{children:n.jsx(P9,{className:"h-2 w-2 fill-current"})})}),t]}));uce.displayName=Gz.displayName;const fce=N.forwardRef(({className:e,inset:t,...r},a)=>n.jsx(Uz,{ref:a,className:Ye("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));fce.displayName=Uz.displayName;const hce=N.forwardRef(({className:e,...t},r)=>n.jsx(Kz,{ref:r,className:Ye("-mx-1 my-1 h-px bg-muted",e),...t}));hce.displayName=Kz.displayName;const kv={red:.05,amber:.1},bh={mode:"CARA",a:5e-6,scale:1e5,useForRecommendation:!1},Ov={insuranceRate:.01,contingencyOnCap:.15},r1=12,n1={enabled:!0},a1={level:"auto"},HP={CARA:"Constant Absolute Risk Aversion - U(x) = 1 - exp(-ax/scale)",CRRA:"Constant Relative Risk Aversion - U(x) = (x^(1-))/(1-) where =a",Exponential:"Exponential Utility - U(x) = -exp(-ax/scale)",Quadratic:"Quadratic Utility - U(x) = x - (a/2)x",Power:"Power Utility - U(x) = x^ where =1-a"},mce={raroc:kv,utility:bh,tcor:Ov,horizonMonths:r1,plainLanguage:n1,interfaceLevel:a1};function lu(e){return`retina:settings:${e}`}function Sl(e){var t,r,a,s,i,o,l,d,u,f;try{const m=localStorage.getItem(lu(e));if(m){const p=JSON.parse(m);return{raroc:{red:((t=p.raroc)==null?void 0:t.red)??kv.red,amber:((r=p.raroc)==null?void 0:r.amber)??kv.amber},utility:{mode:((a=p.utility)==null?void 0:a.mode)??bh.mode,a:((s=p.utility)==null?void 0:s.a)??bh.a,scale:((i=p.utility)==null?void 0:i.scale)??bh.scale,useForRecommendation:((o=p.utility)==null?void 0:o.useForRecommendation)??bh.useForRecommendation},tcor:{insuranceRate:((l=p.tcor)==null?void 0:l.insuranceRate)??Ov.insuranceRate,contingencyOnCap:((d=p.tcor)==null?void 0:d.contingencyOnCap)??Ov.contingencyOnCap},horizonMonths:p.horizonMonths??r1,plainLanguage:{enabled:((u=p.plainLanguage)==null?void 0:u.enabled)??n1.enabled},interfaceLevel:{level:((f=p.interfaceLevel)==null?void 0:f.level)??a1.level}}}}catch(m){console.error("Error loading tenant settings:",m)}return mce}function Mg(e,t){try{localStorage.setItem(lu(e),JSON.stringify(t)),window.dispatchEvent(new CustomEvent("tenant-settings-changed",{detail:{tenantId:e,settings:t}})),window.dispatchEvent(new StorageEvent("storage",{key:lu(e),newValue:JSON.stringify(t)}))}catch(r){console.error("Error saving tenant settings:",r)}}function Jz(e){const[t,r]=N.useState(()=>Sl(e).raroc);return N.useEffect(()=>{const s=o=>{if(o.key===lu(e)&&o.newValue)try{const l=JSON.parse(o.newValue);r(l.raroc??kv)}catch(l){console.error("Error parsing settings update:",l)}},i=o=>{o.detail.tenantId===e&&r(o.detail.settings.raroc??kv)};return window.addEventListener("storage",s),window.addEventListener("tenant-settings-changed",i),()=>{window.removeEventListener("storage",s),window.removeEventListener("tenant-settings-changed",i)}},[e]),{thresholds:t,updateThresholds:s=>{const i=Sl(e);i.raroc=s,Mg(e,i),r(s)}}}function Zz(e){const[t,r]=N.useState(()=>Sl(e).tcor);return N.useEffect(()=>{const s=o=>{if(o.key===lu(e)&&o.newValue)try{const l=JSON.parse(o.newValue);r(l.tcor??Ov)}catch(l){console.error("Error parsing settings update:",l)}},i=o=>{o.detail.tenantId===e&&r(o.detail.settings.tcor??Ov)};return window.addEventListener("storage",s),window.addEventListener("tenant-settings-changed",i),()=>{window.removeEventListener("storage",s),window.removeEventListener("tenant-settings-changed",i)}},[e]),{settings:t,updateTCORSettings:s=>{const i=Sl(e);i.tcor=s,Mg(e,i),r(s)}}}function rv(e,t){return e<t.red?"bg-red-500 text-white hover:bg-red-600":e<t.amber?"bg-amber-500 text-white hover:bg-amber-600":"bg-green-500 text-white hover:bg-green-600"}function pce(e){const[t,r]=N.useState(()=>Sl(e).horizonMonths);return N.useEffect(()=>{const s=o=>{if(o.key===lu(e)&&o.newValue)try{const l=JSON.parse(o.newValue);r(l.horizonMonths??r1)}catch(l){console.error("Error parsing settings update:",l)}},i=o=>{o.detail.tenantId===e&&r(o.detail.settings.horizonMonths??r1)};return window.addEventListener("storage",s),window.addEventListener("tenant-settings-changed",i),()=>{window.removeEventListener("storage",s),window.removeEventListener("tenant-settings-changed",i)}},[e]),{horizonMonths:t,updateHorizonMonths:s=>{const i=Sl(e);i.horizonMonths=s,Mg(e,i),r(s)}}}function Qz(e){const[t,r]=N.useState(()=>Sl(e).utility);return N.useEffect(()=>{const s=o=>{if(o.key===lu(e)&&o.newValue)try{const l=JSON.parse(o.newValue);r(l.utility??bh)}catch(l){console.error("Error parsing settings update:",l)}},i=o=>{o.detail.tenantId===e&&r(o.detail.settings.utility??bh)};return window.addEventListener("storage",s),window.addEventListener("tenant-settings-changed",i),()=>{window.removeEventListener("storage",s),window.removeEventListener("tenant-settings-changed",i)}},[e]),{settings:t,updateUtilitySettings:s=>{const i=Sl(e);i.utility=s,Mg(e,i),r(s)}}}function Fj(e){const[t,r]=N.useState(()=>Sl(e).plainLanguage.enabled);return N.useEffect(()=>{const s=o=>{var l;if(o.key===lu(e)&&o.newValue)try{const d=JSON.parse(o.newValue);r(((l=d.plainLanguage)==null?void 0:l.enabled)??n1.enabled)}catch(d){console.error("Error parsing settings update:",d)}},i=o=>{var l;o.detail.tenantId===e&&r(((l=o.detail.settings.plainLanguage)==null?void 0:l.enabled)??n1.enabled)};return window.addEventListener("storage",s),window.addEventListener("tenant-settings-changed",i),()=>{window.removeEventListener("storage",s),window.removeEventListener("tenant-settings-changed",i)}},[e]),{enabled:t,setEnabled:s=>{const i=Sl(e);i.plainLanguage.enabled=s,Mg(e,i),r(s)}}}function gce(e){const[t,r]=N.useState(()=>Sl(e).interfaceLevel.level);return N.useEffect(()=>{const s=o=>{var l;if(o.key===lu(e)&&o.newValue)try{const d=JSON.parse(o.newValue);r(((l=d.interfaceLevel)==null?void 0:l.level)??a1.level)}catch(d){console.error("Error parsing settings update:",d)}},i=o=>{var l;o.detail.tenantId===e&&r(((l=o.detail.settings.interfaceLevel)==null?void 0:l.level)??a1.level)};return window.addEventListener("storage",s),window.addEventListener("tenant-settings-changed",i),()=>{window.removeEventListener("storage",s),window.removeEventListener("tenant-settings-changed",i)}},[e]),{level:t,setInterfaceLevel:s=>{const i=Sl(e);i.interfaceLevel.level=s,Mg(e,i),r(s)}}}function My(e){const t=N.useRef({value:e,previous:e});return N.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Bj="Switch",[xce]=ai(Bj),[vce,yce]=xce(Bj),eq=N.forwardRef((e,t)=>{const{__scopeSwitch:r,name:a,checked:s,defaultChecked:i,required:o,disabled:l,value:d="on",onCheckedChange:u,form:f,...m}=e,[p,g]=N.useState(null),b=br(t,C=>g(C)),v=N.useRef(!1),y=p?f||!!p.closest("form"):!0,[j,_]=Nl({prop:s,defaultProp:i??!1,onChange:u,caller:Bj});return n.jsxs(vce,{scope:r,checked:j,disabled:l,children:[n.jsx(ar.button,{type:"button",role:"switch","aria-checked":j,"aria-required":o,"data-state":aq(j),"data-disabled":l?"":void 0,disabled:l,value:d,...m,ref:b,onClick:yt(e.onClick,C=>{_(A=>!A),y&&(v.current=C.isPropagationStopped(),v.current||C.stopPropagation())})}),y&&n.jsx(nq,{control:p,bubbles:!v.current,name:a,value:d,checked:j,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});eq.displayName=Bj;var tq="SwitchThumb",rq=N.forwardRef((e,t)=>{const{__scopeSwitch:r,...a}=e,s=yce(tq,r);return n.jsx(ar.span,{"data-state":aq(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t})});rq.displayName=tq;var bce="SwitchBubbleInput",nq=N.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:a=!0,...s},i)=>{const o=N.useRef(null),l=br(o,i),d=My(r),u=_y(t);return N.useEffect(()=>{const f=o.current;if(!f)return;const m=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==r&&g){const b=new Event("click",{bubbles:a});g.call(f,r),f.dispatchEvent(b)}},[d,r,a]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});nq.displayName=bce;function aq(e){return e?"checked":"unchecked"}var sq=eq,jce=rq;const Pa=N.forwardRef(({className:e,...t},r)=>n.jsx(sq,{className:Ye("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:n.jsx(jce,{className:Ye("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Pa.displayName=sq.displayName;var wce=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Nce=wce.reduce((e,t)=>{const r=Tj(`Primitive.${t}`),a=N.forwardRef((s,i)=>{const{asChild:o,...l}=s,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(d,{...l,ref:i})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),Sce="Label",iq=N.forwardRef((e,t)=>n.jsx(Nce.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));iq.displayName=Sce;var oq=iq;const Cce=Sy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ne=N.forwardRef(({className:e,...t},r)=>n.jsx(oq,{ref:r,className:Ye(Cce(),e),...t}));Ne.displayName=oq.displayName;function _ce(e){const t=Ace(e),r=N.forwardRef((a,s)=>{const{children:i,...o}=a,l=N.Children.toArray(i),d=l.find(Oce);if(d){const u=d.props.children,f=l.map(m=>m===d?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:N.isValidElement(u)?N.cloneElement(u,void 0,f):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function Ace(e){const t=N.forwardRef((r,a)=>{const{children:s,...i}=r;if(N.isValidElement(s)){const o=Tce(s),l=Ece(i,s.props);return s.type!==N.Fragment&&(l.ref=a?ud(a,o):o),N.cloneElement(s,l)}return N.Children.count(s)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var kce=Symbol("radix.slottable");function Oce(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===kce}function Ece(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Tce(e){var a,s;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var zj="Popover",[lq]=ai(zj,[Cf]),Dy=Cf(),[Rce,_f]=lq(zj),cq=e=>{const{__scopePopover:t,children:r,open:a,defaultOpen:s,onOpenChange:i,modal:o=!1}=e,l=Dy(t),d=N.useRef(null),[u,f]=N.useState(!1),[m,p]=Nl({prop:a,defaultProp:s??!1,onChange:i,caller:zj});return n.jsx(_j,{...l,children:n.jsx(Rce,{scope:t,contentId:yl(),triggerRef:d,open:m,onOpenChange:p,onOpenToggle:N.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:u,onCustomAnchorAdd:N.useCallback(()=>f(!0),[]),onCustomAnchorRemove:N.useCallback(()=>f(!1),[]),modal:o,children:r})})};cq.displayName=zj;var dq="PopoverAnchor",Pce=N.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,s=_f(dq,r),i=Dy(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return N.useEffect(()=>(o(),()=>l()),[o,l]),n.jsx(Ay,{...i,...a,ref:t})});Pce.displayName=dq;var uq="PopoverTrigger",fq=N.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,s=_f(uq,r),i=Dy(r),o=br(t,s.triggerRef),l=n.jsx(ar.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":xq(s.open),...a,ref:o,onClick:yt(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:n.jsx(Ay,{asChild:!0,...i,children:l})});fq.displayName=uq;var O3="PopoverPortal",[Mce,Dce]=lq(O3,{forceMount:void 0}),hq=e=>{const{__scopePopover:t,forceMount:r,children:a,container:s}=e,i=_f(O3,t);return n.jsx(Mce,{scope:t,forceMount:r,children:n.jsx(Cs,{present:r||i.open,children:n.jsx(Rg,{asChild:!0,container:s,children:a})})})};hq.displayName=O3;var zp="PopoverContent",mq=N.forwardRef((e,t)=>{const r=Dce(zp,e.__scopePopover),{forceMount:a=r.forceMount,...s}=e,i=_f(zp,e.__scopePopover);return n.jsx(Cs,{present:a||i.open,children:i.modal?n.jsx(Ice,{...s,ref:t}):n.jsx($ce,{...s,ref:t})})});mq.displayName=zp;var Lce=_ce("PopoverContent.RemoveScroll"),Ice=N.forwardRef((e,t)=>{const r=_f(zp,e.__scopePopover),a=N.useRef(null),s=br(t,a),i=N.useRef(!1);return N.useEffect(()=>{const o=a.current;if(o)return Mj(o)},[]),n.jsx(Ty,{as:Lce,allowPinchZoom:!0,children:n.jsx(pq,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:yt(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:yt(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,u=l.button===2||d;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:yt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),$ce=N.forwardRef((e,t)=>{const r=_f(zp,e.__scopePopover),a=N.useRef(!1),s=N.useRef(!1);return n.jsx(pq,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(a.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:i=>{var d,u;(d=e.onInteractOutside)==null||d.call(e,i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),pq=N.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:f,...m}=e,p=_f(zp,r),g=Dy(r);return Pj(),n.jsx(Oy,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:i,children:n.jsx(Og,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:n.jsx(Aj,{"data-state":xq(p.open),role:"dialog",id:p.contentId,...g,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),gq="PopoverClose",Fce=N.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,s=_f(gq,r);return n.jsx(ar.button,{type:"button",...a,ref:t,onClick:yt(e.onClick,()=>s.onOpenChange(!1))})});Fce.displayName=gq;var Bce="PopoverArrow",zce=N.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,s=Dy(r);return n.jsx(kj,{...s,...a,ref:t})});zce.displayName=Bce;function xq(e){return e?"open":"closed"}var qce=cq,Uce=fq,Vce=hq,vq=mq;const yq=qce,bq=Uce,E3=N.forwardRef(({className:e,align:t="center",sideOffset:r=4,...a},s)=>n.jsx(Vce,{children:n.jsx(vq,{ref:s,align:t,sideOffset:r,className:Ye("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));E3.displayName=vq.displayName;function Ev(e,[t,r]){return Math.min(r,Math.max(t,e))}function Hce(e,t){return N.useReducer((r,a)=>t[r][a]??r,e)}var T3="ScrollArea",[jq]=ai(T3),[Gce,Pl]=jq(T3),wq=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:a="hover",dir:s,scrollHideDelay:i=600,...o}=e,[l,d]=N.useState(null),[u,f]=N.useState(null),[m,p]=N.useState(null),[g,b]=N.useState(null),[v,y]=N.useState(null),[j,_]=N.useState(0),[C,A]=N.useState(0),[S,T]=N.useState(!1),[O,R]=N.useState(!1),M=br(t,D=>d(D)),I=Jh(s);return n.jsx(Gce,{scope:r,type:a,dir:I,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:f,content:m,onContentChange:p,scrollbarX:g,onScrollbarXChange:b,scrollbarXEnabled:S,onScrollbarXEnabledChange:T,scrollbarY:v,onScrollbarYChange:y,scrollbarYEnabled:O,onScrollbarYEnabledChange:R,onCornerWidthChange:_,onCornerHeightChange:A,children:n.jsx(ar.div,{dir:I,...o,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});wq.displayName=T3;var Nq="ScrollAreaViewport",Sq=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:a,nonce:s,...i}=e,o=Pl(Nq,r),l=N.useRef(null),d=br(t,l,o.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(ar.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});Sq.displayName=Nq;var hd="ScrollAreaScrollbar",R3=N.forwardRef((e,t)=>{const{forceMount:r,...a}=e,s=Pl(hd,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return N.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?n.jsx(Wce,{...a,ref:t,forceMount:r}):s.type==="scroll"?n.jsx(Kce,{...a,ref:t,forceMount:r}):s.type==="auto"?n.jsx(Cq,{...a,ref:t,forceMount:r}):s.type==="always"?n.jsx(P3,{...a,ref:t}):null});R3.displayName=hd;var Wce=N.forwardRef((e,t)=>{const{forceMount:r,...a}=e,s=Pl(hd,e.__scopeScrollArea),[i,o]=N.useState(!1);return N.useEffect(()=>{const l=s.scrollArea;let d=0;if(l){const u=()=>{window.clearTimeout(d),o(!0)},f=()=>{d=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),n.jsx(Cs,{present:r||i,children:n.jsx(Cq,{"data-state":i?"visible":"hidden",...a,ref:t})})}),Kce=N.forwardRef((e,t)=>{const{forceMount:r,...a}=e,s=Pl(hd,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Uj(()=>d("SCROLL_END"),100),[l,d]=Hce("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,d]),N.useEffect(()=>{const u=s.viewport,f=i?"scrollLeft":"scrollTop";if(u){let m=u[f];const p=()=>{const g=u[f];m!==g&&(d("SCROLL"),o()),m=g};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,d,o]),n.jsx(Cs,{present:r||l!=="hidden",children:n.jsx(P3,{"data-state":l==="hidden"?"hidden":"visible",...a,ref:t,onPointerEnter:yt(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:yt(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),Cq=N.forwardRef((e,t)=>{const r=Pl(hd,e.__scopeScrollArea),{forceMount:a,...s}=e,[i,o]=N.useState(!1),l=e.orientation==="horizontal",d=Uj(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,f=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:f)}},10);return qp(r.viewport,d),qp(r.content,d),n.jsx(Cs,{present:a||i,children:n.jsx(P3,{"data-state":i?"visible":"hidden",...s,ref:t})})}),P3=N.forwardRef((e,t)=>{const{orientation:r="vertical",...a}=e,s=Pl(hd,e.__scopeScrollArea),i=N.useRef(null),o=N.useRef(0),[l,d]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Eq(l.viewport,l.content),f={...a,sizes:l,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function m(p,g){return ede(p,o.current,l,g)}return r==="horizontal"?n.jsx(Yce,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,g=GP(p,l,s.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=m(p,s.dir))}}):r==="vertical"?n.jsx(Xce,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,g=GP(p,l);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=m(p))}}):null}),Yce=N.forwardRef((e,t)=>{const{sizes:r,onSizesChange:a,...s}=e,i=Pl(hd,e.__scopeScrollArea),[o,l]=N.useState(),d=N.useRef(null),u=br(t,d,i.onScrollbarXChange);return N.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),n.jsx(Aq,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":qj(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(i.viewport){const p=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(p),Rq(p,m)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:i1(o.paddingLeft),paddingEnd:i1(o.paddingRight)}})}})}),Xce=N.forwardRef((e,t)=>{const{sizes:r,onSizesChange:a,...s}=e,i=Pl(hd,e.__scopeScrollArea),[o,l]=N.useState(),d=N.useRef(null),u=br(t,d,i.onScrollbarYChange);return N.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),n.jsx(Aq,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":qj(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(i.viewport){const p=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(p),Rq(p,m)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:i1(o.paddingTop),paddingEnd:i1(o.paddingBottom)}})}})}),[Jce,_q]=jq(hd),Aq=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:a,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:f,onResize:m,...p}=e,g=Pl(hd,r),[b,v]=N.useState(null),y=br(t,M=>v(M)),j=N.useRef(null),_=N.useRef(""),C=g.viewport,A=a.content-a.viewport,S=Qs(f),T=Qs(d),O=Uj(m,10);function R(M){if(j.current){const I=M.clientX-j.current.left,D=M.clientY-j.current.top;u({x:I,y:D})}}return N.useEffect(()=>{const M=I=>{const D=I.target;(b==null?void 0:b.contains(D))&&S(I,A)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[C,b,A,S]),N.useEffect(T,[a,T]),qp(b,O),qp(g.content,O),n.jsx(Jce,{scope:r,scrollbar:b,hasThumb:s,onThumbChange:Qs(i),onThumbPointerUp:Qs(o),onThumbPositionChange:T,onThumbPointerDown:Qs(l),children:n.jsx(ar.div,{...p,ref:y,style:{position:"absolute",...p.style},onPointerDown:yt(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),j.current=b.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),R(M))}),onPointerMove:yt(e.onPointerMove,R),onPointerUp:yt(e.onPointerUp,M=>{const I=M.target;I.hasPointerCapture(M.pointerId)&&I.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=_.current,g.viewport&&(g.viewport.style.scrollBehavior=""),j.current=null})})})}),s1="ScrollAreaThumb",kq=N.forwardRef((e,t)=>{const{forceMount:r,...a}=e,s=_q(s1,e.__scopeScrollArea);return n.jsx(Cs,{present:r||s.hasThumb,children:n.jsx(Zce,{ref:t,...a})})}),Zce=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:a,...s}=e,i=Pl(s1,r),o=_q(s1,r),{onThumbPositionChange:l}=o,d=br(t,m=>o.onThumbChange(m)),u=N.useRef(void 0),f=Uj(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const m=i.viewport;if(m){const p=()=>{if(f(),!u.current){const g=tde(m,l);u.current=g,l()}};return l(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[i.viewport,f,l]),n.jsx(ar.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:yt(e.onPointerDownCapture,m=>{const g=m.target.getBoundingClientRect(),b=m.clientX-g.left,v=m.clientY-g.top;o.onThumbPointerDown({x:b,y:v})}),onPointerUp:yt(e.onPointerUp,o.onThumbPointerUp)})});kq.displayName=s1;var M3="ScrollAreaCorner",Oq=N.forwardRef((e,t)=>{const r=Pl(M3,e.__scopeScrollArea),a=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&a?n.jsx(Qce,{...e,ref:t}):null});Oq.displayName=M3;var Qce=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,...a}=e,s=Pl(M3,r),[i,o]=N.useState(0),[l,d]=N.useState(0),u=!!(i&&l);return qp(s.scrollbarX,()=>{var m;const f=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(f),d(f)}),qp(s.scrollbarY,()=>{var m;const f=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(f),o(f)}),u?n.jsx(ar.div,{...a,ref:t,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function i1(e){return e?parseInt(e,10):0}function Eq(e,t){const r=e/t;return isNaN(r)?0:r}function qj(e){const t=Eq(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=(e.scrollbar.size-r)*t;return Math.max(a,18)}function ede(e,t,r,a="ltr"){const s=qj(r),i=s/2,o=t||i,l=s-o,d=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,f=r.content-r.viewport,m=a==="ltr"?[0,f]:[f*-1,0];return Tq([d,u],m)(e)}function GP(e,t,r="ltr"){const a=qj(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,o=t.content-t.viewport,l=i-a,d=r==="ltr"?[0,o]:[o*-1,0],u=Ev(e,d);return Tq([0,o],[0,l])(u)}function Tq(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(r-e[0])}}function Rq(e,t){return e>0&&e<t}var tde=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},a=0;return(function s(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,a=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(a)};function Uj(e,t){const r=Qs(e),a=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(a.current),[]),N.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,t)},[r,t])}function qp(e,t){const r=Qs(t);ni(()=>{let a=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(a),s.unobserve(e)}}},[e,r])}var Pq=wq,rde=Sq,nde=Oq;const pu=N.forwardRef(({className:e,children:t,...r},a)=>n.jsxs(Pq,{ref:a,className:Ye("relative overflow-hidden",e),...r,children:[n.jsx(rde,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(Mq,{}),n.jsx(nde,{})]}));pu.displayName=Pq.displayName;const Mq=N.forwardRef(({className:e,orientation:t="vertical",...r},a)=>n.jsx(R3,{ref:a,orientation:t,className:Ye("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:n.jsx(kq,{className:"relative flex-1 rounded-full bg-border"})}));Mq.displayName=R3.displayName;function nv(e){try{const t=`retina:notifications:${e}`,r=localStorage.getItem(t);return r?JSON.parse(r):[]}catch(t){return console.error("Failed to get notifications:",t),[]}}function ade(e,t){try{const r=`retina:notifications:${e}`,s=nv(e).map(i=>i.id===t?{...i,read:!0}:i);localStorage.setItem(r,JSON.stringify(s))}catch(r){console.error("Failed to mark notification as read:",r)}}function sde(e,t){try{const r=`retina:notifications:${e}`,s=nv(e).filter(i=>i.id!==t);localStorage.setItem(r,JSON.stringify(s))}catch(r){console.error("Failed to dismiss notification:",r)}}function ide(e){try{const t=`retina:notifications:${e}`;localStorage.setItem(t,JSON.stringify([]))}catch(t){console.error("Failed to clear notifications:",t)}}function ode({tenantId:e}){const[t,r]=N.useState([]),[a,s]=N.useState(!1);N.useEffect(()=>{const f=()=>{const p=nv(e);r(p)};f();const m=setInterval(f,3e4);return()=>clearInterval(m)},[e]);const i=t.filter(f=>!f.read).length,o=t.filter(f=>f.severity==="critical"&&!f.read).length,l=f=>{ade(e,f.id),r(nv(e))},d=(f,m)=>{f.stopPropagation(),sde(e,m),r(nv(e))},u=()=>{ide(e),r([])};return n.jsxs(yq,{open:a,onOpenChange:s,children:[n.jsx(bq,{asChild:!0,children:n.jsxs(le,{variant:"ghost",size:"icon",className:"relative",children:[n.jsx(vv,{className:"w-5 h-5"}),i>0&&n.jsx(be,{variant:o>0?"destructive":"default",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:i>9?"9+":i})]})}),n.jsxs(E3,{className:"w-[400px] p-0",align:"end",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Signal Notifications"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[i," unread",o>0&&`  ${o} critical`]})]}),t.length>0&&n.jsx(le,{variant:"ghost",size:"sm",onClick:u,className:"text-xs",children:"Clear All"})]}),n.jsx(pu,{className:"h-[400px]",children:t.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(vv,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications"})]}):n.jsx("div",{className:"divide-y divide-border",children:t.map(f=>n.jsx("div",{className:`p-4 hover:bg-accent/50 transition-colors cursor-pointer ${f.read?"":"bg-blue-500/5"}`,onClick:()=>l(f),children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${f.severity==="critical"?"bg-red-500":f.severity==="warning"?"bg-amber-500":"bg-blue-500"}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[n.jsx("h4",{className:"font-semibold text-sm",children:f.title}),n.jsx(le,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:m=>d(m,f.id),children:n.jsx(Ui,{className:"w-3 h-3"})})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:f.message}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(be,{variant:f.severity==="critical"?"destructive":"secondary",className:"text-xs",children:f.signal_label}),n.jsxs(be,{variant:"outline",className:"text-xs",children:[(Math.abs(f.change_percent)*100).toFixed(1),"% change"]}),f.affected_decisions>0&&n.jsxs(be,{variant:"outline",className:"text-xs",children:[f.affected_decisions," decision",f.affected_decisions!==1?"s":""]})]}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(f.timestamp).toLocaleString()}),n.jsxs(qr,{to:"/retina/revaluation-tags",className:"text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",onClick:()=>s(!1),children:["View Details",n.jsx(Ph,{className:"w-3 h-3"})]})]})]})]})},f.id))})})]})]})}function lde(e){const t=e.split("/").filter(Boolean),r=[];if(t[0]==="retina"){r.push({label:"Retina",href:"/retina"});for(let a=1;a<t.length;a++){const s=t[a],i="/"+t.slice(0,a+1).join("/"),o=s.split("-").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ");r.push({label:o,href:a===t.length-1?void 0:i})}}return r}const cde=[{tenantId:"t-demo",tenantName:"Demo Co"},{tenantId:"t-acme",tenantName:"Acme Ltd"}],nb={viewer:{icon:Mh,label:"Viewer"},analyst:{icon:Fo,label:"Analyst"},manager:{icon:Dp,label:"Manager"},admin:{icon:wy,label:"Admin"}};function dde(){const e=Tl(),t=Sg(),{tenant:r,setTenant:a}=Fr(),{user:s,updateRole:i,setUser:o}=kg(),{enabled:l,setEnabled:d}=Fj(r.tenantId),u=lde(e.pathname);pe.useEffect(()=>{s||o({id:"user-1",email:"admin@retina.ai",role:"admin",tenantId:r.tenantId})},[s,o,r.tenantId]);const f=()=>{window.dispatchEvent(new CustomEvent("open-glossary",{detail:{}}))},m=p=>{a(p),t(e.pathname,{replace:!0}),console.warn("Prevented function call: `window.location.reload()`")};return n.jsx("header",{className:"border-b border-border bg-card",children:n.jsxs("div",{className:"px-6 py-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:"flex-1 max-w-md",children:n.jsxs("div",{className:"relative",children:[n.jsx(Rl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(et,{type:"search",placeholder:"Search...",className:"pl-9 bg-background"})]})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 border border-border rounded-md bg-background",children:[n.jsx(Rte,{className:"w-4 h-4 text-muted-foreground"}),n.jsx(Ne,{htmlFor:"plain-language",className:"text-sm cursor-pointer",children:"Plain language"}),n.jsx(Pa,{id:"plain-language",checked:l,onCheckedChange:d})]}),n.jsxs(le,{variant:"ghost",size:"sm",onClick:f,className:"gap-2",children:[n.jsx(E9,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden md:inline",children:"Glossary"})]}),s&&n.jsxs(Fp,{children:[n.jsx(Bp,{asChild:!0,children:n.jsxs(le,{variant:"outline",className:"gap-2",children:[pe.createElement(nb[s.role].icon,{className:"w-4 h-4"}),n.jsx("span",{children:nb[s.role].label})]})}),n.jsx(Lh,{align:"end",className:"w-48",children:Object.keys(nb).map(p=>{const g=nb[p];return n.jsxs(gc,{onClick:()=>i(p),className:"flex items-center justify-between cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[pe.createElement(g.icon,{className:"w-4 h-4"}),n.jsx("span",{children:g.label})]}),s.role===p&&n.jsx(su,{className:"w-4 h-4"})]},p)})})]}),n.jsxs(Fp,{children:[n.jsx(Bp,{asChild:!0,children:n.jsxs(le,{variant:"outline",className:"gap-2",children:[n.jsx(yv,{className:"w-4 h-4"}),n.jsx("span",{children:r.tenantName})]})}),n.jsx(Lh,{align:"end",className:"w-48",children:cde.map(p=>n.jsxs(gc,{onClick:()=>m(p),className:"flex items-center justify-between cursor-pointer",children:[n.jsx("span",{children:p.tenantName}),r.tenantId===p.tenantId&&n.jsx(su,{className:"w-4 h-4"})]},p.tenantId))})]}),n.jsx(ode,{tenantId:r.tenantId})]})]}),n.jsx("nav",{className:"flex items-center gap-2 text-sm",children:u.map((p,g)=>n.jsxs(pe.Fragment,{children:[g>0&&n.jsx(ti,{className:"w-4 h-4 text-muted-foreground"}),p.href?n.jsx(qr,{to:p.href,className:"text-muted-foreground hover:text-foreground transition-colors",children:p.label}):n.jsx("span",{className:"text-foreground font-medium",children:p.label})]},p.href||p.label))})]})})}function ude({onGlossaryClick:e}){return n.jsx("footer",{className:"border-t border-border bg-card mt-auto",children:n.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",new Date().getFullYear()," Retina Intelligence Suite. All rights reserved."]}),n.jsxs(le,{variant:"ghost",size:"sm",onClick:e,className:"gap-2","aria-label":"Open glossary",children:[n.jsx(E9,{className:"w-4 h-4"}),"Glossary"]})]})})}const wp={ev:{tech:"Expected Value (EV)",label:"Expected profit",short:"Avg result",help:"Average result across all what-ifs.",formula:"mean(outcomes)"},var95:{tech:"VaR 95%",label:"Loss in bad case (95%)",short:"Worst 1-in-20",help:"Threshold where only 5% of outcomes are worse.",formula:"5th percentile of outcomes"},cvar95:{tech:"CVaR 95%",label:"Average of bad cases",short:"Avg beyond VaR",help:"Average of outcomes worse than the 95% VaR.",formula:"mean(outcomes | <= VaR95)"},econCap:{tech:"Economic Capital",label:"Capital at risk",short:"Cushion needed",help:"Capital reserved to absorb severe losses.",formula:" |CVaR95|"},raroc:{tech:"RAROC",label:"Return per risk capital",short:"Return  risk",help:"Risk-adjusted return: value per unit of capital at risk.",formula:"EV / Capital at risk"},utility:{tech:"Utility",label:"Risk preference score",short:"Preference",help:"How much you value outcomes given risk attitude."},ce:{tech:"Certainty Equivalent (CE)",label:"Risk-adjusted value (CE)",short:"Value after risk",help:"Sure amount as good as the risky outcome.",formula:"CARA CE from expected utility"},tcor:{tech:"Total Cost of Risk (TCOR)",label:"All-in risk cost",short:"All risk costs",help:"Expected loss + insurance + contingency + mitigation."},scenario:{tech:"Scenario",label:"What-if settings",short:"What-ifs",help:"Assumptions you tweak to see different outcomes."},monteCarlo:{tech:"Monte Carlo simulation",label:"Random what-if runs",short:"What-if runs",help:"Many random trials to see a range of results."},runs:{tech:"Runs",label:"Number of runs",short:"# runs"},seed:{tech:"Random seed",label:"Randomizer code",short:"Seed",help:"Use the same code to reproduce identical results."},horizon:{tech:"Horizon",label:"Time window",short:"Time window",help:"How far ahead results are scaled."},dependence:{tech:"Copula / Dependence",label:"Link between variables",short:"Variable link",help:"How strongly two inputs move together."},spearman:{tech:"Spearman ",label:"Rank link strength ()",short:"Link strength"},bayesPrior:{tech:"Bayesian prior",label:"Starting belief",short:"Start belief",help:"What you believed before new evidence."},bayesPosterior:{tech:"Posterior",label:"Updated belief",short:"Updated belief",help:"Belief after combining evidence with prior."},gameTheory:{tech:"Game theory",label:"Competitor response",short:"Competitor move"},tornado:{tech:"Tornado sensitivity",label:"What moves the result",short:"Sensitivity",help:"Shows which inputs change the result the most."},mitigation:{tech:"Mitigation cost",label:"Protection cost"},incidents:{tech:"Incidents",label:"Risk events"},signals:{tech:"Signals",label:"News & alerts"},featureFlags:{tech:"Feature flags",label:"Modules on/off"},closed:{tech:"Closed decision",label:"Decision finalized"},guardrails:{tech:"Guardrails",label:"Safety checks"},override:{tech:"Override",label:"Proceed anyway (give reason)"},assumptions:{tech:"Assumptions",label:"What you're taking for granted",short:"Assumptions"},options:{tech:"Options",label:"Choices to compare",short:"Choices"},simulate:{tech:"Simulate",label:"Run what-ifs",short:"Run"},recommend:{tech:"Recommend",label:"Suggest a choice",short:"Suggest"},close:{tech:"Close decision",label:"Finalize decision",short:"Finalize"},stressTest:{tech:"Stress test",label:"Test extreme cases",short:"Stress test"},copula:{tech:"Copula matrix",label:"Multi-variable links",short:"Variable links",help:"How multiple inputs move together."},frobenius:{tech:"Frobenius error",label:"Link accuracy",short:"Link error",help:"How close the achieved links are to your target."},partners:{tech:"Partners",label:"Who else is involved or depends on this?",short:"Partners",help:"External parties tied to this decision (customers, suppliers, financiers, etc.)."},creditRiskScore:{tech:"Credit Link Risk",label:"If they can't pay or fail, how much does it affect us?",short:"Credit risk",help:"Aggregate risk from all linked partners based on their credit exposure and dependency.",formula:"Normalized sum of (credit_exposure  dependency_score) scaled 0100"},portfolio:{tech:"Decision Portfolio",label:"Group related choices under one theme",short:"Portfolio",help:"Lets you view several decisions together  like an investment or strategy bundle."}};function Ra(e,t){const r=wp[e];if(!r)return e;const a=(t==null?void 0:t.plain)??!0,s=(t==null?void 0:t.short)??!1;return a?s&&r.short?r.short:r.label:r.tech}function fde(e){return wp[e]}function Ta(e,t=!0){const r=wp[e];return r?t&&r.label!==r.tech?`${r.tech} (${r.label})`:r.tech:e}function hde(e){const t=mde(e),r=N.forwardRef((a,s)=>{const{children:i,...o}=a,l=N.Children.toArray(i),d=l.find(gde);if(d){const u=d.props.children,f=l.map(m=>m===d?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:N.isValidElement(u)?N.cloneElement(u,void 0,f):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function mde(e){const t=N.forwardRef((r,a)=>{const{children:s,...i}=r;if(N.isValidElement(s)){const o=vde(s),l=xde(i,s.props);return s.type!==N.Fragment&&(l.ref=a?ud(a,o):o),N.cloneElement(s,l)}return N.Children.count(s)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var pde=Symbol("radix.slottable");function gde(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===pde}function xde(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function vde(e){var a,s;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Vj="Dialog",[Dq,Lq]=ai(Vj),[yde,wc]=Dq(Vj),Iq=e=>{const{__scopeDialog:t,children:r,open:a,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,l=N.useRef(null),d=N.useRef(null),[u,f]=Nl({prop:a,defaultProp:s??!1,onChange:i,caller:Vj});return n.jsx(yde,{scope:t,triggerRef:l,contentRef:d,contentId:yl(),titleId:yl(),descriptionId:yl(),open:u,onOpenChange:f,onOpenToggle:N.useCallback(()=>f(m=>!m),[f]),modal:o,children:r})};Iq.displayName=Vj;var $q="DialogTrigger",Fq=N.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=wc($q,r),i=br(t,s.triggerRef);return n.jsx(ar.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":I3(s.open),...a,ref:i,onClick:yt(e.onClick,s.onOpenToggle)})});Fq.displayName=$q;var D3="DialogPortal",[bde,Bq]=Dq(D3,{forceMount:void 0}),zq=e=>{const{__scopeDialog:t,forceMount:r,children:a,container:s}=e,i=wc(D3,t);return n.jsx(bde,{scope:t,forceMount:r,children:N.Children.map(a,o=>n.jsx(Cs,{present:r||i.open,children:n.jsx(Rg,{asChild:!0,container:s,children:o})}))})};zq.displayName=D3;var o1="DialogOverlay",qq=N.forwardRef((e,t)=>{const r=Bq(o1,e.__scopeDialog),{forceMount:a=r.forceMount,...s}=e,i=wc(o1,e.__scopeDialog);return i.modal?n.jsx(Cs,{present:a||i.open,children:n.jsx(wde,{...s,ref:t})}):null});qq.displayName=o1;var jde=hde("DialogOverlay.RemoveScroll"),wde=N.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=wc(o1,r);return n.jsx(Ty,{as:jde,allowPinchZoom:!0,shards:[s.contentRef],children:n.jsx(ar.div,{"data-state":I3(s.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),Ih="DialogContent",Uq=N.forwardRef((e,t)=>{const r=Bq(Ih,e.__scopeDialog),{forceMount:a=r.forceMount,...s}=e,i=wc(Ih,e.__scopeDialog);return n.jsx(Cs,{present:a||i.open,children:i.modal?n.jsx(Nde,{...s,ref:t}):n.jsx(Sde,{...s,ref:t})})});Uq.displayName=Ih;var Nde=N.forwardRef((e,t)=>{const r=wc(Ih,e.__scopeDialog),a=N.useRef(null),s=br(t,r.contentRef,a);return N.useEffect(()=>{const i=a.current;if(i)return Mj(i)},[]),n.jsx(Vq,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:yt(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:yt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:yt(e.onFocusOutside,i=>i.preventDefault())})}),Sde=N.forwardRef((e,t)=>{const r=wc(Ih,e.__scopeDialog),a=N.useRef(!1),s=N.useRef(!1);return n.jsx(Vq,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(a.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:i=>{var d,u;(d=e.onInteractOutside)==null||d.call(e,i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Vq=N.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,l=wc(Ih,r),d=N.useRef(null),u=br(t,d);return Pj(),n.jsxs(n.Fragment,{children:[n.jsx(Oy,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:i,children:n.jsx(Og,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":I3(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(_de,{titleId:l.titleId}),n.jsx(kde,{contentRef:d,descriptionId:l.descriptionId})]})]})}),L3="DialogTitle",Hq=N.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=wc(L3,r);return n.jsx(ar.h2,{id:s.titleId,...a,ref:t})});Hq.displayName=L3;var Gq="DialogDescription",Wq=N.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=wc(Gq,r);return n.jsx(ar.p,{id:s.descriptionId,...a,ref:t})});Wq.displayName=Gq;var Kq="DialogClose",Yq=N.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=wc(Kq,r);return n.jsx(ar.button,{type:"button",...a,ref:t,onClick:yt(e.onClick,()=>s.onOpenChange(!1))})});Yq.displayName=Kq;function I3(e){return e?"open":"closed"}var Xq="DialogTitleWarning",[Cde,Jq]=gae(Xq,{contentName:Ih,titleName:L3,docsSlug:"dialog"}),_de=({titleId:e})=>{const t=Jq(Xq),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return N.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Ade="DialogDescriptionWarning",kde=({contentRef:e,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Jq(Ade).contentName}}.`;return N.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},$3=Iq,F3=Fq,B3=zq,Ly=qq,Iy=Uq,$y=Hq,Fy=Wq,Hj=Yq;const Nr=$3,ld=F3,Ode=B3,Zq=N.forwardRef(({className:e,...t},r)=>n.jsx(Ly,{ref:r,className:Ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Zq.displayName=Ly.displayName;const gr=N.forwardRef(({className:e,children:t,...r},a)=>n.jsxs(Ode,{children:[n.jsx(Zq,{}),n.jsxs(Iy,{ref:a,className:Ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(Hj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(Ui,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));gr.displayName=Iy.displayName;const xr=({className:e,...t})=>n.jsx("div",{className:Ye("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});xr.displayName="DialogHeader";const bn=({className:e,...t})=>n.jsx("div",{className:Ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});bn.displayName="DialogFooter";const vr=N.forwardRef(({className:e,...t},r)=>n.jsx($y,{ref:r,className:Ye("text-lg font-semibold leading-none tracking-tight",e),...t}));vr.displayName=$y.displayName;const Sr=N.forwardRef(({className:e,...t},r)=>n.jsx(Fy,{ref:r,className:Ye("text-sm text-muted-foreground",e),...t}));Sr.displayName=Fy.displayName;const WP="retina:glossary:search",LA="t-demo";function PN(){try{const e=localStorage.getItem("retina:tenant");if(e)return JSON.parse(e).tenantId||LA}catch{}return LA}function Ede({open:e,onOpenChange:t,scrollToTerm:r}){N.useMemo(()=>{try{return PN()}catch(b){return console.error("Error getting tenant ID:",b),LA}},[]);const[a,s]=N.useState(()=>{var b;try{const v=PN();if(!v)return!0;const y=localStorage.getItem(`retina:settings:${v}`);if(y){const j=JSON.parse(y);return((b=j==null?void 0:j.plainLanguage)==null?void 0:b.enabled)??!0}}catch(v){console.error("Error loading plain language setting:",v)}return!0}),i=N.useCallback(b=>{s(b);try{const v=PN();if(!v)return;const y=localStorage.getItem(`retina:settings:${v}`),j=y?JSON.parse(y):{};j.plainLanguage={enabled:b},localStorage.setItem(`retina:settings:${v}`,JSON.stringify(j))}catch(v){console.error("Error saving plain language setting:",v)}},[]),[o,l]=N.useState(()=>{try{return localStorage.getItem(WP)||""}catch{return""}}),[d,u]=N.useState(null);N.useEffect(()=>{try{localStorage.setItem(WP,o)}catch(b){console.error("Error saving search:",b)}},[o]),N.useEffect(()=>{e&&r&&setTimeout(()=>{const b=document.getElementById(`term-${r}`);b&&(b.scrollIntoView({behavior:"smooth",block:"center"}),b.classList.add("ring-2","ring-primary"),setTimeout(()=>{b.classList.remove("ring-2","ring-primary")},2e3))},100)},[e,r]);const f=N.useMemo(()=>{try{return!wp||typeof wp!="object"?(console.error("TERMS is not properly loaded"),[]):Object.entries(wp).map(([b,v])=>({key:b,tech:(v==null?void 0:v.tech)||b,label:(v==null?void 0:v.label)||b,short:v==null?void 0:v.short,help:v==null?void 0:v.help,formula:v==null?void 0:v.formula}))}catch(b){return console.error("Error building term entries:",b),[]}},[]),m=N.useMemo(()=>{if(!o)return f;const b=o.toLowerCase();return f.filter(v=>v.tech.toLowerCase().includes(b)||v.label.toLowerCase().includes(b)||v.short&&v.short.toLowerCase().includes(b)||v.help&&v.help.toLowerCase().includes(b))},[f,o]),p=async(b,v)=>{try{await navigator.clipboard.writeText(b),u(v),setTimeout(()=>u(null),2e3)}catch(y){console.error("Failed to copy:",y)}},g=()=>{const b=["key","tech","label","short","help","formula"],v=f.map(A=>[A.key,A.tech,A.label,A.short||"",A.help||"",A.formula||""]),y=[b.join(","),...v.map(A=>A.map(S=>`"${S.replace(/"/g,'""')}"`).join(","))].join(`
`),j=new Blob([y],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a"),C=URL.createObjectURL(j);_.setAttribute("href",C),_.setAttribute("download","glossary.csv"),_.style.visibility="hidden",document.body.appendChild(_),_.click(),document.body.removeChild(_)};return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-3xl max-h-[85vh] flex flex-col",role:"dialog","aria-labelledby":"glossary-title","aria-describedby":"glossary-description",children:[n.jsxs(xr,{children:[n.jsx(vr,{id:"glossary-title",children:"Glossary"}),n.jsx(Sr,{id:"glossary-description",children:"Search and browse all terms used in Retina"})]}),n.jsxs("div",{className:"space-y-4 flex-1 flex flex-col min-h-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Rl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground","aria-hidden":"true"}),n.jsx(et,{placeholder:"Search terms...",value:o,onChange:b=>l(b.target.value),className:"pl-9","aria-label":"Search glossary terms"})]}),n.jsxs(be,{variant:"secondary",className:"shrink-0",children:[m.length," ",m.length===1?"term":"terms"]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[n.jsx(Ne,{htmlFor:"plain-language-toggle",className:"cursor-pointer",children:"Use plain language"}),n.jsx(Pa,{id:"plain-language-toggle",checked:a,onCheckedChange:i,"aria-label":"Toggle plain language mode"})]}),n.jsx(pu,{className:"flex-1 pr-4",children:n.jsx("div",{className:"space-y-3",children:m.length===0?n.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No matches. Try another word."}):m.map(b=>n.jsxs("div",{id:`term-${b.key}`,className:"p-4 border border-border rounded-lg space-y-3 transition-all",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"font-semibold text-lg",children:[b.label," ",n.jsxs("span",{className:"text-sm text-muted-foreground font-normal",children:["(",b.tech,")"]})]}),b.short&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Short: ",b.short]})]}),b.help&&n.jsx("div",{className:"text-sm text-foreground leading-relaxed",children:b.help}),b.formula&&n.jsxs("div",{className:"text-xs bg-muted p-2 rounded font-mono",children:[n.jsx("span",{className:"font-semibold font-sans",children:"Formula:"})," ",b.formula]}),n.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>p(b.label,`${b.key}-friendly`),"aria-label":`Copy friendly term: ${b.label}`,children:[n.jsx(bv,{className:"w-3 h-3 mr-1"}),d===`${b.key}-friendly`?"Copied!":"Copy friendly"]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>p(b.tech,`${b.key}-technical`),"aria-label":`Copy technical term: ${b.tech}`,children:[n.jsx(bv,{className:"w-3 h-3 mr-1"}),d===`${b.key}-technical`?"Copied!":"Copy technical"]})]})]},b.key))})}),n.jsx("div",{className:"pt-3 border-t border-border",children:n.jsxs(le,{variant:"outline",onClick:g,className:"w-full","aria-label":"Export glossary as CSV",children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Export glossary.csv"]})})]})]})})}function qa({children:e}){const[t,r]=N.useState(!1),[a,s]=N.useState();return N.useEffect(()=>{const i=o=>{(o.ctrlKey||o.metaKey)&&o.key==="/"&&(o.preventDefault(),r(!0)),o.key==="Escape"&&t&&r(!1)};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t]),N.useEffect(()=>{const i=o=>{s(o.detail.term),r(!0)};return window.addEventListener("open-glossary",i),()=>window.removeEventListener("open-glossary",i)},[]),n.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[n.jsx(Eie,{}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsx(dde,{}),n.jsx("main",{className:"flex-1 overflow-y-auto",children:e}),n.jsx(ude,{onGlossaryClick:()=>r(!0)})]}),n.jsx(Ede,{open:t,onOpenChange:i=>{r(i),i||s(void 0)},scrollToTerm:a})]})}const Ae=N.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Ye("rounded-xl border bg-card text-card-foreground shadow",e),...t}));Ae.displayName="Card";const He=N.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Ye("flex flex-col space-y-1.5 p-6",e),...t}));He.displayName="CardHeader";const Ge=N.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Ye("font-semibold leading-none tracking-tight",e),...t}));Ge.displayName="CardTitle";const mt=N.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Ye("text-sm text-muted-foreground",e),...t}));mt.displayName="CardDescription";const Re=N.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Ye("p-6 pt-0",e),...t}));Re.displayName="CardContent";const Tde=N.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Ye("flex items-center p-6 pt-0",e),...t}));Tde.displayName="CardFooter";const Rde={};function Pde(e,t){let r;try{r=e()}catch{return}return{getItem:s=>{var i;const o=d=>d===null?null:JSON.parse(d,void 0),l=(i=r.getItem(s))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,i)=>r.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>r.removeItem(s)}}const Tv=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(a){return Tv(a)(r)},catch(a){return this}}}catch(r){return{then(a){return this},catch(a){return Tv(a)(r)}}}},Mde=(e,t)=>(r,a,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:y=>y,version:0,merge:(y,j)=>({...j,...y}),...t},o=!1;const l=new Set,d=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...y)},a,s);const f=Tv(i.serialize),m=()=>{const y=i.partialize({...a()});let j;const _=f({state:y,version:i.version}).then(C=>u.setItem(i.name,C)).catch(C=>{j=C});if(j)throw j;return _},p=s.setState;s.setState=(y,j)=>{p(y,j),m()};const g=e((...y)=>{r(...y),m()},a,s);let b;const v=()=>{var y;if(!u)return;o=!1,l.forEach(_=>_(a()));const j=((y=i.onRehydrateStorage)==null?void 0:y.call(i,a()))||void 0;return Tv(u.getItem.bind(u))(i.name).then(_=>{if(_)return i.deserialize(_)}).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate)return i.migrate(_.state,_.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return _.state}).then(_=>{var C;return b=i.merge(_,(C=a())!=null?C:g),r(b,!0),m()}).then(()=>{j==null||j(b,void 0),o=!0,d.forEach(_=>_(b))}).catch(_=>{j==null||j(void 0,_)})};return s.persist={setOptions:y=>{i={...i,...y},y.getStorage&&(u=y.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(d.add(y),()=>{d.delete(y)})},v(),b||g},Dde=(e,t)=>(r,a,s)=>{let i={storage:Pde(()=>localStorage),partialize:v=>v,version:0,merge:(v,y)=>({...y,...v}),...t},o=!1;const l=new Set,d=new Set;let u=i.storage;if(!u)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...v)},a,s);const f=()=>{const v=i.partialize({...a()});return u.setItem(i.name,{state:v,version:i.version})},m=s.setState;s.setState=(v,y)=>{m(v,y),f()};const p=e((...v)=>{r(...v),f()},a,s);s.getInitialState=()=>p;let g;const b=()=>{var v,y;if(!u)return;o=!1,l.forEach(_=>{var C;return _((C=a())!=null?C:p)});const j=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(v=a())!=null?v:p))||void 0;return Tv(u.getItem.bind(u))(i.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate)return[!0,i.migrate(_.state,_.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var C;const[A,S]=_;if(g=i.merge(S,(C=a())!=null?C:p),r(g,!0),A)return f()}).then(()=>{j==null||j(g,void 0),g=a(),o=!0,d.forEach(_=>_(g))}).catch(_=>{j==null||j(void 0,_)})};return s.persist={setOptions:v=>{i={...i,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(d.add(v),()=>{d.delete(v)})},i.skipHydration||b(),g||p},Lde=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Rde?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Mde(e,t)):Dde(e,t),Ide=Lde,Vo=iB()(Ide((e,t)=>({decisions:[],saveDecision:r=>{e(a=>{const s=a.decisions.findIndex(i=>i.id===r.id);if(s>=0){const i=[...a.decisions];return i[s]=r,{decisions:i}}return{decisions:[...a.decisions,r]}})},updateDecisionStatus:(r,a)=>{e(s=>({decisions:s.decisions.map(i=>i.id===r?{...i,status:a}:i)}))},saveClosedDecision:r=>{e(a=>({decisions:[...a.decisions,{...r,status:"closed"}]}))},getDecisionsByTenant:r=>t().decisions.filter(a=>a.tenantId===r),getDecisionsByStatus:(r,a)=>t().decisions.filter(s=>s.tenantId===r&&s.status===a),setDecisions:r=>{e({decisions:r})},seedMockClosedDecisions:r=>{if(t().decisions.filter(u=>u.tenantId===r&&u.id.startsWith("seed-")).length>0)return;const s=Date.now(),i=s-840*60*60*1e3,o=s-1080*60*60*1e3,l=s-1440*60*60*1e3,d=[{id:"seed-001",tenantId:r,title:"Cloud Migration Strategy",description:"Evaluate cloud infrastructure options for enterprise migration",status:"closed",chosenOptionId:"opt-hybrid",options:[{id:"opt-hybrid",label:"Hybrid Cloud Approach",score:.92},{id:"opt-full",label:"Full Cloud Migration",score:.78},{id:"opt-multi",label:"Multi-Cloud Strategy",score:.85}],createdAt:i-10080*60*1e3,closedAt:i,closedBy:"Admin User",metrics:{raroc:.085,ev:1500,var95:-450,cvar95:-520,ce:1250},basisAtClose:"RAROC"},{id:"seed-002",tenantId:r,title:"Market Expansion Initiative",description:"Assess regional expansion opportunities",status:"closed",chosenOptionId:"opt-sea",options:[{id:"opt-sea",label:"Southeast Asia Entry",score:.88},{id:"opt-latam",label:"Latin America Entry",score:.82},{id:"opt-emea",label:"EMEA Expansion",score:.79}],createdAt:o-14400*60*1e3,closedAt:o,closedBy:"Admin User",metrics:{raroc:.072,ev:2200,var95:-680,cvar95:-750,ce:1850},basisAtClose:"RAROC"},{id:"seed-003",tenantId:r,title:"Product Line Extension",description:"Evaluate new product tier launch",status:"closed",chosenOptionId:"opt-premium",options:[{id:"opt-premium",label:"Premium Tier Launch",score:.91},{id:"opt-budget",label:"Budget Tier Launch",score:.76},{id:"opt-mid",label:"Mid-Tier Expansion",score:.83}],createdAt:l-7200*60*1e3,closedAt:l,closedBy:"Admin User",metrics:{raroc:.0965,ev:1800,var95:-420,cvar95:-480,ce:1520},basisAtClose:"RAROC"}];e(u=>({decisions:[...u.decisions,...d]}))},audit:[],addAudit:(r,a)=>{const s=localStorage.getItem("retina-tenant-id")||"t-demo",i="Admin User";let o;try{const d=localStorage.getItem("retina:user");d&&(o=JSON.parse(d).role)}catch{o="admin"}const l={ts:Date.now(),tenantId:s,actor:i,actorRole:o,eventType:r,payload:a};e(d=>({audit:[...d.audit,l]}))},getAuditByTenant:(r,a=50)=>t().audit.filter(s=>s.tenantId===r).sort((s,i)=>i.ts-s.ts).slice(0,a),simulationSnapshots:[],saveSimulationSnapshot:r=>{e(a=>({simulationSnapshots:[...a.simulationSnapshots,r]}))},getLastSnapshot:r=>t().simulationSnapshots.filter(s=>s.decisionId===r).sort((s,i)=>i.timestamp-s.timestamp)[0]}),{name:"retina-store"}));function KP(e){return gu(e)}const IA=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),Qq=e=>`retina:guardrails:${e}`;function gu(e){const t=Qq(e),r=localStorage.getItem(t);if(!r)return[];try{return JSON.parse(r)}catch(a){return console.error("Failed to parse guardrails:",a),[]}}function Gj(e,t){return gu(e).filter(a=>a.optionId===t)}function Wj(e,t){const r=Qq(e);localStorage.setItem(r,JSON.stringify(t))}function $de(e,t,r){const a=gu(e),s={id:IA(),decisionId:e,optionId:t,...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return a.push(s),Wj(e,a),s}function Fde(e,t,r){const a=gu(e),s=a.findIndex(i=>i.id===t);return s===-1?null:(a[s]={...a[s],...r,updatedAt:new Date().toISOString()},Wj(e,a),a[s])}function Bde(e,t){const r=gu(e),a=r.filter(s=>s.id!==t);return a.length===r.length?!1:(Wj(e,a),!0)}function zde(e,t,r,a){const s=Gj(e,t);if(s.length>0)return s;const i=[{id:IA(),decisionId:e,optionId:t,metricName:"VaR95",thresholdValue:r*1.2,direction:"below",alertLevel:"critical",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:IA(),decisionId:e,optionId:t,metricName:"Credit Risk Score",thresholdValue:a>0?a*.8:50,direction:"above",alertLevel:"caution",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],l=[...gu(e),...i];return Wj(e,l),i}function qde(e,t){return e.direction==="above"?t>e.thresholdValue:t<e.thresholdValue}function Ude(e,t,r){return Gj(e,t).filter(s=>{const i=r[s.metricName];return i===void 0?!1:qde(s,i)})}function Vde(e){switch(e){case"info":return"text-blue-600 dark:text-blue-400";case"caution":return"text-yellow-600 dark:text-yellow-400";case"critical":return"text-red-600 dark:text-red-400"}}function Hde(e){switch(e){case"info":return"secondary";case"caution":return"outline";case"critical":return"destructive"}}const Gde=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),eU=e=>`retina:guardrail-violations:${e}`;function $h(e){const t=eU(e),r=localStorage.getItem(t);if(!r)return[];try{return JSON.parse(r)}catch(a){return console.error("Failed to parse violations:",a),[]}}function Wde(e,t){const r=eU(e);localStorage.setItem(r,JSON.stringify(t))}function Kde(e,t,r,a=!1){const s=$h(e.decisionId),i={id:Gde(),guardrailId:e.id,decisionId:e.decisionId,optionId:e.optionId,optionLabel:t,metricName:e.metricName,thresholdValue:e.thresholdValue,actualValue:r,direction:e.direction,alertLevel:e.alertLevel,violatedAt:new Date().toISOString(),notificationSent:a};return s.push(i),Wde(e.decisionId,s),i}function YP(e){return $h(e).filter(r=>!r.resolvedAt)}function Yde(e,t){return $h(e).filter(a=>a.optionId===t)}function tU(e){return`retina:decision-journal:${e}`}function z3(e){try{const t=tU(e),r=localStorage.getItem(t);return r?JSON.parse(r):[]}catch(t){return console.error("Error loading decision journals:",t),[]}}function Kj(e,t){return z3(t).find(a=>a.decision_id===e)||null}function Xde(e,t){try{const r=tU(e);localStorage.setItem(r,JSON.stringify(t))}catch(r){console.error("Error saving decision journals:",r)}}function Yj(e,t,r,a){if(a.summary_text.length>500)throw new Error("Summary text must be 500 characters or less");const s=z3(r);let i=s.find(l=>l.decision_id===e);const o={...a,id:`entry-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,entry_date:Date.now()};return i?(i.entries.push(o),i.last_updated=Date.now()):(i={decision_id:e,decision_title:t,entries:[o],created_at:Date.now(),last_updated:Date.now()},s.push(i)),Xde(r,s),o}function rU(e){return{choice:"Choice",update:"Update",reflection:"Reflection",incident:"Incident",guardrail_adjustment:"Guardrail Adjustment"}[e]}function Jde(e,t,r,a,s,i,o){const l=i.raroc.toFixed(2),d=i.ev.toFixed(0),u=Math.abs(i.var95).toFixed(0);let f=`Chose "${s}" with RAROC ${l}, EV $${d}, and VaR95 $${u}.`;if(o&&o.trim().length>0){const m=o.length>150?o.substring(0,147)+"...":o;f+=` Rationale: ${m}`}f.length>500&&(f=f.substring(0,497)+"..."),Yj(e,t,r,{decision_id:e,entry_type:"choice",summary_text:f,auto_generated:!0,author:"system",metadata:{option_id:a,option_label:s,raroc:i.raroc,ev:i.ev,var95:i.var95,rationale:o||void 0}})}function Zde(e,t,r,a,s){const i=a.reduce((f,m)=>Math.abs(m.change_percent)>Math.abs(f.change_percent)?m:f),o=(Math.abs(i.change_percent)*100).toFixed(0),l=i.change_percent>0?"increased":"decreased",d=s.map(f=>({optionLabel:f.optionLabel,metric:"EV",delta:f.ev.delta,deltaPercent:f.ev.deltaPercent})).filter(f=>Math.abs(f.deltaPercent)>1).sort((f,m)=>Math.abs(m.deltaPercent)-Math.abs(f.deltaPercent));let u=`When ${i.signal_label} ${l} by ${o}%`;if(d.length>0){const f=d[0],m=f.delta>0?"rose":"fell",p=Math.abs(f.deltaPercent).toFixed(0);u+=`, the expected value ${m} by ${p}%`,s.some(b=>Math.abs(b.var95.deltaPercent)>10||Math.abs(b.ev.deltaPercent)>15)?u+=" and triggered guardrail reviews.":u+=" but guardrails held steady."}else u+=", metrics remained stable within acceptable ranges.";u.length>500&&(u=u.substring(0,497)+"..."),Yj(e,t,r,{decision_id:e,entry_type:"update",summary_text:u,auto_generated:!0,author:"system",metadata:{signal_updates:a.map(f=>({signal_id:f.signal_id,signal_label:f.signal_label,change_percent:f.change_percent})),metric_changes:d.slice(0,3),max_signal_change:{signal_label:i.signal_label,change_percent:i.change_percent}}})}function Qde(e,t,r,a){const s=nU(a.metricName),i=XP(a.oldThreshold,a.metricName),o=XP(a.newThreshold,a.metricName),l=a.adjustmentPercent.toFixed(0),d=a.severity?` due to ${a.severity} breach`:"";let u=`${s} guardrail auto-adjusted${d}. Threshold tightened ${l}% from ${i} to ${o}`;if(a.triggeredBy&&a.triggeredBy.length>0?u+=` after ${a.triggeredBy.length} repeated breach${a.triggeredBy.length>1?"es":""}.`:u+=".",a.breachSeverityPercent){const f=a.breachSeverityPercent.toFixed(0);u+=` Last breach exceeded threshold by ${f}%.`}u.length>500&&(u=u.substring(0,497)+"..."),Yj(e,t,r,{decision_id:e,entry_type:"guardrail_adjustment",summary_text:u,auto_generated:!0,author:"system",metadata:{guardrail_id:a.guardrailId,option_id:a.optionId,metric_name:a.metricName,old_value:a.oldThreshold,new_value:a.newThreshold,adjustment_percent:a.adjustmentPercent,severity:a.severity,breach_severity_percent:a.breachSeverityPercent,breach_count:a.triggeredBy.length}})}function eue(e,t,r,a,s,i){const o=tue(a.type);let d=`${a.severity.toUpperCase()} ${o}: "${a.title}" affected ${s} linked signal${s!==1?"s":""}.`;if(i){const f=nU(i.metric),m=i.change_percent>0?"increase":"decrease",p=Math.abs(i.change_percent).toFixed(0);d+=` Estimated ${p}% ${m} in ${f}.`}const u={ongoing:"Incident ongoing, monitoring impact.",mitigated:"Incident mitigated, residual effects possible.",resolved:"Incident resolved."}[a.resolution_status];d+=` ${u}`,d.length>500&&(d=d.substring(0,497)+"..."),Yj(e,t,r,{decision_id:e,entry_type:"incident",summary_text:d,auto_generated:!0,author:"system",metadata:{incident_id:a.id,incident_title:a.title,incident_type:a.type,severity:a.severity,affected_signal_count:s,estimated_effect:i,resolution_status:a.resolution_status}})}function nU(e){return{raroc:"Risk-Adjusted Return",ev:"Expected Value",var95:"Value at Risk",cvar95:"Conditional VaR",ce:"Certainty Equivalent",utility:"Utility Score",EV:"Expected Value",VaR95:"Value at Risk",CVaR95:"Conditional VaR",RAROC:"Risk-Adjusted Return",CE:"Certainty Equivalent"}[e]||e}function XP(e,t){const r=t.toLowerCase();return r.includes("ev")||r.includes("var")||r.includes("cvar")||r.includes("ce")?`$${Math.abs(e).toFixed(0)}`:r.includes("raroc")?e.toFixed(2):r.includes("percent")||r.includes("rate")?`${(e*100).toFixed(1)}%`:e.toFixed(2)}function tue(e){return{supply_failure:"Supply Chain Disruption",cyber_event:"Cybersecurity Incident",market_shock:"Market Volatility",regulatory_change:"Regulatory Change",operational_disruption:"Operational Issue",other:"External Event"}[e]}const $A=90,FA=2,BA=.1,zA=!0,MN={minor:.05,moderate:.15,severe:.3},rue={minor:.05,moderate:.1,severe:.15,critical:.2},aU=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),sU=e=>`retina:outcomes:${e}`,iU=e=>`retina:guardrail-adjustments:${e}`,oU=e=>`retina:auto-adjust-config:${e}`;function q3(e){const t=sU(e),r=localStorage.getItem(t);if(!r)return[];try{return JSON.parse(r)}catch(a){return console.error("Failed to parse outcomes:",a),[]}}function nue(e,t){const r=sU(e);localStorage.setItem(r,JSON.stringify(t))}function By(e){const t=iU(e),r=localStorage.getItem(t);if(!r)return[];try{return JSON.parse(r)}catch(a){return console.error("Failed to parse adjustments:",a),[]}}function aue(e,t){const r=iU(e);localStorage.setItem(r,JSON.stringify(t))}function sue(e,t,r,a,s,i,o,l){const d=q3(e),u={id:aU(),decisionId:e,optionId:t,optionLabel:r,metricName:a,actualValue:s,recordedAt:new Date().toISOString(),source:i,sourceId:o,notes:l};return d.push(u),nue(e,d),u}function iue(e,t){return e.direction==="above"?t>e.thresholdValue:t<e.thresholdValue}function oue(e,t,r){const a=$h(e),s=new Date;return s.setDate(s.getDate()-r),a.filter(i=>{const o=new Date(i.violatedAt);return i.guardrailId===t&&o>=s})}function lue(e,t,r){let a;r==="above"?a=(e-t)/t:a=(t-e)/t,a=Math.abs(a);let s;return a>=MN.severe?s="critical":a>=MN.moderate?s="severe":a>=MN.minor?s="moderate":s="minor",{severity:s,percent:a*100}}function cue(e,t,r,a=!1,s){let i=r;a&&s&&(i=rue[s]);let o;return t==="above"?o=e*(1-i):o=e*(1+i),{newThreshold:o,adjustmentPercent:i*100}}function due(e,t,r,a,s,i,o){const d=gu(e).find(y=>y.id===t);if(!d)return console.error("Guardrail not found:",t),null;const u=Xj(a),f=d.thresholdValue,{newThreshold:m,adjustmentPercent:p}=cue(f,d.direction,u.tighteningPercent,u.severityBasedAdjustment,s);if(!Fde(e,t,{thresholdValue:m}))return console.error("Failed to update guardrail:",t),null;const b={id:aU(),guardrailId:t,decisionId:e,optionId:d.optionId,metricName:d.metricName,oldThreshold:f,newThreshold:m,adjustmentPercent:p,reason:s?`Guardrail auto-adjusted due to ${s} repeated breach.`:"Guardrail auto-adjusted due to repeated breach.",triggeredBy:r,adjustedAt:new Date().toISOString(),severity:s,breachSeverityPercent:i,emailSent:!1,emailRecipients:u.emailRecipients},v=By(e);return v.push(b),aue(e,v),Qde(e,o,a,b),b}function uue(e,t,r,a,s,i,o,l,d,u){const f=Xj(o),m=sue(e,t,r,a,s,i,l,d),g=gu(e).find(C=>C.optionId===t&&C.metricName===a);if(!g)return{outcome:m};if(!iue(g,s))return{outcome:m};const{severity:v,percent:y}=lue(s,g.thresholdValue,g.direction),j=Kde(g,r,s,!1);u&&u("guardrail.outcome_breach",{guardrailId:g.id,violationId:j.id,optionId:t,metricName:a,actualValue:s,thresholdValue:g.thresholdValue,source:i,sourceId:l,severity:v,breachSeverityPercent:y});const _=oue(e,g.id,f.breachWindowDays);if(_.length>=f.breachThresholdCount){const C=_.map(R=>R.id),S=JSON.parse(localStorage.getItem("retina:decisions")||"[]").find(R=>R.id===e),T=(S==null?void 0:S.title)||"Untitled Decision",O=due(e,g.id,C,o,v,y,T);return O&&u&&u("guardrail.auto_adjusted",{guardrailId:g.id,adjustmentId:O.id,optionId:t,metricName:a,oldThreshold:O.oldThreshold,newThreshold:O.newThreshold,adjustmentPercent:O.adjustmentPercent,breachCount:_.length,windowDays:f.breachWindowDays,severity:v,breachSeverityPercent:y}),{outcome:m,violation:j,adjustment:O}}return{outcome:m,violation:j}}function fue(e){const t=q3(e);return[["Outcome ID","Option","Metric","Actual Value","Recorded At","Source","Source ID","Notes"],...t.map(a=>[a.id,a.optionLabel,a.metricName,a.actualValue.toString(),new Date(a.recordedAt).toLocaleString(),a.source,a.sourceId||"",a.notes||""])].map(a=>a.join(",")).join(`
`)}function hue(e){const t=By(e);return[["Adjustment ID","Metric","Old Threshold","New Threshold","Adjustment %","Reason","Adjusted At","Triggered By Count"],...t.map(a=>[a.id,a.metricName,a.oldThreshold.toString(),a.newThreshold.toString(),a.adjustmentPercent.toString(),a.reason,new Date(a.adjustedAt).toLocaleString(),a.triggeredBy.length.toString()])].map(a=>a.join(",")).join(`
`)}function lU(e,t=30){const r=JSON.parse(localStorage.getItem("retina:decisions")||"[]").filter(o=>o.tenantId===e),a=new Date;a.setDate(a.getDate()-t);const s=[];r.forEach(o=>{By(o.id).forEach(d=>{const u=new Date(d.adjustedAt);u>=a&&s.push({...d,date:u.toISOString().split("T")[0]})})});const i=new Map;return s.forEach(o=>{const l=i.get(o.date);l?(l.count++,l.avgSeverity=(l.avgSeverity*(l.count-1)+(o.breachSeverityPercent||0))/l.count,l.metrics[o.metricName]=(l.metrics[o.metricName]||0)+1):i.set(o.date,{date:o.date,count:1,avgSeverity:o.breachSeverityPercent||0,metrics:{[o.metricName]:1}})}),Array.from(i.values()).sort((o,l)=>new Date(o.date).getTime()-new Date(l.date).getTime())}function mue(e,t=30){const r=lU(e,t),a=r.reduce((l,d)=>l+d.count,0),s=r.length>0?r.reduce((l,d)=>l+d.avgSeverity,0)/r.length:0,i=new Map;r.forEach(l=>{Object.entries(l.metrics).forEach(([d,u])=>{i.set(d,(i.get(d)||0)+u)})});const o=Array.from(i.entries()).sort((l,d)=>d[1]-l[1]).slice(0,5).map(([l,d])=>({metric:l,count:d}));return{totalAdjustments:a,avgSeverity:s,topMetrics:o,trends:r}}function Xj(e){const t=oU(e),r=localStorage.getItem(t);if(!r)return{breachWindowDays:$A,breachThresholdCount:FA,tighteningPercent:BA,severityBasedAdjustment:zA,emailNotifications:!1,emailRecipients:[]};try{return JSON.parse(r)}catch(a){return console.error("Failed to parse auto-adjust config:",a),{breachWindowDays:$A,breachThresholdCount:FA,tighteningPercent:BA,severityBasedAdjustment:zA,emailNotifications:!1,emailRecipients:[]}}}function pue(e,t){const r=oU(e);localStorage.setItem(r,JSON.stringify(t))}function gue(e){return{breachWindowDays:$A,breachThresholdCount:FA,tighteningPercent:BA,severityBasedAdjustment:zA,plainLanguageTooltip:"Learns from repeated problems and makes our limits stricter."}}var DN,JP;function xo(){if(JP)return DN;JP=1;var e=Array.isArray;return DN=e,DN}var LN,ZP;function cU(){if(ZP)return LN;ZP=1;var e=typeof G0=="object"&&G0&&G0.Object===Object&&G0;return LN=e,LN}var IN,QP;function md(){if(QP)return IN;QP=1;var e=cU(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return IN=r,IN}var $N,e6;function zy(){if(e6)return $N;e6=1;var e=md(),t=e.Symbol;return $N=t,$N}var FN,t6;function xue(){if(t6)return FN;t6=1;var e=zy(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),d=o[s];try{o[s]=void 0;var u=!0}catch{}var f=a.call(o);return u&&(l?o[s]=d:delete o[s]),f}return FN=i,FN}var BN,r6;function vue(){if(r6)return BN;r6=1;var e=Object.prototype,t=e.toString;function r(a){return t.call(a)}return BN=r,BN}var zN,n6;function xu(){if(n6)return zN;n6=1;var e=zy(),t=xue(),r=vue(),a="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:a:i&&i in Object(l)?t(l):r(l)}return zN=o,zN}var qN,a6;function vu(){if(a6)return qN;a6=1;function e(t){return t!=null&&typeof t=="object"}return qN=e,qN}var UN,s6;function Dg(){if(s6)return UN;s6=1;var e=xu(),t=vu(),r="[object Symbol]";function a(s){return typeof s=="symbol"||t(s)&&e(s)==r}return UN=a,UN}var VN,i6;function U3(){if(i6)return VN;i6=1;var e=xo(),t=Dg(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:a.test(i)||!r.test(i)||o!=null&&i in Object(o)}return VN=s,VN}var HN,o6;function Af(){if(o6)return HN;o6=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return HN=e,HN}var GN,l6;function V3(){if(l6)return GN;l6=1;var e=xu(),t=Af(),r="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var d=e(l);return d==a||d==s||d==r||d==i}return GN=o,GN}var WN,c6;function yue(){if(c6)return WN;c6=1;var e=md(),t=e["__core-js_shared__"];return WN=t,WN}var KN,d6;function bue(){if(d6)return KN;d6=1;var e=yue(),t=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function r(a){return!!t&&t in a}return KN=r,KN}var YN,u6;function dU(){if(u6)return YN;u6=1;var e=Function.prototype,t=e.toString;function r(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return YN=r,YN}var XN,f6;function jue(){if(f6)return XN;f6=1;var e=V3(),t=bue(),r=Af(),a=dU(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,d=o.toString,u=l.hasOwnProperty,f=RegExp("^"+d.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(p){if(!r(p)||t(p))return!1;var g=e(p)?f:i;return g.test(a(p))}return XN=m,XN}var JN,h6;function wue(){if(h6)return JN;h6=1;function e(t,r){return t==null?void 0:t[r]}return JN=e,JN}var ZN,m6;function em(){if(m6)return ZN;m6=1;var e=jue(),t=wue();function r(a,s){var i=t(a,s);return e(i)?i:void 0}return ZN=r,ZN}var QN,p6;function Jj(){if(p6)return QN;p6=1;var e=em(),t=e(Object,"create");return QN=t,QN}var e5,g6;function Nue(){if(g6)return e5;g6=1;var e=Jj();function t(){this.__data__=e?e(null):{},this.size=0}return e5=t,e5}var t5,x6;function Sue(){if(x6)return t5;x6=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return t5=e,t5}var r5,v6;function Cue(){if(v6)return r5;v6=1;var e=Jj(),t="__lodash_hash_undefined__",r=Object.prototype,a=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return a.call(o,i)?o[i]:void 0}return r5=s,r5}var n5,y6;function _ue(){if(y6)return n5;y6=1;var e=Jj(),t=Object.prototype,r=t.hasOwnProperty;function a(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return n5=a,n5}var a5,b6;function Aue(){if(b6)return a5;b6=1;var e=Jj(),t="__lodash_hash_undefined__";function r(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&s===void 0?t:s,this}return a5=r,a5}var s5,j6;function kue(){if(j6)return s5;j6=1;var e=Nue(),t=Sue(),r=Cue(),a=_ue(),s=Aue();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,s5=i,s5}var i5,w6;function Oue(){if(w6)return i5;w6=1;function e(){this.__data__=[],this.size=0}return i5=e,i5}var o5,N6;function H3(){if(N6)return o5;N6=1;function e(t,r){return t===r||t!==t&&r!==r}return o5=e,o5}var l5,S6;function Zj(){if(S6)return l5;S6=1;var e=H3();function t(r,a){for(var s=r.length;s--;)if(e(r[s][0],a))return s;return-1}return l5=t,l5}var c5,C6;function Eue(){if(C6)return c5;C6=1;var e=Zj(),t=Array.prototype,r=t.splice;function a(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return c5=a,c5}var d5,_6;function Tue(){if(_6)return d5;_6=1;var e=Zj();function t(r){var a=this.__data__,s=e(a,r);return s<0?void 0:a[s][1]}return d5=t,d5}var u5,A6;function Rue(){if(A6)return u5;A6=1;var e=Zj();function t(r){return e(this.__data__,r)>-1}return u5=t,u5}var f5,k6;function Pue(){if(k6)return f5;k6=1;var e=Zj();function t(r,a){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,a])):s[i][1]=a,this}return f5=t,f5}var h5,O6;function Qj(){if(O6)return h5;O6=1;var e=Oue(),t=Eue(),r=Tue(),a=Rue(),s=Pue();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,h5=i,h5}var m5,E6;function G3(){if(E6)return m5;E6=1;var e=em(),t=md(),r=e(t,"Map");return m5=r,m5}var p5,T6;function Mue(){if(T6)return p5;T6=1;var e=kue(),t=Qj(),r=G3();function a(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return p5=a,p5}var g5,R6;function Due(){if(R6)return g5;R6=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return g5=e,g5}var x5,P6;function e2(){if(P6)return x5;P6=1;var e=Due();function t(r,a){var s=r.__data__;return e(a)?s[typeof a=="string"?"string":"hash"]:s.map}return x5=t,x5}var v5,M6;function Lue(){if(M6)return v5;M6=1;var e=e2();function t(r){var a=e(this,r).delete(r);return this.size-=a?1:0,a}return v5=t,v5}var y5,D6;function Iue(){if(D6)return y5;D6=1;var e=e2();function t(r){return e(this,r).get(r)}return y5=t,y5}var b5,L6;function $ue(){if(L6)return b5;L6=1;var e=e2();function t(r){return e(this,r).has(r)}return b5=t,b5}var j5,I6;function Fue(){if(I6)return j5;I6=1;var e=e2();function t(r,a){var s=e(this,r),i=s.size;return s.set(r,a),this.size+=s.size==i?0:1,this}return j5=t,j5}var w5,$6;function W3(){if($6)return w5;$6=1;var e=Mue(),t=Lue(),r=Iue(),a=$ue(),s=Fue();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,w5=i,w5}var N5,F6;function uU(){if(F6)return N5;F6=1;var e=W3(),t="Expected a function";function r(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],d=i.cache;if(d.has(l))return d.get(l);var u=a.apply(this,o);return i.cache=d.set(l,u)||d,u};return i.cache=new(r.Cache||e),i}return r.Cache=e,N5=r,N5}var S5,B6;function Bue(){if(B6)return S5;B6=1;var e=uU(),t=500;function r(a){var s=e(a,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return S5=r,S5}var C5,z6;function zue(){if(z6)return C5;z6=1;var e=Bue(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,d,u){i.push(d?u.replace(r,"$1"):l||o)}),i});return C5=a,C5}var _5,q6;function K3(){if(q6)return _5;q6=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=Array(s);++a<s;)i[a]=r(t[a],a,t);return i}return _5=e,_5}var A5,U6;function que(){if(U6)return A5;U6=1;var e=zy(),t=K3(),r=xo(),a=Dg(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(a(l))return i?i.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}return A5=o,A5}var k5,V6;function fU(){if(V6)return k5;V6=1;var e=que();function t(r){return r==null?"":e(r)}return k5=t,k5}var O5,H6;function hU(){if(H6)return O5;H6=1;var e=xo(),t=U3(),r=zue(),a=fU();function s(i,o){return e(i)?i:t(i,o)?[i]:r(a(i))}return O5=s,O5}var E5,G6;function t2(){if(G6)return E5;G6=1;var e=Dg();function t(r){if(typeof r=="string"||e(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}return E5=t,E5}var T5,W6;function Y3(){if(W6)return T5;W6=1;var e=hU(),t=t2();function r(a,s){s=e(s,a);for(var i=0,o=s.length;a!=null&&i<o;)a=a[t(s[i++])];return i&&i==o?a:void 0}return T5=r,T5}var R5,K6;function mU(){if(K6)return R5;K6=1;var e=Y3();function t(r,a,s){var i=r==null?void 0:e(r,a);return i===void 0?s:i}return R5=t,R5}var Uue=mU();const zo=jn(Uue);var P5,Y6;function Vue(){if(Y6)return P5;Y6=1;function e(t){return t==null}return P5=e,P5}var Hue=Vue();const yr=jn(Hue);var M5,X6;function Gue(){if(X6)return M5;X6=1;var e=xu(),t=xo(),r=vu(),a="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==a}return M5=s,M5}var Wue=Gue();const Fh=jn(Wue);var Kue=V3();const wr=jn(Kue);var Yue=Af();const Lg=jn(Yue);var D5={exports:{}},Nn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J6;function Xue(){if(J6)return Nn;J6=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function v(y){if(typeof y=="object"&&y!==null){var j=y.$$typeof;switch(j){case e:switch(y=y.type,y){case r:case s:case a:case u:case f:return y;default:switch(y=y&&y.$$typeof,y){case l:case o:case d:case p:case m:case i:return y;default:return j}}case t:return j}}}return Nn.ContextConsumer=o,Nn.ContextProvider=i,Nn.Element=e,Nn.ForwardRef=d,Nn.Fragment=r,Nn.Lazy=p,Nn.Memo=m,Nn.Portal=t,Nn.Profiler=s,Nn.StrictMode=a,Nn.Suspense=u,Nn.SuspenseList=f,Nn.isAsyncMode=function(){return!1},Nn.isConcurrentMode=function(){return!1},Nn.isContextConsumer=function(y){return v(y)===o},Nn.isContextProvider=function(y){return v(y)===i},Nn.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},Nn.isForwardRef=function(y){return v(y)===d},Nn.isFragment=function(y){return v(y)===r},Nn.isLazy=function(y){return v(y)===p},Nn.isMemo=function(y){return v(y)===m},Nn.isPortal=function(y){return v(y)===t},Nn.isProfiler=function(y){return v(y)===s},Nn.isStrictMode=function(y){return v(y)===a},Nn.isSuspense=function(y){return v(y)===u},Nn.isSuspenseList=function(y){return v(y)===f},Nn.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===r||y===s||y===a||y===u||y===f||y===g||typeof y=="object"&&y!==null&&(y.$$typeof===p||y.$$typeof===m||y.$$typeof===i||y.$$typeof===o||y.$$typeof===d||y.$$typeof===b||y.getModuleId!==void 0)},Nn.typeOf=v,Nn}var Z6;function Jue(){return Z6||(Z6=1,D5.exports=Xue()),D5.exports}var Zue=Jue(),L5,Q6;function pU(){if(Q6)return L5;Q6=1;var e=xu(),t=vu(),r="[object Number]";function a(s){return typeof s=="number"||t(s)&&e(s)==r}return L5=a,L5}var I5,eM;function Que(){if(eM)return I5;eM=1;var e=pU();function t(r){return e(r)&&r!=+r}return I5=t,I5}var efe=Que();const Ig=jn(efe);var tfe=pU();const rfe=jn(tfe);var Fi=function(t){return t===0?0:t>0?1:-1},jh=function(t){return Fh(t)&&t.indexOf("%")===t.length-1},vt=function(t){return rfe(t)&&!Ig(t)},nfe=function(t){return yr(t)},Ss=function(t){return vt(t)||Fh(t)},afe=0,kf=function(t){var r=++afe;return"".concat(t||"").concat(r)},Bi=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!vt(t)&&!Fh(t))return a;var i;if(jh(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Ig(i)&&(i=a),s&&i>r&&(i=r),i},cf=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},sfe=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,a={},s=0;s<r;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},Ma=function(t,r){return vt(t)&&vt(r)?function(a){return t+a*(r-t)}:function(){return r}};function l1(e,t,r){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):zo(a,t))===r})}var ife=function(t){if(!t||!t.length)return null;for(var r=t.length,a=0,s=0,i=0,o=0,l=1/0,d=-1/0,u=0,f=0,m=0;m<r;m++)u=t[m].cx||0,f=t[m].cy||0,a+=u,s+=f,i+=u*f,o+=u*u,l=Math.min(l,u),d=Math.max(d,u);var p=r*o!==a*a?(r*i-a*s)/(r*o-a*a):0;return{xmin:l,xmax:d,a:p,b:(s-p*a)/r}},ofe=function(t,r){return vt(t)&&vt(r)?t-r:Fh(t)&&Fh(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Np(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function qA(e){"@babel/helpers - typeof";return qA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qA(e)}var lfe=["viewBox","children"],cfe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],tM=["points","pathLength"],$5={svg:lfe,polygon:tM,polyline:tM},X3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],c1=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(N.isValidElement(t)&&(a=t.props),!Lg(a))return null;var s={};return Object.keys(a).forEach(function(i){X3.includes(i)&&(s[i]=r||function(o){return a[i](a,o)})}),s},dfe=function(t,r,a){return function(s){return t(r,a,s),null}},jf=function(t,r,a){if(!Lg(t)||qA(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];X3.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=dfe(o,r,a))}),s},ufe=["children"],ffe=["children"];function rM(e,t){if(e==null)return{};var r=hfe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function hfe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function UA(e){"@babel/helpers - typeof";return UA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UA(e)}var nM={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},tu=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},aM=null,F5=null,J3=function e(t){if(t===aM&&Array.isArray(F5))return F5;var r=[];return N.Children.forEach(t,function(a){yr(a)||(Zue.isFragment(a)?r=r.concat(e(a.props.children)):r.push(a))}),F5=r,aM=t,r};function Vi(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(function(s){return tu(s)}):a=[tu(t)],J3(e).forEach(function(s){var i=zo(s,"type.displayName")||zo(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}function Do(e,t){var r=Vi(e,t);return r&&r[0]}var sM=function(t){if(!t||!t.props)return!1;var r=t.props,a=r.width,s=r.height;return!(!vt(a)||a<=0||!vt(s)||s<=0)},mfe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],pfe=function(t){return t&&t.type&&Fh(t.type)&&mfe.indexOf(t.type)>=0},gU=function(t){return t&&UA(t)==="object"&&"clipDot"in t},gfe=function(t,r,a,s){var i,o=(i=$5==null?void 0:$5[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!wr(t)&&(s&&o.includes(r)||cfe.includes(r))||a&&X3.includes(r)},tr=function(t,r,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(N.isValidElement(t)&&(s=t.props),!Lg(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;gfe((l=s)===null||l===void 0?void 0:l[o],o,r,a)&&(i[o]=s[o])}),i},VA=function e(t,r){if(t===r)return!0;var a=N.Children.count(t);if(a!==N.Children.count(r))return!1;if(a===0)return!0;if(a===1)return iM(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<a;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!iM(i,o))return!1}return!0},iM=function(t,r){if(yr(t)&&yr(r))return!0;if(!yr(t)&&!yr(r)){var a=t.props||{},s=a.children,i=rM(a,ufe),o=r.props||{},l=o.children,d=rM(o,ffe);return s&&l?Np(i,d)&&VA(s,l):!s&&!l?Np(i,d):!1}return!1},oM=function(t,r){var a=[],s={};return J3(t).forEach(function(i,o){if(pfe(i))a.push(i);else if(i){var l=tu(i.type),d=r[l]||{},u=d.handler,f=d.once;if(u&&(!f||!s[l])){var m=u(i,l,o);a.push(m),s[l]=!0}}}),a},xfe=function(t){var r=t&&t.type;return r&&nM[r]?nM[r]:null},vfe=function(t,r){return J3(r).indexOf(t)},yfe=["children","width","height","viewBox","className","style","title","desc"];function HA(){return HA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},HA.apply(this,arguments)}function bfe(e,t){if(e==null)return{};var r=jfe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function jfe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function GA(e){var t=e.children,r=e.width,a=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,d=e.desc,u=bfe(e,yfe),f=s||{width:r,height:a,x:0,y:0},m=Pr("recharts-surface",i);return pe.createElement("svg",HA({},tr(u,!0,"svg"),{className:m,width:r,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),pe.createElement("title",null,l),pe.createElement("desc",null,d),t)}var wfe=["children","className"];function WA(){return WA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},WA.apply(this,arguments)}function Nfe(e,t){if(e==null)return{};var r=Sfe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Sfe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Ur=pe.forwardRef(function(e,t){var r=e.children,a=e.className,s=Nfe(e,wfe),i=Pr("recharts-layer",a);return pe.createElement("g",WA({className:i},tr(s,!0),{ref:t}),r)}),xc=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]},B5,lM;function Cfe(){if(lM)return B5;lM=1;function e(t,r,a){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),a=a>i?i:a,a<0&&(a+=i),i=r>a?0:a-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return B5=e,B5}var z5,cM;function _fe(){if(cM)return z5;cM=1;var e=Cfe();function t(r,a,s){var i=r.length;return s=s===void 0?i:s,!a&&s>=i?r:e(r,a,s)}return z5=t,z5}var q5,dM;function xU(){if(dM)return q5;dM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function d(u){return l.test(u)}return q5=d,q5}var U5,uM;function Afe(){if(uM)return U5;uM=1;function e(t){return t.split("")}return U5=e,U5}var V5,fM;function kfe(){if(fM)return V5;fM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",d="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+d+")",f="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",b=u+"?",v="["+i+"]?",y="(?:"+g+"(?:"+[f,m,p].join("|")+")"+v+b+")*",j=v+b+y,_="(?:"+[f+l+"?",l,m,p,o].join("|")+")",C=RegExp(d+"(?="+d+")|"+_+j,"g");function A(S){return S.match(C)||[]}return V5=A,V5}var H5,hM;function Ofe(){if(hM)return H5;hM=1;var e=Afe(),t=xU(),r=kfe();function a(s){return t(s)?r(s):e(s)}return H5=a,H5}var G5,mM;function Efe(){if(mM)return G5;mM=1;var e=_fe(),t=xU(),r=Ofe(),a=fU();function s(i){return function(o){o=a(o);var l=t(o)?r(o):void 0,d=l?l[0]:o.charAt(0),u=l?e(l,1).join(""):o.slice(1);return d[i]()+u}}return G5=s,G5}var W5,pM;function Tfe(){if(pM)return W5;pM=1;var e=Efe(),t=e("toUpperCase");return W5=t,W5}var Rfe=Tfe();const r2=jn(Rfe);function Qn(e){return function(){return e}}const vU=Math.cos,d1=Math.sin,Nc=Math.sqrt,u1=Math.PI,n2=2*u1,KA=Math.PI,YA=2*KA,hh=1e-6,Pfe=YA-hh;function yU(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Mfe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return yU;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class Dfe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?yU:Mfe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,o){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,d=a-t,u=s-r,f=o-t,m=l-r,p=f*f+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>hh)if(!(Math.abs(m*d-u*f)>hh)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let g=a-o,b=s-l,v=d*d+u*u,y=g*g+b*b,j=Math.sqrt(v),_=Math.sqrt(p),C=i*Math.tan((KA-Math.acos((v+p-y)/(2*j*_)))/2),A=C/_,S=C/j;Math.abs(A-1)>hh&&this._append`L${t+A*f},${r+A*m}`,this._append`A${i},${i},0,0,${+(m*g>f*b)},${this._x1=t+S*d},${this._y1=r+S*u}`}}arc(t,r,a,s,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),d=a*Math.sin(s),u=t+l,f=r+d,m=1^o,p=o?s-i:i-s;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>hh||Math.abs(this._y1-f)>hh)&&this._append`L${u},${f}`,a&&(p<0&&(p=p%YA+YA),p>Pfe?this._append`A${a},${a},0,1,${m},${t-l},${r-d}A${a},${a},0,1,${m},${this._x1=u},${this._y1=f}`:p>hh&&this._append`A${a},${a},0,${+(p>=KA)},${m},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function Z3(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new Dfe(t)}function Q3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bU(e){this._context=e}bU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function a2(e){return new bU(e)}function jU(e){return e[0]}function wU(e){return e[1]}function NU(e,t){var r=Qn(!0),a=null,s=a2,i=null,o=Z3(l);e=typeof e=="function"?e:e===void 0?jU:Qn(e),t=typeof t=="function"?t:t===void 0?wU:Qn(t);function l(d){var u,f=(d=Q3(d)).length,m,p=!1,g;for(a==null&&(i=s(g=o())),u=0;u<=f;++u)!(u<f&&r(m=d[u],u,d))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(m,u,d),+t(m,u,d));if(g)return i=null,g+""||null}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:Qn(+d),l):e},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:Qn(+d),l):t},l.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Qn(!!d),l):r},l.curve=function(d){return arguments.length?(s=d,a!=null&&(i=s(a)),l):s},l.context=function(d){return arguments.length?(d==null?a=i=null:i=s(a=d),l):a},l}function ab(e,t,r){var a=null,s=Qn(!0),i=null,o=a2,l=null,d=Z3(u);e=typeof e=="function"?e:e===void 0?jU:Qn(+e),t=typeof t=="function"?t:Qn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?wU:Qn(+r);function u(m){var p,g,b,v=(m=Q3(m)).length,y,j=!1,_,C=new Array(v),A=new Array(v);for(i==null&&(l=o(_=d())),p=0;p<=v;++p){if(!(p<v&&s(y=m[p],p,m))===j)if(j=!j)g=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=p-1;b>=g;--b)l.point(C[b],A[b]);l.lineEnd(),l.areaEnd()}j&&(C[p]=+e(y,p,m),A[p]=+t(y,p,m),l.point(a?+a(y,p,m):C[p],r?+r(y,p,m):A[p]))}if(_)return l=null,_+""||null}function f(){return NU().defined(s).curve(o).context(i)}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:Qn(+m),a=null,u):e},u.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Qn(+m),u):e},u.x1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:Qn(+m),u):a},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:Qn(+m),r=null,u):t},u.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Qn(+m),u):t},u.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Qn(+m),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(a).y(t)},u.defined=function(m){return arguments.length?(s=typeof m=="function"?m:Qn(!!m),u):s},u.curve=function(m){return arguments.length?(o=m,i!=null&&(l=o(i)),u):o},u.context=function(m){return arguments.length?(m==null?i=l=null:l=o(i=m),u):i},u}class SU{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Lfe(e){return new SU(e,!0)}function Ife(e){return new SU(e,!1)}const eO={draw(e,t){const r=Nc(t/u1);e.moveTo(r,0),e.arc(0,0,r,0,n2)}},$fe={draw(e,t){const r=Nc(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},CU=Nc(1/3),Ffe=CU*2,Bfe={draw(e,t){const r=Nc(t/Ffe),a=r*CU;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},zfe={draw(e,t){const r=Nc(t),a=-r/2;e.rect(a,a,r,r)}},qfe=.8908130915292852,_U=d1(u1/10)/d1(7*u1/10),Ufe=d1(n2/10)*_U,Vfe=-vU(n2/10)*_U,Hfe={draw(e,t){const r=Nc(t*qfe),a=Ufe*r,s=Vfe*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const o=n2*i/5,l=vU(o),d=d1(o);e.lineTo(d*r,-l*r),e.lineTo(l*a-d*s,d*a+l*s)}e.closePath()}},K5=Nc(3),Gfe={draw(e,t){const r=-Nc(t/(K5*3));e.moveTo(0,r*2),e.lineTo(-K5*r,-r),e.lineTo(K5*r,-r),e.closePath()}},cl=-.5,dl=Nc(3)/2,XA=1/Nc(12),Wfe=(XA/2+1)*3,Kfe={draw(e,t){const r=Nc(t/Wfe),a=r/2,s=r*XA,i=a,o=r*XA+r,l=-i,d=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,d),e.lineTo(cl*a-dl*s,dl*a+cl*s),e.lineTo(cl*i-dl*o,dl*i+cl*o),e.lineTo(cl*l-dl*d,dl*l+cl*d),e.lineTo(cl*a+dl*s,cl*s-dl*a),e.lineTo(cl*i+dl*o,cl*o-dl*i),e.lineTo(cl*l+dl*d,cl*d-dl*l),e.closePath()}};function Yfe(e,t){let r=null,a=Z3(s);e=typeof e=="function"?e:Qn(e||eO),t=typeof t=="function"?t:Qn(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Qn(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Qn(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function f1(){}function h1(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function AU(e){this._context=e}AU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:h1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:h1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Xfe(e){return new AU(e)}function kU(e){this._context=e}kU.prototype={areaStart:f1,areaEnd:f1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:h1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Jfe(e){return new kU(e)}function OU(e){this._context=e}OU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:h1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zfe(e){return new OU(e)}function EU(e){this._context=e}EU.prototype={areaStart:f1,areaEnd:f1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Qfe(e){return new EU(e)}function gM(e){return e<0?-1:1}function xM(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(r-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return(gM(i)+gM(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function vM(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Y5(e,t,r){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*r,i,o)}function m1(e){this._context=e}m1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Y5(this,this._t0,vM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Y5(this,vM(this,r=xM(this,e,t)),r);break;default:Y5(this,this._t0,r=xM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function TU(e){this._context=new RU(e)}(TU.prototype=Object.create(m1.prototype)).point=function(e,t){m1.prototype.point.call(this,t,e)};function RU(e){this._context=e}RU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function ehe(e){return new m1(e)}function the(e){return new TU(e)}function PU(e){this._context=e}PU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=yM(e),s=yM(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function yM(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function rhe(e){return new PU(e)}function s2(e,t){this._context=e,this._t=t}s2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function nhe(e){return new s2(e,.5)}function ahe(e){return new s2(e,0)}function she(e){return new s2(e,1)}function Up(e,t){if((o=e.length)>1)for(var r=1,a,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function JA(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function ihe(e,t){return e[t]}function ohe(e){const t=[];return t.key=e,t}function lhe(){var e=Qn([]),t=JA,r=Up,a=ihe;function s(i){var o=Array.from(e.apply(this,arguments),ohe),l,d=o.length,u=-1,f;for(const m of i)for(l=0,++u;l<d;++l)(o[l][u]=[0,+a(m,o[l].key,u,i)]).data=m;for(l=0,f=Q3(t(o));l<d;++l)o[f[l]].index=l;return r(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Qn(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:Qn(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?JA:typeof i=="function"?i:Qn(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Up,s):r},s}function che(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<a;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<a;++r)e[r][s][1]/=o}Up(e,t)}}function dhe(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}Up(e,t)}}function uhe(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,o;a<i;++a){for(var l=0,d=0,u=0;l<o;++l){for(var f=e[t[l]],m=f[a][1]||0,p=f[a-1][1]||0,g=(m-p)/2,b=0;b<l;++b){var v=e[t[b]],y=v[a][1]||0,j=v[a-1][1]||0;g+=y-j}d+=m,u+=g*m}s[a-1][1]+=s[a-1][0]=r,d&&(r-=u/d)}s[a-1][1]+=s[a-1][0]=r,Up(e,t)}}function Rv(e){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rv(e)}var fhe=["type","size","sizeType"];function ZA(){return ZA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ZA.apply(this,arguments)}function bM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function jM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bM(Object(r),!0).forEach(function(a){hhe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bM(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function hhe(e,t,r){return t=mhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mhe(e){var t=phe(e,"string");return Rv(t)=="symbol"?t:t+""}function phe(e,t){if(Rv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Rv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ghe(e,t){if(e==null)return{};var r=xhe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function xhe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var MU={symbolCircle:eO,symbolCross:$fe,symbolDiamond:Bfe,symbolSquare:zfe,symbolStar:Hfe,symbolTriangle:Gfe,symbolWye:Kfe},vhe=Math.PI/180,yhe=function(t){var r="symbol".concat(r2(t));return MU[r]||eO},bhe=function(t,r,a){if(r==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*vhe;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},jhe=function(t,r){MU["symbol".concat(r2(t))]=r},i2=function(t){var r=t.type,a=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,d=ghe(t,fhe),u=jM(jM({},d),{},{type:a,size:i,sizeType:l}),f=function(){var y=yhe(a),j=Yfe().type(y).size(bhe(i,l,a));return j()},m=u.className,p=u.cx,g=u.cy,b=tr(u,!0);return p===+p&&g===+g&&i===+i?pe.createElement("path",ZA({},b,{className:Pr("recharts-symbols",m),transform:"translate(".concat(p,", ").concat(g,")"),d:f()})):null};i2.registerSymbol=jhe;function Vp(e){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vp(e)}function QA(){return QA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},QA.apply(this,arguments)}function wM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function whe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wM(Object(r),!0).forEach(function(a){Pv(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wM(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Nhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function She(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,LU(a.key),a)}}function Che(e,t,r){return t&&She(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _he(e,t,r){return t=p1(t),Ahe(e,DU()?Reflect.construct(t,r||[],p1(e).constructor):t.apply(e,r))}function Ahe(e,t){if(t&&(Vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return khe(e)}function khe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DU=function(){return!!e})()}function p1(e){return p1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},p1(e)}function Ohe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e4(e,t)}function e4(e,t){return e4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e4(e,t)}function Pv(e,t,r){return t=LU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LU(e){var t=Ehe(e,"string");return Vp(t)=="symbol"?t:t+""}function Ehe(e,t){if(Vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Vp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ul=32,tO=(function(e){function t(){return Nhe(this,t),_he(this,t,arguments)}return Ohe(t,e),Che(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=ul/2,o=ul/6,l=ul/3,d=a.inactive?s:a.color;if(a.type==="plainline")return pe.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:ul,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return pe.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(ul,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return pe.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(ul/8,"h").concat(ul,"v").concat(ul*3/4,"h").concat(-ul,"z"),className:"recharts-legend-icon"});if(pe.isValidElement(a.legendIcon)){var u=whe({},a);return delete u.legendIcon,pe.cloneElement(a.legendIcon,u)}return pe.createElement(i2,{fill:d,cx:i,cy:i,size:ul,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,d=s.formatter,u=s.inactiveColor,f={x:0,y:0,width:ul,height:ul},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(g,b){var v=g.formatter||d,y=Pr(Pv(Pv({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",g.inactive));if(g.type==="none")return null;var j=wr(g.value)?null:g.value;xc(!wr(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=g.inactive?u:g.color;return pe.createElement("li",QA({className:y,style:m,key:"legend-item-".concat(b)},jf(a.props,g,b)),pe.createElement(GA,{width:o,height:o,viewBox:f,style:p},a.renderIcon(g)),pe.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},v?v(j,g,b):j))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,o=a.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return pe.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(N.PureComponent);Pv(tO,"displayName","Legend");Pv(tO,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var X5,NM;function The(){if(NM)return X5;NM=1;var e=Qj();function t(){this.__data__=new e,this.size=0}return X5=t,X5}var J5,SM;function Rhe(){if(SM)return J5;SM=1;function e(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a}return J5=e,J5}var Z5,CM;function Phe(){if(CM)return Z5;CM=1;function e(t){return this.__data__.get(t)}return Z5=e,Z5}var Q5,_M;function Mhe(){if(_M)return Q5;_M=1;function e(t){return this.__data__.has(t)}return Q5=e,Q5}var eS,AM;function Dhe(){if(AM)return eS;AM=1;var e=Qj(),t=G3(),r=W3(),a=200;function s(i,o){var l=this.__data__;if(l instanceof e){var d=l.__data__;if(!t||d.length<a-1)return d.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(d)}return l.set(i,o),this.size=l.size,this}return eS=s,eS}var tS,kM;function IU(){if(kM)return tS;kM=1;var e=Qj(),t=The(),r=Rhe(),a=Phe(),s=Mhe(),i=Dhe();function o(l){var d=this.__data__=new e(l);this.size=d.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=a,o.prototype.has=s,o.prototype.set=i,tS=o,tS}var rS,OM;function Lhe(){if(OM)return rS;OM=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return rS=t,rS}var nS,EM;function Ihe(){if(EM)return nS;EM=1;function e(t){return this.__data__.has(t)}return nS=e,nS}var aS,TM;function $U(){if(TM)return aS;TM=1;var e=W3(),t=Lhe(),r=Ihe();function a(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return a.prototype.add=a.prototype.push=t,a.prototype.has=r,aS=a,aS}var sS,RM;function FU(){if(RM)return sS;RM=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(r(t[a],a,t))return!0;return!1}return sS=e,sS}var iS,PM;function BU(){if(PM)return iS;PM=1;function e(t,r){return t.has(r)}return iS=e,iS}var oS,MM;function zU(){if(MM)return oS;MM=1;var e=$U(),t=FU(),r=BU(),a=1,s=2;function i(o,l,d,u,f,m){var p=d&a,g=o.length,b=l.length;if(g!=b&&!(p&&b>g))return!1;var v=m.get(o),y=m.get(l);if(v&&y)return v==l&&y==o;var j=-1,_=!0,C=d&s?new e:void 0;for(m.set(o,l),m.set(l,o);++j<g;){var A=o[j],S=l[j];if(u)var T=p?u(S,A,j,l,o,m):u(A,S,j,o,l,m);if(T!==void 0){if(T)continue;_=!1;break}if(C){if(!t(l,function(O,R){if(!r(C,R)&&(A===O||f(A,O,d,u,m)))return C.push(R)})){_=!1;break}}else if(!(A===S||f(A,S,d,u,m))){_=!1;break}}return m.delete(o),m.delete(l),_}return oS=i,oS}var lS,DM;function $he(){if(DM)return lS;DM=1;var e=md(),t=e.Uint8Array;return lS=t,lS}var cS,LM;function Fhe(){if(LM)return cS;LM=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s,i){a[++r]=[i,s]}),a}return cS=e,cS}var dS,IM;function rO(){if(IM)return dS;IM=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s){a[++r]=s}),a}return dS=e,dS}var uS,$M;function Bhe(){if($M)return uS;$M=1;var e=zy(),t=$he(),r=H3(),a=zU(),s=Fhe(),i=rO(),o=1,l=2,d="[object Boolean]",u="[object Date]",f="[object Error]",m="[object Map]",p="[object Number]",g="[object RegExp]",b="[object Set]",v="[object String]",y="[object Symbol]",j="[object ArrayBuffer]",_="[object DataView]",C=e?e.prototype:void 0,A=C?C.valueOf:void 0;function S(T,O,R,M,I,D,$){switch(R){case _:if(T.byteLength!=O.byteLength||T.byteOffset!=O.byteOffset)return!1;T=T.buffer,O=O.buffer;case j:return!(T.byteLength!=O.byteLength||!D(new t(T),new t(O)));case d:case u:case p:return r(+T,+O);case f:return T.name==O.name&&T.message==O.message;case g:case v:return T==O+"";case m:var K=s;case b:var U=M&o;if(K||(K=i),T.size!=O.size&&!U)return!1;var J=$.get(T);if(J)return J==O;M|=l,$.set(T,O);var V=a(K(T),K(O),M,I,D,$);return $.delete(T),V;case y:if(A)return A.call(T)==A.call(O)}return!1}return uS=S,uS}var fS,FM;function qU(){if(FM)return fS;FM=1;function e(t,r){for(var a=-1,s=r.length,i=t.length;++a<s;)t[i+a]=r[a];return t}return fS=e,fS}var hS,BM;function zhe(){if(BM)return hS;BM=1;var e=qU(),t=xo();function r(a,s,i){var o=s(a);return t(a)?o:e(o,i(a))}return hS=r,hS}var mS,zM;function qhe(){if(zM)return mS;zM=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=0,o=[];++a<s;){var l=t[a];r(l,a,t)&&(o[i++]=l)}return o}return mS=e,mS}var pS,qM;function Uhe(){if(qM)return pS;qM=1;function e(){return[]}return pS=e,pS}var gS,UM;function Vhe(){if(UM)return gS;UM=1;var e=qhe(),t=Uhe(),r=Object.prototype,a=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return a.call(o,l)}))}:t;return gS=i,gS}var xS,VM;function Hhe(){if(VM)return xS;VM=1;function e(t,r){for(var a=-1,s=Array(t);++a<t;)s[a]=r(a);return s}return xS=e,xS}var vS,HM;function Ghe(){if(HM)return vS;HM=1;var e=xu(),t=vu(),r="[object Arguments]";function a(s){return t(s)&&e(s)==r}return vS=a,vS}var yS,GM;function nO(){if(GM)return yS;GM=1;var e=Ghe(),t=vu(),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&a.call(o,"callee")&&!s.call(o,"callee")};return yS=i,yS}var Jx={exports:{}},bS,WM;function Whe(){if(WM)return bS;WM=1;function e(){return!1}return bS=e,bS}Jx.exports;var KM;function UU(){return KM||(KM=1,(function(e,t){var r=md(),a=Whe(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,d=l?l.isBuffer:void 0,u=d||a;e.exports=u})(Jx,Jx.exports)),Jx.exports}var jS,YM;function aO(){if(YM)return jS;YM=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(a,s){var i=typeof a;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<s}return jS=r,jS}var wS,XM;function sO(){if(XM)return wS;XM=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return wS=t,wS}var NS,JM;function Khe(){if(JM)return NS;JM=1;var e=xu(),t=sO(),r=vu(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",d="[object Function]",u="[object Map]",f="[object Number]",m="[object Object]",p="[object RegExp]",g="[object Set]",b="[object String]",v="[object WeakMap]",y="[object ArrayBuffer]",j="[object DataView]",_="[object Float32Array]",C="[object Float64Array]",A="[object Int8Array]",S="[object Int16Array]",T="[object Int32Array]",O="[object Uint8Array]",R="[object Uint8ClampedArray]",M="[object Uint16Array]",I="[object Uint32Array]",D={};D[_]=D[C]=D[A]=D[S]=D[T]=D[O]=D[R]=D[M]=D[I]=!0,D[a]=D[s]=D[y]=D[i]=D[j]=D[o]=D[l]=D[d]=D[u]=D[f]=D[m]=D[p]=D[g]=D[b]=D[v]=!1;function $(K){return r(K)&&t(K.length)&&!!D[e(K)]}return NS=$,NS}var SS,ZM;function VU(){if(ZM)return SS;ZM=1;function e(t){return function(r){return t(r)}}return SS=e,SS}var Zx={exports:{}};Zx.exports;var QM;function Yhe(){return QM||(QM=1,(function(e,t){var r=cU(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i&&r.process,l=(function(){try{var d=s&&s.require&&s.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Zx,Zx.exports)),Zx.exports}var CS,eD;function HU(){if(eD)return CS;eD=1;var e=Khe(),t=VU(),r=Yhe(),a=r&&r.isTypedArray,s=a?t(a):e;return CS=s,CS}var _S,tD;function Xhe(){if(tD)return _S;tD=1;var e=Hhe(),t=nO(),r=xo(),a=UU(),s=aO(),i=HU(),o=Object.prototype,l=o.hasOwnProperty;function d(u,f){var m=r(u),p=!m&&t(u),g=!m&&!p&&a(u),b=!m&&!p&&!g&&i(u),v=m||p||g||b,y=v?e(u.length,String):[],j=y.length;for(var _ in u)(f||l.call(u,_))&&!(v&&(_=="length"||g&&(_=="offset"||_=="parent")||b&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||s(_,j)))&&y.push(_);return y}return _S=d,_S}var AS,rD;function Jhe(){if(rD)return AS;rD=1;var e=Object.prototype;function t(r){var a=r&&r.constructor,s=typeof a=="function"&&a.prototype||e;return r===s}return AS=t,AS}var kS,nD;function GU(){if(nD)return kS;nD=1;function e(t,r){return function(a){return t(r(a))}}return kS=e,kS}var OS,aD;function Zhe(){if(aD)return OS;aD=1;var e=GU(),t=e(Object.keys,Object);return OS=t,OS}var ES,sD;function Qhe(){if(sD)return ES;sD=1;var e=Jhe(),t=Zhe(),r=Object.prototype,a=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))a.call(i,l)&&l!="constructor"&&o.push(l);return o}return ES=s,ES}var TS,iD;function qy(){if(iD)return TS;iD=1;var e=V3(),t=sO();function r(a){return a!=null&&t(a.length)&&!e(a)}return TS=r,TS}var RS,oD;function o2(){if(oD)return RS;oD=1;var e=Xhe(),t=Qhe(),r=qy();function a(s){return r(s)?e(s):t(s)}return RS=a,RS}var PS,lD;function eme(){if(lD)return PS;lD=1;var e=zhe(),t=Vhe(),r=o2();function a(s){return e(s,r,t)}return PS=a,PS}var MS,cD;function tme(){if(cD)return MS;cD=1;var e=eme(),t=1,r=Object.prototype,a=r.hasOwnProperty;function s(i,o,l,d,u,f){var m=l&t,p=e(i),g=p.length,b=e(o),v=b.length;if(g!=v&&!m)return!1;for(var y=g;y--;){var j=p[y];if(!(m?j in o:a.call(o,j)))return!1}var _=f.get(i),C=f.get(o);if(_&&C)return _==o&&C==i;var A=!0;f.set(i,o),f.set(o,i);for(var S=m;++y<g;){j=p[y];var T=i[j],O=o[j];if(d)var R=m?d(O,T,j,o,i,f):d(T,O,j,i,o,f);if(!(R===void 0?T===O||u(T,O,l,d,f):R)){A=!1;break}S||(S=j=="constructor")}if(A&&!S){var M=i.constructor,I=o.constructor;M!=I&&"constructor"in i&&"constructor"in o&&!(typeof M=="function"&&M instanceof M&&typeof I=="function"&&I instanceof I)&&(A=!1)}return f.delete(i),f.delete(o),A}return MS=s,MS}var DS,dD;function rme(){if(dD)return DS;dD=1;var e=em(),t=md(),r=e(t,"DataView");return DS=r,DS}var LS,uD;function nme(){if(uD)return LS;uD=1;var e=em(),t=md(),r=e(t,"Promise");return LS=r,LS}var IS,fD;function WU(){if(fD)return IS;fD=1;var e=em(),t=md(),r=e(t,"Set");return IS=r,IS}var $S,hD;function ame(){if(hD)return $S;hD=1;var e=em(),t=md(),r=e(t,"WeakMap");return $S=r,$S}var FS,mD;function sme(){if(mD)return FS;mD=1;var e=rme(),t=G3(),r=nme(),a=WU(),s=ame(),i=xu(),o=dU(),l="[object Map]",d="[object Object]",u="[object Promise]",f="[object Set]",m="[object WeakMap]",p="[object DataView]",g=o(e),b=o(t),v=o(r),y=o(a),j=o(s),_=i;return(e&&_(new e(new ArrayBuffer(1)))!=p||t&&_(new t)!=l||r&&_(r.resolve())!=u||a&&_(new a)!=f||s&&_(new s)!=m)&&(_=function(C){var A=i(C),S=A==d?C.constructor:void 0,T=S?o(S):"";if(T)switch(T){case g:return p;case b:return l;case v:return u;case y:return f;case j:return m}return A}),FS=_,FS}var BS,pD;function ime(){if(pD)return BS;pD=1;var e=IU(),t=zU(),r=Bhe(),a=tme(),s=sme(),i=xo(),o=UU(),l=HU(),d=1,u="[object Arguments]",f="[object Array]",m="[object Object]",p=Object.prototype,g=p.hasOwnProperty;function b(v,y,j,_,C,A){var S=i(v),T=i(y),O=S?f:s(v),R=T?f:s(y);O=O==u?m:O,R=R==u?m:R;var M=O==m,I=R==m,D=O==R;if(D&&o(v)){if(!o(y))return!1;S=!0,M=!1}if(D&&!M)return A||(A=new e),S||l(v)?t(v,y,j,_,C,A):r(v,y,O,j,_,C,A);if(!(j&d)){var $=M&&g.call(v,"__wrapped__"),K=I&&g.call(y,"__wrapped__");if($||K){var U=$?v.value():v,J=K?y.value():y;return A||(A=new e),C(U,J,j,_,A)}}return D?(A||(A=new e),a(v,y,j,_,C,A)):!1}return BS=b,BS}var zS,gD;function iO(){if(gD)return zS;gD=1;var e=ime(),t=vu();function r(a,s,i,o,l){return a===s?!0:a==null||s==null||!t(a)&&!t(s)?a!==a&&s!==s:e(a,s,i,o,r,l)}return zS=r,zS}var qS,xD;function ome(){if(xD)return qS;xD=1;var e=IU(),t=iO(),r=1,a=2;function s(i,o,l,d){var u=l.length,f=u,m=!d;if(i==null)return!f;for(i=Object(i);u--;){var p=l[u];if(m&&p[2]?p[1]!==i[p[0]]:!(p[0]in i))return!1}for(;++u<f;){p=l[u];var g=p[0],b=i[g],v=p[1];if(m&&p[2]){if(b===void 0&&!(g in i))return!1}else{var y=new e;if(d)var j=d(b,v,g,i,o,y);if(!(j===void 0?t(v,b,r|a,d,y):j))return!1}}return!0}return qS=s,qS}var US,vD;function KU(){if(vD)return US;vD=1;var e=Af();function t(r){return r===r&&!e(r)}return US=t,US}var VS,yD;function lme(){if(yD)return VS;yD=1;var e=KU(),t=o2();function r(a){for(var s=t(a),i=s.length;i--;){var o=s[i],l=a[o];s[i]=[o,l,e(l)]}return s}return VS=r,VS}var HS,bD;function YU(){if(bD)return HS;bD=1;function e(t,r){return function(a){return a==null?!1:a[t]===r&&(r!==void 0||t in Object(a))}}return HS=e,HS}var GS,jD;function cme(){if(jD)return GS;jD=1;var e=ome(),t=lme(),r=YU();function a(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return GS=a,GS}var WS,wD;function dme(){if(wD)return WS;wD=1;function e(t,r){return t!=null&&r in Object(t)}return WS=e,WS}var KS,ND;function ume(){if(ND)return KS;ND=1;var e=hU(),t=nO(),r=xo(),a=aO(),s=sO(),i=t2();function o(l,d,u){d=e(d,l);for(var f=-1,m=d.length,p=!1;++f<m;){var g=i(d[f]);if(!(p=l!=null&&u(l,g)))break;l=l[g]}return p||++f!=m?p:(m=l==null?0:l.length,!!m&&s(m)&&a(g,m)&&(r(l)||t(l)))}return KS=o,KS}var YS,SD;function fme(){if(SD)return YS;SD=1;var e=dme(),t=ume();function r(a,s){return a!=null&&t(a,s,e)}return YS=r,YS}var XS,CD;function hme(){if(CD)return XS;CD=1;var e=iO(),t=mU(),r=fme(),a=U3(),s=KU(),i=YU(),o=t2(),l=1,d=2;function u(f,m){return a(f)&&s(m)?i(o(f),m):function(p){var g=t(p,f);return g===void 0&&g===m?r(p,f):e(m,g,l|d)}}return XS=u,XS}var JS,_D;function $g(){if(_D)return JS;_D=1;function e(t){return t}return JS=e,JS}var ZS,AD;function mme(){if(AD)return ZS;AD=1;function e(t){return function(r){return r==null?void 0:r[t]}}return ZS=e,ZS}var QS,kD;function pme(){if(kD)return QS;kD=1;var e=Y3();function t(r){return function(a){return e(a,r)}}return QS=t,QS}var eC,OD;function gme(){if(OD)return eC;OD=1;var e=mme(),t=pme(),r=U3(),a=t2();function s(i){return r(i)?e(a(i)):t(i)}return eC=s,eC}var tC,ED;function pd(){if(ED)return tC;ED=1;var e=cme(),t=hme(),r=$g(),a=xo(),s=gme();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?a(o)?t(o[0],o[1]):e(o):s(o)}return tC=i,tC}var rC,TD;function XU(){if(TD)return rC;TD=1;function e(t,r,a,s){for(var i=t.length,o=a+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return rC=e,rC}var nC,RD;function xme(){if(RD)return nC;RD=1;function e(t){return t!==t}return nC=e,nC}var aC,PD;function vme(){if(PD)return aC;PD=1;function e(t,r,a){for(var s=a-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return aC=e,aC}var sC,MD;function yme(){if(MD)return sC;MD=1;var e=XU(),t=xme(),r=vme();function a(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return sC=a,sC}var iC,DD;function bme(){if(DD)return iC;DD=1;var e=yme();function t(r,a){var s=r==null?0:r.length;return!!s&&e(r,a,0)>-1}return iC=t,iC}var oC,LD;function jme(){if(LD)return oC;LD=1;function e(t,r,a){for(var s=-1,i=t==null?0:t.length;++s<i;)if(a(r,t[s]))return!0;return!1}return oC=e,oC}var lC,ID;function wme(){if(ID)return lC;ID=1;function e(){}return lC=e,lC}var cC,$D;function Nme(){if($D)return cC;$D=1;var e=WU(),t=wme(),r=rO(),a=1/0,s=e&&1/r(new e([,-0]))[1]==a?function(i){return new e(i)}:t;return cC=s,cC}var dC,FD;function Sme(){if(FD)return dC;FD=1;var e=$U(),t=bme(),r=jme(),a=BU(),s=Nme(),i=rO(),o=200;function l(d,u,f){var m=-1,p=t,g=d.length,b=!0,v=[],y=v;if(f)b=!1,p=r;else if(g>=o){var j=u?null:s(d);if(j)return i(j);b=!1,p=a,y=new e}else y=u?[]:v;e:for(;++m<g;){var _=d[m],C=u?u(_):_;if(_=f||_!==0?_:0,b&&C===C){for(var A=y.length;A--;)if(y[A]===C)continue e;u&&y.push(C),v.push(_)}else p(y,C,f)||(y!==v&&y.push(C),v.push(_))}return v}return dC=l,dC}var uC,BD;function Cme(){if(BD)return uC;BD=1;var e=pd(),t=Sme();function r(a,s){return a&&a.length?t(a,e(s,2)):[]}return uC=r,uC}var _me=Cme();const zD=jn(_me);function JU(e,t,r){return t===!0?zD(e,r):wr(t)?zD(e,t):e}function Hp(e){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(e)}var Ame=["ref"];function qD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Vd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qD(Object(r),!0).forEach(function(a){l2(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UD(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,QU(a.key),a)}}function Ome(e,t,r){return t&&UD(e.prototype,t),r&&UD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eme(e,t,r){return t=g1(t),Tme(e,ZU()?Reflect.construct(t,r||[],g1(e).constructor):t.apply(e,r))}function Tme(e,t){if(t&&(Hp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rme(e)}function Rme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZU=function(){return!!e})()}function g1(e){return g1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},g1(e)}function Pme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t4(e,t)}function t4(e,t){return t4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},t4(e,t)}function l2(e,t,r){return t=QU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QU(e){var t=Mme(e,"string");return Hp(t)=="symbol"?t:t+""}function Mme(e,t){if(Hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Hp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Dme(e,t){if(e==null)return{};var r=Lme(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Lme(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Ime(e){return e.value}function $me(e,t){if(pe.isValidElement(e))return pe.cloneElement(e,t);if(typeof e=="function")return pe.createElement(e,t);t.ref;var r=Dme(t,Ame);return pe.createElement(tO,r)}var VD=1,nd=(function(e){function t(){var r;kme(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Eme(this,t,[].concat(s)),l2(r,"lastBoundingBox",{width:-1,height:-1}),r}return Pme(t,e),Ome(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>VD||Math.abs(s.height-this.lastBoundingBox.height)>VD)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Vd({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,d=s.margin,u=s.chartWidth,f=s.chartHeight,m,p;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&i==="vertical"){var g=this.getBBoxSnapshot();m={left:((u||0)-g.width)/2}}else m=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();p={top:((f||0)-b.height)/2}}else p=l==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return Vd(Vd({},m),p)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,o=s.width,l=s.height,d=s.wrapperStyle,u=s.payloadUniqBy,f=s.payload,m=Vd(Vd({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(d)),d);return pe.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(g){a.wrapperNode=g}},$me(i,Vd(Vd({},this.props),{},{payload:JU(f,u,Ime)})))}}],[{key:"getWithHeight",value:function(a,s){var i=Vd(Vd({},this.defaultProps),a.props),o=i.layout;return o==="vertical"&&vt(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||s}:null}}])})(N.PureComponent);l2(nd,"displayName","Legend");l2(nd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var fC,HD;function Fme(){if(HD)return fC;HD=1;var e=zy(),t=nO(),r=xo(),a=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(a&&i&&i[a])}return fC=s,fC}var hC,GD;function eV(){if(GD)return hC;GD=1;var e=qU(),t=Fme();function r(a,s,i,o,l){var d=-1,u=a.length;for(i||(i=t),l||(l=[]);++d<u;){var f=a[d];s>0&&i(f)?s>1?r(f,s-1,i,o,l):e(l,f):o||(l[l.length]=f)}return l}return hC=r,hC}var mC,WD;function Bme(){if(WD)return mC;WD=1;function e(t){return function(r,a,s){for(var i=-1,o=Object(r),l=s(r),d=l.length;d--;){var u=l[t?d:++i];if(a(o[u],u,o)===!1)break}return r}}return mC=e,mC}var pC,KD;function zme(){if(KD)return pC;KD=1;var e=Bme(),t=e();return pC=t,pC}var gC,YD;function tV(){if(YD)return gC;YD=1;var e=zme(),t=o2();function r(a,s){return a&&e(a,s,t)}return gC=r,gC}var xC,XD;function qme(){if(XD)return xC;XD=1;var e=qy();function t(r,a){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=a?o:-1,d=Object(s);(a?l--:++l<o)&&i(d[l],l,d)!==!1;);return s}}return xC=t,xC}var vC,JD;function oO(){if(JD)return vC;JD=1;var e=tV(),t=qme(),r=t(e);return vC=r,vC}var yC,ZD;function rV(){if(ZD)return yC;ZD=1;var e=oO(),t=qy();function r(a,s){var i=-1,o=t(a)?Array(a.length):[];return e(a,function(l,d,u){o[++i]=s(l,d,u)}),o}return yC=r,yC}var bC,QD;function Ume(){if(QD)return bC;QD=1;function e(t,r){var a=t.length;for(t.sort(r);a--;)t[a]=t[a].value;return t}return bC=e,bC}var jC,eL;function Vme(){if(eL)return jC;eL=1;var e=Dg();function t(r,a){if(r!==a){var s=r!==void 0,i=r===null,o=r===r,l=e(r),d=a!==void 0,u=a===null,f=a===a,m=e(a);if(!u&&!m&&!l&&r>a||l&&d&&f&&!u&&!m||i&&d&&f||!s&&f||!o)return 1;if(!i&&!l&&!m&&r<a||m&&s&&o&&!i&&!l||u&&s&&o||!d&&o||!f)return-1}return 0}return jC=t,jC}var wC,tL;function Hme(){if(tL)return wC;tL=1;var e=Vme();function t(r,a,s){for(var i=-1,o=r.criteria,l=a.criteria,d=o.length,u=s.length;++i<d;){var f=e(o[i],l[i]);if(f){if(i>=u)return f;var m=s[i];return f*(m=="desc"?-1:1)}}return r.index-a.index}return wC=t,wC}var NC,rL;function Gme(){if(rL)return NC;rL=1;var e=K3(),t=Y3(),r=pd(),a=rV(),s=Ume(),i=VU(),o=Hme(),l=$g(),d=xo();function u(f,m,p){m.length?m=e(m,function(v){return d(v)?function(y){return t(y,v.length===1?v[0]:v)}:v}):m=[l];var g=-1;m=e(m,i(r));var b=a(f,function(v,y,j){var _=e(m,function(C){return C(v)});return{criteria:_,index:++g,value:v}});return s(b,function(v,y){return o(v,y,p)})}return NC=u,NC}var SC,nL;function Wme(){if(nL)return SC;nL=1;function e(t,r,a){switch(a.length){case 0:return t.call(r);case 1:return t.call(r,a[0]);case 2:return t.call(r,a[0],a[1]);case 3:return t.call(r,a[0],a[1],a[2])}return t.apply(r,a)}return SC=e,SC}var CC,aL;function Kme(){if(aL)return CC;aL=1;var e=Wme(),t=Math.max;function r(a,s,i){return s=t(s===void 0?a.length-1:s,0),function(){for(var o=arguments,l=-1,d=t(o.length-s,0),u=Array(d);++l<d;)u[l]=o[s+l];l=-1;for(var f=Array(s+1);++l<s;)f[l]=o[l];return f[s]=i(u),e(a,this,f)}}return CC=r,CC}var _C,sL;function Yme(){if(sL)return _C;sL=1;function e(t){return function(){return t}}return _C=e,_C}var AC,iL;function nV(){if(iL)return AC;iL=1;var e=em(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return AC=t,AC}var kC,oL;function Xme(){if(oL)return kC;oL=1;var e=Yme(),t=nV(),r=$g(),a=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return kC=a,kC}var OC,lL;function Jme(){if(lL)return OC;lL=1;var e=800,t=16,r=Date.now;function a(s){var i=0,o=0;return function(){var l=r(),d=t-(l-o);if(o=l,d>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return OC=a,OC}var EC,cL;function Zme(){if(cL)return EC;cL=1;var e=Xme(),t=Jme(),r=t(e);return EC=r,EC}var TC,dL;function Qme(){if(dL)return TC;dL=1;var e=$g(),t=Kme(),r=Zme();function a(s,i){return r(t(s,i,e),s+"")}return TC=a,TC}var RC,uL;function c2(){if(uL)return RC;uL=1;var e=H3(),t=qy(),r=aO(),a=Af();function s(i,o,l){if(!a(l))return!1;var d=typeof o;return(d=="number"?t(l)&&r(o,l.length):d=="string"&&o in l)?e(l[o],i):!1}return RC=s,RC}var PC,fL;function epe(){if(fL)return PC;fL=1;var e=eV(),t=Gme(),r=Qme(),a=c2(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&a(i,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return PC=s,PC}var tpe=epe();const lO=jn(tpe);function Mv(e){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mv(e)}function r4(){return r4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},r4.apply(this,arguments)}function rpe(e,t){return ipe(e)||spe(e,t)||ape(e,t)||npe()}function npe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ape(e,t){if(e){if(typeof e=="string")return hL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hL(e,t)}}function hL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function spe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function ipe(e){if(Array.isArray(e))return e}function mL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function MC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mL(Object(r),!0).forEach(function(a){ope(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ope(e,t,r){return t=lpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lpe(e){var t=cpe(e,"string");return Mv(t)=="symbol"?t:t+""}function cpe(e,t){if(Mv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Mv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dpe(e){return Array.isArray(e)&&Ss(e[0])&&Ss(e[1])?e.join(" ~ "):e}var upe=function(t){var r=t.separator,a=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,d=t.labelStyle,u=d===void 0?{}:d,f=t.payload,m=t.formatter,p=t.itemSorter,g=t.wrapperClassName,b=t.labelClassName,v=t.label,y=t.labelFormatter,j=t.accessibilityLayer,_=j===void 0?!1:j,C=function(){if(f&&f.length){var $={padding:0,margin:0},K=(p?lO(f,p):f).map(function(U,J){if(U.type==="none")return null;var V=MC({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},l),G=U.formatter||m||dpe,q=U.value,Y=U.name,Q=q,F=Y;if(G&&Q!=null&&F!=null){var z=G(q,Y,U,J,f);if(Array.isArray(z)){var H=rpe(z,2);Q=H[0],F=H[1]}else Q=z}return pe.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(J),style:V},Ss(F)?pe.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Ss(F)?pe.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,pe.createElement("span",{className:"recharts-tooltip-item-value"},Q),pe.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return pe.createElement("ul",{className:"recharts-tooltip-item-list",style:$},K)}return null},A=MC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=MC({margin:0},u),T=!yr(v),O=T?v:"",R=Pr("recharts-default-tooltip",g),M=Pr("recharts-tooltip-label",b);T&&y&&f!==void 0&&f!==null&&(O=y(v,f));var I=_?{role:"status","aria-live":"assertive"}:{};return pe.createElement("div",r4({className:R,style:A},I),pe.createElement("p",{className:M,style:S},pe.isValidElement(O)?O:"".concat(O)),C())};function Dv(e){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(e)}function sb(e,t,r){return t=fpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fpe(e){var t=hpe(e,"string");return Dv(t)=="symbol"?t:t+""}function hpe(e,t){if(Dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Dv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mx="recharts-tooltip-wrapper",mpe={visibility:"hidden"};function ppe(e){var t=e.coordinate,r=e.translateX,a=e.translateY;return Pr(Mx,sb(sb(sb(sb({},"".concat(Mx,"-right"),vt(r)&&t&&vt(t.x)&&r>=t.x),"".concat(Mx,"-left"),vt(r)&&t&&vt(t.x)&&r<t.x),"".concat(Mx,"-bottom"),vt(a)&&t&&vt(t.y)&&a>=t.y),"".concat(Mx,"-top"),vt(a)&&t&&vt(t.y)&&a<t.y))}function pL(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,d=e.viewBox,u=e.viewBoxDimension;if(i&&vt(i[a]))return i[a];var f=r[a]-l-s,m=r[a]+s;if(t[a])return o[a]?f:m;if(o[a]){var p=f,g=d[a];return p<g?Math.max(m,d[a]):Math.max(f,d[a])}var b=m+l,v=d[a]+u;return b>v?Math.max(f,d[a]):Math.max(m,d[a])}function gpe(e){var t=e.translateX,r=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function xpe(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,d=e.viewBox,u,f,m;return o.height>0&&o.width>0&&r?(f=pL({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=pL({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),u=gpe({translateX:f,translateY:m,useTranslate3d:l})):u=mpe,{cssProperties:u,cssClasses:ppe({translateX:f,translateY:m,coordinate:r})}}function Gp(e){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gp(e)}function gL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function xL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gL(Object(r),!0).forEach(function(a){a4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ype(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,sV(a.key),a)}}function bpe(e,t,r){return t&&ype(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jpe(e,t,r){return t=x1(t),wpe(e,aV()?Reflect.construct(t,r||[],x1(e).constructor):t.apply(e,r))}function wpe(e,t){if(t&&(Gp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Npe(e)}function Npe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aV=function(){return!!e})()}function x1(e){return x1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x1(e)}function Spe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n4(e,t)}function n4(e,t){return n4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},n4(e,t)}function a4(e,t,r){return t=sV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sV(e){var t=Cpe(e,"string");return Gp(t)=="symbol"?t:t+""}function Cpe(e,t){if(Gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vL=1,_pe=(function(e){function t(){var r;vpe(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=jpe(this,t,[].concat(s)),a4(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),a4(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,d,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&l!==void 0?l:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return Spe(t,e),bpe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>vL||Math.abs(a.height-this.state.lastBoundingBox.height)>vL)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,d=s.animationEasing,u=s.children,f=s.coordinate,m=s.hasPayload,p=s.isAnimationActive,g=s.offset,b=s.position,v=s.reverseDirection,y=s.useTranslate3d,j=s.viewBox,_=s.wrapperStyle,C=xpe({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:g,position:b,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:j}),A=C.cssClasses,S=C.cssProperties,T=xL(xL({transition:p&&i?"transform ".concat(l,"ms ").concat(d):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},_);return pe.createElement("div",{tabIndex:-1,className:A,style:T,ref:function(R){a.wrapperNode=R}},u)}}])})(N.PureComponent),Ape=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},yu={isSsr:Ape()};function Wp(e){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function yL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yL(Object(r),!0).forEach(function(a){cO(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ope(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,oV(a.key),a)}}function Epe(e,t,r){return t&&Ope(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tpe(e,t,r){return t=v1(t),Rpe(e,iV()?Reflect.construct(t,r||[],v1(e).constructor):t.apply(e,r))}function Rpe(e,t){if(t&&(Wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ppe(e)}function Ppe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iV=function(){return!!e})()}function v1(e){return v1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v1(e)}function Mpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s4(e,t)}function s4(e,t){return s4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},s4(e,t)}function cO(e,t,r){return t=oV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oV(e){var t=Dpe(e,"string");return Wp(t)=="symbol"?t:t+""}function Dpe(e,t){if(Wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Wp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Lpe(e){return e.dataKey}function Ipe(e,t){return pe.isValidElement(e)?pe.cloneElement(e,t):typeof e=="function"?pe.createElement(e,t):pe.createElement(upe,t)}var Ii=(function(e){function t(){return kpe(this,t),Tpe(this,t,arguments)}return Mpe(t,e),Epe(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,d=s.animationEasing,u=s.content,f=s.coordinate,m=s.filterNull,p=s.isAnimationActive,g=s.offset,b=s.payload,v=s.payloadUniqBy,y=s.position,j=s.reverseDirection,_=s.useTranslate3d,C=s.viewBox,A=s.wrapperStyle,S=b??[];m&&S.length&&(S=JU(b.filter(function(O){return O.value!=null&&(O.hide!==!0||a.props.includeHidden)}),v,Lpe));var T=S.length>0;return pe.createElement(_pe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:d,isAnimationActive:p,active:i,coordinate:f,hasPayload:T,offset:g,position:y,reverseDirection:j,useTranslate3d:_,viewBox:C,wrapperStyle:A},Ipe(u,bL(bL({},this.props),{},{payload:S})))}}])})(N.PureComponent);cO(Ii,"displayName","Tooltip");cO(Ii,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!yu.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var DC,jL;function $pe(){if(jL)return DC;jL=1;var e=md(),t=function(){return e.Date.now()};return DC=t,DC}var LC,wL;function Fpe(){if(wL)return LC;wL=1;var e=/\s/;function t(r){for(var a=r.length;a--&&e.test(r.charAt(a)););return a}return LC=t,LC}var IC,NL;function Bpe(){if(NL)return IC;NL=1;var e=Fpe(),t=/^\s+/;function r(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return IC=r,IC}var $C,SL;function lV(){if(SL)return $C;SL=1;var e=Bpe(),t=Af(),r=Dg(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function d(u){if(typeof u=="number")return u;if(r(u))return a;if(t(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=t(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=e(u);var m=i.test(u);return m||o.test(u)?l(u.slice(2),m?2:8):s.test(u)?a:+u}return $C=d,$C}var FC,CL;function zpe(){if(CL)return FC;CL=1;var e=Af(),t=$pe(),r=lV(),a="Expected a function",s=Math.max,i=Math.min;function o(l,d,u){var f,m,p,g,b,v,y=0,j=!1,_=!1,C=!0;if(typeof l!="function")throw new TypeError(a);d=r(d)||0,e(u)&&(j=!!u.leading,_="maxWait"in u,p=_?s(r(u.maxWait)||0,d):p,C="trailing"in u?!!u.trailing:C);function A(K){var U=f,J=m;return f=m=void 0,y=K,g=l.apply(J,U),g}function S(K){return y=K,b=setTimeout(R,d),j?A(K):g}function T(K){var U=K-v,J=K-y,V=d-U;return _?i(V,p-J):V}function O(K){var U=K-v,J=K-y;return v===void 0||U>=d||U<0||_&&J>=p}function R(){var K=t();if(O(K))return M(K);b=setTimeout(R,T(K))}function M(K){return b=void 0,C&&f?A(K):(f=m=void 0,g)}function I(){b!==void 0&&clearTimeout(b),y=0,f=v=m=b=void 0}function D(){return b===void 0?g:M(t())}function $(){var K=t(),U=O(K);if(f=arguments,m=this,v=K,U){if(b===void 0)return S(v);if(_)return clearTimeout(b),b=setTimeout(R,d),A(v)}return b===void 0&&(b=setTimeout(R,d)),g}return $.cancel=I,$.flush=D,$}return FC=o,FC}var BC,_L;function qpe(){if(_L)return BC;_L=1;var e=zpe(),t=Af(),r="Expected a function";function a(s,i,o){var l=!0,d=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,d="trailing"in o?!!o.trailing:d),e(s,i,{leading:l,maxWait:i,trailing:d})}return BC=a,BC}var Upe=qpe();const cV=jn(Upe);function Lv(e){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lv(e)}function AL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ib(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AL(Object(r),!0).forEach(function(a){Vpe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Vpe(e,t,r){return t=Hpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hpe(e){var t=Gpe(e,"string");return Lv(t)=="symbol"?t:t+""}function Gpe(e,t){if(Lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Lv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wpe(e,t){return Jpe(e)||Xpe(e,t)||Ype(e,t)||Kpe()}function Kpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ype(e,t){if(e){if(typeof e=="string")return kL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kL(e,t)}}function kL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Xpe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Jpe(e){if(Array.isArray(e))return e}var Cl=N.forwardRef(function(e,t){var r=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,o=i===void 0?"100%":i,l=e.height,d=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,m=e.minHeight,p=e.maxHeight,g=e.children,b=e.debounce,v=b===void 0?0:b,y=e.id,j=e.className,_=e.onResize,C=e.style,A=C===void 0?{}:C,S=N.useRef(null),T=N.useRef();T.current=_,N.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var O=N.useState({containerWidth:s.width,containerHeight:s.height}),R=Wpe(O,2),M=R[0],I=R[1],D=N.useCallback(function(K,U){I(function(J){var V=Math.round(K),G=Math.round(U);return J.containerWidth===V&&J.containerHeight===G?J:{containerWidth:V,containerHeight:G}})},[]);N.useEffect(function(){var K=function(Y){var Q,F=Y[0].contentRect,z=F.width,H=F.height;D(z,H),(Q=T.current)===null||Q===void 0||Q.call(T,z,H)};v>0&&(K=cV(K,v,{trailing:!0,leading:!1}));var U=new ResizeObserver(K),J=S.current.getBoundingClientRect(),V=J.width,G=J.height;return D(V,G),U.observe(S.current),function(){U.disconnect()}},[D,v]);var $=N.useMemo(function(){var K=M.containerWidth,U=M.containerHeight;if(K<0||U<0)return null;xc(jh(o)||jh(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),xc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var J=jh(o)?K:o,V=jh(d)?U:d;r&&r>0&&(J?V=J/r:V&&(J=V*r),p&&V>p&&(V=p)),xc(J>0||V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,J,V,o,d,f,m,r);var G=!Array.isArray(g)&&tu(g.type).endsWith("Chart");return pe.Children.map(g,function(q){return pe.isValidElement(q)?N.cloneElement(q,ib({width:J,height:V},G?{style:ib({height:"100%",width:"100%",maxHeight:V,maxWidth:J},q.props.style)}:{})):q})},[r,g,d,p,m,f,M,o]);return pe.createElement("div",{id:y?"".concat(y):void 0,className:Pr("recharts-responsive-container",j),style:ib(ib({},A),{},{width:o,height:d,minWidth:f,minHeight:m,maxHeight:p}),ref:S},$)}),cu=function(t){return null};cu.displayName="Cell";function Iv(e){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iv(e)}function OL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function i4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OL(Object(r),!0).forEach(function(a){Zpe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Zpe(e,t,r){return t=Qpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qpe(e){var t=ege(e,"string");return Iv(t)=="symbol"?t:t+""}function ege(e,t){if(Iv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Iv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qm={widthCache:{},cacheCount:0},tge=2e3,rge={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},EL="recharts_measurement_span";function nge(e){var t=i4({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var av=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||yu.isSsr)return{width:0,height:0};var a=nge(r),s=JSON.stringify({text:t,copyStyle:a});if(Qm.widthCache[s])return Qm.widthCache[s];try{var i=document.getElementById(EL);i||(i=document.createElement("span"),i.setAttribute("id",EL),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=i4(i4({},rge),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),d={width:l.width,height:l.height};return Qm.widthCache[s]=d,++Qm.cacheCount>tge&&(Qm.cacheCount=0,Qm.widthCache={}),d}catch{return{width:0,height:0}}},age=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function $v(e){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$v(e)}function y1(e,t){return lge(e)||oge(e,t)||ige(e,t)||sge()}function sge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ige(e,t){if(e){if(typeof e=="string")return TL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TL(e,t)}}function TL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function oge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function lge(e){if(Array.isArray(e))return e}function cge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RL(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,uge(a.key),a)}}function dge(e,t,r){return t&&RL(e.prototype,t),r&&RL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uge(e){var t=fge(e,"string");return $v(t)=="symbol"?t:t+""}function fge(e,t){if($v(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if($v(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var PL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ML=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hge=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mge=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,dV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},pge=Object.keys(dV),fp="NaN";function gge(e,t){return e*dV[t]}var ob=(function(){function e(t,r){cge(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!hge.test(r)&&(this.num=NaN,this.unit=""),pge.includes(r)&&(this.num=gge(t,r),this.unit="px")}return dge(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var a,s=(a=mge.exec(r))!==null&&a!==void 0?a:[],i=y1(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function uV(e){if(e.includes(fp))return fp;for(var t=e;t.includes("*")||t.includes("/");){var r,a=(r=PL.exec(t))!==null&&r!==void 0?r:[],s=y1(a,4),i=s[1],o=s[2],l=s[3],d=ob.parse(i??""),u=ob.parse(l??""),f=o==="*"?d.multiply(u):d.divide(u);if(f.isNaN())return fp;t=t.replace(PL,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,p=(m=ML.exec(t))!==null&&m!==void 0?m:[],g=y1(p,4),b=g[1],v=g[2],y=g[3],j=ob.parse(b??""),_=ob.parse(y??""),C=v==="+"?j.add(_):j.subtract(_);if(C.isNaN())return fp;t=t.replace(ML,C.toString())}return t}var DL=/\(([^()]*)\)/;function xge(e){for(var t=e;t.includes("(");){var r=DL.exec(t),a=y1(r,2),s=a[1];t=t.replace(DL,uV(s))}return t}function vge(e){var t=e.replace(/\s+/g,"");return t=xge(t),t=uV(t),t}function yge(e){try{return vge(e)}catch{return fp}}function zC(e){var t=yge(e.slice(5,-1));return t===fp?"":t}var bge=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],jge=["dx","dy","angle","className","breakAll"];function o4(){return o4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},o4.apply(this,arguments)}function LL(e,t){if(e==null)return{};var r=wge(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function wge(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function IL(e,t){return _ge(e)||Cge(e,t)||Sge(e,t)||Nge()}function Nge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sge(e,t){if(e){if(typeof e=="string")return $L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $L(e,t)}}function $L(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Cge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function _ge(e){if(Array.isArray(e))return e}var fV=/[ \f\n\r\t\v\u2028\u2029]+/,hV=function(t){var r=t.children,a=t.breakAll,s=t.style;try{var i=[];yr(r)||(a?i=r.toString().split(""):i=r.toString().split(fV));var o=i.map(function(d){return{word:d,width:av(d,s).width}}),l=a?0:av("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Age=function(t,r,a,s,i){var o=t.maxLines,l=t.children,d=t.style,u=t.breakAll,f=vt(o),m=l,p=function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return J.reduce(function(V,G){var q=G.word,Y=G.width,Q=V[V.length-1];if(Q&&(s==null||i||Q.width+Y+a<Number(s)))Q.words.push(q),Q.width+=Y+a;else{var F={words:[q],width:Y};V.push(F)}return V},[])},g=p(r),b=function(J){return J.reduce(function(V,G){return V.width>G.width?V:G})};if(!f)return g;for(var v="",y=function(J){var V=m.slice(0,J),G=hV({breakAll:u,style:d,children:V+v}).wordsWithComputedWidth,q=p(G),Y=q.length>o||b(q).width>Number(s);return[Y,q]},j=0,_=m.length-1,C=0,A;j<=_&&C<=m.length-1;){var S=Math.floor((j+_)/2),T=S-1,O=y(T),R=IL(O,2),M=R[0],I=R[1],D=y(S),$=IL(D,1),K=$[0];if(!M&&!K&&(j=S+1),M&&K&&(_=S-1),!M&&K){A=I;break}C++}return A||g},FL=function(t){var r=yr(t)?[]:t.toString().split(fV);return[{words:r}]},kge=function(t){var r=t.width,a=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||a)&&!yu.isSsr){var d,u,f=hV({breakAll:o,children:s,style:i});if(f){var m=f.wordsWithComputedWidth,p=f.spaceWidth;d=m,u=p}else return FL(s);return Age({breakAll:o,children:s,maxLines:l,style:i},d,u,r,a)}return FL(s)},BL="#808080",Bh=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,d=t.capHeight,u=d===void 0?"0.71em":d,f=t.scaleToFit,m=f===void 0?!1:f,p=t.textAnchor,g=p===void 0?"start":p,b=t.verticalAnchor,v=b===void 0?"end":b,y=t.fill,j=y===void 0?BL:y,_=LL(t,bge),C=N.useMemo(function(){return kge({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:m,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,m,_.style,_.width]),A=_.dx,S=_.dy,T=_.angle,O=_.className,R=_.breakAll,M=LL(_,jge);if(!Ss(a)||!Ss(i))return null;var I=a+(vt(A)?A:0),D=i+(vt(S)?S:0),$;switch(v){case"start":$=zC("calc(".concat(u,")"));break;case"middle":$=zC("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:$=zC("calc(".concat(C.length-1," * -").concat(l,")"));break}var K=[];if(m){var U=C[0].width,J=_.width;K.push("scale(".concat((vt(J)?J/U:1)/U,")"))}return T&&K.push("rotate(".concat(T,", ").concat(I,", ").concat(D,")")),K.length&&(M.transform=K.join(" ")),pe.createElement("text",o4({},tr(M,!0),{x:I,y:D,className:Pr("recharts-text",O),textAnchor:g,fill:j.includes("url")?BL:j}),C.map(function(V,G){var q=V.words.join(R?"":" ");return pe.createElement("tspan",{x:I,dy:G===0?$:l,key:"".concat(q,"-").concat(G)},q)}))};function pf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Oge(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dO(e){let t,r,a;e.length!==2?(t=pf,r=(l,d)=>pf(e(l),d),a=(l,d)=>e(l)-d):(t=e===pf||e===Oge?e:Ege,r=e,a=e);function s(l,d,u=0,f=l.length){if(u<f){if(t(d,d)!==0)return f;do{const m=u+f>>>1;r(l[m],d)<0?u=m+1:f=m}while(u<f)}return u}function i(l,d,u=0,f=l.length){if(u<f){if(t(d,d)!==0)return f;do{const m=u+f>>>1;r(l[m],d)<=0?u=m+1:f=m}while(u<f)}return u}function o(l,d,u=0,f=l.length){const m=s(l,d,u,f-1);return m>u&&a(l[m-1],d)>-a(l[m],d)?m-1:m}return{left:s,center:o,right:i}}function Ege(){return 0}function mV(e){return e===null?NaN:+e}function*Tge(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Rge=dO(pf),Uy=Rge.right;dO(mV).center;class zL extends Map{constructor(t,r=Dge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(qL(this,t))}has(t){return super.has(qL(this,t))}set(t,r){return super.set(Pge(this,t),r)}delete(t){return super.delete(Mge(this,t))}}function qL({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function Pge({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function Mge({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function Dge(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Lge(e=pf){if(e===pf)return pV;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function pV(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Ige=Math.sqrt(50),$ge=Math.sqrt(10),Fge=Math.sqrt(2);function b1(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=Ige?10:i>=$ge?5:i>=Fge?2:1;let l,d,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),d=Math.round(t*u),l/u<e&&++l,d/u>t&&--d,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),d=Math.round(t/u),l*u<e&&++l,d*u>t&&--d),d<l&&.5<=r&&r<2?b1(e,t,r*2):[l,d,u]}function l4(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?b1(t,e,r):b1(e,t,r);if(!(i>=s))return[];const l=i-s+1,d=new Array(l);if(a)if(o<0)for(let u=0;u<l;++u)d[u]=(i-u)/-o;else for(let u=0;u<l;++u)d[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)d[u]=(s+u)/-o;else for(let u=0;u<l;++u)d[u]=(s+u)*o;return d}function c4(e,t,r){return t=+t,e=+e,r=+r,b1(e,t,r)[2]}function d4(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?c4(t,e,r):c4(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function UL(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function VL(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function gV(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?pV:Lge(s);a>r;){if(a-r>600){const d=a-r+1,u=t-r+1,f=Math.log(d),m=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*m*(d-m)/d)*(u-d/2<0?-1:1),g=Math.max(r,Math.floor(t-u*m/d+p)),b=Math.min(a,Math.floor(t+(d-u)*m/d+p));gV(e,t,g,b,s)}const i=e[t];let o=r,l=a;for(Dx(e,r,t),s(e[a],i)>0&&Dx(e,r,a);o<l;){for(Dx(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Dx(e,r,l):(++l,Dx(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function Dx(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function Bge(e,t,r){if(e=Float64Array.from(Tge(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return VL(e);if(t>=1)return UL(e);var a,s=(a-1)*t,i=Math.floor(s),o=UL(gV(e,i).subarray(0,i+1)),l=VL(e.subarray(i+1));return o+(l-o)*(s-i)}}function zge(e,t,r=mV){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function qge(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function Ml(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function bu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const u4=Symbol("implicit");function uO(){var e=new zL,t=[],r=[],a=u4;function s(i){let o=e.get(i);if(o===void 0){if(a!==u4)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new zL;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return uO(t,r).unknown(a)},Ml.apply(s,arguments),s}function Fv(){var e=uO().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,o,l=!1,d=0,u=0,f=.5;delete e.unknown;function m(){var p=t().length,g=s<a,b=g?s:a,v=g?a:s;i=(v-b)/Math.max(1,p-d+u*2),l&&(i=Math.floor(i)),b+=(v-b-i*(p-d))*f,o=i*(1-d),l&&(b=Math.round(b),o=Math.round(o));var y=qge(p).map(function(j){return b+i*j});return r(g?y.reverse():y)}return e.domain=function(p){return arguments.length?(t(p),m()):t()},e.range=function(p){return arguments.length?([a,s]=p,a=+a,s=+s,m()):[a,s]},e.rangeRound=function(p){return[a,s]=p,a=+a,s=+s,l=!0,m()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,m()):l},e.padding=function(p){return arguments.length?(d=Math.min(1,u=+p),m()):d},e.paddingInner=function(p){return arguments.length?(d=Math.min(1,p),m()):d},e.paddingOuter=function(p){return arguments.length?(u=+p,m()):u},e.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),m()):f},e.copy=function(){return Fv(t(),[a,s]).round(l).paddingInner(d).paddingOuter(u).align(f)},Ml.apply(m(),arguments)}function xV(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return xV(t())},e}function sv(){return xV(Fv.apply(null,arguments).paddingInner(1))}function fO(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function vV(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function Vy(){}var Bv=.7,j1=1/Bv,Sp="\\s*([+-]?\\d+)\\s*",zv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ad="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Uge=/^#([0-9a-f]{3,8})$/,Vge=new RegExp(`^rgb\\(${Sp},${Sp},${Sp}\\)$`),Hge=new RegExp(`^rgb\\(${ad},${ad},${ad}\\)$`),Gge=new RegExp(`^rgba\\(${Sp},${Sp},${Sp},${zv}\\)$`),Wge=new RegExp(`^rgba\\(${ad},${ad},${ad},${zv}\\)$`),Kge=new RegExp(`^hsl\\(${zv},${ad},${ad}\\)$`),Yge=new RegExp(`^hsla\\(${zv},${ad},${ad},${zv}\\)$`),HL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fO(Vy,qv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:GL,formatHex:GL,formatHex8:Xge,formatHsl:Jge,formatRgb:WL,toString:WL});function GL(){return this.rgb().formatHex()}function Xge(){return this.rgb().formatHex8()}function Jge(){return yV(this).formatHsl()}function WL(){return this.rgb().formatRgb()}function qv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Uge.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?KL(t):r===3?new ho(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?lb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?lb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Vge.exec(e))?new ho(t[1],t[2],t[3],1):(t=Hge.exec(e))?new ho(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Gge.exec(e))?lb(t[1],t[2],t[3],t[4]):(t=Wge.exec(e))?lb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Kge.exec(e))?JL(t[1],t[2]/100,t[3]/100,1):(t=Yge.exec(e))?JL(t[1],t[2]/100,t[3]/100,t[4]):HL.hasOwnProperty(e)?KL(HL[e]):e==="transparent"?new ho(NaN,NaN,NaN,0):null}function KL(e){return new ho(e>>16&255,e>>8&255,e&255,1)}function lb(e,t,r,a){return a<=0&&(e=t=r=NaN),new ho(e,t,r,a)}function Zge(e){return e instanceof Vy||(e=qv(e)),e?(e=e.rgb(),new ho(e.r,e.g,e.b,e.opacity)):new ho}function f4(e,t,r,a){return arguments.length===1?Zge(e):new ho(e,t,r,a??1)}function ho(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}fO(ho,f4,vV(Vy,{brighter(e){return e=e==null?j1:Math.pow(j1,e),new ho(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bv:Math.pow(Bv,e),new ho(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ho(_h(this.r),_h(this.g),_h(this.b),w1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YL,formatHex:YL,formatHex8:Qge,formatRgb:XL,toString:XL}));function YL(){return`#${wh(this.r)}${wh(this.g)}${wh(this.b)}`}function Qge(){return`#${wh(this.r)}${wh(this.g)}${wh(this.b)}${wh((isNaN(this.opacity)?1:this.opacity)*255)}`}function XL(){const e=w1(this.opacity);return`${e===1?"rgb(":"rgba("}${_h(this.r)}, ${_h(this.g)}, ${_h(this.b)}${e===1?")":`, ${e})`}`}function w1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _h(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wh(e){return e=_h(e),(e<16?"0":"")+e.toString(16)}function JL(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new pc(e,t,r,a)}function yV(e){if(e instanceof pc)return new pc(e.h,e.s,e.l,e.opacity);if(e instanceof Vy||(e=qv(e)),!e)return new pc;if(e instanceof pc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-s,d=(i+s)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=d<.5?i+s:2-i-s,o*=60):l=d>0&&d<1?0:o,new pc(o,l,d,e.opacity)}function exe(e,t,r,a){return arguments.length===1?yV(e):new pc(e,t,r,a??1)}function pc(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}fO(pc,exe,vV(Vy,{brighter(e){return e=e==null?j1:Math.pow(j1,e),new pc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bv:Math.pow(Bv,e),new pc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new ho(qC(e>=240?e-240:e+120,s,a),qC(e,s,a),qC(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new pc(ZL(this.h),cb(this.s),cb(this.l),w1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=w1(this.opacity);return`${e===1?"hsl(":"hsla("}${ZL(this.h)}, ${cb(this.s)*100}%, ${cb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ZL(e){return e=(e||0)%360,e<0?e+360:e}function cb(e){return Math.max(0,Math.min(1,e||0))}function qC(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const hO=e=>()=>e;function txe(e,t){return function(r){return e+r*t}}function rxe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function nxe(e){return(e=+e)==1?bV:function(t,r){return r-t?rxe(t,r,e):hO(isNaN(t)?r:t)}}function bV(e,t){var r=t-e;return r?txe(e,r):hO(isNaN(e)?t:e)}const QL=(function e(t){var r=nxe(t);function a(s,i){var o=r((s=f4(s)).r,(i=f4(i)).r),l=r(s.g,i.g),d=r(s.b,i.b),u=bV(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=d(f),s.opacity=u(f),s+""}}return a.gamma=e,a})(1);function axe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function sxe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ixe(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)s[o]=Fg(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function oxe(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function N1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function lxe(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Fg(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var h4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,UC=new RegExp(h4.source,"g");function cxe(e){return function(){return e}}function dxe(e){return function(t){return e(t)+""}}function uxe(e,t){var r=h4.lastIndex=UC.lastIndex=0,a,s,i,o=-1,l=[],d=[];for(e=e+"",t=t+"";(a=h4.exec(e))&&(s=UC.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,d.push({i:o,x:N1(a,s)})),r=UC.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?d[0]?dxe(d[0].x):cxe(t):(t=d.length,function(u){for(var f=0,m;f<t;++f)l[(m=d[f]).i]=m.x(u);return l.join("")})}function Fg(e,t){var r=typeof t,a;return t==null||r==="boolean"?hO(t):(r==="number"?N1:r==="string"?(a=qv(t))?(t=a,QL):uxe:t instanceof qv?QL:t instanceof Date?oxe:sxe(t)?axe:Array.isArray(t)?ixe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?lxe:N1)(e,t)}function mO(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function fxe(e,t){t===void 0&&(t=e,e=Fg);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function hxe(e){return function(){return e}}function S1(e){return+e}var e8=[0,1];function zi(e){return e}function m4(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:hxe(isNaN(t)?NaN:.5)}function mxe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function pxe(e,t,r){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=m4(s,a),i=r(o,i)):(a=m4(a,s),i=r(i,o)),function(l){return i(a(l))}}function gxe(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=m4(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var d=Uy(e,l,1,a)-1;return i[d](s[d](l))}}function Hy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function d2(){var e=e8,t=e8,r=Fg,a,s,i,o=zi,l,d,u;function f(){var p=Math.min(e.length,t.length);return o!==zi&&(o=mxe(e[0],e[p-1])),l=p>2?gxe:pxe,d=u=null,m}function m(p){return p==null||isNaN(p=+p)?i:(d||(d=l(e.map(a),t,r)))(a(o(p)))}return m.invert=function(p){return o(s((u||(u=l(t,e.map(a),N1)))(p)))},m.domain=function(p){return arguments.length?(e=Array.from(p,S1),f()):e.slice()},m.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},m.rangeRound=function(p){return t=Array.from(p),r=mO,f()},m.clamp=function(p){return arguments.length?(o=p?!0:zi,f()):o!==zi},m.interpolate=function(p){return arguments.length?(r=p,f()):r},m.unknown=function(p){return arguments.length?(i=p,m):i},function(p,g){return a=p,s=g,f()}}function pO(){return d2()(zi,zi)}function xxe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function C1(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function Kp(e){return e=C1(Math.abs(e)),e?e[1]:NaN}function vxe(e,t){return function(r,a){for(var s=r.length,i=[],o=0,l=e[0],d=0;s>0&&l>0&&(d+l+1>a&&(l=Math.max(1,a-d)),i.push(r.substring(s-=l,s+l)),!((d+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function yxe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var bxe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Uv(e){if(!(t=bxe.exec(e)))throw new Error("invalid format: "+e);var t;return new gO({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Uv.prototype=gO.prototype;function gO(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}gO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jxe(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var jV;function wxe(e,t){var r=C1(e,t);if(!r)return e+"";var a=r[0],s=r[1],i=s-(jV=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+C1(e,Math.max(0,t+i-1))[0]}function t8(e,t){var r=C1(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const r8={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:xxe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>t8(e*100,t),r:t8,s:wxe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function n8(e){return e}var a8=Array.prototype.map,s8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Nxe(e){var t=e.grouping===void 0||e.thousands===void 0?n8:vxe(a8.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?n8:yxe(a8.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function u(m){m=Uv(m);var p=m.fill,g=m.align,b=m.sign,v=m.symbol,y=m.zero,j=m.width,_=m.comma,C=m.precision,A=m.trim,S=m.type;S==="n"?(_=!0,S="g"):r8[S]||(C===void 0&&(C=12),A=!0,S="g"),(y||p==="0"&&g==="=")&&(y=!0,p="0",g="=");var T=v==="$"?r:v==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",O=v==="$"?a:/[%p]/.test(S)?o:"",R=r8[S],M=/[defgprs%]/.test(S);C=C===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function I(D){var $=T,K=O,U,J,V;if(S==="c")K=R(D)+K,D="";else{D=+D;var G=D<0||1/D<0;if(D=isNaN(D)?d:R(Math.abs(D),C),A&&(D=jxe(D)),G&&+D==0&&b!=="+"&&(G=!1),$=(G?b==="("?b:l:b==="-"||b==="("?"":b)+$,K=(S==="s"?s8[8+jV/3]:"")+K+(G&&b==="("?")":""),M){for(U=-1,J=D.length;++U<J;)if(V=D.charCodeAt(U),48>V||V>57){K=(V===46?s+D.slice(U+1):D.slice(U))+K,D=D.slice(0,U);break}}}_&&!y&&(D=t(D,1/0));var q=$.length+D.length+K.length,Y=q<j?new Array(j-q+1).join(p):"";switch(_&&y&&(D=t(Y+D,Y.length?j-K.length:1/0),Y=""),g){case"<":D=$+D+K+Y;break;case"=":D=$+Y+D+K;break;case"^":D=Y.slice(0,q=Y.length>>1)+$+D+K+Y.slice(q);break;default:D=Y+$+D+K;break}return i(D)}return I.toString=function(){return m+""},I}function f(m,p){var g=u((m=Uv(m),m.type="f",m)),b=Math.max(-8,Math.min(8,Math.floor(Kp(p)/3)))*3,v=Math.pow(10,-b),y=s8[8+b/3];return function(j){return g(v*j)+y}}return{format:u,formatPrefix:f}}var db,xO,wV;Sxe({thousands:",",grouping:[3],currency:["$",""]});function Sxe(e){return db=Nxe(e),xO=db.format,wV=db.formatPrefix,db}function Cxe(e){return Math.max(0,-Kp(Math.abs(e)))}function _xe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Kp(t)/3)))*3-Kp(Math.abs(e)))}function Axe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Kp(t)-Kp(e))+1}function NV(e,t,r,a){var s=d4(e,t,r),i;switch(a=Uv(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=_xe(s,o))&&(a.precision=i),wV(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=Axe(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=Cxe(s))&&(a.precision=i-(a.type==="%")*2);break}}return xO(a)}function Of(e){var t=e.domain;return e.ticks=function(r){var a=t();return l4(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return NV(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],d,u,f=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);f-- >0;){if(u=c4(o,l,r),u===d)return a[s]=o,a[i]=l,t(a);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;d=u}return e},e}function _1(){var e=pO();return e.copy=function(){return Hy(e,_1())},Ml.apply(e,arguments),Of(e)}function SV(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,S1),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return SV(e).unknown(t)},e=arguments.length?Array.from(e,S1):[0,1],Of(r)}function CV(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],o;return i<s&&(o=r,r=a,a=o,o=s,s=i,i=o),e[r]=t.floor(s),e[a]=t.ceil(i),e}function i8(e){return Math.log(e)}function o8(e){return Math.exp(e)}function kxe(e){return-Math.log(-e)}function Oxe(e){return-Math.exp(-e)}function Exe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Txe(e){return e===10?Exe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Rxe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function l8(e){return(t,r)=>-e(-t,r)}function vO(e){const t=e(i8,o8),r=t.domain;let a=10,s,i;function o(){return s=Rxe(a),i=Txe(a),r()[0]<0?(s=l8(s),i=l8(i),e(kxe,Oxe)):e(i8,o8),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const d=r();let u=d[0],f=d[d.length-1];const m=f<u;m&&([u,f]=[f,u]);let p=s(u),g=s(f),b,v;const y=l==null?10:+l;let j=[];if(!(a%1)&&g-p<y){if(p=Math.floor(p),g=Math.ceil(g),u>0){for(;p<=g;++p)for(b=1;b<a;++b)if(v=p<0?b/i(-p):b*i(p),!(v<u)){if(v>f)break;j.push(v)}}else for(;p<=g;++p)for(b=a-1;b>=1;--b)if(v=p>0?b/i(-p):b*i(p),!(v<u)){if(v>f)break;j.push(v)}j.length*2<y&&(j=l4(u,f,y))}else j=l4(p,g,Math.min(g-p,y)).map(i);return m?j.reverse():j},t.tickFormat=(l,d)=>{if(l==null&&(l=10),d==null&&(d=a===10?"s":","),typeof d!="function"&&(!(a%1)&&(d=Uv(d)).precision==null&&(d.trim=!0),d=xO(d)),l===1/0)return d;const u=Math.max(1,a*l/t.ticks().length);return f=>{let m=f/i(Math.round(s(f)));return m*a<a-.5&&(m*=a),m<=u?d(f):""}},t.nice=()=>r(CV(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function _V(){const e=vO(d2()).domain([1,10]);return e.copy=()=>Hy(e,_V()).base(e.base()),Ml.apply(e,arguments),e}function c8(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function d8(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function yO(e){var t=1,r=e(c8(t),d8(t));return r.constant=function(a){return arguments.length?e(c8(t=+a),d8(t)):t},Of(r)}function AV(){var e=yO(d2());return e.copy=function(){return Hy(e,AV()).constant(e.constant())},Ml.apply(e,arguments)}function u8(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Pxe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Mxe(e){return e<0?-e*e:e*e}function bO(e){var t=e(zi,zi),r=1;function a(){return r===1?e(zi,zi):r===.5?e(Pxe,Mxe):e(u8(r),u8(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},Of(t)}function jO(){var e=bO(d2());return e.copy=function(){return Hy(e,jO()).exponent(e.exponent())},Ml.apply(e,arguments),e}function Dxe(){return jO.apply(null,arguments).exponent(.5)}function f8(e){return Math.sign(e)*e*e}function Lxe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function kV(){var e=pO(),t=[0,1],r=!1,a;function s(i){var o=Lxe(e(i));return isNaN(o)?a:r?Math.round(o):o}return s.invert=function(i){return e.invert(f8(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,S1)).map(f8)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return kV(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},Ml.apply(s,arguments),Of(s)}function OV(){var e=[],t=[],r=[],a;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=zge(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[Uy(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(pf),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return OV().domain(e).range(t).unknown(a)},Ml.apply(i,arguments)}function EV(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function o(d){return d!=null&&d<=d?s[Uy(a,d,0,r)]:i}function l(){var d=-1;for(a=new Array(r);++d<r;)a[d]=((d+1)*t-(d-r)*e)/(r+1);return o}return o.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,l()):[e,t]},o.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,l()):s.slice()},o.invertExtent=function(d){var u=s.indexOf(d);return u<0?[NaN,NaN]:u<1?[e,a[0]]:u>=r?[a[r-1],t]:[a[u-1],a[u]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return a.slice()},o.copy=function(){return EV().domain([e,t]).range(s).unknown(i)},Ml.apply(Of(o),arguments)}function TV(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[Uy(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return TV().domain(e).range(t).unknown(r)},Ml.apply(s,arguments)}const VC=new Date,HC=new Date;function _s(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const d=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return d;let u;do d.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return d},s.filter=i=>_s(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(VC.setTime(+i),HC.setTime(+o),e(VC),e(HC),Math.floor(r(VC,HC))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const A1=_s(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);A1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?_s(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):A1);A1.range;const Yd=1e3,xl=Yd*60,Xd=xl*60,du=Xd*24,wO=du*7,h8=du*30,GC=du*365,Nh=_s(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yd)},(e,t)=>(t-e)/Yd,e=>e.getUTCSeconds());Nh.range;const NO=_s(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yd)},(e,t)=>{e.setTime(+e+t*xl)},(e,t)=>(t-e)/xl,e=>e.getMinutes());NO.range;const SO=_s(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*xl)},(e,t)=>(t-e)/xl,e=>e.getUTCMinutes());SO.range;const CO=_s(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yd-e.getMinutes()*xl)},(e,t)=>{e.setTime(+e+t*Xd)},(e,t)=>(t-e)/Xd,e=>e.getHours());CO.range;const _O=_s(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Xd)},(e,t)=>(t-e)/Xd,e=>e.getUTCHours());_O.range;const Gy=_s(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xl)/du,e=>e.getDate()-1);Gy.range;const u2=_s(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/du,e=>e.getUTCDate()-1);u2.range;const RV=_s(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/du,e=>Math.floor(e/du));RV.range;function tm(e){return _s(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*xl)/wO)}const f2=tm(0),k1=tm(1),Ixe=tm(2),$xe=tm(3),Yp=tm(4),Fxe=tm(5),Bxe=tm(6);f2.range;k1.range;Ixe.range;$xe.range;Yp.range;Fxe.range;Bxe.range;function rm(e){return _s(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/wO)}const h2=rm(0),O1=rm(1),zxe=rm(2),qxe=rm(3),Xp=rm(4),Uxe=rm(5),Vxe=rm(6);h2.range;O1.range;zxe.range;qxe.range;Xp.range;Uxe.range;Vxe.range;const AO=_s(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());AO.range;const kO=_s(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());kO.range;const uu=_s(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());uu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_s(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});uu.range;const fu=_s(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());fu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_s(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});fu.range;function PV(e,t,r,a,s,i){const o=[[Nh,1,Yd],[Nh,5,5*Yd],[Nh,15,15*Yd],[Nh,30,30*Yd],[i,1,xl],[i,5,5*xl],[i,15,15*xl],[i,30,30*xl],[s,1,Xd],[s,3,3*Xd],[s,6,6*Xd],[s,12,12*Xd],[a,1,du],[a,2,2*du],[r,1,wO],[t,1,h8],[t,3,3*h8],[e,1,GC]];function l(u,f,m){const p=f<u;p&&([u,f]=[f,u]);const g=m&&typeof m.range=="function"?m:d(u,f,m),b=g?g.range(u,+f+1):[];return p?b.reverse():b}function d(u,f,m){const p=Math.abs(f-u)/m,g=dO(([,,y])=>y).right(o,p);if(g===o.length)return e.every(d4(u/GC,f/GC,m));if(g===0)return A1.every(Math.max(d4(u,f,m),1));const[b,v]=o[p/o[g-1][2]<o[g][2]/p?g-1:g];return b.every(v)}return[l,d]}const[Hxe,Gxe]=PV(fu,kO,h2,RV,_O,SO),[Wxe,Kxe]=PV(uu,AO,f2,Gy,CO,NO);function WC(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function KC(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Lx(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Yxe(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,d=e.shortMonths,u=Ix(s),f=$x(s),m=Ix(i),p=$x(i),g=Ix(o),b=$x(o),v=Ix(l),y=$x(l),j=Ix(d),_=$x(d),C={a:G,A:q,b:Y,B:Q,c:null,d:y8,e:y8,f:vve,g:kve,G:Eve,H:pve,I:gve,j:xve,L:MV,m:yve,M:bve,p:F,q:z,Q:w8,s:N8,S:jve,u:wve,U:Nve,V:Sve,w:Cve,W:_ve,x:null,X:null,y:Ave,Y:Ove,Z:Tve,"%":j8},A={a:H,A:X,b:ne,B:ie,c:null,d:b8,e:b8,f:Dve,g:Hve,G:Wve,H:Rve,I:Pve,j:Mve,L:LV,m:Lve,M:Ive,p:ce,q:ge,Q:w8,s:N8,S:$ve,u:Fve,U:Bve,V:zve,w:qve,W:Uve,x:null,X:null,y:Vve,Y:Gve,Z:Kve,"%":j8},S={a:I,A:D,b:$,B:K,c:U,d:x8,e:x8,f:uve,g:g8,G:p8,H:v8,I:v8,j:ove,L:dve,m:ive,M:lve,p:M,q:sve,Q:hve,s:mve,S:cve,u:eve,U:tve,V:rve,w:Qxe,W:nve,x:J,X:V,y:g8,Y:p8,Z:ave,"%":fve};C.x=T(r,C),C.X=T(a,C),C.c=T(t,C),A.x=T(r,A),A.X=T(a,A),A.c=T(t,A);function T(he,ue){return function(Se){var je=[],Be=-1,$e=0,oe=he.length,Xe,pt,Oe;for(Se instanceof Date||(Se=new Date(+Se));++Be<oe;)he.charCodeAt(Be)===37&&(je.push(he.slice($e,Be)),(pt=m8[Xe=he.charAt(++Be)])!=null?Xe=he.charAt(++Be):pt=Xe==="e"?" ":"0",(Oe=ue[Xe])&&(Xe=Oe(Se,pt)),je.push(Xe),$e=Be+1);return je.push(he.slice($e,Be)),je.join("")}}function O(he,ue){return function(Se){var je=Lx(1900,void 0,1),Be=R(je,he,Se+="",0),$e,oe;if(Be!=Se.length)return null;if("Q"in je)return new Date(je.Q);if("s"in je)return new Date(je.s*1e3+("L"in je?je.L:0));if(ue&&!("Z"in je)&&(je.Z=0),"p"in je&&(je.H=je.H%12+je.p*12),je.m===void 0&&(je.m="q"in je?je.q:0),"V"in je){if(je.V<1||je.V>53)return null;"w"in je||(je.w=1),"Z"in je?($e=KC(Lx(je.y,0,1)),oe=$e.getUTCDay(),$e=oe>4||oe===0?O1.ceil($e):O1($e),$e=u2.offset($e,(je.V-1)*7),je.y=$e.getUTCFullYear(),je.m=$e.getUTCMonth(),je.d=$e.getUTCDate()+(je.w+6)%7):($e=WC(Lx(je.y,0,1)),oe=$e.getDay(),$e=oe>4||oe===0?k1.ceil($e):k1($e),$e=Gy.offset($e,(je.V-1)*7),je.y=$e.getFullYear(),je.m=$e.getMonth(),je.d=$e.getDate()+(je.w+6)%7)}else("W"in je||"U"in je)&&("w"in je||(je.w="u"in je?je.u%7:"W"in je?1:0),oe="Z"in je?KC(Lx(je.y,0,1)).getUTCDay():WC(Lx(je.y,0,1)).getDay(),je.m=0,je.d="W"in je?(je.w+6)%7+je.W*7-(oe+5)%7:je.w+je.U*7-(oe+6)%7);return"Z"in je?(je.H+=je.Z/100|0,je.M+=je.Z%100,KC(je)):WC(je)}}function R(he,ue,Se,je){for(var Be=0,$e=ue.length,oe=Se.length,Xe,pt;Be<$e;){if(je>=oe)return-1;if(Xe=ue.charCodeAt(Be++),Xe===37){if(Xe=ue.charAt(Be++),pt=S[Xe in m8?ue.charAt(Be++):Xe],!pt||(je=pt(he,Se,je))<0)return-1}else if(Xe!=Se.charCodeAt(je++))return-1}return je}function M(he,ue,Se){var je=u.exec(ue.slice(Se));return je?(he.p=f.get(je[0].toLowerCase()),Se+je[0].length):-1}function I(he,ue,Se){var je=g.exec(ue.slice(Se));return je?(he.w=b.get(je[0].toLowerCase()),Se+je[0].length):-1}function D(he,ue,Se){var je=m.exec(ue.slice(Se));return je?(he.w=p.get(je[0].toLowerCase()),Se+je[0].length):-1}function $(he,ue,Se){var je=j.exec(ue.slice(Se));return je?(he.m=_.get(je[0].toLowerCase()),Se+je[0].length):-1}function K(he,ue,Se){var je=v.exec(ue.slice(Se));return je?(he.m=y.get(je[0].toLowerCase()),Se+je[0].length):-1}function U(he,ue,Se){return R(he,t,ue,Se)}function J(he,ue,Se){return R(he,r,ue,Se)}function V(he,ue,Se){return R(he,a,ue,Se)}function G(he){return o[he.getDay()]}function q(he){return i[he.getDay()]}function Y(he){return d[he.getMonth()]}function Q(he){return l[he.getMonth()]}function F(he){return s[+(he.getHours()>=12)]}function z(he){return 1+~~(he.getMonth()/3)}function H(he){return o[he.getUTCDay()]}function X(he){return i[he.getUTCDay()]}function ne(he){return d[he.getUTCMonth()]}function ie(he){return l[he.getUTCMonth()]}function ce(he){return s[+(he.getUTCHours()>=12)]}function ge(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ue=T(he+="",C);return ue.toString=function(){return he},ue},parse:function(he){var ue=O(he+="",!1);return ue.toString=function(){return he},ue},utcFormat:function(he){var ue=T(he+="",A);return ue.toString=function(){return he},ue},utcParse:function(he){var ue=O(he+="",!0);return ue.toString=function(){return he},ue}}}var m8={"-":"",_:" ",0:"0"},Bs=/^\s*\d+/,Xxe=/^%/,Jxe=/[\\^$*+?|[\]().{}]/g;function hn(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function Zxe(e){return e.replace(Jxe,"\\$&")}function Ix(e){return new RegExp("^(?:"+e.map(Zxe).join("|")+")","i")}function $x(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Qxe(e,t,r){var a=Bs.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function eve(e,t,r){var a=Bs.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function tve(e,t,r){var a=Bs.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function rve(e,t,r){var a=Bs.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function nve(e,t,r){var a=Bs.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function p8(e,t,r){var a=Bs.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function g8(e,t,r){var a=Bs.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function ave(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function sve(e,t,r){var a=Bs.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function ive(e,t,r){var a=Bs.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function x8(e,t,r){var a=Bs.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function ove(e,t,r){var a=Bs.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function v8(e,t,r){var a=Bs.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function lve(e,t,r){var a=Bs.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function cve(e,t,r){var a=Bs.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function dve(e,t,r){var a=Bs.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function uve(e,t,r){var a=Bs.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function fve(e,t,r){var a=Xxe.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function hve(e,t,r){var a=Bs.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function mve(e,t,r){var a=Bs.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function y8(e,t){return hn(e.getDate(),t,2)}function pve(e,t){return hn(e.getHours(),t,2)}function gve(e,t){return hn(e.getHours()%12||12,t,2)}function xve(e,t){return hn(1+Gy.count(uu(e),e),t,3)}function MV(e,t){return hn(e.getMilliseconds(),t,3)}function vve(e,t){return MV(e,t)+"000"}function yve(e,t){return hn(e.getMonth()+1,t,2)}function bve(e,t){return hn(e.getMinutes(),t,2)}function jve(e,t){return hn(e.getSeconds(),t,2)}function wve(e){var t=e.getDay();return t===0?7:t}function Nve(e,t){return hn(f2.count(uu(e)-1,e),t,2)}function DV(e){var t=e.getDay();return t>=4||t===0?Yp(e):Yp.ceil(e)}function Sve(e,t){return e=DV(e),hn(Yp.count(uu(e),e)+(uu(e).getDay()===4),t,2)}function Cve(e){return e.getDay()}function _ve(e,t){return hn(k1.count(uu(e)-1,e),t,2)}function Ave(e,t){return hn(e.getFullYear()%100,t,2)}function kve(e,t){return e=DV(e),hn(e.getFullYear()%100,t,2)}function Ove(e,t){return hn(e.getFullYear()%1e4,t,4)}function Eve(e,t){var r=e.getDay();return e=r>=4||r===0?Yp(e):Yp.ceil(e),hn(e.getFullYear()%1e4,t,4)}function Tve(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+hn(t/60|0,"0",2)+hn(t%60,"0",2)}function b8(e,t){return hn(e.getUTCDate(),t,2)}function Rve(e,t){return hn(e.getUTCHours(),t,2)}function Pve(e,t){return hn(e.getUTCHours()%12||12,t,2)}function Mve(e,t){return hn(1+u2.count(fu(e),e),t,3)}function LV(e,t){return hn(e.getUTCMilliseconds(),t,3)}function Dve(e,t){return LV(e,t)+"000"}function Lve(e,t){return hn(e.getUTCMonth()+1,t,2)}function Ive(e,t){return hn(e.getUTCMinutes(),t,2)}function $ve(e,t){return hn(e.getUTCSeconds(),t,2)}function Fve(e){var t=e.getUTCDay();return t===0?7:t}function Bve(e,t){return hn(h2.count(fu(e)-1,e),t,2)}function IV(e){var t=e.getUTCDay();return t>=4||t===0?Xp(e):Xp.ceil(e)}function zve(e,t){return e=IV(e),hn(Xp.count(fu(e),e)+(fu(e).getUTCDay()===4),t,2)}function qve(e){return e.getUTCDay()}function Uve(e,t){return hn(O1.count(fu(e)-1,e),t,2)}function Vve(e,t){return hn(e.getUTCFullYear()%100,t,2)}function Hve(e,t){return e=IV(e),hn(e.getUTCFullYear()%100,t,2)}function Gve(e,t){return hn(e.getUTCFullYear()%1e4,t,4)}function Wve(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Xp(e):Xp.ceil(e),hn(e.getUTCFullYear()%1e4,t,4)}function Kve(){return"+0000"}function j8(){return"%"}function w8(e){return+e}function N8(e){return Math.floor(+e/1e3)}var ep,$V,FV;Yve({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Yve(e){return ep=Yxe(e),$V=ep.format,ep.parse,FV=ep.utcFormat,ep.utcParse,ep}function Xve(e){return new Date(e)}function Jve(e){return e instanceof Date?+e:+new Date(+e)}function OO(e,t,r,a,s,i,o,l,d,u){var f=pO(),m=f.invert,p=f.domain,g=u(".%L"),b=u(":%S"),v=u("%I:%M"),y=u("%I %p"),j=u("%a %d"),_=u("%b %d"),C=u("%B"),A=u("%Y");function S(T){return(d(T)<T?g:l(T)<T?b:o(T)<T?v:i(T)<T?y:a(T)<T?s(T)<T?j:_:r(T)<T?C:A)(T)}return f.invert=function(T){return new Date(m(T))},f.domain=function(T){return arguments.length?p(Array.from(T,Jve)):p().map(Xve)},f.ticks=function(T){var O=p();return e(O[0],O[O.length-1],T??10)},f.tickFormat=function(T,O){return O==null?S:u(O)},f.nice=function(T){var O=p();return(!T||typeof T.range!="function")&&(T=t(O[0],O[O.length-1],T??10)),T?p(CV(O,T)):f},f.copy=function(){return Hy(f,OO(e,t,r,a,s,i,o,l,d,u))},f}function Zve(){return Ml.apply(OO(Wxe,Kxe,uu,AO,f2,Gy,CO,NO,Nh,$V).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Qve(){return Ml.apply(OO(Hxe,Gxe,fu,kO,h2,u2,_O,SO,Nh,FV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function m2(){var e=0,t=1,r,a,s,i,o=zi,l=!1,d;function u(m){return m==null||isNaN(m=+m)?d:o(s===0?.5:(m=(i(m)-r)*s,l?Math.max(0,Math.min(1,m)):m))}u.domain=function(m){return arguments.length?([e,t]=m,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),u):[e,t]},u.clamp=function(m){return arguments.length?(l=!!m,u):l},u.interpolator=function(m){return arguments.length?(o=m,u):o};function f(m){return function(p){var g,b;return arguments.length?([g,b]=p,o=m(g,b),u):[o(0),o(1)]}}return u.range=f(Fg),u.rangeRound=f(mO),u.unknown=function(m){return arguments.length?(d=m,u):d},function(m){return i=m,r=m(e),a=m(t),s=r===a?0:1/(a-r),u}}function Ef(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function BV(){var e=Of(m2()(zi));return e.copy=function(){return Ef(e,BV())},bu.apply(e,arguments)}function zV(){var e=vO(m2()).domain([1,10]);return e.copy=function(){return Ef(e,zV()).base(e.base())},bu.apply(e,arguments)}function qV(){var e=yO(m2());return e.copy=function(){return Ef(e,qV()).constant(e.constant())},bu.apply(e,arguments)}function EO(){var e=bO(m2());return e.copy=function(){return Ef(e,EO()).exponent(e.exponent())},bu.apply(e,arguments)}function eye(){return EO.apply(null,arguments).exponent(.5)}function UV(){var e=[],t=zi;function r(a){if(a!=null&&!isNaN(a=+a))return t((Uy(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(pf),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>Bge(e,i/a))},r.copy=function(){return UV(t).domain(e)},bu.apply(r,arguments)}function p2(){var e=0,t=.5,r=1,a=1,s,i,o,l,d,u=zi,f,m=!1,p;function g(v){return isNaN(v=+v)?p:(v=.5+((v=+f(v))-i)*(a*v<a*i?l:d),u(m?Math.max(0,Math.min(1,v)):v))}g.domain=function(v){return arguments.length?([e,t,r]=v,s=f(e=+e),i=f(t=+t),o=f(r=+r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),a=i<s?-1:1,g):[e,t,r]},g.clamp=function(v){return arguments.length?(m=!!v,g):m},g.interpolator=function(v){return arguments.length?(u=v,g):u};function b(v){return function(y){var j,_,C;return arguments.length?([j,_,C]=y,u=fxe(v,[j,_,C]),g):[u(0),u(.5),u(1)]}}return g.range=b(Fg),g.rangeRound=b(mO),g.unknown=function(v){return arguments.length?(p=v,g):p},function(v){return f=v,s=v(e),i=v(t),o=v(r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),a=i<s?-1:1,g}}function VV(){var e=Of(p2()(zi));return e.copy=function(){return Ef(e,VV())},bu.apply(e,arguments)}function HV(){var e=vO(p2()).domain([.1,1,10]);return e.copy=function(){return Ef(e,HV()).base(e.base())},bu.apply(e,arguments)}function GV(){var e=yO(p2());return e.copy=function(){return Ef(e,GV()).constant(e.constant())},bu.apply(e,arguments)}function TO(){var e=bO(p2());return e.copy=function(){return Ef(e,TO()).exponent(e.exponent())},bu.apply(e,arguments)}function tye(){return TO.apply(null,arguments).exponent(.5)}const S8=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Fv,scaleDiverging:VV,scaleDivergingLog:HV,scaleDivergingPow:TO,scaleDivergingSqrt:tye,scaleDivergingSymlog:GV,scaleIdentity:SV,scaleImplicit:u4,scaleLinear:_1,scaleLog:_V,scaleOrdinal:uO,scalePoint:sv,scalePow:jO,scaleQuantile:OV,scaleQuantize:EV,scaleRadial:kV,scaleSequential:BV,scaleSequentialLog:zV,scaleSequentialPow:EO,scaleSequentialQuantile:UV,scaleSequentialSqrt:eye,scaleSequentialSymlog:qV,scaleSqrt:Dxe,scaleSymlog:AV,scaleThreshold:TV,scaleTime:Zve,scaleUtc:Qve,tickFormat:NV},Symbol.toStringTag,{value:"Module"}));var YC,C8;function g2(){if(C8)return YC;C8=1;var e=Dg();function t(r,a,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],d=a(l);if(d!=null&&(u===void 0?d===d&&!e(d):s(d,u)))var u=d,f=l}return f}return YC=t,YC}var XC,_8;function WV(){if(_8)return XC;_8=1;function e(t,r){return t>r}return XC=e,XC}var JC,A8;function rye(){if(A8)return JC;A8=1;var e=g2(),t=WV(),r=$g();function a(s){return s&&s.length?e(s,r,t):void 0}return JC=a,JC}var nye=rye();const uf=jn(nye);var ZC,k8;function KV(){if(k8)return ZC;k8=1;function e(t,r){return t<r}return ZC=e,ZC}var QC,O8;function aye(){if(O8)return QC;O8=1;var e=g2(),t=KV(),r=$g();function a(s){return s&&s.length?e(s,r,t):void 0}return QC=a,QC}var sye=aye();const x2=jn(sye);var e_,E8;function iye(){if(E8)return e_;E8=1;var e=K3(),t=pd(),r=rV(),a=xo();function s(i,o){var l=a(i)?e:r;return l(i,t(o,3))}return e_=s,e_}var t_,T8;function oye(){if(T8)return t_;T8=1;var e=eV(),t=iye();function r(a,s){return e(t(a,s),1)}return t_=r,t_}var lye=oye();const cye=jn(lye);var r_,R8;function dye(){if(R8)return r_;R8=1;var e=iO();function t(r,a){return e(r,a)}return r_=t,r_}var uye=dye();const wf=jn(uye);var Bg=1e9,fye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},PO,wa=!0,_l="[DecimalError] ",Ah=_l+"Invalid argument: ",RO=_l+"Exponent out of range: ",zg=Math.floor,mh=Math.pow,hye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Io,Ls=1e7,la=7,YV=9007199254740991,E1=zg(YV/la),Ut={};Ut.absoluteValue=Ut.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ut.comparedTo=Ut.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};Ut.decimalPlaces=Ut.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*la;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ut.dividedBy=Ut.div=function(e){return ru(this,new this.constructor(e))};Ut.dividedToIntegerBy=Ut.idiv=function(e){var t=this,r=t.constructor;return Kn(ru(t,new r(e),0,1),r.precision)};Ut.equals=Ut.eq=function(e){return!this.cmp(e)};Ut.exponent=function(){return ds(this)};Ut.greaterThan=Ut.gt=function(e){return this.cmp(e)>0};Ut.greaterThanOrEqualTo=Ut.gte=function(e){return this.cmp(e)>=0};Ut.isInteger=Ut.isint=function(){return this.e>this.d.length-2};Ut.isNegative=Ut.isneg=function(){return this.s<0};Ut.isPositive=Ut.ispos=function(){return this.s>0};Ut.isZero=function(){return this.s===0};Ut.lessThan=Ut.lt=function(e){return this.cmp(e)<0};Ut.lessThanOrEqualTo=Ut.lte=function(e){return this.cmp(e)<1};Ut.logarithm=Ut.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Io))throw Error(_l+"NaN");if(r.s<1)throw Error(_l+(r.s?"NaN":"-Infinity"));return r.eq(Io)?new a(0):(wa=!1,t=ru(Vv(r,i),Vv(e,i),i),wa=!0,Kn(t,s))};Ut.minus=Ut.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ZV(t,e):XV(t,(e.s=-e.s,e))};Ut.modulo=Ut.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(_l+"NaN");return r.s?(wa=!1,t=ru(r,e,0,1).times(e),wa=!0,r.minus(t)):Kn(new a(r),s)};Ut.naturalExponential=Ut.exp=function(){return JV(this)};Ut.naturalLogarithm=Ut.ln=function(){return Vv(this)};Ut.negated=Ut.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ut.plus=Ut.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XV(t,e):ZV(t,(e.s=-e.s,e))};Ut.precision=Ut.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ah+e);if(t=ds(s)+1,a=s.d.length-1,r=a*la+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Ut.squareRoot=Ut.sqrt=function(){var e,t,r,a,s,i,o,l=this,d=l.constructor;if(l.s<1){if(!l.s)return new d(0);throw Error(_l+"NaN")}for(e=ds(l),wa=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Qc(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=zg((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new d(t)):a=new d(s.toString()),r=d.precision,s=o=r+3;;)if(i=a,a=i.plus(ru(l,i,o+2)).times(.5),Qc(i.d).slice(0,o)===(t=Qc(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Kn(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return wa=!0,Kn(a,r)};Ut.times=Ut.mul=function(e){var t,r,a,s,i,o,l,d,u,f=this,m=f.constructor,p=f.d,g=(e=new m(e)).d;if(!f.s||!e.s)return new m(0);for(e.s*=f.s,r=f.e+e.e,d=p.length,u=g.length,d<u&&(i=p,p=g,g=i,o=d,d=u,u=o),i=[],o=d+u,a=o;a--;)i.push(0);for(a=u;--a>=0;){for(t=0,s=d+a;s>a;)l=i[s]+g[a]*p[s-a-1]+t,i[s--]=l%Ls|0,t=l/Ls|0;i[s]=(i[s]+t)%Ls|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,wa?Kn(e,m.precision):e};Ut.toDecimalPlaces=Ut.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(cd(e,0,Bg),t===void 0?t=a.rounding:cd(t,0,8),Kn(r,e+ds(r)+1,t))};Ut.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=zh(a,!0):(cd(e,0,Bg),t===void 0?t=s.rounding:cd(t,0,8),a=Kn(new s(a),e+1,t),r=zh(a,!0,e+1)),r};Ut.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?zh(s):(cd(e,0,Bg),t===void 0?t=i.rounding:cd(t,0,8),a=Kn(new i(s),e+ds(s)+1,t),r=zh(a.abs(),!1,e+ds(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ut.toInteger=Ut.toint=function(){var e=this,t=e.constructor;return Kn(new t(e),ds(e)+1,t.rounding)};Ut.toNumber=function(){return+this};Ut.toPower=Ut.pow=function(e){var t,r,a,s,i,o,l=this,d=l.constructor,u=12,f=+(e=new d(e));if(!e.s)return new d(Io);if(l=new d(l),!l.s){if(e.s<1)throw Error(_l+"Infinity");return l}if(l.eq(Io))return l;if(a=d.precision,e.eq(Io))return Kn(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=YV){for(s=new d(Io),t=Math.ceil(a/la+4),wa=!1;r%2&&(s=s.times(l),M8(s.d,t)),r=zg(r/2),r!==0;)l=l.times(l),M8(l.d,t);return wa=!0,e.s<0?new d(Io).div(s):Kn(s,a)}}else if(i<0)throw Error(_l+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,wa=!1,s=e.times(Vv(l,a+u)),wa=!0,s=JV(s),s.s=i,s};Ut.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=ds(s),a=zh(s,r<=i.toExpNeg||r>=i.toExpPos)):(cd(e,1,Bg),t===void 0?t=i.rounding:cd(t,0,8),s=Kn(new i(s),e,t),r=ds(s),a=zh(s,e<=r||r<=i.toExpNeg,e)),a};Ut.toSignificantDigits=Ut.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(cd(e,1,Bg),t===void 0?t=a.rounding:cd(t,0,8)),Kn(new a(r),e,t)};Ut.toString=Ut.valueOf=Ut.val=Ut.toJSON=Ut[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ds(e),r=e.constructor;return zh(e,t<=r.toExpNeg||t>=r.toExpPos)};function XV(e,t){var r,a,s,i,o,l,d,u,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),wa?Kn(t,m):t;if(d=e.d,u=t.d,o=e.e,s=t.e,d=d.slice(),i=o-s,i){for(i<0?(a=d,i=-i,l=u.length):(a=u,s=o,l=d.length),o=Math.ceil(m/la),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=d.length,i=u.length,l-i<0&&(i=l,a=u,u=d,d=a),r=0;i;)r=(d[--i]=d[i]+u[i]+r)/Ls|0,d[i]%=Ls;for(r&&(d.unshift(r),++s),l=d.length;d[--l]==0;)d.pop();return t.d=d,t.e=s,wa?Kn(t,m):t}function cd(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ah+e)}function Qc(e){var t,r,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",r=la-a.length,r&&(i+=lf(r)),i+=a;o=e[t],a=o+"",r=la-a.length,r&&(i+=lf(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var ru=(function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%Ls|0,o=i/Ls|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,d;if(i!=o)d=i>o?1:-1;else for(l=d=0;l<i;l++)if(a[l]!=s[l]){d=a[l]>s[l]?1:-1;break}return d}function r(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*Ls+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,d,u,f,m,p,g,b,v,y,j,_,C,A,S,T,O,R,M=a.constructor,I=a.s==s.s?1:-1,D=a.d,$=s.d;if(!a.s)return new M(a);if(!s.s)throw Error(_l+"Division by zero");for(d=a.e-s.e,O=$.length,S=D.length,g=new M(I),b=g.d=[],u=0;$[u]==(D[u]||0);)++u;if($[u]>(D[u]||0)&&--d,i==null?_=i=M.precision:o?_=i+(ds(a)-ds(s))+1:_=i,_<0)return new M(0);if(_=_/la+2|0,u=0,O==1)for(f=0,$=$[0],_++;(u<S||f)&&_--;u++)C=f*Ls+(D[u]||0),b[u]=C/$|0,f=C%$|0;else{for(f=Ls/($[0]+1)|0,f>1&&($=e($,f),D=e(D,f),O=$.length,S=D.length),A=O,v=D.slice(0,O),y=v.length;y<O;)v[y++]=0;R=$.slice(),R.unshift(0),T=$[0],$[1]>=Ls/2&&++T;do f=0,l=t($,v,O,y),l<0?(j=v[0],O!=y&&(j=j*Ls+(v[1]||0)),f=j/T|0,f>1?(f>=Ls&&(f=Ls-1),m=e($,f),p=m.length,y=v.length,l=t(m,v,p,y),l==1&&(f--,r(m,O<p?R:$,p))):(f==0&&(l=f=1),m=$.slice()),p=m.length,p<y&&m.unshift(0),r(v,m,y),l==-1&&(y=v.length,l=t($,v,O,y),l<1&&(f++,r(v,O<y?R:$,y))),y=v.length):l===0&&(f++,v=[0]),b[u++]=f,l&&v[0]?v[y++]=D[A]||0:(v=[D[A]],y=1);while((A++<S||v[0]!==void 0)&&_--)}return b[0]||b.shift(),g.e=d,Kn(g,o?i+ds(g)+1:i)}})();function JV(e,t){var r,a,s,i,o,l,d=0,u=0,f=e.constructor,m=f.precision;if(ds(e)>16)throw Error(RO+ds(e));if(!e.s)return new f(Io);for(wa=!1,l=m,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(a=Math.log(mh(2,u))/Math.LN10*2+5|0,l+=a,r=s=i=new f(Io),f.precision=l;;){if(s=Kn(s.times(e),l),r=r.times(++d),o=i.plus(ru(s,r,l)),Qc(o.d).slice(0,l)===Qc(i.d).slice(0,l)){for(;u--;)i=Kn(i.times(i),l);return f.precision=m,t==null?(wa=!0,Kn(i,m)):i}i=o}}function ds(e){for(var t=e.e*la,r=e.d[0];r>=10;r/=10)t++;return t}function n_(e,t,r){if(t>e.LN10.sd())throw wa=!0,r&&(e.precision=r),Error(_l+"LN10 precision limit exceeded");return Kn(new e(e.LN10),t)}function lf(e){for(var t="";e--;)t+="0";return t}function Vv(e,t){var r,a,s,i,o,l,d,u,f,m=1,p=10,g=e,b=g.d,v=g.constructor,y=v.precision;if(g.s<1)throw Error(_l+(g.s?"NaN":"-Infinity"));if(g.eq(Io))return new v(0);if(t==null?(wa=!1,u=y):u=t,g.eq(10))return t==null&&(wa=!0),n_(v,u);if(u+=p,v.precision=u,r=Qc(b),a=r.charAt(0),i=ds(g),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)g=g.times(e),r=Qc(g.d),a=r.charAt(0),m++;i=ds(g),a>1?(g=new v("0."+r),i++):g=new v(a+"."+r.slice(1))}else return d=n_(v,u+2,y).times(i+""),g=Vv(new v(a+"."+r.slice(1)),u-p).plus(d),v.precision=y,t==null?(wa=!0,Kn(g,y)):g;for(l=o=g=ru(g.minus(Io),g.plus(Io),u),f=Kn(g.times(g),u),s=3;;){if(o=Kn(o.times(f),u),d=l.plus(ru(o,new v(s),u)),Qc(d.d).slice(0,u)===Qc(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(n_(v,u+2,y).times(i+""))),l=ru(l,new v(m),u),v.precision=y,t==null?(wa=!0,Kn(l,y)):l;l=d,s+=2}}function P8(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=zg(r/la),e.d=[],a=(r+1)%la,r<0&&(a+=la),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=la;a<s;)e.d.push(+t.slice(a,a+=la));t=t.slice(a),a=la-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),wa&&(e.e>E1||e.e<-E1))throw Error(RO+r)}else e.s=0,e.e=0,e.d=[0];return e}function Kn(e,t,r){var a,s,i,o,l,d,u,f,m=e.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=la,s=t,u=m[f=0];else{if(f=Math.ceil((a+1)/la),i=m.length,f>=i)return e;for(u=i=m[f],o=1;i>=10;i/=10)o++;a%=la,s=a-la+o}if(r!==void 0&&(i=mh(10,o-s-1),l=u/i%10|0,d=t<0||m[f+1]!==void 0||u%i,d=r<4?(l||d)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||d||r==6&&(a>0?s>0?u/mh(10,o-s):0:m[f-1])%10&1||r==(e.s<0?8:7))),t<1||!m[0])return d?(i=ds(e),m.length=1,t=t-i-1,m[0]=mh(10,(la-t%la)%la),e.e=zg(-t/la)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(a==0?(m.length=f,i=1,f--):(m.length=f+1,i=mh(10,la-a),m[f]=s>0?(u/mh(10,o-s)%mh(10,s)|0)*i:0),d)for(;;)if(f==0){(m[0]+=i)==Ls&&(m[0]=1,++e.e);break}else{if(m[f]+=i,m[f]!=Ls)break;m[f--]=0,i=1}for(a=m.length;m[--a]===0;)m.pop();if(wa&&(e.e>E1||e.e<-E1))throw Error(RO+ds(e));return e}function ZV(e,t){var r,a,s,i,o,l,d,u,f,m,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),wa?Kn(t,g):t;if(d=e.d,m=t.d,a=t.e,u=e.e,d=d.slice(),o=u-a,o){for(f=o<0,f?(r=d,o=-o,l=m.length):(r=m,a=u,l=d.length),s=Math.max(Math.ceil(g/la),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=d.length,l=m.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(d[s]!=m[s]){f=d[s]<m[s];break}o=0}for(f&&(r=d,d=m,m=r,t.s=-t.s),l=d.length,s=m.length-l;s>0;--s)d[l++]=0;for(s=m.length;s>o;){if(d[--s]<m[s]){for(i=s;i&&d[--i]===0;)d[i]=Ls-1;--d[i],d[s]+=Ls}d[s]-=m[s]}for(;d[--l]===0;)d.pop();for(;d[0]===0;d.shift())--a;return d[0]?(t.d=d,t.e=a,wa?Kn(t,g):t):new p(0)}function zh(e,t,r){var a,s=ds(e),i=Qc(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+lf(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+lf(-s-1)+i,r&&(a=r-o)>0&&(i+=lf(a))):s>=o?(i+=lf(s+1-o),r&&(a=r-s-1)>0&&(i=i+"."+lf(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(s+1===o&&(i+="."),i+=lf(a))),e.s<0?"-"+i:i}function M8(e,t){if(e.length>t)return e.length=t,!0}function QV(e){var t,r,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ah+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return P8(o,i.toString())}else if(typeof i!="string")throw Error(Ah+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,hye.test(i))P8(o,i);else throw Error(Ah+i)}if(s.prototype=Ut,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=QV,s.config=s.set=mye,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function mye(e){if(!e||typeof e!="object")throw Error(_l+"Object expected");var t,r,a,s=["precision",1,Bg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(zg(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(Ah+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(Ah+r+": "+a);return this}var PO=QV(fye);Io=new PO(1);const zn=PO;function pye(e){return yye(e)||vye(e)||xye(e)||gye()}function gye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xye(e,t){if(e){if(typeof e=="string")return p4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p4(e,t)}}function vye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function yye(e){if(Array.isArray(e))return p4(e)}function p4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var bye=function(t){return t},eH={},tH=function(t){return t===eH},D8=function(t){return function r(){return arguments.length===0||arguments.length===1&&tH(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},jye=function e(t,r){return t===1?r:D8(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==eH}).length;return o>=t?r.apply(void 0,s):e(t-o,D8(function(){for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];var f=s.map(function(m){return tH(m)?d.shift():m});return r.apply(void 0,pye(f).concat(d))}))})},v2=function(t){return jye(t.length,t)},g4=function(t,r){for(var a=[],s=t;s<r;++s)a[s-t]=s;return a},wye=v2(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),Nye=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return bye;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,d){return d(l)},i.apply(void 0,arguments))}},x4=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},rH=function(t){var r=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,d){return l===r[d]})||(r=i,a=t.apply(void 0,i)),a}};function Sye(e){var t;return e===0?t=1:t=Math.floor(new zn(e).abs().log(10).toNumber())+1,t}function Cye(e,t,r){for(var a=new zn(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}var _ye=v2(function(e,t,r){var a=+e,s=+t;return a+r*(s-a)}),Aye=v2(function(e,t,r){var a=t-+e;return a=a||1/0,(r-e)/a}),kye=v2(function(e,t,r){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});const y2={rangeStep:Cye,getDigitCount:Sye,interpolateNumber:_ye,uninterpolateNumber:Aye,uninterpolateTruncation:kye};function v4(e){return Tye(e)||Eye(e)||nH(e)||Oye()}function Oye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Tye(e){if(Array.isArray(e))return y4(e)}function Hv(e,t){return Mye(e)||Pye(e,t)||nH(e,t)||Rye()}function Rye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nH(e,t){if(e){if(typeof e=="string")return y4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y4(e,t)}}function y4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Pye(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],a=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));a=!0);}catch(d){s=!0,i=d}finally{try{!a&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function Mye(e){if(Array.isArray(e))return e}function aH(e){var t=Hv(e,2),r=t[0],a=t[1],s=r,i=a;return r>a&&(s=a,i=r),[s,i]}function sH(e,t,r){if(e.lte(0))return new zn(0);var a=y2.getDigitCount(e.toNumber()),s=new zn(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new zn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=l.mul(s);return t?d:new zn(Math.ceil(d))}function Dye(e,t,r){var a=1,s=new zn(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new zn(10).pow(y2.getDigitCount(e)-1),s=new zn(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new zn(Math.floor(e)))}else e===0?s=new zn(Math.floor((t-1)/2)):r||(s=new zn(Math.floor(e)));var o=Math.floor((t-1)/2),l=Nye(wye(function(d){return s.add(new zn(d-o).mul(a)).toNumber()}),g4);return l(0,t)}function iH(e,t,r,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new zn(0),tickMin:new zn(0),tickMax:new zn(0)};var i=sH(new zn(t).sub(e).div(r-1),a,s),o;e<=0&&t>=0?o=new zn(0):(o=new zn(e).add(t).div(2),o=o.sub(new zn(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),d=Math.ceil(new zn(t).sub(o).div(i).toNumber()),u=l+d+1;return u>r?iH(e,t,r,a,s+1):(u<r&&(d=t>0?d+(r-u):d,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new zn(l).mul(i)),tickMax:o.add(new zn(d).mul(i))})}function Lye(e){var t=Hv(e,2),r=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=aH([r,a]),d=Hv(l,2),u=d[0],f=d[1];if(u===-1/0||f===1/0){var m=f===1/0?[u].concat(v4(g4(0,s-1).map(function(){return 1/0}))):[].concat(v4(g4(0,s-1).map(function(){return-1/0})),[f]);return r>a?x4(m):m}if(u===f)return Dye(u,s,i);var p=iH(u,f,o,i),g=p.step,b=p.tickMin,v=p.tickMax,y=y2.rangeStep(b,v.add(new zn(.1).mul(g)),g);return r>a?x4(y):y}function Iye(e,t){var r=Hv(e,2),a=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=aH([a,s]),l=Hv(o,2),d=l[0],u=l[1];if(d===-1/0||u===1/0)return[a,s];if(d===u)return[d];var f=Math.max(t,2),m=sH(new zn(u).sub(d).div(f-1),i,0),p=[].concat(v4(y2.rangeStep(new zn(d),new zn(u).sub(new zn(.99).mul(m)),m)),[u]);return a>s?x4(p):p}var $ye=rH(Lye),Fye=rH(Iye),Bye="Invariant failed";function qh(e,t){throw new Error(Bye)}var zye=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Jp(e){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jp(e)}function T1(){return T1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},T1.apply(this,arguments)}function qye(e,t){return Gye(e)||Hye(e,t)||Vye(e,t)||Uye()}function Uye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vye(e,t){if(e){if(typeof e=="string")return L8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L8(e,t)}}function L8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Hye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Gye(e){if(Array.isArray(e))return e}function Wye(e,t){if(e==null)return{};var r=Kye(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Kye(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Yye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xye(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,cH(a.key),a)}}function Jye(e,t,r){return t&&Xye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zye(e,t,r){return t=R1(t),Qye(e,oH()?Reflect.construct(t,r||[],R1(e).constructor):t.apply(e,r))}function Qye(e,t){if(t&&(Jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e0e(e)}function e0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oH=function(){return!!e})()}function R1(e){return R1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},R1(e)}function t0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b4(e,t)}function b4(e,t){return b4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},b4(e,t)}function lH(e,t,r){return t=cH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cH(e){var t=r0e(e,"string");return Jp(t)=="symbol"?t:t+""}function r0e(e,t){if(Jp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Jp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qg=(function(e){function t(){return Yye(this,t),Zye(this,t,arguments)}return t0e(t,e),Jye(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,o=a.width,l=a.dataKey,d=a.data,u=a.dataPointFormatter,f=a.xAxis,m=a.yAxis,p=Wye(a,zye),g=tr(p,!1);this.props.direction==="x"&&f.type!=="number"&&qh();var b=d.map(function(v){var y=u(v,l),j=y.x,_=y.y,C=y.value,A=y.errorVal;if(!A)return null;var S=[],T,O;if(Array.isArray(A)){var R=qye(A,2);T=R[0],O=R[1]}else T=O=A;if(i==="vertical"){var M=f.scale,I=_+s,D=I+o,$=I-o,K=M(C-T),U=M(C+O);S.push({x1:U,y1:D,x2:U,y2:$}),S.push({x1:K,y1:I,x2:U,y2:I}),S.push({x1:K,y1:D,x2:K,y2:$})}else if(i==="horizontal"){var J=m.scale,V=j+s,G=V-o,q=V+o,Y=J(C-T),Q=J(C+O);S.push({x1:G,y1:Q,x2:q,y2:Q}),S.push({x1:V,y1:Y,x2:V,y2:Q}),S.push({x1:G,y1:Y,x2:q,y2:Y})}return pe.createElement(Ur,T1({className:"recharts-errorBar",key:"bar-".concat(S.map(function(F){return"".concat(F.x1,"-").concat(F.x2,"-").concat(F.y1,"-").concat(F.y2)}))},g),S.map(function(F){return pe.createElement("line",T1({},F,{key:"line-".concat(F.x1,"-").concat(F.x2,"-").concat(F.y1,"-").concat(F.y2)}))}))});return pe.createElement(Ur,{className:"recharts-errorBars"},b)}}])})(pe.Component);lH(qg,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});lH(qg,"displayName","ErrorBar");function Gv(e){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gv(e)}function I8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ch(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I8(Object(r),!0).forEach(function(a){n0e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function n0e(e,t,r){return t=a0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a0e(e){var t=s0e(e,"string");return Gv(t)=="symbol"?t:t+""}function s0e(e,t){if(Gv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dH=function(t){var r=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=Do(r,nd);if(!o)return null;var l=nd.defaultProps,d=l!==void 0?ch(ch({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(a||[]).reduce(function(f,m){var p=m.item,g=m.props,b=g.sectors||g.data||[];return f.concat(b.map(function(v){return{type:o.props.iconType||p.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(a||[]).map(function(f){var m=f.item,p=m.type.defaultProps,g=p!==void 0?ch(ch({},p),m.props):{},b=g.dataKey,v=g.name,y=g.legendType,j=g.hide;return{inactive:j,dataKey:b,type:d.iconType||y||"square",color:MO(m),value:v||b,payload:g}}),ch(ch(ch({},d),nd.getWithHeight(o,s)),{},{payload:u,item:o})};function Wv(e){"@babel/helpers - typeof";return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wv(e)}function $8(e){return c0e(e)||l0e(e)||o0e(e)||i0e()}function i0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o0e(e,t){if(e){if(typeof e=="string")return j4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j4(e,t)}}function l0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function c0e(e){if(Array.isArray(e))return j4(e)}function j4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function F8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Va(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F8(Object(r),!0).forEach(function(a){Cp(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Cp(e,t,r){return t=d0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d0e(e){var t=u0e(e,"string");return Wv(t)=="symbol"?t:t+""}function u0e(e,t){if(Wv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Wv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ca(e,t,r){return yr(e)||yr(t)?r:Ss(t)?zo(e,t,r):wr(t)?t(e):r}function iv(e,t,r,a){var s=cye(e,function(l){return ca(l,t)});if(r==="number"){var i=s.filter(function(l){return vt(l)||parseFloat(l)});return i.length?[x2(i),uf(i)]:[1/0,-1/0]}var o=a?s.filter(function(l){return!yr(l)}):s;return o.map(function(l){return Ss(l)||l instanceof Date?l:""})}var f0e=function(t){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=a==null?void 0:a.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,u=0;u<l;u++){var f=u>0?s[u-1].coordinate:s[l-1].coordinate,m=s[u].coordinate,p=u>=l-1?s[0].coordinate:s[u+1].coordinate,g=void 0;if(Fi(m-f)!==Fi(p-m)){var b=[];if(Fi(p-m)===Fi(d[1]-d[0])){g=p;var v=m+d[1]-d[0];b[0]=Math.min(v,(v+f)/2),b[1]=Math.max(v,(v+f)/2)}else{g=f;var y=p+d[1]-d[0];b[0]=Math.min(m,(y+m)/2),b[1]=Math.max(m,(y+m)/2)}var j=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>j[0]&&t<=j[1]||t>=b[0]&&t<=b[1]){o=s[u].index;break}}else{var _=Math.min(f,p),C=Math.max(f,p);if(t>(_+m)/2&&t<=(C+m)/2){o=s[u].index;break}}}else for(var A=0;A<l;A++)if(A===0&&t<=(a[A].coordinate+a[A+1].coordinate)/2||A>0&&A<l-1&&t>(a[A].coordinate+a[A-1].coordinate)/2&&t<=(a[A].coordinate+a[A+1].coordinate)/2||A===l-1&&t>(a[A].coordinate+a[A-1].coordinate)/2){o=a[A].index;break}return o},MO=function(t){var r,a=t,s=a.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Va(Va({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,d;switch(s){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:l;break;default:d=l;break}return d},h0e=function(t){var r=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),d=0,u=l.length;d<u;d++)for(var f=i[l[d]].stackGroups,m=Object.keys(f),p=0,g=m.length;p<g;p++){var b=f[m[p]],v=b.items,y=b.cateAxisId,j=v.filter(function(O){return tu(O.type).indexOf("Bar")>=0});if(j&&j.length){var _=j[0].type.defaultProps,C=_!==void 0?Va(Va({},_),j[0].props):j[0].props,A=C.barSize,S=C[y];o[S]||(o[S]=[]);var T=yr(A)?r:A;o[S].push({item:j[0],stackList:j.slice(1),barSize:yr(T)?void 0:Bi(T,a,0)})}}return o},m0e=function(t){var r=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,d=o.length;if(d<1)return null;var u=Bi(r,s,0,!0),f,m=[];if(o[0].barSize===+o[0].barSize){var p=!1,g=s/d,b=o.reduce(function(A,S){return A+S.barSize||0},0);b+=(d-1)*u,b>=s&&(b-=(d-1)*u,u=0),b>=s&&g>0&&(p=!0,g*=.9,b=d*g);var v=(s-b)/2>>0,y={offset:v-u,size:0};f=o.reduce(function(A,S){var T={item:S.item,position:{offset:y.offset+y.size+u,size:p?g:S.barSize}},O=[].concat($8(A),[T]);return y=O[O.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(R){O.push({item:R,position:y})}),O},m)}else{var j=Bi(a,s,0,!0);s-2*j-(d-1)*u<=0&&(u=0);var _=(s-2*j-(d-1)*u)/d;_>1&&(_>>=0);var C=l===+l?Math.min(_,l):_;f=o.reduce(function(A,S,T){var O=[].concat($8(A),[{item:S.item,position:{offset:j+(_+u)*T+(_-C)/2,size:C}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(R){O.push({item:R,position:O[O.length-1].position})}),O},m)}return f},p0e=function(t,r,a,s){var i=a.children,o=a.width,l=a.margin,d=o-(l.left||0)-(l.right||0),u=dH({children:i,legendWidth:d});if(u){var f=s||{},m=f.width,p=f.height,g=u.align,b=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&b==="middle")&&g!=="center"&&vt(t[g]))return Va(Va({},t),{},Cp({},g,t[g]+(m||0)));if((v==="horizontal"||v==="vertical"&&g==="center")&&b!=="middle"&&vt(t[b]))return Va(Va({},t),{},Cp({},b,t[b]+(p||0)))}return t},g0e=function(t,r,a){return yr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||a==="x"?r==="xAxis":a==="y"?r==="yAxis":!0},uH=function(t,r,a,s,i){var o=r.props.children,l=Vi(o,qg).filter(function(u){return g0e(s,i,u.props.direction)});if(l&&l.length){var d=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var m=ca(f,a);if(yr(m))return u;var p=Array.isArray(m)?[x2(m),uf(m)]:[m,m],g=d.reduce(function(b,v){var y=ca(f,v,0),j=p[0]-Math.abs(Array.isArray(y)?y[0]:y),_=p[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(j,b[0]),Math.max(_,b[1])]},[1/0,-1/0]);return[Math.min(g[0],u[0]),Math.max(g[1],u[1])]},[1/0,-1/0])}return null},x0e=function(t,r,a,s,i){var o=r.map(function(l){return uH(t,l,a,i,s)}).filter(function(l){return!yr(l)});return o&&o.length?o.reduce(function(l,d){return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]):null},fH=function(t,r,a,s,i){var o=r.map(function(d){var u=d.props.dataKey;return a==="number"&&u&&uH(t,d,u,s)||iv(t,u,a,i)});if(a==="number")return o.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(d,u){for(var f=0,m=u.length;f<m;f++)l[u[f]]||(l[u[f]]=!0,d.push(u[f]));return d},[])},hH=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},mH=function(t,r,a,s){if(s)return t.map(function(d){return d.coordinate});var i,o,l=t.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===a&&(o=!0),d.coordinate});return i||l.push(r),o||l.push(a),l},Jd=function(t,r,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,d=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||a)&&o==="category"&&s.bandwidth?s.bandwidth()/d:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Fi(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(m){var p=i?i.indexOf(m):m;return{coordinate:s(p)+u,value:m,offset:u}});return f.filter(function(m){return!Ig(m.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(m,p){return{coordinate:s(m)+u,value:m,index:p,offset:u}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(m){return{coordinate:s(m)+u,value:m,offset:u}}):s.domain().map(function(m,p){return{coordinate:s(m)+u,value:i?i[m]:m,index:p,offset:u}})},a_=new WeakMap,ub=function(t,r){if(typeof r!="function")return t;a_.has(t)||a_.set(t,new WeakMap);var a=a_.get(t);if(a.has(r))return a.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return a.set(r,s),s},pH=function(t,r,a){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Fv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:_1(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!a)?{scale:sv(),realScaleType:"point"}:i==="category"?{scale:Fv(),realScaleType:"band"}:{scale:_1(),realScaleType:"linear"};if(Fh(s)){var d="scale".concat(r2(s));return{scale:(S8[d]||sv)(),realScaleType:S8[d]?d:"point"}}return wr(s)?{scale:s}:{scale:sv(),realScaleType:"point"}},B8=1e-4,gH=function(t){var r=t.domain();if(!(!r||r.length<=2)){var a=r.length,s=t.range(),i=Math.min(s[0],s[1])-B8,o=Math.max(s[0],s[1])+B8,l=t(r[0]),d=t(r[a-1]);(l<i||l>o||d<i||d>o)&&t.domain([r[0],r[a-1]])}},v0e=function(t,r){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===r)return t[a].position;return null},y0e=function(t,r){if(!r||r.length!==2||!vt(r[0])||!vt(r[1]))return t;var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!vt(t[0])||t[0]<a)&&(i[0]=a),(!vt(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},b0e=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0,l=0;l<r;++l){var d=Ig(t[l][a][1])?t[l][a][0]:t[l][a][1];d>=0?(t[l][a][0]=i,t[l][a][1]=i+d,i=t[l][a][1]):(t[l][a][0]=o,t[l][a][1]=o+d,o=t[l][a][1])}},j0e=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0;o<r;++o){var l=Ig(t[o][a][1])?t[o][a][0]:t[o][a][1];l>=0?(t[o][a][0]=i,t[o][a][1]=i+l,i=t[o][a][1]):(t[o][a][0]=0,t[o][a][1]=0)}},w0e={sign:b0e,expand:che,none:Up,silhouette:dhe,wiggle:uhe,positive:j0e},N0e=function(t,r,a){var s=r.map(function(l){return l.props.dataKey}),i=w0e[a],o=lhe().keys(s).value(function(l,d){return+ca(l,d,0)}).order(JA).offset(i);return o(t)},S0e=function(t,r,a,s,i,o){if(!t)return null;var l=o?r.reverse():r,d={},u=l.reduce(function(m,p){var g,b=(g=p.type)!==null&&g!==void 0&&g.defaultProps?Va(Va({},p.type.defaultProps),p.props):p.props,v=b.stackId,y=b.hide;if(y)return m;var j=b[a],_=m[j]||{hasStack:!1,stackGroups:{}};if(Ss(v)){var C=_.stackGroups[v]||{numericAxisId:a,cateAxisId:s,items:[]};C.items.push(p),_.hasStack=!0,_.stackGroups[v]=C}else _.stackGroups[kf("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[p]};return Va(Va({},m),{},Cp({},j,_))},d),f={};return Object.keys(u).reduce(function(m,p){var g=u[p];if(g.hasStack){var b={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(v,y){var j=g.stackGroups[y];return Va(Va({},v),{},Cp({},y,{numericAxisId:a,cateAxisId:s,items:j.items,stackedData:N0e(t,j.items,i)}))},b)}return Va(Va({},m),{},Cp({},p,g))},f)},xH=function(t,r){var a=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,d=a||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=$ye(u,i,l);return t.domain([x2(f),uf(f)]),{niceTicks:f}}if(i&&s==="number"){var m=t.domain(),p=Fye(m,i,l);return{niceTicks:p}}return null};function Zp(e){var t=e.axis,r=e.ticks,a=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!yr(s[t.dataKey])){var l=l1(r,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var d=ca(s,yr(o)?t.dataKey:o);return yr(d)?null:t.scale(d)}var z8=function(t){var r=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return a[l]?a[l].coordinate+s:null;var d=ca(o,r.dataKey,r.domain[l]);return yr(d)?null:r.scale(d)-i/2+s},C0e=function(t){var r=t.numericAxis,a=r.scale.domain();if(r.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},_0e=function(t,r){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?Va(Va({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(Ss(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},A0e=function(t){return t.reduce(function(r,a){return[x2(a.concat([r[0]]).filter(vt)),uf(a.concat([r[1]]).filter(vt))]},[1/0,-1/0])},vH=function(t,r,a){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,d=l.reduce(function(u,f){var m=A0e(f.slice(r,a+1));return[Math.min(u[0],m[0]),Math.max(u[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],s[0]),Math.max(d[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},q8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,U8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,w4=function(t,r,a){if(wr(t))return t(r,a);if(!Array.isArray(t))return r;var s=[];if(vt(t[0]))s[0]=a?t[0]:Math.min(t[0],r[0]);else if(q8.test(t[0])){var i=+q8.exec(t[0])[1];s[0]=r[0]-i}else wr(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(vt(t[1]))s[1]=a?t[1]:Math.max(t[1],r[1]);else if(U8.test(t[1])){var o=+U8.exec(t[1])[1];s[1]=r[1]+o}else wr(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},P1=function(t,r,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&r&&r.length>=2){for(var i=lO(r,function(m){return m.coordinate}),o=1/0,l=1,d=i.length;l<d;l++){var u=i[l],f=i[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},V8=function(t,r,a){return!t||!t.length||wf(t,zo(a,"type.defaultProps.domain"))?r:t},yH=function(t,r){var a=t.type.defaultProps?Va(Va({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,o=a.unit,l=a.formatter,d=a.tooltipType,u=a.chartType,f=a.hide;return Va(Va({},tr(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:MO(t),value:ca(r,s),type:d,payload:r,chartType:u,hide:f})};function Kv(e){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kv(e)}function H8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H8(Object(r),!0).forEach(function(a){bH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bH(e,t,r){return t=k0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k0e(e){var t=O0e(e,"string");return Kv(t)=="symbol"?t:t+""}function O0e(e,t){if(Kv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Kv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E0e(e,t){return M0e(e)||P0e(e,t)||R0e(e,t)||T0e()}function T0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R0e(e,t){if(e){if(typeof e=="string")return G8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G8(e,t)}}function G8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function P0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function M0e(e){if(Array.isArray(e))return e}var M1=Math.PI/180,D0e=function(t){return t*180/Math.PI},ea=function(t,r,a,s){return{x:t+Math.cos(-M1*s)*a,y:r+Math.sin(-M1*s)*a}},jH=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},L0e=function(t,r,a,s,i){var o=t.width,l=t.height,d=t.startAngle,u=t.endAngle,f=Bi(t.cx,o,o/2),m=Bi(t.cy,l,l/2),p=jH(o,l,a),g=Bi(t.innerRadius,p,0),b=Bi(t.outerRadius,p,p*.8),v=Object.keys(r);return v.reduce(function(y,j){var _=r[j],C=_.domain,A=_.reversed,S;if(yr(_.range))s==="angleAxis"?S=[d,u]:s==="radiusAxis"&&(S=[g,b]),A&&(S=[S[1],S[0]]);else{S=_.range;var T=S,O=E0e(T,2);d=O[0],u=O[1]}var R=pH(_,i),M=R.realScaleType,I=R.scale;I.domain(C).range(S),gH(I);var D=xH(I,Wd(Wd({},_),{},{realScaleType:M})),$=Wd(Wd(Wd({},_),D),{},{range:S,radius:b,realScaleType:M,scale:I,cx:f,cy:m,innerRadius:g,outerRadius:b,startAngle:d,endAngle:u});return Wd(Wd({},y),{},bH({},j,$))},{})},I0e=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2))},$0e=function(t,r){var a=t.x,s=t.y,i=r.cx,o=r.cy,l=I0e({x:a,y:s},{x:i,y:o});if(l<=0)return{radius:l};var d=(a-i)/l,u=Math.acos(d);return s>o&&(u=2*Math.PI-u),{radius:l,angle:D0e(u),angleInRadian:u}},F0e=function(t){var r=t.startAngle,a=t.endAngle,s=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:a-o*360}},B0e=function(t,r){var a=r.startAngle,s=r.endAngle,i=Math.floor(a/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},W8=function(t,r){var a=t.x,s=t.y,i=$0e({x:a,y:s},r),o=i.radius,l=i.angle,d=r.innerRadius,u=r.outerRadius;if(o<d||o>u)return!1;if(o===0)return!0;var f=F0e(r),m=f.startAngle,p=f.endAngle,g=l,b;if(m<=p){for(;g>p;)g-=360;for(;g<m;)g+=360;b=g>=m&&g<=p}else{for(;g>m;)g-=360;for(;g<p;)g+=360;b=g>=p&&g<=m}return b?Wd(Wd({},r),{},{radius:o,angle:B0e(g,r)}):null},wH=function(t){return!N.isValidElement(t)&&!wr(t)&&typeof t!="boolean"?t.className:""};function Yv(e){"@babel/helpers - typeof";return Yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yv(e)}var z0e=["offset"];function q0e(e){return G0e(e)||H0e(e)||V0e(e)||U0e()}function U0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V0e(e,t){if(e){if(typeof e=="string")return N4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N4(e,t)}}function H0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function G0e(e){if(Array.isArray(e))return N4(e)}function N4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function W0e(e,t){if(e==null)return{};var r=K0e(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function K0e(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function K8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ns(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K8(Object(r),!0).forEach(function(a){Y0e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Y0e(e,t,r){return t=X0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X0e(e){var t=J0e(e,"string");return Yv(t)=="symbol"?t:t+""}function J0e(e,t){if(Yv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Yv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Xv.apply(this,arguments)}var Z0e=function(t){var r=t.value,a=t.formatter,s=yr(t.children)?r:t.children;return wr(a)?a(s):s},Q0e=function(t,r){var a=Fi(r-t),s=Math.min(Math.abs(r-t),360);return a*s},ebe=function(t,r,a){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,d=i,u=d.cx,f=d.cy,m=d.innerRadius,p=d.outerRadius,g=d.startAngle,b=d.endAngle,v=d.clockWise,y=(m+p)/2,j=Q0e(g,b),_=j>=0?1:-1,C,A;s==="insideStart"?(C=g+_*o,A=v):s==="insideEnd"?(C=b-_*o,A=!v):s==="end"&&(C=b+_*o,A=v),A=j<=0?A:!A;var S=ea(u,f,y,C),T=ea(u,f,y,C+(A?1:-1)*359),O="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(A?0:1,`,
    `).concat(T.x,",").concat(T.y),R=yr(t.id)?kf("recharts-radial-line-"):t.id;return pe.createElement("text",Xv({},a,{dominantBaseline:"central",className:Pr("recharts-radial-bar-label",l)}),pe.createElement("defs",null,pe.createElement("path",{id:R,d:O})),pe.createElement("textPath",{xlinkHref:"#".concat(R)},r))},tbe=function(t){var r=t.viewBox,a=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,d=i.innerRadius,u=i.outerRadius,f=i.startAngle,m=i.endAngle,p=(f+m)/2;if(s==="outside"){var g=ea(o,l,u+a,p),b=g.x,v=g.y;return{x:b,y:v,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(d+u)/2,j=ea(o,l,y,p),_=j.x,C=j.y;return{x:_,y:C,textAnchor:"middle",verticalAnchor:"middle"}},rbe=function(t){var r=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,d=o.y,u=o.width,f=o.height,m=f>=0?1:-1,p=m*s,g=m>0?"end":"start",b=m>0?"start":"end",v=u>=0?1:-1,y=v*s,j=v>0?"end":"start",_=v>0?"start":"end";if(i==="top"){var C={x:l+u/2,y:d-m*s,textAnchor:"middle",verticalAnchor:g};return Ns(Ns({},C),a?{height:Math.max(d-a.y,0),width:u}:{})}if(i==="bottom"){var A={x:l+u/2,y:d+f+p,textAnchor:"middle",verticalAnchor:b};return Ns(Ns({},A),a?{height:Math.max(a.y+a.height-(d+f),0),width:u}:{})}if(i==="left"){var S={x:l-y,y:d+f/2,textAnchor:j,verticalAnchor:"middle"};return Ns(Ns({},S),a?{width:Math.max(S.x-a.x,0),height:f}:{})}if(i==="right"){var T={x:l+u+y,y:d+f/2,textAnchor:_,verticalAnchor:"middle"};return Ns(Ns({},T),a?{width:Math.max(a.x+a.width-T.x,0),height:f}:{})}var O=a?{width:u,height:f}:{};return i==="insideLeft"?Ns({x:l+y,y:d+f/2,textAnchor:_,verticalAnchor:"middle"},O):i==="insideRight"?Ns({x:l+u-y,y:d+f/2,textAnchor:j,verticalAnchor:"middle"},O):i==="insideTop"?Ns({x:l+u/2,y:d+p,textAnchor:"middle",verticalAnchor:b},O):i==="insideBottom"?Ns({x:l+u/2,y:d+f-p,textAnchor:"middle",verticalAnchor:g},O):i==="insideTopLeft"?Ns({x:l+y,y:d+p,textAnchor:_,verticalAnchor:b},O):i==="insideTopRight"?Ns({x:l+u-y,y:d+p,textAnchor:j,verticalAnchor:b},O):i==="insideBottomLeft"?Ns({x:l+y,y:d+f-p,textAnchor:_,verticalAnchor:g},O):i==="insideBottomRight"?Ns({x:l+u-y,y:d+f-p,textAnchor:j,verticalAnchor:g},O):Lg(i)&&(vt(i.x)||jh(i.x))&&(vt(i.y)||jh(i.y))?Ns({x:l+Bi(i.x,u),y:d+Bi(i.y,f),textAnchor:"end",verticalAnchor:"end"},O):Ns({x:l+u/2,y:d+f/2,textAnchor:"middle",verticalAnchor:"middle"},O)},nbe=function(t){return"cx"in t&&vt(t.cx)};function $s(e){var t=e.offset,r=t===void 0?5:t,a=W0e(e,z0e),s=Ns({offset:r},a),i=s.viewBox,o=s.position,l=s.value,d=s.children,u=s.content,f=s.className,m=f===void 0?"":f,p=s.textBreakAll;if(!i||yr(l)&&yr(d)&&!N.isValidElement(u)&&!wr(u))return null;if(N.isValidElement(u))return N.cloneElement(u,s);var g;if(wr(u)){if(g=N.createElement(u,s),N.isValidElement(g))return g}else g=Z0e(s);var b=nbe(i),v=tr(s,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return ebe(s,g,v);var y=b?tbe(s):rbe(s);return pe.createElement(Bh,Xv({className:Pr("recharts-label",m)},v,y,{breakAll:p}),g)}$s.displayName="Label";var NH=function(t){var r=t.cx,a=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,d=t.radius,u=t.innerRadius,f=t.outerRadius,m=t.x,p=t.y,g=t.top,b=t.left,v=t.width,y=t.height,j=t.clockWise,_=t.labelViewBox;if(_)return _;if(vt(v)&&vt(y)){if(vt(m)&&vt(p))return{x:m,y:p,width:v,height:y};if(vt(g)&&vt(b))return{x:g,y:b,width:v,height:y}}return vt(m)&&vt(p)?{x:m,y:p,width:0,height:0}:vt(r)&&vt(a)?{cx:r,cy:a,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:f||d||l||0,clockWise:j}:t.viewBox?t.viewBox:{}},abe=function(t,r){return t?t===!0?pe.createElement($s,{key:"label-implicit",viewBox:r}):Ss(t)?pe.createElement($s,{key:"label-implicit",viewBox:r,value:t}):N.isValidElement(t)?t.type===$s?N.cloneElement(t,{key:"label-implicit",viewBox:r}):pe.createElement($s,{key:"label-implicit",content:t,viewBox:r}):wr(t)?pe.createElement($s,{key:"label-implicit",content:t,viewBox:r}):Lg(t)?pe.createElement($s,Xv({viewBox:r},t,{key:"label-implicit"})):null:null},sbe=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=NH(t),o=Vi(s,$s).map(function(d,u){return N.cloneElement(d,{viewBox:r||i,key:"label-".concat(u)})});if(!a)return o;var l=abe(t.label,r||i);return[l].concat(q0e(o))};$s.parseViewBox=NH;$s.renderCallByParent=sbe;var s_,Y8;function ibe(){if(Y8)return s_;Y8=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return s_=e,s_}var obe=ibe();const lbe=jn(obe);function Jv(e){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jv(e)}var cbe=["valueAccessor"],dbe=["data","dataKey","clockWise","id","textBreakAll"];function ube(e){return pbe(e)||mbe(e)||hbe(e)||fbe()}function fbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hbe(e,t){if(e){if(typeof e=="string")return S4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S4(e,t)}}function mbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pbe(e){if(Array.isArray(e))return S4(e)}function S4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function D1(){return D1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},D1.apply(this,arguments)}function X8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function J8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X8(Object(r),!0).forEach(function(a){gbe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function gbe(e,t,r){return t=xbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xbe(e){var t=vbe(e,"string");return Jv(t)=="symbol"?t:t+""}function vbe(e,t){if(Jv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Jv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z8(e,t){if(e==null)return{};var r=ybe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ybe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var bbe=function(t){return Array.isArray(t.value)?lbe(t.value):t.value};function jl(e){var t=e.valueAccessor,r=t===void 0?bbe:t,a=Z8(e,cbe),s=a.data,i=a.dataKey,o=a.clockWise,l=a.id,d=a.textBreakAll,u=Z8(a,dbe);return!s||!s.length?null:pe.createElement(Ur,{className:"recharts-label-list"},s.map(function(f,m){var p=yr(i)?r(f,m):ca(f&&f.payload,i),g=yr(l)?{}:{id:"".concat(l,"-").concat(m)};return pe.createElement($s,D1({},tr(f,!0),u,g,{parentViewBox:f.parentViewBox,value:p,textBreakAll:d,viewBox:$s.parseViewBox(yr(o)?f:J8(J8({},f),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}jl.displayName="LabelList";function jbe(e,t){return e?e===!0?pe.createElement(jl,{key:"labelList-implicit",data:t}):pe.isValidElement(e)||wr(e)?pe.createElement(jl,{key:"labelList-implicit",data:t,content:e}):Lg(e)?pe.createElement(jl,D1({data:t},e,{key:"labelList-implicit"})):null:null}function wbe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var a=e.children,s=Vi(a,jl).map(function(o,l){return N.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=jbe(e.label,t);return[i].concat(ube(s))}jl.renderCallByParent=wbe;function Zv(e){"@babel/helpers - typeof";return Zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zv(e)}function C4(){return C4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},C4.apply(this,arguments)}function Q8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function eI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q8(Object(r),!0).forEach(function(a){Nbe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Nbe(e,t,r){return t=Sbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sbe(e){var t=Cbe(e,"string");return Zv(t)=="symbol"?t:t+""}function Cbe(e,t){if(Zv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Zv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _be=function(t,r){var a=Fi(r-t),s=Math.min(Math.abs(r-t),359.999);return a*s},fb=function(t){var r=t.cx,a=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,d=t.cornerRadius,u=t.cornerIsExternal,f=d*(l?1:-1)+s,m=Math.asin(d/f)/M1,p=u?i:i+o*m,g=ea(r,a,f,p),b=ea(r,a,s,p),v=u?i-o*m:i,y=ea(r,a,f*Math.cos(m*M1),v);return{center:g,circleTangency:b,lineTangency:y,theta:m}},SH=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,d=_be(o,l),u=o+d,f=ea(r,a,i,o),m=ea(r,a,i,u),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>u),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(s>0){var g=ea(r,a,s,o),b=ea(r,a,s,u);p+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(r,",").concat(a," Z");return p},Abe=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,d=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,m=Fi(f-u),p=fb({cx:r,cy:a,radius:i,angle:u,sign:m,cornerRadius:o,cornerIsExternal:d}),g=p.circleTangency,b=p.lineTangency,v=p.theta,y=fb({cx:r,cy:a,radius:i,angle:f,sign:-m,cornerRadius:o,cornerIsExternal:d}),j=y.circleTangency,_=y.lineTangency,C=y.theta,A=d?Math.abs(u-f):Math.abs(u-f)-v-C;if(A<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):SH({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:u,endAngle:f});var S="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(A>180),",").concat(+(m<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(_.x,",").concat(_.y,`
  `);if(s>0){var T=fb({cx:r,cy:a,radius:s,angle:u,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),O=T.circleTangency,R=T.lineTangency,M=T.theta,I=fb({cx:r,cy:a,radius:s,angle:f,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),D=I.circleTangency,$=I.lineTangency,K=I.theta,U=d?Math.abs(u-f):Math.abs(u-f)-M-K;if(U<0&&o===0)return"".concat(S,"L").concat(r,",").concat(a,"Z");S+="L".concat($.x,",").concat($.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(U>180),",").concat(+(m>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(R.x,",").concat(R.y,"Z")}else S+="L".concat(r,",").concat(a,"Z");return S},kbe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},CH=function(t){var r=eI(eI({},kbe),t),a=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,d=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,m=r.endAngle,p=r.className;if(o<i||f===m)return null;var g=Pr("recharts-sector",p),b=o-i,v=Bi(l,b,0,!0),y;return v>0&&Math.abs(f-m)<360?y=Abe({cx:a,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(v,b/2),forceCornerRadius:d,cornerIsExternal:u,startAngle:f,endAngle:m}):y=SH({cx:a,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:m}),pe.createElement("path",C4({},tr(r,!0),{className:g,d:y,role:"img"}))};function Qv(e){"@babel/helpers - typeof";return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qv(e)}function _4(){return _4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_4.apply(this,arguments)}function tI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function rI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tI(Object(r),!0).forEach(function(a){Obe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Obe(e,t,r){return t=Ebe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ebe(e){var t=Tbe(e,"string");return Qv(t)=="symbol"?t:t+""}function Tbe(e,t){if(Qv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Qv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nI={curveBasisClosed:Jfe,curveBasisOpen:Zfe,curveBasis:Xfe,curveBumpX:Lfe,curveBumpY:Ife,curveLinearClosed:Qfe,curveLinear:a2,curveMonotoneX:ehe,curveMonotoneY:the,curveNatural:rhe,curveStep:nhe,curveStepAfter:she,curveStepBefore:ahe},hb=function(t){return t.x===+t.x&&t.y===+t.y},Fx=function(t){return t.x},Bx=function(t){return t.y},Rbe=function(t,r){if(wr(t))return t;var a="curve".concat(r2(t));return(a==="curveMonotone"||a==="curveBump")&&r?nI["".concat(a).concat(r==="vertical"?"Y":"X")]:nI[a]||a2},Pbe=function(t){var r=t.type,a=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,d=t.connectNulls,u=d===void 0?!1:d,f=Rbe(a,l),m=u?i.filter(function(v){return hb(v)}):i,p;if(Array.isArray(o)){var g=u?o.filter(function(v){return hb(v)}):o,b=m.map(function(v,y){return rI(rI({},v),{},{base:g[y]})});return l==="vertical"?p=ab().y(Bx).x1(Fx).x0(function(v){return v.base.x}):p=ab().x(Fx).y1(Bx).y0(function(v){return v.base.y}),p.defined(hb).curve(f),p(b)}return l==="vertical"&&vt(o)?p=ab().y(Bx).x1(Fx).x0(o):vt(o)?p=ab().x(Fx).y1(Bx).y0(o):p=NU().x(Fx).y(Bx),p.defined(hb).curve(f),p(m)},gf=function(t){var r=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var o=a&&a.length?Pbe(t):s;return N.createElement("path",_4({},tr(t,!1),c1(t),{className:Pr("recharts-curve",r),d:o,ref:i}))},i_={exports:{}},o_,aI;function Mbe(){if(aI)return o_;aI=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return o_=e,o_}var l_,sI;function Dbe(){if(sI)return l_;sI=1;var e=Mbe();function t(){}function r(){}return r.resetWarningCache=t,l_=function(){function a(o,l,d,u,f,m){if(m!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}a.isRequired=a;function s(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},l_}var iI;function Lbe(){return iI||(iI=1,i_.exports=Dbe()()),i_.exports}var Ibe=Lbe();const Sn=jn(Ibe);var $be=Object.getOwnPropertyNames,Fbe=Object.getOwnPropertySymbols,Bbe=Object.prototype.hasOwnProperty;function oI(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function mb(e){return function(r,a,s){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,s);var i=s.cache,o=i.get(r),l=i.get(a);if(o&&l)return o===a&&l===r;i.set(r,a),i.set(a,r);var d=e(r,a,s);return i.delete(r),i.delete(a),d}}function zbe(e){return e!=null?e[Symbol.toStringTag]:void 0}function lI(e){return $be(e).concat(Fbe(e))}var qbe=Object.hasOwn||(function(e,t){return Bbe.call(e,t)});function nm(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Ube="__v",Vbe="__o",Hbe="_owner",cI=Object.getOwnPropertyDescriptor,dI=Object.keys;function Gbe(e,t,r){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function Wbe(e,t){return nm(e.getTime(),t.getTime())}function Kbe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Ybe(e,t){return e===t}function uI(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.entries(),o,l,d=0;(o=i.next())&&!o.done;){for(var u=t.entries(),f=!1,m=0;(l=u.next())&&!l.done;){if(s[m]){m++;continue}var p=o.value,g=l.value;if(r.equals(p[0],g[0],d,m,e,t,r)&&r.equals(p[1],g[1],p[0],g[0],e,t,r)){f=s[m]=!0;break}m++}if(!f)return!1;d++}return!0}var Xbe=nm;function Jbe(e,t,r){var a=dI(e),s=a.length;if(dI(t).length!==s)return!1;for(;s-- >0;)if(!_H(e,t,r,a[s]))return!1;return!0}function zx(e,t,r){var a=lI(e),s=a.length;if(lI(t).length!==s)return!1;for(var i,o,l;s-- >0;)if(i=a[s],!_H(e,t,r,i)||(o=cI(e,i),l=cI(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Zbe(e,t){return nm(e.valueOf(),t.valueOf())}function Qbe(e,t){return e.source===t.source&&e.flags===t.flags}function fI(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var d=t.values(),u=!1,f=0;(l=d.next())&&!l.done;){if(!s[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[f]=!0;break}f++}if(!u)return!1}return!0}function e1e(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function t1e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function _H(e,t,r,a){return(a===Hbe||a===Vbe||a===Ube)&&(e.$$typeof||t.$$typeof)?!0:qbe(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}var r1e="[object Arguments]",n1e="[object Boolean]",a1e="[object Date]",s1e="[object Error]",i1e="[object Map]",o1e="[object Number]",l1e="[object Object]",c1e="[object RegExp]",d1e="[object Set]",u1e="[object String]",f1e="[object URL]",h1e=Array.isArray,hI=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,mI=Object.assign,m1e=Object.prototype.toString.call.bind(Object.prototype.toString);function p1e(e){var t=e.areArraysEqual,r=e.areDatesEqual,a=e.areErrorsEqual,s=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,d=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,f=e.areSetsEqual,m=e.areTypedArraysEqual,p=e.areUrlsEqual,g=e.unknownTagComparators;return function(v,y,j){if(v===y)return!0;if(v==null||y==null)return!1;var _=typeof v;if(_!==typeof y)return!1;if(_!=="object")return _==="number"?o(v,y,j):_==="function"?s(v,y,j):!1;var C=v.constructor;if(C!==y.constructor)return!1;if(C===Object)return l(v,y,j);if(h1e(v))return t(v,y,j);if(hI!=null&&hI(v))return m(v,y,j);if(C===Date)return r(v,y,j);if(C===RegExp)return u(v,y,j);if(C===Map)return i(v,y,j);if(C===Set)return f(v,y,j);var A=m1e(v);if(A===a1e)return r(v,y,j);if(A===c1e)return u(v,y,j);if(A===i1e)return i(v,y,j);if(A===d1e)return f(v,y,j);if(A===l1e)return typeof v.then!="function"&&typeof y.then!="function"&&l(v,y,j);if(A===f1e)return p(v,y,j);if(A===s1e)return a(v,y,j);if(A===r1e)return l(v,y,j);if(A===n1e||A===o1e||A===u1e)return d(v,y,j);if(g){var S=g[A];if(!S){var T=zbe(v);T&&(S=g[T])}if(S)return S(v,y,j)}return!1}}function g1e(e){var t=e.circular,r=e.createCustomConfig,a=e.strict,s={areArraysEqual:a?zx:Gbe,areDatesEqual:Wbe,areErrorsEqual:Kbe,areFunctionsEqual:Ybe,areMapsEqual:a?oI(uI,zx):uI,areNumbersEqual:Xbe,areObjectsEqual:a?zx:Jbe,arePrimitiveWrappersEqual:Zbe,areRegExpsEqual:Qbe,areSetsEqual:a?oI(fI,zx):fI,areTypedArraysEqual:a?zx:e1e,areUrlsEqual:t1e,unknownTagComparators:void 0};if(r&&(s=mI({},s,r(s))),t){var i=mb(s.areArraysEqual),o=mb(s.areMapsEqual),l=mb(s.areObjectsEqual),d=mb(s.areSetsEqual);s=mI({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:d})}return s}function x1e(e){return function(t,r,a,s,i,o,l){return e(t,r,l)}}function v1e(e){var t=e.circular,r=e.comparator,a=e.createState,s=e.equals,i=e.strict;if(a)return function(d,u){var f=a(),m=f.cache,p=m===void 0?t?new WeakMap:void 0:m,g=f.meta;return r(d,u,{cache:p,equals:s,meta:g,strict:i})};if(t)return function(d,u){return r(d,u,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(d,u){return r(d,u,o)}}var y1e=Tf();Tf({strict:!0});Tf({circular:!0});Tf({circular:!0,strict:!0});Tf({createInternalComparator:function(){return nm}});Tf({strict:!0,createInternalComparator:function(){return nm}});Tf({circular:!0,createInternalComparator:function(){return nm}});Tf({circular:!0,createInternalComparator:function(){return nm},strict:!0});function Tf(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,a=e.createInternalComparator,s=e.createState,i=e.strict,o=i===void 0?!1:i,l=g1e(e),d=p1e(l),u=a?a(d):x1e(d);return v1e({circular:r,comparator:d,createState:s,equals:u,strict:o})}function b1e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function pI(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,a=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):b1e(s)};requestAnimationFrame(a)}function A4(e){"@babel/helpers - typeof";return A4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A4(e)}function j1e(e){return C1e(e)||S1e(e)||N1e(e)||w1e()}function w1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N1e(e,t){if(e){if(typeof e=="string")return gI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gI(e,t)}}function gI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function S1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function C1e(e){if(Array.isArray(e))return e}function _1e(){var e={},t=function(){return null},r=!1,a=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=j1e(o),d=l[0],u=l.slice(1);if(typeof d=="number"){pI(s.bind(null,u),d);return}s(d),pI(s.bind(null,u));return}A4(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function ey(e){"@babel/helpers - typeof";return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ey(e)}function xI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function vI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xI(Object(r),!0).forEach(function(a){AH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AH(e,t,r){return t=A1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A1e(e){var t=k1e(e,"string");return ey(t)==="symbol"?t:String(t)}function k1e(e,t){if(ey(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ey(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O1e=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},E1e=function(t){return t},T1e=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},ov=function(t,r){return Object.keys(r).reduce(function(a,s){return vI(vI({},a),{},AH({},s,t(s,r[s])))},{})},yI=function(t,r,a){return t.map(function(s){return"".concat(T1e(s)," ").concat(r,"ms ").concat(a)}).join(",")};function R1e(e,t){return D1e(e)||M1e(e,t)||kH(e,t)||P1e()}function P1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function D1e(e){if(Array.isArray(e))return e}function L1e(e){return F1e(e)||$1e(e)||kH(e)||I1e()}function I1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kH(e,t){if(e){if(typeof e=="string")return k4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k4(e,t)}}function $1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function F1e(e){if(Array.isArray(e))return k4(e)}function k4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var L1=1e-4,OH=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},EH=function(t,r){return t.map(function(a,s){return a*Math.pow(r,s)}).reduce(function(a,s){return a+s})},bI=function(t,r){return function(a){var s=OH(t,r);return EH(s,a)}},B1e=function(t,r){return function(a){var s=OH(t,r),i=[].concat(L1e(s.map(function(o,l){return o*l}).slice(1)),[0]);return EH(i,a)}},jI=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var u=d[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),f=R1e(u,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var m=bI(s,o),p=bI(i,l),g=B1e(s,o),b=function(j){return j>1?1:j<0?0:j},v=function(j){for(var _=j>1?1:j,C=_,A=0;A<8;++A){var S=m(C)-_,T=g(C);if(Math.abs(S-_)<L1||T<L1)return p(C);C=b(C-S/T)}return p(C)};return v.isStepper=!1,v},z1e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,a=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,d=function(f,m,p){var g=-(f-m)*a,b=p*i,v=p+(g-b)*l/1e3,y=p*l/1e3+f;return Math.abs(y-m)<L1&&Math.abs(v)<L1?[m,0]:[y,v]};return d.isStepper=!0,d.dt=l,d},q1e=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return jI(s);case"spring":return z1e();default:if(s.split("(")[0]==="cubic-bezier")return jI(s)}return typeof s=="function"?s:null};function ty(e){"@babel/helpers - typeof";return ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ty(e)}function wI(e){return H1e(e)||V1e(e)||TH(e)||U1e()}function U1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function H1e(e){if(Array.isArray(e))return E4(e)}function NI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Zs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NI(Object(r),!0).forEach(function(a){O4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function O4(e,t,r){return t=G1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G1e(e){var t=W1e(e,"string");return ty(t)==="symbol"?t:String(t)}function W1e(e,t){if(ty(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ty(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K1e(e,t){return J1e(e)||X1e(e,t)||TH(e,t)||Y1e()}function Y1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TH(e,t){if(e){if(typeof e=="string")return E4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E4(e,t)}}function E4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function X1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function J1e(e){if(Array.isArray(e))return e}var I1=function(t,r,a){return t+(r-t)*a},T4=function(t){var r=t.from,a=t.to;return r!==a},Z1e=function e(t,r,a){var s=ov(function(i,o){if(T4(o)){var l=t(o.from,o.to,o.velocity),d=K1e(l,2),u=d[0],f=d[1];return Zs(Zs({},o),{},{from:u,velocity:f})}return o},r);return a<1?ov(function(i,o){return T4(o)?Zs(Zs({},o),{},{velocity:I1(o.velocity,s[i].velocity,a),from:I1(o.from,s[i].from,a)}):o},r):e(t,s,a-1)};const Q1e=(function(e,t,r,a,s){var i=O1e(e,t),o=i.reduce(function(y,j){return Zs(Zs({},y),{},O4({},j,[e[j],t[j]]))},{}),l=i.reduce(function(y,j){return Zs(Zs({},y),{},O4({},j,{from:e[j],velocity:0,to:t[j]}))},{}),d=-1,u,f,m=function(){return null},p=function(){return ov(function(j,_){return _.from},l)},g=function(){return!Object.values(l).filter(T4).length},b=function(j){u||(u=j);var _=j-u,C=_/r.dt;l=Z1e(r,l,C),s(Zs(Zs(Zs({},e),t),p())),u=j,g()||(d=requestAnimationFrame(m))},v=function(j){f||(f=j);var _=(j-f)/a,C=ov(function(S,T){return I1.apply(void 0,wI(T).concat([r(_)]))},o);if(s(Zs(Zs(Zs({},e),t),C)),_<1)d=requestAnimationFrame(m);else{var A=ov(function(S,T){return I1.apply(void 0,wI(T).concat([r(1)]))},o);s(Zs(Zs(Zs({},e),t),A))}};return m=r.isStepper?b:v,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function Qp(e){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qp(e)}var eje=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function tje(e,t){if(e==null)return{};var r=rje(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function rje(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function c_(e){return ije(e)||sje(e)||aje(e)||nje()}function nje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aje(e,t){if(e){if(typeof e=="string")return R4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R4(e,t)}}function sje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ije(e){if(Array.isArray(e))return R4(e)}function R4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function SI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function cc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SI(Object(r),!0).forEach(function(a){Qx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Qx(e,t,r){return t=RH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lje(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,RH(a.key),a)}}function cje(e,t,r){return t&&lje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function RH(e){var t=dje(e,"string");return Qp(t)==="symbol"?t:String(t)}function dje(e,t){if(Qp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Qp(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P4(e,t)}function P4(e,t){return P4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},P4(e,t)}function fje(e){var t=hje();return function(){var a=$1(e),s;if(t){var i=$1(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return M4(this,s)}}function M4(e,t){if(t&&(Qp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D4(e)}function D4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hje(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $1(e){return $1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$1(e)}var Al=(function(e){uje(r,e);var t=fje(r);function r(a,s){var i;oje(this,r),i=t.call(this,a,s);var o=i.props,l=o.isActive,d=o.attributeName,u=o.from,f=o.to,m=o.steps,p=o.children,g=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(D4(i)),i.changeStyle=i.changeStyle.bind(D4(i)),!l||g<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:f}),M4(i);if(m&&m.length)i.state={style:m[0].style};else if(u){if(typeof p=="function")return i.state={style:u},M4(i);i.state={style:d?Qx({},d,u):u}}else i.state={style:{}};return i}return cje(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,d=i.attributeName,u=i.shouldReAnimate,f=i.to,m=i.from,p=this.state.style;if(l){if(!o){var g={style:d?Qx({},d,f):f};this.state&&p&&(d&&p[d]!==f||!d&&p!==f)&&this.setState(g);return}if(!(y1e(s.to,f)&&s.canBegin&&s.isActive)){var b=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=b||u?m:s.to;if(this.state&&p){var y={style:d?Qx({},d,v):v};(d&&p[d]!==v||!d&&p!==v)&&this.setState(y)}this.runAnimation(cc(cc({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,d=s.duration,u=s.easing,f=s.begin,m=s.onAnimationEnd,p=s.onAnimationStart,g=Q1e(o,l,q1e(u),d,this.changeStyle),b=function(){i.stopJSAnimation=g()};this.manager.start([p,f,b,d,m])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,d=s.onAnimationStart,u=o[0],f=u.style,m=u.duration,p=m===void 0?0:m,g=function(v,y,j){if(j===0)return v;var _=y.duration,C=y.easing,A=C===void 0?"ease":C,S=y.style,T=y.properties,O=y.onAnimationEnd,R=j>0?o[j-1]:y,M=T||Object.keys(S);if(typeof A=="function"||A==="spring")return[].concat(c_(v),[i.runJSAnimation.bind(i,{from:R.style,to:S,duration:_,easing:A}),_]);var I=yI(M,_,A),D=cc(cc(cc({},R.style),S),{},{transition:I});return[].concat(c_(v),[D,_,O]).filter(E1e)};return this.manager.start([d].concat(c_(o.reduce(g,[f,Math.max(p,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=_1e());var i=s.begin,o=s.duration,l=s.attributeName,d=s.to,u=s.easing,f=s.onAnimationStart,m=s.onAnimationEnd,p=s.steps,g=s.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof g=="function"||u==="spring"){this.runJSAnimation(s);return}if(p.length>1){this.runStepAnimation(s);return}var v=l?Qx({},l,d):d,y=yI(Object.keys(v),o,u);b.start([f,i,cc(cc({},v),{},{transition:y}),o,m])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var d=tje(s,eje),u=N.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||u===0||o<=0)return i;var m=function(g){var b=g.props,v=b.style,y=v===void 0?{}:v,j=b.className,_=N.cloneElement(g,cc(cc({},d),{},{style:cc(cc({},y),f),className:j}));return _};return u===1?m(N.Children.only(i)):pe.createElement("div",null,N.Children.map(i,function(p){return m(p)}))}}]),r})(N.PureComponent);Al.displayName="Animate";Al.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Al.propTypes={from:Sn.oneOfType([Sn.object,Sn.string]),to:Sn.oneOfType([Sn.object,Sn.string]),attributeName:Sn.string,duration:Sn.number,begin:Sn.number,easing:Sn.oneOfType([Sn.string,Sn.func]),steps:Sn.arrayOf(Sn.shape({duration:Sn.number.isRequired,style:Sn.object.isRequired,easing:Sn.oneOfType([Sn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Sn.func]),properties:Sn.arrayOf("string"),onAnimationEnd:Sn.func})),children:Sn.oneOfType([Sn.node,Sn.func]),isActive:Sn.bool,canBegin:Sn.bool,onAnimationEnd:Sn.func,shouldReAnimate:Sn.bool,onAnimationStart:Sn.func,onAnimationReStart:Sn.func};function ry(e){"@babel/helpers - typeof";return ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ry(e)}function F1(){return F1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},F1.apply(this,arguments)}function mje(e,t){return vje(e)||xje(e,t)||gje(e,t)||pje()}function pje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gje(e,t){if(e){if(typeof e=="string")return CI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CI(e,t)}}function CI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function xje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function vje(e){if(Array.isArray(e))return e}function _I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function AI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_I(Object(r),!0).forEach(function(a){yje(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_I(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yje(e,t,r){return t=bje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bje(e){var t=jje(e,"string");return ry(t)=="symbol"?t:t+""}function jje(e,t){if(ry(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ry(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kI=function(t,r,a,s,i){var o=Math.min(Math.abs(a)/2,Math.abs(s)/2),l=s>=0?1:-1,d=a>=0?1:-1,u=s>=0&&a>=0||s<0&&a<0?1:0,f;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],p=0,g=4;p<g;p++)m[p]=i[p]>o?o:i[p];f="M".concat(t,",").concat(r+l*m[0]),m[0]>0&&(f+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(u,",").concat(t+d*m[0],",").concat(r)),f+="L ".concat(t+a-d*m[1],",").concat(r),m[1]>0&&(f+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(u,`,
        `).concat(t+a,",").concat(r+l*m[1])),f+="L ".concat(t+a,",").concat(r+s-l*m[2]),m[2]>0&&(f+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(u,`,
        `).concat(t+a-d*m[2],",").concat(r+s)),f+="L ".concat(t+d*m[3],",").concat(r+s),m[3]>0&&(f+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*m[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);f="M ".concat(t,",").concat(r+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+d*b,",").concat(r,`
            L `).concat(t+a-d*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+a,",").concat(r+l*b,`
            L `).concat(t+a,",").concat(r+s-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+a-d*b,",").concat(r+s,`
            L `).concat(t+d*b,",").concat(r+s,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*b," Z")}else f="M ".concat(t,",").concat(r," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return f},wje=function(t,r){if(!t||!r)return!1;var a=t.x,s=t.y,i=r.x,o=r.y,l=r.width,d=r.height;if(Math.abs(l)>0&&Math.abs(d)>0){var u=Math.min(i,i+l),f=Math.max(i,i+l),m=Math.min(o,o+d),p=Math.max(o,o+d);return a>=u&&a<=f&&s>=m&&s<=p}return!1},Nje={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DO=function(t){var r=AI(AI({},Nje),t),a=N.useRef(),s=N.useState(-1),i=mje(s,2),o=i[0],l=i[1];N.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var A=a.current.getTotalLength();A&&l(A)}catch{}},[]);var d=r.x,u=r.y,f=r.width,m=r.height,p=r.radius,g=r.className,b=r.animationEasing,v=r.animationDuration,y=r.animationBegin,j=r.isAnimationActive,_=r.isUpdateAnimationActive;if(d!==+d||u!==+u||f!==+f||m!==+m||f===0||m===0)return null;var C=Pr("recharts-rectangle",g);return _?pe.createElement(Al,{canBegin:o>0,from:{width:f,height:m,x:d,y:u},to:{width:f,height:m,x:d,y:u},duration:v,animationEasing:b,isActive:_},function(A){var S=A.width,T=A.height,O=A.x,R=A.y;return pe.createElement(Al,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,isActive:j,easing:b},pe.createElement("path",F1({},tr(r,!0),{className:C,d:kI(O,R,S,T,p),ref:a})))}):pe.createElement("path",F1({},tr(r,!0),{className:C,d:kI(d,u,f,m,p)}))},Sje=["points","className","baseLinePoints","connectNulls"];function hp(){return hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},hp.apply(this,arguments)}function Cje(e,t){if(e==null)return{};var r=_je(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function _je(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function OI(e){return Eje(e)||Oje(e)||kje(e)||Aje()}function Aje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kje(e,t){if(e){if(typeof e=="string")return L4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L4(e,t)}}function Oje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Eje(e){if(Array.isArray(e))return L4(e)}function L4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var EI=function(t){return t&&t.x===+t.x&&t.y===+t.y},Tje=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(a){EI(a)?r[r.length-1].push(a):r[r.length-1].length>0&&r.push([])}),EI(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},lv=function(t,r){var a=Tje(t);r&&(a=[a.reduce(function(i,o){return[].concat(OI(i),OI(o))},[])]);var s=a.map(function(i){return i.reduce(function(o,l,d){return"".concat(o).concat(d===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return a.length===1?"".concat(s,"Z"):s},Rje=function(t,r,a){var s=lv(t,a);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(lv(r.reverse(),a).slice(1))},Pje=function(t){var r=t.points,a=t.className,s=t.baseLinePoints,i=t.connectNulls,o=Cje(t,Sje);if(!r||!r.length)return null;var l=Pr("recharts-polygon",a);if(s&&s.length){var d=o.stroke&&o.stroke!=="none",u=Rje(r,s,i);return pe.createElement("g",{className:l},pe.createElement("path",hp({},tr(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),d?pe.createElement("path",hp({},tr(o,!0),{fill:"none",d:lv(r,i)})):null,d?pe.createElement("path",hp({},tr(o,!0),{fill:"none",d:lv(s,i)})):null)}var f=lv(r,i);return pe.createElement("path",hp({},tr(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function I4(){return I4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},I4.apply(this,arguments)}var Wy=function(t){var r=t.cx,a=t.cy,s=t.r,i=t.className,o=Pr("recharts-dot",i);return r===+r&&a===+a&&s===+s?N.createElement("circle",I4({},tr(t,!1),c1(t),{className:o,cx:r,cy:a,r:s})):null};function ny(e){"@babel/helpers - typeof";return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ny(e)}var Mje=["x","y","top","left","width","height","className"];function $4(){return $4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$4.apply(this,arguments)}function TI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Dje(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TI(Object(r),!0).forEach(function(a){Lje(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Lje(e,t,r){return t=Ije(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ije(e){var t=$je(e,"string");return ny(t)=="symbol"?t:t+""}function $je(e,t){if(ny(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ny(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fje(e,t){if(e==null)return{};var r=Bje(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Bje(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var zje=function(t,r,a,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(a)},qje=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,d=t.left,u=d===void 0?0:d,f=t.width,m=f===void 0?0:f,p=t.height,g=p===void 0?0:p,b=t.className,v=Fje(t,Mje),y=Dje({x:a,y:i,top:l,left:u,width:m,height:g},v);return!vt(a)||!vt(i)||!vt(m)||!vt(g)||!vt(l)||!vt(u)?null:pe.createElement("path",$4({},tr(y,!0),{className:Pr("recharts-cross",b),d:zje(a,i,m,g,l,u)}))},d_,RI;function Uje(){if(RI)return d_;RI=1;var e=g2(),t=WV(),r=pd();function a(s,i){return s&&s.length?e(s,r(i,2),t):void 0}return d_=a,d_}var Vje=Uje();const Hje=jn(Vje);var u_,PI;function Gje(){if(PI)return u_;PI=1;var e=g2(),t=pd(),r=KV();function a(s,i){return s&&s.length?e(s,t(i,2),r):void 0}return u_=a,u_}var Wje=Gje();const Kje=jn(Wje);var Yje=["cx","cy","angle","ticks","axisLine"],Xje=["ticks","tick","angle","tickFormatter","stroke"];function eg(e){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eg(e)}function cv(){return cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},cv.apply(this,arguments)}function MI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function dh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MI(Object(r),!0).forEach(function(a){b2(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function DI(e,t){if(e==null)return{};var r=Jje(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Jje(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Zje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LI(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,MH(a.key),a)}}function Qje(e,t,r){return t&&LI(e.prototype,t),r&&LI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function e2e(e,t,r){return t=B1(t),t2e(e,PH()?Reflect.construct(t,r||[],B1(e).constructor):t.apply(e,r))}function t2e(e,t){if(t&&(eg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r2e(e)}function r2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PH=function(){return!!e})()}function B1(e){return B1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},B1(e)}function n2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F4(e,t)}function F4(e,t){return F4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},F4(e,t)}function b2(e,t,r){return t=MH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MH(e){var t=a2e(e,"string");return eg(t)=="symbol"?t:t+""}function a2e(e,t){if(eg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(eg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var j2=(function(e){function t(){return Zje(this,t),e2e(this,t,arguments)}return n2e(t,e),Qje(t,[{key:"getTickValueCoord",value:function(a){var s=a.coordinate,i=this.props,o=i.angle,l=i.cx,d=i.cy;return ea(l,d,s,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,s;switch(a){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.angle,l=a.ticks,d=Hje(l,function(f){return f.coordinate||0}),u=Kje(l,function(f){return f.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.angle,l=a.ticks,d=a.axisLine,u=DI(a,Yje),f=l.reduce(function(b,v){return[Math.min(b[0],v.coordinate),Math.max(b[1],v.coordinate)]},[1/0,-1/0]),m=ea(s,i,f[0],o),p=ea(s,i,f[1],o),g=dh(dh(dh({},tr(u,!1)),{},{fill:"none"},tr(d,!1)),{},{x1:m.x,y1:m.y,x2:p.x,y2:p.y});return pe.createElement("line",cv({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,d=s.tickFormatter,u=s.stroke,f=DI(s,Xje),m=this.getTickTextAnchor(),p=tr(f,!1),g=tr(o,!1),b=i.map(function(v,y){var j=a.getTickValueCoord(v),_=dh(dh(dh(dh({textAnchor:m,transform:"rotate(".concat(90-l,", ").concat(j.x,", ").concat(j.y,")")},p),{},{stroke:"none",fill:u},g),{},{index:y},j),{},{payload:v});return pe.createElement(Ur,cv({className:Pr("recharts-polar-radius-axis-tick",wH(o)),key:"tick-".concat(v.coordinate)},jf(a.props,v,y)),t.renderTickItem(o,_,d?d(v.value,y):v.value))});return pe.createElement(Ur,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.axisLine,o=a.tick;return!s||!s.length?null:pe.createElement(Ur,{className:Pr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),$s.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,s,i){var o;return pe.isValidElement(a)?o=pe.cloneElement(a,s):wr(a)?o=a(s):o=pe.createElement(Bh,cv({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(N.PureComponent);b2(j2,"displayName","PolarRadiusAxis");b2(j2,"axisType","radiusAxis");b2(j2,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function tg(e){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tg(e)}function gh(){return gh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},gh.apply(this,arguments)}function II(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function uh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?II(Object(r),!0).forEach(function(a){w2(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):II(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function s2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $I(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,LH(a.key),a)}}function i2e(e,t,r){return t&&$I(e.prototype,t),r&&$I(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o2e(e,t,r){return t=z1(t),l2e(e,DH()?Reflect.construct(t,r||[],z1(e).constructor):t.apply(e,r))}function l2e(e,t){if(t&&(tg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c2e(e)}function c2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DH=function(){return!!e})()}function z1(e){return z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},z1(e)}function d2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B4(e,t)}function B4(e,t){return B4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},B4(e,t)}function w2(e,t,r){return t=LH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LH(e){var t=u2e(e,"string");return tg(t)=="symbol"?t:t+""}function u2e(e,t){if(tg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(tg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var f2e=Math.PI/180,FI=1e-5,N2=(function(e){function t(){return s2e(this,t),o2e(this,t,arguments)}return d2e(t,e),i2e(t,[{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.cx,o=s.cy,l=s.radius,d=s.orientation,u=s.tickSize,f=u||8,m=ea(i,o,l,a.coordinate),p=ea(i,o,l+(d==="inner"?-1:1)*f,a.coordinate);return{x1:m.x,y1:m.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(a){var s=this.props.orientation,i=Math.cos(-a.coordinate*f2e),o;return i>FI?o=s==="outer"?"start":"end":i<-FI?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.radius,l=a.axisLine,d=a.axisLineType,u=uh(uh({},tr(this.props,!1)),{},{fill:"none"},tr(l,!1));if(d==="circle")return pe.createElement(Wy,gh({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:i,r:o}));var f=this.props.ticks,m=f.map(function(p){return ea(s,i,o,p.coordinate)});return pe.createElement(Pje,gh({className:"recharts-polar-angle-axis-line"},u,{points:m}))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,d=s.tickFormatter,u=s.stroke,f=tr(this.props,!1),m=tr(o,!1),p=uh(uh({},f),{},{fill:"none"},tr(l,!1)),g=i.map(function(b,v){var y=a.getTickLineCoord(b),j=a.getTickTextAnchor(b),_=uh(uh(uh({textAnchor:j},f),{},{stroke:"none",fill:u},m),{},{index:v,payload:b,x:y.x2,y:y.y2});return pe.createElement(Ur,gh({className:Pr("recharts-polar-angle-axis-tick",wH(o)),key:"tick-".concat(b.coordinate)},jf(a.props,b,v)),l&&pe.createElement("line",gh({className:"recharts-polar-angle-axis-tick-line"},p,y)),o&&t.renderTickItem(o,_,d?d(b.value,v):b.value))});return pe.createElement(Ur,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.radius,o=a.axisLine;return i<=0||!s||!s.length?null:pe.createElement(Ur,{className:Pr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,s,i){var o;return pe.isValidElement(a)?o=pe.cloneElement(a,s):wr(a)?o=a(s):o=pe.createElement(Bh,gh({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(N.PureComponent);w2(N2,"displayName","PolarAngleAxis");w2(N2,"axisType","angleAxis");w2(N2,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var f_,BI;function h2e(){if(BI)return f_;BI=1;var e=GU(),t=e(Object.getPrototypeOf,Object);return f_=t,f_}var h_,zI;function m2e(){if(zI)return h_;zI=1;var e=xu(),t=h2e(),r=vu(),a="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,d=o.call(Object);function u(f){if(!r(f)||e(f)!=a)return!1;var m=t(f);if(m===null)return!0;var p=l.call(m,"constructor")&&m.constructor;return typeof p=="function"&&p instanceof p&&o.call(p)==d}return h_=u,h_}var p2e=m2e();const g2e=jn(p2e);var m_,qI;function x2e(){if(qI)return m_;qI=1;var e=xu(),t=vu(),r="[object Boolean]";function a(s){return s===!0||s===!1||t(s)&&e(s)==r}return m_=a,m_}var v2e=x2e();const y2e=jn(v2e);function ay(e){"@babel/helpers - typeof";return ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ay(e)}function q1(){return q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},q1.apply(this,arguments)}function b2e(e,t){return S2e(e)||N2e(e,t)||w2e(e,t)||j2e()}function j2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w2e(e,t){if(e){if(typeof e=="string")return UI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UI(e,t)}}function UI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function N2e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function S2e(e){if(Array.isArray(e))return e}function VI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function HI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VI(Object(r),!0).forEach(function(a){C2e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function C2e(e,t,r){return t=_2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _2e(e){var t=A2e(e,"string");return ay(t)=="symbol"?t:t+""}function A2e(e,t){if(ay(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ay(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GI=function(t,r,a,s,i){var o=a-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+a,",").concat(r),l+="L ".concat(t+a-o/2,",").concat(r+i),l+="L ".concat(t+a-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},k2e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},O2e=function(t){var r=HI(HI({},k2e),t),a=N.useRef(),s=N.useState(-1),i=b2e(s,2),o=i[0],l=i[1];N.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var C=a.current.getTotalLength();C&&l(C)}catch{}},[]);var d=r.x,u=r.y,f=r.upperWidth,m=r.lowerWidth,p=r.height,g=r.className,b=r.animationEasing,v=r.animationDuration,y=r.animationBegin,j=r.isUpdateAnimationActive;if(d!==+d||u!==+u||f!==+f||m!==+m||p!==+p||f===0&&m===0||p===0)return null;var _=Pr("recharts-trapezoid",g);return j?pe.createElement(Al,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:d,y:u},to:{upperWidth:f,lowerWidth:m,height:p,x:d,y:u},duration:v,animationEasing:b,isActive:j},function(C){var A=C.upperWidth,S=C.lowerWidth,T=C.height,O=C.x,R=C.y;return pe.createElement(Al,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,easing:b},pe.createElement("path",q1({},tr(r,!0),{className:_,d:GI(O,R,A,S,T),ref:a})))}):pe.createElement("g",null,pe.createElement("path",q1({},tr(r,!0),{className:_,d:GI(d,u,f,m,p)})))},E2e=["option","shapeType","propTransformer","activeClassName","isActive"];function sy(e){"@babel/helpers - typeof";return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sy(e)}function T2e(e,t){if(e==null)return{};var r=R2e(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function R2e(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function WI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function U1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WI(Object(r),!0).forEach(function(a){P2e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function P2e(e,t,r){return t=M2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M2e(e){var t=D2e(e,"string");return sy(t)=="symbol"?t:t+""}function D2e(e,t){if(sy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(sy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L2e(e,t){return U1(U1({},t),e)}function I2e(e,t){return e==="symbols"}function KI(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return pe.createElement(DO,r);case"trapezoid":return pe.createElement(O2e,r);case"sector":return pe.createElement(CH,r);case"symbols":if(I2e(t))return pe.createElement(i2,r);break;default:return null}}function $2e(e){return N.isValidElement(e)?e.props:e}function V1(e){var t=e.option,r=e.shapeType,a=e.propTransformer,s=a===void 0?L2e:a,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,d=T2e(e,E2e),u;if(N.isValidElement(t))u=N.cloneElement(t,U1(U1({},d),$2e(t)));else if(wr(t))u=t(d);else if(g2e(t)&&!y2e(t)){var f=s(t,d);u=pe.createElement(KI,{shapeType:r,elementProps:f})}else{var m=d;u=pe.createElement(KI,{shapeType:r,elementProps:m})}return l?pe.createElement(Ur,{className:o},u):u}function S2(e,t){return t!=null&&"trapezoids"in e.props}function C2(e,t){return t!=null&&"sectors"in e.props}function iy(e,t){return t!=null&&"points"in e.props}function F2e(e,t){var r,a,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function B2e(e,t){var r=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return r&&a}function z2e(e,t){var r=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return r&&a&&s}function q2e(e,t){var r;return S2(e,t)?r=F2e:C2(e,t)?r=B2e:iy(e,t)&&(r=z2e),r}function U2e(e,t){var r;return S2(e,t)?r="trapezoids":C2(e,t)?r="sectors":iy(e,t)&&(r="points"),r}function V2e(e,t){if(S2(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(C2(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return iy(e,t)?t.payload:{}}function H2e(e){var t=e.activeTooltipItem,r=e.graphicalItem,a=e.itemData,s=U2e(r,t),i=V2e(r,t),o=a.filter(function(d,u){var f=wf(i,d),m=r.props[s].filter(function(b){var v=q2e(r,t);return v(b,t)}),p=r.props[s].indexOf(m[m.length-1]),g=u===p;return f&&g}),l=a.indexOf(o[o.length-1]);return l}var Mb;function rg(e){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rg(e)}function mp(){return mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},mp.apply(this,arguments)}function YI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YI(Object(r),!0).forEach(function(a){pl(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function G2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XI(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$H(a.key),a)}}function W2e(e,t,r){return t&&XI(e.prototype,t),r&&XI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function K2e(e,t,r){return t=H1(t),Y2e(e,IH()?Reflect.construct(t,r||[],H1(e).constructor):t.apply(e,r))}function Y2e(e,t){if(t&&(rg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X2e(e)}function X2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IH=function(){return!!e})()}function H1(e){return H1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H1(e)}function J2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z4(e,t)}function z4(e,t){return z4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},z4(e,t)}function pl(e,t,r){return t=$H(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $H(e){var t=Z2e(e,"string");return rg(t)=="symbol"?t:t+""}function Z2e(e,t){if(rg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(rg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ju=(function(e){function t(r){var a;return G2e(this,t),a=K2e(this,t,[r]),pl(a,"pieRef",null),pl(a,"sectorRefs",[]),pl(a,"id",kf("recharts-pie-")),pl(a,"handleAnimationEnd",function(){var s=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),wr(s)&&s()}),pl(a,"handleAnimationStart",function(){var s=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),wr(s)&&s()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return J2e(t,e),W2e(t,[{key:"isActiveIndex",value:function(a){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(a)!==-1:a===s}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,d=i.dataKey,u=i.valueKey,f=tr(this.props,!1),m=tr(o,!1),p=tr(l,!1),g=o&&o.offsetRadius||20,b=a.map(function(v,y){var j=(v.startAngle+v.endAngle)/2,_=ea(v.cx,v.cy,v.outerRadius+g,j),C=Zn(Zn(Zn(Zn({},f),v),{},{stroke:"none"},m),{},{index:y,textAnchor:t.getTextAnchor(_.x,v.cx)},_),A=Zn(Zn(Zn(Zn({},f),v),{},{fill:"none",stroke:v.fill},p),{},{index:y,points:[ea(v.cx,v.cy,v.outerRadius,j),_]}),S=d;return yr(d)&&yr(u)?S="value":yr(d)&&(S=u),pe.createElement(Ur,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(y)},l&&t.renderLabelLineItem(l,A,"line"),t.renderLabelItem(o,C,ca(v,S)))});return pe.createElement(Ur,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(a){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,d=i.inactiveShape;return a.map(function(u,f){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&a.length!==1)return null;var m=s.isActiveIndex(f),p=d&&s.hasActiveIndex()?d:null,g=m?o:p,b=Zn(Zn({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return pe.createElement(Ur,mp({ref:function(y){y&&!s.sectorRefs.includes(y)&&s.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},jf(s.props,u,f),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(f)}),pe.createElement(V1,mp({option:g,isActive:m,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,d=s.animationDuration,u=s.animationEasing,f=s.animationId,m=this.state,p=m.prevSectors,g=m.prevIsAnimationActive;return pe.createElement(Al,{begin:l,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var v=b.t,y=[],j=i&&i[0],_=j.startAngle;return i.forEach(function(C,A){var S=p&&p[A],T=A>0?zo(C,"paddingAngle",0):0;if(S){var O=Ma(S.endAngle-S.startAngle,C.endAngle-C.startAngle),R=Zn(Zn({},C),{},{startAngle:_+T,endAngle:_+O(v)+T});y.push(R),_=R.endAngle}else{var M=C.endAngle,I=C.startAngle,D=Ma(0,M-I),$=D(v),K=Zn(Zn({},C),{},{startAngle:_+T,endAngle:_+$+T});y.push(K),_=K.endAngle}}),pe.createElement(Ur,null,a.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(a){var s=this;a.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,s=a.sectors,i=a.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!wf(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,d=s.label,u=s.cx,f=s.cy,m=s.innerRadius,p=s.outerRadius,g=s.isAnimationActive,b=this.state.isAnimationFinished;if(i||!o||!o.length||!vt(u)||!vt(f)||!vt(m)||!vt(p))return null;var v=Pr("recharts-pie",l);return pe.createElement(Ur,{tabIndex:this.props.rootTabIndex,className:v,ref:function(j){a.pieRef=j}},this.renderSectors(),d&&this.renderLabels(o),$s.renderCallByParent(this.props,null,!1),(!g||b)&&jl.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return s.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:a.sectors!==s.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,s){return a>s?"start":a<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,s,i){if(pe.isValidElement(a))return pe.cloneElement(a,s);if(wr(a))return a(s);var o=Pr("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return pe.createElement(gf,mp({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(a,s,i){if(pe.isValidElement(a))return pe.cloneElement(a,s);var o=i;if(wr(a)&&(o=a(s),pe.isValidElement(o)))return o;var l=Pr("recharts-pie-label-text",typeof a!="boolean"&&!wr(a)?a.className:"");return pe.createElement(Bh,mp({},s,{alignmentBaseline:"middle",className:l}),o)}}])})(N.PureComponent);Mb=ju;pl(ju,"displayName","Pie");pl(ju,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!yu.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});pl(ju,"parseDeltaAngle",function(e,t){var r=Fi(t-e),a=Math.min(Math.abs(t-e),360);return r*a});pl(ju,"getRealPieData",function(e){var t=e.data,r=e.children,a=tr(e,!1),s=Vi(r,cu);return t&&t.length?t.map(function(i,o){return Zn(Zn(Zn({payload:i},a),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return Zn(Zn({},a),i.props)}):[]});pl(ju,"parseCoordinateOfPie",function(e,t){var r=t.top,a=t.left,s=t.width,i=t.height,o=jH(s,i),l=a+Bi(e.cx,s,s/2),d=r+Bi(e.cy,i,i/2),u=Bi(e.innerRadius,o,0),f=Bi(e.outerRadius,o,o*.8),m=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:d,innerRadius:u,outerRadius:f,maxRadius:m}});pl(ju,"getComposedData",function(e){var t=e.item,r=e.offset,a=t.type.defaultProps!==void 0?Zn(Zn({},t.type.defaultProps),t.props):t.props,s=Mb.getRealPieData(a);if(!s||!s.length)return null;var i=a.cornerRadius,o=a.startAngle,l=a.endAngle,d=a.paddingAngle,u=a.dataKey,f=a.nameKey,m=a.valueKey,p=a.tooltipType,g=Math.abs(a.minAngle),b=Mb.parseCoordinateOfPie(a,r),v=Mb.parseDeltaAngle(o,l),y=Math.abs(v),j=u;yr(u)&&yr(m)?(xc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):yr(u)&&(xc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=m);var _=s.filter(function(R){return ca(R,j,0)!==0}).length,C=(y>=360?_:_-1)*d,A=y-_*g-C,S=s.reduce(function(R,M){var I=ca(M,j,0);return R+(vt(I)?I:0)},0),T;if(S>0){var O;T=s.map(function(R,M){var I=ca(R,j,0),D=ca(R,f,M),$=(vt(I)?I:0)/S,K;M?K=O.endAngle+Fi(v)*d*(I!==0?1:0):K=o;var U=K+Fi(v)*((I!==0?g:0)+$*A),J=(K+U)/2,V=(b.innerRadius+b.outerRadius)/2,G=[{name:D,value:I,payload:R,dataKey:j,type:p}],q=ea(b.cx,b.cy,V,J);return O=Zn(Zn(Zn({percent:$,cornerRadius:i,name:D,tooltipPayload:G,midAngle:J,middleRadius:V,tooltipPosition:q},R),b),{},{value:ca(R,j),startAngle:K,endAngle:U,payload:R,paddingAngle:Fi(v)*d}),O})}return Zn(Zn({},b),{},{sectors:T,data:s})});var p_,JI;function Q2e(){if(JI)return p_;JI=1;var e=Math.ceil,t=Math.max;function r(a,s,i,o){for(var l=-1,d=t(e((s-a)/(i||1)),0),u=Array(d);d--;)u[o?d:++l]=a,a+=i;return u}return p_=r,p_}var g_,ZI;function FH(){if(ZI)return g_;ZI=1;var e=lV(),t=1/0,r=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return g_=a,g_}var x_,QI;function ewe(){if(QI)return x_;QI=1;var e=Q2e(),t=c2(),r=FH();function a(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return x_=a,x_}var v_,e7;function twe(){if(e7)return v_;e7=1;var e=ewe(),t=e();return v_=t,v_}var rwe=twe();const G1=jn(rwe);function oy(e){"@babel/helpers - typeof";return oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oy(e)}function t7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function r7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t7(Object(r),!0).forEach(function(a){BH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function BH(e,t,r){return t=nwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nwe(e){var t=awe(e,"string");return oy(t)=="symbol"?t:t+""}function awe(e,t){if(oy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(oy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var swe=["Webkit","Moz","O","ms"],iwe=function(t,r){var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=swe.reduce(function(i,o){return r7(r7({},i),{},BH({},o+a,r))},{});return s[t]=r,s};function ng(e){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function W1(){return W1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},W1.apply(this,arguments)}function n7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function y_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n7(Object(r),!0).forEach(function(a){Mo(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function owe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a7(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,qH(a.key),a)}}function lwe(e,t,r){return t&&a7(e.prototype,t),r&&a7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cwe(e,t,r){return t=K1(t),dwe(e,zH()?Reflect.construct(t,r||[],K1(e).constructor):t.apply(e,r))}function dwe(e,t){if(t&&(ng(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uwe(e)}function uwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zH=function(){return!!e})()}function K1(e){return K1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},K1(e)}function fwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q4(e,t)}function q4(e,t){return q4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},q4(e,t)}function Mo(e,t,r){return t=qH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qH(e){var t=hwe(e,"string");return ng(t)=="symbol"?t:t+""}function hwe(e,t){if(ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ng(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mwe=function(t){var r=t.data,a=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var d=r.length,u=sv().domain(G1(0,d)).range([i,i+o-l]),f=u.domain().map(function(m){return u(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(a),endX:u(s),scale:u,scaleValues:f}},s7=function(t){return t.changedTouches&&!!t.changedTouches.length},ag=(function(e){function t(r){var a;return owe(this,t),a=cwe(this,t,[r]),Mo(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),Mo(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),Mo(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:i,startIndex:l})}),a.detachDragEndListener()}),Mo(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Mo(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Mo(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Mo(a,"handleSlideDragStart",function(s){var i=s7(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return fwe(t,e),lwe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,o=this.state.scaleValues,l=this.props,d=l.gap,u=l.data,f=u.length-1,m=Math.min(s,i),p=Math.max(s,i),g=t.getIndexInRange(o,m),b=t.getIndexInRange(o,p);return{startIndex:g-g%d,endIndex:b===f?f:b-b%d}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,d=ca(i[a],l,a);return wr(o)?o(d,a):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,d=this.props,u=d.x,f=d.width,m=d.travellerWidth,p=d.startIndex,g=d.endIndex,b=d.onChange,v=a.pageX-i;v>0?v=Math.min(v,u+f-m-l,u+f-m-o):v<0&&(v=Math.max(v,u-o,u-l));var y=this.getIndex({startX:o+v,endX:l+v});(y.startIndex!==p||y.endIndex!==g)&&b&&b(y),this.setState({startX:o+v,endX:l+v,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=s7(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,d=s.startX,u=this.state[o],f=this.props,m=f.x,p=f.width,g=f.travellerWidth,b=f.onChange,v=f.gap,y=f.data,j={startX:this.state.startX,endX:this.state.endX},_=a.pageX-i;_>0?_=Math.min(_,m+p-g-u):_<0&&(_=Math.max(_,m-u)),j[o]=u+_;var C=this.getIndex(j),A=C.startIndex,S=C.endIndex,T=function(){var R=y.length-1;return o==="startX"&&(l>d?A%v===0:S%v===0)||l<d&&S===R||o==="endX"&&(l>d?S%v===0:A%v===0)||l>d&&S===R};this.setState(Mo(Mo({},o,u+_),"brushMoveStartX",a.pageX),function(){b&&T()&&b(C)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,o=this.state,l=o.scaleValues,d=o.startX,u=o.endX,f=this.state[s],m=l.indexOf(f);if(m!==-1){var p=m+a;if(!(p===-1||p>=l.length)){var g=l[p];s==="startX"&&g>=u||s==="endX"&&g<=d||this.setState(Mo({},s,g),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,d=a.fill,u=a.stroke;return pe.createElement("rect",{stroke:u,fill:d,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,d=a.data,u=a.children,f=a.padding,m=N.Children.only(u);return m?pe.cloneElement(m,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,o,l=this,d=this.props,u=d.y,f=d.travellerWidth,m=d.height,p=d.traveller,g=d.ariaLabel,b=d.data,v=d.startIndex,y=d.endIndex,j=Math.max(a,this.props.x),_=y_(y_({},tr(this.props,!1)),{},{x:j,y:u,width:f,height:m}),C=g||"Min value: ".concat((i=b[v])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=b[y])===null||o===void 0?void 0:o.name);return pe.createElement(Ur,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,_))}},{key:"renderSlide",value:function(a,s){var i=this.props,o=i.y,l=i.height,d=i.stroke,u=i.travellerWidth,f=Math.min(a,s)+u,m=Math.max(Math.abs(s-a)-u,0);return pe.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:f,y:o,width:m,height:l})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,o=a.y,l=a.height,d=a.travellerWidth,u=a.stroke,f=this.state,m=f.startX,p=f.endX,g=5,b={pointerEvents:"none",fill:u};return pe.createElement(Ur,{className:"recharts-brush-texts"},pe.createElement(Bh,W1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,p)-g,y:o+l/2},b),this.getTextOfTick(s)),pe.createElement(Bh,W1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,p)+d+g,y:o+l/2},b),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,o=a.children,l=a.x,d=a.y,u=a.width,f=a.height,m=a.alwaysShowText,p=this.state,g=p.startX,b=p.endX,v=p.isTextActive,y=p.isSlideMoving,j=p.isTravellerMoving,_=p.isTravellerFocused;if(!s||!s.length||!vt(l)||!vt(d)||!vt(u)||!vt(f)||u<=0||f<=0)return null;var C=Pr("recharts-brush",i),A=pe.Children.count(o)===1,S=iwe("userSelect","none");return pe.createElement(Ur,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(g,b),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(b,"endX"),(v||y||j||_||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,o=a.width,l=a.height,d=a.stroke,u=Math.floor(i+l/2)-1;return pe.createElement(pe.Fragment,null,pe.createElement("rect",{x:s,y:i,width:o,height:l,fill:d,stroke:"none"}),pe.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),pe.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return pe.isValidElement(a)?i=pe.cloneElement(a,s):wr(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,o=a.width,l=a.x,d=a.travellerWidth,u=a.updateId,f=a.startIndex,m=a.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return y_({prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?mwe({data:i,width:o,x:l,travellerWidth:d,startIndex:f,endIndex:m}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||d!==s.prevTravellerWidth)){s.scale.range([l,l+o-d]);var p=s.scale.domain().map(function(g){return s.scale(g)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,o=0,l=i-1;l-o>1;){var d=Math.floor((o+l)/2);a[d]>s?l=d:o=d}return s>=a[l]?l:o}}])})(N.PureComponent);Mo(ag,"displayName","Brush");Mo(ag,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var b_,i7;function pwe(){if(i7)return b_;i7=1;var e=oO();function t(r,a){var s;return e(r,function(i,o,l){return s=a(i,o,l),!s}),!!s}return b_=t,b_}var j_,o7;function gwe(){if(o7)return j_;o7=1;var e=FU(),t=pd(),r=pwe(),a=xo(),s=c2();function i(o,l,d){var u=a(o)?e:r;return d&&s(o,l,d)&&(l=void 0),u(o,t(l,3))}return j_=i,j_}var xwe=gwe();const vwe=jn(xwe);var sd=function(t,r){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===r},w_,l7;function ywe(){if(l7)return w_;l7=1;var e=nV();function t(r,a,s){a=="__proto__"&&e?e(r,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[a]=s}return w_=t,w_}var N_,c7;function bwe(){if(c7)return N_;c7=1;var e=ywe(),t=tV(),r=pd();function a(s,i){var o={};return i=r(i,3),t(s,function(l,d,u){e(o,d,i(l,d,u))}),o}return N_=a,N_}var jwe=bwe();const wwe=jn(jwe);var S_,d7;function Nwe(){if(d7)return S_;d7=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(!r(t[a],a,t))return!1;return!0}return S_=e,S_}var C_,u7;function Swe(){if(u7)return C_;u7=1;var e=oO();function t(r,a){var s=!0;return e(r,function(i,o,l){return s=!!a(i,o,l),s}),s}return C_=t,C_}var __,f7;function Cwe(){if(f7)return __;f7=1;var e=Nwe(),t=Swe(),r=pd(),a=xo(),s=c2();function i(o,l,d){var u=a(o)?e:t;return d&&s(o,l,d)&&(l=void 0),u(o,r(l,3))}return __=i,__}var _we=Cwe();const UH=jn(_we);var Awe=["x","y"];function ly(e){"@babel/helpers - typeof";return ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ly(e)}function U4(){return U4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},U4.apply(this,arguments)}function h7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function qx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h7(Object(r),!0).forEach(function(a){kwe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kwe(e,t,r){return t=Owe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Owe(e){var t=Ewe(e,"string");return ly(t)=="symbol"?t:t+""}function Ewe(e,t){if(ly(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ly(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Twe(e,t){if(e==null)return{};var r=Rwe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Rwe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Pwe(e,t){var r=e.x,a=e.y,s=Twe(e,Awe),i="".concat(r),o=parseInt(i,10),l="".concat(a),d=parseInt(l,10),u="".concat(t.height||s.height),f=parseInt(u,10),m="".concat(t.width||s.width),p=parseInt(m,10);return qx(qx(qx(qx(qx({},t),s),o?{x:o}:{}),d?{y:d}:{}),{},{height:f,width:p,name:t.name,radius:t.radius})}function m7(e){return pe.createElement(V1,U4({shapeType:"rectangle",propTransformer:Pwe,activeClassName:"recharts-active-bar"},e))}var Mwe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=vt(a)||nfe(a);return i?t(a,s):(i||qh(),r)}},Dwe=["value","background"],VH;function sg(e){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(e)}function Lwe(e,t){if(e==null)return{};var r=Iwe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Iwe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Y1(){return Y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Y1.apply(this,arguments)}function p7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function os(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p7(Object(r),!0).forEach(function(a){ff(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g7(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,GH(a.key),a)}}function Fwe(e,t,r){return t&&g7(e.prototype,t),r&&g7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bwe(e,t,r){return t=X1(t),zwe(e,HH()?Reflect.construct(t,r||[],X1(e).constructor):t.apply(e,r))}function zwe(e,t){if(t&&(sg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qwe(e)}function qwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HH=function(){return!!e})()}function X1(e){return X1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},X1(e)}function Uwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V4(e,t)}function V4(e,t){return V4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},V4(e,t)}function ff(e,t,r){return t=GH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GH(e){var t=Vwe(e,"string");return sg(t)=="symbol"?t:t+""}function Vwe(e,t){if(sg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(sg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var po=(function(e){function t(){var r;$we(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Bwe(this,t,[].concat(s)),ff(r,"state",{isAnimationFinished:!1}),ff(r,"id",kf("recharts-bar-")),ff(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),ff(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Uwe(t,e),Fwe(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.dataKey,d=i.activeIndex,u=i.activeBar,f=tr(this.props,!1);return a&&a.map(function(m,p){var g=p===d,b=g?u:o,v=os(os(os({},f),m),{},{isActive:g,option:b,index:p,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return pe.createElement(Ur,Y1({className:"recharts-bar-rectangle"},jf(s.props,m,p),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(p)}),pe.createElement(m7,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,d=s.animationBegin,u=s.animationDuration,f=s.animationEasing,m=s.animationId,p=this.state.prevData;return pe.createElement(Al,{begin:d,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var b=g.t,v=i.map(function(y,j){var _=p&&p[j];if(_){var C=Ma(_.x,y.x),A=Ma(_.y,y.y),S=Ma(_.width,y.width),T=Ma(_.height,y.height);return os(os({},y),{},{x:C(b),y:A(b),width:S(b),height:T(b)})}if(o==="horizontal"){var O=Ma(0,y.height),R=O(b);return os(os({},y),{},{y:y.y+y.height-R,height:R})}var M=Ma(0,y.width),I=M(b);return os(os({},y),{},{width:I})});return pe.createElement(Ur,null,a.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!wf(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,d=tr(this.props.background,!1);return i.map(function(u,f){u.value;var m=u.background,p=Lwe(u,Dwe);if(!m)return null;var g=os(os(os(os(os({},p),{},{fill:"#eee"},m),d),jf(a.props,u,f)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return pe.createElement(m7,Y1({key:"background-bar-".concat(f),option:a.props.background,isActive:f===l},g))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,d=i.yAxis,u=i.layout,f=i.children,m=Vi(f,qg);if(!m)return null;var p=u==="vertical"?o[0].height/2:o[0].width/2,g=function(y,j){var _=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:_,errorVal:ca(y,j)}},b={clipPath:a?"url(#clipPath-".concat(s,")"):null};return pe.createElement(Ur,b,m.map(function(v){return pe.cloneElement(v,{key:"error-bar-".concat(s,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:d,layout:u,offset:p,dataPointFormatter:g})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,o=a.className,l=a.xAxis,d=a.yAxis,u=a.left,f=a.top,m=a.width,p=a.height,g=a.isAnimationActive,b=a.background,v=a.id;if(s||!i||!i.length)return null;var y=this.state.isAnimationFinished,j=Pr("recharts-bar",o),_=l&&l.allowDataOverflow,C=d&&d.allowDataOverflow,A=_||C,S=yr(v)?this.id:v;return pe.createElement(Ur,{className:j},_||C?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(S)},pe.createElement("rect",{x:_?u:u-m/2,y:C?f:f-p/2,width:_?m:m*2,height:C?p:p*2}))):null,pe.createElement(Ur,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(S,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,S),(!g||y)&&jl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])})(N.PureComponent);VH=po;ff(po,"displayName","Bar");ff(po,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!yu.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ff(po,"getComposedData",function(e){var t=e.props,r=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,d=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,m=e.displayedData,p=e.offset,g=v0e(a,r);if(!g)return null;var b=t.layout,v=r.type.defaultProps,y=v!==void 0?os(os({},v),r.props):r.props,j=y.dataKey,_=y.children,C=y.minPointSize,A=b==="horizontal"?o:i,S=u?A.scale.domain():null,T=C0e({numericAxis:A}),O=Vi(_,cu),R=m.map(function(M,I){var D,$,K,U,J,V;u?D=y0e(u[f+I],S):(D=ca(M,j),Array.isArray(D)||(D=[T,D]));var G=Mwe(C,VH.defaultProps.minPointSize)(D[1],I);if(b==="horizontal"){var q,Y=[o.scale(D[0]),o.scale(D[1])],Q=Y[0],F=Y[1];$=z8({axis:i,ticks:l,bandSize:s,offset:g.offset,entry:M,index:I}),K=(q=F??Q)!==null&&q!==void 0?q:void 0,U=g.size;var z=Q-F;if(J=Number.isNaN(z)?0:z,V={x:$,y:o.y,width:U,height:o.height},Math.abs(G)>0&&Math.abs(J)<Math.abs(G)){var H=Fi(J||G)*(Math.abs(G)-Math.abs(J));K-=H,J+=H}}else{var X=[i.scale(D[0]),i.scale(D[1])],ne=X[0],ie=X[1];if($=ne,K=z8({axis:o,ticks:d,bandSize:s,offset:g.offset,entry:M,index:I}),U=ie-ne,J=g.size,V={x:i.x,y:K,width:i.width,height:J},Math.abs(G)>0&&Math.abs(U)<Math.abs(G)){var ce=Fi(U||G)*(Math.abs(G)-Math.abs(U));U+=ce}}return os(os(os({},M),{},{x:$,y:K,width:U,height:J,value:u?D:D[1],payload:M,background:V},O&&O[I]&&O[I].props),{},{tooltipPayload:[yH(r,M)],tooltipPosition:{x:$+U/2,y:K+J/2}})});return os({data:R,layout:b},p)});function cy(e){"@babel/helpers - typeof";return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cy(e)}function Hwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x7(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,WH(a.key),a)}}function Gwe(e,t,r){return t&&x7(e.prototype,t),r&&x7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function hc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v7(Object(r),!0).forEach(function(a){_2(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function _2(e,t,r){return t=WH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WH(e){var t=Wwe(e,"string");return cy(t)=="symbol"?t:t+""}function Wwe(e,t){if(cy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(cy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LO=function(t,r,a,s,i){var o=t.width,l=t.height,d=t.layout,u=t.children,f=Object.keys(r),m={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},p=!!Do(u,po);return f.reduce(function(g,b){var v=r[b],y=v.orientation,j=v.domain,_=v.padding,C=_===void 0?{}:_,A=v.mirror,S=v.reversed,T="".concat(y).concat(A?"Mirror":""),O,R,M,I,D;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var $=j[1]-j[0],K=1/0,U=v.categoricalDomain.sort(ofe);if(U.forEach(function(X,ne){ne>0&&(K=Math.min((X||0)-(U[ne-1]||0),K))}),Number.isFinite(K)){var J=K/$,V=v.layout==="vertical"?a.height:a.width;if(v.padding==="gap"&&(O=J*V/2),v.padding==="no-gap"){var G=Bi(t.barCategoryGap,J*V),q=J*V/2;O=q-G-(q-G)/V*G}}}s==="xAxis"?R=[a.left+(C.left||0)+(O||0),a.left+a.width-(C.right||0)-(O||0)]:s==="yAxis"?R=d==="horizontal"?[a.top+a.height-(C.bottom||0),a.top+(C.top||0)]:[a.top+(C.top||0)+(O||0),a.top+a.height-(C.bottom||0)-(O||0)]:R=v.range,S&&(R=[R[1],R[0]]);var Y=pH(v,i,p),Q=Y.scale,F=Y.realScaleType;Q.domain(j).range(R),gH(Q);var z=xH(Q,hc(hc({},v),{},{realScaleType:F}));s==="xAxis"?(D=y==="top"&&!A||y==="bottom"&&A,M=a.left,I=m[T]-D*v.height):s==="yAxis"&&(D=y==="left"&&!A||y==="right"&&A,M=m[T]-D*v.width,I=a.top);var H=hc(hc(hc({},v),z),{},{realScaleType:F,x:M,y:I,scale:Q,width:s==="xAxis"?a.width:v.width,height:s==="yAxis"?a.height:v.height});return H.bandSize=P1(H,z),!v.hide&&s==="xAxis"?m[T]+=(D?-1:1)*H.height:v.hide||(m[T]+=(D?-1:1)*H.width),hc(hc({},g),{},_2({},b,H))},{})},KH=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(a,i),y:Math.min(s,o),width:Math.abs(i-a),height:Math.abs(o-s)}},Kwe=function(t){var r=t.x1,a=t.y1,s=t.x2,i=t.y2;return KH({x:r,y:a},{x:s,y:i})},YH=(function(){function e(t){Hwe(this,e),this.scale=t}return Gwe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();_2(YH,"EPS",1e-4);var IO=function(t){var r=Object.keys(t).reduce(function(a,s){return hc(hc({},a),{},_2({},s,YH.create(t[s])))},{});return hc(hc({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return wwe(s,function(d,u){return r[u].apply(d,{bandAware:o,position:l})})},isInRange:function(s){return UH(s,function(i,o){return r[o].isInRange(i)})}})};function Ywe(e){return(e%180+180)%180}var Xwe=function(t){var r=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Ywe(s),o=i*Math.PI/180,l=Math.atan(a/r),d=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(d)},A_,y7;function Jwe(){if(y7)return A_;y7=1;var e=pd(),t=qy(),r=o2();function a(s){return function(i,o,l){var d=Object(i);if(!t(i)){var u=e(o,3);i=r(i),o=function(m){return u(d[m],m,d)}}var f=s(i,o,l);return f>-1?d[u?i[f]:f]:void 0}}return A_=a,A_}var k_,b7;function Zwe(){if(b7)return k_;b7=1;var e=FH();function t(r){var a=e(r),s=a%1;return a===a?s?a-s:a:0}return k_=t,k_}var O_,j7;function Qwe(){if(j7)return O_;j7=1;var e=XU(),t=pd(),r=Zwe(),a=Math.max;function s(i,o,l){var d=i==null?0:i.length;if(!d)return-1;var u=l==null?0:r(l);return u<0&&(u=a(d+u,0)),e(i,t(o,3),u)}return O_=s,O_}var E_,w7;function eNe(){if(w7)return E_;w7=1;var e=Jwe(),t=Qwe(),r=e(t);return E_=r,E_}var tNe=eNe();const rNe=jn(tNe);var nNe=uU();const aNe=jn(nNe);var sNe=aNe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),$O=N.createContext(void 0),FO=N.createContext(void 0),XH=N.createContext(void 0),JH=N.createContext({}),ZH=N.createContext(void 0),QH=N.createContext(0),eG=N.createContext(0),N7=function(t){var r=t.state,a=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,d=t.width,u=t.height,f=sNe(i);return pe.createElement($O.Provider,{value:a},pe.createElement(FO.Provider,{value:s},pe.createElement(JH.Provider,{value:i},pe.createElement(XH.Provider,{value:f},pe.createElement(ZH.Provider,{value:o},pe.createElement(QH.Provider,{value:u},pe.createElement(eG.Provider,{value:d},l)))))))},iNe=function(){return N.useContext(ZH)},tG=function(t){var r=N.useContext($O);r==null&&qh();var a=r[t];return a==null&&qh(),a},oNe=function(){var t=N.useContext($O);return cf(t)},lNe=function(){var t=N.useContext(FO),r=rNe(t,function(a){return UH(a.domain,Number.isFinite)});return r||cf(t)},rG=function(t){var r=N.useContext(FO);r==null&&qh();var a=r[t];return a==null&&qh(),a},cNe=function(){var t=N.useContext(XH);return t},dNe=function(){return N.useContext(JH)},BO=function(){return N.useContext(eG)},zO=function(){return N.useContext(QH)};function ig(e){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ig(e)}function uNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fNe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,aG(a.key),a)}}function hNe(e,t,r){return t&&fNe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mNe(e,t,r){return t=J1(t),pNe(e,nG()?Reflect.construct(t,r||[],J1(e).constructor):t.apply(e,r))}function pNe(e,t){if(t&&(ig(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gNe(e)}function gNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nG=function(){return!!e})()}function J1(e){return J1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J1(e)}function xNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H4(e,t)}function H4(e,t){return H4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},H4(e,t)}function S7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function C7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S7(Object(r),!0).forEach(function(a){qO(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qO(e,t,r){return t=aG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aG(e){var t=vNe(e,"string");return ig(t)=="symbol"?t:t+""}function vNe(e,t){if(ig(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ig(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function yNe(e,t){return NNe(e)||wNe(e,t)||jNe(e,t)||bNe()}function bNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jNe(e,t){if(e){if(typeof e=="string")return _7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _7(e,t)}}function _7(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function wNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function NNe(e){if(Array.isArray(e))return e}function G4(){return G4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},G4.apply(this,arguments)}var SNe=function(t,r){var a;return pe.isValidElement(t)?a=pe.cloneElement(t,r):wr(t)?a=t(r):a=pe.createElement("line",G4({},r,{className:"recharts-reference-line-line"})),a},CNe=function(t,r,a,s,i,o,l,d,u){var f=i.x,m=i.y,p=i.width,g=i.height;if(a){var b=u.y,v=t.y.apply(b,{position:o});if(sd(u,"discard")&&!t.y.isInRange(v))return null;var y=[{x:f+p,y:v},{x:f,y:v}];return d==="left"?y.reverse():y}if(r){var j=u.x,_=t.x.apply(j,{position:o});if(sd(u,"discard")&&!t.x.isInRange(_))return null;var C=[{x:_,y:m+g},{x:_,y:m}];return l==="top"?C.reverse():C}if(s){var A=u.segment,S=A.map(function(T){return t.apply(T,{position:o})});return sd(u,"discard")&&vwe(S,function(T){return!t.isInRange(T)})?null:S}return null};function _Ne(e){var t=e.x,r=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,d=e.alwaysShow,u=iNe(),f=tG(s),m=rG(i),p=cNe();if(!u||!p)return null;xc(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=IO({x:f.scale,y:m.scale}),b=Ss(t),v=Ss(r),y=a&&a.length===2,j=CNe(g,b,v,y,p,e.position,f.orientation,m.orientation,e);if(!j)return null;var _=yNe(j,2),C=_[0],A=C.x,S=C.y,T=_[1],O=T.x,R=T.y,M=sd(e,"hidden")?"url(#".concat(u,")"):void 0,I=C7(C7({clipPath:M},tr(e,!0)),{},{x1:A,y1:S,x2:O,y2:R});return pe.createElement(Ur,{className:Pr("recharts-reference-line",l)},SNe(o,I),$s.renderCallByParent(e,Kwe({x1:A,y1:S,x2:O,y2:R})))}var Nf=(function(e){function t(){return uNe(this,t),mNe(this,t,arguments)}return xNe(t,e),hNe(t,[{key:"render",value:function(){return pe.createElement(_Ne,this.props)}}])})(pe.Component);qO(Nf,"displayName","ReferenceLine");qO(Nf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function W4(){return W4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},W4.apply(this,arguments)}function og(e){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},og(e)}function A7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function k7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A7(Object(r),!0).forEach(function(a){A2(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ANe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kNe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,iG(a.key),a)}}function ONe(e,t,r){return t&&kNe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ENe(e,t,r){return t=Z1(t),TNe(e,sG()?Reflect.construct(t,r||[],Z1(e).constructor):t.apply(e,r))}function TNe(e,t){if(t&&(og(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RNe(e)}function RNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sG=function(){return!!e})()}function Z1(e){return Z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Z1(e)}function PNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K4(e,t)}function K4(e,t){return K4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},K4(e,t)}function A2(e,t,r){return t=iG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iG(e){var t=MNe(e,"string");return og(t)=="symbol"?t:t+""}function MNe(e,t){if(og(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(og(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var DNe=function(t){var r=t.x,a=t.y,s=t.xAxis,i=t.yAxis,o=IO({x:s.scale,y:i.scale}),l=o.apply({x:r,y:a},{bandAware:!0});return sd(t,"discard")&&!o.isInRange(l)?null:l},k2=(function(e){function t(){return ANe(this,t),ENe(this,t,arguments)}return PNe(t,e),ONe(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,o=a.r,l=a.alwaysShow,d=a.clipPathId,u=Ss(s),f=Ss(i);if(xc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var m=DNe(this.props);if(!m)return null;var p=m.x,g=m.y,b=this.props,v=b.shape,y=b.className,j=sd(this.props,"hidden")?"url(#".concat(d,")"):void 0,_=k7(k7({clipPath:j},tr(this.props,!0)),{},{cx:p,cy:g});return pe.createElement(Ur,{className:Pr("recharts-reference-dot",y)},t.renderDot(v,_),$s.renderCallByParent(this.props,{x:p-o,y:g-o,width:2*o,height:2*o}))}}])})(pe.Component);A2(k2,"displayName","ReferenceDot");A2(k2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});A2(k2,"renderDot",function(e,t){var r;return pe.isValidElement(e)?r=pe.cloneElement(e,t):wr(e)?r=e(t):r=pe.createElement(Wy,W4({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Y4(){return Y4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Y4.apply(this,arguments)}function lg(e){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lg(e)}function O7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function E7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O7(Object(r),!0).forEach(function(a){O2(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function LNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function INe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,lG(a.key),a)}}function $Ne(e,t,r){return t&&INe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function FNe(e,t,r){return t=Q1(t),BNe(e,oG()?Reflect.construct(t,r||[],Q1(e).constructor):t.apply(e,r))}function BNe(e,t){if(t&&(lg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zNe(e)}function zNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oG=function(){return!!e})()}function Q1(e){return Q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q1(e)}function qNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X4(e,t)}function X4(e,t){return X4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},X4(e,t)}function O2(e,t,r){return t=lG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lG(e){var t=UNe(e,"string");return lg(t)=="symbol"?t:t+""}function UNe(e,t){if(lg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(lg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VNe=function(t,r,a,s,i){var o=i.x1,l=i.x2,d=i.y1,u=i.y2,f=i.xAxis,m=i.yAxis;if(!f||!m)return null;var p=IO({x:f.scale,y:m.scale}),g={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:a?p.y.apply(d,{position:"start"}):p.y.rangeMin},b={x:r?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:s?p.y.apply(u,{position:"end"}):p.y.rangeMax};return sd(i,"discard")&&(!p.isInRange(g)||!p.isInRange(b))?null:KH(g,b)},E2=(function(e){function t(){return LNe(this,t),FNe(this,t,arguments)}return qNe(t,e),$Ne(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,o=a.y1,l=a.y2,d=a.className,u=a.alwaysShow,f=a.clipPathId;xc(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Ss(s),p=Ss(i),g=Ss(o),b=Ss(l),v=this.props.shape;if(!m&&!p&&!g&&!b&&!v)return null;var y=VNe(m,p,g,b,this.props);if(!y&&!v)return null;var j=sd(this.props,"hidden")?"url(#".concat(f,")"):void 0;return pe.createElement(Ur,{className:Pr("recharts-reference-area",d)},t.renderRect(v,E7(E7({clipPath:j},tr(this.props,!0)),y)),$s.renderCallByParent(this.props,y))}}])})(pe.Component);O2(E2,"displayName","ReferenceArea");O2(E2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});O2(E2,"renderRect",function(e,t){var r;return pe.isValidElement(e)?r=pe.cloneElement(e,t):wr(e)?r=e(t):r=pe.createElement(DO,Y4({},t,{className:"recharts-reference-area-rect"})),r});function cG(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function HNe(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return Xwe(a,r)}function GNe(e,t,r){var a=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function ej(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function WNe(e,t){return cG(e,t+1)}function KNe(e,t,r,a,s){for(var i=(a||[]).slice(),o=t.start,l=t.end,d=0,u=1,f=o,m=function(){var b=a==null?void 0:a[d];if(b===void 0)return{v:cG(a,u)};var v=d,y,j=function(){return y===void 0&&(y=r(b,v)),y},_=b.coordinate,C=d===0||ej(e,_,j,f,l);C||(d=0,f=o,u+=1),C&&(f=_+e*(j()/2+s),d+=u)},p;u<=i.length;)if(p=m(),p)return p.v;return[]}function dy(e){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dy(e)}function T7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function xi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T7(Object(r),!0).forEach(function(a){YNe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function YNe(e,t,r){return t=XNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XNe(e){var t=JNe(e,"string");return dy(t)=="symbol"?t:t+""}function JNe(e,t){if(dy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(dy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZNe(e,t,r,a,s){for(var i=(a||[]).slice(),o=i.length,l=t.start,d=t.end,u=function(p){var g=i[p],b,v=function(){return b===void 0&&(b=r(g,p)),b};if(p===o-1){var y=e*(g.coordinate+e*v()/2-d);i[p]=g=xi(xi({},g),{},{tickCoord:y>0?g.coordinate-y*e:g.coordinate})}else i[p]=g=xi(xi({},g),{},{tickCoord:g.coordinate});var j=ej(e,g.tickCoord,v,l,d);j&&(d=g.tickCoord-e*(v()/2+s),i[p]=xi(xi({},g),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function QNe(e,t,r,a,s,i){var o=(a||[]).slice(),l=o.length,d=t.start,u=t.end;if(i){var f=a[l-1],m=r(f,l-1),p=e*(f.coordinate+e*m/2-u);o[l-1]=f=xi(xi({},f),{},{tickCoord:p>0?f.coordinate-p*e:f.coordinate});var g=ej(e,f.tickCoord,function(){return m},d,u);g&&(u=f.tickCoord-e*(m/2+s),o[l-1]=xi(xi({},f),{},{isShow:!0}))}for(var b=i?l-1:l,v=function(_){var C=o[_],A,S=function(){return A===void 0&&(A=r(C,_)),A};if(_===0){var T=e*(C.coordinate-e*S()/2-d);o[_]=C=xi(xi({},C),{},{tickCoord:T<0?C.coordinate-T*e:C.coordinate})}else o[_]=C=xi(xi({},C),{},{tickCoord:C.coordinate});var O=ej(e,C.tickCoord,S,d,u);O&&(d=C.tickCoord+e*(S()/2+s),o[_]=xi(xi({},C),{},{isShow:!0}))},y=0;y<b;y++)v(y);return o}function UO(e,t,r){var a=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,d=e.interval,u=e.tickFormatter,f=e.unit,m=e.angle;if(!s||!s.length||!a)return[];if(vt(d)||yu.isSsr)return WNe(s,typeof d=="number"&&vt(d)?d:0);var p=[],g=l==="top"||l==="bottom"?"width":"height",b=f&&g==="width"?av(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=function(C,A){var S=wr(u)?u(C.value,A):C.value;return g==="width"?HNe(av(S,{fontSize:t,letterSpacing:r}),b,m):av(S,{fontSize:t,letterSpacing:r})[g]},y=s.length>=2?Fi(s[1].coordinate-s[0].coordinate):1,j=GNe(i,y,g);return d==="equidistantPreserveStart"?KNe(y,j,v,s,o):(d==="preserveStart"||d==="preserveStartEnd"?p=QNe(y,j,v,s,o,d==="preserveStartEnd"):p=ZNe(y,j,v,s,o),p.filter(function(_){return _.isShow}))}var e5e=["viewBox"],t5e=["viewBox"],r5e=["ticks"];function cg(e){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cg(e)}function pp(){return pp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},pp.apply(this,arguments)}function R7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ws(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R7(Object(r),!0).forEach(function(a){VO(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function T_(e,t){if(e==null)return{};var r=n5e(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function n5e(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function a5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P7(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,uG(a.key),a)}}function s5e(e,t,r){return t&&P7(e.prototype,t),r&&P7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i5e(e,t,r){return t=tj(t),o5e(e,dG()?Reflect.construct(t,r||[],tj(e).constructor):t.apply(e,r))}function o5e(e,t){if(t&&(cg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l5e(e)}function l5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dG=function(){return!!e})()}function tj(e){return tj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tj(e)}function c5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J4(e,t)}function J4(e,t){return J4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},J4(e,t)}function VO(e,t,r){return t=uG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uG(e){var t=d5e(e,"string");return cg(t)=="symbol"?t:t+""}function d5e(e,t){if(cg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(cg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ug=(function(e){function t(r){var a;return a5e(this,t),a=i5e(this,t,[r]),a.state={fontSize:"",letterSpacing:""},a}return c5e(t,e),s5e(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,o=T_(a,e5e),l=this.props,d=l.viewBox,u=T_(l,t5e);return!Np(i,d)||!Np(o,u)||!Np(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,o=s.y,l=s.width,d=s.height,u=s.orientation,f=s.tickSize,m=s.mirror,p=s.tickMargin,g,b,v,y,j,_,C=m?-1:1,A=a.tickSize||f,S=vt(a.tickCoord)?a.tickCoord:a.coordinate;switch(u){case"top":g=b=a.coordinate,y=o+ +!m*d,v=y-C*A,_=v-C*p,j=S;break;case"left":v=y=a.coordinate,b=i+ +!m*l,g=b-C*A,j=g-C*p,_=S;break;case"right":v=y=a.coordinate,b=i+ +m*l,g=b+C*A,j=g+C*p,_=S;break;default:g=b=a.coordinate,y=o+ +m*d,v=y+C*A,_=v+C*p,j=S;break}return{line:{x1:g,y1:v,x2:b,y2:y},tick:{x:j,y:_}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,d=a.orientation,u=a.mirror,f=a.axisLine,m=ws(ws(ws({},tr(this.props,!1)),tr(f,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var p=+(d==="top"&&!u||d==="bottom"&&u);m=ws(ws({},m),{},{x1:s,y1:i+p*l,x2:s+o,y2:i+p*l})}else{var g=+(d==="left"&&!u||d==="right"&&u);m=ws(ws({},m),{},{x1:s+g*o,y1:i,x2:s+g*o,y2:i+l})}return pe.createElement("line",pp({},m,{className:Pr("recharts-cartesian-axis-line",zo(f,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var o=this,l=this.props,d=l.tickLine,u=l.stroke,f=l.tick,m=l.tickFormatter,p=l.unit,g=UO(ws(ws({},this.props),{},{ticks:a}),s,i),b=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),y=tr(this.props,!1),j=tr(f,!1),_=ws(ws({},y),{},{fill:"none"},tr(d,!1)),C=g.map(function(A,S){var T=o.getTickLineCoord(A),O=T.line,R=T.tick,M=ws(ws(ws(ws({textAnchor:b,verticalAnchor:v},y),{},{stroke:"none",fill:u},j),R),{},{index:S,payload:A,visibleTicksCount:g.length,tickFormatter:m});return pe.createElement(Ur,pp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},jf(o.props,A,S)),d&&pe.createElement("line",pp({},_,O,{className:Pr("recharts-cartesian-axis-tick-line",zo(d,"className"))})),f&&t.renderTickItem(f,M,"".concat(wr(m)?m(A.value,S):A.value).concat(p||"")))});return pe.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,d=s.ticksGenerator,u=s.className,f=s.hide;if(f)return null;var m=this.props,p=m.ticks,g=T_(m,r5e),b=p;return wr(d)&&(b=p&&p.length>0?d(this.props):d(g)),o<=0||l<=0||!b||!b.length?null:pe.createElement(Ur,{className:Pr("recharts-cartesian-axis",u),ref:function(y){a.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),$s.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var o,l=Pr(s.className,"recharts-cartesian-axis-tick-value");return pe.isValidElement(a)?o=pe.cloneElement(a,ws(ws({},s),{},{className:l})):wr(a)?o=a(ws(ws({},s),{},{className:l})):o=pe.createElement(Bh,pp({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(N.Component);VO(Ug,"displayName","CartesianAxis");VO(Ug,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var u5e=["x1","y1","x2","y2","key"],f5e=["offset"];function Uh(e){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uh(e)}function M7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M7(Object(r),!0).forEach(function(a){h5e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function h5e(e,t,r){return t=m5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m5e(e){var t=p5e(e,"string");return Uh(t)=="symbol"?t:t+""}function p5e(e,t){if(Uh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Uh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sh(){return Sh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Sh.apply(this,arguments)}function D7(e,t){if(e==null)return{};var r=g5e(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function g5e(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var x5e=function(t){var r=t.fill;if(!r||r==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,d=t.ry;return pe.createElement("rect",{x:s,y:i,ry:d,width:o,height:l,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function fG(e,t){var r;if(pe.isValidElement(e))r=pe.cloneElement(e,t);else if(wr(e))r=e(t);else{var a=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,d=D7(t,u5e),u=tr(d,!1);u.offset;var f=D7(u,f5e);r=pe.createElement("line",Sh({},f,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function v5e(e){var t=e.x,r=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,d){var u=bi(bi({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(d),index:d});return fG(s,u)});return pe.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function y5e(e){var t=e.y,r=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,d){var u=bi(bi({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(d),index:d});return fG(s,u)});return pe.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function b5e(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,d=e.horizontal,u=d===void 0?!0:d;if(!u||!t||!t.length)return null;var f=l.map(function(p){return Math.round(p+s-s)}).sort(function(p,g){return p-g});s!==f[0]&&f.unshift(0);var m=f.map(function(p,g){var b=!f[g+1],v=b?s+o-p:f[g+1]-p;if(v<=0)return null;var y=g%t.length;return pe.createElement("rect",{key:"react-".concat(g),y:p,x:a,height:v,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return pe.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function j5e(e){var t=e.vertical,r=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,d=e.height,u=e.verticalPoints;if(!r||!a||!a.length)return null;var f=u.map(function(p){return Math.round(p+i-i)}).sort(function(p,g){return p-g});i!==f[0]&&f.unshift(0);var m=f.map(function(p,g){var b=!f[g+1],v=b?i+l-p:f[g+1]-p;if(v<=0)return null;var y=g%a.length;return pe.createElement("rect",{key:"react-".concat(g),x:p,y:o,width:v,height:d,stroke:"none",fill:a[y],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return pe.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var w5e=function(t,r){var a=t.xAxis,s=t.width,i=t.height,o=t.offset;return mH(UO(bi(bi(bi({},Ug.defaultProps),a),{},{ticks:Jd(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},N5e=function(t,r){var a=t.yAxis,s=t.width,i=t.height,o=t.offset;return mH(UO(bi(bi(bi({},Ug.defaultProps),a),{},{ticks:Jd(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},tp={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function hu(e){var t,r,a,s,i,o,l=BO(),d=zO(),u=dNe(),f=bi(bi({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:tp.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:tp.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:tp.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:tp.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:tp.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:tp.verticalFill,x:vt(e.x)?e.x:u.left,y:vt(e.y)?e.y:u.top,width:vt(e.width)?e.width:u.width,height:vt(e.height)?e.height:u.height}),m=f.x,p=f.y,g=f.width,b=f.height,v=f.syncWithTicks,y=f.horizontalValues,j=f.verticalValues,_=oNe(),C=lNe();if(!vt(g)||g<=0||!vt(b)||b<=0||!vt(m)||m!==+m||!vt(p)||p!==+p)return null;var A=f.verticalCoordinatesGenerator||w5e,S=f.horizontalCoordinatesGenerator||N5e,T=f.horizontalPoints,O=f.verticalPoints;if((!T||!T.length)&&wr(S)){var R=y&&y.length,M=S({yAxis:C?bi(bi({},C),{},{ticks:R?y:C.ticks}):void 0,width:l,height:d,offset:u},R?!0:v);xc(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Uh(M),"]")),Array.isArray(M)&&(T=M)}if((!O||!O.length)&&wr(A)){var I=j&&j.length,D=A({xAxis:_?bi(bi({},_),{},{ticks:I?j:_.ticks}):void 0,width:l,height:d,offset:u},I?!0:v);xc(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Uh(D),"]")),Array.isArray(D)&&(O=D)}return pe.createElement("g",{className:"recharts-cartesian-grid"},pe.createElement(x5e,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),pe.createElement(v5e,Sh({},f,{offset:u,horizontalPoints:T,xAxis:_,yAxis:C})),pe.createElement(y5e,Sh({},f,{offset:u,verticalPoints:O,xAxis:_,yAxis:C})),pe.createElement(b5e,Sh({},f,{horizontalPoints:T})),pe.createElement(j5e,Sh({},f,{verticalPoints:O})))}hu.displayName="CartesianGrid";var S5e=["type","layout","connectNulls","ref"],C5e=["key"];function dg(e){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dg(e)}function L7(e,t){if(e==null)return{};var r=_5e(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function _5e(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},dv.apply(this,arguments)}function I7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I7(Object(r),!0).forEach(function(a){mc(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function rp(e){return E5e(e)||O5e(e)||k5e(e)||A5e()}function A5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k5e(e,t){if(e){if(typeof e=="string")return Z4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z4(e,t)}}function O5e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function E5e(e){if(Array.isArray(e))return Z4(e)}function Z4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function T5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $7(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,mG(a.key),a)}}function R5e(e,t,r){return t&&$7(e.prototype,t),r&&$7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function P5e(e,t,r){return t=rj(t),M5e(e,hG()?Reflect.construct(t,r||[],rj(e).constructor):t.apply(e,r))}function M5e(e,t){if(t&&(dg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D5e(e)}function D5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hG=function(){return!!e})()}function rj(e){return rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rj(e)}function L5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q4(e,t)}function Q4(e,t){return Q4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Q4(e,t)}function mc(e,t,r){return t=mG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mG(e){var t=I5e(e,"string");return dg(t)=="symbol"?t:t+""}function I5e(e,t){if(dg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(dg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var go=(function(e){function t(){var r;T5e(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=P5e(this,t,[].concat(s)),mc(r,"state",{isAnimationFinished:!0,totalLength:0}),mc(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),mc(r,"getStrokeDasharray",function(o,l,d){var u=d.reduce(function(j,_){return j+_});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/u),m=o%u,p=l-o,g=[],b=0,v=0;b<d.length;v+=d[b],++b)if(v+d[b]>m){g=[].concat(rp(d.slice(0,b)),[m-v]);break}var y=g.length%2===0?[0,p]:[p];return[].concat(rp(t.repeat(d,f)),rp(g),y).map(function(j){return"".concat(j,"px")}).join(", ")}),mc(r,"id",kf("recharts-line-")),mc(r,"pathRef",function(o){r.mainCurve=o}),mc(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),mc(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return L5e(t,e),R5e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,d=i.yAxis,u=i.layout,f=i.children,m=Vi(f,qg);if(!m)return null;var p=function(v,y){return{x:v.x,y:v.y,value:v.value,errorVal:ca(v.payload,y)}},g={clipPath:a?"url(#clipPath-".concat(s,")"):null};return pe.createElement(Ur,g,m.map(function(b){return pe.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:o,xAxis:l,yAxis:d,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,d=l.dot,u=l.points,f=l.dataKey,m=tr(this.props,!1),p=tr(d,!0),g=u.map(function(v,y){var j=Po(Po(Po({key:"dot-".concat(y),r:3},m),p),{},{index:y,cx:v.x,cy:v.y,value:v.value,dataKey:f,payload:v.payload,points:u});return t.renderDotItem(d,j)}),b={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return pe.createElement(Ur,dv({className:"recharts-line-dots",key:"dots"},b),g)}},{key:"renderCurveStatically",value:function(a,s,i,o){var l=this.props,d=l.type,u=l.layout,f=l.connectNulls;l.ref;var m=L7(l,S5e),p=Po(Po(Po({},tr(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:a},o),{},{type:d,layout:u,connectNulls:f});return pe.createElement(gf,dv({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,d=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,m=o.animationDuration,p=o.animationEasing,g=o.animationId,b=o.animateNewValues,v=o.width,y=o.height,j=this.state,_=j.prevPoints,C=j.totalLength;return pe.createElement(Al,{begin:f,duration:m,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var S=A.t;if(_){var T=_.length/l.length,O=l.map(function($,K){var U=Math.floor(K*T);if(_[U]){var J=_[U],V=Ma(J.x,$.x),G=Ma(J.y,$.y);return Po(Po({},$),{},{x:V(S),y:G(S)})}if(b){var q=Ma(v*2,$.x),Y=Ma(y/2,$.y);return Po(Po({},$),{},{x:q(S),y:Y(S)})}return Po(Po({},$),{},{x:$.x,y:$.y})});return i.renderCurveStatically(O,a,s)}var R=Ma(0,C),M=R(S),I;if(d){var D="".concat(d).split(/[,\s]+/gim).map(function($){return parseFloat($)});I=i.getStrokeDasharray(M,C,D)}else I=i.generateSimpleStrokeDasharray(C,M);return i.renderCurveStatically(l,a,s,{strokeDasharray:I})})}},{key:"renderCurve",value:function(a,s){var i=this.props,o=i.points,l=i.isAnimationActive,d=this.state,u=d.prevPoints,f=d.totalLength;return l&&o&&o.length&&(!u&&f>0||!wf(u,o))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(o,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,d=s.className,u=s.xAxis,f=s.yAxis,m=s.top,p=s.left,g=s.width,b=s.height,v=s.isAnimationActive,y=s.id;if(i||!l||!l.length)return null;var j=this.state.isAnimationFinished,_=l.length===1,C=Pr("recharts-line",d),A=u&&u.allowDataOverflow,S=f&&f.allowDataOverflow,T=A||S,O=yr(y)?this.id:y,R=(a=tr(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},M=R.r,I=M===void 0?3:M,D=R.strokeWidth,$=D===void 0?2:D,K=gU(o)?o:{},U=K.clipDot,J=U===void 0?!0:U,V=I*2+$;return pe.createElement(Ur,{className:C},A||S?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(O)},pe.createElement("rect",{x:A?p:p-g/2,y:S?m:m-b/2,width:A?g:g*2,height:S?b:b*2})),!J&&pe.createElement("clipPath",{id:"clipPath-dots-".concat(O)},pe.createElement("rect",{x:p-V/2,y:m-V/2,width:g+V,height:b+V}))):null,!_&&this.renderCurve(T,O),this.renderErrorBar(T,O),(_||o)&&this.renderDots(T,J,O),(!v||j)&&jl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var i=a.length%2!==0?[].concat(rp(a),[0]):a,o=[],l=0;l<s;++l)o=[].concat(rp(o),rp(i));return o}},{key:"renderDotItem",value:function(a,s){var i;if(pe.isValidElement(a))i=pe.cloneElement(a,s);else if(wr(a))i=a(s);else{var o=s.key,l=L7(s,C5e),d=Pr("recharts-line-dot",typeof a!="boolean"?a.className:"");i=pe.createElement(Wy,dv({key:o},l,{className:d}))}return i}}])})(N.PureComponent);mc(go,"displayName","Line");mc(go,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!yu.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});mc(go,"getComposedData",function(e){var t=e.props,r=e.xAxis,a=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,d=e.displayedData,u=e.offset,f=t.layout,m=d.map(function(p,g){var b=ca(p,o);return f==="horizontal"?{x:Zp({axis:r,ticks:s,bandSize:l,entry:p,index:g}),y:yr(b)?null:a.scale(b),value:b,payload:p}:{x:yr(b)?null:r.scale(b),y:Zp({axis:a,ticks:i,bandSize:l,entry:p,index:g}),value:b,payload:p}});return Po({points:m,layout:f},u)});var $5e=["layout","type","stroke","connectNulls","isRange","ref"],F5e=["key"],pG;function ug(e){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ug(e)}function gG(e,t){if(e==null)return{};var r=B5e(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function B5e(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Ch(){return Ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ch.apply(this,arguments)}function F7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function of(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F7(Object(r),!0).forEach(function(a){ed(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function z5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B7(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,vG(a.key),a)}}function q5e(e,t,r){return t&&B7(e.prototype,t),r&&B7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function U5e(e,t,r){return t=nj(t),V5e(e,xG()?Reflect.construct(t,r||[],nj(e).constructor):t.apply(e,r))}function V5e(e,t){if(t&&(ug(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H5e(e)}function H5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xG=function(){return!!e})()}function nj(e){return nj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nj(e)}function G5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ek(e,t)}function ek(e,t){return ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ek(e,t)}function ed(e,t,r){return t=vG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vG(e){var t=W5e(e,"string");return ug(t)=="symbol"?t:t+""}function W5e(e,t){if(ug(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ug(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Rf=(function(e){function t(){var r;z5e(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=U5e(this,t,[].concat(s)),ed(r,"state",{isAnimationFinished:!0}),ed(r,"id",kf("recharts-area-")),ed(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),wr(o)&&o()}),ed(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),wr(o)&&o()}),r}return G5e(t,e),q5e(t,[{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var d=this.props,u=d.dot,f=d.points,m=d.dataKey,p=tr(this.props,!1),g=tr(u,!0),b=f.map(function(y,j){var _=of(of(of({key:"dot-".concat(j),r:3},p),g),{},{index:j,cx:y.x,cy:y.y,dataKey:m,value:y.value,payload:y.payload,points:f});return t.renderDotItem(u,_)}),v={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return pe.createElement(Ur,Ch({className:"recharts-area-dots"},v),b)}},{key:"renderHorizontalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,d=o[0].x,u=o[o.length-1].x,f=a*Math.abs(d-u),m=uf(o.map(function(p){return p.y||0}));return vt(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(uf(i.map(function(p){return p.y||0})),m)),vt(m)?pe.createElement("rect",{x:d<u?d:d-f,y:0,width:f,height:Math.floor(m+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,d=o[0].y,u=o[o.length-1].y,f=a*Math.abs(d-u),m=uf(o.map(function(p){return p.x||0}));return vt(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(uf(i.map(function(p){return p.x||0})),m)),vt(m)?pe.createElement("rect",{x:0,y:d<u?d:d-f,width:m+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(a){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,s,i,o){var l=this.props,d=l.layout,u=l.type,f=l.stroke,m=l.connectNulls,p=l.isRange;l.ref;var g=gG(l,$5e);return pe.createElement(Ur,{clipPath:i?"url(#clipPath-".concat(o,")"):null},pe.createElement(gf,Ch({},tr(g,!0),{points:a,connectNulls:m,type:u,baseLine:s,layout:d,stroke:"none",className:"recharts-area-area"})),f!=="none"&&pe.createElement(gf,Ch({},tr(this.props,!1),{className:"recharts-area-curve",layout:d,type:u,connectNulls:m,fill:"none",points:a})),f!=="none"&&p&&pe.createElement(gf,Ch({},tr(this.props,!1),{className:"recharts-area-curve",layout:d,type:u,connectNulls:m,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,d=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,m=o.animationDuration,p=o.animationEasing,g=o.animationId,b=this.state,v=b.prevPoints,y=b.prevBaseLine;return pe.createElement(Al,{begin:f,duration:m,isActive:u,easing:p,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var _=j.t;if(v){var C=v.length/l.length,A=l.map(function(R,M){var I=Math.floor(M*C);if(v[I]){var D=v[I],$=Ma(D.x,R.x),K=Ma(D.y,R.y);return of(of({},R),{},{x:$(_),y:K(_)})}return R}),S;if(vt(d)&&typeof d=="number"){var T=Ma(y,d);S=T(_)}else if(yr(d)||Ig(d)){var O=Ma(y,0);S=O(_)}else S=d.map(function(R,M){var I=Math.floor(M*C);if(y[I]){var D=y[I],$=Ma(D.x,R.x),K=Ma(D.y,R.y);return of(of({},R),{},{x:$(_),y:K(_)})}return R});return i.renderAreaStatically(A,S,a,s)}return pe.createElement(Ur,null,pe.createElement("defs",null,pe.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(_))),pe.createElement(Ur,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,d,a,s)))})}},{key:"renderArea",value:function(a,s){var i=this.props,o=i.points,l=i.baseLine,d=i.isAnimationActive,u=this.state,f=u.prevPoints,m=u.prevBaseLine,p=u.totalLength;return d&&o&&o.length&&(!f&&p>0||!wf(f,o)||!wf(m,l))?this.renderAreaWithAnimation(a,s):this.renderAreaStatically(o,l,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,d=s.className,u=s.top,f=s.left,m=s.xAxis,p=s.yAxis,g=s.width,b=s.height,v=s.isAnimationActive,y=s.id;if(i||!l||!l.length)return null;var j=this.state.isAnimationFinished,_=l.length===1,C=Pr("recharts-area",d),A=m&&m.allowDataOverflow,S=p&&p.allowDataOverflow,T=A||S,O=yr(y)?this.id:y,R=(a=tr(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},M=R.r,I=M===void 0?3:M,D=R.strokeWidth,$=D===void 0?2:D,K=gU(o)?o:{},U=K.clipDot,J=U===void 0?!0:U,V=I*2+$;return pe.createElement(Ur,{className:C},A||S?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(O)},pe.createElement("rect",{x:A?f:f-g/2,y:S?u:u-b/2,width:A?g:g*2,height:S?b:b*2})),!J&&pe.createElement("clipPath",{id:"clipPath-dots-".concat(O)},pe.createElement("rect",{x:f-V/2,y:u-V/2,width:g+V,height:b+V}))):null,_?null:this.renderArea(T,O),(o||_)&&this.renderDots(T,J,O),(!v||j)&&jl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:a.points!==s.curPoints||a.baseLine!==s.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])})(N.PureComponent);pG=Rf;ed(Rf,"displayName","Area");ed(Rf,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!yu.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ed(Rf,"getBaseValue",function(e,t,r,a){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(vt(l)&&typeof l=="number")return l;var d=s==="horizontal"?a:r,u=d.scale.domain();if(d.type==="number"){var f=Math.max(u[0],u[1]),m=Math.min(u[0],u[1]);return l==="dataMin"?m:l==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});ed(Rf,"getComposedData",function(e){var t=e.props,r=e.item,a=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,d=e.dataKey,u=e.stackedData,f=e.dataStartIndex,m=e.displayedData,p=e.offset,g=t.layout,b=u&&u.length,v=pG.getBaseValue(t,r,a,s),y=g==="horizontal",j=!1,_=m.map(function(A,S){var T;b?T=u[f+S]:(T=ca(A,d),Array.isArray(T)?j=!0:T=[v,T]);var O=T[1]==null||b&&ca(A,d)==null;return y?{x:Zp({axis:a,ticks:i,bandSize:l,entry:A,index:S}),y:O?null:s.scale(T[1]),value:T,payload:A}:{x:O?null:a.scale(T[1]),y:Zp({axis:s,ticks:o,bandSize:l,entry:A,index:S}),value:T,payload:A}}),C;return b||j?C=_.map(function(A){var S=Array.isArray(A.value)?A.value[0]:null;return y?{x:A.x,y:S!=null&&A.y!=null?s.scale(S):null}:{x:S!=null?a.scale(S):null,y:A.y}}):C=y?s.scale(v):a.scale(v),of({points:_,baseLine:C,layout:g,isRange:j},p)});ed(Rf,"renderDotItem",function(e,t){var r;if(pe.isValidElement(e))r=pe.cloneElement(e,t);else if(wr(e))r=e(t);else{var a=Pr("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=gG(t,F5e);r=pe.createElement(Wy,Ch({},i,{key:s,className:a}))}return r});function fg(e){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fg(e)}function K5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y5e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,jG(a.key),a)}}function X5e(e,t,r){return t&&Y5e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function J5e(e,t,r){return t=aj(t),Z5e(e,yG()?Reflect.construct(t,r||[],aj(e).constructor):t.apply(e,r))}function Z5e(e,t){if(t&&(fg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q5e(e)}function Q5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yG=function(){return!!e})()}function aj(e){return aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},aj(e)}function eSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tk(e,t)}function tk(e,t){return tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},tk(e,t)}function bG(e,t,r){return t=jG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jG(e){var t=tSe(e,"string");return fg(t)=="symbol"?t:t+""}function tSe(e,t){if(fg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(fg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var T2=(function(e){function t(){return K5e(this,t),J5e(this,t,arguments)}return eSe(t,e),X5e(t,[{key:"render",value:function(){return null}}])})(N.Component);bG(T2,"displayName","ZAxis");bG(T2,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var rSe=["option","isActive"];function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uv.apply(this,arguments)}function nSe(e,t){if(e==null)return{};var r=aSe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function aSe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function sSe(e){var t=e.option,r=e.isActive,a=nSe(e,rSe);return typeof t=="string"?N.createElement(V1,uv({option:N.createElement(i2,uv({type:t},a)),isActive:r,shapeType:"symbols"},a)):N.createElement(V1,uv({option:t,isActive:r,shapeType:"symbols"},a))}function hg(e){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hg(e)}function fv(){return fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fv.apply(this,arguments)}function z7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function hl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z7(Object(r),!0).forEach(function(a){hf(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function iSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q7(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,NG(a.key),a)}}function oSe(e,t,r){return t&&q7(e.prototype,t),r&&q7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lSe(e,t,r){return t=sj(t),cSe(e,wG()?Reflect.construct(t,r||[],sj(e).constructor):t.apply(e,r))}function cSe(e,t){if(t&&(hg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dSe(e)}function dSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wG=function(){return!!e})()}function sj(e){return sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sj(e)}function uSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rk(e,t)}function rk(e,t){return rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},rk(e,t)}function hf(e,t,r){return t=NG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NG(e){var t=fSe(e,"string");return hg(t)=="symbol"?t:t+""}function fSe(e,t){if(hg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(hg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var R2=(function(e){function t(){var r;iSe(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=lSe(this,t,[].concat(s)),hf(r,"state",{isAnimationFinished:!1}),hf(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),hf(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),hf(r,"id",kf("recharts-scatter-")),r}return uSe(t,e),oSe(t,[{key:"renderSymbolsStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.activeShape,d=i.activeIndex,u=tr(this.props,!1);return a.map(function(f,m){var p=d===m,g=p?l:o,b=hl(hl({},u),f);return pe.createElement(Ur,fv({className:"recharts-scatter-symbol",key:"symbol-".concat(f==null?void 0:f.cx,"-").concat(f==null?void 0:f.cy,"-").concat(f==null?void 0:f.size,"-").concat(m)},jf(s.props,f,m),{role:"img"}),pe.createElement(sSe,fv({option:g,isActive:p,key:"symbol-".concat(m)},b)))})}},{key:"renderSymbolsWithAnimation",value:function(){var a=this,s=this.props,i=s.points,o=s.isAnimationActive,l=s.animationBegin,d=s.animationDuration,u=s.animationEasing,f=s.animationId,m=this.state.prevPoints;return pe.createElement(Al,{begin:l,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var g=p.t,b=i.map(function(v,y){var j=m&&m[y];if(j){var _=Ma(j.cx,v.cx),C=Ma(j.cy,v.cy),A=Ma(j.size,v.size);return hl(hl({},v),{},{cx:_(g),cy:C(g),size:A(g)})}var S=Ma(0,v.size);return hl(hl({},v),{},{size:S(g)})});return pe.createElement(Ur,null,a.renderSymbolsStatically(b))})}},{key:"renderSymbols",value:function(){var a=this.props,s=a.points,i=a.isAnimationActive,o=this.state.prevPoints;return i&&s&&s.length&&(!o||!wf(o,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.points,o=s.xAxis,l=s.yAxis,d=s.children,u=Vi(d,qg);return u?u.map(function(f,m){var p=f.props,g=p.direction,b=p.dataKey;return pe.cloneElement(f,{key:"".concat(g,"-").concat(b,"-").concat(i[m]),data:i,xAxis:o,yAxis:l,layout:g==="x"?"vertical":"horizontal",dataPointFormatter:function(y,j){return{x:y.cx,y:y.cy,value:g==="x"?+y.node.x:+y.node.y,errorVal:ca(y,j)}}})}):null}},{key:"renderLine",value:function(){var a=this.props,s=a.points,i=a.line,o=a.lineType,l=a.lineJointType,d=tr(this.props,!1),u=tr(i,!1),f,m;if(o==="joint")f=s.map(function(C){return{x:C.cx,y:C.cy}});else if(o==="fitting"){var p=ife(s),g=p.xmin,b=p.xmax,v=p.a,y=p.b,j=function(A){return v*A+y};f=[{x:g,y:j(g)},{x:b,y:j(b)}]}var _=hl(hl(hl({},d),{},{fill:"none",stroke:d&&d.fill},u),{},{points:f});return pe.isValidElement(i)?m=pe.cloneElement(i,_):wr(i)?m=i(_):m=pe.createElement(gf,fv({},_,{type:l})),pe.createElement(Ur,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.points,o=a.line,l=a.className,d=a.xAxis,u=a.yAxis,f=a.left,m=a.top,p=a.width,g=a.height,b=a.id,v=a.isAnimationActive;if(s||!i||!i.length)return null;var y=this.state.isAnimationFinished,j=Pr("recharts-scatter",l),_=d&&d.allowDataOverflow,C=u&&u.allowDataOverflow,A=_||C,S=yr(b)?this.id:b;return pe.createElement(Ur,{className:j,clipPath:A?"url(#clipPath-".concat(S,")"):null},_||C?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(S)},pe.createElement("rect",{x:_?f:f-p/2,y:C?m:m-g/2,width:_?p:p*2,height:C?g:g*2}))):null,o&&this.renderLine(),this.renderErrorBar(),pe.createElement(Ur,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!v||y)&&jl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}}])})(N.PureComponent);hf(R2,"displayName","Scatter");hf(R2,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!yu.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});hf(R2,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,a=e.zAxis,s=e.item,i=e.displayedData,o=e.xAxisTicks,l=e.yAxisTicks,d=e.offset,u=s.props.tooltipType,f=Vi(s.props.children,cu),m=yr(t.dataKey)?s.props.dataKey:t.dataKey,p=yr(r.dataKey)?s.props.dataKey:r.dataKey,g=a&&a.dataKey,b=a?a.range:T2.defaultProps.range,v=b&&b[0],y=t.scale.bandwidth?t.scale.bandwidth():0,j=r.scale.bandwidth?r.scale.bandwidth():0,_=i.map(function(C,A){var S=ca(C,m),T=ca(C,p),O=!yr(g)&&ca(C,g)||"-",R=[{name:yr(t.dataKey)?s.props.name:t.name||t.dataKey,unit:t.unit||"",value:S,payload:C,dataKey:m,type:u},{name:yr(r.dataKey)?s.props.name:r.name||r.dataKey,unit:r.unit||"",value:T,payload:C,dataKey:p,type:u}];O!=="-"&&R.push({name:a.name||a.dataKey,unit:a.unit||"",value:O,payload:C,dataKey:g,type:u});var M=Zp({axis:t,ticks:o,bandSize:y,entry:C,index:A,dataKey:m}),I=Zp({axis:r,ticks:l,bandSize:j,entry:C,index:A,dataKey:p}),D=O!=="-"?a.scale(O):v,$=Math.sqrt(Math.max(D,0)/Math.PI);return hl(hl({},C),{},{cx:M,cy:I,x:M-$,y:I-$,xAxis:t,yAxis:r,zAxis:a,width:2*$,height:2*$,size:D,node:{x:S,y:T,z:O},tooltipPayload:R,tooltipPosition:{x:M,y:I},payload:C},f&&f[A]&&f[A].props)});return hl({points:_},d)});function mg(e){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mg(e)}function hSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mSe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_G(a.key),a)}}function pSe(e,t,r){return t&&mSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gSe(e,t,r){return t=ij(t),xSe(e,SG()?Reflect.construct(t,r||[],ij(e).constructor):t.apply(e,r))}function xSe(e,t){if(t&&(mg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vSe(e)}function vSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SG=function(){return!!e})()}function ij(e){return ij=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ij(e)}function ySe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nk(e,t)}function nk(e,t){return nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},nk(e,t)}function CG(e,t,r){return t=_G(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _G(e){var t=bSe(e,"string");return mg(t)=="symbol"?t:t+""}function bSe(e,t){if(mg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(mg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ak.apply(this,arguments)}function jSe(e){var t=e.xAxisId,r=BO(),a=zO(),s=tG(t);return s==null?null:N.createElement(Ug,ak({},s,{className:Pr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(o){return Jd(o,!0)}}))}var ji=(function(e){function t(){return hSe(this,t),gSe(this,t,arguments)}return ySe(t,e),pSe(t,[{key:"render",value:function(){return N.createElement(jSe,this.props)}}])})(N.Component);CG(ji,"displayName","XAxis");CG(ji,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function pg(e){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pg(e)}function wSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NSe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,OG(a.key),a)}}function SSe(e,t,r){return t&&NSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CSe(e,t,r){return t=oj(t),_Se(e,AG()?Reflect.construct(t,r||[],oj(e).constructor):t.apply(e,r))}function _Se(e,t){if(t&&(pg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ASe(e)}function ASe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AG=function(){return!!e})()}function oj(e){return oj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oj(e)}function kSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sk(e,t)}function sk(e,t){return sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},sk(e,t)}function kG(e,t,r){return t=OG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OG(e){var t=OSe(e,"string");return pg(t)=="symbol"?t:t+""}function OSe(e,t){if(pg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(pg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ik(){return ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ik.apply(this,arguments)}var ESe=function(t){var r=t.yAxisId,a=BO(),s=zO(),i=rG(r);return i==null?null:N.createElement(Ug,ik({},i,{className:Pr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(l){return Jd(l,!0)}}))},Dl=(function(e){function t(){return wSe(this,t),CSe(this,t,arguments)}return kSe(t,e),SSe(t,[{key:"render",value:function(){return N.createElement(ESe,this.props)}}])})(N.Component);kG(Dl,"displayName","YAxis");kG(Dl,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function U7(e){return MSe(e)||PSe(e)||RSe(e)||TSe()}function TSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RSe(e,t){if(e){if(typeof e=="string")return ok(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ok(e,t)}}function PSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function MSe(e){if(Array.isArray(e))return ok(e)}function ok(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var lk=function(t,r,a,s,i){var o=Vi(t,Nf),l=Vi(t,k2),d=[].concat(U7(o),U7(l)),u=Vi(t,E2),f="".concat(s,"Id"),m=s[0],p=r;if(d.length&&(p=d.reduce(function(v,y){if(y.props[f]===a&&sd(y.props,"extendDomain")&&vt(y.props[m])){var j=y.props[m];return[Math.min(v[0],j),Math.max(v[1],j)]}return v},p)),u.length){var g="".concat(m,"1"),b="".concat(m,"2");p=u.reduce(function(v,y){if(y.props[f]===a&&sd(y.props,"extendDomain")&&vt(y.props[g])&&vt(y.props[b])){var j=y.props[g],_=y.props[b];return[Math.min(v[0],j,_),Math.max(v[1],j,_)]}return v},p)}return i&&i.length&&(p=i.reduce(function(v,y){return vt(y)?[Math.min(v[0],y),Math.max(v[1],y)]:v},p)),p},R_={exports:{}},V7;function DSe(){return V7||(V7=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(d,u,f){this.fn=d,this.context=u,this.once=f||!1}function i(d,u,f,m,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new s(f,m||d,p),b=r?r+u:u;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],g]:d._events[b].push(g):(d._events[b]=g,d._eventsCount++),d}function o(d,u){--d._eventsCount===0?d._events=new a:delete d._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,m;if(this._eventsCount===0)return u;for(m in f=this._events)t.call(f,m)&&u.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=r?r+u:u,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var p=0,g=m.length,b=new Array(g);p<g;p++)b[p]=m[p].fn;return b},l.prototype.listenerCount=function(u){var f=r?r+u:u,m=this._events[f];return m?m.fn?1:m.length:0},l.prototype.emit=function(u,f,m,p,g,b){var v=r?r+u:u;if(!this._events[v])return!1;var y=this._events[v],j=arguments.length,_,C;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),j){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,f),!0;case 3:return y.fn.call(y.context,f,m),!0;case 4:return y.fn.call(y.context,f,m,p),!0;case 5:return y.fn.call(y.context,f,m,p,g),!0;case 6:return y.fn.call(y.context,f,m,p,g,b),!0}for(C=1,_=new Array(j-1);C<j;C++)_[C-1]=arguments[C];y.fn.apply(y.context,_)}else{var A=y.length,S;for(C=0;C<A;C++)switch(y[C].once&&this.removeListener(u,y[C].fn,void 0,!0),j){case 1:y[C].fn.call(y[C].context);break;case 2:y[C].fn.call(y[C].context,f);break;case 3:y[C].fn.call(y[C].context,f,m);break;case 4:y[C].fn.call(y[C].context,f,m,p);break;default:if(!_)for(S=1,_=new Array(j-1);S<j;S++)_[S-1]=arguments[S];y[C].fn.apply(y[C].context,_)}}return!0},l.prototype.on=function(u,f,m){return i(this,u,f,m,!1)},l.prototype.once=function(u,f,m){return i(this,u,f,m,!0)},l.prototype.removeListener=function(u,f,m,p){var g=r?r+u:u;if(!this._events[g])return this;if(!f)return o(this,g),this;var b=this._events[g];if(b.fn)b.fn===f&&(!p||b.once)&&(!m||b.context===m)&&o(this,g);else{for(var v=0,y=[],j=b.length;v<j;v++)(b[v].fn!==f||p&&!b[v].once||m&&b[v].context!==m)&&y.push(b[v]);y.length?this._events[g]=y.length===1?y[0]:y:o(this,g)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(R_)),R_.exports}var LSe=DSe();const ISe=jn(LSe);var P_=new ISe,M_="recharts.syncMouseEvents";function uy(e){"@babel/helpers - typeof";return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uy(e)}function $Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FSe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,EG(a.key),a)}}function BSe(e,t,r){return t&&FSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function D_(e,t,r){return t=EG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EG(e){var t=zSe(e,"string");return uy(t)=="symbol"?t:t+""}function zSe(e,t){if(uy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(uy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qSe=(function(){function e(){$Se(this,e),D_(this,"activeIndex",0),D_(this,"coordinateList",[]),D_(this,"layout","horizontal")}return BSe(e,[{key:"setDetails",value:function(r){var a,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,d=r.layout,u=d===void 0?null:d,f=r.offset,m=f===void 0?null:f,p=r.mouseHandlerCallback,g=p===void 0?null:p;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,d=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((a=window)===null||a===void 0?void 0:a.scrollY)||0,m=i+d+u,p=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:m,pageY:p})}}}])})();function USe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var a=e==null?void 0:e[0],s=e==null?void 0:e[1];if(a&&s&&vt(a)&&vt(s))return!0}return!1}function VSe(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function TG(e){var t=e.cx,r=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,o=ea(t,r,a,s),l=ea(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function HSe(e,t,r){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,d=t.cy,u=t.innerRadius,f=t.outerRadius,m=t.angle,p=ea(l,d,u,m),g=ea(l,d,f,m);a=p.x,s=p.y,i=g.x,o=g.y}else return TG(t);return[{x:a,y:s},{x:i,y:o}]}function fy(e){"@babel/helpers - typeof";return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fy(e)}function H7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function pb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H7(Object(r),!0).forEach(function(a){GSe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function GSe(e,t,r){return t=WSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WSe(e){var t=KSe(e,"string");return fy(t)=="symbol"?t:t+""}function KSe(e,t){if(fy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(fy(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YSe(e){var t,r,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,d=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,m=e.layout,p=e.chartName,g=(t=a.props.cursor)!==null&&t!==void 0?t:(r=a.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!a||!g||!i||!o||p!=="ScatterChart"&&s!=="axis")return null;var b,v=gf;if(p==="ScatterChart")b=o,v=qje;else if(p==="BarChart")b=VSe(m,o,d,f),v=DO;else if(m==="radial"){var y=TG(o),j=y.cx,_=y.cy,C=y.radius,A=y.startAngle,S=y.endAngle;b={cx:j,cy:_,startAngle:A,endAngle:S,innerRadius:C,outerRadius:C},v=CH}else b={points:HSe(m,o,d)},v=gf;var T=pb(pb(pb(pb({stroke:"#ccc",pointerEvents:"none"},d),b),tr(g,!1)),{},{payload:l,payloadIndex:u,className:Pr("recharts-tooltip-cursor",g.className)});return N.isValidElement(g)?N.cloneElement(g,T):N.createElement(v,T)}var XSe=["item"],JSe=["children","className","width","height","style","compact","title","desc"];function gg(e){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gg(e)}function gp(){return gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},gp.apply(this,arguments)}function G7(e,t){return eCe(e)||QSe(e,t)||PG(e,t)||ZSe()}function ZSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function eCe(e){if(Array.isArray(e))return e}function W7(e,t){if(e==null)return{};var r=tCe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function tCe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function rCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nCe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,MG(a.key),a)}}function aCe(e,t,r){return t&&nCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sCe(e,t,r){return t=lj(t),iCe(e,RG()?Reflect.construct(t,r||[],lj(e).constructor):t.apply(e,r))}function iCe(e,t){if(t&&(gg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oCe(e)}function oCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RG=function(){return!!e})()}function lj(e){return lj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lj(e)}function lCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ck(e,t)}function ck(e,t){return ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ck(e,t)}function xg(e){return uCe(e)||dCe(e)||PG(e)||cCe()}function cCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PG(e,t){if(e){if(typeof e=="string")return dk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dk(e,t)}}function dCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uCe(e){if(Array.isArray(e))return dk(e)}function dk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function K7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K7(Object(r),!0).forEach(function(a){Ar(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ar(e,t,r){return t=MG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MG(e){var t=fCe(e,"string");return gg(t)=="symbol"?t:t+""}function fCe(e,t){if(gg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(gg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hCe={xAxis:["bottom","top"],yAxis:["left","right"]},mCe={width:"100%",height:"100%"},DG={x:0,y:0};function gb(e){return e}var pCe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},gCe=function(t,r,a,s){var i=r.find(function(f){return f&&f.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return rt(rt(rt({},s),ea(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var d=i.coordinate,u=s.angle;return rt(rt(rt({},s),ea(s.cx,s.cy,d,u)),{},{angle:u,radius:d})}return DG},P2=function(t,r){var a=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(a??[]).reduce(function(l,d){var u=d.props.data;return u&&u.length?[].concat(xg(l),xg(u)):l},[]);return o.length>0?o:t&&t.length&&vt(s)&&vt(i)?t.slice(s,i+1):[]};function LG(e){return e==="number"?[0,"auto"]:void 0}var uk=function(t,r,a,s){var i=t.graphicalItems,o=t.tooltipAxis,l=P2(r,t);return a<0||!i||!i.length||a>=l.length?null:i.reduce(function(d,u){var f,m=(f=u.props.data)!==null&&f!==void 0?f:r;m&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(m=m.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var g=m===void 0?l:m;p=l1(g,o.dataKey,s)}else p=m&&m[a]||l[a];return p?[].concat(xg(d),[yH(u,p)]):d},[])},Y7=function(t,r,a,s){var i=s||{x:t.chartX,y:t.chartY},o=pCe(i,a),l=t.orderedTooltipTicks,d=t.tooltipAxis,u=t.tooltipTicks,f=f0e(o,l,u,d);if(f>=0&&u){var m=u[f]&&u[f].value,p=uk(t,r,f,m),g=gCe(a,l,f,i);return{activeTooltipIndex:f,activeLabel:m,activePayload:p,activeCoordinate:g}}return null},xCe=function(t,r){var a=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,m=t.children,p=t.stackOffset,g=hH(f,i);return a.reduce(function(b,v){var y,j=v.type.defaultProps!==void 0?rt(rt({},v.type.defaultProps),v.props):v.props,_=j.type,C=j.dataKey,A=j.allowDataOverflow,S=j.allowDuplicatedCategory,T=j.scale,O=j.ticks,R=j.includeHidden,M=j[o];if(b[M])return b;var I=P2(t.data,{graphicalItems:s.filter(function(z){var H,X=o in z.props?z.props[o]:(H=z.type.defaultProps)===null||H===void 0?void 0:H[o];return X===M}),dataStartIndex:d,dataEndIndex:u}),D=I.length,$,K,U;USe(j.domain,A,_)&&($=w4(j.domain,null,A),g&&(_==="number"||T!=="auto")&&(U=iv(I,C,"category")));var J=LG(_);if(!$||$.length===0){var V,G=(V=j.domain)!==null&&V!==void 0?V:J;if(C){if($=iv(I,C,_),_==="category"&&g){var q=sfe($);S&&q?(K=$,$=G1(0,D)):S||($=V8(G,$,v).reduce(function(z,H){return z.indexOf(H)>=0?z:[].concat(xg(z),[H])},[]))}else if(_==="category")S?$=$.filter(function(z){return z!==""&&!yr(z)}):$=V8(G,$,v).reduce(function(z,H){return z.indexOf(H)>=0||H===""||yr(H)?z:[].concat(xg(z),[H])},[]);else if(_==="number"){var Y=x0e(I,s.filter(function(z){var H,X,ne=o in z.props?z.props[o]:(H=z.type.defaultProps)===null||H===void 0?void 0:H[o],ie="hide"in z.props?z.props.hide:(X=z.type.defaultProps)===null||X===void 0?void 0:X.hide;return ne===M&&(R||!ie)}),C,i,f);Y&&($=Y)}g&&(_==="number"||T!=="auto")&&(U=iv(I,C,"category"))}else g?$=G1(0,D):l&&l[M]&&l[M].hasStack&&_==="number"?$=p==="expand"?[0,1]:vH(l[M].stackGroups,d,u):$=fH(I,s.filter(function(z){var H=o in z.props?z.props[o]:z.type.defaultProps[o],X="hide"in z.props?z.props.hide:z.type.defaultProps.hide;return H===M&&(R||!X)}),_,f,!0);if(_==="number")$=lk(m,$,M,i,O),G&&($=w4(G,$,A));else if(_==="category"&&G){var Q=G,F=$.every(function(z){return Q.indexOf(z)>=0});F&&($=Q)}}return rt(rt({},b),{},Ar({},M,rt(rt({},j),{},{axisType:i,domain:$,categoricalDomain:U,duplicateDomain:K,originalDomain:(y=j.domain)!==null&&y!==void 0?y:J,isCategorical:g,layout:f})))},{})},vCe=function(t,r){var a=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,m=t.children,p=P2(t.data,{graphicalItems:a,dataStartIndex:d,dataEndIndex:u}),g=p.length,b=hH(f,i),v=-1;return a.reduce(function(y,j){var _=j.type.defaultProps!==void 0?rt(rt({},j.type.defaultProps),j.props):j.props,C=_[o],A=LG("number");if(!y[C]){v++;var S;return b?S=G1(0,g):l&&l[C]&&l[C].hasStack?(S=vH(l[C].stackGroups,d,u),S=lk(m,S,C,i)):(S=w4(A,fH(p,a.filter(function(T){var O,R,M=o in T.props?T.props[o]:(O=T.type.defaultProps)===null||O===void 0?void 0:O[o],I="hide"in T.props?T.props.hide:(R=T.type.defaultProps)===null||R===void 0?void 0:R.hide;return M===C&&!I}),"number",f),s.defaultProps.allowDataOverflow),S=lk(m,S,C,i)),rt(rt({},y),{},Ar({},C,rt(rt({axisType:i},s.defaultProps),{},{hide:!0,orientation:zo(hCe,"".concat(i,".").concat(v%2),null),domain:S,originalDomain:A,isCategorical:b,layout:f})))}return y},{})},yCe=function(t,r){var a=r.axisType,s=a===void 0?"xAxis":a,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,f=t.children,m="".concat(s,"Id"),p=Vi(f,i),g={};return p&&p.length?g=xCe(t,{axes:p,graphicalItems:o,axisType:s,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:u}):o&&o.length&&(g=vCe(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:u})),g},bCe=function(t){var r=cf(t),a=Jd(r,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:lO(a,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:P1(r,a)}},X7=function(t){var r=t.children,a=t.defaultShowTooltip,s=Do(r,ag),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},jCe=function(t){return!t||!t.length?!1:t.some(function(r){var a=tu(r&&r.type);return a&&a.indexOf("Bar")>=0})},J7=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},wCe=function(t,r){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,d=l===void 0?{}:l,u=a.width,f=a.height,m=a.children,p=a.margin||{},g=Do(m,ag),b=Do(m,nd),v=Object.keys(d).reduce(function(S,T){var O=d[T],R=O.orientation;return!O.mirror&&!O.hide?rt(rt({},S),{},Ar({},R,S[R]+O.width)):S},{left:p.left||0,right:p.right||0}),y=Object.keys(o).reduce(function(S,T){var O=o[T],R=O.orientation;return!O.mirror&&!O.hide?rt(rt({},S),{},Ar({},R,zo(S,"".concat(R))+O.height)):S},{top:p.top||0,bottom:p.bottom||0}),j=rt(rt({},y),v),_=j.bottom;g&&(j.bottom+=g.props.height||ag.defaultProps.height),b&&r&&(j=p0e(j,s,a,r));var C=u-j.left-j.right,A=f-j.top-j.bottom;return rt(rt({brushBottom:_},j),{},{width:Math.max(C,0),height:Math.max(A,0)})},NCe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},M2=function(t){var r=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,d=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,m=t.defaultProps,p=function(j,_){var C=_.graphicalItems,A=_.stackGroups,S=_.offset,T=_.updateId,O=_.dataStartIndex,R=_.dataEndIndex,M=j.barSize,I=j.layout,D=j.barGap,$=j.barCategoryGap,K=j.maxBarSize,U=J7(I),J=U.numericAxisName,V=U.cateAxisName,G=jCe(C),q=[];return C.forEach(function(Y,Q){var F=P2(j.data,{graphicalItems:[Y],dataStartIndex:O,dataEndIndex:R}),z=Y.type.defaultProps!==void 0?rt(rt({},Y.type.defaultProps),Y.props):Y.props,H=z.dataKey,X=z.maxBarSize,ne=z["".concat(J,"Id")],ie=z["".concat(V,"Id")],ce={},ge=d.reduce(function(ut,gt){var dt=_["".concat(gt.axisType,"Map")],Nt=z["".concat(gt.axisType,"Id")];dt&&dt[Nt]||gt.axisType==="zAxis"||qh();var zt=dt[Nt];return rt(rt({},ut),{},Ar(Ar({},gt.axisType,zt),"".concat(gt.axisType,"Ticks"),Jd(zt)))},ce),he=ge[V],ue=ge["".concat(V,"Ticks")],Se=A&&A[ne]&&A[ne].hasStack&&_0e(Y,A[ne].stackGroups),je=tu(Y.type).indexOf("Bar")>=0,Be=P1(he,ue),$e=[],oe=G&&h0e({barSize:M,stackGroups:A,totalSize:NCe(ge,V)});if(je){var Xe,pt,Oe=yr(X)?K:X,Ee=(Xe=(pt=P1(he,ue,!0))!==null&&pt!==void 0?pt:Oe)!==null&&Xe!==void 0?Xe:0;$e=m0e({barGap:D,barCategoryGap:$,bandSize:Ee!==Be?Ee:Be,sizeList:oe[ie],maxBarSize:Oe}),Ee!==Be&&($e=$e.map(function(ut){return rt(rt({},ut),{},{position:rt(rt({},ut.position),{},{offset:ut.position.offset-Ee/2})})}))}var lt=Y&&Y.type&&Y.type.getComposedData;lt&&q.push({props:rt(rt({},lt(rt(rt({},ge),{},{displayedData:F,props:j,dataKey:H,item:Y,bandSize:Be,barPosition:$e,offset:S,stackedData:Se,layout:I,dataStartIndex:O,dataEndIndex:R}))),{},Ar(Ar(Ar({key:Y.key||"item-".concat(Q)},J,ge[J]),V,ge[V]),"animationId",T)),childIndex:vfe(Y,j.children),item:Y})}),q},g=function(j,_){var C=j.props,A=j.dataStartIndex,S=j.dataEndIndex,T=j.updateId;if(!sM({props:C}))return null;var O=C.children,R=C.layout,M=C.stackOffset,I=C.data,D=C.reverseStackOrder,$=J7(R),K=$.numericAxisName,U=$.cateAxisName,J=Vi(O,a),V=S0e(I,J,"".concat(K,"Id"),"".concat(U,"Id"),M,D),G=d.reduce(function(z,H){var X="".concat(H.axisType,"Map");return rt(rt({},z),{},Ar({},X,yCe(C,rt(rt({},H),{},{graphicalItems:J,stackGroups:H.axisType===K&&V,dataStartIndex:A,dataEndIndex:S}))))},{}),q=wCe(rt(rt({},G),{},{props:C,graphicalItems:J}),_==null?void 0:_.legendBBox);Object.keys(G).forEach(function(z){G[z]=f(C,G[z],q,z.replace("Map",""),r)});var Y=G["".concat(U,"Map")],Q=bCe(Y),F=p(C,rt(rt({},G),{},{dataStartIndex:A,dataEndIndex:S,updateId:T,graphicalItems:J,stackGroups:V,offset:q}));return rt(rt({formattedGraphicalItems:F,graphicalItems:J,offset:q,stackGroups:V},Q),G)},b=(function(y){function j(_){var C,A,S;return rCe(this,j),S=sCe(this,j,[_]),Ar(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ar(S,"accessibilityManager",new qSe),Ar(S,"handleLegendBBoxUpdate",function(T){if(T){var O=S.state,R=O.dataStartIndex,M=O.dataEndIndex,I=O.updateId;S.setState(rt({legendBBox:T},g({props:S.props,dataStartIndex:R,dataEndIndex:M,updateId:I},rt(rt({},S.state),{},{legendBBox:T}))))}}),Ar(S,"handleReceiveSyncEvent",function(T,O,R){if(S.props.syncId===T){if(R===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(O)}}),Ar(S,"handleBrushChange",function(T){var O=T.startIndex,R=T.endIndex;if(O!==S.state.dataStartIndex||R!==S.state.dataEndIndex){var M=S.state.updateId;S.setState(function(){return rt({dataStartIndex:O,dataEndIndex:R},g({props:S.props,dataStartIndex:O,dataEndIndex:R,updateId:M},S.state))}),S.triggerSyncEvent({dataStartIndex:O,dataEndIndex:R})}}),Ar(S,"handleMouseEnter",function(T){var O=S.getMouseInfo(T);if(O){var R=rt(rt({},O),{},{isTooltipActive:!0});S.setState(R),S.triggerSyncEvent(R);var M=S.props.onMouseEnter;wr(M)&&M(R,T)}}),Ar(S,"triggeredAfterMouseMove",function(T){var O=S.getMouseInfo(T),R=O?rt(rt({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(R),S.triggerSyncEvent(R);var M=S.props.onMouseMove;wr(M)&&M(R,T)}),Ar(S,"handleItemMouseEnter",function(T){S.setState(function(){return{isTooltipActive:!0,activeItem:T,activePayload:T.tooltipPayload,activeCoordinate:T.tooltipPosition||{x:T.cx,y:T.cy}}})}),Ar(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),Ar(S,"handleMouseMove",function(T){T.persist(),S.throttleTriggeredAfterMouseMove(T)}),Ar(S,"handleMouseLeave",function(T){S.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};S.setState(O),S.triggerSyncEvent(O);var R=S.props.onMouseLeave;wr(R)&&R(O,T)}),Ar(S,"handleOuterEvent",function(T){var O=xfe(T),R=zo(S.props,"".concat(O));if(O&&wr(R)){var M,I;/.*touch.*/i.test(O)?I=S.getMouseInfo(T.changedTouches[0]):I=S.getMouseInfo(T),R((M=I)!==null&&M!==void 0?M:{},T)}}),Ar(S,"handleClick",function(T){var O=S.getMouseInfo(T);if(O){var R=rt(rt({},O),{},{isTooltipActive:!0});S.setState(R),S.triggerSyncEvent(R);var M=S.props.onClick;wr(M)&&M(R,T)}}),Ar(S,"handleMouseDown",function(T){var O=S.props.onMouseDown;if(wr(O)){var R=S.getMouseInfo(T);O(R,T)}}),Ar(S,"handleMouseUp",function(T){var O=S.props.onMouseUp;if(wr(O)){var R=S.getMouseInfo(T);O(R,T)}}),Ar(S,"handleTouchMove",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(T.changedTouches[0])}),Ar(S,"handleTouchStart",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&S.handleMouseDown(T.changedTouches[0])}),Ar(S,"handleTouchEnd",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&S.handleMouseUp(T.changedTouches[0])}),Ar(S,"handleDoubleClick",function(T){var O=S.props.onDoubleClick;if(wr(O)){var R=S.getMouseInfo(T);O(R,T)}}),Ar(S,"handleContextMenu",function(T){var O=S.props.onContextMenu;if(wr(O)){var R=S.getMouseInfo(T);O(R,T)}}),Ar(S,"triggerSyncEvent",function(T){S.props.syncId!==void 0&&P_.emit(M_,S.props.syncId,T,S.eventEmitterSymbol)}),Ar(S,"applySyncEvent",function(T){var O=S.props,R=O.layout,M=O.syncMethod,I=S.state.updateId,D=T.dataStartIndex,$=T.dataEndIndex;if(T.dataStartIndex!==void 0||T.dataEndIndex!==void 0)S.setState(rt({dataStartIndex:D,dataEndIndex:$},g({props:S.props,dataStartIndex:D,dataEndIndex:$,updateId:I},S.state)));else if(T.activeTooltipIndex!==void 0){var K=T.chartX,U=T.chartY,J=T.activeTooltipIndex,V=S.state,G=V.offset,q=V.tooltipTicks;if(!G)return;if(typeof M=="function")J=M(q,T);else if(M==="value"){J=-1;for(var Y=0;Y<q.length;Y++)if(q[Y].value===T.activeLabel){J=Y;break}}var Q=rt(rt({},G),{},{x:G.left,y:G.top}),F=Math.min(K,Q.x+Q.width),z=Math.min(U,Q.y+Q.height),H=q[J]&&q[J].value,X=uk(S.state,S.props.data,J),ne=q[J]?{x:R==="horizontal"?q[J].coordinate:F,y:R==="horizontal"?z:q[J].coordinate}:DG;S.setState(rt(rt({},T),{},{activeLabel:H,activeCoordinate:ne,activePayload:X,activeTooltipIndex:J}))}else S.setState(T)}),Ar(S,"renderCursor",function(T){var O,R=S.state,M=R.isTooltipActive,I=R.activeCoordinate,D=R.activePayload,$=R.offset,K=R.activeTooltipIndex,U=R.tooltipAxisBandSize,J=S.getTooltipEventType(),V=(O=T.props.active)!==null&&O!==void 0?O:M,G=S.props.layout,q=T.key||"_recharts-cursor";return pe.createElement(YSe,{key:q,activeCoordinate:I,activePayload:D,activeTooltipIndex:K,chartName:r,element:T,isActive:V,layout:G,offset:$,tooltipAxisBandSize:U,tooltipEventType:J})}),Ar(S,"renderPolarAxis",function(T,O,R){var M=zo(T,"type.axisType"),I=zo(S.state,"".concat(M,"Map")),D=T.type.defaultProps,$=D!==void 0?rt(rt({},D),T.props):T.props,K=I&&I[$["".concat(M,"Id")]];return N.cloneElement(T,rt(rt({},K),{},{className:Pr(M,K.className),key:T.key||"".concat(O,"-").concat(R),ticks:Jd(K,!0)}))}),Ar(S,"renderPolarGrid",function(T){var O=T.props,R=O.radialLines,M=O.polarAngles,I=O.polarRadius,D=S.state,$=D.radiusAxisMap,K=D.angleAxisMap,U=cf($),J=cf(K),V=J.cx,G=J.cy,q=J.innerRadius,Y=J.outerRadius;return N.cloneElement(T,{polarAngles:Array.isArray(M)?M:Jd(J,!0).map(function(Q){return Q.coordinate}),polarRadius:Array.isArray(I)?I:Jd(U,!0).map(function(Q){return Q.coordinate}),cx:V,cy:G,innerRadius:q,outerRadius:Y,key:T.key||"polar-grid",radialLines:R})}),Ar(S,"renderLegend",function(){var T=S.state.formattedGraphicalItems,O=S.props,R=O.children,M=O.width,I=O.height,D=S.props.margin||{},$=M-(D.left||0)-(D.right||0),K=dH({children:R,formattedGraphicalItems:T,legendWidth:$,legendContent:u});if(!K)return null;var U=K.item,J=W7(K,XSe);return N.cloneElement(U,rt(rt({},J),{},{chartWidth:M,chartHeight:I,margin:D,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),Ar(S,"renderTooltip",function(){var T,O=S.props,R=O.children,M=O.accessibilityLayer,I=Do(R,Ii);if(!I)return null;var D=S.state,$=D.isTooltipActive,K=D.activeCoordinate,U=D.activePayload,J=D.activeLabel,V=D.offset,G=(T=I.props.active)!==null&&T!==void 0?T:$;return N.cloneElement(I,{viewBox:rt(rt({},V),{},{x:V.left,y:V.top}),active:G,label:J,payload:G?U:[],coordinate:K,accessibilityLayer:M})}),Ar(S,"renderBrush",function(T){var O=S.props,R=O.margin,M=O.data,I=S.state,D=I.offset,$=I.dataStartIndex,K=I.dataEndIndex,U=I.updateId;return N.cloneElement(T,{key:T.key||"_recharts-brush",onChange:ub(S.handleBrushChange,T.props.onChange),data:M,x:vt(T.props.x)?T.props.x:D.left,y:vt(T.props.y)?T.props.y:D.top+D.height+D.brushBottom-(R.bottom||0),width:vt(T.props.width)?T.props.width:D.width,startIndex:$,endIndex:K,updateId:"brush-".concat(U)})}),Ar(S,"renderReferenceElement",function(T,O,R){if(!T)return null;var M=S,I=M.clipPathId,D=S.state,$=D.xAxisMap,K=D.yAxisMap,U=D.offset,J=T.type.defaultProps||{},V=T.props,G=V.xAxisId,q=G===void 0?J.xAxisId:G,Y=V.yAxisId,Q=Y===void 0?J.yAxisId:Y;return N.cloneElement(T,{key:T.key||"".concat(O,"-").concat(R),xAxis:$[q],yAxis:K[Q],viewBox:{x:U.left,y:U.top,width:U.width,height:U.height},clipPathId:I})}),Ar(S,"renderActivePoints",function(T){var O=T.item,R=T.activePoint,M=T.basePoint,I=T.childIndex,D=T.isRange,$=[],K=O.props.key,U=O.item.type.defaultProps!==void 0?rt(rt({},O.item.type.defaultProps),O.item.props):O.item.props,J=U.activeDot,V=U.dataKey,G=rt(rt({index:I,dataKey:V,cx:R.x,cy:R.y,r:4,fill:MO(O.item),strokeWidth:2,stroke:"#fff",payload:R.payload,value:R.value},tr(J,!1)),c1(J));return $.push(j.renderActiveDot(J,G,"".concat(K,"-activePoint-").concat(I))),M?$.push(j.renderActiveDot(J,rt(rt({},G),{},{cx:M.x,cy:M.y}),"".concat(K,"-basePoint-").concat(I))):D&&$.push(null),$}),Ar(S,"renderGraphicChild",function(T,O,R){var M=S.filterFormatItem(T,O,R);if(!M)return null;var I=S.getTooltipEventType(),D=S.state,$=D.isTooltipActive,K=D.tooltipAxis,U=D.activeTooltipIndex,J=D.activeLabel,V=S.props.children,G=Do(V,Ii),q=M.props,Y=q.points,Q=q.isRange,F=q.baseLine,z=M.item.type.defaultProps!==void 0?rt(rt({},M.item.type.defaultProps),M.item.props):M.item.props,H=z.activeDot,X=z.hide,ne=z.activeBar,ie=z.activeShape,ce=!!(!X&&$&&G&&(H||ne||ie)),ge={};I!=="axis"&&G&&G.props.trigger==="click"?ge={onClick:ub(S.handleItemMouseEnter,T.props.onClick)}:I!=="axis"&&(ge={onMouseLeave:ub(S.handleItemMouseLeave,T.props.onMouseLeave),onMouseEnter:ub(S.handleItemMouseEnter,T.props.onMouseEnter)});var he=N.cloneElement(T,rt(rt({},M.props),ge));function ue(gt){return typeof K.dataKey=="function"?K.dataKey(gt.payload):null}if(ce)if(U>=0){var Se,je;if(K.dataKey&&!K.allowDuplicatedCategory){var Be=typeof K.dataKey=="function"?ue:"payload.".concat(K.dataKey.toString());Se=l1(Y,Be,J),je=Q&&F&&l1(F,Be,J)}else Se=Y==null?void 0:Y[U],je=Q&&F&&F[U];if(ie||ne){var $e=T.props.activeIndex!==void 0?T.props.activeIndex:U;return[N.cloneElement(T,rt(rt(rt({},M.props),ge),{},{activeIndex:$e})),null,null]}if(!yr(Se))return[he].concat(xg(S.renderActivePoints({item:M,activePoint:Se,basePoint:je,childIndex:U,isRange:Q})))}else{var oe,Xe=(oe=S.getItemByXY(S.state.activeCoordinate))!==null&&oe!==void 0?oe:{graphicalItem:he},pt=Xe.graphicalItem,Oe=pt.item,Ee=Oe===void 0?T:Oe,lt=pt.childIndex,ut=rt(rt(rt({},M.props),ge),{},{activeIndex:lt});return[N.cloneElement(Ee,ut),null,null]}return Q?[he,null,null]:[he,null]}),Ar(S,"renderCustomized",function(T,O,R){return N.cloneElement(T,rt(rt({key:"recharts-customized-".concat(R)},S.props),S.state))}),Ar(S,"renderMap",{CartesianGrid:{handler:gb,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:gb},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:gb},YAxis:{handler:gb},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((C=_.id)!==null&&C!==void 0?C:kf("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=cV(S.triggeredAfterMouseMove,(A=_.throttleDelay)!==null&&A!==void 0?A:1e3/60),S.state={},S}return lCe(j,y),aCe(j,[{key:"componentDidMount",value:function(){var C,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,A=C.children,S=C.data,T=C.height,O=C.layout,R=Do(A,Ii);if(R){var M=R.props.defaultIndex;if(!(typeof M!="number"||M<0||M>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[M]&&this.state.tooltipTicks[M].value,D=uk(this.state,S,M,I),$=this.state.tooltipTicks[M].coordinate,K=(this.state.offset.top+T)/2,U=O==="horizontal",J=U?{x:$,y:K}:{y:$,x:K},V=this.state.formattedGraphicalItems.find(function(q){var Y=q.item;return Y.type.name==="Scatter"});V&&(J=rt(rt({},J),V.props.points[M].tooltipPosition),D=V.props.points[M].tooltipPayload);var G={activeTooltipIndex:M,isTooltipActive:!0,activeLabel:I,activePayload:D,activeCoordinate:J};this.setState(G),this.renderCursor(R),this.accessibilityManager.setIndex(M)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var S,T;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0}})}return null}},{key:"componentDidUpdate",value:function(C){VA([Do(C.children,Ii)],[Do(this.props.children,Ii)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=Do(this.props.children,Ii);if(C&&typeof C.props.shared=="boolean"){var A=C.props.shared?"axis":"item";return l.indexOf(A)>=0?A:i}return i}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var A=this.container,S=A.getBoundingClientRect(),T=age(S),O={chartX:Math.round(C.pageX-T.left),chartY:Math.round(C.pageY-T.top)},R=S.width/A.offsetWidth||1,M=this.inRange(O.chartX,O.chartY,R);if(!M)return null;var I=this.state,D=I.xAxisMap,$=I.yAxisMap,K=this.getTooltipEventType(),U=Y7(this.state,this.props.data,this.props.layout,M);if(K!=="axis"&&D&&$){var J=cf(D).scale,V=cf($).scale,G=J&&J.invert?J.invert(O.chartX):null,q=V&&V.invert?V.invert(O.chartY):null;return rt(rt({},O),{},{xValue:G,yValue:q},U)}return U?rt(rt({},O),U):null}},{key:"inRange",value:function(C,A){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,T=this.props.layout,O=C/S,R=A/S;if(T==="horizontal"||T==="vertical"){var M=this.state.offset,I=O>=M.left&&O<=M.left+M.width&&R>=M.top&&R<=M.top+M.height;return I?{x:O,y:R}:null}var D=this.state,$=D.angleAxisMap,K=D.radiusAxisMap;if($&&K){var U=cf($);return W8({x:O,y:R},U)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,A=this.getTooltipEventType(),S=Do(C,Ii),T={};S&&A==="axis"&&(S.props.trigger==="click"?T={onClick:this.handleClick}:T={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var O=c1(this.props,this.handleOuterEvent);return rt(rt({},O),T)}},{key:"addListener",value:function(){P_.on(M_,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){P_.removeListener(M_,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,A,S){for(var T=this.state.formattedGraphicalItems,O=0,R=T.length;O<R;O++){var M=T[O];if(M.item===C||M.props.key===C.key||A===tu(M.item.type)&&S===M.childIndex)return M}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,A=this.state.offset,S=A.left,T=A.top,O=A.height,R=A.width;return pe.createElement("defs",null,pe.createElement("clipPath",{id:C},pe.createElement("rect",{x:S,y:T,height:O,width:R})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(A,S){var T=G7(S,2),O=T[0],R=T[1];return rt(rt({},A),{},Ar({},O,R.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(A,S){var T=G7(S,2),O=T[0],R=T[1];return rt(rt({},A),{},Ar({},O,R.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(C){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(C){var A=this.state,S=A.formattedGraphicalItems,T=A.activeItem;if(S&&S.length)for(var O=0,R=S.length;O<R;O++){var M=S[O],I=M.props,D=M.item,$=D.type.defaultProps!==void 0?rt(rt({},D.type.defaultProps),D.props):D.props,K=tu(D.type);if(K==="Bar"){var U=(I.data||[]).find(function(q){return wje(C,q)});if(U)return{graphicalItem:M,payload:U}}else if(K==="RadialBar"){var J=(I.data||[]).find(function(q){return W8(C,q)});if(J)return{graphicalItem:M,payload:J}}else if(S2(M,T)||C2(M,T)||iy(M,T)){var V=H2e({graphicalItem:M,activeTooltipItem:T,itemData:$.data}),G=$.activeIndex===void 0?V:$.activeIndex;return{graphicalItem:rt(rt({},M),{},{childIndex:G}),payload:iy(M,T)?$.data[V]:M.props.data[V]}}}return null}},{key:"render",value:function(){var C=this;if(!sM(this))return null;var A=this.props,S=A.children,T=A.className,O=A.width,R=A.height,M=A.style,I=A.compact,D=A.title,$=A.desc,K=W7(A,JSe),U=tr(K,!1);if(I)return pe.createElement(N7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},pe.createElement(GA,gp({},U,{width:O,height:R,title:D,desc:$}),this.renderClipPath(),oM(S,this.renderMap)));if(this.props.accessibilityLayer){var J,V;U.tabIndex=(J=this.props.tabIndex)!==null&&J!==void 0?J:0,U.role=(V=this.props.role)!==null&&V!==void 0?V:"application",U.onKeyDown=function(q){C.accessibilityManager.keyboardEvent(q)},U.onFocus=function(){C.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return pe.createElement(N7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},pe.createElement("div",gp({className:Pr("recharts-wrapper",T),style:rt({position:"relative",cursor:"default",width:O,height:R},M)},G,{ref:function(Y){C.container=Y}}),pe.createElement(GA,gp({},U,{width:O,height:R,title:D,desc:$,style:mCe}),this.renderClipPath(),oM(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(N.Component);Ar(b,"displayName",r),Ar(b,"defaultProps",rt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Ar(b,"getDerivedStateFromProps",function(y,j){var _=y.dataKey,C=y.data,A=y.children,S=y.width,T=y.height,O=y.layout,R=y.stackOffset,M=y.margin,I=j.dataStartIndex,D=j.dataEndIndex;if(j.updateId===void 0){var $=X7(y);return rt(rt(rt({},$),{},{updateId:0},g(rt(rt({props:y},$),{},{updateId:0}),j)),{},{prevDataKey:_,prevData:C,prevWidth:S,prevHeight:T,prevLayout:O,prevStackOffset:R,prevMargin:M,prevChildren:A})}if(_!==j.prevDataKey||C!==j.prevData||S!==j.prevWidth||T!==j.prevHeight||O!==j.prevLayout||R!==j.prevStackOffset||!Np(M,j.prevMargin)){var K=X7(y),U={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},J=rt(rt({},Y7(j,C,O)),{},{updateId:j.updateId+1}),V=rt(rt(rt({},K),U),J);return rt(rt(rt({},V),g(rt({props:y},V),j)),{},{prevDataKey:_,prevData:C,prevWidth:S,prevHeight:T,prevLayout:O,prevStackOffset:R,prevMargin:M,prevChildren:A})}if(!VA(A,j.prevChildren)){var G,q,Y,Q,F=Do(A,ag),z=F&&(G=(q=F.props)===null||q===void 0?void 0:q.startIndex)!==null&&G!==void 0?G:I,H=F&&(Y=(Q=F.props)===null||Q===void 0?void 0:Q.endIndex)!==null&&Y!==void 0?Y:D,X=z!==I||H!==D,ne=!yr(C),ie=ne&&!X?j.updateId:j.updateId+1;return rt(rt({updateId:ie},g(rt(rt({props:y},j),{},{updateId:ie,dataStartIndex:z,dataEndIndex:H}),j)),{},{prevChildren:A,dataStartIndex:z,dataEndIndex:H})}return null}),Ar(b,"renderActiveDot",function(y,j,_){var C;return N.isValidElement(y)?C=N.cloneElement(y,j):wr(y)?C=y(j):C=pe.createElement(Wy,j),pe.createElement(Ur,{className:"recharts-active-dot",key:_},C)});var v=N.forwardRef(function(j,_){return pe.createElement(b,gp({},j,{ref:_}))});return v.displayName=b.displayName,v},Vh=M2({chartName:"LineChart",GraphicalChild:go,axisComponents:[{axisType:"xAxis",AxisComp:ji},{axisType:"yAxis",AxisComp:Dl}],formatAxisMap:LO}),Vg=M2({chartName:"BarChart",GraphicalChild:po,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ji},{axisType:"yAxis",AxisComp:Dl}],formatAxisMap:LO}),SCe=M2({chartName:"PieChart",GraphicalChild:ju,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:N2},{axisType:"radiusAxis",AxisComp:j2}],formatAxisMap:L0e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),CCe=M2({chartName:"ComposedChart",GraphicalChild:[go,Rf,po,R2],axisComponents:[{axisType:"xAxis",AxisComp:ji},{axisType:"yAxis",AxisComp:Dl},{axisType:"zAxis",AxisComp:T2}],formatAxisMap:LO});const _Ce={light:"",dark:".dark"},IG=N.createContext(null);function $G(){const e=N.useContext(IG);if(!e)throw new Error("useChart must be used within a <ChartContainer />");return e}const id=N.forwardRef(({id:e,className:t,children:r,config:a,...s},i)=>{const o=N.useId(),l=`chart-${e||o.replace(/:/g,"")}`;return n.jsx(IG.Provider,{value:{config:a},children:n.jsxs("div",{"data-chart":l,ref:i,className:Ye("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",t),...s,children:[n.jsx(ACe,{id:l,config:a}),n.jsx(Cl,{children:r})]})})});id.displayName="Chart";const ACe=({id:e,config:t})=>{const r=Object.entries(t).filter(([,a])=>a.theme||a.color);return r.length?n.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(_Ce).map(([a,s])=>`
${s} [data-chart=${e}] {
${r.map(([i,o])=>{var d;const l=((d=o.theme)==null?void 0:d[a])||o.color;return l?`  --color-${i}: ${l};`:null}).join(`
`)}
}
`).join(`
`)}}):null},xf=Ii,FG=N.forwardRef(({active:e,payload:t,className:r,indicator:a="dot",hideLabel:s=!1,hideIndicator:i=!1,label:o,labelFormatter:l,labelClassName:d,formatter:u,color:f,nameKey:m,labelKey:p},g)=>{const{config:b}=$G(),v=N.useMemo(()=>{var S;if(s||!(t!=null&&t.length))return null;const[j]=t,_=`${p||(j==null?void 0:j.dataKey)||(j==null?void 0:j.name)||"value"}`,C=fk(b,j,_),A=!p&&typeof o=="string"?((S=b[o])==null?void 0:S.label)||o:C==null?void 0:C.label;return l?n.jsx("div",{className:Ye("font-medium",d),children:l(A,t)}):A?n.jsx("div",{className:Ye("font-medium",d),children:A}):null},[o,l,t,s,d,b,p]);if(!e||!(t!=null&&t.length))return null;const y=t.length===1&&a!=="dot";return n.jsxs("div",{ref:g,className:Ye("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",r),children:[y?null:v,n.jsx("div",{className:"grid gap-1.5",children:t.map((j,_)=>{const C=`${m||j.name||j.dataKey||"value"}`,A=fk(b,j,C),S=f||j.payload.fill||j.color;return n.jsx("div",{className:Ye("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",a==="dot"&&"items-center"),children:u&&(j==null?void 0:j.value)!==void 0&&j.name?u(j.value,j.name,j,_,j.payload):n.jsxs(n.Fragment,{children:[A!=null&&A.icon?n.jsx(A.icon,{}):!i&&n.jsx("div",{className:Ye("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":a==="dot","w-1":a==="line","w-0 border-[1.5px] border-dashed bg-transparent":a==="dashed","my-0.5":y&&a==="dashed"}),style:{"--color-bg":S,"--color-border":S}}),n.jsxs("div",{className:Ye("flex flex-1 justify-between leading-none",y?"items-end":"items-center"),children:[n.jsxs("div",{className:"grid gap-1.5",children:[y?v:null,n.jsx("span",{className:"text-muted-foreground",children:(A==null?void 0:A.label)||j.name})]}),j.value&&n.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:j.value.toLocaleString()})]})]})},j.dataKey)})})]})});FG.displayName="ChartTooltip";const kCe=N.forwardRef(({className:e,hideIcon:t=!1,payload:r,verticalAlign:a="bottom",nameKey:s},i)=>{const{config:o}=$G();return r!=null&&r.length?n.jsx("div",{ref:i,className:Ye("flex items-center justify-center gap-4",a==="top"?"pb-3":"pt-3",e),children:r.map(l=>{const d=`${s||l.dataKey||"value"}`,u=fk(o,l,d);return n.jsxs("div",{className:Ye("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[u!=null&&u.icon&&!t?n.jsx(u.icon,{}):n.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:l.color}}),u==null?void 0:u.label]},l.value)})}):null});kCe.displayName="ChartLegend";function fk(e,t,r){if(typeof t!="object"||t===null)return;const a="payload"in t&&typeof t.payload=="object"&&t.payload!==null?t.payload:void 0;let s=r;return r in t&&typeof t[r]=="string"?s=t[r]:a&&r in a&&typeof a[r]=="string"&&(s=a[r]),s in e?e[s]:e[r]}function OCe({days:e=30,onConfigureClick:t}){const{tenant:r}=Fr(),[a,s]=N.useState(e),i=N.useMemo(()=>mue(r.tenantId,a),[r.tenantId,a]),o=Xj(r.tenantId),l=N.useMemo(()=>{if(i.trends.length<2)return"stable";const u=Math.floor(i.trends.length/2),f=i.trends.slice(0,u),m=i.trends.slice(u),p=f.reduce((b,v)=>b+v.count,0)/f.length,g=m.reduce((b,v)=>b+v.count,0)/m.length;return g>p*1.2?"increasing":g<p*.8?"decreasing":"stable"},[i.trends]),d=u=>u>=30?"text-red-600 dark:text-red-400":u>=15?"text-orange-600 dark:text-orange-400":u>=5?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400";return n.jsxs(Ae,{className:"rounded-2xl shadow-sm hover:shadow-md transition-shadow",children:[n.jsxs(He,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:n.jsx(Fo,{className:"w-6 h-6 text-primary"})}),n.jsxs("div",{children:[n.jsx(Ge,{className:"text-xl font-bold",children:"Guardrail Auto-Adjustments"}),n.jsx(mt,{children:"Smart threshold adjustments based on breach patterns"})]})]}),t&&n.jsxs(le,{variant:"outline",size:"sm",onClick:t,className:"gap-2",children:[n.jsx(Mp,{className:"w-4 h-4"}),"Configure"]})]}),n.jsxs(Re,{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center gap-2",children:[7,30,90].map(u=>n.jsxs(le,{variant:a===u?"default":"outline",size:"sm",onClick:()=>s(u),children:[u," days"]},u))}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2 p-4 rounded-lg bg-muted/50",children:[n.jsx("div",{className:"text-2xl font-bold text-foreground",children:i.totalAdjustments}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Adjustments"}),n.jsxs("div",{className:"flex items-center gap-1",children:[l==="increasing"&&n.jsxs(n.Fragment,{children:[n.jsx($r,{className:"w-3 h-3 text-red-600 dark:text-red-400"}),n.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:"Increasing"})]}),l==="decreasing"&&n.jsxs(n.Fragment,{children:[n.jsx(fa,{className:"w-3 h-3 text-green-600 dark:text-green-400"}),n.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Decreasing"})]}),l==="stable"&&n.jsxs(n.Fragment,{children:[n.jsx(ri,{className:"w-3 h-3 text-muted-foreground"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Stable"})]})]})]}),n.jsxs("div",{className:"space-y-2 p-4 rounded-lg bg-muted/50",children:[n.jsxs("div",{className:Ye("text-2xl font-bold",d(i.avgSeverity)),children:[i.avgSeverity.toFixed(1),"%"]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Breach Severity"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(tn,{className:Ye("w-3 h-3",d(i.avgSeverity))}),n.jsx("span",{className:Ye("text-xs",d(i.avgSeverity)),children:i.avgSeverity>=30?"Critical":i.avgSeverity>=15?"Severe":i.avgSeverity>=5?"Moderate":"Minor"})]})]}),n.jsxs("div",{className:"space-y-2 p-4 rounded-lg bg-muted/50",children:[n.jsx("div",{className:"text-2xl font-bold text-foreground",children:o.breachThresholdCount}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Breach Threshold"}),n.jsx("div",{className:"flex items-center gap-1",children:n.jsxs("span",{className:"text-xs text-muted-foreground",children:[o.breachWindowDays,"d window"]})})]})]}),i.trends.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-sm font-medium text-foreground",children:"Adjustment Trend"}),n.jsx(id,{config:{},className:"h-[200px] w-full aspect-[none]",children:n.jsxs(Vh,{data:i.trends,children:[n.jsx(xf,{content:n.jsx(FG,{})}),n.jsx(ji,{dataKey:"date",tickFormatter:u=>{const f=new Date(u);return`${f.getMonth()+1}/${f.getDate()}`},stroke:"hsl(var(--muted-foreground))",fontSize:12}),n.jsx(go,{type:"monotone",dataKey:"count",stroke:"hsl(var(--chart-1))",strokeWidth:2,dot:{fill:"hsl(var(--chart-1))",r:4}})]})})]}),i.topMetrics.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"text-sm font-medium text-foreground",children:"Most Adjusted Metrics"}),n.jsx("div",{className:"space-y-2",children:i.topMetrics.map(u=>n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[n.jsx("span",{className:"text-sm font-medium text-foreground",children:u.metric}),n.jsxs(be,{variant:"outline",children:[u.count," adjustments"]})]},u.metric))})]}),n.jsxs("div",{className:"p-4 rounded-lg bg-muted/50 space-y-2",children:[n.jsx("div",{className:"text-sm font-medium text-foreground",children:"Current Configuration"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Breach Window:"})," ",n.jsxs("span",{className:"font-medium text-foreground",children:[o.breachWindowDays," days"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Breach Count:"})," ",n.jsx("span",{className:"font-medium text-foreground",children:o.breachThresholdCount})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Base Tightening:"})," ",n.jsxs("span",{className:"font-medium text-foreground",children:[(o.tighteningPercent*100).toFixed(0),"%"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Smart Adjust:"})," ",n.jsx("span",{className:"font-medium text-foreground",children:o.severityBasedAdjustment?"Enabled":"Disabled"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Email Alerts:"})," ",n.jsx("span",{className:"font-medium text-foreground",children:o.emailNotifications?"Enabled":"Disabled"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Recipients:"})," ",n.jsx("span",{className:"font-medium text-foreground",children:o.emailRecipients.length})]})]})]}),i.totalAdjustments===0&&n.jsxs("div",{className:"py-8 text-center space-y-2",children:[n.jsx(ri,{className:"w-12 h-12 mx-auto text-muted-foreground"}),n.jsx("p",{className:"text-sm font-medium text-foreground",children:"No Auto-Adjustments Yet"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Guardrails will automatically adjust when breach patterns are detected"})]})]})]})}var ECe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],TCe=ECe.reduce((e,t)=>{const r=Tj(`Primitive.${t}`),a=N.forwardRef((s,i)=>{const{asChild:o,...l}=s,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(d,{...l,ref:i})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),RCe="Separator",Z7="horizontal",PCe=["horizontal","vertical"],BG=N.forwardRef((e,t)=>{const{decorative:r,orientation:a=Z7,...s}=e,i=MCe(a)?a:Z7,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return n.jsx(TCe.div,{"data-orientation":i,...l,...s,ref:t})});BG.displayName=RCe;function MCe(e){return PCe.includes(e)}var zG=BG;const ja=N.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...a},s)=>n.jsx(zG,{ref:s,decorative:r,orientation:t,className:Ye("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...a}));ja.displayName=zG.displayName;function DCe({open:e,onOpenChange:t,onAuditEvent:r}){const{tenant:a}=Fr(),[s,i]=N.useState({breachWindowDays:90,breachThresholdCount:2,tighteningPercent:.1,severityBasedAdjustment:!0,emailNotifications:!1,emailRecipients:[]}),[o,l]=N.useState("");N.useEffect(()=>{if(e){const m=Xj(a.tenantId);i(m)}},[e,a.tenantId]);const d=()=>{pue(a.tenantId,s),r&&r("guardrail.config_updated",{tenantId:a.tenantId,config:s}),t(!1)},u=()=>{o&&!s.emailRecipients.includes(o)&&(i({...s,emailRecipients:[...s.emailRecipients,o]}),l(""))},f=m=>{i({...s,emailRecipients:s.emailRecipients.filter(p=>p!==m)})};return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(xr,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:n.jsx(Fo,{className:"w-5 h-5 text-primary"})}),n.jsxs("div",{children:[n.jsx(vr,{children:"Auto-Adjustment Configuration"}),n.jsxs(Sr,{children:["Configure guardrail auto-adjustment behavior for"," ",a.tenantName]})]})]})}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Breach Detection"}),n.jsx(Or,{className:"w-4 h-4 text-muted-foreground"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"breach-window",children:"Breach Window (days)"}),n.jsx(et,{id:"breach-window",type:"number",min:"1",max:"365",value:s.breachWindowDays,onChange:m=>i({...s,breachWindowDays:parseInt(m.target.value)||90})}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Time window to check for repeated breaches"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"breach-count",children:"Breach Threshold Count"}),n.jsx(et,{id:"breach-count",type:"number",min:"1",max:"10",value:s.breachThresholdCount,onChange:m=>i({...s,breachThresholdCount:parseInt(m.target.value)||2})}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of breaches to trigger auto-adjustment"})]})]})]}),n.jsx(ja,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Adjustment Behavior"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"tightening-percent",children:"Base Tightening Percentage"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(et,{id:"tightening-percent",type:"number",min:"1",max:"50",step:"1",value:(s.tighteningPercent*100).toFixed(0),onChange:m=>i({...s,tighteningPercent:(parseInt(m.target.value)||10)/100}),className:"w-24"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Default percentage to tighten thresholds (used when severity-based adjustment is disabled)"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{htmlFor:"severity-based",className:"cursor-pointer",children:"Severity-Based Adjustment"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Vary tightening percentage based on breach severity"})]}),n.jsx(Pa,{id:"severity-based",checked:s.severityBasedAdjustment,onCheckedChange:m=>i({...s,severityBasedAdjustment:m})})]}),s.severityBasedAdjustment&&n.jsxs("div",{className:"p-4 rounded-lg bg-muted/50 space-y-2",children:[n.jsx("div",{className:"text-sm font-medium text-foreground",children:"Severity-Based Tightening"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Minor (<5%):"}),n.jsx(be,{variant:"outline",children:"5% tightening"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Moderate (5-15%):"}),n.jsx(be,{variant:"outline",children:"10% tightening"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Severe (15-30%):"}),n.jsx(be,{variant:"outline",children:"15% tightening"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Critical (>30%):"}),n.jsx(be,{variant:"outline",children:"20% tightening"})]})]})]})]})]}),n.jsx(ja,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xh,{className:"w-4 h-4 text-primary"}),n.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Email Notifications"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{htmlFor:"email-notifications",className:"cursor-pointer",children:"Enable Email Notifications"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Send email alerts when auto-adjustments occur"})]}),n.jsx(Pa,{id:"email-notifications",checked:s.emailNotifications,onCheckedChange:m=>i({...s,emailNotifications:m})})]}),s.emailNotifications&&n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ne,{children:"Email Recipients"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(et,{type:"email",placeholder:"email@example.com",value:o,onChange:m=>l(m.target.value),onKeyDown:m=>{m.key==="Enter"&&(m.preventDefault(),u())}}),n.jsx(le,{type:"button",variant:"outline",size:"icon",onClick:u,children:n.jsx(Pn,{className:"w-4 h-4"})})]}),s.emailRecipients.length>0&&n.jsx("div",{className:"space-y-2",children:s.emailRecipients.map(m=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[n.jsx("span",{className:"text-sm text-foreground",children:m}),n.jsx(le,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>f(m),children:n.jsx(Ui,{className:"w-3 h-3"})})]},m))}),s.emailRecipients.length===0&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"No recipients added yet"})]})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),n.jsx(le,{onClick:d,children:"Save Configuration"})]})]})})}function LCe({metrics:e,className:t}){const{tenant:r}=Fr(),a=Math.floor((Date.now()-e.closedAt)/(1e3*60*60*24));if(!(a>=30))return null;const i=$h(e.decisionId).filter(m=>new Date(m.violatedAt).getTime()>=e.closedAt),o=e.actualEV!==void 0?(e.actualEV-e.baselineEV)/Math.abs(e.baselineEV)*100:null,l=e.actualRAROC!==void 0?(e.actualRAROC-e.baselineRAROC)/Math.abs(e.baselineRAROC)*100:null,d=e.actualVaR95!==void 0?(e.actualVaR95-e.baselineVaR95)/Math.abs(e.baselineVaR95)*100:null,u=e.actualUtility!==void 0?(e.actualUtility-e.baselineUtility)/Math.abs(e.baselineUtility)*100:null,f=e.narrativeSummary||ICe({evDelta:o,rarocDelta:l,utilityDelta:u,violations:i.length,daysSinceClose:a,chosenOptionLabel:e.chosenOptionLabel});return n.jsxs(Ae,{className:Ye("rounded-2xl shadow-sm border-2 border-primary/20",t),children:[n.jsx(He,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"space-y-1 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ge,{className:"text-lg font-bold",children:"What We Learned So Far"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),n.jsx(St,{className:"max-w-xs",children:n.jsx("p",{children:"Shows how the real world compared to what we expected."})})]})})]}),n.jsxs(mt,{children:[e.decisionTitle,"  ",e.chosenOptionLabel," "," ",a," days post-decision"]})]}),n.jsx(be,{variant:"outline",className:"bg-primary/5 text-primary border-primary/20",children:"30-Day Snapshot"})]})}),n.jsxs(Re,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"Key Metrics vs Baseline"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsx(L_,{label:"Expected Value",baseline:e.baselineEV,actual:e.actualEV,delta:o,format:"currency",higherIsBetter:!0}),n.jsx(L_,{label:"RAROC",baseline:e.baselineRAROC,actual:e.actualRAROC,delta:l,format:"decimal",higherIsBetter:!0}),n.jsx(L_,{label:"VaR95",baseline:e.baselineVaR95,actual:e.actualVaR95,delta:d,format:"currency",higherIsBetter:!1})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"Guardrail Performance"}),n.jsx("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-muted/50 border border-border",children:i.length===0?n.jsxs(n.Fragment,{children:[n.jsx(ba,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm font-medium text-foreground",children:"No Breaches Detected"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"All guardrails remained within acceptable thresholds"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(tn,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"text-sm font-medium text-foreground",children:[i.length," ",i.length===1?"Breach":"Breaches"," Detected"]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[i.filter(m=>m.alertLevel==="critical").length," ","critical,"," ",i.filter(m=>m.alertLevel==="caution").length," ","caution,"," ",i.filter(m=>m.alertLevel==="info").length," ","info"]})]}),n.jsx(be,{variant:"destructive",className:"flex-shrink-0",children:i.length})]})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"Updated Utility Score"}),n.jsx("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-muted/50 border border-border",children:n.jsxs("div",{className:"flex-1 space-y-1",children:[n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsx("span",{className:"text-2xl font-bold text-foreground",children:e.actualUtility!==void 0?e.actualUtility.toFixed(2):e.baselineUtility.toFixed(2)}),u!==null&&n.jsxs("span",{className:Ye("text-sm font-medium flex items-center gap-1",u>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[u>=0?n.jsx($r,{className:"w-3 h-3"}):n.jsx(fa,{className:"w-3 h-3"}),Math.abs(u).toFixed(1),"%"]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Baseline: ",e.baselineUtility.toFixed(2),e.actualUtility===void 0&&" (actual data pending)"]})]})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"Narrative Summary"}),n.jsx("div",{className:"p-4 rounded-lg bg-primary/5 border border-primary/20",children:n.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:f})})]})]})]})}function L_({label:e,baseline:t,actual:r,delta:a,format:s,higherIsBetter:i}){const o=u=>{switch(s){case"currency":return`$${u.toFixed(0)}K`;case"decimal":return u.toFixed(4);case"percentage":return`${u.toFixed(1)}%`;default:return u.toFixed(2)}},l=a!==null&&a>=0,d=i?l:!l;return n.jsxs("div",{className:"p-3 rounded-lg border border-border bg-background space-y-2",children:[n.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:e}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsx("span",{className:"text-lg font-bold text-foreground",children:r!==void 0?o(r):"Pending"}),a!==null&&n.jsxs("span",{className:Ye("text-xs font-medium flex items-center gap-0.5",d?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[l?n.jsx($r,{className:"w-3 h-3"}):n.jsx(fa,{className:"w-3 h-3"}),Math.abs(a).toFixed(1),"%"]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Baseline: ",o(t)]})]})]})}function ICe(e){const{evDelta:t,rarocDelta:r,utilityDelta:a,violations:s,daysSinceClose:i,chosenOptionLabel:o}=e,l=[];return l.push(`After ${i} days of monitoring "${o}",`),t!==null&&r!==null?t>5&&r>5?l.push("the decision is performing better than expected."):t<-5||r<-5?l.push("the decision is underperforming against baseline expectations."):l.push("the decision is tracking close to baseline expectations."):l.push("we are still collecting actual outcome data."),t!==null&&Math.abs(t)>10&&l.push(`Expected Value has ${t>0?"exceeded":"fallen short of"} projections by ${Math.abs(t).toFixed(1)}%.`),r!==null&&Math.abs(r)>10&&l.push(`Risk-adjusted returns are ${r>0?"outperforming":"underperforming"} by ${Math.abs(r).toFixed(1)}%.`),s===0?l.push("All guardrails have remained within acceptable thresholds, indicating stable risk management."):s<=2?l.push(`${s} guardrail ${s===1?"breach has":"breaches have"} been detected, suggesting minor deviations from expected risk parameters.`):l.push(`${s} guardrail breaches have been detected, indicating significant deviations that warrant attention.`),a!==null&&(a>5?l.push("Overall utility score has improved, reflecting better-than-expected value delivery."):a<-5&&l.push("Overall utility score has declined, suggesting the need for corrective action or strategy adjustment.")),t===null&&r===null?l.push("Continue monitoring as actual data becomes available."):(t||0)<-10||(r||0)<-10||s>2?l.push("Recommend review and potential intervention."):l.push("Continue monitoring and maintain current course."),l.join(" ")}function $Ce(e,t,r,a,s="tracking"){const i={decisionId:e,decisionTitle:t,chosenOptionLabel:r,closedAt:a,baselineEV:1500,baselineRAROC:.085,baselineVaR95:-450,baselineUtility:1250};switch(s){case"outperforming":return{...i,actualEV:1725,actualRAROC:.0935,actualVaR95:-420,actualUtility:1380};case"underperforming":return{...i,actualEV:1280,actualRAROC:.072,actualVaR95:-510,actualUtility:1090};case"tracking":return{...i,actualEV:1520,actualRAROC:.0865,actualVaR95:-455,actualUtility:1270};case"pending":default:return i}}var D2="Tabs",[FCe]=ai(D2,[Pg]),qG=Pg(),[BCe,HO]=FCe(D2),UG=N.forwardRef((e,t)=>{const{__scopeTabs:r,value:a,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:d="automatic",...u}=e,f=Jh(l),[m,p]=Nl({prop:a,onChange:s,defaultProp:i??"",caller:D2});return n.jsx(BCe,{scope:r,baseId:yl(),value:m,onValueChange:p,orientation:o,dir:f,activationMode:d,children:n.jsx(ar.div,{dir:f,"data-orientation":o,...u,ref:t})})});UG.displayName=D2;var VG="TabsList",HG=N.forwardRef((e,t)=>{const{__scopeTabs:r,loop:a=!0,...s}=e,i=HO(VG,r),o=qG(r);return n.jsx(b3,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:a,children:n.jsx(ar.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});HG.displayName=VG;var GG="TabsTrigger",WG=N.forwardRef((e,t)=>{const{__scopeTabs:r,value:a,disabled:s=!1,...i}=e,o=HO(GG,r),l=qG(r),d=XG(o.baseId,a),u=JG(o.baseId,a),f=a===o.value;return n.jsx(j3,{asChild:!0,...l,focusable:!s,active:f,children:n.jsx(ar.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...i,ref:t,onMouseDown:yt(e.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?o.onValueChange(a):m.preventDefault()}),onKeyDown:yt(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(a)}),onFocus:yt(e.onFocus,()=>{const m=o.activationMode!=="manual";!f&&!s&&m&&o.onValueChange(a)})})})});WG.displayName=GG;var KG="TabsContent",YG=N.forwardRef((e,t)=>{const{__scopeTabs:r,value:a,forceMount:s,children:i,...o}=e,l=HO(KG,r),d=XG(l.baseId,a),u=JG(l.baseId,a),f=a===l.value,m=N.useRef(f);return N.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),n.jsx(Cs,{present:s||f,children:({present:p})=>n.jsx(ar.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!p,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:p&&i})})});YG.displayName=KG;function XG(e,t){return`${e}-trigger-${t}`}function JG(e,t){return`${e}-content-${t}`}var zCe=UG,ZG=HG,QG=WG,eW=YG;const si=zCe,zs=N.forwardRef(({className:e,...t},r)=>n.jsx(ZG,{ref:r,className:Ye("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));zs.displayName=ZG.displayName;const hr=N.forwardRef(({className:e,...t},r)=>n.jsx(QG,{ref:r,className:Ye("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));hr.displayName=QG.displayName;const Cr=N.forwardRef(({className:e,...t},r)=>n.jsx(eW,{ref:r,className:Ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Cr.displayName=eW.displayName;function GO({open:e,onOpenChange:t,decisionTitle:r,decisionDate:a,chosenOption:s,outcomeData:i,adjustmentData:o,timelineEvents:l,metricsHistory:d,decisionId:u}){const[f,m]=N.useState(0),[p,g]=N.useState(!0),[b,v]=N.useState("cycle"),[y,j]=N.useState(null);N.useEffect(()=>{if(!e){m(0),g(!0);return}if(!p)return;const I=setInterval(()=>{m(D=>(D+1)%3)},2e3);return()=>clearInterval(I)},[e,p]);const _=l||[{id:"1",type:"decision",date:a,title:"Decision Finalized",description:`Chose ${s}`,metrics:{expectedValue:100}},...i!=null&&i.logged?[{id:"2",type:"outcome",date:i.date||a+360*60*60*1e3,title:"Outcome Logged",description:i.summary||"Actual results recorded",metrics:{expectedValue:100,actualValue:Math.random()>.5?115:92,variance:Math.random()>.5?15:-8}}]:[],...o&&o.count>0?[{id:"3",type:"adjustment",date:o.date||a+480*60*60*1e3,title:"Guardrails Adjusted",description:o.lastAdjustment||`${o.count} adjustment(s) applied`,metrics:{expectedValue:100,actualValue:Math.random()>.5?115:92,variance:Math.random()>.5?15:-8}}]:[]],C=d||[{month:"Month 1",expected:100,actual:98,variance:-2},{month:"Month 2",expected:105,actual:110,variance:5},{month:"Month 3",expected:110,actual:115,variance:5},{month:"Month 4",expected:115,actual:112,variance:-3},{month:"Month 5",expected:120,actual:125,variance:5},{month:"Month 6",expected:125,actual:130,variance:5}],A=()=>{g(!p)},S=()=>{m(I=>(I+1)%3)},T=()=>{m(I=>(I-1+3)%3)},O=()=>{const I={decisionId:u||"unknown",decisionTitle:r,chosenOption:s,decisionDate:new Date(a).toISOString(),timeline:_,metrics:C,summary:{totalEvents:_.length,outcomeLogged:(i==null?void 0:i.logged)||!1,adjustmentsMade:(o==null?void 0:o.count)||0,averageVariance:C.reduce((U,J)=>U+J.variance,0)/C.length}},D=new Blob([JSON.stringify(I,null,2)],{type:"application/json"}),$=URL.createObjectURL(D),K=document.createElement("a");K.href=$,K.download=`feedback-loop-${u||"export"}-${Date.now()}.json`,document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL($)},R=I=>new Date(I).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),M=[{id:"decision",label:"What we did",title:"Decision",icon:ri,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/30",borderColor:"border-blue-300 dark:border-blue-700",content:n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-sm font-medium text-foreground",children:r}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Chose: ",s]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:R(a)})]})},{id:"outcome",label:"What happened",title:"Outcome",icon:$r,color:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30",borderColor:"border-green-300 dark:border-green-700",content:i!=null&&i.logged?n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-sm font-medium text-foreground",children:"Outcome Logged"}),i.summary&&n.jsx("div",{className:"text-xs text-muted-foreground",children:i.summary}),i.date&&n.jsx("div",{className:"text-xs text-muted-foreground",children:R(i.date)})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Awaiting Outcome"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Log actual results from signals/incidents"})]})},{id:"adjustment",label:"What changed",title:"Adjustment",icon:$i,color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-100 dark:bg-purple-900/30",borderColor:"border-purple-300 dark:border-purple-700",content:o&&o.count>0?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"text-sm font-medium text-foreground",children:[o.count," Adjustment",o.count>1?"s":""]}),o.lastAdjustment&&n.jsx("div",{className:"text-xs text-muted-foreground",children:o.lastAdjustment}),o.date&&n.jsx("div",{className:"text-xs text-muted-foreground",children:R(o.date)})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"No Adjustments Yet"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Guardrails auto-adjust based on outcomes"})]})}];return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[n.jsx(xr,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx($i,{className:"w-5 h-5 text-primary"}),"Feedback Loop"]}),n.jsx(Sr,{children:"How we learn and adapt"})]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:O,children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Export"]})]})}),n.jsxs(si,{value:b,onValueChange:v,className:"py-6",children:[n.jsxs(zs,{className:"grid w-full grid-cols-3",children:[n.jsxs(hr,{value:"cycle",children:[n.jsx($i,{className:"w-4 h-4 mr-2"}),"Cycle View"]}),n.jsxs(hr,{value:"timeline",children:[n.jsx(vc,{className:"w-4 h-4 mr-2"}),"Timeline"]}),n.jsxs(hr,{value:"metrics",children:[n.jsx(Rp,{className:"w-4 h-4 mr-2"}),"Metrics"]})]}),n.jsxs(Cr,{value:"cycle",className:"space-y-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"grid grid-cols-3 gap-8",children:M.map((I,D)=>{const $=I.icon,K=f===D;return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:Ye("w-20 h-20 rounded-full border-4 flex items-center justify-center transition-all duration-500",K?`${I.bgColor} ${I.borderColor} scale-110 shadow-lg`:"bg-muted border-border scale-100"),children:n.jsx($,{className:Ye("w-10 h-10 transition-colors duration-500",K?I.color:"text-muted-foreground")})}),n.jsx(be,{variant:K?"default":"outline",className:"mt-3 text-xs",children:I.label})]}),n.jsx("div",{className:"text-center",children:n.jsx("div",{className:Ye("text-sm font-semibold transition-colors duration-500",K?"text-foreground":"text-muted-foreground"),children:I.title})}),D<M.length-1&&n.jsx("div",{className:"absolute top-10 flex items-center justify-center",style:{left:`${(D+1)*33.33-8}%`,width:"16%"},children:n.jsx(Eh,{className:Ye("w-8 h-8 transition-all duration-500",f===D?"text-primary scale-125":"text-muted-foreground scale-100")})})]},I.id)})}),n.jsx("div",{className:"mt-8 flex items-center justify-center",children:n.jsxs("div",{className:Ye("flex items-center gap-2 px-4 py-2 rounded-full border-2 transition-all duration-500",f===2?"border-primary bg-primary/10 scale-110":"border-border bg-muted scale-100"),children:[n.jsx($i,{className:Ye("w-4 h-4 transition-colors duration-500",f===2?"text-primary":"text-muted-foreground")}),n.jsx("span",{className:Ye("text-xs font-medium transition-colors duration-500",f===2?"text-primary":"text-muted-foreground"),children:"Continuous Learning"})]})})]}),n.jsx("div",{className:"mt-8 grid grid-cols-3 gap-4",children:M.map((I,D)=>{const $=f===D;return n.jsx("div",{className:Ye("p-4 rounded-lg border transition-all duration-500",$?`${I.borderColor} ${I.bgColor}`:"border-border bg-muted/50"),children:I.content},I.id)})}),n.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6",children:[n.jsx(le,{variant:"outline",size:"sm",onClick:T,children:n.jsx(Are,{className:"w-4 h-4"})}),n.jsx(le,{variant:"outline",size:"sm",onClick:A,children:p?n.jsx(are,{className:"w-4 h-4"}):n.jsx(s3,{className:"w-4 h-4"})}),n.jsx(le,{variant:"outline",size:"sm",onClick:S,children:n.jsx(Ore,{className:"w-4 h-4"})})]}),n.jsx("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{className:"text-foreground",children:"How it works:"})," When you finalize a decision, we track the actual outcomes through signals and incidents. If outcomes differ from expectations, our system automatically adjusts guardrails to improve future decisions. This creates a continuous learning cycle."]})})]}),n.jsxs(Cr,{value:"timeline",className:"space-y-4",children:[n.jsx("div",{className:"space-y-4",children:_.map((I,D)=>{const $=(y==null?void 0:y.id)===I.id,K=I.type==="decision"?ri:I.type==="outcome"?$r:I.type==="adjustment"?$i:cs,U=I.type==="decision"?"text-blue-600 dark:text-blue-400":I.type==="outcome"?"text-green-600 dark:text-green-400":I.type==="adjustment"?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400",J=I.type==="decision"?"bg-blue-100 dark:bg-blue-900/30":I.type==="outcome"?"bg-green-100 dark:bg-green-900/30":I.type==="adjustment"?"bg-purple-100 dark:bg-purple-900/30":"bg-orange-100 dark:bg-orange-900/30";return n.jsxs("div",{className:"relative",children:[D<_.length-1&&n.jsx("div",{className:"absolute left-6 top-12 w-0.5 h-8 bg-border"}),n.jsx(Ae,{className:Ye("cursor-pointer transition-all hover:shadow-md",$&&"ring-2 ring-primary"),onClick:()=>j(I),children:n.jsx(Re,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:Ye("w-12 h-12 rounded-full flex items-center justify-center",J),children:n.jsx(K,{className:Ye("w-6 h-6",U)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("h4",{className:"text-sm font-semibold text-foreground",children:I.title}),n.jsx("span",{className:"text-xs text-muted-foreground",children:R(I.date)})]}),n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:I.description}),I.metrics&&n.jsxs("div",{className:"flex gap-4 text-xs",children:[I.metrics.expectedValue!==void 0&&n.jsxs("div",{children:[n.jsxs("span",{className:"text-muted-foreground",children:["Expected:"," "]}),n.jsx("span",{className:"font-medium text-foreground",children:I.metrics.expectedValue})]}),I.metrics.actualValue!==void 0&&n.jsxs("div",{children:[n.jsxs("span",{className:"text-muted-foreground",children:["Actual:"," "]}),n.jsx("span",{className:"font-medium text-foreground",children:I.metrics.actualValue})]}),I.metrics.variance!==void 0&&n.jsxs("div",{children:[n.jsxs("span",{className:"text-muted-foreground",children:["Variance:"," "]}),n.jsxs("span",{className:Ye("font-medium",I.metrics.variance>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[I.metrics.variance>0?"+":"",I.metrics.variance,"%"]})]})]})]})]})})})]},I.id)})}),y&&n.jsxs(Ae,{className:"border-primary",children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-base",children:"Event Details"})}),n.jsxs(Re,{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Type:"," "]}),n.jsx(be,{variant:"outline",children:y.type})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Date:"," "]}),n.jsx("span",{className:"text-sm text-foreground",children:new Date(y.date).toLocaleString()})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Description:"," "]}),n.jsx("p",{className:"text-sm text-foreground mt-1",children:y.description})]}),y.metrics&&n.jsxs("div",{children:[n.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Metrics:"," "]}),n.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-4",children:[y.metrics.expectedValue!==void 0&&n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Expected"}),n.jsx("div",{className:"text-lg font-bold text-foreground",children:y.metrics.expectedValue})]}),y.metrics.actualValue!==void 0&&n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Actual"}),n.jsx("div",{className:"text-lg font-bold text-foreground",children:y.metrics.actualValue})]}),y.metrics.variance!==void 0&&n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Variance"}),n.jsxs("div",{className:Ye("text-lg font-bold",y.metrics.variance>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[y.metrics.variance>0?"+":"",y.metrics.variance,"%"]})]})]})]})]})]})]}),n.jsxs(Cr,{value:"metrics",className:"space-y-6",children:[n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Expected vs Actual Performance"}),n.jsx(mt,{children:"Tracking outcomes over time"})]}),n.jsx(Re,{children:n.jsx(id,{config:{},className:"h-[300px] w-full",children:n.jsx(Cl,{width:"100%",height:"100%",children:n.jsxs(Vh,{data:C,children:[n.jsx(hu,{strokeDasharray:"3 3",className:"stroke-border"}),n.jsx(ji,{dataKey:"month",className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),n.jsx(xf,{}),n.jsx(nd,{}),n.jsx(go,{type:"monotone",dataKey:"expected",stroke:"hsl(var(--chart-1))",strokeWidth:2,dot:{r:4},name:"Expected"}),n.jsx(go,{type:"monotone",dataKey:"actual",stroke:"hsl(var(--chart-2))",strokeWidth:2,dot:{r:4},name:"Actual"})]})})})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Performance Variance"}),n.jsx(mt,{children:"Difference between expected and actual outcomes"})]}),n.jsx(Re,{children:n.jsx(id,{config:{},className:"h-[300px] w-full",children:n.jsx(Cl,{width:"100%",height:"100%",children:n.jsxs(Vg,{data:C,children:[n.jsx(hu,{strokeDasharray:"3 3",className:"stroke-border"}),n.jsx(ji,{dataKey:"month",className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),n.jsx(xf,{}),n.jsx(nd,{}),n.jsx(po,{dataKey:"variance",fill:"hsl(var(--chart-3))",radius:[4,4,0,0],name:"Variance (%)"})]})})})})]}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{children:"Summary Statistics"})}),n.jsx(Re,{children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Avg Expected"}),n.jsx("div",{className:"text-xl font-bold text-foreground",children:(C.reduce((I,D)=>I+D.expected,0)/C.length).toFixed(1)})]}),n.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Avg Actual"}),n.jsx("div",{className:"text-xl font-bold text-foreground",children:(C.reduce((I,D)=>I+D.actual,0)/C.length).toFixed(1)})]}),n.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Avg Variance"}),n.jsxs("div",{className:Ye("text-xl font-bold",C.reduce((I,D)=>I+D.variance,0)/C.length>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[(C.reduce((I,D)=>I+D.variance,0)/C.length).toFixed(1),"%"]})]}),n.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Adjustments"}),n.jsx("div",{className:"text-xl font-bold text-foreground",children:(o==null?void 0:o.count)||0})]})]})})]})]})]})]})})}const tW="retina:incidents";function vg(e){try{const t=localStorage.getItem(tW),r=t?JSON.parse(t):[];return e?r.filter(a=>a.tenant_id===e):r}catch{return[]}}function qCe(e){localStorage.setItem(tW,JSON.stringify(e))}function UCe(e){const t={...e,id:`inc-${Date.now()}-${Math.random().toString(36).substr(2,9)}`},r=vg();return r.push(t),qCe(r),t}function VCe(e,t){const r=[];return t.forEach(a=>{if(!a.linked_signals||a.linked_signals.length===0)return;a.linked_signals.filter(i=>e.affected_signals.includes(i.signal_id)).length>0&&r.push(a)}),r}function HCe(e,t,r){if(!t.metrics)return;const a={low:.02,medium:.05,high:.1,critical:.2}[e.severity],s=Math.min(r.length*.03,.15),i=a+s,o=e.type==="market_shock"&&Math.random()>.5?i:-i;return{metric:{supply_failure:"EV",cyber_event:"VaR95",market_shock:"RAROC",regulatory_change:"CE",operational_disruption:"EV",other:"EV"}[e.type],change_percent:o*100}}function GCe(e,t){var i;const r=((i=e.linked_signals)==null?void 0:i.filter(o=>t.affected_signals.includes(o.signal_id)))||[],a=r.map(o=>o.signal_id);return{incident_id:t.id,incident_title:t.title,incident_type:t.type,severity:t.severity,affected_signals:a,impact_timestamp:t.timestamp,impact_description:WCe(t,r.length),estimated_effect:HCe(t,e,a),resolution_status:t.resolution_status,resolution_date:t.resolution_date}}function WCe(e,t){const r={supply_failure:"Supply chain disruption",cyber_event:"Cybersecurity incident",market_shock:"Market volatility event",regulatory_change:"Regulatory update",operational_disruption:"Operational issue",other:"External event"},a={low:"minor impact",medium:"moderate impact",high:"significant impact",critical:"critical impact"};return`${r[e.type]} with ${a[e.severity]} affecting ${t} linked signal${t!==1?"s":""}.`}function KCe(e,t,r){const a=VCe(e,t),s=[];return a.forEach(i=>{const o=GCe(i,e),l={...i,incident_impact:[...i.incident_impact||[],o]};s.push(l),r&&r("incident.matched",{incidentId:e.id,incidentTitle:e.title,incidentType:e.type,severity:e.severity,decisionId:i.id,decisionTitle:i.title,affectedSignals:o.affected_signals,estimatedEffect:o.estimated_effect,timestamp:Date.now()}),eue(i.id,i.title||"Untitled Decision",i.tenantId,e,o.affected_signals.length,o.estimated_effect)}),s}function YCe(e,t){const r=vg(e),a=Date.now()-10080*60*1e3,s={total:r.length,by_severity:{low:0,medium:0,high:0,critical:0},by_type:{supply_failure:0,cyber_event:0,market_shock:0,regulatory_change:0,operational_disruption:0,other:0},by_status:{ongoing:0,mitigated:0,resolved:0},recent_count:0,decisions_affected:0};r.forEach(o=>{s.by_severity[o.severity]++,s.by_type[o.type]++,s.by_status[o.resolution_status]++,o.timestamp>=a&&s.recent_count++});const i=new Set;return t.forEach(o=>{o.incident_impact&&o.incident_impact.length>0&&i.add(o.id)}),s.decisions_affected=i.size,s}function rW(e){if(vg(e).length>0)return;const r=Date.now();[{title:"Supply Chain Disruption - Port Delays",type:"supply_failure",severity:"high",timestamp:r-7200*60*1e3,description:"Major port congestion causing 2-3 week delays in shipments",affected_signals:["sig-supply-chain","sig-cost-index"],tenant_id:e,resolution_status:"mitigated",resolution_date:r-2880*60*1e3},{title:"Ransomware Attack on Partner System",type:"cyber_event",severity:"critical",timestamp:r-288*60*60*1e3,description:"Key supplier's systems compromised, affecting order processing",affected_signals:["sig-supply-chain","sig-demand-score"],tenant_id:e,resolution_status:"resolved",resolution_date:r-10080*60*1e3},{title:"Market Volatility Spike",type:"market_shock",severity:"medium",timestamp:r-4320*60*1e3,description:"Sudden 15% increase in commodity prices",affected_signals:["sig-cost-index","sig-market-volatility","sig-competitor-price"],tenant_id:e,resolution_status:"ongoing"},{title:"New Compliance Requirements",type:"regulatory_change",severity:"medium",timestamp:r-480*60*60*1e3,description:"Updated data privacy regulations requiring system changes",affected_signals:["sig-cost-index"],tenant_id:e,resolution_status:"resolved",resolution_date:r-14400*60*1e3},{title:"Customer Sentiment Drop",type:"operational_disruption",severity:"low",timestamp:r-1440*60*1e3,description:"Social media backlash following product issue",affected_signals:["sig-customer-sentiment","sig-demand-score"],tenant_id:e,resolution_status:"ongoing"}].forEach(s=>{UCe(s)})}function XCe({tenantId:e,decisions:t,onDecisionsUpdate:r,onAuditEvent:a}){const[s,i]=N.useState([]),[o,l]=N.useState(null),[d,u]=N.useState(!1);N.useEffect(()=>{rW(e),f()},[e]);const f=()=>{const v=vg(e);i(v);const y=YCe(e,t);l(y)},m={low:"bg-blue-500 dark:bg-blue-600",medium:"bg-yellow-500 dark:bg-yellow-600",high:"bg-orange-500 dark:bg-orange-600",critical:"bg-red-500 dark:bg-red-600"},p={ongoing:n.jsx(vc,{className:"w-4 h-4"}),mitigated:n.jsx(tn,{className:"w-4 h-4"}),resolved:n.jsx(ri,{className:"w-4 h-4"})},g={ongoing:"text-orange-600 dark:text-orange-400",mitigated:"text-yellow-600 dark:text-yellow-400",resolved:"text-green-600 dark:text-green-400"};if(!o)return null;const b=s.sort((v,y)=>y.timestamp-v.timestamp).slice(0,3);return n.jsxs(Ae,{className:"rounded-2xl shadow-sm",children:[n.jsx(He,{children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-orange-500/10 flex items-center justify-center",children:n.jsx(Lp,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),n.jsxs("div",{children:[n.jsx(Ge,{className:"text-xl font-bold",children:"Incident Tracking"}),n.jsx(mt,{children:"Real-world shocks affecting decisions"})]})]})})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-2xl font-bold text-foreground",children:o.total}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Incidents"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:o.by_status.ongoing}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Ongoing"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:o.by_severity.critical}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Critical"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-2xl font-bold text-foreground",children:o.decisions_affected}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Decisions Affected"})]})]}),b.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Recent Incidents"}),b.map(v=>n.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm truncate",children:v.title}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[new Date(v.timestamp).toLocaleDateString()," "," ",v.affected_signals.length," signals"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(be,{variant:"outline",className:`${m[v.severity]} text-white text-xs`,children:v.severity}),n.jsx("div",{className:g[v.resolution_status],children:p[v.resolution_status]})]})]},v.id))]}),n.jsxs(Nr,{open:d,onOpenChange:u,children:[n.jsx(ld,{asChild:!0,children:n.jsx(le,{className:"w-full",variant:"outline",children:"View All Incidents"})}),n.jsxs(gr,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Incident History"}),n.jsxs(Sr,{children:["All incidents recorded for ",e]})]}),n.jsx("div",{className:"space-y-3 mt-4",children:s.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No incidents recorded yet"}):s.sort((v,y)=>y.timestamp-v.timestamp).map(v=>n.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold text-sm",children:v.title}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:v.description})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(be,{variant:"outline",className:`${m[v.severity]} text-white`,children:v.severity})})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(be,{variant:"outline",className:"text-xs",children:v.type.replace(/_/g," ")}),n.jsxs(be,{variant:"outline",className:"text-xs",children:[v.affected_signals.length," signals"]}),n.jsxs("div",{className:Ye("flex items-center gap-1 text-xs",g[v.resolution_status]),children:[p[v.resolution_status],n.jsx("span",{className:"capitalize",children:v.resolution_status})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(v.timestamp).toLocaleString()})]})]},v.id))})]})]})]})]})}function JCe(e,t=[]){let r=[];function a(i,o){const l=N.createContext(o);l.displayName=i+"Context";const d=r.length;r=[...r,o];const u=m=>{var j;const{scope:p,children:g,...b}=m,v=((j=p==null?void 0:p[e])==null?void 0:j[d])||l,y=N.useMemo(()=>b,Object.values(b));return n.jsx(v.Provider,{value:y,children:g})};u.displayName=i+"Provider";function f(m,p){var v;const g=((v=p==null?void 0:p[e])==null?void 0:v[d])||l,b=N.useContext(g);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,f]}const s=()=>{const i=r.map(o=>N.createContext(o));return function(l){const d=(l==null?void 0:l[e])||i;return N.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return s.scopeName=e,[a,ZCe(s,...t)]}function ZCe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const a=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=a.reduce((l,{useScope:d,scopeName:u})=>{const m=d(i)[`__scope${u}`];return{...l,...m}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var QCe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nW=QCe.reduce((e,t)=>{const r=Tj(`Primitive.${t}`),a=N.forwardRef((s,i)=>{const{asChild:o,...l}=s,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(d,{...l,ref:i})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),WO="Progress",KO=100,[e_e]=JCe(WO),[t_e,r_e]=e_e(WO),aW=N.forwardRef((e,t)=>{const{__scopeProgress:r,value:a=null,max:s,getValueLabel:i=n_e,...o}=e;(s||s===0)&&!Q7(s)&&console.error(a_e(`${s}`,"Progress"));const l=Q7(s)?s:KO;a!==null&&!e$(a,l)&&console.error(s_e(`${a}`,"Progress"));const d=e$(a,l)?a:null,u=cj(d)?i(d,l):void 0;return n.jsx(t_e,{scope:r,value:d,max:l,children:n.jsx(nW.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":cj(d)?d:void 0,"aria-valuetext":u,role:"progressbar","data-state":oW(d,l),"data-value":d??void 0,"data-max":l,...o,ref:t})})});aW.displayName=WO;var sW="ProgressIndicator",iW=N.forwardRef((e,t)=>{const{__scopeProgress:r,...a}=e,s=r_e(sW,r);return n.jsx(nW.div,{"data-state":oW(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...a,ref:t})});iW.displayName=sW;function n_e(e,t){return`${Math.round(e/t*100)}%`}function oW(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function cj(e){return typeof e=="number"}function Q7(e){return cj(e)&&!isNaN(e)&&e>0}function e$(e,t){return cj(e)&&!isNaN(e)&&e<=t&&e>=0}function a_e(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${KO}\`.`}function s_e(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${KO} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var lW=aW,i_e=iW;const hy=N.forwardRef(({className:e,value:t,...r},a)=>n.jsx(lW,{ref:a,className:Ye("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...r,children:n.jsx(i_e,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));hy.displayName=lW.displayName;function Ux({label:e,value:t,icon:r,description:a,higherIsBetter:s,format:i="decimal"}){const o=()=>{const f=s?70:30,m=s?t>=f:t<=f,p=s?t>=40&&t<f:t>f&&t<=60;return m?"text-green-600 dark:text-green-400":p?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"},l=()=>{const f=s?70:30,m=s?t>=f:t<=f,p=s?t>=40&&t<f:t>f&&t<=60;return m?"bg-green-500/20":p?"bg-yellow-500/20":"bg-red-500/20"},d=()=>{const f=s?70:30,m=s?t>=f:t<=f,p=s?t>=40&&t<f:t>f&&t<=60;return m?"bg-green-500":p?"bg-yellow-500":"bg-red-500"},u=t.toFixed(1);return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:Ye("w-8 h-8 rounded-lg flex items-center justify-center",l()),children:n.jsx(r,{className:Ye("w-4 h-4",o())})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"text-sm font-medium text-foreground",children:e}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"w-3.5 h-3.5 text-muted-foreground cursor-help"})}),n.jsx(St,{className:"max-w-xs",children:n.jsx("p",{className:"text-xs",children:a})})]})})]})]}),n.jsx("span",{className:Ye("text-lg font-bold",o()),children:u})]}),n.jsx("div",{className:"relative",children:n.jsx(hy,{value:t,className:"h-2 bg-muted",indicatorClassName:d()})})]})}function o_e({metrics:e,className:t}){const r=e.antifragility_index,s=r>=80?{label:"Excellent",color:"text-green-600 dark:text-green-400"}:r>=60?{label:"Good",color:"text-green-600 dark:text-green-400"}:r>=40?{label:"Fair",color:"text-yellow-600 dark:text-yellow-400"}:{label:"Needs Attention",color:"text-red-600 dark:text-red-400"};return n.jsxs(Ae,{className:Ye("rounded-2xl shadow-sm",t),children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ge,{className:"text-xl font-bold",children:"Resilience Metrics"}),n.jsx(mt,{children:"System stability and adaptive capacity indicators"})]}),n.jsx("div",{className:"text-right",children:n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsxs("div",{className:"cursor-help",children:[n.jsx("div",{className:"text-2xl font-bold text-foreground",children:r.toFixed(1)}),n.jsx("div",{className:Ye("text-sm font-medium",s.color),children:s.label})]})}),n.jsxs(St,{className:"max-w-xs",children:[n.jsx("p",{className:"text-xs font-semibold mb-1",children:"Antifragility Index (AI)"}),n.jsx("p",{className:"text-xs",children:"Blends steadiness, adaptability, and recovery into one score."})]})]})})})]})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsx(Ux,{label:"Stability Ratio",value:e.stability_ratio,icon:wy,description:"Computed as std_dev(before)/std_dev(after), inverted if <1. Measures consistency of decision outcomes over time.",higherIsBetter:!0,format:"decimal"}),n.jsx(Ux,{label:"Learning Rate",value:e.learning_rate,icon:$r,description:"Mean change in utility over time  100. Shows how quickly the system adapts and improves from feedback.",higherIsBetter:!0,format:"decimal"}),n.jsx(Ux,{label:"Shock Absorption",value:e.shock_absorption,icon:Lp,description:"(Recovered value / Lost value)  100. Measures ability to recover from unexpected shocks and incidents.",higherIsBetter:!0,format:"decimal"}),n.jsx(Ux,{label:"Guardrail Breach Rate",value:e.guardrail_breach_rate,icon:tn,description:"(#breaches / #periods)  100. Lower values indicate better risk management and compliance.",higherIsBetter:!1,format:"decimal"}),n.jsx(Ux,{label:"Antifragility Index",value:e.antifragility_index,icon:vl,description:"Blends steadiness, adaptability, and recovery into one score. Weighted combination: 30% stability + 30% learning + 20% shock absorption - 20% breach rate.",higherIsBetter:!0,format:"decimal"})]})]})}function cW(e){if(e.length===0)return{stability_ratio:0,learning_rate:0,shock_absorption:0,guardrail_breach_rate:0,antifragility_index:0};const t=e.filter(m=>{var p;return((p=m.metrics)==null?void 0:p.raroc)!==void 0}).map(m=>m.metrics.raroc);let r=50;if(t.length>4){const m=Math.floor(t.length/2),p=t.slice(0,m),g=t.slice(m),b=j=>{const _=j.reduce((A,S)=>A+S,0)/j.length,C=j.reduce((A,S)=>A+Math.pow(S-_,2),0)/j.length;return Math.sqrt(C)},v=b(p),y=b(g);if(y>0){let j=v/y;j<1&&(j=1/j),r=Math.min(100,j*50)}}let a=0;if(t.length>=2){const m=[];for(let g=1;g<t.length;g++)m.push(t[g]-t[g-1]);const p=m.reduce((g,b)=>g+b,0)/m.length;a=Math.max(0,Math.min(100,50+p*100))}let s=70;const i=e.filter(m=>m.incidentImpacts&&m.incidentImpacts.length>0);if(i.length>0){let m=0,p=0;i.forEach(g=>{g.incidentImpacts.forEach(b=>{var j,_;const v=Math.abs(b.evDelta||0);m+=v;const y=e.findIndex(C=>C.id===g.id);y>=0&&y<e.length-1&&((j=e[y+1].metrics)==null?void 0:j.raroc)>((_=g.metrics)==null?void 0:_.raroc)&&(p+=v*.8)})}),m>0&&(s=Math.min(100,p/m*100))}const o=e.filter(m=>m.guardrailViolations!==void 0),l=o.reduce((m,p)=>m+(p.guardrailViolations||0),0),d=o.length||1,u=Math.min(100,l/d*100),f=Math.max(0,Math.min(100,.3*r+.3*a+.2*s-.2*u));return{stability_ratio:r,learning_rate:a,shock_absorption:s,guardrail_breach_rate:u,antifragility_index:f}}const l_e={excellent:80,good:60,moderate:40,needsAttention:0};function c_e(e,t=l_e){return e>=t.excellent?{stroke:"stroke-green-500",text:"text-green-600 dark:text-green-400",bg:"bg-green-500/10",label:"Excellent"}:e>=t.good?{stroke:"stroke-blue-500",text:"text-blue-600 dark:text-blue-400",bg:"bg-blue-500/10",label:"Good"}:e>=t.moderate?{stroke:"stroke-yellow-500",text:"text-yellow-600 dark:text-yellow-400",bg:"bg-yellow-500/10",label:"Moderate"}:{stroke:"stroke-red-500",text:"text-red-600 dark:text-red-400",bg:"bg-red-500/10",label:"Needs Attention"}}function d_e(e){switch(e){case"sm":return{radius:50,strokeWidth:8,fontSize:"text-2xl",labelSize:"text-xs",width:140,height:140};case"lg":return{radius:90,strokeWidth:12,fontSize:"text-5xl",labelSize:"text-base",width:240,height:240};case"md":default:return{radius:70,strokeWidth:10,fontSize:"text-4xl",labelSize:"text-sm",width:180,height:180}}}function u_e({value:e,size:t="md",thresholds:r}){const a=c_e(e,r),s=d_e(t),{radius:i,strokeWidth:o,fontSize:l,labelSize:d,width:u,height:f}=s,m=i-o/2,p=m*2*Math.PI,g=p-e/100*p,b=u/2;return n.jsxs("div",{className:"relative flex items-center justify-center",children:[n.jsxs("svg",{width:u,height:f,className:"transform -rotate-90",children:[n.jsx("circle",{cx:b,cy:b,r:m,strokeWidth:o,className:"stroke-muted fill-none"}),n.jsx("circle",{cx:b,cy:b,r:m,strokeWidth:o,strokeDasharray:`${p} ${p}`,strokeDashoffset:g,strokeLinecap:"round",className:Ye("fill-none transition-all duration-500",a.stroke)})]}),n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[n.jsx("div",{className:Ye("font-bold",a.text,l),children:Math.round(e)}),n.jsx("div",{className:Ye("text-muted-foreground font-medium",d),children:"/ 100"}),n.jsx("div",{className:Ye("mt-1 px-2 py-0.5 rounded-full text-xs font-medium",a.bg,a.text),children:a.label})]})]})}function L2({value:e,title:t,size:r="md",className:a,variant:s="card",thresholds:i}){const o=Math.max(0,Math.min(100,e)),l=n.jsx("div",{className:"flex flex-col items-center justify-center space-y-4",children:n.jsx(u_e,{value:o,size:r,thresholds:i})});return s==="inline"?n.jsx("div",{className:a,children:l}):n.jsxs(Ae,{className:Ye("rounded-2xl shadow-sm",a),children:[n.jsxs(He,{className:"text-center pb-2",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Ge,{className:"text-xl font-bold",children:t||"Antifragility Index"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),n.jsxs(St,{className:"max-w-xs",children:[n.jsx("p",{className:"text-xs font-semibold mb-1",children:"Antifragility Index (AI)"}),n.jsx("p",{className:"text-xs",children:"Higher = gains from volatility instead of being harmed by it. Measures how well this choice benefits from stress."})]})]})})]}),n.jsx(mt,{children:"How well this choice benefits from stress"})]}),n.jsx(Re,{className:"pt-4",children:l})]})}function dW(e){return`retina:portfolios:${e}`}function vo(e){try{const t=dW(e),r=localStorage.getItem(t);return r?JSON.parse(r):[]}catch(t){return console.error("Failed to load portfolios:",t),[]}}function Ky(e,t){try{const r=dW(e);localStorage.setItem(r,JSON.stringify(t))}catch(r){console.error("Failed to save portfolios:",r)}}function uW(e,t){const r=vo(e),a={id:`portfolio-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,tenantId:e,...t,createdAt:Date.now(),updatedAt:Date.now()};return r.push(a),Ky(e,r),a}function YO(e,t,r){const a=vo(e),s=a.findIndex(o=>o.id===t);if(s===-1)return null;const i={...a[s],...r,updatedAt:Date.now()};return a[s]=i,Ky(e,a),i}function fW(e,t){const r=vo(e),a=r.filter(s=>s.id!==t);return a.length===r.length?!1:(Ky(e,a),!0)}function hk(e,t,r){const a=vo(e),s=a.find(i=>i.id===t);return!s||s.decision_ids.includes(r)?!1:(s.decision_ids.push(r),s.updatedAt=Date.now(),Ky(e,a),!0)}function mk(e,t,r){const a=vo(e),s=a.find(o=>o.id===t);if(!s)return!1;const i=s.decision_ids.length;return s.decision_ids=s.decision_ids.filter(o=>o!==r),s.decision_ids.length===i?!1:(s.updatedAt=Date.now(),Ky(e,a),!0)}function t$(e,t){return vo(e).filter(a=>a.decision_ids.includes(t))}function f_e(e){const t=e.length;if(t===0)return 0;if(t===1)return 1;let r=0;for(let s=0;s<t;s++)for(let i=0;i<t;i++)r+=e[s][i];const a=1-r/(t*t);return Math.max(0,Math.min(1,a))}function h_e(e){const t=e.length,r=[];for(let a=0;a<t;a++){r[a]=[];for(let s=0;s<t;s++)if(a===s)r[a][s]=1;else{const i=e[a],o=e[s],l=1-Math.abs(i.ev-o.ev)/Math.max(Math.abs(i.ev),Math.abs(o.ev),1),d=1-Math.abs(i.var95-o.var95)/Math.max(Math.abs(i.var95),Math.abs(o.var95),1),u=1-Math.abs(i.cvar95-o.cvar95)/Math.max(Math.abs(i.cvar95),Math.abs(o.cvar95),1),f=(l+d+u)/3;r[a][s]=Math.max(0,Math.min(1,f))}}return r}function m_e(e,t){const r=e.length;if(r===0)return{var95:0,cvar95:0};if(r===1)return{var95:e[0].var95,cvar95:e[0].cvar95};let a=0,s=0;for(let u=0;u<r;u++)for(let f=u+1;f<r;f++)a+=t[u][f],s++;a=s>0?a/s:0;const i=e.map(u=>u.weight||1/r);let o=0;for(let u=0;u<r;u++){o+=Math.pow(i[u]*e[u].var95,2);for(let f=u+1;f<r;f++)o+=2*i[u]*i[f]*t[u][f]*e[u].var95*e[f].var95}const l=Math.sqrt(Math.abs(o))*(o<0?-1:1),d=l*1.15;return{var95:l,cvar95:d}}function p_e(e){const t=e.length;if(t===0)return{aggregate_expected_value:0,aggregate_var95:0,aggregate_cvar95:0,diversification_index:0,antifragility_score:0,plain_language_label:"How sturdy or spread-out this group of choices is.",computed_at:Date.now()};const r=e.reduce((f,m)=>f+(m.weight||1),0),a=e.map(f=>({...f,weight:(f.weight||1)/r})),s=a.reduce((f,m)=>f+m.ev*(m.weight||1/t),0),i=h_e(a),{var95:o,cvar95:l}=m_e(a,i),d=f_e(i),u=Math.min(100,Math.max(0,d*50+(s>0?30:0)+(Math.abs(o)<Math.abs(s)?20:0)));return{aggregate_expected_value:s,aggregate_var95:o,aggregate_cvar95:l,diversification_index:d,antifragility_score:u,plain_language_label:"How sturdy or spread-out this group of choices is.",computed_at:Date.now()}}function g_e(e,t,r){const s=vo(e).find(d=>d.id===t);if(!s)return null;const i=p_e(r),o=s.metricsHistory||[];s.metrics&&o.push({timestamp:s.metrics.computed_at,metrics:s.metrics});const l=o.slice(-30);return YO(e,t,{metrics:i,metricsHistory:l})}const x_e="retina_antifragility_history_decisions",pk="retina_antifragility_history_portfolios";function v_e(e){try{const t=localStorage.getItem(x_e);return t?JSON.parse(t).filter(a=>a.tenantId===e):[]}catch(t){return console.error("Error loading decision histories:",t),[]}}function y_e(e,t){return v_e(e).find(a=>a.decisionId===t)||null}function b_e(e){try{const t=localStorage.getItem(pk);return t?JSON.parse(t).filter(a=>a.tenantId===e):[]}catch(t){return console.error("Error loading portfolio histories:",t),[]}}function my(e,t){return b_e(e).find(a=>a.portfolioId===t)||null}function j_e(e,t,r,a){try{const s=localStorage.getItem(pk),i=s?JSON.parse(s):[],o=i.findIndex(l=>l.tenantId===e&&l.portfolioId===t);o>=0?(i[o].snapshots.push(a),i[o].updatedAt=Date.now(),i[o].portfolioName=r):i.push({portfolioId:t,portfolioName:r,tenantId:e,snapshots:[a],createdAt:Date.now(),updatedAt:Date.now()}),localStorage.setItem(pk,JSON.stringify(i))}catch(s){console.error("Error adding portfolio snapshot:",s)}}function w_e(e){if(e.length<2)return{direction:"stable",change:0,percentage:0};const t=e[0].value,a=e[e.length-1].value-t,s=a/t*100;let i="stable";return Math.abs(a)>2&&(i=a>0?"up":"down"),{direction:i,change:a,percentage:s}}function N_e(e){if(e.length===0)return{current:0,average:0,peak:0,lowest:0,volatility:0};const t=e.map(d=>d.value),r=t[t.length-1],a=t.reduce((d,u)=>d+u,0)/t.length,s=Math.max(...t),i=Math.min(...t),o=t.reduce((d,u)=>d+Math.pow(u-a,2),0)/t.length,l=Math.sqrt(o);return{current:r,average:a,peak:s,lowest:i,volatility:l}}function S_e(e){if(e.length===0)return{current:0,previous:null,trend:"stable",percentage:0};const t=[...e].sort((l,d)=>d.timestamp-l.timestamp),r=t[0].value,a=t.length>1?t[1].value:null;if(a===null)return{current:r,previous:a,trend:"stable",percentage:0};const s=r-a,i=s/a*100;let o="stable";return Math.abs(i)>2&&(o=s>0?"up":"down"),{current:r,previous:a,trend:o,percentage:i}}function I_(e){return e>=80?{label:"Excellent",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-500/10"}:e>=60?{label:"Good",color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-500/10"}:e>=40?{label:"Moderate",color:"text-yellow-600 dark:text-yellow-400",bgColor:"bg-yellow-500/10"}:{label:"Needs Attention",color:"text-red-600 dark:text-red-400",bgColor:"bg-red-500/10"}}function C_e({className:e,detailed:t=!1,onViewPortfolio:r}){const{tenant:a}=Fr(),[s,i]=N.useState(null),o=vo(a.tenantId),l=o.map(g=>{var A,S;const b=my(a.tenantId,g.id),v=(b==null?void 0:b.snapshots)||[],{current:y,previous:j,trend:_,percentage:C}=S_e(v);return{portfolio:g,currentIndex:y,previousIndex:j,trend:_,trendPercentage:C,decisionCount:((A=g.decision_ids)==null?void 0:A.length)||0,closedCount:0,openCount:((S=g.decision_ids)==null?void 0:S.length)||0,history:v}}),d=o.length,u=l.reduce((g,b)=>g+b.decisionCount,0),f=l.length>0?l.reduce((g,b)=>g+b.currentIndex,0)/l.length:0,m=l.filter(g=>g.trend==="up").length,p=l.filter(g=>g.trend==="down").length;return o.length===0?n.jsxs(Ae,{className:Ye("rounded-2xl shadow-sm",e),children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:n.jsx(pN,{className:"w-6 h-6 text-primary"})}),n.jsxs("div",{children:[n.jsx(Ge,{className:"text-xl font-bold",children:"Portfolio Trends"}),n.jsx(mt,{children:"Track antifragility across portfolios"})]})]})}),n.jsx(Re,{children:n.jsxs("div",{className:"py-8 text-center space-y-3",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"No portfolios created yet"}),n.jsx(qr,{to:"/retina/portfolios",children:n.jsxs(le,{children:[n.jsx(pN,{className:"w-4 h-4 mr-2"}),"Create Portfolio"]})})]})})]}):(s&&l.find(g=>g.portfolio.id===s),n.jsxs(Ae,{className:Ye("rounded-2xl shadow-sm",e),children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:n.jsx(pN,{className:"w-6 h-6 text-primary"})}),n.jsxs("div",{children:[n.jsx(Ge,{className:"text-xl font-bold",children:"Portfolio Trends"}),n.jsxs(mt,{children:["Antifragility metrics across ",d," portfolio",d!==1?"s":""]})]})]}),n.jsx(qr,{to:"/retina/portfolios",children:n.jsxs(le,{variant:"outline",size:"sm",children:["View All",n.jsx(Eh,{className:"w-4 h-4 ml-2"})]})})]})}),n.jsxs(Re,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Antifragility"}),n.jsx("div",{className:"text-2xl font-bold text-foreground",children:f.toFixed(1)}),n.jsx(be,{variant:"outline",className:Ye("text-xs",I_(f).color),children:I_(f).label})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Decisions"}),n.jsx("div",{className:"text-2xl font-bold text-foreground",children:u}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"across all portfolios"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Trend Status"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[n.jsx($r,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:m})]}),n.jsxs("div",{className:"flex items-center gap-1 text-red-600 dark:text-red-400",children:[n.jsx(fa,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:p})]})]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"improving / declining"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Portfolio Performance"}),t&&n.jsxs(le,{variant:"ghost",size:"sm",onClick:()=>i(null),children:[n.jsx(Rp,{className:"w-4 h-4 mr-2"}),s?"Show All":"View Charts"]})]}),n.jsx("div",{className:"space-y-2",children:l.slice(0,t?void 0:5).map(g=>{const b=I_(g.currentIndex),v=s===g.portfolio.id;return n.jsxs("div",{className:Ye("p-4 rounded-lg border border-border hover:bg-muted/50 transition-colors cursor-pointer",v&&"bg-muted/50 border-primary"),onClick:()=>{t?i(v?null:g.portfolio.id):r&&r(g.portfolio.id)},children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h4",{className:"text-sm font-medium text-foreground truncate",children:g.portfolio.portfolio_name}),n.jsxs(be,{variant:"outline",className:"text-xs",children:[g.decisionCount," decisions"]})]}),g.portfolio.description&&n.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1 mb-2",children:g.portfolio.description}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Index:"}),n.jsx("span",{className:Ye("text-sm font-semibold",b.color),children:g.currentIndex.toFixed(1)})]}),g.previousIndex!==null&&n.jsxs("div",{className:Ye("flex items-center gap-1 text-xs font-medium",g.trend==="up"&&"text-green-600 dark:text-green-400",g.trend==="down"&&"text-red-600 dark:text-red-400",g.trend==="stable"&&"text-muted-foreground"),children:[g.trend==="up"&&n.jsx($r,{className:"w-3 h-3"}),g.trend==="down"&&n.jsx(fa,{className:"w-3 h-3"}),g.trend==="stable"&&n.jsx(wl,{className:"w-3 h-3"}),n.jsxs("span",{children:[Math.abs(g.trendPercentage).toFixed(1),"%"]})]})]})]}),g.history.length>1&&n.jsx("div",{className:"w-24 h-12",children:n.jsx(Cl,{width:"100%",height:"100%",children:n.jsx(Vh,{data:g.history.slice(-7).sort((y,j)=>y.timestamp-j.timestamp),children:n.jsx(go,{type:"monotone",dataKey:"value",stroke:g.trend==="up"?"hsl(var(--chart-2))":g.trend==="down"?"hsl(var(--chart-1))":"hsl(var(--muted-foreground))",strokeWidth:2,dot:!1})})})})]}),t&&v&&g.history.length>1&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[n.jsx("div",{className:"h-48",children:n.jsx(id,{config:{},className:"w-full h-full aspect-[none]",children:n.jsx(Cl,{width:"100%",height:"100%",children:n.jsxs(Vh,{data:g.history.sort((y,j)=>y.timestamp-j.timestamp),children:[n.jsx(ji,{dataKey:"timestamp",tickFormatter:y=>new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric"}),stroke:"hsl(var(--muted-foreground))",fontSize:12}),n.jsx(Dl,{stroke:"hsl(var(--muted-foreground))",fontSize:12,domain:[0,100]}),n.jsx(go,{type:"monotone",dataKey:"value",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{fill:"hsl(var(--primary))",r:4}})]})})})}),n.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-muted-foreground",children:[n.jsxs("span",{children:[g.history.length," data point",g.history.length!==1?"s":""]}),n.jsxs("span",{children:["Last updated:"," ",new Date(Math.max(...g.history.map(y=>y.timestamp))).toLocaleDateString()]})]})]})]},g.portfolio.id)})}),!t&&l.length>5&&n.jsx(qr,{to:"/retina/portfolios",children:n.jsxs(le,{variant:"outline",className:"w-full",size:"sm",children:["View All ",l.length," Portfolios",n.jsx(Eh,{className:"w-4 h-4 ml-2"})]})})]}),t&&n.jsxs("div",{className:"pt-4 border-t border-border",children:[n.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Health Indicators"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-green-500/10",children:[n.jsx(ri,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5"}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-medium text-foreground",children:[m," Improving"]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Portfolios showing positive trends"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-red-500/10",children:[n.jsx(yn,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5"}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-medium text-foreground",children:[p," Declining"]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Portfolios needing attention"})]})]})]})]})]})]}))}function __e(e){return e>=70?"text-green-600 dark:text-green-400":e>=40?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}function A_e({value:e}){const r=2*Math.PI*60,a=r-e/100*r;return n.jsxs("div",{className:"relative w-40 h-40 mx-auto",children:[n.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 160 160",children:[n.jsx("circle",{cx:"80",cy:"80",r:60,fill:"none",stroke:"currentColor",strokeWidth:"12",className:"text-muted",opacity:"0.2"}),n.jsx("circle",{cx:"80",cy:"80",r:60,fill:"none",stroke:"currentColor",strokeWidth:"12",strokeDasharray:r,strokeDashoffset:a,strokeLinecap:"round",className:Ye("transition-all duration-1000",e>=70?"text-green-600 dark:text-green-400":e>=40?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400")})]}),n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[n.jsx("div",{className:Ye("text-4xl font-bold",e>=70?"text-green-600 dark:text-green-400":e>=40?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"),children:e.toFixed(0)}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"/ 100"})]})]})}function k_e({data:e,className:t}){const r=e.breachTrend.length>=2?e.breachTrend[e.breachTrend.length-1].count-e.breachTrend[0].count:0,a=r>0?"Increasing":r<0?"Decreasing":"Stable",s=r>0?"text-red-600 dark:text-red-400":r<0?"text-green-600 dark:text-green-400":"text-muted-foreground";return n.jsxs("div",{className:Ye("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",t),children:[n.jsxs(Ae,{className:"rounded-2xl shadow-sm",children:[n.jsxs(He,{className:"pb-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ge,{className:"text-base font-semibold",children:"Avg Antifragility"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),n.jsx(St,{children:n.jsx("p",{className:"max-w-xs",children:"Quick snapshot of system-wide antifragility. Average index across all decisions (0-100 scale)."})})]})})]}),n.jsx(mt,{className:"text-xs",children:"System-wide average"})]}),n.jsxs(Re,{className:"pt-4",children:[n.jsx(A_e,{value:e.avgAntifragility}),n.jsx("div",{className:"text-center mt-4",children:n.jsx("div",{className:Ye("text-sm font-medium",__e(e.avgAntifragility)),children:e.avgAntifragility>=70?"Excellent":e.avgAntifragility>=40?"Moderate":"Needs Attention"})})]})]}),n.jsxs(Ae,{className:"rounded-2xl shadow-sm",children:[n.jsxs(He,{className:"pb-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ge,{className:"text-base font-semibold",children:"Breach Trend"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),n.jsx(St,{children:n.jsx("p",{className:"max-w-xs",children:"Guardrail breach trend over the last 30 days. Lower is better."})})]})})]}),n.jsx(mt,{className:"text-xs",children:"Last 30 days"})]}),n.jsxs(Re,{className:"pt-4",children:[n.jsx(id,{config:{},className:"h-[140px] w-full",children:n.jsxs(Vh,{data:e.breachTrend,children:[n.jsx(xf,{content:({active:i,payload:o})=>i&&o&&o.length?n.jsx("div",{className:"rounded-lg border bg-background p-2 shadow-sm",children:n.jsxs("div",{className:"grid gap-2",children:[n.jsx("div",{className:"flex items-center justify-between gap-2",children:n.jsx("span",{className:"text-xs text-muted-foreground",children:o[0].payload.date})}),n.jsx("div",{className:"flex items-center justify-between gap-2",children:n.jsxs("span",{className:"text-xs font-medium",children:["Breaches: ",o[0].value]})})]})}):null}),n.jsx(go,{type:"monotone",dataKey:"count",stroke:"hsl(var(--chart-1))",strokeWidth:2,dot:!1})]})}),n.jsx("div",{className:"text-center mt-2",children:n.jsx("div",{className:Ye("text-sm font-medium",s),children:a})})]})]}),n.jsxs(Ae,{className:"rounded-2xl shadow-sm",children:[n.jsxs(He,{className:"pb-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ge,{className:"text-base font-semibold",children:"Top Learning Drivers"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),n.jsx(St,{children:n.jsx("p",{className:"max-w-xs",children:"Top 3 factors driving antifragility improvements across decisions."})})]})})]}),n.jsx(mt,{className:"text-xs",children:"Key improvement factors"})]}),n.jsxs(Re,{className:"pt-4",children:[n.jsx(id,{config:{},className:"h-[140px] w-full",children:n.jsxs(Vg,{data:e.topLearningDrivers,layout:"vertical",children:[n.jsx(xf,{content:({active:i,payload:o})=>i&&o&&o.length?n.jsx("div",{className:"rounded-lg border bg-background p-2 shadow-sm",children:n.jsxs("div",{className:"grid gap-2",children:[n.jsx("div",{className:"flex items-center justify-between gap-2",children:n.jsx("span",{className:"text-xs font-medium",children:o[0].payload.name})}),n.jsx("div",{className:"flex items-center justify-between gap-2",children:n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Impact: ",o[0].value,"%"]})})]})}):null}),n.jsx(po,{dataKey:"value",fill:"hsl(var(--chart-2))",radius:4})]})}),n.jsx("div",{className:"space-y-1 mt-2",children:e.topLearningDrivers.map((i,o)=>n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsxs("span",{className:"text-muted-foreground truncate",children:[o+1,". ",i.name]}),n.jsxs("span",{className:"font-medium",children:[i.value,"%"]})]},i.name))})]})]}),n.jsxs(Ae,{className:"rounded-2xl shadow-sm",children:[n.jsxs(He,{className:"pb-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ge,{className:"text-base font-semibold",children:"Resilience Tiers"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),n.jsx(St,{children:n.jsx("p",{className:"max-w-xs",children:"Distribution of decisions across resilience tiers (Excellent 70, Moderate 40-69, Low <40)."})})]})})]}),n.jsx(mt,{className:"text-xs",children:"Distribution by tier"})]}),n.jsxs(Re,{className:"pt-4",children:[n.jsx(id,{config:{},className:"h-[140px] w-full",children:n.jsxs(SCe,{children:[n.jsx(xf,{content:({active:i,payload:o})=>i&&o&&o.length?n.jsx("div",{className:"rounded-lg border bg-background p-2 shadow-sm",children:n.jsxs("div",{className:"grid gap-2",children:[n.jsx("div",{className:"flex items-center justify-between gap-2",children:n.jsx("span",{className:"text-xs font-medium",children:o[0].payload.tier})}),n.jsx("div",{className:"flex items-center justify-between gap-2",children:n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Count: ",o[0].value]})})]})}):null}),n.jsx(ju,{data:e.resilienceTiers,dataKey:"count",nameKey:"tier",cx:"50%",cy:"50%",innerRadius:40,outerRadius:60,children:e.resilienceTiers.map((i,o)=>n.jsx(cu,{fill:i.color},`cell-${o}`))})]})}),n.jsx("div",{className:"space-y-1 mt-2",children:e.resilienceTiers.map(i=>n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:i.color}}),n.jsx("span",{className:"text-muted-foreground",children:i.tier})]}),n.jsx("span",{className:"font-medium",children:i.count})]},i.tier))})]})]})]})}function O_e(e,t){const r=e.filter(g=>g.antifragilityIndex!==void 0),a=r.length>0?r.reduce((g,b)=>g+(b.antifragilityIndex||0),0)/r.length:0,s=Date.now()-720*60*60*1e3,i=t.filter(g=>g.timestamp>=s),o=[];for(let g=0;g<4;g++){const b=s+g*7*24*60*60*1e3,v=b+10080*60*1e3,y=i.filter(j=>j.timestamp>=b&&j.timestamp<v);o.push({date:`Week ${g+1}`,count:y.length})}const l={};e.forEach(g=>{g.learningTrace&&g.learningTrace.forEach(b=>{const v=b.trigger||"Unknown";l[v]=(l[v]||0)+1})});const d=Object.entries(l).sort((g,b)=>b[1]-g[1]).slice(0,3).map(([g,b])=>({name:g,value:Math.round(b/e.length*100)}));d.length===0&&d.push({name:"Signal Updates",value:45},{name:"Guardrail Adjustments",value:30},{name:"Outcome Logging",value:25});const u=r.filter(g=>(g.antifragilityIndex||0)>=70).length,f=r.filter(g=>(g.antifragilityIndex||0)>=40&&(g.antifragilityIndex||0)<70).length,m=r.filter(g=>(g.antifragilityIndex||0)<40).length,p=[{tier:"Excellent",count:u,color:"hsl(142, 76%, 36%)"},{tier:"Moderate",count:f,color:"hsl(48, 96%, 53%)"},{tier:"Low",count:m,color:"hsl(0, 84%, 60%)"}].filter(g=>g.count>0);return{avgAntifragility:a,breachTrend:o,topLearningDrivers:d,resilienceTiers:p}}const am=$3,I2=F3,E_e=B3,hW=N.forwardRef(({className:e,...t},r)=>n.jsx(Ly,{className:Ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));hW.displayName=Ly.displayName;const T_e=Sy("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Pf=N.forwardRef(({side:e="right",className:t,children:r,...a},s)=>n.jsxs(E_e,{children:[n.jsx(hW,{}),n.jsxs(Iy,{ref:s,className:Ye(T_e({side:e}),t),...a,children:[n.jsxs(Hj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[n.jsx(Ui,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]}),r]})]}));Pf.displayName=Iy.displayName;const Mf=({className:e,...t})=>n.jsx("div",{className:Ye("flex flex-col space-y-2 text-center sm:text-left",e),...t});Mf.displayName="SheetHeader";const Df=N.forwardRef(({className:e,...t},r)=>n.jsx($y,{ref:r,className:Ye("text-lg font-semibold text-foreground",e),...t}));Df.displayName=$y.displayName;const Lf=N.forwardRef(({className:e,...t},r)=>n.jsx(Fy,{ref:r,className:Ye("text-sm text-muted-foreground",e),...t}));Lf.displayName=Fy.displayName;function r$(e){switch(e){case"improving":case"decreasing":return{icon:$r,color:"text-green-600 dark:text-green-400"};case"declining":case"increasing":return{icon:fa,color:"text-red-600 dark:text-red-400"};case"stable":return{icon:Rp,color:"text-muted-foreground"}}}function R_e(e){return e>=80?{variant:"default",label:"High Confidence"}:e>=60?{variant:"secondary",label:"Medium Confidence"}:{variant:"outline",label:"Low Confidence"}}function P_e(e){switch(e){case"low":return{variant:"outline",color:"text-green-600 dark:text-green-400"};case"medium":return{variant:"secondary",color:"text-yellow-600 dark:text-yellow-400"};case"high":return{variant:"destructive",color:"text-red-600 dark:text-red-400"}}}function M_e({open:e,onOpenChange:t,trendData:r,recommendations:a,onApplyRecommendations:s,onAuditEvent:i,className:o}){const{tenantId:l}=Fr(),[d,u]=N.useState(new Set),[f,m]=N.useState(!1),p=C=>{const A=new Set(d);A.has(C)?A.delete(C):A.add(C),u(A)},g=()=>{u(new Set(a.map(C=>C.id)))},b=()=>{u(new Set)},v=()=>{if(d.size===0)return;m(!0);const C=Array.from(d),A=a.filter(S=>C.includes(S.id));i==null||i("resilience_policy_applied",{tenantId:l,timestamp:Date.now(),recommendationCount:C.length,recommendations:A.map(S=>({guardrailType:S.guardrailType,direction:S.direction,currentThreshold:S.currentThreshold,recommendedThreshold:S.recommendedThreshold}))}),s==null||s(C),setTimeout(()=>{m(!1),u(new Set),t==null||t(!1)},1e3)},y=N.useMemo(()=>{const C=a.filter(O=>O.direction==="tighten").length,A=a.filter(O=>O.direction==="loosen").length,S=a.filter(O=>O.confidence>=80).length,T=a.reduce((O,R)=>O+R.impactedDecisions,0);return{tightenCount:C,loosenCount:A,highConfidenceCount:S,totalImpactedDecisions:T}},[a]),j=r$(r.antifragilityTrend),_=r$(r.breachTrend);return n.jsx(am,{open:e,onOpenChange:t,children:n.jsxs(Pf,{side:"right",className:"w-full sm:max-w-2xl",children:[n.jsxs(Mf,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dp,{className:"h-5 w-5 text-primary"}),n.jsx(Df,{children:"Resilience Policy"})]}),n.jsx(Lf,{children:n.jsx(At,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"Auto-suggests tighter or looser limits depending on how the organization adapts."}),n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),n.jsx(St,{className:"max-w-sm",children:n.jsx("p",{children:"The system analyzes antifragility trends, breach rates, and learning patterns to recommend guardrail adjustments that align with your organization's adaptive capacity."})})]})]})})})]}),n.jsx(pu,{className:"h-[calc(100vh-12rem)] mt-6",children:n.jsxs("div",{className:"space-y-6 pr-4",children:[n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{className:"text-base",children:"Organization Resilience Trends"}),n.jsx(mt,{children:"System-wide metrics over the last 90 days"})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(j.icon,{className:`h-4 w-4 ${j.color}`}),n.jsx("span",{className:"text-sm font-medium",children:"Avg Antifragility Index"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-2xl font-bold",children:r.avgAntifragilityIndex.toFixed(0)}),n.jsx(be,{variant:"outline",className:"text-xs",children:r.antifragilityTrend})]})]}),n.jsx(ja,{}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_.icon,{className:`h-4 w-4 ${_.color}`}),n.jsx("span",{className:"text-sm font-medium",children:"Guardrail Breach Rate"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-2xl font-bold",children:[(r.breachRate*100).toFixed(1),"%"]}),n.jsx(be,{variant:"outline",className:"text-xs",children:r.breachTrend})]})]}),n.jsx(ja,{}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qi,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),n.jsx("span",{className:"text-sm font-medium",children:"Learning Rate"})]}),n.jsxs("span",{className:"text-2xl font-bold",children:[(r.learningRate*100).toFixed(0),"%"]})]}),n.jsx(ja,{}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rp,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"}),n.jsx("span",{className:"text-sm font-medium",children:"Adaptation Score"})]}),n.jsxs("span",{className:"text-2xl font-bold",children:[r.adaptationScore.toFixed(0),"/100"]})]}),n.jsx(ja,{}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r.totalDecisions}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Decisions"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r.totalPortfolios}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Portfolios"})]})]})]})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{className:"text-base",children:"Recommendations Summary"}),n.jsxs(mt,{children:[a.length," guardrail adjustments suggested"]})]}),n.jsx(Re,{children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Tighten"}),n.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:y.tightenCount})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Loosen"}),n.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:y.loosenCount})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"High Confidence"}),n.jsx("div",{className:"text-2xl font-bold",children:y.highConfidenceCount})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Impacted Decisions"}),n.jsx("div",{className:"text-2xl font-bold",children:y.totalImpactedDecisions})]})]})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold",children:"Recommended Adjustments"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(le,{variant:"ghost",size:"sm",onClick:g,children:"Select All"}),n.jsx(le,{variant:"ghost",size:"sm",onClick:b,children:"Clear"})]})]}),a.map(C=>{const A=d.has(C.id),S=R_e(C.confidence),T=P_e(C.riskLevel);return n.jsx(Ae,{className:`cursor-pointer transition-all ${A?"ring-2 ring-primary":"hover:bg-accent/50"}`,onClick:()=>p(C.id),children:n.jsx(Re,{className:"pt-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"mt-1",children:n.jsx(Pa,{checked:A,onCheckedChange:()=>p(C.id)})}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:C.guardrailType}),n.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:C.rationale})]}),n.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[n.jsx(be,{...S,children:S.label}),n.jsxs(be,{...T,className:T.color,children:[C.riskLevel," risk"]})]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Current:"}),n.jsx("span",{className:"font-mono font-semibold",children:C.currentThreshold})]}),n.jsx("div",{className:"flex items-center gap-2",children:C.direction==="tighten"?n.jsx(fa,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"}):n.jsx($r,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Recommended:"}),n.jsx("span",{className:"font-mono font-semibold",children:C.recommendedThreshold})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsx(tn,{className:"h-3 w-3"}),n.jsxs("span",{children:["Impacts ",C.impactedDecisions," decision(s)"]})]})]})]})})},C.id)})]}),a.length===0&&n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-6 text-center",children:[n.jsx(ba,{className:"h-12 w-12 text-green-600 dark:text-green-400 mx-auto mb-3"}),n.jsx("p",{className:"text-sm font-medium",children:"No adjustments needed"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Your guardrails are well-calibrated to current resilience trends."})]})})]})}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 border-t bg-background p-4",children:n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.size," of ",a.length," ","selected"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(le,{variant:"outline",onClick:()=>t==null?void 0:t(!1),children:"Cancel"}),n.jsx(le,{onClick:v,disabled:d.size===0||f,children:f?"Applying...":`Apply ${d.size} Change(s)`})]})]})})]})})}function D_e({onClick:e,className:t}){return n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsxs(le,{variant:"outline",size:"sm",onClick:e,className:t,children:[n.jsx(Dp,{className:"h-4 w-4 mr-2"}),"Resilience Policy"]})}),n.jsx(St,{children:n.jsx("p",{children:"Auto-suggests tighter or looser limits depending on how the organization adapts."})})]})})}function L_e(e){return e>=70?"bg-red-500 dark:bg-red-600":e>=50?"bg-orange-500 dark:bg-orange-600":e>=30?"bg-yellow-500 dark:bg-yellow-600":"bg-green-500 dark:bg-green-600"}function I_e(e){return"text-white"}function fh(e){return e>=70?"High":e>=50?"Medium-High":e>=30?"Medium":"Low"}const n$={financial:"Financial",operational:"Operational",market:"Market",partner:"Partner"},a$={financial:"VaR95, RAROC, capital adequacy",operational:"Process stability, execution risk",market:"External volatility, demand shifts",partner:"Counterparty risk, dependency scores"};function $_e({portfolios:e,className:t="",onCellClick:r,onOpenResiliencePolicy:a,onAuditEvent:s}){const{tenantId:i}=Fr(),[o,l]=N.useState(null),d=m=>{const p=new Date().toISOString(),g=`board-brief-fragility-${p.split("T")[0]}.${m}`;if(m==="csv"){const b=["Portfolio","Financial","Operational","Market","Partner","Decision Count"],v=e.map(C=>[C.portfolioName,C.dimensions.financial.toString(),C.dimensions.operational.toString(),C.dimensions.market.toString(),C.dimensions.partner.toString(),C.decisionCount.toString()]),y=[b,...v].map(C=>C.map(A=>`"${A}"`).join(",")).join(`
`),j=new Blob([y],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a");_.href=URL.createObjectURL(j),_.download=g,_.click(),URL.revokeObjectURL(_.href)}else console.log("PDF export would generate comprehensive board brief"),alert(`Board Brief PDF export initiated: ${g}`);s==null||s("antifragility_dashboard_exported",{tenantId:i,exportType:"board_brief",format:m,portfolioCount:e.length,timestamp:p})},u=m=>{const p=new Date().toISOString(),g=`regulatory-readiness-${p.split("T")[0]}.${m}`;if(m==="csv"){const b=["Portfolio","Financial Risk","Operational Risk","Market Risk","Partner Risk","Overall Risk Level","Compliance Status","Decision Count"],v=e.map(C=>{const A=(C.dimensions.financial+C.dimensions.operational+C.dimensions.market+C.dimensions.partner)/4,S=A>=70?"High Risk - Review Required":A>=50?"Medium Risk - Monitor":"Acceptable";return[C.portfolioName,fh(C.dimensions.financial),fh(C.dimensions.operational),fh(C.dimensions.market),fh(C.dimensions.partner),fh(A),S,C.decisionCount.toString()]}),y=[b,...v].map(C=>C.map(A=>`"${A}"`).join(",")).join(`
`),j=new Blob([y],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a");_.href=URL.createObjectURL(j),_.download=g,_.click(),URL.revokeObjectURL(_.href)}else console.log("PDF export would generate regulatory readiness report"),alert(`Regulatory Readiness Report PDF export initiated: ${g}`);s==null||s("antifragility_dashboard_exported",{tenantId:i,exportType:"regulatory_readiness",format:m,portfolioCount:e.length,timestamp:p})},f=["financial","operational","market","partner"];return e.length===0?n.jsxs(Ae,{className:t,children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ge,{children:"Where fragility still hides"}),n.jsx(mt,{children:"Bright areas = more fragile zones needing attention"})]}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{children:n.jsx(Or,{className:"h-4 w-4 text-muted-foreground"})}),n.jsx(St,{children:n.jsx("p",{className:"max-w-xs",children:"Bright areas = more fragile zones needing attention. Red indicates high fragility requiring immediate focus."})})]})})]})}),n.jsx(Re,{children:n.jsx("div",{className:"flex items-center justify-center h-32 text-muted-foreground",children:"No portfolio data available"})})]}):n.jsxs(Ae,{className:t,children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ge,{children:"Where fragility still hides"}),n.jsx(mt,{children:"Bright areas = more fragile zones needing attention"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(Fp,{children:[n.jsx(Bp,{asChild:!0,children:n.jsxs(le,{variant:"outline",size:"sm",className:"gap-2",children:[n.jsx(cs,{className:"h-4 w-4"}),"Export to Board Brief",n.jsx(qn,{className:"h-3 w-3"})]})}),n.jsxs(Lh,{align:"end",children:[n.jsxs(gc,{onClick:()=>d("pdf"),children:[n.jsx(cs,{className:"h-4 w-4 mr-2"}),"Export as PDF"]}),n.jsxs(gc,{onClick:()=>d("csv"),children:[n.jsx(cs,{className:"h-4 w-4 mr-2"}),"Export as CSV"]})]})]}),n.jsxs(Fp,{children:[n.jsx(Bp,{asChild:!0,children:n.jsxs(le,{variant:"outline",size:"sm",className:"gap-2",children:[n.jsx(wy,{className:"h-4 w-4"}),"Regulatory Readiness Report",n.jsx(qn,{className:"h-3 w-3"})]})}),n.jsxs(Lh,{align:"end",children:[n.jsxs(gc,{onClick:()=>u("pdf"),children:[n.jsx(cs,{className:"h-4 w-4 mr-2"}),"Export as PDF"]}),n.jsxs(gc,{onClick:()=>u("csv"),children:[n.jsx(cs,{className:"h-4 w-4 mr-2"}),"Export as CSV"]})]})]}),a&&n.jsx(D_e,{onClick:a}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{children:n.jsx(Or,{className:"h-4 w-4 text-muted-foreground"})}),n.jsx(St,{children:n.jsx("p",{className:"max-w-xs",children:"Bright areas = more fragile zones needing attention. Red indicates high fragility requiring immediate focus."})})]})})]})]})}),n.jsx(Re,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("div",{className:"inline-block min-w-full",children:[n.jsxs("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:`200px repeat(${f.length}, 1fr)`},children:[n.jsx("div",{className:"font-medium text-sm text-muted-foreground",children:"Portfolio"}),f.map(m=>n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("div",{className:"font-medium text-sm text-center text-muted-foreground cursor-help",children:n$[m]})}),n.jsx(St,{children:n.jsx("p",{className:"max-w-xs",children:a$[m]})})]})},m))]}),e.map(m=>n.jsxs("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:`200px repeat(${f.length}, 1fr)`},children:[n.jsx("div",{className:"flex items-center text-sm font-medium truncate",children:n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("span",{className:"truncate cursor-help",children:m.portfolioName})}),n.jsxs(St,{children:[n.jsx("p",{children:m.portfolioName}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[m.decisionCount," decision",m.decisionCount!==1?"s":""]})]})]})})}),f.map(p=>{const g=m.dimensions[p],b=(o==null?void 0:o.portfolioId)===m.portfolioId&&(o==null?void 0:o.dimension)===p;return n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("div",{className:`
                                flex items-center justify-center h-16 rounded-md
                                ${L_e(g)} ${I_e()}
                                transition-all duration-200 cursor-pointer
                                ${b?"ring-2 ring-primary ring-offset-2":""}
                                hover:scale-105
                              `,onMouseEnter:()=>l({portfolioId:m.portfolioId,dimension:p}),onMouseLeave:()=>l(null),onClick:()=>r==null?void 0:r(m.portfolioId,p),children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:g}),n.jsx("div",{className:"text-xs opacity-90",children:fh(g)})]})})}),n.jsx(St,{children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"font-medium",children:[m.portfolioName," -"," ",n$[p]]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:a$[p]}),n.jsxs("p",{className:"text-sm",children:["Fragility Score:"," ",n.jsx("span",{className:"font-bold",children:g})," (",fh(g),")"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Click to view details"})]})})]})},p)})]},m.portfolioId))]})}),n.jsxs("div",{className:"flex items-center justify-center gap-6 pt-4 border-t border-border",children:[n.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:"Fragility Level:"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded bg-green-500"}),n.jsx("span",{className:"text-xs",children:"Low (0-29)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded bg-yellow-500"}),n.jsx("span",{className:"text-xs",children:"Medium (30-49)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded bg-orange-500"}),n.jsx("span",{className:"text-xs",children:"Medium-High (50-69)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded bg-red-500"}),n.jsx("span",{className:"text-xs",children:"High (70-100)"})]})]})]})})]})}function F_e(e,t,r,a,s,i){var d,u;const o=[],l=[];t.forEach(f=>{const m=B_e(f);o.push({id:`decision-${f.id}`,type:"Decision",label:f.title||"Untitled Decision",metadata:{status:f.status,chosenOption:f.chosenOptionId,createdAt:f.createdAt,finalizedAt:f.finalizedAt},variables:m,timestamp:f.createdAt})}),r.forEach(f=>{o.push({id:`signal-${f.signalId}`,type:"RiskSignal",label:f.name,metadata:{category:f.category,currentValue:f.currentValue,trend:f.trend},variables:[f.name],timestamp:f.lastUpdated}),t.forEach(m=>{const g=(m.linkedSignals||[]).find(b=>b.signalId===f.signalId);g&&l.push({id:`signal-${f.signalId}-decision-${m.id}`,source:`signal-${f.signalId}`,target:`decision-${m.id}`,type:"LINKED_TO",weight:.8,metadata:{variableKey:g.variableKey}})})}),a.forEach(f=>{o.push({id:`incident-${f.id}`,type:"Incident",label:f.title,metadata:{severity:f.severity,category:f.category,resolved:f.resolved},timestamp:f.timestamp}),(f.affectedDecisions||[]).forEach(p=>{l.push({id:`incident-${f.id}-decision-${p}`,source:`incident-${f.id}`,target:`decision-${p}`,type:"TRIGGERED",weight:f.severity==="critical"?1:.6})})}),s.forEach(f=>{o.push({id:`outcome-${f.id}`,type:"Outcome",label:`Outcome: ${f.decisionId}`,metadata:{actualValue:f.actualValue,expectedValue:f.expectedValue,variance:f.variance},timestamp:f.loggedAt}),l.push({id:`decision-${f.decisionId}-outcome-${f.id}`,source:`decision-${f.decisionId}`,target:`outcome-${f.id}`,type:"RESULTED_IN",weight:1}),f.triggeredAdjustment&&i.forEach(m=>{m.decisionId===f.decisionId&&l.push({id:`outcome-${f.id}-guardrail-${m.id}`,source:`outcome-${f.id}`,target:`guardrail-${m.id}`,type:"INFLUENCED",weight:.7})})}),i.forEach(f=>{o.push({id:`guardrail-${f.id}`,type:"Guardrail",label:f.name,metadata:{metric:f.metric,threshold:f.threshold,alertLevel:f.alertLevel},timestamp:f.createdAt}),l.push({id:`decision-${f.decisionId}-guardrail-${f.id}`,source:`decision-${f.decisionId}`,target:`guardrail-${f.id}`,type:"GOVERNED_BY",weight:.9})});for(let f=0;f<o.length;f++)for(let m=f+1;m<o.length;m++){const p=o[f],g=o[m];if(p.type==="Decision"&&g.type==="Decision"){const b=z_e(p.variables||[],g.variables||[]);b.length>0&&l.push({id:`${p.id}-shares-${g.id}`,source:p.id,target:g.id,type:"SHARES_VARIABLE",weight:b.length/Math.max(((d=p.variables)==null?void 0:d.length)||1,((u=g.variables)==null?void 0:u.length)||1),metadata:{sharedVariables:b}})}}return{nodes:o,edges:l,tenantId:e,lastUpdated:Date.now()}}function B_e(e){const t=[];return e.scenarioVars&&e.scenarioVars.forEach(r=>{t.push(r.name)}),e.linkedSignals&&e.linkedSignals.forEach(r=>{r.variableKey&&t.push(r.variableKey)}),[...new Set(t)]}function z_e(e,t){return e.filter(r=>t.includes(r))}function q_e(e,t){const r=new Set;return e.edges.forEach(a=>{a.source===t&&r.add(a.target),a.target===t&&r.add(a.source)}),e.nodes.filter(a=>r.has(a.id))}function mW(e){const t={};return e.nodes.forEach(r=>{const a=e.edges.filter(s=>s.source===r.id||s.target===r.id).length;t[r.id]=a}),t}function pW(e){const t=[];return e.nodes.filter(r=>r.type==="Decision").forEach(r=>{e.edges.filter(s=>s.source===r.id&&s.type==="RESULTED_IN").forEach(s=>{e.edges.filter(o=>o.source===s.target&&o.type==="INFLUENCED").forEach(o=>{const l=e.nodes.find(d=>d.id===o.target);l&&t.push({path:[r.id,s.target,l.id],description:`${r.label}  Outcome  ${l.label} adjustment`})})})}),t}function gW(e){const t={Decision:0,RiskSignal:0,Incident:0,Outcome:0,Guardrail:0};e.nodes.forEach(a=>{t[a.type]++});const r={LINKED_TO:0,TRIGGERED:0,RESULTED_IN:0,GOVERNED_BY:0,INFLUENCED:0,SHARES_VARIABLE:0};return e.edges.forEach(a=>{r[a.type]++}),{totalNodes:e.nodes.length,totalEdges:e.edges.length,nodesByType:t,edgesByType:r,avgDegree:e.edges.length*2/e.nodes.length}}function U_e(e){const t=V_e(e),r=N.forwardRef((a,s)=>{const{children:i,...o}=a,l=N.Children.toArray(i),d=l.find(G_e);if(d){const u=d.props.children,f=l.map(m=>m===d?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:N.isValidElement(u)?N.cloneElement(u,void 0,f):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function V_e(e){const t=N.forwardRef((r,a)=>{const{children:s,...i}=r;if(N.isValidElement(s)){const o=K_e(s),l=W_e(i,s.props);return s.type!==N.Fragment&&(l.ref=a?ud(a,o):o),N.cloneElement(s,l)}return N.Children.count(s)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var H_e=Symbol("radix.slottable");function G_e(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===H_e}function W_e(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function K_e(e){var a,s;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Y_e=[" ","Enter","ArrowUp","ArrowDown"],X_e=[" ","Enter"],Hh="Select",[$2,F2,J_e]=Rj(Hh),[Hg]=ai(Hh,[J_e,Cf]),B2=Cf(),[Z_e,If]=Hg(Hh),[Q_e,eAe]=Hg(Hh),xW=e=>{const{__scopeSelect:t,children:r,open:a,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:d,dir:u,name:f,autoComplete:m,disabled:p,required:g,form:b}=e,v=B2(t),[y,j]=N.useState(null),[_,C]=N.useState(null),[A,S]=N.useState(!1),T=Jh(u),[O,R]=Nl({prop:a,defaultProp:s??!1,onChange:i,caller:Hh}),[M,I]=Nl({prop:o,defaultProp:l,onChange:d,caller:Hh}),D=N.useRef(null),$=y?b||!!y.closest("form"):!0,[K,U]=N.useState(new Set),J=Array.from(K).map(V=>V.props.value).join(";");return n.jsx(_j,{...v,children:n.jsxs(Z_e,{required:g,scope:t,trigger:y,onTriggerChange:j,valueNode:_,onValueNodeChange:C,valueNodeHasChildren:A,onValueNodeHasChildrenChange:S,contentId:yl(),value:M,onValueChange:I,open:O,onOpenChange:R,dir:T,triggerPointerDownPosRef:D,disabled:p,children:[n.jsx($2.Provider,{scope:t,children:n.jsx(Q_e,{scope:e.__scopeSelect,onNativeOptionAdd:N.useCallback(V=>{U(G=>new Set(G).add(V))},[]),onNativeOptionRemove:N.useCallback(V=>{U(G=>{const q=new Set(G);return q.delete(V),q})},[]),children:r})}),$?n.jsxs(zW,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:m,value:M,onChange:V=>I(V.target.value),disabled:p,form:b,children:[M===void 0?n.jsx("option",{value:""}):null,Array.from(K)]},J):null]})})};xW.displayName=Hh;var vW="SelectTrigger",yW=N.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:a=!1,...s}=e,i=B2(r),o=If(vW,r),l=o.disabled||a,d=br(t,o.onTriggerChange),u=F2(r),f=N.useRef("touch"),[m,p,g]=UW(v=>{const y=u().filter(C=>!C.disabled),j=y.find(C=>C.value===o.value),_=VW(y,v,j);_!==void 0&&o.onValueChange(_.value)}),b=v=>{l||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return n.jsx(Ay,{asChild:!0,...i,children:n.jsx(ar.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":qW(o.value)?"":void 0,...s,ref:d,onClick:yt(s.onClick,v=>{v.currentTarget.focus(),f.current!=="mouse"&&b(v)}),onPointerDown:yt(s.onPointerDown,v=>{f.current=v.pointerType;const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(b(v),v.preventDefault())}),onKeyDown:yt(s.onKeyDown,v=>{const y=m.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&p(v.key),!(y&&v.key===" ")&&Y_e.includes(v.key)&&(b(),v.preventDefault())})})})});yW.displayName=vW;var bW="SelectValue",jW=N.forwardRef((e,t)=>{const{__scopeSelect:r,className:a,style:s,children:i,placeholder:o="",...l}=e,d=If(bW,r),{onValueNodeHasChildrenChange:u}=d,f=i!==void 0,m=br(t,d.onValueNodeChange);return ni(()=>{u(f)},[u,f]),n.jsx(ar.span,{...l,ref:m,style:{pointerEvents:"none"},children:qW(d.value)?n.jsx(n.Fragment,{children:o}):i})});jW.displayName=bW;var tAe="SelectIcon",wW=N.forwardRef((e,t)=>{const{__scopeSelect:r,children:a,...s}=e;return n.jsx(ar.span,{"aria-hidden":!0,...s,ref:t,children:a||""})});wW.displayName=tAe;var rAe="SelectPortal",NW=e=>n.jsx(Rg,{asChild:!0,...e});NW.displayName=rAe;var Gh="SelectContent",SW=N.forwardRef((e,t)=>{const r=If(Gh,e.__scopeSelect),[a,s]=N.useState();if(ni(()=>{s(new DocumentFragment)},[]),!r.open){const i=a;return i?bg.createPortal(n.jsx(CW,{scope:e.__scopeSelect,children:n.jsx($2.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),i):null}return n.jsx(_W,{...e,ref:t})});SW.displayName=Gh;var fc=10,[CW,$f]=Hg(Gh),nAe="SelectContentImpl",aAe=U_e("SelectContent.RemoveScroll"),_W=N.forwardRef((e,t)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:d,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:b,hideWhenDetached:v,avoidCollisions:y,...j}=e,_=If(Gh,r),[C,A]=N.useState(null),[S,T]=N.useState(null),O=br(t,ce=>A(ce)),[R,M]=N.useState(null),[I,D]=N.useState(null),$=F2(r),[K,U]=N.useState(!1),J=N.useRef(!1);N.useEffect(()=>{if(C)return Mj(C)},[C]),Pj();const V=N.useCallback(ce=>{const[ge,...he]=$().map(je=>je.ref.current),[ue]=he.slice(-1),Se=document.activeElement;for(const je of ce)if(je===Se||(je==null||je.scrollIntoView({block:"nearest"}),je===ge&&S&&(S.scrollTop=0),je===ue&&S&&(S.scrollTop=S.scrollHeight),je==null||je.focus(),document.activeElement!==Se))return},[$,S]),G=N.useCallback(()=>V([R,C]),[V,R,C]);N.useEffect(()=>{K&&G()},[K,G]);const{onOpenChange:q,triggerPointerDownPosRef:Y}=_;N.useEffect(()=>{if(C){let ce={x:0,y:0};const ge=ue=>{var Se,je;ce={x:Math.abs(Math.round(ue.pageX)-(((Se=Y.current)==null?void 0:Se.x)??0)),y:Math.abs(Math.round(ue.pageY)-(((je=Y.current)==null?void 0:je.y)??0))}},he=ue=>{ce.x<=10&&ce.y<=10?ue.preventDefault():C.contains(ue.target)||q(!1),document.removeEventListener("pointermove",ge),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",he,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",he,{capture:!0})}}},[C,q,Y]),N.useEffect(()=>{const ce=()=>q(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[q]);const[Q,F]=UW(ce=>{const ge=$().filter(Se=>!Se.disabled),he=ge.find(Se=>Se.ref.current===document.activeElement),ue=VW(ge,ce,he);ue&&setTimeout(()=>ue.ref.current.focus())}),z=N.useCallback((ce,ge,he)=>{const ue=!J.current&&!he;(_.value!==void 0&&_.value===ge||ue)&&(M(ce),ue&&(J.current=!0))},[_.value]),H=N.useCallback(()=>C==null?void 0:C.focus(),[C]),X=N.useCallback((ce,ge,he)=>{const ue=!J.current&&!he;(_.value!==void 0&&_.value===ge||ue)&&D(ce)},[_.value]),ne=a==="popper"?gk:AW,ie=ne===gk?{side:l,sideOffset:d,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:b,hideWhenDetached:v,avoidCollisions:y}:{};return n.jsx(CW,{scope:r,content:C,viewport:S,onViewportChange:T,itemRefCallback:z,selectedItem:R,onItemLeave:H,itemTextRefCallback:X,focusSelectedItem:G,selectedItemText:I,position:a,isPositioned:K,searchRef:Q,children:n.jsx(Ty,{as:aAe,allowPinchZoom:!0,children:n.jsx(Oy,{asChild:!0,trapped:_.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:yt(s,ce=>{var ge;(ge=_.trigger)==null||ge.focus({preventScroll:!0}),ce.preventDefault()}),children:n.jsx(Og,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:n.jsx(ne,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ce=>ce.preventDefault(),...j,...ie,onPlaced:()=>U(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:yt(j.onKeyDown,ce=>{const ge=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!ge&&ce.key.length===1&&F(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let ue=$().filter(Se=>!Se.disabled).map(Se=>Se.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(ue=ue.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const Se=ce.target,je=ue.indexOf(Se);ue=ue.slice(je+1)}setTimeout(()=>V(ue)),ce.preventDefault()}})})})})})})});_W.displayName=nAe;var sAe="SelectItemAlignedPosition",AW=N.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:a,...s}=e,i=If(Gh,r),o=$f(Gh,r),[l,d]=N.useState(null),[u,f]=N.useState(null),m=br(t,O=>f(O)),p=F2(r),g=N.useRef(!1),b=N.useRef(!0),{viewport:v,selectedItem:y,selectedItemText:j,focusSelectedItem:_}=o,C=N.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&v&&y&&j){const O=i.trigger.getBoundingClientRect(),R=u.getBoundingClientRect(),M=i.valueNode.getBoundingClientRect(),I=j.getBoundingClientRect();if(i.dir!=="rtl"){const Se=I.left-R.left,je=M.left-Se,Be=O.left-je,$e=O.width+Be,oe=Math.max($e,R.width),Xe=window.innerWidth-fc,pt=Ev(je,[fc,Math.max(fc,Xe-oe)]);l.style.minWidth=$e+"px",l.style.left=pt+"px"}else{const Se=R.right-I.right,je=window.innerWidth-M.right-Se,Be=window.innerWidth-O.right-je,$e=O.width+Be,oe=Math.max($e,R.width),Xe=window.innerWidth-fc,pt=Ev(je,[fc,Math.max(fc,Xe-oe)]);l.style.minWidth=$e+"px",l.style.right=pt+"px"}const D=p(),$=window.innerHeight-fc*2,K=v.scrollHeight,U=window.getComputedStyle(u),J=parseInt(U.borderTopWidth,10),V=parseInt(U.paddingTop,10),G=parseInt(U.borderBottomWidth,10),q=parseInt(U.paddingBottom,10),Y=J+V+K+q+G,Q=Math.min(y.offsetHeight*5,Y),F=window.getComputedStyle(v),z=parseInt(F.paddingTop,10),H=parseInt(F.paddingBottom,10),X=O.top+O.height/2-fc,ne=$-X,ie=y.offsetHeight/2,ce=y.offsetTop+ie,ge=J+V+ce,he=Y-ge;if(ge<=X){const Se=D.length>0&&y===D[D.length-1].ref.current;l.style.bottom="0px";const je=u.clientHeight-v.offsetTop-v.offsetHeight,Be=Math.max(ne,ie+(Se?H:0)+je+G),$e=ge+Be;l.style.height=$e+"px"}else{const Se=D.length>0&&y===D[0].ref.current;l.style.top="0px";const Be=Math.max(X,J+v.offsetTop+(Se?z:0)+ie)+he;l.style.height=Be+"px",v.scrollTop=ge-X+v.offsetTop}l.style.margin=`${fc}px 0`,l.style.minHeight=Q+"px",l.style.maxHeight=$+"px",a==null||a(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,l,u,v,y,j,i.dir,a]);ni(()=>C(),[C]);const[A,S]=N.useState();ni(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const T=N.useCallback(O=>{O&&b.current===!0&&(C(),_==null||_(),b.current=!1)},[C,_]);return n.jsx(oAe,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:T,children:n.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:n.jsx(ar.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});AW.displayName=sAe;var iAe="SelectPopperPosition",gk=N.forwardRef((e,t)=>{const{__scopeSelect:r,align:a="start",collisionPadding:s=fc,...i}=e,o=B2(r);return n.jsx(Aj,{...o,...i,ref:t,align:a,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});gk.displayName=iAe;var[oAe,XO]=Hg(Gh,{}),xk="SelectViewport",kW=N.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:a,...s}=e,i=$f(xk,r),o=XO(xk,r),l=br(t,i.onViewportChange),d=N.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx($2.Slot,{scope:r,children:n.jsx(ar.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:yt(s.onScroll,u=>{const f=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&m){const g=Math.abs(d.current-f.scrollTop);if(g>0){const b=window.innerHeight-fc*2,v=parseFloat(m.style.minHeight),y=parseFloat(m.style.height),j=Math.max(v,y);if(j<b){const _=j+g,C=Math.min(b,_),A=_-C;m.style.height=C+"px",m.style.bottom==="0px"&&(f.scrollTop=A>0?A:0,m.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});kW.displayName=xk;var OW="SelectGroup",[lAe,cAe]=Hg(OW),dAe=N.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,s=yl();return n.jsx(lAe,{scope:r,id:s,children:n.jsx(ar.div,{role:"group","aria-labelledby":s,...a,ref:t})})});dAe.displayName=OW;var EW="SelectLabel",TW=N.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,s=cAe(EW,r);return n.jsx(ar.div,{id:s.id,...a,ref:t})});TW.displayName=EW;var dj="SelectItem",[uAe,RW]=Hg(dj),PW=N.forwardRef((e,t)=>{const{__scopeSelect:r,value:a,disabled:s=!1,textValue:i,...o}=e,l=If(dj,r),d=$f(dj,r),u=l.value===a,[f,m]=N.useState(i??""),[p,g]=N.useState(!1),b=br(t,_=>{var C;return(C=d.itemRefCallback)==null?void 0:C.call(d,_,a,s)}),v=yl(),y=N.useRef("touch"),j=()=>{s||(l.onValueChange(a),l.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(uAe,{scope:r,value:a,disabled:s,textId:v,isSelected:u,onItemTextChange:N.useCallback(_=>{m(C=>C||((_==null?void 0:_.textContent)??"").trim())},[]),children:n.jsx($2.ItemSlot,{scope:r,value:a,disabled:s,textValue:f,children:n.jsx(ar.div,{role:"option","aria-labelledby":v,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:yt(o.onFocus,()=>g(!0)),onBlur:yt(o.onBlur,()=>g(!1)),onClick:yt(o.onClick,()=>{y.current!=="mouse"&&j()}),onPointerUp:yt(o.onPointerUp,()=>{y.current==="mouse"&&j()}),onPointerDown:yt(o.onPointerDown,_=>{y.current=_.pointerType}),onPointerMove:yt(o.onPointerMove,_=>{var C;y.current=_.pointerType,s?(C=d.onItemLeave)==null||C.call(d):y.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:yt(o.onPointerLeave,_=>{var C;_.currentTarget===document.activeElement&&((C=d.onItemLeave)==null||C.call(d))}),onKeyDown:yt(o.onKeyDown,_=>{var A;((A=d.searchRef)==null?void 0:A.current)!==""&&_.key===" "||(X_e.includes(_.key)&&j(),_.key===" "&&_.preventDefault())})})})})});PW.displayName=dj;var ev="SelectItemText",MW=N.forwardRef((e,t)=>{const{__scopeSelect:r,className:a,style:s,...i}=e,o=If(ev,r),l=$f(ev,r),d=RW(ev,r),u=eAe(ev,r),[f,m]=N.useState(null),p=br(t,j=>m(j),d.onItemTextChange,j=>{var _;return(_=l.itemTextRefCallback)==null?void 0:_.call(l,j,d.value,d.disabled)}),g=f==null?void 0:f.textContent,b=N.useMemo(()=>n.jsx("option",{value:d.value,disabled:d.disabled,children:g},d.value),[d.disabled,d.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:y}=u;return ni(()=>(v(b),()=>y(b)),[v,y,b]),n.jsxs(n.Fragment,{children:[n.jsx(ar.span,{id:d.textId,...i,ref:p}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?bg.createPortal(i.children,o.valueNode):null]})});MW.displayName=ev;var DW="SelectItemIndicator",LW=N.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e;return RW(DW,r).isSelected?n.jsx(ar.span,{"aria-hidden":!0,...a,ref:t}):null});LW.displayName=DW;var vk="SelectScrollUpButton",IW=N.forwardRef((e,t)=>{const r=$f(vk,e.__scopeSelect),a=XO(vk,e.__scopeSelect),[s,i]=N.useState(!1),o=br(t,a.onScrollButtonChange);return ni(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=d.scrollTop>0;i(u)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?n.jsx(FW,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});IW.displayName=vk;var yk="SelectScrollDownButton",$W=N.forwardRef((e,t)=>{const r=$f(yk,e.__scopeSelect),a=XO(yk,e.__scopeSelect),[s,i]=N.useState(!1),o=br(t,a.onScrollButtonChange);return ni(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<u;i(f)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?n.jsx(FW,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});$W.displayName=yk;var FW=N.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:a,...s}=e,i=$f("SelectScrollButton",r),o=N.useRef(null),l=F2(r),d=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>d(),[d]),ni(()=>{var f;const u=l().find(m=>m.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),n.jsx(ar.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:yt(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(a,50))}),onPointerMove:yt(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(a,50))}),onPointerLeave:yt(s.onPointerLeave,()=>{d()})})}),fAe="SelectSeparator",BW=N.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e;return n.jsx(ar.div,{"aria-hidden":!0,...a,ref:t})});BW.displayName=fAe;var bk="SelectArrow",hAe=N.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,s=B2(r),i=If(bk,r),o=$f(bk,r);return i.open&&o.position==="popper"?n.jsx(kj,{...s,...a,ref:t}):null});hAe.displayName=bk;var mAe="SelectBubbleInput",zW=N.forwardRef(({__scopeSelect:e,value:t,...r},a)=>{const s=N.useRef(null),i=br(a,s),o=My(t);return N.useEffect(()=>{const l=s.current;if(!l)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&f){const m=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(m)}},[o,t]),n.jsx(ar.select,{...r,style:{...RB,...r.style},ref:i,defaultValue:t})});zW.displayName=mAe;function qW(e){return e===""||e===void 0}function UW(e){const t=Qs(e),r=N.useRef(""),a=N.useRef(0),s=N.useCallback(o=>{const l=r.current+o;t(l),(function d(u){r.current=u,window.clearTimeout(a.current),u!==""&&(a.current=window.setTimeout(()=>d(""),1e3))})(l)},[t]),i=N.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,s,i]}function VW(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=pAe(e,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const d=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==r?d:void 0}function pAe(e,t){return e.map((r,a)=>e[(t+a)%e.length])}var gAe=xW,HW=yW,xAe=jW,vAe=wW,yAe=NW,GW=SW,bAe=kW,WW=TW,KW=PW,jAe=MW,wAe=LW,YW=IW,XW=$W,JW=BW;const Et=gAe,Tt=xAe,kt=N.forwardRef(({className:e,children:t,...r},a)=>n.jsxs(HW,{ref:a,className:Ye("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(vAe,{asChild:!0,children:n.jsx(df,{className:"h-4 w-4 opacity-50"})})]}));kt.displayName=HW.displayName;const ZW=N.forwardRef(({className:e,...t},r)=>n.jsx(YW,{ref:r,className:Ye("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(e3,{className:"h-4 w-4"})}));ZW.displayName=YW.displayName;const QW=N.forwardRef(({className:e,...t},r)=>n.jsx(XW,{ref:r,className:Ye("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(df,{className:"h-4 w-4"})}));QW.displayName=XW.displayName;const Ot=N.forwardRef(({className:e,children:t,position:r="popper",...a},s)=>n.jsx(yAe,{children:n.jsxs(GW,{ref:s,className:Ye("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...a,children:[n.jsx(ZW,{}),n.jsx(bAe,{className:Ye("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(QW,{})]})}));Ot.displayName=GW.displayName;const NAe=N.forwardRef(({className:e,...t},r)=>n.jsx(WW,{ref:r,className:Ye("px-2 py-1.5 text-sm font-semibold",e),...t}));NAe.displayName=WW.displayName;const we=N.forwardRef(({className:e,children:t,...r},a)=>n.jsxs(KW,{ref:a,className:Ye("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(wAe,{children:n.jsx(su,{className:"h-4 w-4"})})}),n.jsx(jAe,{children:t})]}));we.displayName=KW.displayName;const SAe=N.forwardRef(({className:e,...t},r)=>n.jsx(JW,{ref:r,className:Ye("-mx-1 my-1 h-px bg-muted",e),...t}));SAe.displayName=JW.displayName;const s$={Decision:"hsl(var(--chart-1))",RiskSignal:"hsl(var(--chart-2))",Incident:"hsl(var(--chart-3))",Outcome:"hsl(var(--chart-4))",Guardrail:"hsl(var(--chart-5))"},CAe={Decision:"D",RiskSignal:"S",Incident:"I",Outcome:"O",Guardrail:"G"},_Ae={LINKED_TO:"#3b82f6",TRIGGERED:"#ef4444",RESULTED_IN:"#10b981",GOVERNED_BY:"#f59e0b",INFLUENCED:"#8b5cf6",SHARES_VARIABLE:"#6b7280"};function AAe({graph:e,onNodeClick:t,onAuditEvent:r,className:a}){const s=N.useRef(null),[i,o]=N.useState([]),[l,d]=N.useState(null),[u,f]=N.useState(null),[m,p]=N.useState(1),[g,b]=N.useState({x:0,y:0}),[v,y]=N.useState("all"),[j,_]=N.useState(""),[C,A]=N.useState(!1);N.useEffect(()=>{const q=e.nodes.map((Y,Q)=>{const F=Q/e.nodes.length*2*Math.PI,z=Math.min(800,600)*.3;return{...Y,x:400+Math.cos(F)*z,y:300+Math.sin(F)*z,vx:0,vy:0}});o(q)},[e]),N.useEffect(()=>{if(i.length===0)return;const U=setInterval(()=>{o(J=>{const V=[...J],G=.1;return V.forEach((q,Y)=>{let Q=0,F=0;V.forEach((X,ne)=>{if(Y===ne)return;const ie=q.x-X.x,ce=q.y-X.y,ge=Math.sqrt(ie*ie+ce*ce)||1,he=1e3/(ge*ge);Q+=ie/ge*he,F+=ce/ge*he}),e.edges.forEach(X=>{const ne=X.source===q.id,ie=X.target===q.id;if(!ne&&!ie)return;const ce=ne?X.target:X.source,ge=V.find(Be=>Be.id===ce);if(!ge)return;const he=ge.x-q.x,ue=ge.y-q.y,Se=Math.sqrt(he*he+ue*ue)||1,je=(Se-100)*.01*X.weight;Q+=he/Se*je,F+=ue/Se*je});const z=400,H=300;Q+=(z-q.x)*.001,F+=(H-q.y)*.001,q.vx=(q.vx+Q)*.9,q.vy=(q.vy+F)*.9,q.x+=q.vx*G,q.y+=q.vy*G}),V})},50);return()=>clearInterval(U)},[i.length,e.edges]),N.useEffect(()=>{const U=s.current;if(!U)return;const J=U.getContext("2d");if(!J)return;J.clearRect(0,0,U.width,U.height),J.save(),J.translate(g.x,g.y),J.scale(m,m);const V=i.filter(q=>!(v!=="all"&&q.type!==v||j&&!q.label.toLowerCase().includes(j.toLowerCase()))),G=new Set(V.map(q=>q.id));e.edges.forEach(q=>{if(!G.has(q.source)||!G.has(q.target))return;const Y=i.find(F=>F.id===q.source),Q=i.find(F=>F.id===q.target);!Y||!Q||(J.beginPath(),J.moveTo(Y.x,Y.y),J.lineTo(Q.x,Q.y),J.strokeStyle=_Ae[q.type],J.lineWidth=q.weight*2,J.globalAlpha=.3,J.stroke(),J.globalAlpha=1)}),V.forEach(q=>{const Y=(l==null?void 0:l.id)===q.id,Q=(u==null?void 0:u.id)===q.id,F=Y?25:Q?22:20;J.beginPath(),J.arc(q.x,q.y,F,0,2*Math.PI),J.fillStyle=s$[q.type],J.fill(),J.strokeStyle=Y?"#000":"#fff",J.lineWidth=Y?3:2,J.stroke(),J.fillStyle="#fff",J.font="bold 12px sans-serif",J.textAlign="center",J.textBaseline="middle",J.fillText(CAe[q.type],q.x,q.y)}),J.restore()},[i,e.edges,m,g,l,u,v,j]);const S=U=>{const J=s.current;if(!J)return;const V=J.getBoundingClientRect(),G=(U.clientX-V.left-g.x)/m,q=(U.clientY-V.top-g.y)/m,Y=i.find(Q=>{const F=Q.x-G,z=Q.y-q;return Math.sqrt(F*F+z*z)<20});Y?(d(Y),t==null||t(Y),r==null||r("knowledge_graph_node_clicked",{nodeId:Y.id,nodeType:Y.type,nodeLabel:Y.label})):d(null)},T=U=>{const J=s.current;if(!J)return;const V=J.getBoundingClientRect(),G=(U.clientX-V.left-g.x)/m,q=(U.clientY-V.top-g.y)/m,Y=i.find(Q=>{const F=Q.x-G,z=Q.y-q;return Math.sqrt(F*F+z*z)<20});f(Y||null)},O=()=>p(U=>Math.min(U*1.2,3)),R=()=>p(U=>Math.max(U/1.2,.3)),M=()=>{p(1),b({x:0,y:0})},I=gW(e),D=pW(e),$=mW(e),K=l?q_e(e,l.id):[];return n.jsxs(Ae,{className:a,children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(jy,{className:"h-5 w-5"}),"Knowledge Graph"]}),n.jsx(mt,{children:"Forms the learning backbone  showing how each decision relates to others"})]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>A(!C),children:[n.jsx(Or,{className:"h-4 w-4 mr-2"}),C?"Hide":"Show"," Stats"]})]})}),n.jsxs(Re,{className:"space-y-4",children:[C&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-muted rounded-lg",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Nodes"}),n.jsx("div",{className:"text-2xl font-bold",children:I.totalNodes})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Edges"}),n.jsx("div",{className:"text-2xl font-bold",children:I.totalEdges})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Degree"}),n.jsx("div",{className:"text-2xl font-bold",children:I.avgDegree.toFixed(1)})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Learning Paths"}),n.jsx("div",{className:"text-2xl font-bold",children:D.length})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(Ne,{htmlFor:"search",className:"sr-only",children:"Search"}),n.jsxs("div",{className:"relative",children:[n.jsx(Rl,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(et,{id:"search",placeholder:"Search nodes...",value:j,onChange:U=>_(U.target.value),className:"pl-9"})]})]}),n.jsx("div",{className:"w-48",children:n.jsxs(Et,{value:v,onValueChange:U=>y(U),children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Filter by type"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Types"}),n.jsx(we,{value:"Decision",children:"Decisions"}),n.jsx(we,{value:"RiskSignal",children:"Signals"}),n.jsx(we,{value:"Incident",children:"Incidents"}),n.jsx(we,{value:"Outcome",children:"Outcomes"}),n.jsx(we,{value:"Guardrail",children:"Guardrails"})]})]})})]}),n.jsxs("div",{className:"relative border border-border rounded-lg overflow-hidden bg-background",children:[n.jsx("canvas",{ref:s,width:800,height:600,onClick:S,onMouseMove:T,className:"cursor-pointer"}),n.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(le,{variant:"secondary",size:"icon",onClick:O,children:n.jsx(B9,{className:"h-4 w-4"})})}),n.jsx(St,{children:"Zoom In"})]})}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(le,{variant:"secondary",size:"icon",onClick:R,children:n.jsx(z9,{className:"h-4 w-4"})})}),n.jsx(St,{children:"Zoom Out"})]})}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(le,{variant:"secondary",size:"icon",onClick:M,children:n.jsx(a3,{className:"h-4 w-4"})})}),n.jsx(St,{children:"Reset View"})]})})]})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(s$).map(([U,J])=>n.jsxs(be,{variant:"outline",className:"gap-2",style:{borderColor:J},children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:J}}),U]},U))}),l&&n.jsxs("div",{className:"border border-border rounded-lg p-4 bg-card space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:l.label}),n.jsx(be,{variant:"secondary",children:l.type})]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Connections: ",$[l.id]||0]})]}),l.variables&&l.variables.length>0&&n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:"Variables"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:l.variables.map(U=>n.jsx(be,{variant:"outline",className:"text-xs",children:U},U))})]}),K.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-medium mb-2",children:["Connected Nodes (",K.length,")"]}),n.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:K.map(U=>n.jsxs("div",{className:"text-xs p-2 bg-muted rounded flex items-center justify-between",children:[n.jsx("span",{children:U.label}),n.jsx(be,{variant:"outline",className:"text-xs",children:U.type})]},U.id))})]})]}),D.length>0&&n.jsxs("div",{className:"border border-border rounded-lg p-4 bg-card",children:[n.jsx("div",{className:"text-sm font-medium mb-2",children:"Learning Paths"}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:D.slice(0,5).map((U,J)=>n.jsx("div",{className:"text-xs p-2 bg-muted rounded",children:U.description},J))})]})]})]})}function kAe({graph:e,onAuditEvent:t,className:r}){const[a,s]=N.useState(!1),i=gW(e),o=pW(e),l=mW(e),d=Object.entries(l).sort(([,p],[,g])=>g-p).slice(0,3).map(([p])=>e.nodes.find(g=>g.id===p)).filter(Boolean),u=o.filter(p=>p.path.map(b=>e.nodes.find(v=>v.id===b)).every(b=>{var v;return((v=b==null?void 0:b.metadata)==null?void 0:v.status)!=="archived"})),f=Math.min(100,Math.round(i.totalEdges/Math.max(i.totalNodes,1)*20+u.length*10+i.edgesByType.SHARES_VARIABLE/Math.max(i.totalEdges,1)*50)),m=()=>{s(!0),t==null||t("knowledge_graph_opened",{tenantId:e.tenantId,totalNodes:i.totalNodes,totalEdges:i.totalEdges})};return n.jsxs(n.Fragment,{children:[n.jsxs(Ae,{className:r,children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(jy,{className:"h-5 w-5"}),"Knowledge Graph"]}),n.jsx(mt,{children:"Learning backbone connecting decisions, signals, and outcomes"})]}),n.jsx(le,{variant:"outline",size:"sm",onClick:m,children:"View Full Graph"})]})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Graph Health"}),n.jsxs("div",{className:"text-2xl font-bold",children:[f,"/100"]})]}),n.jsx("div",{className:"flex items-center gap-2",children:f>=70?n.jsx(ri,{className:"h-8 w-8 text-green-500"}):f>=40?n.jsx(tn,{className:"h-8 w-8 text-yellow-500"}):n.jsx(tn,{className:"h-8 w-8 text-red-500"})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center p-3 bg-card border border-border rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-chart-1",children:i.totalNodes}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Nodes"})]}),n.jsxs("div",{className:"text-center p-3 bg-card border border-border rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-chart-2",children:i.totalEdges}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Connections"})]}),n.jsxs("div",{className:"text-center p-3 bg-card border border-border rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-chart-3",children:u.length}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Learning Paths"})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-2",children:"Node Distribution"}),n.jsx("div",{className:"space-y-2",children:Object.entries(i.nodesByType).filter(([,p])=>p>0).map(([p,g])=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(be,{variant:"outline",className:"text-xs",children:p})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-24 h-2 bg-muted rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-primary",style:{width:`${g/i.totalNodes*100}%`}})}),n.jsx("span",{className:"text-sm font-medium w-8 text-right",children:g})]})]},p))})]}),d.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx($r,{className:"h-4 w-4"}),"Most Connected Nodes"]}),n.jsx("div",{className:"space-y-2",children:d.map(p=>p?n.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[n.jsx(be,{variant:"secondary",className:"text-xs shrink-0",children:p.type}),n.jsx("span",{className:"truncate",children:p.label})]}),n.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground shrink-0",children:[n.jsx(n3,{className:"h-3 w-3"}),n.jsx("span",{className:"text-xs",children:l[p.id]})]})]},p.id):null)})]}),u.length>0&&n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium mb-2",children:"Active Learning Paths"}),n.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:u.slice(0,3).map((p,g)=>n.jsx("div",{className:"text-xs p-2 bg-muted rounded",children:p.description},g))}),u.length>3&&n.jsxs(le,{variant:"ghost",size:"sm",className:"w-full mt-2",onClick:m,children:["View ",u.length-3," more paths"]})]}),n.jsxs("div",{className:"p-3 bg-muted rounded-lg text-sm",children:[n.jsx("div",{className:"font-medium mb-1",children:" Insight"}),n.jsx("div",{className:"text-muted-foreground",children:i.edgesByType.SHARES_VARIABLE>0?n.jsxs(n.Fragment,{children:[i.edgesByType.SHARES_VARIABLE," decisions share common variables, enabling cross-decision learning and pattern recognition."]}):n.jsx(n.Fragment,{children:"No shared variables detected between decisions. Consider linking decisions with common risk factors for better insights."})})]})]})]}),n.jsx(Nr,{open:a,onOpenChange:s,children:n.jsxs(gr,{className:"max-w-[90vw] max-h-[90vh] overflow-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Knowledge Graph - Full View"}),n.jsx(Sr,{children:"Interactive visualization of all relationships in the system"})]}),n.jsx(AAe,{graph:e,onAuditEvent:t,onNodeClick:p=>{console.log("Node clicked:",p)}})]})})]})}function OAe({title:e,value:t,change:r,icon:a,description:s}){const i=r>=0;return n.jsxs(Ae,{className:"rounded-2xl shadow-sm hover:shadow-md transition-shadow","data-pol-id":"n4okwq",children:[n.jsxs(He,{className:"flex flex-row items-center justify-between space-y-0 pb-2","data-pol-id":"umwoe1",children:[n.jsx(Ge,{className:"text-sm font-medium text-muted-foreground","data-pol-id":"laoenp",children:e}),n.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center","data-pol-id":"tkkyga",children:n.jsx(a,{className:"w-5 h-5 text-primary","data-pol-id":"l2jgxz"})})]}),n.jsxs(Re,{"data-pol-id":"i64kpl",children:[n.jsx("div",{className:"text-3xl font-bold text-foreground mb-1","data-pol-id":"ekfe9e",children:t}),n.jsxs("div",{className:"flex items-center gap-2","data-pol-id":"wtrb80",children:[n.jsxs("div",{className:Ye("flex items-center gap-1 text-xs font-medium",i?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),"data-pol-id":"096dxd",children:[i?n.jsx(Th,{className:"w-3 h-3","data-pol-id":"lm3q2b"}):n.jsx(Oh,{className:"w-3 h-3","data-pol-id":"hjqn7l"}),n.jsxs("span",{"data-pol-id":"l5m65y",children:[Math.abs(r),"%"]})]}),s&&n.jsx("span",{className:"text-xs text-muted-foreground","data-pol-id":"qj3254",children:s})]})]})]})}function EAe(){const{tenant:e}=Fr(),{getDecisionsByTenant:t,getDecisionsByStatus:r,addAudit:a,seedMockClosedDecisions:s,saveDecision:i}=Vo(),[o,l]=N.useState(!1),[d,u]=N.useState(!1),[f,m]=N.useState(null),[p,g]=N.useState(!1);pe.useEffect(()=>{s(e.tenantId),rW(e.tenantId);const H=vg(e.tenantId),X=t(e.tenantId);H.forEach(ne=>{KCe(ne,X,(ce,ge)=>a(ce,ge)).forEach(ce=>{i(ce)})})},[e.tenantId,s]);const b=t(e.tenantId),v=r(e.tenantId,"draft"),y=r(e.tenantId,"analyzing"),j=r(e.tenantId,"deciding"),_=v.length+y.length+j.length,C=Date.now()-720*60*60*1e3,A=Date.now()-1440*60*60*1e3,S=r(e.tenantId,"closed"),T=S.filter(H=>H.closedAt&&H.closedAt>=C),O=S.filter(H=>H.closedAt&&H.closedAt>=A&&H.closedAt<C),R=O.length>0?(T.length-O.length)/O.length*100:T.length>0?100:0,M=T.filter(H=>{var X;return((X=H.metrics)==null?void 0:X.raroc)!==void 0}),I=M.length>0?M.reduce((H,X)=>{var ne;return H+(((ne=X.metrics)==null?void 0:ne.raroc)||0)},0)/M.length:null,D=O.filter(H=>{var X;return((X=H.metrics)==null?void 0:X.raroc)!==void 0}),$=D.length>0?D.reduce((H,X)=>{var ne;return H+(((ne=X.metrics)==null?void 0:ne.raroc)||0)},0)/D.length:null,K=I!==null&&$!==null?(I-$)/$*100:I!==null?100:0,U=b.length>0,J=cW(b),V=b.flatMap(H=>$h(H.id).map(ne=>({timestamp:new Date(ne.violatedAt).getTime()}))),G=O_e(b.map(H=>({id:H.id,antifragilityIndex:H.antifragilityIndex,learningTrace:H.learningTrace})),V),q=vo(e.tenantId),Y=q.map(H=>{const X=b.filter(Be=>H.decision_ids.includes(Be.id)),ne=X.filter(Be=>{var $e;return(($e=Be.metrics)==null?void 0:$e.var95)!==void 0}).map(Be=>{var Oe,Ee;const $e=((Oe=Be.metrics)==null?void 0:Oe.var95)||0,oe=((Ee=Be.metrics)==null?void 0:Ee.raroc)||0,Xe=Math.min(100,Math.abs($e)/1e3),pt=Math.max(0,100-oe*1e3);return(Xe+pt)/2}),ie=ne.length>0?ne.reduce((Be,$e)=>Be+$e,0)/ne.length:50,ce=X.map(Be=>{const oe=$h(Be.id).filter(Xe=>Xe.violatedAt>=Date.now()-720*60*60*1e3);return Math.min(100,oe.length*10)}),ge=ce.length>0?ce.reduce((Be,$e)=>Be+$e,0)/ce.length:50,he=X.filter(Be=>Be.antifragilityIndex!==void 0).map(Be=>100-(Be.antifragilityIndex||50)),ue=he.length>0?he.reduce((Be,$e)=>Be+$e,0)/he.length:50,Se=X.map(Be=>{const $e=Be.options.flatMap(pt=>pt.partners||[]);if($e.length===0)return 30;const oe=$e.reduce((pt,Oe)=>pt+(Oe.dependencyScore||0),0)/$e.length,Xe=$e.reduce((pt,Oe)=>pt+(Oe.creditExposure||0),0)/$e.length;return Math.min(100,oe*10+Xe/1e5)}),je=Se.length>0?Se.reduce((Be,$e)=>Be+$e,0)/Se.length:50;return{portfolioId:H.id,portfolioName:H.name,dimensions:{financial:Math.round(ie),operational:Math.round(ge),market:Math.round(ue),partner:Math.round(je)},decisionCount:X.length}}),F=S.filter(H=>H.closedAt&&H.closedAt<=C).map(H=>{var X;return $Ce(H.id,H.title,((X=H.options.find(ne=>ne.id===H.chosenOptionId))==null?void 0:X.label)||"Unknown Option",H.closedAt||Date.now(),Math.random()>.7?"outperforming":Math.random()>.5?"tracking":"underperforming")}),z=[{title:"Total Scans",value:"12,543",change:12.5,icon:vl,description:"from last month"},{title:"Active Users",value:"2,847",change:8.2,icon:Uo,description:"from last month"},{title:"System Health",value:"98.5%",change:2.1,icon:$r,description:"uptime"},{title:"Active Alerts",value:"23",change:-15.3,icon:tn,description:"from last week"}];return n.jsxs("div",{className:"p-6 space-y-6","data-pol-id":"2r09rl",children:[n.jsxs("div",{"data-pol-id":"a1ikf3",children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2","data-pol-id":"8xkkj7",children:"Dashboard"}),n.jsx("p",{className:"text-muted-foreground","data-pol-id":"zbd5w6",children:"Welcome to Retina Intelligence Suite. Monitor your key metrics and system performance."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6","data-pol-id":"m7ybsa",children:z.map(H=>n.jsx(OAe,{...H,"data-pol-id":"eflxqa"},H.title))}),n.jsxs(Ae,{className:"rounded-2xl shadow-sm hover:shadow-md transition-shadow","data-pol-id":"41ra8j",children:[n.jsx(He,{className:"flex flex-row items-center justify-between space-y-0 pb-2","data-pol-id":"6gkjmg",children:n.jsxs("div",{className:"flex items-center gap-3","data-pol-id":"icuhpw",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center","data-pol-id":"84z6rr",children:n.jsx(jA,{className:"w-6 h-6 text-primary","data-pol-id":"aejp2q"})}),n.jsxs("div",{"data-pol-id":"5uot8n",children:[n.jsx(Ge,{className:"text-xl font-bold","data-pol-id":"k7fvb3",children:"i-Decide"}),n.jsx(mt,{"data-pol-id":"ib05b9",children:"Decision Intelligence"})]})]})}),n.jsx(Re,{className:"space-y-4","data-pol-id":"kxe1rs",children:U?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4","data-pol-id":"ebg5xu",children:[n.jsxs(qr,{to:"/retina/modules/i-decide?filter=open",className:"space-y-2 p-4 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer","data-pol-id":"i8egso",children:[n.jsx("div",{className:"text-2xl font-bold text-foreground","data-pol-id":"w0xy3f",children:_}),n.jsx("div",{className:"text-xs text-muted-foreground mb-2","data-pol-id":"fjvp03",children:"Open Decisions"}),_>0&&n.jsxs("div",{className:"flex flex-wrap gap-1","data-pol-id":"jsowyp",children:[v.length>0&&n.jsxs(be,{variant:"outline",className:"text-xs","data-pol-id":"kgpork",children:[v.length," draft"]}),y.length>0&&n.jsxs(be,{variant:"outline",className:"text-xs","data-pol-id":"dwiewt",children:[y.length," analyzing"]}),j.length>0&&n.jsxs(be,{variant:"outline",className:"text-xs","data-pol-id":"4kn510",children:[j.length," deciding"]})]})]}),n.jsxs(qr,{to:"/retina/modules/i-decide?filter=closed&days=30",className:"space-y-2 p-4 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer","data-pol-id":"iqat5r",children:[n.jsx("div",{className:"text-2xl font-bold text-foreground","data-pol-id":"1f2hz0",children:T.length}),n.jsx("div",{className:"text-xs text-muted-foreground mb-1","data-pol-id":"hj8dvq",children:"Closed (Last 30 days)"}),O.length>0&&n.jsxs("div",{className:Ye("flex items-center gap-1 text-xs font-medium",R>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),"data-pol-id":"6eke3h",children:[R>=0?n.jsx(Th,{className:"w-3 h-3","data-pol-id":"srdf5n"}):n.jsx(Oh,{className:"w-3 h-3","data-pol-id":"qanif6"}),n.jsxs("span",{"data-pol-id":"9awxsn",children:[Math.abs(R).toFixed(1),"%"]}),n.jsx("span",{className:"text-muted-foreground","data-pol-id":"c31ugm",children:"vs prev 30d"})]})]}),n.jsxs(qr,{to:"/retina/modules/i-decide?filter=closed&days=30&sort=raroc",className:"space-y-2 p-4 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer","data-pol-id":"kxjql2",children:[n.jsx("div",{className:"text-2xl font-bold text-foreground","data-pol-id":"cgb0tl",children:I!==null?I.toFixed(4):"N/A"}),n.jsx("div",{className:"text-xs text-muted-foreground mb-1","data-pol-id":"kn7rgb",children:"Avg RAROC (Last 30 days)"}),I!==null&&$!==null&&n.jsxs("div",{className:Ye("flex items-center gap-1 text-xs font-medium",K>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),"data-pol-id":"zlmp1e",children:[K>=0?n.jsx(Th,{className:"w-3 h-3","data-pol-id":"vj5jed"}):n.jsx(Oh,{className:"w-3 h-3","data-pol-id":"0dl5vx"}),n.jsxs("span",{"data-pol-id":"pl2s8e",children:[Math.abs(K).toFixed(1),"%"]}),n.jsx("span",{className:"text-muted-foreground","data-pol-id":"x35fes",children:"vs prev 30d"})]})]})]}),n.jsx(qr,{to:"/retina/modules/i-decide",className:"block","data-pol-id":"oj4p32",children:n.jsxs(le,{className:"w-full","data-pol-id":"14yrqo",children:["Open i-Decide",n.jsx(Eh,{className:"w-4 h-4 ml-2","data-pol-id":"zhsc1q"})]})})]}):n.jsxs("div",{className:"py-6 text-center space-y-3","data-pol-id":"vhjv3o",children:[n.jsx("p",{className:"text-sm text-muted-foreground","data-pol-id":"011cz4",children:"Run a simulation and close a decision to populate KPIs"}),n.jsx(qr,{to:"/retina/modules/i-decide","data-pol-id":"a1wfx4",children:n.jsxs(le,{"data-pol-id":"dsvfx8",children:[n.jsx(jA,{className:"w-4 h-4 mr-2","data-pol-id":"fs5j5i"}),"Open i-Decide"]})})]})})]}),F.length>0&&n.jsxs("div",{className:"space-y-6","data-pol-id":"5russu",children:[n.jsxs("div",{"data-pol-id":"o8ha0u",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2","data-pol-id":"aar0hu",children:"Post-Decision Insights"}),n.jsx("p",{className:"text-muted-foreground","data-pol-id":"8qz8s9",children:"Tracking actual outcomes vs expectations for decisions closed 30+ days ago"})]}),F.map(H=>(S.find(X=>X.id===H.decisionId),n.jsxs("div",{className:"relative","data-pol-id":"15ncz8",children:[n.jsx(At,{"data-pol-id":"j88o7t",children:n.jsxs(Ct,{"data-pol-id":"mngmt6",children:[n.jsx(_t,{asChild:!0,"data-pol-id":"kv3kg8",children:n.jsx("button",{onClick:()=>{m(H.decisionId),u(!0)},className:"absolute -top-2 -right-2 z-10 w-10 h-10 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 transition-all hover:scale-110 flex items-center justify-center shadow-lg","data-pol-id":"bt4wba",children:n.jsx($i,{className:"w-5 h-5","data-pol-id":"wgfvki"})})}),n.jsx(St,{"data-pol-id":"hesiym",children:n.jsx("p",{"data-pol-id":"ux9ky4",children:"View feedback loop"})})]})}),n.jsx(LCe,{metrics:H,"data-pol-id":"tt3whe"})]},H.decisionId)))]}),n.jsx(XCe,{tenantId:e.tenantId,decisions:b,onDecisionsUpdate:H=>{H.forEach(X=>{i(X)})},onAuditEvent:(H,X)=>{a(H,X)},"data-pol-id":"ec3pos"}),U&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6","data-pol-id":"j6t583",children:[n.jsx(L2,{value:J.antifragility_index,"data-pol-id":"ajejil"}),n.jsx("div",{className:"lg:col-span-2","data-pol-id":"17iqkm",children:n.jsx(o_e,{metrics:J,"data-pol-id":"meu8jx"})})]}),U&&n.jsxs("div",{className:"space-y-4","data-pol-id":"7fi9cm",children:[n.jsxs("div",{"data-pol-id":"e9m7j2",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2","data-pol-id":"axl44z",children:"Antifragility Overview"}),n.jsx("p",{className:"text-muted-foreground","data-pol-id":"g2o64p",children:"Quick snapshot of system-wide antifragility metrics"})]}),n.jsx(k_e,{data:G,"data-pol-id":"8pal5h"})]}),n.jsx(C_e,{detailed:!0,"data-pol-id":"zy4fld"}),U&&(()=>{const H=b.flatMap(ge=>(ge.linkedSignals||[]).map(he=>({signalId:he.signalId,name:he.variableKey||he.signalId,category:"Market",currentValue:0,trend:"stable",lastUpdated:Date.now()}))),X=vg(e.tenantId),ne=b.flatMap(ge=>!ge.learningTrace||ge.learningTrace.length===0?[]:ge.learningTrace.map((he,ue)=>({id:`${ge.id}-outcome-${ue}`,decisionId:ge.id,actualValue:he.utility,expectedValue:he.utility*.9,variance:.1,loggedAt:he.timestamp,triggeredAdjustment:he.adjustmentCount>0}))),ie=b.flatMap(ge=>gu(ge.id).map(he=>({...he,decisionId:ge.id}))),ce=F_e(e.tenantId,b,H,X,ne,ie);return n.jsx(kAe,{graph:ce,onAuditEvent:(ge,he)=>{a(ge,he)}})})(),Y.length>0&&n.jsx($_e,{portfolios:Y,onCellClick:(H,X)=>{console.log(`Clicked portfolio ${H}, dimension ${X}`),a("fragility_heatmap_cell_clicked",{portfolioId:H,dimension:X,timestamp:Date.now()})},onOpenResiliencePolicy:()=>g(!0),onAuditEvent:(H,X)=>{a(H,X)},"data-pol-id":"hgxma1"}),n.jsx(M_e,{open:p,onOpenChange:g,trendData:(()=>{const H=J.antifragility_index,X=1-J.guardrail_breach_rate,ne=J.learning_rate,ie=J.shock_absorption*100,ce=H>=60?"improving":H>=40?"stable":"declining",ge=X<=.15?"decreasing":X>=.25?"increasing":"stable";return{avgAntifragilityIndex:H,antifragilityTrend:ce,breachRate:X,breachTrend:ge,learningRate:ne,adaptationScore:ie,totalDecisions:b.length,totalPortfolios:q.length}})(),recommendations:(()=>{const H=[];return Y.forEach(X=>{X.dimensions.partner>=70&&H.push({id:`rec-partner-${X.portfolioId}`,guardrailType:"Partner Dependency Score Max",currentThreshold:80,recommendedThreshold:70,direction:"tighten",confidence:90,rationale:`${X.portfolioName} shows high partner fragility (${X.dimensions.partner}). Recommend tighter dependency controls.`,impactedDecisions:X.decisionCount,riskLevel:"high"}),X.dimensions.operational>=70&&H.push({id:`rec-operational-${X.portfolioId}`,guardrailType:"Operational Risk Threshold",currentThreshold:.25,recommendedThreshold:.2,direction:"tighten",confidence:88,rationale:`${X.portfolioName} shows elevated operational fragility (${X.dimensions.operational}). Stricter controls needed.`,impactedDecisions:X.decisionCount,riskLevel:"high"}),X.dimensions.market>=70&&H.push({id:`rec-market-${X.portfolioId}`,guardrailType:"Market Volatility Limit",currentThreshold:.3,recommendedThreshold:.25,direction:"tighten",confidence:85,rationale:`${X.portfolioName} shows high market fragility (${X.dimensions.market}). Recommend tighter volatility limits.`,impactedDecisions:X.decisionCount,riskLevel:"high"}),X.dimensions.financial<=30&&H.push({id:`rec-financial-${X.portfolioId}`,guardrailType:"Financial Risk Threshold",currentThreshold:1e6,recommendedThreshold:12e5,direction:"loosen",confidence:75,rationale:`${X.portfolioName} shows low financial fragility (${X.dimensions.financial}). Organization can handle higher thresholds.`,impactedDecisions:X.decisionCount,riskLevel:"low"})}),J.antifragility_index>=70&&H.push({id:"rec-general-loosen-var",guardrailType:"VaR95 Threshold",currentThreshold:1e6,recommendedThreshold:12e5,direction:"loosen",confidence:85,rationale:`Strong antifragility index (${J.antifragility_index.toFixed(0)}). Organization shows effective adaptation to volatility.`,impactedDecisions:Math.floor(b.length*.6),riskLevel:"low"}),J.guardrail_breach_rate>=.25&&H.push({id:"rec-general-tighten-raroc",guardrailType:"RAROC Minimum",currentThreshold:.12,recommendedThreshold:.18,direction:"tighten",confidence:92,rationale:`High breach rate (${(J.guardrail_breach_rate*100).toFixed(1)}%). Stricter risk-adjusted return requirements needed.`,impactedDecisions:Math.floor(b.length*.7),riskLevel:"high"}),H})(),onApplyRecommendations:H=>{console.log("Applying recommendations:",H),a("resilience_policy_applied",{tenantId:e.tenantId,timestamp:Date.now(),recommendationCount:H.length})},onAuditEvent:(H,X)=>{a(H,X)},"data-pol-id":"vjx6ab"}),n.jsx(OCe,{onConfigureClick:()=>l(!0),"data-pol-id":"5pzwuq"}),n.jsx(DCe,{open:o,onOpenChange:l,onAuditEvent:(H,X)=>{a(H,X)},"data-pol-id":"j2293k"}),f&&(()=>{const H=S.find(ce=>ce.id===f);if(!H)return null;const X=H.options.find(ce=>ce.id===H.chosenOptionId),ne=Math.random()>.3,ie=ne&&Math.random()>.4;return n.jsx(GO,{open:d,onOpenChange:u,decisionTitle:H.title,decisionDate:H.closedAt||Date.now(),chosenOption:(X==null?void 0:X.label)||"Unknown Option",outcomeData:ne?{logged:!0,date:(H.closedAt||Date.now())+360*60*60*1e3,summary:Math.random()>.5?"Performance exceeded expectations":"Results tracking close to projections"}:{logged:!1},adjustmentData:ie?{count:Math.floor(Math.random()*3)+1,lastAdjustment:"Tightened VaR95 threshold by 5%",date:(H.closedAt||Date.now())+480*60*60*1e3}:{count:0},"data-pol-id":"89silw"})})(),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6","data-pol-id":"mws9u4",children:[n.jsxs(Ae,{className:"rounded-2xl shadow-sm","data-pol-id":"lvew6r",children:[n.jsxs(He,{"data-pol-id":"bq9vxm",children:[n.jsx(Ge,{"data-pol-id":"egbx49",children:"Recent Activity"}),n.jsx(mt,{"data-pol-id":"ooknz2",children:"Latest events across all modules"})]}),n.jsx(Re,{"data-pol-id":"x34948",children:n.jsx("div",{className:"space-y-4","data-pol-id":"qgwnvw",children:[1,2,3,4].map(H=>n.jsxs("div",{className:"flex items-start gap-3 pb-4 border-b border-border last:border-0 last:pb-0","data-pol-id":"c2t4dh",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2","data-pol-id":"qld72q"}),n.jsxs("div",{className:"flex-1 min-w-0","data-pol-id":"kh3aq0",children:[n.jsxs("p",{className:"text-sm font-medium text-foreground","data-pol-id":"mfy4qn",children:["Activity ",H]}),n.jsx("p",{className:"text-xs text-muted-foreground","data-pol-id":"cfckkj",children:"Placeholder event description"})]}),n.jsxs("span",{className:"text-xs text-muted-foreground whitespace-nowrap","data-pol-id":"mdrz3h",children:[H,"h ago"]})]},H))})})]}),n.jsxs(Ae,{className:"rounded-2xl shadow-sm","data-pol-id":"5od4b8",children:[n.jsxs(He,{"data-pol-id":"808t1p",children:[n.jsx(Ge,{"data-pol-id":"pe46bf",children:"Module Status"}),n.jsx(mt,{"data-pol-id":"3yyz8f",children:"Current operational status"})]}),n.jsx(Re,{"data-pol-id":"4384ku",children:n.jsx("div",{className:"space-y-3","data-pol-id":"d9z0xv",children:["i-Scan","i-Event","i-Audit","Fragile-i","i-Decide"].map(H=>n.jsxs("div",{className:"flex items-center justify-between","data-pol-id":"u4p9ge",children:[n.jsx("span",{className:"text-sm font-medium text-foreground","data-pol-id":"oa6bmw",children:H}),n.jsxs("div",{className:"flex items-center gap-2","data-pol-id":"6543gz",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500","data-pol-id":"iacsjg"}),n.jsx("span",{className:"text-xs text-muted-foreground","data-pol-id":"goc0hy",children:"Operational"})]})]},H))})})]})]})]})}function TAe({module:e}){return n.jsxs(Ae,{className:"rounded-2xl shadow-sm hover:shadow-lg transition-all duration-300 group",children:[n.jsxs(He,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-xl bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:n.jsx("div",{className:"text-primary",children:e.icon})}),n.jsx(be,{variant:"outline",className:"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20",children:"Active"})]}),n.jsx(Ge,{className:"text-xl",children:e.name}),n.jsx(mt,{className:"text-sm leading-relaxed",children:e.description})]}),n.jsx(Re,{children:n.jsx(qr,{to:e.path,children:n.jsxs(le,{variant:"ghost",className:"w-full justify-between group-hover:bg-accent",children:[n.jsx("span",{children:"Open Module"}),n.jsx(Eh,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})})]})}function RAe(){const{tenant:e}=Fr(),t=tae(e.tenantId);return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Modules"}),n.jsx("p",{className:"text-muted-foreground",children:"Explore and access the Retina Intelligence Suite modules. Each module provides specialized capabilities for your operational needs."})]}),n.jsx("div",{className:"flex gap-6",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.length," Active"]})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(r=>n.jsx(TAe,{module:r},r.key))})]})}const ua=N.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:Ye("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));ua.displayName="Textarea";var JO="Radio",[PAe,eK]=ai(JO),[MAe,DAe]=PAe(JO),tK=N.forwardRef((e,t)=>{const{__scopeRadio:r,name:a,checked:s=!1,required:i,disabled:o,value:l="on",onCheck:d,form:u,...f}=e,[m,p]=N.useState(null),g=br(t,y=>p(y)),b=N.useRef(!1),v=m?u||!!m.closest("form"):!0;return n.jsxs(MAe,{scope:r,checked:s,disabled:o,children:[n.jsx(ar.button,{type:"button",role:"radio","aria-checked":s,"data-state":sK(s),"data-disabled":o?"":void 0,disabled:o,value:l,...f,ref:g,onClick:yt(e.onClick,y=>{s||d==null||d(),v&&(b.current=y.isPropagationStopped(),b.current||y.stopPropagation())})}),v&&n.jsx(aK,{control:m,bubbles:!b.current,name:a,value:l,checked:s,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});tK.displayName=JO;var rK="RadioIndicator",nK=N.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:a,...s}=e,i=DAe(rK,r);return n.jsx(Cs,{present:a||i.checked,children:n.jsx(ar.span,{"data-state":sK(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})})});nK.displayName=rK;var LAe="RadioBubbleInput",aK=N.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:a=!0,...s},i)=>{const o=N.useRef(null),l=br(o,i),d=My(r),u=_y(t);return N.useEffect(()=>{const f=o.current;if(!f)return;const m=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==r&&g){const b=new Event("click",{bubbles:a});g.call(f,r),f.dispatchEvent(b)}},[d,r,a]),n.jsx(ar.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});aK.displayName=LAe;function sK(e){return e?"checked":"unchecked"}var IAe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],z2="RadioGroup",[$Ae]=ai(z2,[Pg,eK]),iK=Pg(),oK=eK(),[FAe,BAe]=$Ae(z2),lK=N.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:a,defaultValue:s,value:i,required:o=!1,disabled:l=!1,orientation:d,dir:u,loop:f=!0,onValueChange:m,...p}=e,g=iK(r),b=Jh(u),[v,y]=Nl({prop:i,defaultProp:s??null,onChange:m,caller:z2});return n.jsx(FAe,{scope:r,name:a,required:o,disabled:l,value:v,onValueChange:y,children:n.jsx(b3,{asChild:!0,...g,orientation:d,dir:b,loop:f,children:n.jsx(ar.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":l?"":void 0,dir:b,...p,ref:t})})})});lK.displayName=z2;var cK="RadioGroupItem",dK=N.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:a,...s}=e,i=BAe(cK,r),o=i.disabled||a,l=iK(r),d=oK(r),u=N.useRef(null),f=br(t,u),m=i.value===s.value,p=N.useRef(!1);return N.useEffect(()=>{const g=v=>{IAe.includes(v.key)&&(p.current=!0)},b=()=>p.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",b)}},[]),n.jsx(j3,{asChild:!0,...l,focusable:!o,active:m,children:n.jsx(tK,{disabled:o,required:i.required,checked:m,...d,...s,name:i.name,ref:f,onCheck:()=>i.onValueChange(s.value),onKeyDown:yt(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:yt(s.onFocus,()=>{var g;p.current&&((g=u.current)==null||g.click())})})})});dK.displayName=cK;var zAe="RadioGroupIndicator",uK=N.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...a}=e,s=oK(r);return n.jsx(nK,{...s,...a,ref:t})});uK.displayName=zAe;var fK=lK,hK=dK,qAe=uK;const nu=N.forwardRef(({className:e,...t},r)=>n.jsx(fK,{className:Ye("grid gap-2",e),...t,ref:r}));nu.displayName=fK.displayName;const yi=N.forwardRef(({className:e,...t},r)=>n.jsx(hK,{ref:r,className:Ye("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(qAe,{className:"flex items-center justify-center",children:n.jsx(P9,{className:"h-3.5 w-3.5 fill-primary"})})}));yi.displayName=hK.displayName;function uc({className:e,...t}){return n.jsx("div",{className:Ye("animate-pulse rounded-md bg-primary/10",e),...t})}const UAe=[{id:"sig-cost-index",label:"Cost Index (CPI)",category:"economic",unit:"index",description:"Consumer Price Index tracking inflation and cost trends",updateFrequency:"daily",currentValue:285.2,historicalData:fl(285.2,30,.02),trend:"up",volatility:.15},{id:"sig-demand-score",label:"Demand Score",category:"market",unit:"score",description:"Market demand indicator based on search trends and inquiries",updateFrequency:"hourly",currentValue:72.5,historicalData:fl(72.5,30,.05),trend:"up",volatility:.25},{id:"sig-market-volatility",label:"Market Volatility",category:"market",unit:"percentage",description:"Market volatility index measuring price fluctuations",updateFrequency:"realtime",currentValue:18.3,historicalData:fl(18.3,30,.1),trend:"stable",volatility:.4},{id:"sig-competitor-price",label:"Competitor Pricing",category:"competitor",unit:"currency",description:"Average competitor pricing for similar products/services",updateFrequency:"daily",currentValue:149.99,historicalData:fl(149.99,30,.03),trend:"down",volatility:.12},{id:"sig-supply-chain",label:"Supply Chain Index",category:"operational",unit:"score",description:"Supply chain health indicator (0-100)",updateFrequency:"daily",currentValue:91.2,historicalData:fl(91.2,30,.02),trend:"stable",volatility:.08},{id:"sig-customer-sentiment",label:"Customer Sentiment",category:"customer",unit:"score",description:"Customer satisfaction and sentiment score (0-10)",updateFrequency:"daily",currentValue:8.1,historicalData:fl(8.1,30,.04),trend:"up",volatility:.18},{id:"sig-interest-rate",label:"Interest Rate",category:"financial",unit:"percentage",description:"Central bank interest rate affecting borrowing costs",updateFrequency:"weekly",currentValue:5.25,historicalData:fl(5.25,30,.01),trend:"stable",volatility:.05},{id:"sig-fx-rate",label:"FX Rate (USD/EUR)",category:"financial",unit:"rate",description:"Foreign exchange rate for international operations",updateFrequency:"realtime",currentValue:1.08,historicalData:fl(1.08,30,.02),trend:"down",volatility:.22},{id:"sig-regulatory-risk",label:"Regulatory Risk Index",category:"regulatory",unit:"score",description:"Regulatory change risk indicator (0-100)",updateFrequency:"weekly",currentValue:32.5,historicalData:fl(32.5,30,.06),trend:"up",volatility:.3},{id:"sig-tech-adoption",label:"Technology Adoption Rate",category:"technology",unit:"percentage",description:"Rate of technology adoption in target market",updateFrequency:"weekly",currentValue:67.8,historicalData:fl(67.8,30,.03),trend:"up",volatility:.15},{id:"sig-employee-satisfaction",label:"Employee Satisfaction",category:"operational",unit:"score",description:"Internal employee satisfaction score (0-100)",updateFrequency:"weekly",currentValue:78.5,historicalData:fl(78.5,30,.02),trend:"stable",volatility:.1},{id:"sig-market-share",label:"Market Share",category:"market",unit:"percentage",description:"Company market share in target segment",updateFrequency:"weekly",currentValue:23.4,historicalData:fl(23.4,30,.02),trend:"up",volatility:.12}];function fl(e,t,r){const a=[],s=Date.now(),i=1440*60*1e3;for(let o=t;o>=0;o--){const l=s-o*i,d=(Math.random()-.5)*2*r,u=e*(1+d*(o/t));a.push({timestamp:l,value:u})}return a}function VAe(e,t){const r=[{source:"Industry Report Q4 2024",relevance:92,snippet:"Market analysis indicates a 23% increase in demand for cloud-based solutions, with enterprise adoption accelerating...",url:"https://example.com/reports/q4-2024"},{source:"Competitor Analysis - TechCorp",relevance:87,snippet:"Recent product launches show focus on AI integration and automation, capturing 15% market share in the segment...",url:"https://example.com/analysis/techcorp"},{source:"Customer Feedback Survey",relevance:78,snippet:"85% of respondents expressed interest in enhanced security features, citing compliance requirements as primary driver...",url:"https://example.com/surveys/customer-feedback"}];return e==="t-acme"&&(r[0].source="Acme Industry Insights",r[0].relevance=95),r}async function HAe(e,t){return await new Promise(a=>setTimeout(a,800)),{signals:VAe(t),decisionId:e,tenantId:t}}function GAe(e,t){const r=[{id:"evt-001",title:"Security Alert: Unusual Access Pattern",severity:"high",status:"investigating",timestamp:Date.now()-36e5,description:"Multiple failed login attempts detected from unknown IP addresses"},{id:"evt-002",title:"Performance Degradation in API Gateway",severity:"medium",status:"open",timestamp:Date.now()-72e5,description:"Response times increased by 40% in the last hour"},{id:"evt-003",title:"Database Backup Completed Successfully",severity:"low",status:"resolved",timestamp:Date.now()-108e5,description:"Scheduled backup completed without errors"}];return e==="t-acme"&&(r[0].title="Acme Security Alert: Access Review Required",r[0].severity="critical"),r}async function WAe(e,t){return await new Promise(a=>setTimeout(a,600)),{events:GAe(e),decisionId:t,tenantId:e}}function KAe(e){return function(){let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}function mK(e){let t=0,r=0;for(;t===0;)t=e();for(;r===0;)r=e();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*r)}function YAe(e,t,r){return e+t*mK(r)}function XAe(e,t,r){const a=e+t*mK(r);return Math.exp(a)}function JAe(e,t,r,a){const s=a(),i=(t-e)/(r-e);return s<i?e+Math.sqrt(s*(r-e)*(t-e)):r-Math.sqrt((1-s)*(r-e)*(r-t))}function ZAe(e,t,r){return e+(t-e)*r()}function QAe(e,t,r){const{dist:a,params:s}=e;let i=s;switch(r&&r.targetVarId===e.id&&(a==="normal"?i={...s,mean:r.posteriorMean,sd:r.posteriorSd}:a==="lognormal"&&(i={...s,mu:r.posteriorMean,sigma:r.posteriorSd})),a){case"normal":return YAe(i.mean??0,i.sd??1,t);case"lognormal":return XAe(i.mu??0,i.sigma??1,t);case"triangular":return JAe(i.min??-1,i.mode??0,i.max??1,t);case"uniform":return ZAe(i.min??0,i.max??1,t);default:return 0}}function pK(e,t){const r=e/t.scale;switch(t.mode){case"CARA":return t.a>1e-10?1-Math.exp(-t.a*r):r;case"CRRA":const a=r*t.scale;return a<=0?-1/0:Math.abs(t.a-1)<1e-10?Math.log(a):Math.pow(a,1-t.a)/(1-t.a);case"Exponential":return t.a>1e-10?-Math.exp(-t.a*r):r;case"Quadratic":return r-t.a/2*r*r;case"Power":const s=r*t.scale;if(s<=0)return-1/0;const i=1-t.a;return Math.abs(i)<1e-10?Math.log(s):Math.pow(s,i);default:return r}}function e4e(e,t){switch(t.mode){case"CARA":return t.a>1e-10?-1/t.a*Math.log(1-e)*t.scale:e*t.scale;case"CRRA":if(Math.abs(t.a-1)<1e-10)return Math.exp(e);{const a=(1-t.a)*e;return a<=0?0:Math.pow(a,1/(1-t.a))}case"Exponential":return t.a>1e-10?-1/t.a*Math.log(-e)*t.scale:e*t.scale;case"Quadratic":if(t.a>1e-10){const a=1-2*t.a*e;return a<0?0:(1-Math.sqrt(a))/t.a*t.scale}else return e*t.scale;case"Power":const r=1-t.a;return Math.abs(r)<1e-10?Math.exp(e):e<=0?0:Math.pow(e,1/r);default:return e*t.scale}}function gK(e,t){if(e.length!==t.length||e.length===0)return 0;const r=e.length,a=jk(e),s=jk(t),i=a.reduce((f,m)=>f+m,0)/r,o=s.reduce((f,m)=>f+m,0)/r;let l=0,d=0,u=0;for(let f=0;f<r;f++){const m=a[f]-i,p=s[f]-o;l+=m*p,d+=m*m,u+=p*p}return d===0||u===0?0:l/Math.sqrt(d*u)}function jk(e){const t=e.map((a,s)=>({val:a,idx:s}));t.sort((a,s)=>a.val-s.val);const r=new Array(e.length);for(let a=0;a<t.length;a++)r[t[a].idx]=a;return r}function xK(e,t,r,a){const s=e.length;if(s===0)return{bCorr:t,achievedRho:0};const i=jk(e),o=[...t].sort((f,m)=>f-m),l=new Array(s),d=Math.abs(r);for(let f=0;f<s;f++){const m=Math.floor(a()*s),p=d;let g=Math.round((1-p)*m+p*i[f]);g=Math.max(0,Math.min(s-1,g)),r>=0?l[f]=o[g]:l[f]=o[s-1-g]}const u=gK(e,l);return{bCorr:l,achievedRho:u}}function t4e(e,t){let r=0;for(let a=0;a<e.length;a++)for(let s=0;s<e[a].length;s++){const i=e[a][s]-t[a][s];r+=i*i}return Math.sqrt(r)}function r4e(e,t){const r=t.length,a=[];for(let s=0;s<r;s++){a[s]=[];for(let i=0;i<r;i++)if(s===i)a[s][i]=1;else{const o=e.get(t[s]),l=e.get(t[i]);o&&l?a[s][i]=gK(o,l):a[s][i]=0}}return a}function n4e(e){const t=e.length;for(let r=0;r<t;r++)for(let a=r+1;a<t;a++)if(Math.abs(e[r][a]-e[a][r])>1e-6)return!1;return!0}function a4e(e){const t=e.length,r=Array(t).fill(0).map(()=>Array(t).fill(0));for(let a=0;a<t;a++)for(let s=0;s<=a;s++){let i=0;for(let o=0;o<s;o++)i+=r[a][o]*r[s][o];if(a===s){const o=e[a][a]-i;if(o<=0)return!1;r[a][s]=Math.sqrt(o)}else r[a][s]=(e[a][s]-i)/r[s][s]}return!0}function s4e(e){const t=e.length,r=Array(t).fill(0).map(()=>Array(t).fill(0));for(let a=0;a<t;a++)for(let s=0;s<t;s++)a===s?r[a][s]=1:r[a][s]=e[a][s]*.95;return r}function i4e(e,t,r,a,s){var p;const i=t.length;if((((p=e.get(t[0]))==null?void 0:p.length)||0)===0||i===0)return{reorderedSamples:e,achievedMatrix:r,frobErr:0};n4e(r)||console.warn("Target matrix is not symmetric");let l=r;a4e(r)||(a?(l=s4e(r),console.log("Applied nearest PSD projection")):console.warn("Matrix is not positive definite, using as-is"));const d=new Map,u=t[0];d.set(u,e.get(u));for(let g=1;g<i;g++){const b=t[g];let v=e.get(b),y=0,j=0;for(let _=0;_<g;_++){const C=Math.abs(l[g][_]);C>y&&(y=C,j=_)}if(y>.01){const _=t[j],C=d.get(_),A=l[g][j],{bCorr:S}=xK(C,v,A,s);v=S}d.set(b,v)}const f=r4e(d,t),m=t4e(f,l);return{reorderedSamples:d,achievedMatrix:f,frobErr:m}}function o4e(e,t,r,a,s,i,o,l,d,u,f,m){const p=new Map;for(const V of t){const G=[];for(let q=0;q<r;q++)G.push(QAe(V,a,u));p.set(V.id,G)}let g,b;if(f&&f.k===t.length){const V=t.map(Q=>Q.id),{reorderedSamples:G,achievedMatrix:q,frobErr:Y}=i4e(p,V,f.matrix,f.useNearestPD,a);for(const[Q,F]of G.entries())p.set(Q,F);g={k:f.k,target:f.matrix,achieved:q,froErr:Y}}else if(d){const{varAId:V,varBId:G,targetRho:q}=d,Y=p.get(V),Q=p.get(G);if(Y&&Q&&V!==G){const{bCorr:F,achievedRho:z}=xK(Y,Q,q,a);p.set(G,F),b=z}}const v=[];for(let V=0;V<r;V++){let G=e.expectedReturn??0,q=e.cost??0;for(const Y of t){const Q=p.get(Y.id);if(!Q)continue;const F=Q[V],H=1+(Y.weight??1)*F;Y.appliesTo==="return"?G=Math.max(0,G*H):q=Math.max(0,q*H)}if(o&&l){const Q=a()<o.pUndercut?"Undercut":"Match",F=o.multipliers[Q].retMult[l],z=o.multipliers[Q].costMult[l];G=G*F,q=q*z}v.push(G-q)}const y=e.horizonMonths??m??12,j=y/12,_=v.map(V=>V*j),C=[..._].sort((V,G)=>V-G),A=_.reduce((V,G)=>V+G,0)/_.length,S=Math.floor(_.length*.05),T=C[S],O=C.slice(0,S+1),R=O.length>0?O.reduce((V,G)=>V+G,0)/O.length:T,I=Math.max(1,Math.abs(R))*Math.sqrt(j),D=A/I;let $,K;if(s){const V=_.map(G=>pK(G,s));$=V.reduce((G,q)=>G+q,0)/V.length,K=e4e($,s)}let U,J;if(i){const V=C.filter(H=>H<0),G=V.length/v.length,q=V.length>0?V.reduce((H,X)=>H+Math.abs(X),0)/V.length:0,Y=G*q,Q=i.insuranceRate*(e.cost??0),F=i.contingencyOnCap*I,z=e.mitigationCost??0;U=Y+Q+F+z,J={expectedLoss:Y,insurance:Q,contingency:F,mitigation:z}}return{optionId:e.id,optionLabel:e.label,outcomes:_,ev:A,var95:T,cvar95:R,economicCapital:I,raroc:D,expectedUtility:$,certaintyEquivalent:K,tcor:U,tcorComponents:J,achievedSpearman:b,copulaSnapshot:g,horizonMonths:y}}function vi(e,t,r,a,s,i,o,l,d,u,f,m){const p=KAe(a);return e.map(g=>{var v;const b=(v=l==null?void 0:l.find(y=>y.optionId===g.id))==null?void 0:v.strategy;return o4e(g,t,r,p,s,i,o,b,d,u,f,m)})}const i$=[{id:"var-1",name:"Demand",appliesTo:"return",dist:"triangular",params:{min:-.2,mode:0,max:.4},weight:1},{id:"var-2",name:"CostInflation",appliesTo:"cost",dist:"normal",params:{mean:.05,sd:.03},weight:1}];function l4e(e){switch(e){case"normal":return["mean","sd"];case"lognormal":return["mu","sigma"];case"triangular":return["min","mode","max"];case"uniform":return["min","max"];default:return[]}}function c4e(e){const{dist:t,params:r}=e;switch(t){case"normal":return`N(=${r.mean??0}, =${r.sd??1})`;case"lognormal":return`LogN(=${r.mu??0}, =${r.sigma??1})`;case"triangular":return`Tri(${r.min??-1}, ${r.mode??0}, ${r.max??1})`;case"uniform":return`U(${r.min??0}, ${r.max??1})`;default:return""}}var vK=["PageUp","PageDown"],yK=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],bK={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Gg="Slider",[wk,d4e,u4e]=Rj(Gg),[jK]=ai(Gg,[u4e]),[f4e,q2]=jK(Gg),wK=N.forwardRef((e,t)=>{const{name:r,min:a=0,max:s=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:d=0,defaultValue:u=[a],value:f,onValueChange:m=()=>{},onValueCommit:p=()=>{},inverted:g=!1,form:b,...v}=e,y=N.useRef(new Set),j=N.useRef(0),C=o==="horizontal"?h4e:m4e,[A=[],S]=Nl({prop:f,defaultProp:u,onChange:D=>{var K;(K=[...y.current][j.current])==null||K.focus(),m(D)}}),T=N.useRef(A);function O(D){const $=y4e(A,D);I(D,$)}function R(D){I(D,j.current)}function M(){const D=T.current[j.current];A[j.current]!==D&&p(A)}function I(D,$,{commit:K}={commit:!1}){const U=N4e(i),J=S4e(Math.round((D-a)/i)*i+a,U),V=Ev(J,[a,s]);S((G=[])=>{const q=x4e(G,V,$);if(w4e(q,d*i)){j.current=q.indexOf(V);const Y=String(q)!==String(G);return Y&&K&&p(q),Y?q:G}else return G})}return n.jsx(f4e,{scope:e.__scopeSlider,name:r,disabled:l,min:a,max:s,valueIndexToChangeRef:j,thumbs:y.current,values:A,orientation:o,form:b,children:n.jsx(wk.Provider,{scope:e.__scopeSlider,children:n.jsx(wk.Slot,{scope:e.__scopeSlider,children:n.jsx(C,{"aria-disabled":l,"data-disabled":l?"":void 0,...v,ref:t,onPointerDown:yt(v.onPointerDown,()=>{l||(T.current=A)}),min:a,max:s,inverted:g,onSlideStart:l?void 0:O,onSlideMove:l?void 0:R,onSlideEnd:l?void 0:M,onHomeKeyDown:()=>!l&&I(a,0,{commit:!0}),onEndKeyDown:()=>!l&&I(s,A.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:$})=>{if(!l){const J=vK.includes(D.key)||D.shiftKey&&yK.includes(D.key)?10:1,V=j.current,G=A[V],q=i*J*$;I(G+q,V,{commit:!0})}}})})})})});wK.displayName=Gg;var[NK,SK]=jK(Gg,{startEdge:"left",endEdge:"right",size:"width",direction:1}),h4e=N.forwardRef((e,t)=>{const{min:r,max:a,dir:s,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:d,onStepKeyDown:u,...f}=e,[m,p]=N.useState(null),g=br(t,C=>p(C)),b=N.useRef(void 0),v=Jh(s),y=v==="ltr",j=y&&!i||!y&&i;function _(C){const A=b.current||m.getBoundingClientRect(),S=[0,A.width],O=ZO(S,j?[r,a]:[a,r]);return b.current=A,O(C-A.left)}return n.jsx(NK,{scope:e.__scopeSlider,startEdge:j?"left":"right",endEdge:j?"right":"left",direction:j?1:-1,size:"width",children:n.jsx(CK,{dir:v,"data-orientation":"horizontal",...f,ref:g,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const A=_(C.clientX);o==null||o(A)},onSlideMove:C=>{const A=_(C.clientX);l==null||l(A)},onSlideEnd:()=>{b.current=void 0,d==null||d()},onStepKeyDown:C=>{const S=bK[j?"from-left":"from-right"].includes(C.key);u==null||u({event:C,direction:S?-1:1})}})})}),m4e=N.forwardRef((e,t)=>{const{min:r,max:a,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:d,...u}=e,f=N.useRef(null),m=br(t,f),p=N.useRef(void 0),g=!s;function b(v){const y=p.current||f.current.getBoundingClientRect(),j=[0,y.height],C=ZO(j,g?[a,r]:[r,a]);return p.current=y,C(v-y.top)}return n.jsx(NK,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:n.jsx(CK,{"data-orientation":"vertical",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const y=b(v.clientY);i==null||i(y)},onSlideMove:v=>{const y=b(v.clientY);o==null||o(y)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:v=>{const j=bK[g?"from-bottom":"from-top"].includes(v.key);d==null||d({event:v,direction:j?-1:1})}})})}),CK=N.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:a,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:d,...u}=e,f=q2(Gg,r);return n.jsx(ar.span,{...u,ref:t,onKeyDown:yt(e.onKeyDown,m=>{m.key==="Home"?(o(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):vK.concat(yK).includes(m.key)&&(d(m),m.preventDefault())}),onPointerDown:yt(e.onPointerDown,m=>{const p=m.target;p.setPointerCapture(m.pointerId),m.preventDefault(),f.thumbs.has(p)?p.focus():a(m)}),onPointerMove:yt(e.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&s(m)}),onPointerUp:yt(e.onPointerUp,m=>{const p=m.target;p.hasPointerCapture(m.pointerId)&&(p.releasePointerCapture(m.pointerId),i(m))})})}),_K="SliderTrack",AK=N.forwardRef((e,t)=>{const{__scopeSlider:r,...a}=e,s=q2(_K,r);return n.jsx(ar.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...a,ref:t})});AK.displayName=_K;var Nk="SliderRange",kK=N.forwardRef((e,t)=>{const{__scopeSlider:r,...a}=e,s=q2(Nk,r),i=SK(Nk,r),o=N.useRef(null),l=br(t,o),d=s.values.length,u=s.values.map(p=>TK(p,s.min,s.max)),f=d>1?Math.min(...u):0,m=100-Math.max(...u);return n.jsx(ar.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...a,ref:l,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:m+"%"}})});kK.displayName=Nk;var Sk="SliderThumb",OK=N.forwardRef((e,t)=>{const r=d4e(e.__scopeSlider),[a,s]=N.useState(null),i=br(t,l=>s(l)),o=N.useMemo(()=>a?r().findIndex(l=>l.ref.current===a):-1,[r,a]);return n.jsx(p4e,{...e,ref:i,index:o})}),p4e=N.forwardRef((e,t)=>{const{__scopeSlider:r,index:a,name:s,...i}=e,o=q2(Sk,r),l=SK(Sk,r),[d,u]=N.useState(null),f=br(t,_=>u(_)),m=d?o.form||!!d.closest("form"):!0,p=_y(d),g=o.values[a],b=g===void 0?0:TK(g,o.min,o.max),v=v4e(a,o.values.length),y=p==null?void 0:p[l.size],j=y?b4e(y,b,l.direction):0;return N.useEffect(()=>{if(d)return o.thumbs.add(d),()=>{o.thumbs.delete(d)}},[d,o.thumbs]),n.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${b}% + ${j}px)`},children:[n.jsx(wk.ItemSlot,{scope:e.__scopeSlider,children:n.jsx(ar.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:f,style:g===void 0?{display:"none"}:e.style,onFocus:yt(e.onFocus,()=>{o.valueIndexToChangeRef.current=a})})}),m&&n.jsx(EK,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},a)]})});OK.displayName=Sk;var g4e="RadioBubbleInput",EK=N.forwardRef(({__scopeSlider:e,value:t,...r},a)=>{const s=N.useRef(null),i=br(s,a),o=My(t);return N.useEffect(()=>{const l=s.current;if(!l)return;const d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&f){const m=new Event("input",{bubbles:!0});f.call(l,t),l.dispatchEvent(m)}},[o,t]),n.jsx(ar.input,{style:{display:"none"},...r,ref:i,defaultValue:t})});EK.displayName=g4e;function x4e(e=[],t,r){const a=[...e];return a[r]=t,a.sort((s,i)=>s-i)}function TK(e,t,r){const i=100/(r-t)*(e-t);return Ev(i,[0,100])}function v4e(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function y4e(e,t){if(e.length===1)return 0;const r=e.map(s=>Math.abs(s-t)),a=Math.min(...r);return r.indexOf(a)}function b4e(e,t,r){const a=e/2,i=ZO([0,50],[0,a]);return(a-i(t)*r)*r}function j4e(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function w4e(e,t){if(t>0){const r=j4e(e);return Math.min(...r)>=t}return!0}function ZO(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(r-e[0])}}function N4e(e){return(String(e).split(".")[1]||"").length}function S4e(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var RK=wK,C4e=AK,_4e=kK,A4e=OK;const yg=N.forwardRef(({className:e,...t},r)=>n.jsxs(RK,{ref:r,className:Ye("relative flex w-full touch-none select-none items-center",e),...t,children:[n.jsx(C4e,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:n.jsx(_4e,{className:"absolute h-full bg-primary"})}),n.jsx(A4e,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));yg.displayName=RK.displayName;const Ho=N.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:Ye("w-full caption-bottom text-sm",e),...t})}));Ho.displayName="Table";const Go=N.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:Ye("[&_tr]:border-b",e),...t}));Go.displayName="TableHeader";const Wo=N.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:Ye("[&_tr:last-child]:border-0",e),...t}));Wo.displayName="TableBody";const k4e=N.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:Ye("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));k4e.displayName="TableFooter";const Yn=N.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:Ye("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Yn.displayName="TableRow";const Mt=N.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:Ye("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));Mt.displayName="TableHead";const Rt=N.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:Ye("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));Rt.displayName="TableCell";const O4e=N.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:Ye("mt-4 text-sm text-muted-foreground",e),...t}));O4e.displayName="TableCaption";function E4e({results:e,thresholds:t,onBarClick:r,selectedOptionId:a}){const s=l=>l<t.red?"hsl(0, 84%, 60%)":l<t.amber?"hsl(43, 74%, 66%)":"hsl(142, 71%, 45%)",i=e.map(l=>({label:l.optionLabel,raroc:l.raroc,optionId:l.optionId})),o=l=>{const{x:d,y:u,width:f,value:m}=l;return n.jsx("text",{x:d+f/2,y:u-5,fill:"hsl(var(--foreground))",textAnchor:"middle",fontSize:12,fontWeight:500,children:m.toFixed(2)})};return n.jsx(Cl,{width:"100%",height:300,children:n.jsxs(Vg,{data:i,margin:{top:20,right:20,left:20,bottom:40},children:[n.jsx(hu,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),n.jsx(ji,{dataKey:"label",stroke:"hsl(var(--muted-foreground))",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12}}),n.jsx(Ii,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"var(--radius)",color:"hsl(var(--popover-foreground))"},formatter:l=>l.toFixed(4),labelStyle:{color:"hsl(var(--popover-foreground))"}}),n.jsxs(po,{dataKey:"raroc",radius:[4,4,0,0],onClick:l=>r==null?void 0:r(l.optionId),cursor:"pointer",children:[i.map((l,d)=>n.jsx(cu,{fill:s(l.raroc),opacity:a?l.optionId===a?1:.4:1},`cell-${d}`)),n.jsx(jl,{content:o})]})]})})}function o$({result:e}){var d,u;const r=e.outcomes;if(!r||r.length===0)return n.jsx("div",{className:"flex items-center justify-center h-64 text-sm text-muted-foreground",children:"No outcome data available"});const a=Math.min(...r),i=(Math.max(...r)-a)/30,o=Array.from({length:30},(f,m)=>({binStart:a+m*i,binEnd:a+(m+1)*i,count:0}));r.forEach(f=>{const m=Math.min(Math.floor((f-a)/i),29);o[m].count++});const l=o.map(f=>({binLabel:f.binStart.toFixed(0),count:f.count,binMid:(f.binStart+f.binEnd)/2}));return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Cl,{width:"100%",height:300,children:n.jsxs(Vg,{data:l,margin:{top:20,right:20,left:20,bottom:40},children:[n.jsx(hu,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),n.jsx(ji,{dataKey:"binLabel",stroke:"hsl(var(--muted-foreground))",fontSize:10,angle:-45,textAnchor:"end",height:60,label:{value:"Outcome Value",position:"insideBottom",offset:-10,style:{fill:"hsl(var(--muted-foreground))",fontSize:12}}}),n.jsx(Dl,{stroke:"hsl(var(--muted-foreground))",fontSize:12,label:{value:"Frequency",angle:-90,position:"insideLeft",style:{fill:"hsl(var(--muted-foreground))",fontSize:12}}}),n.jsx(Ii,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"var(--radius)",color:"hsl(var(--popover-foreground))"},labelStyle:{color:"hsl(var(--popover-foreground))"}}),n.jsx(po,{dataKey:"count",fill:"hsl(var(--primary))",radius:[2,2,0,0],opacity:.8}),n.jsx(Nf,{x:(d=l.find(f=>f.binMid>=e.ev))==null?void 0:d.binLabel,stroke:"hsl(142, 71%, 45%)",strokeWidth:1,label:{value:"EV",position:"top",fill:"hsl(142, 71%, 45%)",fontSize:11,fontWeight:600}}),n.jsx(Nf,{x:(u=l.find(f=>f.binMid>=e.var95))==null?void 0:u.binLabel,stroke:"hsl(0, 84%, 60%)",strokeWidth:1,label:{value:"VaR95",position:"top",fill:"hsl(0, 84%, 60%)",fontSize:11,fontWeight:600}})]})}),n.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),n.jsxs("span",{className:"text-muted-foreground",children:["EV: ",n.jsx("span",{className:"font-semibold",children:e.ev.toFixed(2)})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),n.jsxs("span",{className:"text-muted-foreground",children:["VaR95:"," ",n.jsx("span",{className:"font-semibold",children:e.var95.toFixed(2)})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),n.jsxs("span",{className:"text-muted-foreground",children:["CVaR95:"," ",n.jsx("span",{className:"font-semibold",children:e.cvar95.toFixed(2)})]})]})]})]})}const T4e=Sy("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Fs=N.forwardRef(({className:e,variant:t,...r},a)=>n.jsx("div",{ref:a,role:"alert",className:Ye(T4e({variant:t}),e),...r}));Fs.displayName="Alert";const gl=N.forwardRef(({className:e,...t},r)=>n.jsx("h5",{ref:r,className:Ye("mb-1 font-medium leading-none tracking-tight",e),...t}));gl.displayName="AlertTitle";const ei=N.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Ye("text-sm [&_p]:leading-relaxed",e),...t}));ei.displayName="AlertDescription";function PK(e){return`retina:assumptions:${e}`}function fo(e){try{const t=PK(e),r=localStorage.getItem(t);return r?JSON.parse(r):[]}catch(t){return console.error("Failed to load assumptions:",t),[]}}function QO(e,t){try{const r=PK(e);localStorage.setItem(r,JSON.stringify(t))}catch(r){console.error("Failed to save assumptions:",r)}}function R4e(e,t){const r=fo(e),a={...t,id:`asmp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,updatedAt:new Date().toISOString()};return r.push(a),QO(e,r),a}function l$(e,t,r){const a=fo(e),s=a.findIndex(o=>o.id===t);if(s===-1)return null;const i={...a[s],...r,updatedAt:new Date().toISOString()};return a[s]=i,QO(e,a),i}function P4e(e,t){const r=fo(e),a=r.filter(s=>s.id!==t);return a.length===r.length?!1:(QO(e,a),!0)}function Db(e){return fo(e).filter(r=>r.critical&&r.status==="open")}function MK(e){switch(e){case 0:return"Low";case 1:return"Medium";case 2:return"High";default:return"Unknown"}}function M4e(e){switch(e){case 0:return"text-red-600 dark:text-red-400";case 1:return"text-yellow-600 dark:text-yellow-400";case 2:return"text-green-600 dark:text-green-400";default:return"text-muted-foreground"}}function ya({term:e,as:t="label",showTooltip:r=!0,className:a=""}){let s="default",i=!0;try{const{tenant:u}=Fr();s=u.tenantId;const{enabled:f}=Fj(s);i=f}catch{}const o=fde(e),l=Ra(e,{plain:i,short:t==="short"});if(!r||!o)return n.jsx("span",{className:a,children:l});const d=()=>{window.dispatchEvent(new CustomEvent("open-glossary",{detail:{term:e}}))};return n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsxs("span",{className:`inline-flex items-center gap-1 ${a}`,children:[l,n.jsx(Or,{className:"w-3 h-3 text-muted-foreground"})]})}),n.jsx(St,{className:"max-w-sm",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:o.label}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["(",o.tech,")"]})]}),o.help&&n.jsx("div",{className:"text-sm",children:o.help}),o.formula&&n.jsxs("div",{className:"text-xs text-muted-foreground border-t border-border pt-2",children:[n.jsx("span",{className:"font-medium",children:"Formula:"})," ",o.formula]}),n.jsx("div",{className:"border-t border-border pt-2",children:n.jsxs(le,{variant:"ghost",size:"sm",onClick:d,className:"w-full justify-start gap-2 h-7 text-xs","aria-label":`Open glossary for ${o.label}`,children:[n.jsx(R9,{className:"w-3 h-3"}),"View in Glossary"]})})]})})]})})}function D4e({simulationResults:e,thresholds:t,utilitySettings:r,keyAssumptions:a=[],baselineComparison:s,onApplyRecommendation:i,onToast:o}){const[l,d]=N.useState(!1),[u,f]=N.useState(!1),[m,p]=N.useState(""),[g,b]=N.useState(""),[v,y]=N.useState(null),j=()=>{if(!e||e.length===0)return null;const S=(r==null?void 0:r.useForRecommendation)&&e.every(G=>G.certaintyEquivalent!==void 0);let T;const O=[];if(S){const G=[...e].sort((Q,F)=>(F.certaintyEquivalent??0)-(Q.certaintyEquivalent??0)),q=G[0].certaintyEquivalent??0,Y=G.filter(Q=>Math.abs((Q.certaintyEquivalent??0)-q)<.01);Y.length===1?T=Y[0]:(T=[...Y].sort((F,z)=>(z.expectedUtility??0)-(F.expectedUtility??0))[0],O.push("Expected Utility"))}else{const G=[...e].sort((Q,F)=>F.raroc-Q.raroc),q=G[0].raroc,Y=G.filter(Q=>Math.abs(Q.raroc-q)<1e-4);if(Y.length===1)T=Y[0];else{const Q=[...Y].sort((H,X)=>X.ev-H.ev),F=Q[0].ev,z=Q.filter(H=>Math.abs(H.ev-F)<.01);z.length===1?(T=z[0],O.push("EV")):(T=[...z].sort((X,ne)=>X.economicCapital-ne.economicCapital)[0],O.push("EV","Economic Capital"))}}const R=T.raroc>=t.red,I=[...e].sort((G,q)=>q.raroc-G.raroc).findIndex(G=>G.optionId===T.optionId)+1,$=[...e].sort((G,q)=>q.ev-G.ev).findIndex(G=>G.optionId===T.optionId)+1,U=[...e].sort((G,q)=>G.economicCapital-q.economicCapital).findIndex(G=>G.optionId===T.optionId)+1;let J,V;return S&&(J=[...e].sort((Y,Q)=>(Q.certaintyEquivalent??0)-(Y.certaintyEquivalent??0)).findIndex(Y=>Y.optionId===T.optionId)+1,V=[...e].sort((Y,Q)=>(Q.expectedUtility??0)-(Y.expectedUtility??0)).findIndex(Y=>Y.optionId===T.optionId)+1),{result:T,isSafe:R,reasoning:{rarocRank:I,evRank:$,capitalRank:U,ceRank:J,utilityRank:V,tieBreakersUsed:O,usedUtility:S??!1}}},_=()=>{if(!e||e.length===0){o({title:"Run a simulation first",description:"No simulation results available",variant:"destructive"});return}const S=j();if(!S){o({title:"Unable to compute recommendation",description:"Please check simulation results",variant:"destructive"});return}y(S),d(!0);const T=C(S);p(T)},C=S=>{const{result:T,reasoning:O,isSafe:R}=S,M=O.tieBreakersUsed.length>0?` with tie-breakers: ${O.tieBreakersUsed.join(", ")}`:"";return O.usedUtility?`Selected ${T.optionLabel} based on highest Certainty Equivalent (${(T.certaintyEquivalent??0).toFixed(2)}) using ${r==null?void 0:r.mode} utility function${M}. Expected Utility: ${(T.expectedUtility??0).toFixed(3)}, RAROC: ${T.raroc.toFixed(4)}. Thresholds: red < ${t.red}, amber < ${t.amber}.${R?"":" Note: This option falls below the red threshold and requires override approval."}`:`Selected ${T.optionLabel} based on highest RAROC (${T.raroc.toFixed(4)}), EV (${T.ev.toFixed(2)}), and capital efficiency (${T.economicCapital.toFixed(2)})${M}. Thresholds: red < ${t.red}, amber < ${t.amber}.${R?"":" Note: This option falls below the red threshold and requires override approval."}`},A=()=>{if(!v)return;if(!v.isSafe&&!g.trim()){o({title:"Override reason required",description:"Please provide a reason for overriding the safety threshold",variant:"destructive"});return}const S=v.isSafe?m:`${m}

Override Reason: ${g}`;i(v.result.optionId,S,!v.isSafe),d(!1),f(!1),p(""),b(""),y(null)};return n.jsxs(n.Fragment,{children:[n.jsxs(le,{onClick:_,variant:"outline",className:"w-full",disabled:e.length===0,children:[n.jsx(qi,{className:"w-4 h-4 mr-2"}),"Recommend an option"]}),l&&v&&n.jsxs(Fs,{className:v.isSafe?"border-primary bg-primary/5":"border-destructive bg-destructive/5",children:[v.isSafe?n.jsx(ba,{className:"h-5 w-5 text-primary"}):n.jsx(tn,{className:"h-5 w-5 text-destructive"}),n.jsx(gl,{className:"flex items-center gap-2 mb-3",children:v.isSafe?n.jsxs(n.Fragment,{children:["Recommended: ",v.result.optionLabel,n.jsxs(yq,{children:[n.jsx(bq,{asChild:!0,children:n.jsx(le,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 hover:bg-transparent",children:n.jsx(Or,{className:"h-4 w-4 text-muted-foreground"})})}),n.jsx(E3,{className:"w-96",align:"start",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Why this recommendation?"}),n.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:v.reasoning.usedUtility?"Chosen for highest certainty-equivalent (risk-adjusted value), balancing EV and capital.":"Chosen for highest return per unit of capital at risk; CE shown for reference."})]}),n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"font-medium",children:"Basis:"}),n.jsx("span",{className:"ml-2 text-muted-foreground",children:v.reasoning.usedUtility?"CE (Certainty Equivalent)":"RAROC"})]}),n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"font-medium mb-2 block",children:"Selected Option Values:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5 text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"RAROC:"})," ",v.result.raroc.toFixed(4)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"EV:"})," ",v.result.ev.toFixed(2)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"EconCap:"})," ",v.result.economicCapital.toFixed(2)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"CE:"})," ",(v.result.certaintyEquivalent??0).toFixed(2)]}),v.result.tcor!==void 0&&n.jsxs("div",{className:"col-span-2",children:[n.jsx("span",{className:"font-medium",children:"TCOR:"})," ",v.result.tcor.toFixed(2)]})]})]}),n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"font-medium mb-2 block",children:"Tenant Thresholds (RAROC):"}),n.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-red-500 font-medium",children:"Red:"})," ","<"," ",t.red]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-amber-500 font-medium",children:"Amber:"})," ",t.red," - ",t.amber]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-green-500 font-medium",children:"Green:"})," "," ",t.amber]})]})]}),n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"font-medium mb-2 block",children:"Utility Parameters:"}),n.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Mode:"})," ",(r==null?void 0:r.mode)??"CARA"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"a (risk aversion):"})," ",(r==null?void 0:r.a)??5e-6]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"scale:"})," ",(r==null?void 0:r.scale)??1e5]})]})]}),s&&s.deltas.length>0&&(()=>{const S=s.deltas.find(I=>I.optionId===v.result.optionId);if(!S)return null;const T=(I,D)=>{const $=D?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",K=D?$r:fa,U=I>0?"+":"";return n.jsxs("span",{className:$,children:[n.jsx(K,{className:"w-3 h-3 inline mr-0.5"}),U,I.toFixed(4)]})},O=S.deltaRAROC>0,R=S.deltaCE>0,M=S.deltaTCOR<0;return n.jsxs("div",{className:"text-xs border-t border-border pt-4 mt-4",children:[n.jsx("span",{className:"font-medium mb-2 block",children:"Compared to your Baseline:"}),s.planRunId&&n.jsx("div",{className:"mb-3",children:n.jsx(be,{variant:"outline",className:"text-xs",children:"Plan vs Baseline"})}),n.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-muted-foreground mb-3",children:[n.jsxs("div",{children:[n.jsx(ya,{term:"raroc",as:"short",showTooltip:!1,className:"font-medium"}),":"," ",T(S.deltaRAROC,O)]}),n.jsxs("div",{children:[n.jsx(ya,{term:"ce",as:"short",showTooltip:!1,className:"font-medium"}),":"," ",T(S.deltaCE,R)]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx(ya,{term:"tcor",as:"short",showTooltip:!1,className:"font-medium"}),":"," ",T(S.deltaTCOR,M)]})]}),n.jsxs("div",{className:"p-2 bg-muted/50 rounded text-xs leading-relaxed",children:["This choice"," ",O?"improves":"decreases"," ",n.jsx(ya,{term:"raroc",as:"label",showTooltip:!1})," ","by"," ",n.jsx("strong",{children:Math.abs(S.deltaRAROC).toFixed(4)})," ","and ",M?"lowers":"increases"," ",n.jsx(ya,{term:"tcor",as:"label",showTooltip:!1})," ","by"," ",n.jsx("strong",{children:Math.abs(S.deltaTCOR).toFixed(2)})," ","compared to your Baseline."]})]})})(),a.length>0&&n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"font-medium mb-2 block",children:"Key Assumptions:"}),n.jsx("div",{className:"space-y-2",children:a.slice(0,3).map(S=>n.jsx("div",{className:"p-2 bg-muted/50 rounded border border-border",children:n.jsx("div",{className:"flex items-start gap-2",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-foreground mb-0.5",children:S.statement}),n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(be,{variant:"outline",className:"text-xs h-4 px-1",children:S.scope}),n.jsx("span",{children:MK(S.confidence)}),S.critical&&n.jsx(be,{variant:"destructive",className:"text-xs h-4 px-1",children:"Critical"})]})]})})},S.id))}),a.some(S=>S.critical&&S.status==="open"||S.status==="invalidated")&&n.jsxs("div",{className:"mt-2 flex items-start gap-2 p-2 bg-amber-500/10 border border-amber-500/20 rounded",children:[n.jsx(yn,{className:"h-4 w-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-amber-700 dark:text-amber-300",children:[n.jsx("div",{className:"font-medium",children:"Review Required"}),n.jsx("div",{className:"text-xs mt-0.5",children:"Critical assumptions are open or invalidated. Please review before finalizing."})]})]})]})]})})]})]}):"No safe recommendation"}),n.jsx(ei,{className:"space-y-3",children:v.isSafe?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex flex-wrap gap-2",children:v.reasoning.usedUtility?n.jsxs(n.Fragment,{children:[n.jsxs(be,{variant:"outline",className:"bg-primary/10",children:["CE:"," ",(v.result.certaintyEquivalent??0).toFixed(2)]}),n.jsxs(be,{variant:"outline",children:["EU:"," ",(v.result.expectedUtility??0).toFixed(3)]}),n.jsxs(be,{className:rv(v.result.raroc,t),children:["RAROC: ",v.result.raroc.toFixed(4)]})]}):n.jsxs(n.Fragment,{children:[n.jsxs(be,{className:rv(v.result.raroc,t),children:["RAROC: ",v.result.raroc.toFixed(4)]}),n.jsxs(be,{variant:"outline",children:["EV: ",v.result.ev.toFixed(2)]}),n.jsxs(be,{variant:"outline",children:["Capital:"," ",v.result.economicCapital.toFixed(2)]})]})}),n.jsx(le,{onClick:()=>f(!0),size:"sm",className:"mt-2",children:"Apply recommendation"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sm",children:["All options fall below tenant RAROC threshold (red ","<"," ",t.red,"). Consider revising options or provide an override rationale."]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[n.jsxs(be,{className:rv(v.result.raroc,t),children:["Best RAROC: ",v.result.raroc.toFixed(4)]}),n.jsx(be,{variant:"outline",children:v.result.optionLabel})]}),n.jsx(le,{onClick:()=>f(!0),size:"sm",variant:"destructive",className:"mt-2",children:"Override & choose"})]})})]}),n.jsx(Nr,{open:u,onOpenChange:f,children:n.jsxs(gr,{className:"max-w-2xl",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:v!=null&&v.isSafe?"Apply Recommendation":"Override Safety Threshold"}),n.jsx(Sr,{children:v!=null&&v.isSafe?`Confirm applying recommendation: ${v.result.optionLabel}`:"This option falls below the safety threshold. Please provide an override reason."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"rationale",children:"Rationale (editable)"}),n.jsx(ua,{id:"rationale",value:m,onChange:S=>p(S.target.value),rows:4,className:"font-mono text-sm"})]}),v&&!v.isSafe&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"override-reason",className:"text-destructive",children:"Override Reason (required) *"}),n.jsx(ua,{id:"override-reason",value:g,onChange:S=>b(S.target.value),rows:3,placeholder:"Explain why you're overriding the safety threshold...",className:"border-destructive"})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>{f(!1),b("")},children:"Cancel"}),n.jsx(le,{onClick:A,children:"Confirm"})]})]})})]})}const xb=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))"];function L4e({results:e,utilityParams:t,selectedOptionId:r,onCurveClick:a}){const s=N.useMemo(()=>{if(e.length===0)return[];let o=1/0,l=-1/0;e.forEach(g=>{const b=Math.min(...g.outcomes),v=Math.max(...g.outcomes);o=Math.min(o,b),l=Math.max(l,v)});const u=(l-o)*.1;o-=u,l+=u;const f=100,m=(l-o)/(f-1),p=[];for(let g=0;g<f;g++){const b=o+g*m,v={outcome:b};e.forEach(y=>{const j=pK(b,t);v[y.optionId]=j}),p.push(v)}return p},[e,t]),i=N.useMemo(()=>{switch(t.mode){case"CARA":return"CARA (Constant Absolute Risk Aversion)";case"CRRA":return"CRRA (Constant Relative Risk Aversion)";case"Exponential":return"Exponential Utility";default:return t.mode}},[t.mode]);return e.length===0?n.jsx(Ae,{children:n.jsxs(He,{children:[n.jsx(Ge,{children:"Utility Curves"}),n.jsx(mt,{children:"No simulation results available"})]})}):n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx(Ge,{children:"Utility Curves"}),n.jsx(mt,{children:"Utility function comparison across outcome ranges"})]}),n.jsx(be,{variant:"outline",children:i})]}),n.jsxs("div",{className:"text-xs text-muted-foreground mt-2 space-y-1",children:[n.jsxs("div",{children:["Risk aversion (a): ",t.a]}),n.jsxs("div",{children:["Outcome scale: ",t.scale.toLocaleString()]})]})]}),n.jsxs(Re,{children:[n.jsx(Cl,{width:"100%",height:400,children:n.jsxs(Vh,{data:s,children:[n.jsx(hu,{strokeDasharray:"3 3",className:"stroke-border"}),n.jsx(ji,{dataKey:"outcome",label:{value:"Outcome",position:"insideBottom",offset:-5},tickFormatter:o=>o.toFixed(0),className:"text-xs"}),n.jsx(Dl,{label:{value:"Utility",angle:-90,position:"insideLeft"},tickFormatter:o=>o.toFixed(3),className:"text-xs"}),n.jsx(Ii,{content:({active:o,payload:l})=>{if(!o||!l||l.length===0)return null;const d=l[0].payload.outcome;return n.jsxs("div",{className:"bg-background border border-border rounded-lg p-3 shadow-lg",children:[n.jsxs("div",{className:"text-sm font-semibold mb-2",children:["Outcome: ",d.toFixed(2)]}),n.jsx("div",{className:"space-y-1",children:l.map((u,f)=>{const m=e.find(p=>p.optionId===u.dataKey);return m?n.jsxs("div",{className:"flex items-center justify-between gap-4 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:u.color}}),n.jsx("span",{children:m.optionLabel})]}),n.jsx("span",{className:"font-mono",children:u.value.toFixed(6)})]},f):null})})]})}}),n.jsx(nd,{content:({payload:o})=>o?n.jsx("div",{className:"flex flex-wrap gap-4 justify-center mt-4",children:o.map((l,d)=>{const u=e.find(m=>m.optionId===l.dataKey);if(!u)return null;const f=r===u.optionId;return n.jsxs("button",{onClick:()=>a==null?void 0:a(u.optionId),className:`flex items-center gap-2 px-3 py-1.5 rounded-md transition-colors ${f?"bg-primary/10 border border-primary":"hover:bg-muted"}`,children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l.color}}),n.jsx("span",{className:"text-sm font-medium",children:u.optionLabel}),n.jsxs(be,{variant:"outline",className:"text-xs",children:["EU: ",(u.expectedUtility??0).toFixed(3)]})]},d)})}):null}),e.map((o,l)=>n.jsx(go,{type:"monotone",dataKey:o.optionId,stroke:xb[l%xb.length],strokeWidth:r===o.optionId?3:2,dot:!1,opacity:r?r===o.optionId?1:.3:1},o.optionId))]})}),n.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((o,l)=>n.jsxs("div",{className:`p-4 border rounded-lg transition-colors ${r===o.optionId?"border-primary bg-primary/5":"border-border"}`,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:xb[l%xb.length]}}),n.jsx("div",{className:"font-semibold text-sm",children:o.optionLabel})]}),n.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Expected Utility:"}),n.jsx("span",{className:"font-mono",children:(o.expectedUtility??0).toFixed(6)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Certainty Equivalent:"}),n.jsx("span",{className:"font-mono",children:(o.certaintyEquivalent??0).toFixed(2)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Expected Value:"}),n.jsx("span",{className:"font-mono",children:o.ev.toFixed(2)})]})]})]},o.optionId))})]})]})}function I4e({options:e,scenarioVars:t,seed:r,runs:a,baseRunId:s,utilityParams:i,tcorParams:o,gameConfig:l,optionStrategies:d,dependenceConfig:u,bayesianOverride:f,thresholds:m,onAuditEvent:p,onStressPresetChange:g}){const[b,v]=N.useState([]),[y,j]=N.useState(!1),[_,C]=N.useState(null),A=async R=>{j(!0),C(R),g&&g(R),await new Promise(M=>setTimeout(M,300));try{let M,I;switch(R){case"Base":M=vi(e,t,a,r,i,o,l,d,u,f),I="";break;case"Cost Spike":M=$4e(e,t,a,r,1.15,i,o,l,d,u,f),I="-CS";break;case"Demand Slump":M=F4e(e,t,a,r,.25,i,o,l,d,u,f),I="-DS";break;case"Volatility Up":const K=t.map(U=>({...U,weight:(U.weight??1)*1.5}));M=vi(e,K,a,r,i,o,l,d,u,f),I="-VU";break;default:M=[],I=""}const D=s+I;let $;M.length>0&&M[0].achievedSpearman!==void 0&&($=M[0].achievedSpearman),v(K=>[...K.filter(J=>J.preset!==R),{preset:R,runId:D,results:M}]),p("stress.run",{preset:R,runId:D,seed:r,runs:a,achievedSpearman:$,bayes:f?{varKey:f.targetVarId,muN:f.posteriorMean,sigmaN:f.posteriorSd,applied:!0}:{applied:!1}})}catch(M){console.error("Stress test failed:",M)}finally{j(!1)}},S=R=>{if(b.length===0)return null;let M=null;for(const I of b)for(const D of I.results){let $;switch(R){case"ev":$=D.ev;break;case"raroc":$=D.raroc;break;case"ce":$=D.certaintyEquivalent??0;break;case"tcor":$=D.tcor??0;break;default:continue}(!M||(R==="tcor"?$<M.value:$>M.value))&&(M={optionLabel:D.optionLabel,value:$,preset:I.preset})}return M},T=R=>b.map(M=>({preset:M.preset,result:M.results.find(I=>I.optionId===R)})),O=b.find(R=>R.preset==="Base");return n.jsx("div",{className:"space-y-4",children:n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"w-5 h-5 text-orange-500"}),n.jsx(Ge,{className:"text-base",children:"Stress Tests"})]})})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[n.jsxs(le,{variant:b.some(R=>R.preset==="Base")?"default":"outline",size:"sm",onClick:()=>A("Base"),disabled:y,children:[y&&_==="Base"&&n.jsx(vh,{className:"w-4 h-4 mr-2 animate-spin"}),"Base"]}),n.jsxs(le,{variant:b.some(R=>R.preset==="Cost Spike")?"default":"outline",size:"sm",onClick:()=>A("Cost Spike"),disabled:y,children:[y&&_==="Cost Spike"&&n.jsx(vh,{className:"w-4 h-4 mr-2 animate-spin"}),"Cost Spike"]}),n.jsxs(le,{variant:b.some(R=>R.preset==="Demand Slump")?"default":"outline",size:"sm",onClick:()=>A("Demand Slump"),disabled:y,children:[y&&_==="Demand Slump"&&n.jsx(vh,{className:"w-4 h-4 mr-2 animate-spin"}),"Demand Slump"]}),n.jsxs(le,{variant:b.some(R=>R.preset==="Volatility Up")?"default":"outline",size:"sm",onClick:()=>A("Volatility Up"),disabled:y,children:[y&&_==="Volatility Up"&&n.jsx(vh,{className:"w-4 h-4 mr-2 animate-spin"}),"Volatility Up"]})]}),b.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Best Across Runs:"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["ev","raroc","ce","tcor"].map(R=>{const M=S(R);return M?n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsxs("div",{className:"p-2 border border-border rounded-lg bg-muted/50 cursor-help",children:[n.jsx("div",{className:"text-xs text-muted-foreground uppercase",children:R==="ce"?"CE":R==="tcor"?"TCOR":R.toUpperCase()}),n.jsx("div",{className:"text-sm font-semibold",children:M.optionLabel}),n.jsx("div",{className:"text-xs text-muted-foreground",children:M.value.toFixed(2)})]})}),n.jsx(St,{children:n.jsxs("p",{className:"text-xs",children:["Best in: ",M.preset]})})]})},R):null})})]}),b.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-sm font-medium",children:"Comparison Table"}),n.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:n.jsxs(Ho,{children:[n.jsx(Go,{children:n.jsxs(Yn,{children:[n.jsx(Mt,{children:"Option"}),n.jsx(Mt,{children:"Run"}),n.jsx(Mt,{className:"text-right",children:"RAROC"}),n.jsx(Mt,{className:"text-right",children:"EV"}),n.jsx(Mt,{className:"text-right",children:"VaR95"}),n.jsx(Mt,{className:"text-right",children:"CVaR95"}),n.jsx(Mt,{className:"text-right",children:"Econ. Capital"}),i&&n.jsxs(n.Fragment,{children:[n.jsx(Mt,{className:"text-right",children:"CE"}),n.jsx(Mt,{className:"text-right",children:"Utility"})]}),o&&n.jsx(Mt,{className:"text-right",children:"TCOR"})]})}),n.jsx(Wo,{children:e.map(R=>{const M=T(R.id);return M.map(({preset:I,result:D},$)=>{if(!D)return null;const K=O==null?void 0:O.results.find(V=>V.optionId===R.id),U=K?D.raroc-K.raroc:0,J=K?D.ev-K.ev:0;return n.jsxs(Yn,{children:[$===0&&n.jsx(Rt,{rowSpan:M.length,className:"font-medium",children:R.label}),n.jsx(Rt,{children:n.jsx(be,{variant:"outline",className:"text-xs",children:I})}),n.jsx(Rt,{className:"text-right",children:n.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.jsx(be,{className:rv(D.raroc,m),children:D.raroc.toFixed(4)}),K&&I!=="Base"&&n.jsxs("span",{className:`text-xs ${U>=0?"text-green-600":"text-red-600"}`,children:[U>=0?"+":"",U.toFixed(4)]})]})}),n.jsx(Rt,{className:"text-right",children:n.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.jsx("span",{className:"font-mono text-sm",children:D.ev.toFixed(2)}),K&&I!=="Base"&&n.jsxs("span",{className:`text-xs ${J>=0?"text-green-600":"text-red-600"}`,children:[J>=0?"+":"",J.toFixed(2)]})]})}),n.jsx(Rt,{className:"text-right font-mono text-sm",children:D.var95.toFixed(2)}),n.jsx(Rt,{className:"text-right font-mono text-sm",children:D.cvar95.toFixed(2)}),n.jsx(Rt,{className:"text-right font-mono text-sm",children:D.economicCapital.toFixed(2)}),i&&n.jsxs(n.Fragment,{children:[n.jsx(Rt,{className:"text-right font-mono text-sm",children:D.certaintyEquivalent!==void 0?D.certaintyEquivalent.toFixed(0):"-"}),n.jsx(Rt,{className:"text-right font-mono text-sm",children:D.expectedUtility!==void 0?D.expectedUtility.toFixed(3):"-"})]}),o&&n.jsx(Rt,{className:"text-right font-mono text-sm",children:D.tcor!==void 0?D.tcor.toFixed(2):"-"})]},`${R.id}-${I}`)})})})]})})]})]})]})})}function $4e(e,t,r,a,s,i,o,l,d,u,f){const m=e.map(p=>({...p,cost:(p.cost??0)*s}));return vi(m,t,r,a,i,o,l,d,u,f)}function F4e(e,t,r,a,s,i,o,l,d,u,f){const m=e.map(p=>({...p,expectedReturn:Math.max(0,(p.expectedReturn??0)*(1-s))}));return vi(m,t,r,a,i,o,l,d,u,f)}function B4e(e){const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${a}`}function U2(e){const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0");return`${t}-${r}-${a}_${s}${i}`}function c$(e){if(e==null)return"";const t=String(e);return t.includes(",")||t.includes('"')||t.includes(`
`)?`"${t.replace(/"/g,'""')}"`:t}function Yy(e,t,r){const a=t.map(i=>c$((r==null?void 0:r[i])??i)).join(","),s=e.map(i=>t.map(o=>c$(i[o])).join(","));return[a,...s].join(`
`)}function Xy(e,t){const r=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),s=URL.createObjectURL(r);a.setAttribute("href",s),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}function z4e(e,t,r,a,s,i,o,l,d,u,f){const m=new Date().toISOString(),p=`idecide_metrics_${U2(new Date)}.csv`,g=e.some(C=>C.expectedUtility!==void 0),b=e.some(C=>C.tcor!==void 0),v=e.map(C=>{var T,O,R,M,I,D,$,K;const A=a.find(U=>U.id===C.optionId),S={Option:C.optionLabel,Cost:((T=A==null?void 0:A.cost)==null?void 0:T.toFixed(2))??"",ExpectedReturn:((O=A==null?void 0:A.expectedReturn)==null?void 0:O.toFixed(2))??"",MitigationCost:((R=A==null?void 0:A.mitigationCost)==null?void 0:R.toFixed(2))??"",EV:C.ev.toFixed(2),VaR95:C.var95.toFixed(2),CVaR95:C.cvar95.toFixed(2),EconCapital:C.economicCapital.toFixed(2),RAROC:C.raroc.toFixed(4)};return g&&(S.Utility=((M=C.expectedUtility)==null?void 0:M.toFixed(6))??"",S.CE=((I=C.certaintyEquivalent)==null?void 0:I.toFixed(2))??""),b&&(S.TCOR=((D=C.tcor)==null?void 0:D.toFixed(2))??"",C.tcorComponents&&(S.TCOR_ExpectedLoss=C.tcorComponents.expectedLoss.toFixed(2),S.TCOR_Insurance=C.tcorComponents.insurance.toFixed(2),S.TCOR_Contingency=C.tcorComponents.contingency.toFixed(2),S.TCOR_Mitigation=C.tcorComponents.mitigation.toFixed(2))),S.Basis=i!=null&&i.useForRecommendation?"CE":"RAROC",S.AchievedSpearman=(o==null?void 0:o.toFixed(4))??"",S.BayesApplied=l?l.varKey:"off",S.BayesMuN=(($=l==null?void 0:l.muN)==null?void 0:$.toFixed(4))??"",S.BayesSigmaN=((K=l==null?void 0:l.sigmaN)==null?void 0:K.toFixed(4))??"",S.AssumptionsCount=(d==null?void 0:d.count)??0,S.CriticalOpen=(d==null?void 0:d.criticalOpen)??0,S.HorizonMonths=u??12,S.OptionTimeWindowMonths=(A==null?void 0:A.horizonMonths)??u??12,S.CopulaFroErr=(f==null?void 0:f.toFixed(6))??"",S.Seed=t,S.Runs=r,S.RunId=s??"",S.Timestamp=m,S}),y=["Option","Cost","ExpectedReturn","MitigationCost","EV","VaR95","CVaR95","EconCapital","RAROC"];g&&y.push("Utility","CE"),b&&y.push("TCOR","TCOR_ExpectedLoss","TCOR_Insurance","TCOR_Contingency","TCOR_Mitigation"),y.push("Basis","AchievedSpearman","BayesApplied","BayesMuN","BayesSigmaN","AssumptionsCount","CriticalOpen","HorizonMonths","OptionTimeWindowMonths","CopulaFroErr","Seed","Runs","RunId","Timestamp");const j={EV:Ta("ev"),VaR95:Ta("var95"),CVaR95:Ta("cvar95"),EconCapital:Ta("econCap"),RAROC:Ta("raroc"),Utility:Ta("utility"),CE:Ta("ce"),TCOR:Ta("tcor"),Seed:Ta("seed"),Runs:Ta("runs"),HorizonMonths:Ta("horizon"),CopulaFroErr:Ta("frobenius")},_=Yy(v,y,j);Xy(_,p)}function q4e(e){const t=`idecide_decisions_${B4e(new Date)}.csv`,r=e.map(o=>{var d,u,f,m,p,g,b,v,y,j;const l=o.options.find(_=>_.id===o.chosenOptionId);return{Title:o.title,ClosedAt:new Date(o.closedAt).toISOString(),ChosenOption:(l==null?void 0:l.label)??o.chosenOptionId,EV:((u=(d=o.metrics)==null?void 0:d.ev)==null?void 0:u.toFixed(2))??"",RAROC:((m=(f=o.metrics)==null?void 0:f.raroc)==null?void 0:m.toFixed(4))??"",CE:((g=(p=o.metrics)==null?void 0:p.ce)==null?void 0:g.toFixed(2))??"",TCOR:((v=(b=o.metrics)==null?void 0:b.tcor)==null?void 0:v.toFixed(2))??"",BasisAtClose:o.basisAtClose??"",AchievedSpearmanAtClose:((y=o.achievedSpearmanAtClose)==null?void 0:y.toFixed(4))??"",BayesAtClose:o.bayesAtClose?`${o.bayesAtClose.varKey}|=${o.bayesAtClose.muN.toFixed(4)}|=${o.bayesAtClose.sigmaN.toFixed(4)}`:"off",CriticalOpenAtClose:o.criticalOpenAtClose??0,HorizonMonthsAtClose:o.horizonMonthsAtClose??12,CopulaFroErrAtClose:((j=o.copulaFroErrAtClose)==null?void 0:j.toFixed(6))??"",Tenant:o.tenantId,DecisionId:o.id}}),a=["Title","ClosedAt","ChosenOption","EV","RAROC","CE","TCOR","BasisAtClose","AchievedSpearmanAtClose","BayesAtClose","CriticalOpenAtClose","HorizonMonthsAtClose","CopulaFroErrAtClose","Tenant","DecisionId"],s={EV:Ta("ev"),RAROC:Ta("raroc"),CE:Ta("ce"),TCOR:Ta("tcor"),HorizonMonthsAtClose:Ta("horizon"),CopulaFroErrAtClose:Ta("frobenius")},i=Yy(r,a,s);Xy(i,t)}function U4e(e){const t=`idecide_tornado_${U2(new Date)}.csv`,r=e.map(i=>({Param:i.paramName,Direction:i.direction,Delta:i.delta.toFixed(6),Percent:i.percent.toFixed(2),Metric:i.metric,Option:i.optionLabel,RunIdBase:i.runIdBase})),s=Yy(r,["Param","Direction","Delta","Percent","Metric","Option","RunIdBase"]);Xy(s,t)}function V4e(e,t,r,a,s){const i=`idecide_baseline_plan_${U2(new Date)}.csv`,o=a.map(f=>{var m;return{DecisionId:e,BaselineRunId:t,PlanRunId:r,Option:f.optionLabel,DeltaEV:f.deltaEV.toFixed(2),DeltaRAROC:f.deltaRAROC.toFixed(4),DeltaCE:f.deltaCE.toFixed(2),DeltaTCOR:f.deltaTCOR.toFixed(2),DeltaTimeWindowMonths:((m=f.deltaHorizon)==null?void 0:m.toString())??"",Notes:s}}),l=["DecisionId","BaselineRunId","PlanRunId","Option","DeltaEV","DeltaRAROC","DeltaCE","DeltaTCOR","DeltaTimeWindowMonths","Notes"],d={DeltaEV:`${Ta("ev")} (EV)`,DeltaRAROC:`${Ta("raroc")} (RAROC)`,DeltaCE:`${Ta("ce")} (CE)`,DeltaTCOR:`${Ta("tcor")} (TCOR)`,DeltaTimeWindowMonths:`${Ta("horizon")} (TimeWindowMonths)`},u=Yy(o,l,d);Xy(u,i)}function H4e(e){const t=`retina_audit_${U2(new Date)}.csv`,r=e.map(i=>({Timestamp:new Date(i.ts).toISOString(),TenantId:i.tenantId,Actor:i.actor,ActorRole:i.actorRole??"",EventType:i.eventType,Payload:JSON.stringify(i.payload)})),s=Yy(r,["Timestamp","TenantId","Actor","ActorRole","EventType","Payload"]);Xy(s,t)}function G4e({partners:e,onThresholdChange:t,onPartnerSelect:r,selectedPartnerId:a}){const[s,i]=N.useState(.6),o=e.filter(m=>(m.dependencyScore??0)>=s),l=m=>{const p=parseFloat(m);i(p),t==null||t(p)},d=m=>m>=.9?"bg-red-500":m>=.7?"bg-orange-500":"bg-yellow-500",u=m=>m>=.9?"Critical":m>=.7?"High":m>=.5?"Medium":"Low",f=m=>m===void 0?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(m);return o.length===0?n.jsx("div",{className:"absolute top-2 right-8 bg-background/95 border border-border rounded-lg p-4 shadow-lg max-w-xs",children:n.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["No partners meet the dependency threshold of"," ",s.toFixed(1)]})}):n.jsxs("div",{className:"absolute top-2 right-8 bg-background/95 border border-border rounded-lg shadow-lg max-w-md",children:[n.jsxs("div",{className:"p-3 border-b border-border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),n.jsx("div",{className:"text-xs font-semibold text-foreground",children:"Partner Impact Analysis"})]}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"w-4 h-4 text-muted-foreground"})}),n.jsx(St,{children:n.jsx("p",{className:"max-w-xs",children:"Shows external partners that drive significant impact on decision outcomes"})})]})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"text-xs text-muted-foreground",children:"Dependency Threshold"}),n.jsxs(be,{variant:"outline",className:"text-xs",children:[o.length," partner",o.length!==1?"s":""]})]}),n.jsxs(Et,{value:s.toString(),onValueChange:l,children:[n.jsx(kt,{className:"h-8 text-xs",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"0.5",children:" 0.5 (Medium+)"}),n.jsx(we,{value:"0.6",children:" 0.6 (High)"}),n.jsx(we,{value:"0.7",children:" 0.7 (High+)"}),n.jsx(we,{value:"0.9",children:" 0.9 (Critical)"})]})]})]})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.jsx("div",{className:"p-2 space-y-2",children:o.map(m=>{const p=a===m.id,g=m.dependencyScore??0,b=d(g),v=u(g);return n.jsx(Ae,{className:`cursor-pointer transition-all hover:shadow-md ${p?"ring-2 ring-orange-500 bg-orange-500/5":"bg-card"}`,onClick:()=>r==null?void 0:r(m.id),children:n.jsxs(Re,{className:"p-3 space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm font-semibold text-foreground truncate",children:m.name}),n.jsx("div",{className:"text-xs text-muted-foreground",children:m.relationship})]}),n.jsx(be,{className:`${b} text-white text-xs shrink-0`,children:v})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-border",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Dependency"}),n.jsxs("div",{className:"text-sm font-mono font-semibold",children:[(g*100).toFixed(0),"%"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Exposure"}),n.jsx("div",{className:"text-sm font-mono font-semibold",children:f(m.creditExposure)})]})]}),n.jsx("div",{className:"flex items-center gap-2 pt-2 border-t border-border",children:g>=.7?n.jsxs(n.Fragment,{children:[n.jsx(fa,{className:"w-3 h-3 text-red-500"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"High impact on downside risk"})]}):n.jsxs(n.Fragment,{children:[n.jsx($r,{className:"w-3 h-3 text-orange-500"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Moderate impact on outcomes"})]})}),m.notes&&n.jsx("div",{className:"pt-2 border-t border-border",children:n.jsxs("div",{className:"text-xs text-muted-foreground italic",children:['"',m.notes,'"']})})]})},m.id)})})}),n.jsx("div",{className:"p-3 border-t border-border bg-muted/50",children:n.jsx("div",{className:"text-xs text-muted-foreground",children:"Click a partner to view parameter-specific sensitivity"})})]})}function W4e({partner:e,parameterSensitivities:t,onClose:r}){const a=e.dependencyScore??0,s=[...t].sort((u,f)=>f.magnitude-u.magnitude),i=s.reduce((u,f)=>u+f.magnitude*f.partnerInfluence,0)/s.length,l=(u=>u>=.7?{label:"High",color:"bg-red-500"}:u>=.4?{label:"Medium",color:"bg-orange-500"}:{label:"Low",color:"bg-yellow-500"})(i),d=u=>u===void 0?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(u);return n.jsxs(Ae,{className:"border-2 border-orange-500/30",children:[n.jsx(He,{className:"bg-orange-500/5",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ge,{className:"text-lg flex items-center gap-2",children:[n.jsx(tn,{className:"w-5 h-5 text-orange-500"}),"Partner-Specific Sensitivity: ",e.name]}),n.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[n.jsx("span",{children:e.relationship}),n.jsx("span",{children:""}),n.jsxs("span",{children:["Exposure: ",d(e.creditExposure)]}),n.jsx("span",{children:""}),n.jsxs("span",{children:["Dependency: ",(a*100).toFixed(0),"%"]})]})]}),r&&n.jsx("button",{onClick:r,className:"text-muted-foreground hover:text-foreground",children:""})]})}),n.jsxs(Re,{className:"space-y-6 pt-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm font-semibold",children:"Overall Parameter Risk Score"}),n.jsxs(be,{className:`${l.color} text-white`,children:[l.label," Risk"]})]}),n.jsx(hy,{value:i*100,className:"h-2"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Composite score based on partner influence across all sensitive parameters"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"text-sm font-semibold",children:"Top Influenced Parameters"}),n.jsx("div",{className:"space-y-2",children:s.slice(0,5).map((u,f)=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm font-medium truncate",children:u.paramName}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(hy,{value:u.partnerInfluence*100,className:"h-1.5 flex-1"}),n.jsxs("span",{className:"text-xs text-muted-foreground shrink-0",children:[(u.partnerInfluence*100).toFixed(0),"%"]})]})]}),n.jsx("div",{className:"shrink-0",children:u.direction==="positive"?n.jsx($r,{className:"w-4 h-4 text-green-500"}):u.direction==="negative"?n.jsx(fa,{className:"w-4 h-4 text-red-500"}):n.jsx("div",{className:"w-4 h-4 rounded-full bg-muted"})})]},f))})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"text-sm font-semibold",children:"Complete Parameter Analysis"}),n.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:n.jsxs(Ho,{children:[n.jsx(Go,{children:n.jsxs(Yn,{children:[n.jsx(Mt,{children:"Parameter"}),n.jsx(Mt,{className:"text-right",children:"Influence"}),n.jsx(Mt,{className:"text-right",children:"Magnitude"}),n.jsx(Mt,{className:"text-center",children:"Direction"})]})}),n.jsx(Wo,{children:s.map((u,f)=>n.jsxs(Yn,{children:[n.jsx(Rt,{className:"font-medium",children:u.paramName}),n.jsxs(Rt,{className:"text-right font-mono text-sm",children:[(u.partnerInfluence*100).toFixed(1),"%"]}),n.jsx(Rt,{className:"text-right font-mono text-sm",children:u.magnitude.toFixed(4)}),n.jsx(Rt,{className:"text-center",children:u.direction==="positive"?n.jsx(be,{variant:"outline",className:"bg-green-500/10 text-green-700 dark:text-green-400",children:"Positive"}):u.direction==="negative"?n.jsx(be,{variant:"outline",className:"bg-red-500/10 text-red-700 dark:text-red-400",children:"Negative"}):n.jsx(be,{variant:"outline",children:"Neutral"})})]},f))})]})})]}),n.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg space-y-2",children:[n.jsx("div",{className:"text-sm font-semibold",children:"Risk Interpretation"}),n.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Influence:"})," Percentage of parameter sensitivity attributable to this partner"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Magnitude:"})," Absolute impact on target metric when parameter changes"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Direction:"})," Whether partner relationship improves or worsens outcomes"]})]})]}),e.notes&&n.jsxs("div",{className:"p-4 bg-orange-500/5 border border-orange-500/20 rounded-lg",children:[n.jsx("div",{className:"text-sm font-semibold mb-2",children:"Partner Notes"}),n.jsxs("div",{className:"text-sm text-muted-foreground italic",children:['"',e.notes,'"']})]})]})]})}function K4e({paramName:e,partnerInfluences:t,showIndicators:r}){if(!r||t.length===0)return null;const a=[...t].sort((l,d)=>d.influenceScore-l.influenceScore),s=a.slice(0,3),i=l=>l>=.9?"bg-red-500":l>=.7?"bg-orange-500":"bg-yellow-500",o=l=>l>=.7?"w-2.5 h-2.5":l>=.4?"w-2 h-2":"w-1.5 h-1.5";return n.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[s.map((l,d)=>{const u=i(l.dependencyScore),f=o(l.influenceScore);return n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("div",{className:`${u} ${f} rounded-full cursor-help animate-pulse`,style:{animationDelay:`${d*200}ms`}})}),n.jsx(St,{side:"right",className:"max-w-xs",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"font-semibold",children:l.partnerName}),n.jsxs("div",{className:"text-xs space-y-0.5",children:[n.jsxs("div",{children:["Influence on ",e,":"," ",(l.influenceScore*100).toFixed(0),"%"]}),n.jsxs("div",{children:["Overall Dependency:"," ",(l.dependencyScore*100).toFixed(0),"%"]})]})]})})]})},l.partnerId)}),a.length>3&&n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsxs(be,{variant:"outline",className:"h-4 px-1 text-xs cursor-help bg-muted",children:["+",a.length-3]})}),n.jsx(St,{side:"right",className:"max-w-xs",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"font-semibold",children:"Additional Partners"}),n.jsx("div",{className:"text-xs space-y-0.5",children:a.slice(3).map(l=>n.jsxs("div",{children:[l.partnerName," (",(l.influenceScore*100).toFixed(0),"%)"]},l.partnerId))})]})})]})})]})}function Y4e(e,t){return t.filter(r=>(r.dependencyScore??0)>.5).map(r=>{let a=.3;e.includes("Cost")?a=(r.dependencyScore??0)*.8:e.includes("Return")?a=(r.dependencyScore??0)*.6:e.includes("Volatility")||e.includes("Risk")?a=(r.dependencyScore??0)*.9:e.includes("weight")&&(a=(r.dependencyScore??0)*.5);const s=.8+Math.random()*.4,i=Math.min(1,a*s);return{partnerId:r.id,partnerName:r.name,influenceScore:i,dependencyScore:r.dependencyScore??0}}).filter(r=>r.influenceScore>.2)}function X4e(e,t,r,a){const s=t==="RAROC"?"risk-adjusted return":"certainty equivalent",i=t==="RAROC"?"RAROC":"CE",o=Math.max(Math.abs(e.percentPlus),Math.abs(e.percentMinus));let l;o>10?l="high":o>5?l="medium":l="low";let d;e.deltaPlus>0&&e.deltaMinus<0?d="mixed":Math.abs(e.deltaPlus)>Math.abs(e.deltaMinus)?d=e.deltaPlus>0?"positive":"negative":d=e.deltaMinus>0?"positive":"negative";let u="";if(e.paramType==="cost"){const f=Math.abs(e.percentMinus);e.deltaMinus<0?(u=`A ${r}% cost increase would reduce our ${s} by ${f.toFixed(1)}%, mainly because higher costs directly squeeze margins. `,u+="This is one of our biggest vulnerabilities. ",u+="Cost control is critical to maintaining performance."):(u=`A ${r}% cost increase would improve our ${s} by ${f.toFixed(1)}%. `,u+="This unusual pattern suggests costs may be offsetting other risks. ",u+="Review the cost structure carefully.")}else if(e.paramType==="return"){const f=Math.abs(e.percentPlus);e.deltaPlus>0?(u=`A ${r}% revenue increase would boost our ${s} by ${f.toFixed(1)}%, showing strong upside leverage. `,u+="Revenue growth is a key driver of value. ",u+="Focus on initiatives that can reliably increase returns."):(u=`A ${r}% revenue increase would reduce our ${s} by ${f.toFixed(1)}%. `,u+="This counterintuitive result may indicate risk-return tradeoffs. ",u+="Higher revenues might be bringing disproportionate risks.")}else if(e.paramType==="varWeight"){const f=e.paramName.replace(" (weight)",""),m=Math.max(Math.abs(e.percentPlus),Math.abs(e.percentMinus));d==="mixed"?(u=`The ${f} weight has a ${m.toFixed(1)}% impact on ${i}. `,u+="Increasing this factor's importance shifts our risk profile significantly. ",u+="Consider whether this variable deserves more or less weight in decisions."):Math.abs(e.deltaPlus)>Math.abs(e.deltaMinus)?(u=`Increasing the ${f} weight by ${r}% ${e.deltaPlus>0?"improves":"worsens"} ${i} by ${Math.abs(e.percentPlus).toFixed(1)}%. `,u+="This variable's relative importance matters greatly. ",u+=`${e.deltaPlus>0?"Emphasize":"De-emphasize"} this factor in your analysis.`):(u=`Decreasing the ${f} weight by ${r}% ${e.deltaMinus>0?"improves":"worsens"} ${i} by ${Math.abs(e.percentMinus).toFixed(1)}%. `,u+="This variable's relative importance matters greatly. ",u+=`${e.deltaMinus>0?"Reduce":"Increase"} this factor's weight in your analysis.`)}else if(e.paramType==="varMean"){const f=e.paramName.replace(" (mean)","").replace(" (mu)","");Math.max(Math.abs(e.percentPlus),Math.abs(e.percentMinus)),Math.abs(e.deltaPlus)>Math.abs(e.deltaMinus)?(u=`If ${f} averages ${r}% higher, our ${s} ${e.deltaPlus>0?"increases":"decreases"} by ${Math.abs(e.percentPlus).toFixed(1)}%. `,u+="This parameter's central tendency is a major driver. ",u+=`${e.deltaPlus>0?"Favorable":"Unfavorable"} shifts here have outsized effects.`):(u=`If ${f} averages ${r}% lower, our ${s} ${e.deltaMinus>0?"increases":"decreases"} by ${Math.abs(e.percentMinus).toFixed(1)}%. `,u+="This parameter's central tendency is a major driver. ",u+=`${e.deltaMinus>0?"Favorable":"Unfavorable"} shifts here have outsized effects.`)}return{paramName:e.paramName,narrative:u,impact:l,direction:d}}function J4e({results:e,targetMetric:t,stepPercent:r,baselineMetric:a,optionLabel:s}){const o=e.slice(0,3).map(u=>X4e(u,t,r));if(o.length===0)return null;const l=u=>{switch(u){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}},d=u=>{switch(u){case"positive":return"";case"negative":return"";case"mixed":return""}};return n.jsxs(Ae,{className:"border-blue-200 dark:border-blue-800 bg-blue-50/50 dark:bg-blue-950/20",children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qi,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),n.jsx(Ge,{className:"text-base",children:"What matters most?"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),n.jsx(St,{className:"max-w-xs",children:n.jsx("p",{children:"Explains in simple terms which factors move the outcome the most."})})]})})]}),n.jsx(be,{variant:"outline",className:"text-xs",children:"Top 3 Drivers"})]})}),n.jsxs(Re,{className:"space-y-4",children:[o.map((u,f)=>n.jsxs("div",{className:"p-4 bg-background rounded-lg border border-border space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(be,{variant:"outline",className:"font-mono text-xs",children:["#",f+1]}),n.jsx("span",{className:"font-semibold text-sm",children:u.paramName})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(be,{variant:"secondary",className:`text-xs ${l(u.impact)}`,children:[u.impact," impact"]}),n.jsx("span",{className:"text-lg",title:`${u.direction} direction`,children:d(u.direction)})]})]}),n.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:u.narrative})]},f)),n.jsx("div",{className:"pt-2 border-t border-border",children:n.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["These narratives are generated based on ",r,"% sensitivity analysis for ",n.jsx("span",{className:"font-semibold",children:s})]})})]})]})}function Z4e({simulationResults:e,options:t,scenarioVars:r,seed:a,runs:s,utilityParams:i,tcorParams:o,gameConfig:l,optionStrategies:d,dependenceConfig:u,bayesianOverride:f,copulaConfig:m,horizonMonths:p,onAuditEvent:g,onTopFactorsChange:b}){var he;const[v,y]=N.useState(!1),[j,_]=N.useState(""),[C,A]=N.useState("RAROC"),[S,T]=N.useState(10),[O,R]=N.useState(!1),[M,I]=N.useState([]),[D,$]=N.useState(""),[K,U]=N.useState(""),[J,V]=N.useState(!1),[G,q]=N.useState(),[Y,Q]=N.useState(.6);pe.useEffect(()=>{if(!j&&e.length>0){const ue=[...e].sort((Se,je)=>C==="RAROC"?je.raroc-Se.raroc:(je.certaintyEquivalent??0)-(Se.certaintyEquivalent??0));_(ue[0].optionId)}},[e,j,C]),pe.useEffect(()=>{i&&i.mode!=="CARA"?A("CE"):A("RAROC")},[i]);const F=ue=>{const Se=e.find(je=>je.optionId===ue);return Se?C==="RAROC"?Se.raroc:Se.certaintyEquivalent??0:0},z=async()=>{if(!j)return;R(!0),I([]);const ue=t.find(Ee=>Ee.id===j);if(!ue){R(!1);return}let Se=0;ue.cost!==void 0&&ue.cost>0&&Se++,ue.expectedReturn!==void 0&&ue.expectedReturn>0&&Se++,Se+=r.length,Se+=r.filter(Ee=>Ee.dist==="normal"&&Ee.params.mean!==void 0||Ee.dist==="lognormal"&&Ee.params.mu!==void 0).length;const je=2*Se,Be=Math.ceil(je*.05);U(Be<3?"~<3s":`~${Be}s`);const $e=F(j),oe=S/100,Xe=Math.min(2e3,s),pt=[];if(ue.cost!==void 0&&ue.cost>0){const Ee=ue.cost*(1+oe),lt=ue.cost*(1-oe),ut={...ue,cost:Ee},gt={...ue,cost:lt},dt=vi([ut],r,Xe,a+11,i,o,l,d,u,f,m,p),Nt=vi([gt],r,Xe,a+13,i,o,l,d,u,f,m,p),zt=C==="RAROC"?dt[0].raroc:dt[0].certaintyEquivalent??0,Dt=C==="RAROC"?Nt[0].raroc:Nt[0].certaintyEquivalent??0,Gt=zt-$e,rr=Dt-$e;pt.push({paramName:"Option Cost",paramType:"cost",deltaPlus:Gt,deltaMinus:rr,percentPlus:Gt/$e*100,percentMinus:rr/$e*100,maxAbsDelta:Math.max(Math.abs(Gt),Math.abs(rr))})}if(ue.expectedReturn!==void 0&&ue.expectedReturn>0){const Ee=ue.expectedReturn*(1+oe),lt=ue.expectedReturn*(1-oe),ut={...ue,expectedReturn:Ee},gt={...ue,expectedReturn:lt},dt=vi([ut],r,Xe,a+11,i,o,l,d,u,f,m,p),Nt=vi([gt],r,Xe,a+13,i,o,l,d,u,f,m,p),zt=C==="RAROC"?dt[0].raroc:dt[0].certaintyEquivalent??0,Dt=C==="RAROC"?Nt[0].raroc:Nt[0].certaintyEquivalent??0,Gt=zt-$e,rr=Dt-$e;pt.push({paramName:"Option Return",paramType:"return",deltaPlus:Gt,deltaMinus:rr,percentPlus:Gt/$e*100,percentMinus:rr/$e*100,maxAbsDelta:Math.max(Math.abs(Gt),Math.abs(rr))})}for(const Ee of r){const lt=Ee.weight??1,ut=lt*(1+oe),gt=lt*(1-oe),dt=r.map(Ke=>Ke.id===Ee.id?{...Ke,weight:ut}:Ke),Nt=r.map(Ke=>Ke.id===Ee.id?{...Ke,weight:gt}:Ke),zt=vi([ue],dt,Xe,a+11,i,o,l,d,u,f,m,p),Dt=vi([ue],Nt,Xe,a+13,i,o,l,d,u,f,m,p),Gt=C==="RAROC"?zt[0].raroc:zt[0].certaintyEquivalent??0,rr=C==="RAROC"?Dt[0].raroc:Dt[0].certaintyEquivalent??0,jt=Gt-$e,Ce=rr-$e;pt.push({paramName:`${Ee.name} (weight)`,paramType:"varWeight",deltaPlus:jt,deltaMinus:Ce,percentPlus:jt/$e*100,percentMinus:Ce/$e*100,maxAbsDelta:Math.max(Math.abs(jt),Math.abs(Ce))})}for(const Ee of r)if(Ee.dist==="normal"&&Ee.params.mean!==void 0){const lt=Ee.params.mean,ut=lt*(1+oe),gt=lt*(1-oe),dt=r.map(Ke=>Ke.id===Ee.id?{...Ke,params:{...Ke.params,mean:ut}}:Ke),Nt=r.map(Ke=>Ke.id===Ee.id?{...Ke,params:{...Ke.params,mean:gt}}:Ke),zt=vi([ue],dt,Xe,a+11,i,o,l,d,u,f,m,p),Dt=vi([ue],Nt,Xe,a+13,i,o,l,d,u,f,m,p),Gt=C==="RAROC"?zt[0].raroc:zt[0].certaintyEquivalent??0,rr=C==="RAROC"?Dt[0].raroc:Dt[0].certaintyEquivalent??0,jt=Gt-$e,Ce=rr-$e;pt.push({paramName:`${Ee.name} (mean)`,paramType:"varMean",deltaPlus:jt,deltaMinus:Ce,percentPlus:jt/$e*100,percentMinus:Ce/$e*100,maxAbsDelta:Math.max(Math.abs(jt),Math.abs(Ce))})}else if(Ee.dist==="lognormal"&&Ee.params.mu!==void 0){const lt=Ee.params.mu,ut=lt*(1+oe),gt=lt*(1-oe),dt=r.map(Ke=>Ke.id===Ee.id?{...Ke,params:{...Ke.params,mu:ut}}:Ke),Nt=r.map(Ke=>Ke.id===Ee.id?{...Ke,params:{...Ke.params,mu:gt}}:Ke),zt=vi([ue],dt,Xe,a+11,i,o,l,d,u,f,m,p),Dt=vi([ue],Nt,Xe,a+13,i,o,l,d,u,f,m,p),Gt=C==="RAROC"?zt[0].raroc:zt[0].certaintyEquivalent??0,rr=C==="RAROC"?Dt[0].raroc:Dt[0].certaintyEquivalent??0,jt=Gt-$e,Ce=rr-$e;pt.push({paramName:`${Ee.name} (mu)`,paramType:"varMean",deltaPlus:jt,deltaMinus:Ce,percentPlus:jt/$e*100,percentMinus:Ce/$e*100,maxAbsDelta:Math.max(Math.abs(jt),Math.abs(Ce))})}pt.sort((Ee,lt)=>lt.maxAbsDelta-Ee.maxAbsDelta),I(pt),$(`sensitivity-${Date.now()}`),R(!1);const Oe=pt.slice(0,3).map(Ee=>({paramName:Ee.paramName,impact:Ee.maxAbsDelta}));b&&b(Oe),g("sensitivity.tornado.ran",{optionId:j,metric:C,stepPct:S,testedCount:pt.length,topThreeFactors:Oe})},H=()=>{if(M.length===0)return;const ue=t.find(je=>je.id===j),Se=[];for(const je of M)Se.push({paramName:je.paramName,direction:"Plus",delta:je.deltaPlus,percent:je.percentPlus,metric:C,optionLabel:(ue==null?void 0:ue.label)??j,runIdBase:D}),Se.push({paramName:je.paramName,direction:"Minus",delta:je.deltaMinus,percent:je.percentMinus,metric:C,optionLabel:(ue==null?void 0:ue.label)??j,runIdBase:D});U4e(Se)},ne=(()=>{if(!j)return[];const ue=t.find(Se=>Se.id===j);return(ue==null?void 0:ue.partners)??[]})(),ie=G?ne.find(ue=>ue.id===G):void 0,ce=()=>ie?M.map(ue=>{const Se=ie.dependencyScore??0;let je=.5;ue.paramName.includes("Cost")?je=.8:ue.paramName.includes("Return")?je=.6:(ue.paramName.includes("Volatility")||ue.paramName.includes("Risk"))&&(je=.9);const Be=Math.min(1,Se*je),$e=ue.deltaPlus>Math.abs(ue.deltaMinus)?"positive":"negative";return{paramName:ue.paramName,partnerInfluence:Be,direction:$e,magnitude:ue.maxAbsDelta}}):[],ge=M.map(ue=>({name:ue.paramName,deltaMinus:ue.deltaMinus,deltaPlus:ue.deltaPlus}));return n.jsxs(am,{open:v,onOpenChange:y,children:[n.jsx(I2,{asChild:!0,children:n.jsxs(le,{variant:"outline",size:"sm",children:[n.jsx(vl,{className:"w-4 h-4 mr-2"}),"Sensitivity (Tornado)"]})}),n.jsxs(Pf,{side:"right",className:"w-full sm:max-w-3xl overflow-y-auto",children:[n.jsxs(Mf,{children:[n.jsx(Df,{children:"Sensitivity Analysis (Tornado)"}),n.jsxs(Lf,{children:["One-at-a-time parameter sensitivity analysis with ",S,"% perturbation"]})]}),n.jsxs("div",{className:"space-y-6 mt-6",children:[n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-base",children:"Configuration"})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"target-option",children:"Target Option"}),n.jsxs(Et,{value:j,onValueChange:_,children:[n.jsx(kt,{id:"target-option",children:n.jsx(Tt,{placeholder:"Select option"})}),n.jsx(Ot,{children:t.map(ue=>n.jsx(we,{value:ue.id,children:ue.label},ue.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Target Metric"}),n.jsxs(nu,{value:C,onValueChange:ue=>A(ue),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(yi,{value:"RAROC",id:"metric-raroc"}),n.jsx(Ne,{htmlFor:"metric-raroc",className:"font-normal",children:"RAROC"})]}),i&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(yi,{value:"CE",id:"metric-ce"}),n.jsx(Ne,{htmlFor:"metric-ce",className:"font-normal",children:"CE (Certainty Equivalent)"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"step-percent",children:"Step % (min 1, max 50)"}),n.jsx(et,{id:"step-percent",type:"number",min:1,max:50,value:S,onChange:ue=>{const Se=parseInt(ue.target.value);!isNaN(Se)&&Se>=1&&Se<=50&&T(Se)}})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{onClick:z,disabled:O||!j||e.length===0,className:"w-full",children:O?n.jsxs(n.Fragment,{children:[n.jsx(vh,{className:"w-4 h-4 mr-2 animate-spin"}),"Running Analysis... ",K]}):"Quick Run"}),e.length===0&&n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Run a simulation first to enable sensitivity analysis"}),O&&K&&n.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Estimated time: ",K]})]})]})]}),M.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ge,{className:"text-base",children:"Tornado Chart"}),n.jsxs(be,{variant:"outline",children:["Baseline ",C,":"," ",F(j).toFixed(4)]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"show-partner-impact",checked:J,onChange:ue=>V(ue.target.checked),className:"h-4 w-4 rounded border-border"}),n.jsx(Ne,{htmlFor:"show-partner-impact",className:"text-sm font-normal cursor-pointer",children:"Show Partner Impact"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"w-4 h-4 text-muted-foreground"})}),n.jsx(St,{children:n.jsx("p",{className:"max-w-xs",children:"Shows which external partners drive our biggest ups or downs."})})]})})]})]})})}),n.jsxs(Re,{children:[n.jsxs("div",{className:"relative",children:[n.jsx(Cl,{width:"100%",height:400,children:n.jsxs(Vg,{data:ge,layout:"vertical",margin:{top:5,right:30,left:120,bottom:5},children:[n.jsx(hu,{strokeDasharray:"3 3"}),n.jsx(ji,{type:"number"}),n.jsx(Dl,{type:"category",dataKey:"name",width:110}),n.jsx(Ii,{formatter:ue=>ue.toFixed(6)}),n.jsx(Nf,{x:0,stroke:"hsl(var(--border))"}),n.jsx(po,{dataKey:"deltaMinus",stackId:"a",fill:"hsl(0 84.2% 60.2%)",children:ge.map((ue,Se)=>n.jsx(cu,{fill:ue.deltaMinus<0?"hsl(0 84.2% 60.2%)":"hsl(142 76% 36%)"},`cell-minus-${Se}`))}),n.jsx(po,{dataKey:"deltaPlus",stackId:"a",fill:"hsl(142 76% 36%)",children:ge.map((ue,Se)=>n.jsx(cu,{fill:ue.deltaPlus>0?"hsl(142 76% 36%)":"hsl(0 84.2% 60.2%)"},`cell-plus-${Se}`))})]})}),J&&ne.length>0&&n.jsx(G4e,{partners:ne,onThresholdChange:Q,onPartnerSelect:q,selectedPartnerId:G})]}),n.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-green-600 rounded"}),n.jsx("span",{children:"Improves metric"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),n.jsx("span",{children:"Worsens metric"})]})]})]})]}),n.jsx(J4e,{results:M,targetMetric:C,stepPercent:S,baselineMetric:F(j),optionLabel:((he=t.find(ue=>ue.id===j))==null?void 0:he.label)??j}),ie&&n.jsx(W4e,{partner:ie,parameterSensitivities:ce(),onClose:()=>q(void 0)}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ge,{className:"text-base",children:"Detailed Results"}),n.jsxs(le,{variant:"outline",size:"sm",onClick:H,children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})}),n.jsx(Re,{children:n.jsxs(Ho,{children:[n.jsx(Go,{children:n.jsxs(Yn,{children:[n.jsx(Mt,{children:"Parameter"}),J&&n.jsx(Mt,{children:"Partner Influence"}),n.jsx(Mt,{className:"text-right",children:"+ (Plus)"}),n.jsx(Mt,{className:"text-right",children:"% Change +"}),n.jsx(Mt,{className:"text-right",children:" (Minus)"}),n.jsx(Mt,{className:"text-right",children:"% Change "})]})}),n.jsx(Wo,{children:M.map((ue,Se)=>{const je=J?Y4e(ue.paramName,ne):[];return n.jsxs(Yn,{children:[n.jsx(Rt,{className:"font-medium",children:n.jsxs("div",{className:"flex items-center",children:[ue.paramName,J&&n.jsx(K4e,{paramName:ue.paramName,partnerInfluences:je,showIndicators:!0})]})}),J&&n.jsx(Rt,{children:n.jsx("div",{className:"text-xs text-muted-foreground",children:je.length>0?`${je.length} partner${je.length!==1?"s":""}`:"None"})}),n.jsxs(Rt,{className:`text-right font-mono text-sm ${ue.deltaPlus>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[ue.deltaPlus>0?"+":"",ue.deltaPlus.toFixed(6)]}),n.jsxs(Rt,{className:`text-right font-mono text-sm ${ue.percentPlus>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[ue.percentPlus>0?"+":"",ue.percentPlus.toFixed(2),"%"]}),n.jsxs(Rt,{className:`text-right font-mono text-sm ${ue.deltaMinus>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[ue.deltaMinus>0?"+":"",ue.deltaMinus.toFixed(6)]}),n.jsxs(Rt,{className:`text-right font-mono text-sm ${ue.percentMinus>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[ue.percentMinus>0?"+":"",ue.percentMinus.toFixed(2),"%"]})]},Se)})})]})})]})]})]})]})]})}async function DK(e,t,r,a){const s={seed:e,runs:t,options:r.map(m=>({label:m.label,cost:m.cost??0,expectedReturn:m.expectedReturn??0})).sort((m,p)=>m.label.localeCompare(p.label)),scenarioVars:a.map(m=>({name:m.name,appliesTo:m.appliesTo,dist:m.dist,params:m.params,weight:m.weight??1})).sort((m,p)=>m.name.localeCompare(p.name))},i=JSON.stringify(s,Object.keys(s).sort()),l=new TextEncoder().encode(i),d=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(d)).map(m=>m.toString(16).padStart(2,"0")).join("").substring(0,12)}function Kc(e){return`Run ID: ${e}`}function Q4e({decisionId:e,currentRunId:t,currentResults:r,currentHorizonMonths:a,onAuditEvent:s,onToast:i}){const{tenant:o}=Fr(),[l,d]=N.useState(null),[u,f]=N.useState(null),[m,p]=N.useState(null),[g,b]=N.useState(null),[v,y]=N.useState(null),[j,_]=N.useState(null),[C,A]=N.useState(""),[S,T]=N.useState(null),[O,R]=N.useState(!1),[M,I]=N.useState(!1),[D,$]=N.useState(null),[K,U]=N.useState(null);N.useEffect(()=>{const F=`retina:comparison:${e}`,z=localStorage.getItem(F);if(z)try{const H=JSON.parse(z);T(H),A(H.notes||"");const X=`retina:snapshot:${H.baselineRunId}`,ne=localStorage.getItem(X);if(ne){const ge=JSON.parse(ne);d(H.baselineRunId),f(ge.results),p(ge.horizonMonths),$(ge)}const ie=`retina:snapshot:${H.planRunId}`,ce=localStorage.getItem(ie);if(ce){const ge=JSON.parse(ce);b(H.planRunId),y(ge.results),_(ge.horizonMonths),U(ge)}}catch(H){console.error("Failed to load comparison:",H)}},[e]);const J=F=>{const z=`retina:comparison:${e}`;localStorage.setItem(z,JSON.stringify(F)),T(F)},V=()=>{if(!t||r.length===0)return;const F={runId:t,results:r,horizonMonths:a,timestamp:Date.now()};d(t),f(r),p(a),$(F);const z=`retina:snapshot:${t}`;localStorage.setItem(z,JSON.stringify(F)),s("compare.baseline.pinned",{decisionId:e,runId:t,optionCount:r.length}),i==null||i({title:"Baseline pinned",description:`Run ${Kc(t)} is now your baseline for comparison.`})},G=()=>{if(!t||r.length===0)return;if(!l){i==null||i({title:"Pin a Baseline first",description:"You need to pin a baseline before setting a plan.",variant:"destructive"});return}const F={runId:t,results:r,horizonMonths:a,timestamp:Date.now()};b(t),y(r),_(a),U(F);const z=`retina:snapshot:${t}`;if(localStorage.setItem(z,JSON.stringify(F)),u){const H=r.map(ie=>{const ce=u.find(ge=>ge.optionId===ie.optionId);return ce?{optionId:ie.optionId,optionLabel:ie.optionLabel,deltaEV:ie.ev-ce.ev,deltaRAROC:ie.raroc-ce.raroc,deltaCE:(ie.certaintyEquivalent||0)-(ce.certaintyEquivalent||0),deltaTCOR:(ie.tcor||0)-(ce.tcor||0),deltaHorizon:m!==null&&j!==null?a-m:void 0}:{optionId:ie.optionId,optionLabel:ie.optionLabel,deltaEV:ie.ev,deltaRAROC:ie.raroc,deltaCE:ie.certaintyEquivalent||0,deltaTCOR:ie.tcor||0,deltaHorizon:0}}),X={baselineRunId:l,planRunId:t,deltas:H,notes:"",timestamp:Date.now()};J(X);const ne=H.reduce((ie,ce)=>ce.deltaRAROC>ie.deltaRAROC?ce:ie,H[0]);s("compare.baselinePlan",{decisionId:e,baselineRunId:l,planRunId:t,summary:{bestOptionDelta:{optionLabel:ne.optionLabel,deltaRAROC:ne.deltaRAROC,deltaEV:ne.deltaEV},totalOptions:H.length}}),i==null||i({title:"Plan set",description:`Comparing Plan ${Kc(t)} against Baseline ${Kc(l)}.`})}},q=()=>{d(null),f(null),p(null),$(null),b(null),y(null),_(null),U(null),A(""),T(null);const F=`retina:comparison:${e}`;localStorage.removeItem(F),s("compare.cleared",{decisionId:e}),i==null||i({title:"Comparison cleared",description:"Baseline and plan have been removed."})},Y=()=>{if(!S)return;const F={...S,notes:C,timestamp:Date.now()};J(F),s("compare.notes.saved",{decisionId:e,baselineRunId:S.baselineRunId,planRunId:S.planRunId}),i==null||i({title:"Notes saved",description:"Your comparison notes have been saved."})},Q=(F,z)=>{const H=z?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",X=z?n.jsx($r,{className:"w-3 h-3 inline"}):n.jsx(fa,{className:"w-3 h-3 inline"}),ne=F>0?"+":"";return n.jsxs("span",{className:H,children:[X," ",ne,F.toFixed(4)]})};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs(le,{variant:"outline",size:"sm",onClick:V,disabled:!t||r.length===0,children:[n.jsx(ire,{className:"w-4 h-4 mr-2"}),"Pin as Baseline"]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:G,disabled:!t||!l||r.length===0,children:[n.jsx(eu,{className:"w-4 h-4 mr-2"}),"Set as Plan"]}),(l||g)&&n.jsxs(le,{variant:"ghost",size:"sm",onClick:q,children:[n.jsx(Ui,{className:"w-4 h-4 mr-2"}),"Clear"]})]}),(l||g)&&n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l&&n.jsxs(be,{variant:"outline",className:"font-mono cursor-pointer hover:bg-accent transition-colors",onClick:()=>R(!0),children:["Baseline: ",Kc(l)]}),g&&n.jsxs(be,{variant:"outline",className:"font-mono cursor-pointer hover:bg-accent transition-colors",onClick:()=>I(!0),children:["Plan: ",Kc(g)]})]}),!l&&!g&&n.jsx(Ae,{className:"border-dashed",children:n.jsx(Re,{className:"pt-6",children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx(Or,{className:"w-8 h-8 mx-auto text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Pin a Baseline and run again to set a Plan."})]})})}),S&&S.deltas.length>0&&n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Baseline vs Plan"}),n.jsxs(mt,{children:["Comparing Plan (",Kc(S.planRunId),") against Baseline (",Kc(S.baselineRunId),")"]})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:n.jsxs(Ho,{children:[n.jsx(Go,{children:n.jsxs(Yn,{children:[n.jsx(Mt,{children:"Option"}),n.jsxs(Mt,{children:["",n.jsx(ya,{term:"ev",as:"label",showTooltip:!1})]}),n.jsxs(Mt,{children:["",n.jsx(ya,{term:"raroc",as:"label",showTooltip:!1})]}),n.jsxs(Mt,{children:["",n.jsx(ya,{term:"ce",as:"label",showTooltip:!1})]}),n.jsxs(Mt,{children:["",n.jsx(ya,{term:"tcor",as:"label",showTooltip:!1})]}),S.deltas.some(F=>F.deltaHorizon!==void 0)&&n.jsxs(Mt,{children:["",n.jsx(ya,{term:"horizon",as:"label",showTooltip:!1})]})]})}),n.jsx(Wo,{children:S.deltas.map(F=>n.jsxs(Yn,{children:[n.jsx(Rt,{className:"font-medium",children:F.optionLabel}),n.jsx(Rt,{children:Q(F.deltaEV,F.deltaEV>0)}),n.jsx(Rt,{children:Q(F.deltaRAROC,F.deltaRAROC>0)}),n.jsx(Rt,{children:Q(F.deltaCE,F.deltaCE>0)}),n.jsx(Rt,{children:Q(F.deltaTCOR,F.deltaTCOR<0)}),F.deltaHorizon!==void 0&&n.jsx(Rt,{children:F.deltaHorizon!==0?n.jsxs("span",{className:"text-muted-foreground",children:[F.deltaHorizon>0?"+":"",F.deltaHorizon," months"]}):n.jsx("span",{className:"text-muted-foreground",children:""})})]},F.optionId))})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"comparison-notes",children:"What changed?"}),n.jsx(ua,{id:"comparison-notes",placeholder:"Describe what changed between baseline and plan...",value:C,onChange:F=>A(F.target.value),rows:4}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(le,{size:"sm",onClick:Y,children:"Save Notes"}),n.jsxs(le,{size:"sm",variant:"outline",onClick:()=>{V4e(e,S.baselineRunId,S.planRunId,S.deltas,C),s("compare.baselinePlan.exported",{decisionId:e,baselineRunId:S.baselineRunId,planRunId:S.planRunId,optionCount:S.deltas.length}),i==null||i({title:"Export complete",description:"Baseline vs Plan comparison exported to CSV."})},children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Export Baseline vs Plan CSV"]})]})]})]})]}),n.jsx(Nr,{open:O,onOpenChange:R,children:n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Baseline Summary"}),n.jsxs(Sr,{children:["Run ",l&&Kc(l)]})]}),n.jsx("div",{className:"space-y-4 py-4",children:D&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"text-sm font-medium",children:[n.jsx(ya,{term:"horizon"})," (months)"]}),n.jsx("div",{className:"text-2xl font-bold",children:D.horizonMonths})]}),n.jsx("div",{className:"space-y-3",children:D.results.map(F=>n.jsxs("div",{className:"p-3 border border-border rounded-lg space-y-2",children:[n.jsx("div",{className:"font-semibold",children:F.optionLabel}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-muted-foreground",children:[n.jsx(ya,{term:"ev",as:"short"}),":"]})," ",F.ev.toFixed(2)]}),n.jsxs("div",{children:[n.jsxs("span",{className:"text-muted-foreground",children:[n.jsx(ya,{term:"raroc",as:"short"}),":"]})," ",F.raroc.toFixed(4)]}),n.jsxs("div",{children:[n.jsxs("span",{className:"text-muted-foreground",children:[n.jsx(ya,{term:"ce",as:"short"}),":"]})," ",(F.certaintyEquivalent||0).toFixed(2)]}),n.jsxs("div",{children:[n.jsxs("span",{className:"text-muted-foreground",children:[n.jsx(ya,{term:"tcor",as:"short"}),":"]})," ",(F.tcor||0).toFixed(2)]})]})]},F.optionId))})]})})]})}),n.jsx(Nr,{open:M,onOpenChange:I,children:n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Plan Summary"}),n.jsxs(Sr,{children:["Run ",g&&Kc(g)]})]}),n.jsx("div",{className:"space-y-4 py-4",children:K&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"text-sm font-medium",children:[n.jsx(ya,{term:"horizon"})," (months)"]}),n.jsx("div",{className:"text-2xl font-bold",children:K.horizonMonths})]}),n.jsx("div",{className:"space-y-3",children:K.results.map(F=>n.jsxs("div",{className:"p-3 border border-border rounded-lg space-y-2",children:[n.jsx("div",{className:"font-semibold",children:F.optionLabel}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-muted-foreground",children:[n.jsx(ya,{term:"ev",as:"short"}),":"]})," ",F.ev.toFixed(2)]}),n.jsxs("div",{children:[n.jsxs("span",{className:"text-muted-foreground",children:[n.jsx(ya,{term:"raroc",as:"short"}),":"]})," ",F.raroc.toFixed(4)]}),n.jsxs("div",{children:[n.jsxs("span",{className:"text-muted-foreground",children:[n.jsx(ya,{term:"ce",as:"short"}),":"]})," ",(F.certaintyEquivalent||0).toFixed(2)]}),n.jsxs("div",{children:[n.jsxs("span",{className:"text-muted-foreground",children:[n.jsx(ya,{term:"tcor",as:"short"}),":"]})," ",(F.tcor||0).toFixed(2)]})]})]},F.optionId))})]})})]})})]})}const $_=[3,6,12,24];function eke({simulationResults:e,thresholds:t,utilitySettings:r,horizonMonths:a,onHorizonChange:s,keyAssumptions:i,baselineComparison:o,onApplyRecommendation:l,onToast:d,options:u,scenarioVars:f,seed:m,runs:p,runId:g,tcorParams:b,gameConfig:v,optionStrategies:y,dependenceConfig:j,bayesianOverride:_,copulaConfig:C,onAuditEvent:A,onStressPresetChange:S,decisionId:T,onTopFactorsChange:O}){let R="default",M=!0;try{const{tenant:F}=Fr();R=(F==null?void 0:F.tenantId)||"default";const{enabled:z}=Fj(R);M=z??!0}catch{console.debug("MetricsSection: Not in TenantProvider context, using defaults")}const[I,D]=N.useState(null),[$,K]=N.useState(null),[U,J]=N.useState("desc"),V=e.find(F=>F.optionId===I),G=e.some(F=>F.expectedUtility!==void 0&&F.certaintyEquivalent!==void 0),q=e.some(F=>F.tcor!==void 0),Y=pe.useMemo(()=>$?[...e].sort((F,z)=>{let H,X;switch($){case"raroc":H=F.raroc,X=z.raroc;break;case"ev":H=F.ev,X=z.ev;break;case"var95":H=F.var95,X=z.var95;break;case"cvar95":H=F.cvar95,X=z.cvar95;break;case"economicCapital":H=F.economicCapital,X=z.economicCapital;break;case"ce":H=F.certaintyEquivalent??0,X=z.certaintyEquivalent??0;break;case"utility":H=F.expectedUtility??0,X=z.expectedUtility??0;break;case"tcor":H=F.tcor??0,X=z.tcor??0;break;default:return 0}return U==="asc"?H-X:X-H}):e,[e,$,U]),Q=F=>{$===F?J(U==="asc"?"desc":"asc"):(K(F),J("desc"))};return e.length===0?null:n.jsxs("div",{className:"space-y-3",children:[l&&d&&n.jsx(D4e,{simulationResults:e,thresholds:t,utilitySettings:r,keyAssumptions:i,baselineComparison:o,onApplyRecommendation:l,onToast:d}),n.jsxs(si,{defaultValue:"table",className:"w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(zs,{className:`${G?"grid-cols-3":"grid-cols-2"}`,children:[n.jsx(hr,{value:"table",children:"Table"}),n.jsx(hr,{value:"charts",children:"Charts"}),G&&n.jsx(hr,{value:"utility",children:"Utility"})]}),u&&f&&m!==void 0&&p!==void 0&&A&&n.jsx(Z4e,{simulationResults:e,options:u,scenarioVars:f,seed:m,runs:p,utilityParams:r?{mode:r.mode,a:r.a,scale:r.scale}:void 0,tcorParams:b,gameConfig:v,optionStrategies:y,dependenceConfig:j,bayesianOverride:_,copulaConfig:C,horizonMonths:a,onAuditEvent:A,onTopFactorsChange:O})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(be,{variant:"outline",className:"text-xs",children:["H: ",a,"m"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ne,{htmlFor:"horizon-slider",className:"text-sm whitespace-nowrap",children:"Horizon (months)"}),n.jsxs("div",{className:"w-48",children:[n.jsx(yg,{id:"horizon-slider",min:0,max:3,step:1,value:[$_.indexOf(a)],onValueChange:F=>{const z=$_[F[0]];s(z)},className:"cursor-pointer"}),n.jsx("div",{className:"flex justify-between mt-1 text-xs text-muted-foreground",children:$_.map(F=>n.jsx("span",{children:F},F))})]})]})]}),a<6&&r&&r.mode==="CARA"&&r.a>.01&&n.jsxs("div",{className:"flex items-start gap-2 p-2 bg-blue-500/10 border border-blue-500/20 rounded-md text-xs text-blue-700 dark:text-blue-400 max-w-md",children:[n.jsx(Or,{className:"w-3 h-3 mt-0.5 shrink-0"}),n.jsxs("span",{children:["Short horizon (",a,"m) + high risk aversion (a=",r.a.toFixed(3),") may bias CE low"]})]})]})]}),n.jsxs(Cr,{value:"table",className:"space-y-4",children:[T&&g&&A&&n.jsx(Q4e,{decisionId:T,currentRunId:g,currentResults:e,currentHorizonMonths:a,onAuditEvent:A,onToast:d}),u&&f&&m!==void 0&&p!==void 0&&g&&A&&n.jsx(I4e,{options:u,scenarioVars:f,seed:m,runs:p,baseRunId:g,utilityParams:r?{mode:r.mode,a:r.a,scale:r.scale}:void 0,tcorParams:b,gameConfig:v,optionStrategies:y,dependenceConfig:j,bayesianOverride:_,thresholds:t,onAuditEvent:A,onStressPresetChange:S}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsxs(Ge,{className:"text-base",children:[Ra("monteCarlo",{plain:M})," Results"]})}),n.jsx(Re,{children:n.jsxs(Ho,{children:[n.jsx(Go,{children:n.jsxs(Yn,{children:[n.jsx(Mt,{children:Ra("options",{plain:M,short:!0})}),n.jsx(Mt,{className:"text-center",children:n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("span",{className:"cursor-help border-b border-dotted border-muted-foreground",children:Ra("horizon",{plain:M,short:!0})})}),n.jsx(St,{children:n.jsx("p",{className:"text-xs max-w-xs",children:"Time window for this option (months)"})})]})})}),n.jsx(Mt,{className:"text-right cursor-pointer hover:bg-muted/50",onClick:()=>Q("raroc"),children:n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsxs("span",{className:"cursor-help border-b border-dotted border-muted-foreground",children:[Ra("raroc",{plain:M,short:!0})," ",$==="raroc"&&(U==="asc"?"":"")]})}),n.jsx(St,{children:n.jsxs("p",{className:"text-xs max-w-xs",children:["Return per risk capital (RAROC) scaled by this option's Time window.",n.jsx("br",{}),n.jsx("br",{}),"Scaling: EVh, Caph where h = horizonMonths/12"]})})]})})}),n.jsxs(Mt,{className:"text-right cursor-pointer hover:bg-muted/50",onClick:()=>Q("ev"),children:[Ra("ev",{plain:M,short:!0})," ",$==="ev"&&(U==="asc"?"":"")]}),n.jsxs(Mt,{className:"text-right cursor-pointer hover:bg-muted/50",onClick:()=>Q("var95"),children:[Ra("var95",{plain:M,short:!0})," ",$==="var95"&&(U==="asc"?"":"")]}),n.jsxs(Mt,{className:"text-right cursor-pointer hover:bg-muted/50",onClick:()=>Q("cvar95"),children:[Ra("cvar95",{plain:M,short:!0})," ",$==="cvar95"&&(U==="asc"?"":"")]}),n.jsxs(Mt,{className:"text-right cursor-pointer hover:bg-muted/50",onClick:()=>Q("economicCapital"),children:[Ra("econCap",{plain:M,short:!0})," ",$==="economicCapital"&&(U==="asc"?"":"")]}),q&&n.jsx(Mt,{className:"text-right cursor-pointer hover:bg-muted/50",onClick:()=>Q("tcor"),children:n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsxs("span",{className:"cursor-help border-b border-dotted border-muted-foreground",children:[Ra("tcor",{plain:M,short:!0})," ",$==="tcor"&&(U==="asc"?"":"")]})}),n.jsx(St,{children:n.jsx("p",{className:"text-xs max-w-xs",children:"Total Cost of Risk: Sum of expected loss, insurance, contingency, and mitigation costs."})})]})})}),G&&n.jsxs(n.Fragment,{children:[n.jsx(Mt,{className:"text-right cursor-pointer hover:bg-muted/50",onClick:()=>Q("ce"),children:n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsxs("span",{className:"cursor-help border-b border-dotted border-muted-foreground",children:[Ra("ce",{plain:M,short:!0})," ",$==="ce"&&(U==="asc"?"":"")]})}),n.jsx(St,{children:n.jsxs("p",{className:"text-xs max-w-xs",children:["Certainty Equivalent: The guaranteed amount that provides the same utility as the risky option.",n.jsx("br",{}),n.jsx("br",{}),"Formula: CE = (-1/a)  ln(1 - EU)  scale"]})})]})})}),n.jsx(Mt,{className:"text-right cursor-pointer hover:bg-muted/50",onClick:()=>Q("utility"),children:n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsxs("span",{className:"cursor-help border-b border-dotted border-muted-foreground",children:[Ra("utility",{plain:M,short:!0})," ",$==="utility"&&(U==="asc"?"":"")]})}),n.jsx(St,{children:n.jsxs("p",{className:"text-xs max-w-xs",children:["Expected Utility: Average utility across all outcomes using CARA function.",n.jsx("br",{}),n.jsx("br",{}),"Formula: U(x) = 1 - exp(-a  x/scale)"]})})]})})})]})]})}),n.jsx(Wo,{children:Y.map(F=>n.jsxs(Yn,{className:`cursor-pointer transition-colors ${I===F.optionId?"bg-accent":"hover:bg-accent/50"}`,onClick:()=>D(F.optionId),children:[n.jsx(Rt,{className:"font-medium",children:F.optionLabel}),n.jsx(Rt,{className:"text-center",children:n.jsxs(be,{variant:"outline",className:"text-xs",children:["H: ",F.horizonMonths,"m"]})}),n.jsx(Rt,{className:"text-right",children:n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(be,{className:rv(F.raroc,t),children:F.raroc.toFixed(4)})}),n.jsx(St,{children:n.jsxs("p",{className:"text-xs",children:["RAROC thresholds (tenant):",n.jsx("br",{}),"Red ","<"," ",t.red,", Amber ","<"," ",t.amber]})})]})})}),n.jsx(Rt,{className:"text-right font-mono text-sm",children:F.ev.toFixed(2)}),n.jsx(Rt,{className:"text-right font-mono text-sm",children:F.var95.toFixed(2)}),n.jsx(Rt,{className:"text-right font-mono text-sm",children:F.cvar95.toFixed(2)}),n.jsx(Rt,{className:"text-right font-mono text-sm",children:F.economicCapital.toFixed(2)}),q&&n.jsx(Rt,{className:"text-right font-mono text-sm",children:n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("span",{className:"cursor-help",children:F.tcor!==void 0?F.tcor.toFixed(2):"-"})}),F.tcorComponents&&n.jsx(St,{children:n.jsxs("div",{className:"text-xs space-y-1",children:[n.jsx("div",{className:"font-semibold",children:"TCOR Breakdown:"}),n.jsxs("div",{children:["Expected Loss:"," ",F.tcorComponents.expectedLoss.toFixed(2)]}),n.jsxs("div",{children:["Insurance:"," ",F.tcorComponents.insurance.toFixed(2)]}),n.jsxs("div",{children:["Contingency:"," ",F.tcorComponents.contingency.toFixed(2)]}),n.jsxs("div",{children:["Mitigation:"," ",F.tcorComponents.mitigation.toFixed(2)]})]})})]})})}),G&&n.jsxs(n.Fragment,{children:[n.jsx(Rt,{className:"text-right font-mono text-sm",children:F.certaintyEquivalent!==void 0?F.certaintyEquivalent.toFixed(0):"-"}),n.jsx(Rt,{className:"text-right font-mono text-sm",children:F.expectedUtility!==void 0?F.expectedUtility.toFixed(3):"-"})]})]},F.optionId))})]})})]}),V&&n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsxs(Ge,{className:"text-base",children:["Outcome Distribution - ",V.optionLabel]})}),n.jsx(Re,{children:n.jsx(o$,{result:V})})]})]}),n.jsxs(Cr,{value:"charts",className:"space-y-4",children:[n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-base",children:"RAROC Comparison"})}),n.jsx(Re,{children:n.jsx(E4e,{results:e,thresholds:t,onBarClick:D,selectedOptionId:I||void 0})})]}),V&&n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsxs(Ge,{className:"text-base",children:["Outcome Distribution - ",V.optionLabel]})}),n.jsx(Re,{children:n.jsx(o$,{result:V})})]})]}),G&&r&&n.jsx(Cr,{value:"utility",className:"space-y-4",children:n.jsx(L4e,{results:e,utilityParams:{mode:r.mode,a:r.a,scale:r.scale},selectedOptionId:I||void 0,onCurveClick:D})})]})]})}function tke(e,t){return e.map(r=>{const a=t.metricsByOption[r.optionId];if(!a)return{optionId:r.optionId,optionLabel:r.optionLabel,deltas:{ev:{absolute:0,percent:0},raroc:{absolute:0,percent:0},economicCapital:{absolute:0,percent:0},var95:{absolute:0,percent:0},cvar95:{absolute:0,percent:0},tcor:r.tcor!==void 0?{absolute:0,percent:0}:void 0}};const s=(o,l)=>{const d=o-l,u=l!==0?d/Math.abs(l)*100:0;return{absolute:d,percent:u}},i={ev:s(r.ev,a.ev),raroc:s(r.raroc,a.raroc),economicCapital:s(r.economicCapital,a.economicCapital),var95:s(r.var95,a.var95),cvar95:s(r.cvar95,a.cvar95)};return r.tcor!==void 0&&a.tcor!==void 0&&(i.tcor=s(r.tcor,a.tcor)),{optionId:r.optionId,optionLabel:r.optionLabel,deltas:i}})}function np({delta:e,isPositiveGood:t=!0}){const r=e.absolute>0,a=e.absolute<0;if(Math.abs(e.absolute)<1e-4)return n.jsxs(be,{variant:"outline",className:"gap-1",children:[n.jsx(wl,{className:"w-3 h-3"}),n.jsx("span",{children:"No change"})]});const o=(t?r:a)?"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20":"bg-red-500/10 text-red-700 dark:text-red-400 border-red-500/20",l=r?Th:Oh;return n.jsxs(be,{variant:"outline",className:`gap-1 ${o}`,children:[n.jsx(l,{className:"w-3 h-3"}),n.jsxs("span",{children:[r?"+":"",e.percent.toFixed(1),"%"]})]})}function rke({currentResults:e,previousSnapshot:t,currentSeed:r,currentRuns:a,currentSpearman:s,previousSpearman:i,currentHorizonMonths:o,currentCopulaFroErr:l,currentCopulaTargetSet:d,lastSensitivityRunId:u,onViewSensitivity:f}){var v,y;const m=tke(e,t),p=s!==void 0&&i!==void 0?s-i:void 0,g=o!==void 0&&t.horizonMonths!==void 0?o-t.horizonMonths:void 0,b=d&&((v=t.copula)==null?void 0:v.targetSet)&&l!==void 0&&((y=t.copula)==null?void 0:y.froErr)!==void 0&&Math.abs(l-t.copula.froErr)>.05;return n.jsxs(Ae,{className:"border-primary/20 bg-primary/5",children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx($r,{className:"w-5 h-5 text-primary"}),"What Changed?"]}),n.jsxs(mt,{children:["Compared to previous run (seed ",t.seed,", runs"," ",t.runs,", runId"," ",t.runId.slice(0,8),"...)"]})]}),n.jsxs(be,{variant:"outline",children:["Current: seed ",r,", runs ",a]})]})}),n.jsx(Re,{children:n.jsxs("div",{className:"space-y-4",children:[g!==void 0&&g!==0&&n.jsx("div",{className:"p-3 bg-muted/50 border border-border rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm font-medium",children:"Horizon Change (Horizon)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(be,{variant:"outline",className:`font-mono ${Math.abs(g)>=3?g>0?"bg-blue-500/10 text-blue-700 dark:text-blue-400 border-blue-500/20":"bg-orange-500/10 text-orange-700 dark:text-orange-400 border-orange-500/20":""}`,children:[g>0?"+":"",g," months"]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.horizonMonths,"  ",o]})]})]})}),b&&n.jsx("div",{className:"p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm font-medium text-purple-700 dark:text-purple-400",children:"Dependence Changed"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(be,{variant:"outline",className:"font-mono bg-purple-500/10 text-purple-700 dark:text-purple-400 border-purple-500/20",children:["Frobenius:"," ",Math.abs(l-t.copula.froErr).toFixed(3)]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.copula.froErr.toFixed(3)," "," ",l.toFixed(3)]})]})]})}),u&&f&&n.jsx("div",{className:"p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg cursor-pointer hover:bg-amber-500/20 transition-colors",onClick:f,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm font-medium text-amber-700 dark:text-amber-400",children:"View Last Sensitivity Results"}),n.jsxs(be,{variant:"outline",className:"font-mono bg-amber-500/10 text-amber-700 dark:text-amber-400 border-amber-500/20",children:["Run ID: ",u.slice(0,8),"..."]})]})}),p!==void 0&&n.jsx("div",{className:"p-3 bg-muted/50 border border-border rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm font-medium",children:"Correlation Change ()"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(be,{variant:Math.abs(p)<.05?"outline":"default",className:`font-mono ${Math.abs(p)>=.1?p>0?"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20":"bg-red-500/10 text-red-700 dark:text-red-400 border-red-500/20":""}`,children:[p>0?"+":"",p.toFixed(2)]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[i==null?void 0:i.toFixed(2)," "," ",s==null?void 0:s.toFixed(2)]})]})]})}),m.map(j=>n.jsxs("div",{className:"p-4 bg-background border border-border rounded-lg space-y-3",children:[n.jsx("div",{className:"font-semibold text-sm",children:j.optionLabel}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:"RAROC"}),n.jsx(np,{delta:j.deltas.raroc,isPositiveGood:!0}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[j.deltas.raroc.absolute>0?"+":"",j.deltas.raroc.absolute.toFixed(4)]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:"Expected Value"}),n.jsx(np,{delta:j.deltas.ev,isPositiveGood:!0}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[j.deltas.ev.absolute>0?"+":"",j.deltas.ev.absolute.toFixed(2)]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:"Economic Capital"}),n.jsx(np,{delta:j.deltas.economicCapital,isPositiveGood:!1}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[j.deltas.economicCapital.absolute>0?"+":"",j.deltas.economicCapital.absolute.toFixed(2)]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:"VaR95"}),n.jsx(np,{delta:j.deltas.var95,isPositiveGood:!0}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[j.deltas.var95.absolute>0?"+":"",j.deltas.var95.absolute.toFixed(2)]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:"CVaR95"}),n.jsx(np,{delta:j.deltas.cvar95,isPositiveGood:!0}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[j.deltas.cvar95.absolute>0?"+":"",j.deltas.cvar95.absolute.toFixed(2)]})]}),j.deltas.tcor&&n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:"TCOR"}),n.jsx(np,{delta:j.deltas.tcor,isPositiveGood:!1}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[j.deltas.tcor.absolute>0?"+":"",j.deltas.tcor.absolute.toFixed(2)]})]})]})]},j.optionId))]})})]})}const Vx=[{id:"market",label:"Market",color:"bg-blue-500"},{id:"operational",label:"Operational",color:"bg-green-500"},{id:"financial",label:"Financial",color:"bg-purple-500"},{id:"external",label:"External",color:"bg-orange-500"},{id:"regulatory",label:"Regulatory",color:"bg-red-500"},{id:"custom",label:"Custom",color:"bg-gray-500"}],d$=[{id:"demand-shock",name:"Demand Shock",icon:$r,description:"Sudden change in market demand",category:"market",tags:["demand","market","volatility"],variables:[{id:"var-demand-shock",name:"Demand Shock",appliesTo:"return",dist:"triangular",params:{min:-.2,mode:0,max:.4},weight:1}]},{id:"cost-inflation",name:"Cost Inflation",icon:fa,description:"Rising operational costs",category:"operational",tags:["cost","inflation","operational"],variables:[{id:"var-cost-inflation",name:"Cost Inflation",appliesTo:"cost",dist:"normal",params:{mean:.05,sd:.03},weight:1}]},{id:"fx-move",name:"FX Move",icon:tte,description:"Foreign exchange volatility",category:"financial",tags:["fx","currency","financial"],variables:[{id:"var-fx-move",name:"FX Move",appliesTo:"return",dist:"normal",params:{mean:0,sd:.06},weight:.8}]},{id:"supply-delay",name:"Supply Delay",icon:Lp,description:"Supply chain disruption",category:"operational",tags:["supply","chain","delay"],variables:[{id:"var-supply-delay",name:"Supply Delay",appliesTo:"cost",dist:"lognormal",params:{mu:0,sigma:.25},weight:1.2}]},{id:"market-volatility",name:"Market Volatility",icon:vl,description:"High market uncertainty",category:"market",tags:["market","volatility","uncertainty"],variables:[{id:"var-market-volatility",name:"Market Volatility",appliesTo:"return",dist:"normal",params:{mean:0,sd:.12},weight:1.5}]},{id:"regulatory-change",name:"Regulatory Change",icon:ere,description:"New compliance requirements",category:"regulatory",tags:["regulatory","compliance","legal"],variables:[{id:"var-regulatory-change",name:"Regulatory Change",appliesTo:"cost",dist:"uniform",params:{min:.02,max:.15},weight:1}]},{id:"weather-event",name:"Weather Event",icon:Hee,description:"Climate-related disruption",category:"external",tags:["weather","climate","external"],variables:[{id:"var-weather-event",name:"Weather Event",appliesTo:"cost",dist:"lognormal",params:{mu:.05,sigma:.3},weight:.7}]},{id:"tech-disruption",name:"Tech Disruption",icon:F9,description:"Technology-driven market shift",category:"external",tags:["technology","disruption","innovation"],variables:[{id:"var-tech-disruption",name:"Tech Disruption",appliesTo:"return",dist:"triangular",params:{min:-.15,mode:.05,max:.5},weight:1.3}]}];function nke({currentVariables:e,onApplyTemplate:t,tenantId:r,onAuditEvent:a}){const[s,i]=N.useState([]),[o,l]=N.useState(!1),[d,u]=N.useState(!1),[f,m]=N.useState(!1),[p,g]=N.useState(""),[b,v]=N.useState(null),[y,j]=N.useState(null),[_,C]=N.useState(!1),[A,S]=N.useState(!1),[T,O]=N.useState(!1),[R,M]=N.useState(!1),[I,D]=N.useState(null),[$,K]=N.useState(null),[U,J]=N.useState([]),[V,G]=N.useState(""),[q,Y]=N.useState("all"),[Q,F]=N.useState([]),[z,H]=N.useState(!1),[X,ne]=N.useState([]),[ie,ce]=N.useState("custom"),[ge,he]=N.useState(""),[ue,Se]=N.useState("edit");N.useEffect(()=>{const Ce=`retina:scenarioTemplates:${r}`,Ke=localStorage.getItem(Ce);if(Ke)try{i(JSON.parse(Ke))}catch(bt){console.error("Failed to load user templates:",bt)}const Bt=localStorage.getItem("retina:scenarioTemplates:shared");if(Bt)try{J(JSON.parse(Bt))}catch(bt){console.error("Failed to load shared templates:",bt)}},[r]);const je=Ce=>{const Ke=`retina:scenarioTemplates:${r}`;localStorage.setItem(Ke,JSON.stringify(Ce)),i(Ce)},Be=()=>{var Ke;if(!p.trim())return;const Ce=s.find(Jt=>Jt.name===p.trim());if(Ce){const Jt={version:(((Ke=Ce.versions)==null?void 0:Ke.length)||0)+1,variables:e,modifiedAt:Date.now(),modifiedBy:"Current User"},Bt={...Ce,variables:e,versions:[...Ce.versions||[],Jt]},bt=s.map(Lt=>Lt.name===p.trim()?Bt:Lt);je(bt),a("scenario.template.updated",{name:p.trim(),countVars:e.length,version:Jt.version})}else{const Jt=ge.split(",").map(Lt=>Lt.trim()).filter(Lt=>Lt.length>0),Bt={name:p.trim(),variables:e,createdAt:Date.now(),createdBy:"Current User",versions:[],category:ie,tags:Jt.length>0?Jt:void 0,permission:ue},bt=[...s,Bt];je(bt),a("scenario.template.saved",{name:p.trim(),countVars:e.length,category:ie,tags:Jt})}g(""),he(""),ce("custom"),Se("edit"),l(!1)},$e=Ce=>{const Ke=s.filter(Jt=>Jt.name!==Ce.name);je(Ke)},oe=Ce=>{v(Ce),u(!1),m(!0)},Xe=Ce=>{j(Ce),m(!0)},pt=()=>{if(b)t(b.variables,b.name),a("scenario.template.loaded",{name:b.name,countVars:b.variables.length}),v(null);else if(y){const Ce=[...e,...y.variables];t(Ce,y.name),a("scenario.template.loaded",{name:y.name,countVars:y.variables.length}),j(null)}m(!1)},Oe=Ce=>{const Ke={name:Ce.name,variables:Ce.variables,createdAt:Ce.createdAt,createdBy:Ce.createdBy,versions:Ce.versions,exportedAt:Date.now(),exportedFrom:r},Jt=new Blob([JSON.stringify(Ke,null,2)],{type:"application/json"}),Bt=URL.createObjectURL(Jt),bt=document.createElement("a");bt.href=Bt,bt.download=`template_${Ce.name.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(bt),bt.click(),document.body.removeChild(bt),URL.revokeObjectURL(Bt),a("scenario.template.exported",{name:Ce.name,countVars:Ce.variables.length})},Ee=async()=>{if(I)try{const Ce=await I.text(),Ke=JSON.parse(Ce),Jt={name:Ke.name,variables:Ke.variables,createdAt:Date.now(),createdBy:`Imported from ${Ke.exportedFrom||"unknown"}`,versions:Ke.versions||[]},Bt=[...s,Jt];je(Bt),a("scenario.template.imported",{name:Jt.name,countVars:Jt.variables.length}),D(null),S(!1)}catch(Ce){console.error("Failed to import template:",Ce),alert("Failed to import template. Please check the file format.")}},lt=Ce=>{const Ke={...Ce,isShared:!0,sharedBy:r},Jt="retina:scenarioTemplates:shared",Bt=localStorage.getItem(Jt);let bt=[];if(Bt)try{bt=JSON.parse(Bt)}catch(sr){console.error("Failed to load shared templates:",sr)}bt.some(sr=>sr.name===Ce.name&&sr.sharedBy===r)||(bt.push(Ke),localStorage.setItem(Jt,JSON.stringify(bt)),J(bt),a("scenario.template.shared",{name:Ce.name,countVars:Ce.variables.length}))},ut=Ce=>{const Ke={...Ce,createdAt:Date.now(),createdBy:`Copied from ${Ce.sharedBy||"shared"}`,isShared:!1,sharedBy:void 0},Jt=[...s,Ke];je(Jt),a("scenario.template.copied",{name:Ce.name,countVars:Ce.variables.length,from:Ce.sharedBy})},gt=(Ce,Ke)=>{const Jt={...Ce,variables:Ke.variables},Bt=s.map(bt=>bt.name===Ce.name?Jt:bt);je(Bt),a("scenario.template.version_restored",{name:Ce.name,version:Ke.version}),M(!1),K(null)},dt=d$.filter(Ce=>{var bt;const Ke=V===""||Ce.name.toLowerCase().includes(V.toLowerCase())||Ce.description.toLowerCase().includes(V.toLowerCase())||((bt=Ce.tags)==null?void 0:bt.some(Lt=>Lt.toLowerCase().includes(V.toLowerCase()))),Jt=q==="all"||Ce.category===q,Bt=Q.length===0||Q.some(Lt=>{var sr;return(sr=Ce.tags)==null?void 0:sr.includes(Lt)});return Ke&&Jt&&Bt}),Nt=s.filter(Ce=>{var bt;const Ke=V===""||Ce.name.toLowerCase().includes(V.toLowerCase())||((bt=Ce.tags)==null?void 0:bt.some(Lt=>Lt.toLowerCase().includes(V.toLowerCase()))),Jt=q==="all"||Ce.category===q,Bt=Q.length===0||Q.some(Lt=>{var sr;return(sr=Ce.tags)==null?void 0:sr.includes(Lt)});return Ke&&Jt&&Bt}),zt=Array.from(new Set([...d$.flatMap(Ce=>Ce.tags||[]),...s.flatMap(Ce=>Ce.tags||[])])),Dt=Ce=>{F(Ke=>Ke.includes(Ce)?Ke.filter(Jt=>Jt!==Ce):[...Ke,Ce])},Gt=Ce=>{if(X.length>=3){alert("You can compare up to 3 templates at a time");return}X.some(Ke=>Ke.name===Ce.name)||ne([...X,Ce])},rr=Ce=>{ne(X.filter(Ke=>Ke.name!==Ce))},jt=Ce=>{switch(Ce){case"read-only":return tP;case"admin":return Dp;default:return eP}};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(Ae,{children:n.jsxs(Re,{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Rl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(et,{placeholder:"Search templates by name, description, or tags...",value:V,onChange:Ce=>G(Ce.target.value),className:"pl-9"})]}),X.length>0&&n.jsxs(le,{variant:"outline",onClick:()=>H(!0),children:[n.jsx(gN,{className:"w-4 h-4 mr-2"}),"Compare (",X.length,")"]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(Cg,{className:"w-4 h-4 text-muted-foreground"}),n.jsx(le,{variant:q==="all"?"default":"outline",size:"sm",onClick:()=>Y("all"),children:"All"}),Vx.map(Ce=>n.jsx(le,{variant:q===Ce.id?"default":"outline",size:"sm",onClick:()=>Y(Ce.id),children:Ce.label},Ce.id))]}),zt.length>0&&n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx($9,{className:"w-4 h-4 text-muted-foreground"}),zt.slice(0,10).map(Ce=>n.jsx(be,{variant:Q.includes(Ce)?"default":"outline",className:"cursor-pointer",onClick:()=>Dt(Ce),children:Ce},Ce)),Q.length>0&&n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>F([]),children:"Clear tags"})]})]})}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Built-in Presets"}),n.jsx("div",{className:"grid grid-cols-1 gap-3",children:dt.length===0?n.jsx("div",{className:"col-span-2 text-center py-6 text-sm text-muted-foreground",children:"No templates match your search criteria"}):dt.map(Ce=>{const Ke=Ce.icon,Jt=Vx.find(Bt=>Bt.id===Ce.category);return n.jsx(Ae,{className:"cursor-pointer hover:bg-accent/50 transition-colors border-2",onClick:()=>Xe(Ce),children:n.jsxs(Re,{className:"p-3 space-y-2",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center shrink-0",children:n.jsx(Ke,{className:"w-4 h-4 text-primary"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-semibold text-sm mb-1",children:Ce.name}),n.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:Ce.description})]})]}),n.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[Jt&&n.jsx(be,{variant:"outline",className:"text-xs",children:Jt.label}),Ce.tags&&Ce.tags.length>0&&n.jsx(be,{variant:"secondary",className:"text-xs",children:Ce.tags[0]})]})]})},Ce.id)})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Your Templates"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>l(!0),disabled:e.length===0,children:[n.jsx(yp,{className:"w-4 h-4 mr-2"}),"Save"]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>u(!0),disabled:s.length===0,children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Load"]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>S(!0),children:[n.jsx(jv,{className:"w-4 h-4 mr-2"}),"Import"]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>O(!0),disabled:U.length===0,children:[n.jsx(JR,{className:"w-4 h-4 mr-2"}),"Shared (",U.length,")"]})]})]}),Nt.length===0?n.jsx("div",{className:"text-center py-6 border border-dashed border-border rounded-lg",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:s.length===0?"No saved templates yet. Save your current variables as a template.":"No templates match your search criteria"})}):n.jsx("div",{className:"space-y-2",children:Nt.slice(-5).reverse().map((Ce,Ke)=>{const Jt=jt(Ce.permission),Bt=Vx.find(sr=>sr.id===Ce.category),bt=Ce.permission==="read-only",Lt=X.some(sr=>sr.name===Ce.name);return n.jsxs("div",{className:"p-3 border border-border rounded-lg flex items-center justify-between hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("div",{className:"font-medium text-sm",children:Ce.name}),n.jsx(Jt,{className:"w-3 h-3 text-muted-foreground"}),Bt&&n.jsx(be,{variant:"outline",className:"text-xs",children:Bt.label})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[Ce.variables.length," variables "," ",new Date(Ce.createdAt).toLocaleDateString()]}),Ce.tags&&Ce.tags.length>0&&n.jsx("div",{className:"flex gap-1 mt-1 flex-wrap",children:Ce.tags.slice(0,3).map(sr=>n.jsx(be,{variant:"secondary",className:"text-xs",children:sr},sr))})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(le,{variant:Lt?"default":"ghost",size:"sm",onClick:()=>Lt?rr(Ce.name):Gt(Ce),title:Lt?"Remove from comparison":"Add to comparison",children:n.jsx(gN,{className:"w-4 h-4"})}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>oe(Ce),title:"Load template",children:n.jsx(qn,{className:"w-4 h-4"})}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>Oe(Ce),title:"Export as JSON",children:n.jsx(yp,{className:"w-4 h-4"})}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>lt(Ce),title:"Share with other tenants",disabled:bt,children:n.jsx(bre,{className:"w-4 h-4"})}),Ce.versions&&Ce.versions.length>0&&n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>{K(Ce),M(!0)},title:"View version history",children:n.jsx(Gb,{className:"w-4 h-4"})}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>$e(Ce),title:"Delete template",disabled:bt,children:n.jsx(mo,{className:"w-4 h-4 text-destructive"})})]})]},Ke)})})]}),n.jsx(Nr,{open:o,onOpenChange:l,children:n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Save as Template"}),n.jsx(Sr,{children:"Save your current scenario variables as a reusable template"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"template-name",children:"Template Name"}),n.jsx(et,{id:"template-name",placeholder:"e.g., Q4 2024 Scenario",value:p,onChange:Ce=>g(Ce.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"template-category",children:"Category"}),n.jsxs(Et,{value:ie,onValueChange:ce,children:[n.jsx(kt,{id:"template-category",children:n.jsx(Tt,{})}),n.jsx(Ot,{children:Vx.map(Ce=>n.jsx(we,{value:Ce.id,children:Ce.label},Ce.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"template-tags",children:"Tags (comma-separated)"}),n.jsx(et,{id:"template-tags",placeholder:"e.g., market, risk, Q4",value:ge,onChange:Ce=>he(Ce.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"template-permission",children:"Permission Level"}),n.jsxs(Et,{value:ue,onValueChange:Ce=>Se(Ce),children:[n.jsx(kt,{id:"template-permission",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"read-only",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tP,{className:"w-4 h-4"}),"Read-only"]})}),n.jsx(we,{value:"edit",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(eP,{className:"w-4 h-4"}),"Edit"]})}),n.jsx(we,{value:"admin",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dp,{className:"w-4 h-4"}),"Admin"]})})]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[ue==="read-only"&&"Template cannot be edited or deleted",ue==="edit"&&"Template can be edited and deleted",ue==="admin"&&"Full control over template"]})]}),n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-sm font-medium mb-2",children:"Current Variables"}),n.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:e.map(Ce=>n.jsxs("div",{children:[" ",Ce.name," (",Ce.appliesTo,")"]},Ce.id))})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),n.jsxs(le,{onClick:Be,disabled:!p.trim(),children:[n.jsx(yp,{className:"w-4 h-4 mr-2"}),"Save Template"]})]})]})}),n.jsx(Nr,{open:d,onOpenChange:u,children:n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Load Template"}),n.jsx(Sr,{children:"Select a template to load its variables"})]}),n.jsx("div",{className:"space-y-3 py-4",children:s.map((Ce,Ke)=>n.jsx(Ae,{className:"cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>oe(Ce),children:n.jsxs(Re,{className:"p-4",children:[n.jsx("div",{className:"font-medium text-sm mb-1",children:Ce.name}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[Ce.variables.length," variables "," ",new Date(Ce.createdAt).toLocaleDateString()]})]})},Ke))}),n.jsx(bn,{children:n.jsx(le,{variant:"outline",onClick:()=>u(!1),children:"Cancel"})})]})}),n.jsx(Nr,{open:A,onOpenChange:S,children:n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Import Template"}),n.jsx(Sr,{children:"Import a template from a JSON file"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"import-file",children:"Select JSON File"}),n.jsx(et,{id:"import-file",type:"file",accept:".json",onChange:Ce=>{var Ke;return D(((Ke=Ce.target.files)==null?void 0:Ke[0])||null)}})]}),I&&n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-sm font-medium",children:I.name}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[(I.size/1024).toFixed(2)," KB"]})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>{S(!1),D(null)},children:"Cancel"}),n.jsxs(le,{onClick:Ee,disabled:!I,children:[n.jsx(jv,{className:"w-4 h-4 mr-2"}),"Import Template"]})]})]})}),n.jsx(Nr,{open:T,onOpenChange:O,children:n.jsxs(gr,{className:"max-w-2xl",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(JR,{className:"w-5 h-5"}),"Shared Templates"]})}),n.jsx(Sr,{children:"Templates shared by other tenants"})]}),n.jsx("div",{className:"space-y-3 py-4 max-h-96 overflow-y-auto",children:U.length===0?n.jsx("div",{className:"text-center py-6",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"No shared templates available"})}):U.map((Ce,Ke)=>n.jsx(Ae,{className:"hover:bg-accent/50 transition-colors",children:n.jsx(Re,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm mb-1",children:Ce.name}),n.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[n.jsxs("div",{children:[Ce.variables.length," variables"]}),n.jsxs("div",{children:["Shared by: ",Ce.sharedBy||"Unknown"]})]})]}),n.jsxs(le,{size:"sm",onClick:()=>ut(Ce),children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Copy to My Templates"]})]})})},Ke))}),n.jsx(bn,{children:n.jsx(le,{variant:"outline",onClick:()=>O(!1),children:"Close"})})]})}),n.jsx(Nr,{open:R,onOpenChange:M,children:n.jsxs(gr,{className:"max-w-2xl",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gb,{className:"w-5 h-5"}),"Version History: ",$==null?void 0:$.name]})}),n.jsx(Sr,{children:"View and restore previous versions of this template"})]}),n.jsxs("div",{className:"space-y-3 py-4 max-h-96 overflow-y-auto",children:[n.jsx(Ae,{className:"border-2 border-primary",children:n.jsx(Re,{className:"p-4",children:n.jsx("div",{className:"flex items-start justify-between gap-4",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("div",{className:"font-medium text-sm",children:"Current Version"}),n.jsx(be,{variant:"default",children:"Active"})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[$==null?void 0:$.variables.length," variables"]})]})})})}),$!=null&&$.versions&&$.versions.length>0?$.versions.slice().reverse().map((Ce,Ke)=>n.jsx(Ae,{children:n.jsx(Re,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"font-medium text-sm mb-1",children:["Version ",Ce.version]}),n.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[n.jsxs("div",{children:[Ce.variables.length," variables"]}),n.jsx("div",{children:new Date(Ce.modifiedAt).toLocaleString()}),n.jsxs("div",{children:["Modified by: ",Ce.modifiedBy]})]})]}),n.jsxs(le,{size:"sm",variant:"outline",onClick:()=>gt($,Ce),children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Restore"]})]})})},Ke)):n.jsx("div",{className:"text-center py-6",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"No previous versions available"})})]}),n.jsx(bn,{children:n.jsx(le,{variant:"outline",onClick:()=>{M(!1),K(null)},children:"Close"})})]})}),n.jsx(Nr,{open:z,onOpenChange:H,children:n.jsxs(gr,{className:"max-w-6xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(gN,{className:"w-5 h-5"}),"Template Comparison"]})}),n.jsx(Sr,{children:"Compare up to 3 templates side by side"})]}),n.jsx("div",{className:"py-4",children:X.length===0?n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx("p",{children:"No templates selected for comparison"}),n.jsx("p",{className:"text-sm mt-2",children:"Click the compare icon on templates to add them"})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${X.length}, 1fr)`},children:X.map(Ce=>{const Ke=Vx.find(Bt=>Bt.id===Ce.category),Jt=jt(Ce.permission);return n.jsx(Ae,{children:n.jsx(He,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs(Ge,{className:"text-base flex items-center gap-2",children:[Ce.name,n.jsx(Jt,{className:"w-4 h-4 text-muted-foreground"})]}),Ke&&n.jsx(be,{variant:"outline",className:"text-xs mt-2",children:Ke.label})]}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>rr(Ce.name),children:n.jsx(Ui,{className:"w-4 h-4"})})]})})},Ce.name)})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Basic Information"}),n.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${X.length}, 1fr)`},children:X.map(Ce=>n.jsx(Ae,{children:n.jsxs(Re,{className:"p-4 space-y-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Variables:"})," ",n.jsx("span",{className:"font-medium",children:Ce.variables.length})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Created:"})," ",n.jsx("span",{className:"font-medium",children:new Date(Ce.createdAt).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Permission:"})," ",n.jsx("span",{className:"font-medium",children:Ce.permission||"edit"})]}),Ce.versions&&Ce.versions.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Versions:"})," ",n.jsx("span",{className:"font-medium",children:Ce.versions.length})]})]})},Ce.name))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Tags"}),n.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${X.length}, 1fr)`},children:X.map(Ce=>n.jsx(Ae,{children:n.jsx(Re,{className:"p-4",children:Ce.tags&&Ce.tags.length>0?n.jsx("div",{className:"flex gap-1 flex-wrap",children:Ce.tags.map(Ke=>n.jsx(be,{variant:"secondary",className:"text-xs",children:Ke},Ke))}):n.jsx("span",{className:"text-sm text-muted-foreground",children:"No tags"})})},Ce.name))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Variables"}),n.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${X.length}, 1fr)`},children:X.map(Ce=>n.jsx(Ae,{children:n.jsx(Re,{className:"p-4",children:n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Ce.variables.map(Ke=>n.jsxs("div",{className:"p-2 bg-muted rounded text-xs space-y-1",children:[n.jsx("div",{className:"font-medium",children:Ke.name}),n.jsxs("div",{className:"text-muted-foreground",children:[Ke.appliesTo,"  ",Ke.dist]}),n.jsxs("div",{className:"text-muted-foreground",children:["weight: ",Ke.weight]})]},Ke.id))})})},Ce.name))})]}),n.jsx("div",{className:"flex justify-end gap-2",children:X.map(Ce=>n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>{oe(Ce),H(!1)},children:["Load ",Ce.name]},Ce.name))})]})}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>ne([]),disabled:X.length===0,children:"Clear All"}),n.jsx(le,{variant:"outline",onClick:()=>H(!1),children:"Close"})]})]})}),n.jsx(Nr,{open:f,onOpenChange:m,children:n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"w-5 h-5 text-orange-500"}),b?"Replace Variables?":"Merge Variables?"]}),n.jsx(Sr,{children:b?"This will replace all current scenario variables with the template variables.":"This will add the preset variables to your current scenario variables."})]}),n.jsx("div",{className:"py-4",children:b?n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsxs("div",{className:"text-sm font-medium mb-2",children:["Template: ",b.name]}),n.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:b.variables.map(Ce=>n.jsxs("div",{children:[" ",Ce.name," (",Ce.appliesTo,")"]},Ce.id))})]})}):y?n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsxs("div",{className:"text-sm font-medium mb-2",children:["Preset: ",y.name]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Will add ",y.variables.length," ","variable(s) to your current ",e.length," ","variable(s)"]})]})}):null}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>{m(!1),v(null),j(null)},children:"Cancel"}),n.jsx(le,{onClick:pt,children:b?"Replace Variables":"Merge Variables"})]})]})})]})}function ake({children:e,sectionTitle:t,helpTip:r,compact:a=!1,className:s="",variant:i="default"}){const o=bj(),l=a||o==="advanced",d=!a&&o==="basic",u=()=>l?"p-3":d?"p-8":"p-6",f=()=>l?"space-y-3":d?"space-y-6":"space-y-4",m=()=>l?"text-base":d?"text-2xl":"text-xl",p=()=>{switch(i){case"ghost":return"bg-transparent border-0 shadow-none";case"bordered":return"bg-background border-2 border-border";default:return"bg-card border border-border"}},g=o==="basic"&&r;return n.jsx(Ae,{className:`${p()} ${s}`,children:n.jsxs("div",{className:`${u()} ${f()}`,children:[(t||r)&&n.jsx("div",{className:"flex items-center justify-between gap-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[t&&n.jsx("h3",{className:`${m()} font-semibold text-foreground`,children:t}),r&&n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:`${l?"h-3.5 w-3.5":"h-4 w-4"} text-muted-foreground cursor-help`})}),n.jsx(St,{side:"right",className:"max-w-xs",children:n.jsx("p",{className:"text-sm",children:r})})]})})]})}),g&&n.jsx("div",{className:"bg-muted/50 border border-border rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:r})}),n.jsx("div",{className:f(),children:e})]})})}function F_({children:e,compact:t=!1,spacing:r="normal",className:a="",as:s="div"}){const i=bj(),o=t||i==="advanced",l=!t&&i==="basic",d=()=>r==="tight"?o?"space-y-1.5":l?"space-y-3":"space-y-2":r==="relaxed"?o?"space-y-4":l?"space-y-8":"space-y-6":o?"space-y-2.5":l?"space-y-5":"space-y-4";return n.jsx(s,{className:Ye(d(),a),children:e})}function u$({children:e,compact:t=!1,columns:r=2,className:a=""}){const s=bj(),i=t||s==="advanced",o=!t&&s==="basic",l=()=>o?r===4?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":r===3||r===2?"grid-cols-1 md:grid-cols-2":"grid-cols-1":i?r===4?"grid-cols-2 md:grid-cols-3 lg:grid-cols-5":r===3?"grid-cols-2 md:grid-cols-4":r===2?"grid-cols-2 md:grid-cols-3":"grid-cols-1 md:grid-cols-2":r===4?"grid-cols-1 md:grid-cols-2 lg:grid-cols-4":r===3?"grid-cols-1 md:grid-cols-3":r===2?"grid-cols-1 md:grid-cols-2":"grid-cols-1",d=()=>i?"gap-3":o?"gap-6":"gap-4";return n.jsx("div",{className:Ye("grid",l(),d(),a),children:e})}const f$={ourStrategies:["Conservative","Aggressive"],competitorMoves:["Match","Undercut"],pUndercut:.4,multipliers:{Match:{retMult:{Conservative:1,Aggressive:1.05},costMult:{Conservative:1,Aggressive:1}},Undercut:{retMult:{Conservative:.95,Aggressive:.85},costMult:{Conservative:1,Aggressive:1.02}}}};function LK({decisionId:e,tenantId:t,options:r,onConfigChange:a,onAuditEvent:s}){const[i,o]=N.useState(f$),[l,d]=N.useState(r.map(p=>({optionId:p.id,strategy:"Conservative"})));N.useEffect(()=>{const p=`retina:game:${t}:${e}`,g=localStorage.getItem(p);if(g)try{const b=JSON.parse(g);o(b.config||f$),d(b.optionStrategies||r.map(v=>({optionId:v.id,strategy:"Conservative"})))}catch(b){console.error("Failed to load game config:",b)}},[e,t]),N.useEffect(()=>{d(p=>{const g=new Map(p.map(b=>[b.optionId,b.strategy]));return r.map(b=>({optionId:b.id,strategy:g.get(b.id)||"Conservative"}))})},[r]);const u=()=>{const p=`retina:game:${t}:${e}`,g={config:i,optionStrategies:l};localStorage.setItem(p,JSON.stringify(g)),a(i,l);const b={Match:{Conservative:{ret:i.multipliers.Match.retMult.Conservative,cost:i.multipliers.Match.costMult.Conservative},Aggressive:{ret:i.multipliers.Match.retMult.Aggressive,cost:i.multipliers.Match.costMult.Aggressive}},Undercut:{Conservative:{ret:i.multipliers.Undercut.retMult.Conservative,cost:i.multipliers.Undercut.costMult.Conservative},Aggressive:{ret:i.multipliers.Undercut.retMult.Aggressive,cost:i.multipliers.Undercut.costMult.Aggressive}}};s("game.stub.updated",{decisionId:e,pUndercut:i.pUndercut,multipliersSummary:b})},f=(p,g)=>{d(b=>b.map(v=>v.optionId===p?{...v,strategy:g}:v))},m=(p,g,b,v)=>{o(y=>({...y,multipliers:{...y.multipliers,[p]:{...y.multipliers[p],[g]:{...y.multipliers[p][g],[b]:v}}}}))};return n.jsx(ake,{sectionTitle:"Game Interaction (22)",helpTip:"Model competitive dynamics using game theory. Define your strategy per option and set competitor behavior probabilities. The system applies multipliers to returns and costs based on the interaction outcomes.",variant:"bordered",children:n.jsxs(F_,{children:[n.jsxs("div",{children:[n.jsx(Ne,{className:"text-sm font-semibold mb-3 block",children:"Our Strategy per Option"}),n.jsx(F_,{spacing:"tight",children:r.map(p=>{const g=l.find(b=>b.optionId===p.id);return n.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:p.label}),n.jsxs(Et,{value:(g==null?void 0:g.strategy)||"Conservative",onValueChange:b=>f(p.id,b),children:[n.jsx(kt,{className:"w-40",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"Conservative",children:"Conservative"}),n.jsx(we,{value:"Aggressive",children:"Aggressive"})]})]})]},p.id)})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ne,{className:"text-sm font-semibold",children:"Competitor Move Probability"}),n.jsxs(be,{variant:"outline",children:["P(Undercut) = ",i.pUndercut.toFixed(2)]})]}),n.jsxs(F_,{spacing:"tight",children:[n.jsx(yg,{value:[i.pUndercut],onValueChange:([p])=>o(g=>({...g,pUndercut:p})),min:0,max:1,step:.05,className:"w-full"}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsxs("span",{children:["P(Match) = ",(1-i.pUndercut).toFixed(2)]}),n.jsxs("span",{children:["P(Undercut) = ",i.pUndercut.toFixed(2)]})]})]})]}),n.jsxs("div",{children:[n.jsx(Ne,{className:"text-sm font-semibold",children:"Multipliers (Return & Cost)"}),n.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-3",children:[n.jsxs("div",{className:"font-medium text-sm flex items-center gap-2",children:[n.jsx("span",{children:"On Match"}),n.jsx(be,{variant:"secondary",className:"text-xs",children:"Competitor matches our move"})]}),n.jsxs(u$,{columns:2,children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Conservative"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs",children:"Return Mult"}),n.jsx(et,{type:"number",step:"0.01",value:i.multipliers.Match.retMult.Conservative,onChange:p=>m("Match","retMult","Conservative",parseFloat(p.target.value)||1),className:"h-8"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs",children:"Cost Mult"}),n.jsx(et,{type:"number",step:"0.01",value:i.multipliers.Match.costMult.Conservative,onChange:p=>m("Match","costMult","Conservative",parseFloat(p.target.value)||1),className:"h-8"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Aggressive"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs",children:"Return Mult"}),n.jsx(et,{type:"number",step:"0.01",value:i.multipliers.Match.retMult.Aggressive,onChange:p=>m("Match","retMult","Aggressive",parseFloat(p.target.value)||1),className:"h-8"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs",children:"Cost Mult"}),n.jsx(et,{type:"number",step:"0.01",value:i.multipliers.Match.costMult.Aggressive,onChange:p=>m("Match","costMult","Aggressive",parseFloat(p.target.value)||1),className:"h-8"})]})]})]})]})]}),n.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-3",children:[n.jsxs("div",{className:"font-medium text-sm flex items-center gap-2",children:[n.jsx("span",{children:"On Undercut"}),n.jsx(be,{variant:"secondary",className:"text-xs",children:"Competitor undercuts us"})]}),n.jsxs(u$,{columns:2,children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Conservative"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs",children:"Return Mult"}),n.jsx(et,{type:"number",step:"0.01",value:i.multipliers.Undercut.retMult.Conservative,onChange:p=>m("Undercut","retMult","Conservative",parseFloat(p.target.value)||1),className:"h-8"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs",children:"Cost Mult"}),n.jsx(et,{type:"number",step:"0.01",value:i.multipliers.Undercut.costMult.Conservative,onChange:p=>m("Undercut","costMult","Conservative",parseFloat(p.target.value)||1),className:"h-8"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Aggressive"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs",children:"Return Mult"}),n.jsx(et,{type:"number",step:"0.01",value:i.multipliers.Undercut.retMult.Aggressive,onChange:p=>m("Undercut","retMult","Aggressive",parseFloat(p.target.value)||1),className:"h-8"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs",children:"Cost Mult"}),n.jsx(et,{type:"number",step:"0.01",value:i.multipliers.Undercut.costMult.Aggressive,onChange:p=>m("Undercut","costMult","Aggressive",parseFloat(p.target.value)||1),className:"h-8"})]})]})]})]})]})]}),n.jsx(le,{onClick:u,className:"w-full",children:"Save Game Configuration"})]})})}var V2="Checkbox",[ske]=ai(V2),[ike,eE]=ske(V2);function oke(e){const{__scopeCheckbox:t,checked:r,children:a,defaultChecked:s,disabled:i,form:o,name:l,onCheckedChange:d,required:u,value:f="on",internal_do_not_use_render:m}=e,[p,g]=Nl({prop:r,defaultProp:s??!1,onChange:d,caller:V2}),[b,v]=N.useState(null),[y,j]=N.useState(null),_=N.useRef(!1),C=b?!!o||!!b.closest("form"):!0,A={checked:p,disabled:i,setChecked:g,control:b,setControl:v,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:_,required:u,defaultChecked:vf(s)?!1:s,isFormControl:C,bubbleInput:y,setBubbleInput:j};return n.jsx(ike,{scope:t,...A,children:lke(m)?m(A):a})}var IK="CheckboxTrigger",$K=N.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...a},s)=>{const{control:i,value:o,disabled:l,checked:d,required:u,setControl:f,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:g,bubbleInput:b}=eE(IK,e),v=br(s,f),y=N.useRef(d);return N.useEffect(()=>{const j=i==null?void 0:i.form;if(j){const _=()=>m(y.current);return j.addEventListener("reset",_),()=>j.removeEventListener("reset",_)}},[i,m]),n.jsx(ar.button,{type:"button",role:"checkbox","aria-checked":vf(d)?"mixed":d,"aria-required":u,"data-state":UK(d),"data-disabled":l?"":void 0,disabled:l,value:o,...a,ref:v,onKeyDown:yt(t,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:yt(r,j=>{m(_=>vf(_)?!0:!_),b&&g&&(p.current=j.isPropagationStopped(),p.current||j.stopPropagation())})})});$K.displayName=IK;var tE=N.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:a,checked:s,defaultChecked:i,required:o,disabled:l,value:d,onCheckedChange:u,form:f,...m}=e;return n.jsx(oke,{__scopeCheckbox:r,checked:s,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:a,form:f,value:d,internal_do_not_use_render:({isFormControl:p})=>n.jsxs(n.Fragment,{children:[n.jsx($K,{...m,ref:t,__scopeCheckbox:r}),p&&n.jsx(qK,{__scopeCheckbox:r})]})})});tE.displayName=V2;var FK="CheckboxIndicator",BK=N.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:a,...s}=e,i=eE(FK,r);return n.jsx(Cs,{present:a||vf(i.checked)||i.checked===!0,children:n.jsx(ar.span,{"data-state":UK(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});BK.displayName=FK;var zK="CheckboxBubbleInput",qK=N.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:a,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:l,disabled:d,name:u,value:f,form:m,bubbleInput:p,setBubbleInput:g}=eE(zK,e),b=br(r,g),v=My(i),y=_y(a);N.useEffect(()=>{const _=p;if(!_)return;const C=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(C,"checked").set,T=!s.current;if(v!==i&&S){const O=new Event("click",{bubbles:T});_.indeterminate=vf(i),S.call(_,vf(i)?!1:i),_.dispatchEvent(O)}},[p,v,i,s]);const j=N.useRef(vf(i)?!1:i);return n.jsx(ar.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??j.current,required:l,disabled:d,name:u,value:f,form:m,...t,tabIndex:-1,ref:b,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});qK.displayName=zK;function lke(e){return typeof e=="function"}function vf(e){return e==="indeterminate"}function UK(e){return vf(e)?"indeterminate":e?"checked":"unchecked"}const kl=N.forwardRef(({className:e,...t},r)=>n.jsx(tE,{ref:r,className:Ye("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(BK,{className:Ye("flex items-center justify-center text-current"),children:n.jsx(su,{className:"h-4 w-4"})})}));kl.displayName=tE.displayName;function cke({open:e,onOpenChange:t,decisionId:r,decisionTitle:a,chosenOptionId:s,chosenOptionLabel:i,simulationResults:o,lastSimulationTime:l,thresholds:d,assumptions:u=[],tenantId:f,onConfirm:m,onAuditEvent:p}){const[g,b]=N.useState(""),[v,y]=N.useState(""),[j,_]=N.useState(!1),[C,A]=N.useState(!1),S=o.find(q=>q.optionId===s),T=1800*1e3,O=Date.now(),R=!l||O-l>T,M=l?Math.floor((O-l)/1e3/60):null,I=S?S.raroc<d.red:!1,D=S?S.ev<0:!1,$=u.filter(q=>q.critical&&q.status!=="validated"),K=u.filter(q=>q.status==="invalidated"),U=$.length>0,J=K.length>0,V=(!R||j)&&(!I||g.trim().length>0)&&(!D||C)&&(!U||v.trim().length>0);N.useEffect(()=>{e||(b(""),y(""),_(!1),A(!1))},[e]);const G=()=>{p("decision.close.guardrails",{staleRun:R,lowRaroc:I,negativeEV:D,chosenOptionId:s,raroc:S==null?void 0:S.raroc,ev:S==null?void 0:S.ev}),p("decision.close.assumptionsChecked",{criticalOpen:$.length,invalidated:K.length}),S&&Jde(r,a,f,s,i,S,g||v),m(g,v),t(!1)};return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Confirm Decision"}),n.jsx(Sr,{children:"Review the decision details and address any warnings before confirming"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[n.jsx("div",{className:"text-sm font-medium",children:"Decision Summary"}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:"Title:"})," ",a]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ba,{className:"w-4 h-4 text-green-600"}),n.jsxs("span",{className:"text-sm",children:[n.jsx("strong",{children:"Chosen Option:"})," ",i]})]}),S&&n.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 pt-2 border-t border-border",children:[n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"text-muted-foreground",children:"RAROC:"})," ",n.jsx("span",{className:"font-mono",children:S.raroc.toFixed(4)})]}),n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"text-muted-foreground",children:"EV:"})," ",n.jsx("span",{className:"font-mono",children:S.ev.toFixed(2)})]}),n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"text-muted-foreground",children:"VaR95:"})," ",n.jsx("span",{className:"font-mono",children:S.var95.toFixed(2)})]}),n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"text-muted-foreground",children:"CVaR95:"})," ",n.jsx("span",{className:"font-mono",children:S.cvar95.toFixed(2)})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[R&&n.jsxs(Fs,{variant:"default",className:"border-amber-500 bg-amber-50 dark:bg-amber-950",children:[n.jsx(vc,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"}),n.jsx(gl,{className:"text-amber-900 dark:text-amber-100",children:"Stale Simulation Run"}),n.jsxs(ei,{className:"text-amber-800 dark:text-amber-200",children:[l?n.jsxs(n.Fragment,{children:["The last simulation was run"," ",n.jsxs("strong",{children:[M," minutes ago"]}),". It's recommended to run a fresh simulation before closing this decision."]}):n.jsx(n.Fragment,{children:"No simulation has been run for this decision. It's recommended to run a simulation before closing."}),n.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[n.jsx(kl,{id:"confirm-stale",checked:j,onCheckedChange:q=>_(q)}),n.jsx(Ne,{htmlFor:"confirm-stale",className:"text-sm font-medium cursor-pointer text-amber-900 dark:text-amber-100",children:"I confirm proceeding with a stale simulation run"})]})]})]}),I&&n.jsxs(Fs,{variant:"default",className:"border-orange-500 bg-orange-50 dark:bg-orange-950",children:[n.jsx(tn,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"}),n.jsx(gl,{className:"text-orange-900 dark:text-orange-100",children:"RAROC Below Threshold"}),n.jsxs(ei,{className:"text-orange-800 dark:text-orange-200",children:["The chosen option has a RAROC of"," ",n.jsx("strong",{children:S==null?void 0:S.raroc.toFixed(4)}),", which is below the red threshold of"," ",n.jsx("strong",{children:d.red.toFixed(2)}),". Please provide additional rationale for this decision."]})]}),D&&n.jsxs(Fs,{variant:"destructive",children:[n.jsx(yn,{className:"h-4 w-4"}),n.jsx(gl,{children:"Negative Expected Value"}),n.jsxs(ei,{children:["The chosen option has a negative expected value of"," ",n.jsx("strong",{children:S==null?void 0:S.ev.toFixed(2)}),". This indicates a potential loss. Please confirm you accept this risk.",n.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[n.jsx(kl,{id:"confirm-negative-ev",checked:C,onCheckedChange:q=>A(q)}),n.jsx(Ne,{htmlFor:"confirm-negative-ev",className:"text-sm font-medium cursor-pointer",children:"I acknowledge the negative EV and accept potential loss"})]})]})]}),U&&n.jsxs(Fs,{variant:"destructive",children:[n.jsx(Fo,{className:"h-4 w-4"}),n.jsx(gl,{children:"Critical Assumptions Not Validated"}),n.jsx(ei,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{children:[$.length," critical"," ",$.length===1?"assumption is":"assumptions are"," ","not validated. You must provide an override reason to proceed."]}),n.jsx("div",{className:"space-y-1 text-xs",children:$.map(q=>n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(yn,{className:"w-3 h-3 mt-0.5 shrink-0"}),n.jsx("span",{children:q.statement})]},q.id))})]})})]}),J&&n.jsxs(Fs,{variant:"default",className:"border-amber-500 bg-amber-50 dark:bg-amber-950",children:[n.jsx(tn,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"}),n.jsx(gl,{className:"text-amber-900 dark:text-amber-100",children:"Assumptions Invalidated"}),n.jsx(ei,{className:"text-amber-800 dark:text-amber-200",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{children:[K.length," ",K.length===1?"assumption has":"assumptions have"," ","been invalidated. Please confirm your rationale."]}),n.jsx("div",{className:"space-y-1 text-xs",children:K.map(q=>n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(yn,{className:"w-3 h-3 mt-0.5 shrink-0"}),n.jsx("span",{children:q.statement})]},q.id))})]})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(Ne,{htmlFor:"rationale",children:[I?"Override Rationale":"Decision Rationale"," ",I&&n.jsx(be,{variant:"destructive",className:"ml-2",children:"Required"})]}),g.trim().length>0&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:[g.trim().length," characters"]})]}),n.jsx(ua,{id:"rationale",placeholder:I?"Explain why you're proceeding despite low RAROC...":"Provide context for this decision (optional)...",value:g,onChange:q=>b(q.target.value),rows:4,className:I&&!g.trim()?"border-orange-500":""}),I&&!g.trim()&&n.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:"Rationale is required when RAROC is below threshold"})]}),U&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(Ne,{htmlFor:"override-reason",children:["Override Reason"," ",n.jsx(be,{variant:"destructive",className:"ml-2",children:"Required"})]}),v.trim().length>0&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:[v.trim().length," characters"]})]}),n.jsx(ua,{id:"override-reason",placeholder:"Explain why you're proceeding with unvalidated critical assumptions...",value:v,onChange:q=>y(q.target.value),rows:3,className:v.trim()?"":"border-red-500"}),!v.trim()&&n.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"Override reason is required when critical assumptions are not validated"})]}),(R||I||D)&&n.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-2",children:[n.jsx("div",{className:"text-sm font-medium",children:"Validation Checklist"}),n.jsxs("div",{className:"space-y-1",children:[R&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[j?n.jsx(ba,{className:"w-4 h-4 text-green-600"}):n.jsx(yn,{className:"w-4 h-4 text-amber-600"}),n.jsx("span",{className:j?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400",children:"Stale run acknowledged"})]}),I&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[g.trim().length>0?n.jsx(ba,{className:"w-4 h-4 text-green-600"}):n.jsx(yn,{className:"w-4 h-4 text-orange-600"}),n.jsx("span",{className:g.trim().length>0?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400",children:"Override rationale provided"})]}),D&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[C?n.jsx(ba,{className:"w-4 h-4 text-green-600"}):n.jsx(yn,{className:"w-4 h-4 text-red-600"}),n.jsx("span",{className:C?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:"Negative EV acknowledged"})]}),U&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[v.trim().length>0?n.jsx(ba,{className:"w-4 h-4 text-green-600"}):n.jsx(yn,{className:"w-4 h-4 text-red-600"}),n.jsx("span",{className:v.trim().length>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:"Critical assumptions override provided"})]}),J&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx(tn,{className:"w-4 h-4 text-amber-600"}),n.jsxs("span",{className:"text-amber-600 dark:text-amber-400",children:[K.length," invalidated assumption",K.length===1?"":"s"]})]})]})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),n.jsxs(le,{onClick:G,disabled:!V,children:[n.jsx(ba,{className:"w-4 h-4 mr-2"}),"Confirm Decision"]})]})]})})}function dke({scenarioVars:e,onConfigChange:t,achievedSpearman:r,onAuditEvent:a,runs:s,onToast:i}){var v,y;const[o,l]=N.useState(""),[d,u]=N.useState(""),[f,m]=N.useState(.4);N.useEffect(()=>{const _=localStorage.getItem("retina:dependence:config");if(_)try{const C=JSON.parse(_);l(C.varAId||""),u(C.varBId||""),m(C.targetRho??.4)}catch(C){console.error("Failed to load dependence config:",C)}},[]);const p=s<50,g=o&&d&&o===d;N.useEffect(()=>{var _,C;const j="retina:dependence:config";if(p&&o&&d&&o!==d){i&&i({title:"Increase runs to enable dependence",description:`At least 50 runs required for dependence linking (current: ${s})`,variant:"destructive"}),localStorage.removeItem(j),t(void 0);return}if(o&&d&&o!==d&&!p){const A={varAId:o,varBId:d,targetRho:f};localStorage.setItem(j,JSON.stringify(A)),t(A),a("dependence.updated",{varA:(_=e.find(S=>S.id===o))==null?void 0:_.name,varB:(C=e.find(S=>S.id===d))==null?void 0:C.name,rhoTarget:f,rhoAchieved:r})}else localStorage.removeItem(j),t(void 0)},[o,d,f,e,t,a,r]);const b=e.filter(j=>j.id!==o);return N.useEffect(()=>{d&&d===o&&u("")},[o,d]),n.jsxs(Ae,{className:"border-primary/20",children:[n.jsx(He,{children:n.jsxs(Ge,{className:"text-base flex items-center gap-2",children:[n.jsx(Or,{className:"w-4 h-4 text-primary"}),"Dependence (Rank Correlation)"]})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsx("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-md",children:"Lightweight dependence via rank reordering (approximate Spearman )."}),g&&n.jsxs("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-md flex items-start gap-2",children:[n.jsx(yn,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),n.jsxs("div",{className:"text-xs text-destructive",children:[n.jsx("div",{className:"font-medium",children:"Cannot link same variable"}),n.jsx("div",{children:"Variable A and Variable B must be different"})]})]}),p&&n.jsxs("div",{className:"p-3 bg-amber-500/10 border border-amber-500/20 rounded-md flex items-start gap-2",children:[n.jsx(yn,{className:"w-4 h-4 text-amber-600 mt-0.5 shrink-0"}),n.jsxs("div",{className:"text-xs text-amber-700 dark:text-amber-400",children:[n.jsx("div",{className:"font-medium",children:"Insufficient runs for dependence"}),n.jsxs("div",{children:["At least 50 runs required (current: ",s,")"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Variable A"}),n.jsxs(Et,{value:o||void 0,onValueChange:j=>l(j),disabled:p,children:[n.jsx(kt,{className:"h-9",children:n.jsx(Tt,{placeholder:"Select Var A"})}),n.jsx(Ot,{children:e.map(j=>n.jsx(we,{value:j.id,children:j.name},j.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Variable B"}),n.jsxs(Et,{value:d||void 0,onValueChange:j=>u(j),disabled:!o||b.length===0||p,children:[n.jsx(kt,{className:"h-9",children:n.jsx(Tt,{placeholder:"Select Var B"})}),n.jsx(Ot,{children:b.map(j=>n.jsx(we,{value:j.id,children:j.name},j.id))})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Target rank correlation ()"}),n.jsx(be,{variant:"outline",className:"font-mono text-xs",children:f.toFixed(2)})]}),n.jsx(yg,{value:[f],onValueChange:j=>m(j[0]),min:-.9,max:.9,step:.1,disabled:!o||!d||p||g,className:"py-2"}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsx("span",{children:"-0.9"}),n.jsx("span",{children:"0"}),n.jsx("span",{children:"0.9"})]})]}),r!==void 0&&o&&d&&n.jsxs("div",{className:"pt-2 border-t border-border space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Achieved "}),n.jsxs(be,{variant:Math.abs(r-f)<.15?"default":"secondary",className:"font-mono",children:[" ",r.toFixed(2)]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"Approx Spearman rank correlation"}),n.jsxs("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[n.jsx("div",{className:"h-8 flex items-center justify-center font-medium text-muted-foreground"}),n.jsx("div",{className:"h-8 flex items-center justify-center font-medium text-muted-foreground",children:((v=e.find(j=>j.id===d))==null?void 0:v.name)||"Var B"}),n.jsx("div",{className:"h-8"}),n.jsx("div",{className:"h-8 flex items-center justify-center font-medium text-muted-foreground",children:((y=e.find(j=>j.id===o))==null?void 0:y.name)||"Var A"}),n.jsx("div",{className:`h-8 flex items-center justify-center font-mono font-semibold rounded border border-border ${r>.4?"bg-green-500/20 text-green-700 dark:text-green-400":r<-.4?"bg-red-500/20 text-red-700 dark:text-red-400":"bg-amber-500/20 text-amber-700 dark:text-amber-400"}`,children:r.toFixed(2)}),n.jsx("div",{className:"h-8"})]})]})]})]})]})}function VK({scenarioVars:e,onConfigChange:t,onAuditEvent:r,onToast:a}){const[s,i]=N.useState(""),[o,l]=N.useState(0),[d,u]=N.useState(.2),[f,m]=N.useState(0),[p,g]=N.useState(20),[b,v]=N.useState(.25),[y,j]=N.useState(!1),_=e.filter(R=>R.dist==="normal"||R.dist==="lognormal");N.useEffect(()=>{const M=localStorage.getItem("retina:bayesian:config");if(M)try{const I=JSON.parse(M);i(I.targetVarId||""),l(I.priorMean??0),u(I.priorSd??.2),m(I.evidenceMean??0),g(I.evidenceN??20),v(I.likelihoodSd??.25),j(I.applyPosterior??!1)}catch(I){console.error("Failed to load Bayesian config:",I)}},[]);const C=()=>{const R=d*d,M=b*b,I=1/(1/R+p/M),D=I*(o/R+p*f/M),$=Math.sqrt(I);return{posteriorMean:D,posteriorSd:$}},{posteriorMean:A,posteriorSd:S}=C();N.useEffect(()=>{const R="retina:bayesian:config";if(s&&y){const M=e.find(D=>D.id===s);if(M&&M.dist!=="normal"&&M.dist!=="lognormal"){a&&a({title:"Bayesian prior not applicable",description:`Variable "${M.name}" is ${M.dist}. Bayesian prior only works with normal or lognormal distributions.`,variant:"destructive"}),t(void 0);return}const I={targetVarId:s,priorMean:o,priorSd:d,evidenceMean:f,evidenceN:p,likelihoodSd:b,applyPosterior:y,posteriorMean:A,posteriorSd:S};localStorage.setItem(R,JSON.stringify(I)),t(I),r("bayes.prior.applied",{varKey:M==null?void 0:M.name,dist:M==null?void 0:M.dist,mu0:o,sigma0:d,xbar:f,n:p,sigmaL:b,muN:A,sigmaN:S})}else{if(s){const M={targetVarId:s,priorMean:o,priorSd:d,evidenceMean:f,evidenceN:p,likelihoodSd:b,applyPosterior:y,posteriorMean:A,posteriorSd:S};localStorage.setItem(R,JSON.stringify(M))}else localStorage.removeItem(R);t(void 0)}},[s,o,d,f,p,b,y,A,S,e,t,r]);const T=e.find(R=>R.id===s),O=(T==null?void 0:T.dist)==="lognormal";return n.jsxs(Ae,{className:"border-primary/20",children:[n.jsx(He,{children:n.jsxs(Ge,{className:"text-base flex items-center gap-2",children:[n.jsx(Or,{className:"w-4 h-4 text-primary"}),"Bayesian Prior (Conjugate Normal)"]})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-md",children:["Conjugate NormalNormal updating. Works with normal or lognormal distributions",O&&" (log-space)","."]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Target Variable"}),n.jsxs(Et,{value:s||void 0,onValueChange:R=>i(R),children:[n.jsx(kt,{className:"h-9",children:n.jsx(Tt,{placeholder:"Select variable"})}),n.jsx(Ot,{children:_.length===0?n.jsx("div",{className:"p-2 text-xs text-muted-foreground",children:"No normal/lognormal variables"}):_.map(R=>n.jsxs(we,{value:R.id,children:[R.name," (",R.dist,")"]},R.id))})]})]}),s&&n.jsxs(n.Fragment,{children:[(()=>{const R=e.find(I=>I.id===s);return R&&R.dist!=="normal"&&R.dist!=="lognormal"&&y?n.jsxs("div",{className:"p-3 bg-amber-500/10 border border-amber-500/20 rounded-md flex items-start gap-2",children:[n.jsx(tn,{className:"w-4 h-4 text-amber-600 mt-0.5 shrink-0"}),n.jsxs("div",{className:"text-xs text-amber-700 dark:text-amber-400",children:[n.jsx("div",{className:"font-medium",children:"Bayesian prior not applicable"}),n.jsxs("div",{children:['Variable "',R.name,'" is ',R.dist,". Bayesian prior only works with normal or lognormal distributions."]})]})]}):null})(),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ne,{className:"text-xs text-muted-foreground",children:["Prior mean ",O&&" (log)"]}),n.jsx(et,{type:"number",step:"0.01",value:o,onChange:R=>l(parseFloat(R.target.value)||0),className:"h-9"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ne,{className:"text-xs text-muted-foreground",children:["Prior sd ",O&&" (log)"]}),n.jsx(et,{type:"number",step:"0.01",min:"0.01",value:d,onChange:R=>u(Math.max(.01,parseFloat(R.target.value)||.2)),className:"h-9"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ne,{className:"text-xs text-muted-foreground",children:["Evidence mean x",O&&" (log)"]}),n.jsx(et,{type:"number",step:"0.01",value:f,onChange:R=>m(parseFloat(R.target.value)||0),className:"h-9"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Evidence n"}),n.jsx(et,{type:"number",step:"1",min:"1",value:p,onChange:R=>g(Math.max(1,parseInt(R.target.value)||20)),className:"h-9"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ne,{className:"text-xs text-muted-foreground",children:["Likelihood sd ",O&&" (log)"]}),n.jsx(et,{type:"number",step:"0.01",min:"0.01",value:b,onChange:R=>v(Math.max(.01,parseFloat(R.target.value)||.25)),className:"h-9"})]}),n.jsxs("div",{className:"pt-3 border-t border-border space-y-3",children:[n.jsxs("div",{className:"bg-primary/5 p-3 rounded-md space-y-1",children:[n.jsx("div",{className:"text-xs font-medium text-primary",children:"Posterior Distribution:"}),n.jsxs("div",{className:"text-sm font-mono",children:[" = ",A.toFixed(4),O&&" (log)"]}),n.jsxs("div",{className:"text-sm font-mono",children:[" = ",S.toFixed(4),O&&" (log)"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(kl,{id:"apply-posterior",checked:y,onCheckedChange:R=>j(R===!0)}),n.jsx(Ne,{htmlFor:"apply-posterior",className:"text-sm font-medium cursor-pointer",children:"Apply posterior to simulation"})]}),y&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(be,{variant:"default",className:"text-xs",children:"Active"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Posterior parameters will be used in simulation"})]})]})]})]})]})}function HK({scenarioVars:e,onConfigChange:t,achievedMatrix:r,frobeniusError:a,onAuditEvent:s,runs:i,onToast:o}){const l=e.length,[d,u]=N.useState(()=>y(l)),[f,m]=N.useState(!1),[p,g]=N.useState(!1),[b,v]=N.useState(!0);function y(O){const R=[];for(let M=0;M<O;M++){R[M]=[];for(let I=0;I<O;I++)R[M][I]=M===I?1:0}return R}N.useEffect(()=>{const R=localStorage.getItem("retina:copula:config");if(R)try{const M=JSON.parse(R);M.k===l&&(u(M.matrix),m(M.useNearestPD??!1),g(!0))}catch(M){console.error("Failed to load copula config:",M)}},[l]),N.useEffect(()=>{const O=y(l);u(O),g(!1),v(!0);const R="retina:copula:config",M=localStorage.getItem(R);if(M)try{JSON.parse(M).k!==l&&(localStorage.removeItem(R),t(void 0))}catch(I){console.error("Failed to check copula config:",I)}},[l,t]);const j=i<500,_=O=>{for(let R=0;R<O.length;R++){if(Math.abs(O[R][R]-1)>.01)return!1;for(let M=0;M<O.length;M++)if(R!==M&&Math.abs(O[R][M])>.99)return!1}return O.length===2?O[0][0]*O[1][1]-O[0][1]*O[1][0]>=-.001:!0};N.useEffect(()=>{v(_(d))},[d]);const C=(O,R,M)=>{const I=parseFloat(M);if(isNaN(I))return;const D=Math.max(-.9,Math.min(.9,I)),$=d.map(K=>[...K]);$[O][R]=D,$[R][O]=D,u($)},A=()=>{if(j){o&&o({title:"Insufficient runs",description:"Increase runs to  500 for stable ranks",variant:"destructive"});return}g(!0);let O=0;for(let M=0;M<l;M++)for(let I=M+1;I<l;I++)Math.abs(d[M][I])>.01&&O++;const R={k:l,matrix:d,useNearestPD:f};localStorage.setItem("retina:copula:config",JSON.stringify(R)),t(R),s("copula.matrix.updated",{k:l,editedPairs:O,nearestPD:f}),o&&o({title:"Copula matrix imposed",description:`${l}${l} matrix with ${O} edited pair(s)${f?" (nearest PD enabled)":""}`})},S=()=>{u(y(l)),g(!1),localStorage.removeItem("retina:copula:config"),t(void 0),o&&o({title:"Copula matrix cleared",description:"Reset to identity matrix"})},T=O=>O>.4?"bg-green-500/20 text-green-700 dark:text-green-400 border-green-500/30":O<-.4?"bg-red-500/20 text-red-700 dark:text-red-400 border-red-500/30":Math.abs(O)>.1?"bg-amber-500/20 text-amber-700 dark:text-amber-400 border-amber-500/30":"bg-muted text-muted-foreground border-border";return n.jsxs(Ae,{className:"border-primary/20",children:[n.jsx(He,{children:n.jsxs(Ge,{className:"text-base flex items-center gap-2",children:[n.jsx(pte,{className:"w-4 h-4 text-primary"}),"Copula Matrix (beta)"]})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsx("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-md",children:"Full kk rank correlation matrix with Iman-Conover reordering. Edit upper triangle; diagonal locked to 1.00."}),j&&n.jsxs("div",{className:"p-3 bg-amber-500/10 border border-amber-500/20 rounded-md flex items-start gap-2",children:[n.jsx(yn,{className:"w-4 h-4 text-amber-600 mt-0.5 shrink-0"}),n.jsxs("div",{className:"text-xs text-amber-700 dark:text-amber-400",children:[n.jsx("div",{className:"font-medium",children:"Insufficient runs for copula"}),n.jsxs("div",{children:["At least 500 runs required (current: ",i,")"]})]})]}),!b&&!f&&!j&&n.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-md flex items-start gap-2",children:[n.jsx(yn,{className:"w-4 h-4 text-red-600 mt-0.5 shrink-0"}),n.jsxs("div",{className:"text-xs text-red-700 dark:text-red-400",children:[n.jsx("div",{className:"font-medium",children:"Matrix not positive semi-definite"}),n.jsx("div",{children:'Fix matrix values or enable "Nearest PD" to proceed'})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Variables"}),n.jsxs(be,{variant:"outline",className:"font-mono",children:["k = ",l]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Target"}),n.jsx(be,{variant:"outline",className:"text-xs",children:"Spearman "})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-md",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Nearest PD"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Project to nearest positive semi-definite matrix if Cholesky fails"})]}),n.jsx(Pa,{checked:f,onCheckedChange:m,disabled:j})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ne,{className:"text-sm font-medium",children:["Correlation Matrix (",l,"",l,")"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsx("div",{className:"inline-block min-w-full",children:n.jsxs("div",{className:"grid gap-1",style:{gridTemplateColumns:`auto repeat(${l}, 1fr)`},children:[n.jsx("div",{className:"h-8"}),e.map((O,R)=>n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("div",{className:"h-8 flex items-center justify-center text-xs font-medium text-muted-foreground truncate px-1",children:O.name.substring(0,8)})}),n.jsx(St,{children:n.jsx("p",{children:O.name})})]})},R)),e.map((O,R)=>n.jsxs(pe.Fragment,{children:[n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("div",{className:"h-8 flex items-center justify-end text-xs font-medium text-muted-foreground pr-2 truncate",children:O.name.substring(0,8)})}),n.jsx(St,{children:n.jsx("p",{children:O.name})})]})}),e.map((M,I)=>{const D=R===I,$=R<I,K=d[R][I];return D?n.jsx("div",{className:"h-8 flex items-center justify-center bg-primary/10 border border-primary/30 rounded text-xs font-mono font-semibold",children:"1.00"},I):$?n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(et,{type:"number",step:"0.1",min:"-0.9",max:"0.9",value:K.toFixed(2),onChange:U=>C(R,I,U.target.value),disabled:j||R>=e.length||I>=e.length,className:"h-8 text-xs font-mono text-center p-0"})}),n.jsxs(St,{children:[n.jsxs("p",{children:[O.name,"  ",M.name]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Target: ",K.toFixed(2),r&&n.jsxs(n.Fragment,{children:[" ","| Achieved:"," ",r[R][I].toFixed(2)]})]})]})]})},I):n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("div",{className:"h-8 flex items-center justify-center bg-muted/50 border border-border rounded text-xs font-mono text-muted-foreground",children:K.toFixed(2)})}),n.jsxs(St,{children:[n.jsxs("p",{children:[O.name,"  ",M.name]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Mirrored from upper triangle"})]})]})},I)})]},R))]})})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(le,{onClick:A,disabled:j||l<2||!b&&!f,className:"flex-1",children:p?n.jsxs(n.Fragment,{children:[n.jsx(ba,{className:"w-4 h-4 mr-2"}),"Update Dependence"]}):"Impose Dependence"}),n.jsx(le,{variant:"outline",onClick:S,children:"Clear"})]}),p&&r&&a!==void 0&&n.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Achieved  error (Frobenius)"}),n.jsx(be,{variant:a<.2?"default":"secondary",className:"font-mono",children:a.toFixed(3)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Achieved Spearman Matrix"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsx("div",{className:"inline-block min-w-full",children:n.jsxs("div",{className:"grid gap-1",style:{gridTemplateColumns:`auto repeat(${l}, 1fr)`},children:[n.jsx("div",{className:"h-8"}),e.map((O,R)=>n.jsx("div",{className:"h-8 flex items-center justify-center text-xs font-medium text-muted-foreground truncate px-1",children:O.name.substring(0,8)},R)),e.map((O,R)=>n.jsxs(pe.Fragment,{children:[n.jsx("div",{className:"h-8 flex items-center justify-end text-xs font-medium text-muted-foreground pr-2 truncate",children:O.name.substring(0,8)}),e.map((M,I)=>{const D=r[R][I],$=d[R][I],K=R===I;return n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("div",{className:`h-8 flex items-center justify-center text-xs font-mono font-semibold rounded border ${K?"bg-primary/10 border-primary/30":T(D)}`,children:D.toFixed(2)})}),n.jsxs(St,{children:[n.jsxs("p",{children:[O.name,"  ",M.name]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Target: ",$.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Achieved: ",D.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Error:"," ",Math.abs(D-$).toFixed(3)]})]})]})},I)})]},R))]})})})]})]})]})]})}function uke({decisionId:e,onAuditEvent:t}){const[r,a]=N.useState([]),[s,i]=N.useState(!1),[o,l]=N.useState(!1),[d,u]=N.useState(null),[f,m]=N.useState("decision"),[p,g]=N.useState(""),[b,v]=N.useState(""),[y,j]=N.useState(""),[_,C]=N.useState(1),[A,S]=N.useState(!1),[T,O]=N.useState(""),[R,M]=N.useState(""),[I,D]=N.useState("open");N.useEffect(()=>{a(fo(e))},[e]);const $=()=>{m("decision"),g(""),v(""),j(""),C(1),S(!1),O(""),M(""),D("open")},K=()=>{if(!b.trim())return;const Y=R4e(e,{scope:f,linkId:p||void 0,statement:b.trim(),evidenceUrl:y||void 0,confidence:_,critical:A,owner:T||void 0,reviewBy:R||void 0,status:I});a(fo(e)),t("assumption.added",{assumptionId:Y.id,scope:Y.scope,linkId:Y.linkId,statement:Y.statement,critical:Y.critical}),$(),i(!1)},U=()=>{if(!d||!b.trim())return;const Y=l$(e,d.id,{scope:f,linkId:p||void 0,statement:b.trim(),evidenceUrl:y||void 0,confidence:_,critical:A,owner:T||void 0,reviewBy:R||void 0,status:I});Y&&(a(fo(e)),t("assumption.updated",{assumptionId:Y.id,scope:Y.scope,linkId:Y.linkId,statement:Y.statement,critical:Y.critical,status:Y.status})),$(),u(null),l(!1)},J=(Y,Q)=>{var z;const F=l$(e,Y,{status:Q});F&&(a(fo(e)),t("assumption.statusChanged",{assumptionId:F.id,oldStatus:(z=r.find(H=>H.id===Y))==null?void 0:z.status,newStatus:Q,statement:F.statement}))},V=Y=>{const Q=r.find(F=>F.id===Y);P4e(e,Y)&&(a(fo(e)),t("assumption.deleted",{assumptionId:Y,statement:Q==null?void 0:Q.statement}))},G=Y=>{u(Y),m(Y.scope),g(Y.linkId||""),v(Y.statement),j(Y.evidenceUrl||""),C(Y.confidence),S(Y.critical),O(Y.owner||""),M(Y.reviewBy||""),D(Y.status),l(!0)},q=Db(e);return n.jsxs("div",{className:"space-y-4",children:[q.length>0&&n.jsxs("div",{className:"p-3 bg-amber-500/10 border border-amber-500/20 rounded-md flex items-center gap-2",children:[n.jsx(tn,{className:"w-4 h-4 text-amber-600 shrink-0"}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("span",{className:"font-medium text-amber-700 dark:text-amber-400",children:[q.length," critical assumption(s) open"]}),n.jsx("span",{className:"text-amber-600 dark:text-amber-500 ml-2",children:"Review before closing decision"})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-medium",children:[r.length," assumption(s)"]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Track key assumptions for this decision"})]}),n.jsxs(le,{onClick:()=>i(!0),size:"sm",children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Add Assumption"]})]}),r.length===0?n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-12 pb-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:n.jsx(tn,{className:"w-8 h-8 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"No assumptions yet"}),n.jsxs(le,{onClick:()=>i(!0),variant:"outline",children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Add First Assumption"]})]})}):n.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:n.jsxs(Ho,{children:[n.jsx(Go,{children:n.jsxs(Yn,{children:[n.jsx(Mt,{children:"Statement"}),n.jsx(Mt,{children:"Scope"}),n.jsx(Mt,{children:"Confidence"}),n.jsx(Mt,{children:"Critical"}),n.jsx(Mt,{children:"Status"}),n.jsx(Mt,{children:"Updated"}),n.jsx(Mt,{className:"text-right",children:"Actions"})]})}),n.jsx(Wo,{children:r.map(Y=>n.jsxs(Yn,{children:[n.jsx(Rt,{children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm font-medium max-w-md",children:Y.statement}),Y.evidenceUrl&&n.jsxs("a",{href:Y.evidenceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline inline-flex items-center gap-1",children:["Evidence ",n.jsx(Ph,{className:"h-3 w-3"})]}),Y.owner&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Owner: ",Y.owner]})]})}),n.jsx(Rt,{children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(be,{variant:"outline",className:"text-xs",children:Y.scope}),Y.linkId&&n.jsx("div",{className:"text-xs text-muted-foreground",children:Y.linkId})]})}),n.jsx(Rt,{children:n.jsx("span",{className:`text-sm font-medium ${M4e(Y.confidence)}`,children:MK(Y.confidence)})}),n.jsx(Rt,{children:Y.critical?n.jsx(be,{variant:"destructive",className:"text-xs",children:"Yes"}):n.jsx("span",{className:"text-xs text-muted-foreground",children:"No"})}),n.jsx(Rt,{children:n.jsxs(Et,{value:Y.status,onValueChange:Q=>J(Y.id,Q),children:[n.jsx(kt,{className:"w-32 h-8",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"open",children:"Open"}),n.jsx(we,{value:"validated",children:"Validated"}),n.jsx(we,{value:"invalidated",children:"Invalidated"})]})]})}),n.jsxs(Rt,{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(Y.updatedAt).toLocaleDateString()}),Y.reviewBy&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Review:"," ",new Date(Y.reviewBy).toLocaleDateString()]})]}),n.jsx(Rt,{className:"text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>G(Y),children:n.jsx(jj,{className:"w-4 h-4"})}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>V(Y.id),children:n.jsx(vp,{className:"w-4 h-4 text-destructive"})})]})})]},Y.id))})]})}),n.jsx(Nr,{open:s||o,onOpenChange:Y=>{Y||(i(!1),l(!1),u(null),$())},children:n.jsxs(gr,{className:"max-w-2xl",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:d?"Edit Assumption":"Add Assumption"}),n.jsx(Sr,{children:d?"Update the assumption details":"Add a new assumption to track"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"scope",children:"Scope"}),n.jsxs(Et,{value:f,onValueChange:Y=>m(Y),children:[n.jsx(kt,{id:"scope",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"decision",children:"Decision"}),n.jsx(we,{value:"option",children:"Option"}),n.jsx(we,{value:"variable",children:"Variable"})]})]})]}),f!=="decision"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"linkId",children:f==="option"?"Option ID":"Variable ID"}),n.jsx(et,{id:"linkId",value:p,onChange:Y=>g(Y.target.value),placeholder:f==="option"?"opt-1":"var-demand"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"statement",children:"Statement *"}),n.jsx(ua,{id:"statement",value:b,onChange:Y=>v(Y.target.value),placeholder:"Concise statement of the assumption...",rows:3})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"evidenceUrl",children:"Evidence URL (Optional)"}),n.jsx(et,{id:"evidenceUrl",value:y,onChange:Y=>j(Y.target.value),placeholder:"https://..."})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"confidence",children:"Confidence"}),n.jsxs(Et,{value:_.toString(),onValueChange:Y=>C(parseInt(Y)),children:[n.jsx(kt,{id:"confidence",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"0",children:"Low"}),n.jsx(we,{value:"1",children:"Medium"}),n.jsx(we,{value:"2",children:"High"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"status",children:"Status"}),n.jsxs(Et,{value:I,onValueChange:Y=>D(Y),children:[n.jsx(kt,{id:"status",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"open",children:"Open"}),n.jsx(we,{value:"validated",children:"Validated"}),n.jsx(we,{value:"invalidated",children:"Invalidated"})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Pa,{id:"critical",checked:A,onCheckedChange:S}),n.jsx(Ne,{htmlFor:"critical",className:"cursor-pointer",children:"Critical (gate at decision close)"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"owner",children:"Owner (Optional)"}),n.jsx(et,{id:"owner",value:T,onChange:Y=>O(Y.target.value),placeholder:"Name or email"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"reviewBy",children:"Review By (Optional)"}),n.jsx(et,{id:"reviewBy",type:"date",value:R,onChange:Y=>M(Y.target.value)})]})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>{i(!1),l(!1),u(null),$()},children:"Cancel"}),n.jsxs(le,{onClick:d?U:K,disabled:!b.trim(),children:[d?"Update":"Add"," Assumption"]})]})]})})]})}function fke({options:e,onUpdateOptionFinancials:t,plainLanguage:r,globalHorizonMonths:a}){return n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsx(Ne,{children:"Option Financials"})}),n.jsx("div",{className:"space-y-2",children:e.map(s=>n.jsxs("div",{className:"p-3 border border-border rounded-lg space-y-2",children:[n.jsx("div",{className:"font-medium text-sm",children:s.label}),n.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Expected Return"}),n.jsx(et,{type:"number",value:s.expectedReturn??0,onChange:i=>t(s.id,"expectedReturn",Number(i.target.value)),className:"h-8"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Cost"}),n.jsx(et,{type:"number",value:s.cost??0,onChange:i=>t(s.id,"cost",Number(i.target.value)),className:"h-8"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:n.jsx(ya,{term:"mitigation"})}),n.jsx(et,{type:"number",value:s.mitigationCost??0,onChange:i=>t(s.id,"mitigationCost",Number(i.target.value)),className:"h-8"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs(Ne,{className:"text-xs text-muted-foreground",children:[n.jsx(ya,{term:"horizon"})," (months)"]}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"w-3 h-3 text-muted-foreground cursor-help"})}),n.jsx(St,{children:n.jsxs("p",{className:"text-xs max-w-xs",children:["How far ahead this option applies. Leave empty to use Time window from header (",a,"m)."]})})]})})]}),n.jsx(et,{type:"number",value:s.horizonMonths??"",onChange:i=>{const o=i.target.value;t(s.id,"horizonMonths",o===""?void 0:Number(o))},placeholder:`Use ${a}m`,className:"h-8"})]})]})]},s.id))})]})}var hke=Symbol("radix.slottable");function mke(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=hke,t}var GK="AlertDialog",[pke]=ai(GK,[Lq]),wu=Lq(),WK=e=>{const{__scopeAlertDialog:t,...r}=e,a=wu(t);return n.jsx($3,{...a,...r,modal:!0})};WK.displayName=GK;var gke="AlertDialogTrigger",xke=N.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,s=wu(r);return n.jsx(F3,{...s,...a,ref:t})});xke.displayName=gke;var vke="AlertDialogPortal",KK=e=>{const{__scopeAlertDialog:t,...r}=e,a=wu(t);return n.jsx(B3,{...a,...r})};KK.displayName=vke;var yke="AlertDialogOverlay",YK=N.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,s=wu(r);return n.jsx(Ly,{...s,...a,ref:t})});YK.displayName=yke;var _p="AlertDialogContent",[bke,jke]=pke(_p),wke=mke("AlertDialogContent"),XK=N.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:a,...s}=e,i=wu(r),o=N.useRef(null),l=br(t,o),d=N.useRef(null);return n.jsx(Cde,{contentName:_p,titleName:JK,docsSlug:"alert-dialog",children:n.jsx(bke,{scope:r,cancelRef:d,children:n.jsxs(Iy,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:yt(s.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=d.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[n.jsx(wke,{children:a}),n.jsx(Ske,{contentRef:o})]})})})});XK.displayName=_p;var JK="AlertDialogTitle",ZK=N.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,s=wu(r);return n.jsx($y,{...s,...a,ref:t})});ZK.displayName=JK;var QK="AlertDialogDescription",eY=N.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,s=wu(r);return n.jsx(Fy,{...s,...a,ref:t})});eY.displayName=QK;var Nke="AlertDialogAction",tY=N.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,s=wu(r);return n.jsx(Hj,{...s,...a,ref:t})});tY.displayName=Nke;var rY="AlertDialogCancel",nY=N.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,{cancelRef:s}=jke(rY,r),i=wu(r),o=br(t,s);return n.jsx(Hj,{...i,...a,ref:o})});nY.displayName=rY;var Ske=({contentRef:e})=>{const t=`\`${_p}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${_p}\` by passing a \`${QK}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${_p}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{var a;document.getElementById((a=e.current)==null?void 0:a.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Cke=WK,_ke=KK,aY=YK,sY=XK,iY=tY,oY=nY,lY=ZK,cY=eY;const Ake=Cke,kke=_ke,dY=N.forwardRef(({className:e,...t},r)=>n.jsx(aY,{className:Ye("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));dY.displayName=aY.displayName;const uY=N.forwardRef(({className:e,...t},r)=>n.jsxs(kke,{children:[n.jsx(dY,{}),n.jsx(sY,{ref:r,className:Ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));uY.displayName=sY.displayName;const fY=({className:e,...t})=>n.jsx("div",{className:Ye("flex flex-col space-y-2 text-center sm:text-left",e),...t});fY.displayName="AlertDialogHeader";const hY=({className:e,...t})=>n.jsx("div",{className:Ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});hY.displayName="AlertDialogFooter";const mY=N.forwardRef(({className:e,...t},r)=>n.jsx(lY,{ref:r,className:Ye("text-lg font-semibold",e),...t}));mY.displayName=lY.displayName;const pY=N.forwardRef(({className:e,...t},r)=>n.jsx(cY,{ref:r,className:Ye("text-sm text-muted-foreground",e),...t}));pY.displayName=cY.displayName;const gY=N.forwardRef(({className:e,...t},r)=>n.jsx(iY,{ref:r,className:Ye(y3(),e),...t}));gY.displayName=iY.displayName;const xY=N.forwardRef(({className:e,...t},r)=>n.jsx(oY,{ref:r,className:Ye(y3({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));xY.displayName=oY.displayName;const Oke=[{id:"pilot-before-launch",name:"Pilot before full launch",description:"Test with a pilot program before committing to full launch",options:[{label:"Pilot now"},{label:"Full launch"},{label:"Wait & see"}],scenarioVars:[{id:"demand-var",name:"Demand",appliesTo:"return",dist:"triangular",params:{min:-.2,mode:0,max:.4},weight:1},{id:"cost-inflation-var",name:"Cost inflation",appliesTo:"cost",dist:"normal",params:{mean:.05,sd:.03},weight:1}],isBuiltIn:!0},{id:"switch-supplier",name:"Switch supplier",description:"Evaluate switching to a new supplier partially or fully",options:[{label:"Switch 50%"},{label:"Switch 100%"},{label:"Stay"}],scenarioVars:[{id:"fx-move-var",name:"FX move",appliesTo:"cost",dist:"normal",params:{mean:0,sd:.06},weight:1},{id:"supply-delay-var",name:"Supply delay",appliesTo:"cost",dist:"lognormal",params:{mu:0,sigma:.25},weight:1}],isBuiltIn:!0},{id:"add-capacity",name:"Add capacity",description:"Expand capacity with different investment levels",options:[{label:"Add small"},{label:"Add medium"},{label:"Add big"}],scenarioVars:[{id:"demand-var",name:"Demand",appliesTo:"return",dist:"triangular",params:{min:-.2,mode:0,max:.4},weight:1},{id:"cost-inflation-var",name:"Cost inflation",appliesTo:"cost",dist:"normal",params:{mean:.05,sd:.03},weight:1}],isBuiltIn:!0},{id:"pricing-change",name:"Pricing change",description:"Adjust pricing strategy and evaluate demand impact",options:[{label:"+3% price"},{label:"+5% price"},{label:"No change"}],scenarioVars:[{id:"demand-sensitivity-var",name:"Demand sensitivity to price",appliesTo:"return",dist:"normal",params:{mean:-.03,sd:.02},weight:1}],isBuiltIn:!0}];function rE(e){return`retina:templates:${e}`}function nE(e){try{const t=rE(e),r=localStorage.getItem(t);return r?JSON.parse(r):[]}catch(t){return console.error("Failed to load user templates:",t),[]}}function Eke(e,t){const r=nE(e),a={...t,id:`user-${Date.now()}`,isBuiltIn:!1};r.push(a);const s=rE(e);return localStorage.setItem(s,JSON.stringify(r)),a}function Tke(e,t){const a=nE(e).filter(i=>i.id!==t),s=rE(e);localStorage.setItem(s,JSON.stringify(a))}function B_(e){const t=nE(e);return[...Oke,...t]}function Rke({tenantId:e,currentTitle:t,currentDescription:r,currentOptions:a,currentScenarioVars:s,onApplyTemplate:i,onAuditEvent:o}){const[l,d]=N.useState(!1),[u,f]=N.useState([]),[m,p]=N.useState(!1),[g,b]=N.useState(!1),[v,y]=N.useState(!1),[j,_]=N.useState(!1),[C,A]=N.useState(null),[S,T]=N.useState(null),[O,R]=N.useState(""),[M,I]=N.useState("replace");pe.useEffect(()=>{l&&f(B_(e))},[l,e]);const D=()=>!t&&!r&&a.length<=2&&s.length===0,$=q=>{A(q),D()?K(q,"replace"):y(!0)},K=(q,Y)=>{const Q=Y==="replace"?q.name:t,F=Y==="replace"?q.description:r,z=q.options.map((ie,ce)=>({id:`opt-${Date.now()}-${ce}`,label:ie.label})),H=Y==="replace"?z:[...a,...z],X=q.scenarioVars.map(ie=>({...ie,id:`var-${Date.now()}-${Math.random()}`})),ne=Y==="replace"?X:[...s,...X];i(Q,F,H,ne),o("template.applied",{name:q.name,mode:Y,options:q.options.length,vars:q.scenarioVars.length}),y(!1),d(!1)},U=()=>{if(!O.trim())return;const q=Eke(e,{name:O,description:r||"Custom template",options:a.map(Y=>({label:Y.label})),scenarioVars:s});o("template.saved",{name:q.name,options:a.length,vars:s.length}),f(B_(e)),p(!1),R("")},J=()=>{S&&(Tke(e,S.id),o("template.deleted",{name:S.name,options:S.options.length,vars:S.scenarioVars.length}),f(B_(e)),_(!1),T(null))},V=u.filter(q=>q.isBuiltIn),G=u.filter(q=>!q.isBuiltIn);return n.jsxs(n.Fragment,{children:[n.jsxs(am,{open:l,onOpenChange:d,children:[n.jsx(I2,{asChild:!0,children:n.jsxs(le,{variant:"outline",size:"sm",children:[n.jsx(Ite,{className:"w-4 h-4 mr-2"}),"Templates"]})}),n.jsxs(Pf,{side:"right",className:"w-[500px] sm:w-[600px] overflow-y-auto",children:[n.jsxs(Mf,{children:[n.jsx(Df,{children:"Decision Templates"}),n.jsx(Lf,{children:"Quick-start templates for common decision scenarios"})]}),n.jsxs("div",{className:"mt-6 space-y-6",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>p(!0),disabled:a.length===0&&s.length===0,children:[n.jsx(yp,{className:"w-4 h-4 mr-2"}),"Save current as template"]}),n.jsx(le,{variant:"outline",size:"sm",onClick:()=>b(!0),disabled:G.length===0,children:"Manage templates"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"text-sm font-semibold",children:"Built-in Templates"}),n.jsx("div",{className:"space-y-3",children:V.map(q=>n.jsxs(Ae,{className:"cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>$(q),children:[n.jsx(He,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(Ge,{className:"text-base",children:q.name}),n.jsx(mt,{className:"text-xs mt-1",children:q.description})]}),n.jsx(be,{variant:"secondary",className:"ml-2 shrink-0",children:"Built-in"})]})}),n.jsxs(Re,{className:"space-y-2 pt-0",children:[n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"font-medium",children:"Options:"})," ",n.jsx("span",{className:"text-muted-foreground",children:q.options.map(Y=>Y.label).join(", ")})]}),n.jsxs("div",{className:"text-xs",children:[n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsxs("span",{className:"font-medium cursor-help",children:[n.jsx(ya,{term:"scenario",as:"label"}),":"]})}),n.jsx(St,{children:n.jsx("div",{className:"space-y-1",children:q.scenarioVars.map(Y=>n.jsxs("div",{className:"text-xs",children:[Y.name," (",Y.dist,")"]},Y.id))})})]})})," ",n.jsxs("span",{className:"text-muted-foreground",children:[q.scenarioVars.length," variable(s)"]})]})]})]},q.id))})]}),G.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"text-sm font-semibold",children:"Your Templates"}),n.jsx("div",{className:"space-y-3",children:G.map(q=>n.jsxs(Ae,{className:"cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>$(q),children:[n.jsx(He,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(Ge,{className:"text-base",children:q.name}),n.jsx(mt,{className:"text-xs mt-1",children:q.description})]}),n.jsx(be,{variant:"outline",className:"ml-2 shrink-0",children:"Custom"})]})}),n.jsxs(Re,{className:"space-y-2 pt-0",children:[n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"font-medium",children:"Options:"})," ",n.jsx("span",{className:"text-muted-foreground",children:q.options.map(Y=>Y.label).join(", ")})]}),n.jsxs("div",{className:"text-xs",children:[n.jsxs("span",{className:"font-medium",children:[n.jsx(ya,{term:"scenario",as:"label"}),":"]})," ",n.jsxs("span",{className:"text-muted-foreground",children:[q.scenarioVars.length," variable(s)"]})]})]})]},q.id))})]})]})]})]}),n.jsx(Nr,{open:m,onOpenChange:p,children:n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Save as Template"}),n.jsx(Sr,{children:"Save your current decision setup as a reusable template"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"template-name",children:"Template Name"}),n.jsx(et,{id:"template-name",placeholder:"e.g., My Decision Template",value:O,onChange:q=>R(q.target.value)})]}),n.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[n.jsx("div",{children:n.jsx("strong",{children:"Will save:"})}),n.jsxs("div",{children:[" ",a.length," option(s)"]}),n.jsxs("div",{children:[" ",s.length," what-if variable(s)"]})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>{p(!1),R("")},children:"Cancel"}),n.jsxs(le,{onClick:U,disabled:!O.trim(),children:[n.jsx(yp,{className:"w-4 h-4 mr-2"}),"Save Template"]})]})]})}),n.jsx(Nr,{open:v,onOpenChange:y,children:n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Apply Template"}),n.jsx(Sr,{children:"You have an existing decision. How would you like to apply this template?"})]}),n.jsx("div",{className:"space-y-4 py-4",children:n.jsxs("div",{className:"flex items-start gap-3 p-3 border border-orange-500/20 bg-orange-500/10 rounded-lg",children:[n.jsx(yn,{className:"w-5 h-5 text-orange-600 shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-orange-700 dark:text-orange-400",children:[n.jsx("strong",{children:"Replace"})," will clear your current decision and start fresh with the template.",n.jsx("br",{}),n.jsx("strong",{children:"Merge"})," will add template options and variables to your existing decision."]})]})}),n.jsxs(bn,{className:"flex-col sm:flex-row gap-2",children:[n.jsx(le,{variant:"outline",onClick:()=>y(!1),className:"w-full sm:w-auto",children:"Cancel"}),n.jsxs(le,{variant:"outline",onClick:()=>{C&&K(C,"merge")},className:"w-full sm:w-auto",children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Merge"]}),n.jsx(le,{onClick:()=>{C&&K(C,"replace")},className:"w-full sm:w-auto",children:"Replace"})]})]})}),n.jsx(Nr,{open:g,onOpenChange:b,children:n.jsxs(gr,{className:"max-w-2xl",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Manage Templates"}),n.jsx(Sr,{children:"View and delete your custom templates"})]}),n.jsx("div",{className:"space-y-3 py-4 max-h-[400px] overflow-y-auto",children:G.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No custom templates yet"}):G.map(q=>n.jsxs("div",{className:"flex items-start justify-between p-3 border border-border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold text-sm",children:q.name}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:q.description}),n.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[q.options.length," option(s) "," ",q.scenarioVars.length," variable(s)"]})]}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>{T(q),_(!0)},children:n.jsx(mo,{className:"w-4 h-4 text-destructive"})})]},q.id))}),n.jsx(bn,{children:n.jsx(le,{onClick:()=>b(!1),children:"Close"})})]})}),n.jsx(Ake,{open:j,onOpenChange:_,children:n.jsxs(uY,{children:[n.jsxs(fY,{children:[n.jsx(mY,{children:"Delete Template"}),n.jsxs(pY,{children:['Are you sure you want to delete "',S==null?void 0:S.name,'"? This action cannot be undone.']})]}),n.jsxs(hY,{children:[n.jsx(xY,{onClick:()=>T(null),children:"Cancel"}),n.jsx(gY,{onClick:J,children:"Delete"})]})]})})]})}const h$={supplier:"Supplier",customer:"Customer",JV:"Joint Venture",investor:"Investor",lender:"Lender"},Pke={supplier:"bg-blue-500/10 text-blue-700 dark:text-blue-400",customer:"bg-green-500/10 text-green-700 dark:text-green-400",JV:"bg-purple-500/10 text-purple-700 dark:text-purple-400",investor:"bg-orange-500/10 text-orange-700 dark:text-orange-400",lender:"bg-red-500/10 text-red-700 dark:text-red-400"};function Mke({options:e,onUpdatePartners:t}){const[r,a]=N.useState(new Set),s=d=>{const u=new Set(r);u.has(d)?u.delete(d):u.add(d),a(u)},i=d=>{const u=e.find(p=>p.id===d);if(!u)return;const f=u.partners||[];if(f.length>=5)return;const m={id:`partner-${Date.now()}`,partner_name:"",relationship_type:"supplier",credit_exposure:0,dependency_score:.5,notes:""};t(d,[...f,m])},o=(d,u)=>{const f=e.find(p=>p.id===d);if(!f)return;const m=f.partners||[];t(d,m.filter(p=>p.id!==u))},l=(d,u,f)=>{const m=e.find(g=>g.id===d);if(!m)return;const p=m.partners||[];t(d,p.map(g=>g.id===u?{...g,...f}:g))};return n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Uo,{className:"w-5 h-5 text-primary"}),n.jsx(Ge,{className:"text-base",children:"Who else is involved or depends on this?"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),n.jsx(St,{className:"max-w-xs",children:n.jsx("p",{className:"text-sm",children:"External parties tied to this decision (customers, suppliers, financiers, etc.)"})})]})})]})})}),n.jsx(Re,{className:"space-y-4",children:e.map(d=>{const u=r.has(d.id),f=d.partners||[],m=f.length<5;return n.jsxs("div",{className:"border border-border rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"p-3 bg-muted/50 flex items-center justify-between cursor-pointer hover:bg-muted/70 transition-colors",onClick:()=>s(d.id),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"font-medium text-sm",children:d.label}),f.length>0&&n.jsxs(be,{variant:"secondary",className:"text-xs",children:[f.length," ",f.length===1?"partner":"partners"]})]}),n.jsxs(le,{variant:"ghost",size:"sm",onClick:p=>{p.stopPropagation(),m&&(i(d.id),u||s(d.id))},disabled:!m,children:[n.jsx(Pn,{className:"w-4 h-4 mr-1"}),"Add Partner"]})]}),u&&n.jsxs("div",{className:"p-4 space-y-4",children:[f.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No partners added yet. Click "Add Partner" to get started.'}):n.jsx("div",{className:"space-y-4",children:f.map(p=>n.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-3 bg-background",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Partner Name"}),n.jsx(et,{value:p.partner_name,onChange:g=>l(d.id,p.id,{partner_name:g.target.value}),placeholder:"Enter partner name",className:"h-8"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Relationship Type"}),n.jsxs(Et,{value:p.relationship_type,onValueChange:g=>l(d.id,p.id,{relationship_type:g}),children:[n.jsx(kt,{className:"h-8",children:n.jsx(Tt,{})}),n.jsx(Ot,{children:Object.entries(h$).map(([g,b])=>n.jsx(we,{value:g,children:b},g))})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Credit Exposure ($)"}),n.jsx(et,{type:"number",value:p.credit_exposure,onChange:g=>l(d.id,p.id,{credit_exposure:Number(g.target.value)}),placeholder:"0",className:"h-8",min:0})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Dependency Score (01)"}),n.jsx(et,{type:"number",value:p.dependency_score,onChange:g=>{const b=Math.max(0,Math.min(1,Number(g.target.value)));l(d.id,p.id,{dependency_score:b})},placeholder:"0.5",className:"h-8",step:.1,min:0,max:1})]})]}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>o(d.id,p.id),className:"shrink-0 mt-5",children:n.jsx(mo,{className:"w-4 h-4 text-destructive"})})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Notes"}),n.jsx(ua,{value:p.notes,onChange:g=>l(d.id,p.id,{notes:g.target.value}),placeholder:"Additional notes about this partner...",rows:2,className:"text-sm"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(be,{className:Pke[p.relationship_type],children:h$[p.relationship_type]}),p.dependency_score>=.7&&n.jsx(be,{variant:"outline",className:"text-xs",children:"High dependency"}),p.credit_exposure>0&&n.jsxs(be,{variant:"outline",className:"text-xs",children:["$",p.credit_exposure.toLocaleString()," ","exposure"]})]})]},p.id))}),!m&&n.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:"Maximum of 5 partners per option reached"})]})]},d.id)})})]})}function Dke(e,t){if(!e||e.length===0)return{score:0,level:"Low",totalExposure:0,averageDependency:0};const r=e.reduce((u,f)=>u+f.credit_exposure*f.dependency_score,0),a=e.reduce((u,f)=>u+f.credit_exposure,0),s=e.reduce((u,f)=>u+f.dependency_score,0)/e.length,i=t.map(u=>!u.partners||u.partners.length===0?0:u.partners.reduce((f,m)=>f+m.credit_exposure*m.dependency_score,0)).filter(u=>u>0),o=Math.max(...i,r),l=o>0?r/o*100:0;let d;return l<33?d="Low":l<67?d="Medium":d="High",{score:Math.round(l),level:d,totalExposure:a,averageDependency:s}}function Lke(e){switch(e){case"Low":return"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20";case"Medium":return"bg-yellow-500/10 text-yellow-700 dark:text-yellow-400 border-yellow-500/20";case"High":return"bg-red-500/10 text-red-700 dark:text-red-400 border-red-500/20"}}const Ike=[{id:"conservative-risk",name:"Conservative Risk Profile",description:"Strict limits for risk-averse organizations with tight VaR and CVaR controls",category:"risk",guardrails:[{metricName:"VaR95",direction:"below",alertLevel:"critical"},{metricName:"CVaR95",direction:"below",alertLevel:"critical"},{metricName:"RAROC",direction:"above",alertLevel:"caution"}],defaultThresholds:{VaR95:e=>e*1.1,CVaR95:e=>e*1.15,RAROC:()=>.12}},{id:"balanced-risk",name:"Balanced Risk Profile",description:"Moderate limits balancing risk and return with standard thresholds",category:"risk",guardrails:[{metricName:"VaR95",direction:"below",alertLevel:"critical"},{metricName:"CVaR95",direction:"below",alertLevel:"caution"},{metricName:"RAROC",direction:"above",alertLevel:"info"}],defaultThresholds:{VaR95:e=>e*1.2,CVaR95:e=>e*1.25,RAROC:()=>.08}},{id:"aggressive-growth",name:"Aggressive Growth Profile",description:"Flexible limits for growth-focused strategies with higher risk tolerance",category:"risk",guardrails:[{metricName:"VaR95",direction:"below",alertLevel:"caution"},{metricName:"RAROC",direction:"above",alertLevel:"info"},{metricName:"EV",direction:"above",alertLevel:"caution"}],defaultThresholds:{VaR95:e=>e*1.5,RAROC:()=>.05,EV:e=>e*.8}},{id:"credit-focused",name:"Credit Risk Management",description:"Focused on credit exposure and partner dependency with strict credit limits",category:"credit",guardrails:[{metricName:"Credit Risk Score",direction:"above",alertLevel:"critical"},{metricName:"VaR95",direction:"below",alertLevel:"caution"}],defaultThresholds:{"Credit Risk Score":()=>70,VaR95:e=>e*1.2}},{id:"capital-preservation",name:"Capital Preservation",description:"Strict limits to protect capital with minimal downside risk tolerance",category:"financial",guardrails:[{metricName:"VaR95",direction:"below",alertLevel:"critical"},{metricName:"CVaR95",direction:"below",alertLevel:"critical"},{metricName:"EV",direction:"above",alertLevel:"critical"},{metricName:"Economic Capital",direction:"below",alertLevel:"caution"}],defaultThresholds:{VaR95:e=>e*1.05,CVaR95:e=>e*1.1,EV:e=>e*.95,"Economic Capital":e=>e*1.15}},{id:"regulatory-compliance",name:"Regulatory Compliance",description:"Guardrails aligned with regulatory requirements and capital adequacy",category:"operational",guardrails:[{metricName:"VaR95",direction:"below",alertLevel:"critical"},{metricName:"Economic Capital",direction:"below",alertLevel:"critical"},{metricName:"RAROC",direction:"above",alertLevel:"critical"},{metricName:"Credit Risk Score",direction:"above",alertLevel:"caution"}],defaultThresholds:{VaR95:e=>e*1.1,"Economic Capital":e=>e*1.2,RAROC:()=>.1,"Credit Risk Score":()=>75}}],$ke=e=>`retina:guardrail-templates:${e}`;function Fke(e){const t=$ke(e),r=localStorage.getItem(t);if(!r)return[];try{return JSON.parse(r)}catch(a){return console.error("Failed to parse user templates:",a),[]}}function Bke(e){const t=Fke(e);return[...Ike,...t]}const zke={provider:"mock",fromEmail:"noreply@retina-intelligence.com",fromName:"Retina Intelligence Suite",replyToEmail:"support@retina-intelligence.com"};async function qke(e,t=zke){const r=new Date().toISOString();try{if(!e.to||e.to.length===0)throw new Error("At least one recipient is required");if(!e.subject||!e.htmlBody)throw new Error("Subject and body are required");switch(t.provider){case"sendgrid":return await Uke(e,t);case"ses":return await Vke(e,t);case"smtp":return await Hke(e,t);case"mock":default:return await Gke(e,t)}}catch(a){return console.error("Email send error:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error",timestamp:r}}}async function Uke(e,t){var i,o,l;if(!t.apiKey)throw new Error("SendGrid API key is required");const r={personalizations:[{to:e.to.map(d=>({email:d.email,name:d.name})),cc:(i=e.cc)==null?void 0:i.map(d=>({email:d.email,name:d.name})),bcc:(o=e.bcc)==null?void 0:o.map(d=>({email:d.email,name:d.name}))}],from:{email:t.fromEmail,name:t.fromName},reply_to:e.replyTo?{email:e.replyTo}:t.replyToEmail?{email:t.replyToEmail}:void 0,subject:e.subject,content:[{type:"text/html",value:e.htmlBody},...e.textBody?[{type:"text/plain",value:e.textBody}]:[]],attachments:(l=e.attachments)==null?void 0:l.map(d=>({filename:d.filename,content:d.content,type:d.contentType,disposition:"attachment"}))},a=await fetch("https://api.sendgrid.com/v3/mail/send",{method:"POST",headers:{Authorization:`Bearer ${t.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok){const d=await a.text();throw new Error(`SendGrid error: ${d}`)}return{success:!0,messageId:a.headers.get("x-message-id")||void 0,timestamp:new Date().toISOString()}}async function Vke(e,t){return console.log("AWS SES send:",{request:e,config:t}),{success:!0,messageId:`ses-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString()}}async function Hke(e,t){return console.log("SMTP send:",{request:e,config:t}),{success:!0,messageId:`smtp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString()}}async function Gke(e,t){return await new Promise(r=>setTimeout(r,500)),console.log(" Mock Email Sent:"),console.log("From:",`${t.fromName} <${t.fromEmail}>`),console.log("To:",e.to.map(r=>r.email).join(", ")),e.cc&&console.log("CC:",e.cc.map(r=>r.email).join(", ")),e.bcc&&console.log("BCC:",e.bcc.map(r=>r.email).join(", ")),console.log("Subject:",e.subject),console.log("Body length:",e.htmlBody.length,"characters"),e.attachments&&console.log("Attachments:",e.attachments.map(r=>r.filename).join(", ")),{success:!0,messageId:`mock-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString()}}function Wke(e,t,r){return`
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${e} - Board Summary</title>
  <style>
    body {
      font-family: ${r.fontFamily||"Arial, sans-serif"};
      line-height: 1.6;
      color: #333;
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }
    .header {
      background: ${r.primaryColor};
      color: white;
      padding: 20px;
      border-radius: 8px 8px 0 0;
      text-align: center;
    }
    .content {
      background: #f9f9f9;
      padding: 20px;
      border: 1px solid #ddd;
      border-top: none;
      border-radius: 0 0 8px 8px;
    }
    .metric {
      background: white;
      padding: 15px;
      margin: 10px 0;
      border-left: 4px solid ${r.accentColor};
      border-radius: 4px;
    }
    .metric-label {
      font-size: 12px;
      color: #666;
      text-transform: uppercase;
      margin-bottom: 5px;
    }
    .metric-value {
      font-size: 24px;
      font-weight: bold;
      color: #1a1a1a;
    }
    .footer {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid #ddd;
      font-size: 12px;
      color: #666;
      text-align: center;
    }
    .button {
      display: inline-block;
      padding: 12px 24px;
      background: ${r.primaryColor};
      color: white;
      text-decoration: none;
      border-radius: 4px;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1 style="margin: 0;">${r.companyName}</h1>
    <p style="margin: 10px 0 0 0;">Board-Ready Summary</p>
  </div>
  
  <div class="content">
    <h2 style="color: ${r.primaryColor}; margin-top: 0;">${e}</h2>
    
    <p><strong>Chosen Option:</strong> ${t.chosenOption}</p>
    <p><strong>Generated:</strong> ${new Date(t.generatedAt).toLocaleString()}</p>
    
    <h3 style="color: ${r.primaryColor};">Key Metrics</h3>
    
    <div class="metric">
      <div class="metric-label">Expected Value (EV)</div>
      <div class="metric-value">${t.keyMetrics.ev.toFixed(2)}</div>
    </div>
    
    <div class="metric">
      <div class="metric-label">Risk-Adjusted Return (RAROC)</div>
      <div class="metric-value">${t.keyMetrics.raroc.toFixed(4)}</div>
    </div>
    
    <div class="metric">
      <div class="metric-label">Value at Risk 95% (VaR95)</div>
      <div class="metric-value">${t.keyMetrics.var95.toFixed(2)}</div>
    </div>
    
    <h3 style="color: ${r.primaryColor};">Executive Summary</h3>
    <p>${t.narrative.decision}</p>
    
    <p style="text-align: center;">
      <a href="#" class="button">View Full Report</a>
    </p>
  </div>
  
  <div class="footer">
    <p>This is an automated email from ${r.companyName}.</p>
    <p>Please do not reply to this email.</p>
  </div>
</body>
</html>
  `}const m$={enabled:!0,recipients:[],notifyOnLevels:["critical","caution"],includeMetrics:!0,includeTrend:!1},Kke=(e,t)=>`retina:guardrail-notifications:${e}:${t}`;function Yke(e,t){const r=Kke(e,t),a=localStorage.getItem(r);if(!a)return m$;try{return JSON.parse(a)}catch(s){return console.error("Failed to parse notification preferences:",s),m$}}function Xke({decisionId:e,optionId:t,optionLabel:r,currentMetrics:a,onAuditEvent:s}){const{tenant:i}=Fr(),[o,l]=N.useState(!1),[d,u]=N.useState(!1),[f,m]=N.useState(!1),[p]=N.useState(Bke(i.tenantId)),[g,b]=N.useState(Yke(e,t)),[v]=N.useState(Yde(e,t)),[y,j]=N.useState([]),[_,C]=N.useState(!1),[A,S]=N.useState({metricName:"VaR95",thresholdValue:0,direction:"below",alertLevel:"caution"});N.useEffect(()=>{o&&T()},[o,e,t]);const T=()=>{const D=Gj(e,t);if(D.length===0&&(a==null?void 0:a.var95)!==void 0){const $=zde(e,t,a.var95,a.creditRiskScore||50);j($),s("guardrails.initialized",{decisionId:e,optionId:t,optionLabel:r,count:$.length})}else j(D)},O=()=>{if(!A.metricName||A.thresholdValue===0)return;const D=$de(e,t,A);j([...y,D]),C(!1),S({metricName:"VaR95",thresholdValue:0,direction:"below",alertLevel:"caution"}),s("guardrail.added",{decisionId:e,optionId:t,optionLabel:r,guardrailId:D.id,metricName:D.metricName,thresholdValue:D.thresholdValue,direction:D.direction,alertLevel:D.alertLevel})},R=D=>{const $=y.find(K=>K.id===D);$&&(Bde(e,D),j(y.filter(K=>K.id!==D)),s("guardrail.deleted",{decisionId:e,optionId:t,optionLabel:r,guardrailId:D,metricName:$.metricName}))},M=a?Ude(e,t,{VaR95:a.var95||0,RAROC:a.raroc||0,EV:a.ev||0,"Credit Risk Score":a.creditRiskScore||0}):[],I=D=>{switch(D){case"info":return Or;case"caution":return yn;case"critical":return tn}};return n.jsxs(am,{open:o,onOpenChange:l,children:[n.jsx(I2,{asChild:!0,children:n.jsxs(le,{variant:"outline",size:"sm",className:"relative",children:[n.jsx(Fo,{className:"w-4 h-4 mr-2"}),"Guardrails",M.length>0&&n.jsx(be,{variant:"destructive",className:"ml-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:M.length})]})}),n.jsxs(Pf,{className:"w-full sm:max-w-xl overflow-y-auto",children:[n.jsxs(Mf,{children:[n.jsxs(Df,{className:"flex items-center gap-2",children:[n.jsx(Fo,{className:"w-5 h-5 text-primary"}),"Guardrails: ",r]}),n.jsxs(Lf,{children:["What limits should never be crossed?",n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"w-4 h-4 inline-block ml-2 text-muted-foreground cursor-help"})}),n.jsx(St,{children:n.jsx("p",{className:"max-w-xs",children:"Set threshold limits for key metrics. Get alerted when values cross these boundaries."})})]})})]})]}),n.jsxs("div",{className:"mt-6 space-y-6",children:[M.length>0&&n.jsxs("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold text-destructive",children:[n.jsx(tn,{className:"w-5 h-5"}),M.length," Guardrail",M.length>1?"s":""," Violated"]}),n.jsx("div",{className:"space-y-1",children:M.map(D=>n.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",D.metricName," is ",D.direction," ",D.thresholdValue.toLocaleString()]},D.id))})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(Ne,{className:"text-base font-semibold",children:["Active Guardrails (",y.length,")"]}),!_&&n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>C(!0),children:[n.jsx(Pn,{className:"w-4 h-4 mr-1"}),"Add"]})]}),y.length===0&&!_?n.jsxs("div",{className:"text-center py-8 space-y-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mx-auto",children:n.jsx(Fo,{className:"w-6 h-6 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No guardrails configured yet"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Run simulation to auto-initialize default guardrails"})]}):n.jsx("div",{className:"space-y-3",children:y.map(D=>{const $=M.some(U=>U.id===D.id),K=I(D.alertLevel);return n.jsxs("div",{className:`p-4 border rounded-lg space-y-3 ${$?"border-destructive bg-destructive/5":"border-border"}`,children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[n.jsx(K,{className:`w-5 h-5 mt-0.5 shrink-0 ${Vde(D.alertLevel)}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-semibold text-sm",children:D.metricName}),n.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Must be ",D.direction," ",n.jsx("span",{className:"font-medium",children:D.thresholdValue.toLocaleString()})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[n.jsx(be,{variant:Hde(D.alertLevel),children:D.alertLevel}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>R(D.id),children:n.jsx(mo,{className:"w-4 h-4 text-destructive"})})]})]}),$&&n.jsx("div",{className:"text-xs text-destructive font-medium",children:" Threshold violated"})]},D.id)})})]}),_&&n.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-4 bg-accent/50",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ne,{className:"text-base font-semibold",children:"Add New Guardrail"}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>C(!1),children:"Cancel"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"metric-name",children:"Metric Name"}),n.jsxs(Et,{value:A.metricName,onValueChange:D=>S({...A,metricName:D}),children:[n.jsx(kt,{id:"metric-name",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"VaR95",children:"VaR95"}),n.jsx(we,{value:"RAROC",children:"RAROC"}),n.jsx(we,{value:"EV",children:"Expected Value"}),n.jsx(we,{value:"Credit Risk Score",children:"Credit Risk Score"}),n.jsx(we,{value:"CVaR95",children:"CVaR95"}),n.jsx(we,{value:"Economic Capital",children:"Economic Capital"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"threshold-value",children:"Threshold Value"}),n.jsx(et,{id:"threshold-value",type:"number",step:"0.01",value:A.thresholdValue,onChange:D=>S({...A,thresholdValue:Number(D.target.value)}),placeholder:"Enter threshold value"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"direction",children:"Direction"}),n.jsxs(Et,{value:A.direction,onValueChange:D=>S({...A,direction:D}),children:[n.jsx(kt,{id:"direction",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"above",children:"Above"}),n.jsx(we,{value:"below",children:"Below"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"alert-level",children:"Alert Level"}),n.jsxs(Et,{value:A.alertLevel,onValueChange:D=>S({...A,alertLevel:D}),children:[n.jsx(kt,{id:"alert-level",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"info",children:"Info"}),n.jsx(we,{value:"caution",children:"Caution"}),n.jsx(we,{value:"critical",children:"Critical"})]})]})]})]}),n.jsxs(le,{onClick:O,disabled:!A.metricName||A.thresholdValue===0,className:"w-full",children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Add Guardrail"]})]})]}),n.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg space-y-2",children:[n.jsx("div",{className:"text-sm font-medium",children:"How Guardrails Work"}),n.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Info"}),": Informational threshold for awareness"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Caution"}),": Warning threshold requiring attention"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Critical"}),": Critical threshold requiring immediate action"]})]})]})]})]})]})}function Jke({decisionId:e,optionId:t,optionLabel:r,onAuditEvent:a,onToast:s}){const{tenant:i}=Fr(),[o,l]=N.useState(!1),[d,u]=N.useState([]),[f,m]=N.useState([]),[p,g]=N.useState([]),[b,v]=N.useState(""),[y,j]=N.useState(""),[_,C]=N.useState("manual"),[A,S]=N.useState(""),[T,O]=N.useState(""),R=gue();N.useEffect(()=>{o&&M()},[o,e,t]);const M=()=>{const J=q3(e).filter(Q=>Q.optionId===t);u(J);const G=By(e).filter(Q=>Q.optionId===t);m(G);const Y=Gj(e,t).map(Q=>Q.metricName);g([...new Set(Y)]),Y.length>0&&!b&&v(Y[0])},I=()=>{const U=parseFloat(y);if(isNaN(U)){s==null||s({title:"Invalid Value",description:"Please enter a valid number",variant:"destructive"});return}if(!b){s==null||s({title:"Missing Metric",description:"Please select a metric",variant:"destructive"});return}const J=uue(e,t,r,b,U,_,i.tenantId,A||void 0,T||void 0,a);j(""),S(""),O(""),M(),J.adjustment?s==null||s({title:"Auto-Adjustment Triggered",description:`Threshold changed from ${J.adjustment.oldThreshold.toFixed(2)} to ${J.adjustment.newThreshold.toFixed(2)}`}):J.violation?s==null||s({title:"Guardrail Breach Detected",description:`${b} breached threshold`,variant:"destructive"}):s==null||s({title:"Outcome Logged",description:`${b} value recorded successfully`})},D=()=>{const U=fue(e),J=new Blob([U],{type:"text/csv"}),V=URL.createObjectURL(J),G=document.createElement("a");G.href=V,G.download=`outcomes-${e}-${Date.now()}.csv`,G.click(),URL.revokeObjectURL(V),a("outcomes.exported",{decisionId:e,optionId:t,count:d.length})},$=()=>{const U=hue(e),J=new Blob([U],{type:"text/csv"}),V=URL.createObjectURL(J),G=document.createElement("a");G.href=V,G.download=`adjustments-${e}-${Date.now()}.csv`,G.click(),URL.revokeObjectURL(V),a("adjustments.exported",{decisionId:e,optionId:t,count:f.length})},K=U=>{switch(U){case"signal":return"default";case"incident":return"secondary";default:return"outline"}};return n.jsxs(am,{open:o,onOpenChange:l,children:[n.jsx(I2,{asChild:!0,children:n.jsxs(le,{variant:"outline",size:"sm",children:[n.jsx(vl,{className:"h-4 w-4 mr-2"}),"Log Outcome"]})}),n.jsxs(Pf,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[n.jsxs(Mf,{children:[n.jsxs(Df,{className:"flex items-center gap-2",children:[n.jsx(vl,{className:"h-5 w-5"}),"Outcome Logger",n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"h-4 w-4 text-muted-foreground"})}),n.jsx(St,{children:n.jsx("p",{className:"max-w-xs",children:R.plainLanguageTooltip})})]})})]}),n.jsx(Lf,{children:"Log actual outcomes from signals/incidents to track guardrail performance"})]}),n.jsxs("div",{className:"mt-6 space-y-6",children:[n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-sm",children:"Auto-Adjustment Rules"})}),n.jsx(Re,{children:n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Breach Window"}),n.jsxs("div",{className:"text-muted-foreground",children:[R.breachWindowDays," days"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Breach Threshold"}),n.jsxs("div",{className:"text-muted-foreground",children:[R.breachThresholdCount," breaches"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Tightening"}),n.jsxs("div",{className:"text-muted-foreground",children:[R.tighteningPercent*100,"%"]})]})]})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{className:"text-sm",children:"Log New Outcome"}),n.jsxs(mt,{children:["Record actual outcome for ",r]})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Metric"}),n.jsxs(Et,{value:b,onValueChange:v,children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Select metric"})}),n.jsx(Ot,{children:p.map(U=>n.jsx(we,{value:U,children:U},U))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Actual Value"}),n.jsx(et,{type:"number",step:"0.01",value:y,onChange:U=>j(U.target.value),placeholder:"Enter actual value"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Source"}),n.jsxs(Et,{value:_,onValueChange:U=>C(U),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"signal",children:"Signal"}),n.jsx(we,{value:"incident",children:"Incident"}),n.jsx(we,{value:"manual",children:"Manual"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Source ID (Optional)"}),n.jsx(et,{value:A,onChange:U=>S(U.target.value),placeholder:"e.g., sig-001, inc-042"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Notes (Optional)"}),n.jsx(ua,{value:T,onChange:U=>O(U.target.value),placeholder:"Additional context or observations",rows:3})]}),n.jsxs(le,{onClick:I,className:"w-full",children:[n.jsx(vl,{className:"h-4 w-4 mr-2"}),"Log Outcome"]})]})]}),n.jsxs(si,{defaultValue:"outcomes",className:"w-full",children:[n.jsxs(zs,{className:"grid w-full grid-cols-2",children:[n.jsxs(hr,{value:"outcomes",children:["Outcomes (",d.length,")"]}),n.jsxs(hr,{value:"adjustments",children:["Adjustments (",f.length,")"]})]}),n.jsxs(Cr,{value:"outcomes",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Recent actual outcomes"}),d.length>0&&n.jsxs(le,{variant:"ghost",size:"sm",onClick:D,children:[n.jsx(qn,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),n.jsx("div",{className:"space-y-3",children:d.length===0?n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6",children:n.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"No outcomes logged yet"})})}):d.slice().reverse().map(U=>n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-6 space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"font-medium text-sm",children:U.metricName}),n.jsx(be,{variant:K(U.source),children:U.source})]}),n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Value:"})," ",U.actualValue.toFixed(2)]}),U.sourceId&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Source ID: ",U.sourceId]}),U.notes&&n.jsx("div",{className:"text-xs text-muted-foreground",children:U.notes}),n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(U.recordedAt).toLocaleString()})]})},U.id))})]}),n.jsxs(Cr,{value:"adjustments",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Auto-adjustment history"}),f.length>0&&n.jsxs(le,{variant:"ghost",size:"sm",onClick:$,children:[n.jsx(qn,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),n.jsx("div",{className:"space-y-3",children:f.length===0?n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6",children:n.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"No auto-adjustments yet"})})}):f.slice().reverse().map(U=>n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-6 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ri,{className:"h-4 w-4 text-green-600"}),n.jsx("div",{className:"font-medium text-sm",children:U.metricName})]}),n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Threshold:"})," ",U.oldThreshold.toFixed(2)," "," ",n.jsx("span",{className:"font-medium",children:U.newThreshold.toFixed(2)})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Tightened by ",U.adjustmentPercent,"%"]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:U.reason}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Triggered by ",U.triggeredBy.length," ","breaches"]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(U.adjustedAt).toLocaleString()})]})},U.id))})]})]})]})]})]})}function Zke({options:e,plainLanguage:t=!0,decisionId:r,simulationResults:a,onAuditEvent:s}){return n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(i=>{var d,u,f,m,p,g,b;const o=Dke(i.partners,e),l=i.partners&&i.partners.length>0;return n.jsxs(Ae,{className:"hover:shadow-md transition-shadow",children:[n.jsx(He,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx(Ge,{className:"text-base",children:i.label}),l&&n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(be,{variant:"outline",className:`${Lke(o.level)} shrink-0`,children:o.level})}),n.jsx(St,{className:"max-w-xs",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-semibold",children:Ra("creditRiskScore",{plain:t})}),n.jsxs("div",{className:"text-xs space-y-1",children:[n.jsxs("div",{children:["Risk Score:"," ",n.jsxs("strong",{children:[o.score,"/100"]})]}),n.jsxs("div",{children:["Total Exposure:"," ",n.jsxs("strong",{children:["$",o.totalExposure.toLocaleString()]})]}),n.jsxs("div",{children:["Avg Dependency:"," ",n.jsx("strong",{children:o.averageDependency.toFixed(2)})]}),n.jsxs("div",{className:"pt-1 border-t border-border",children:[((d=i.partners)==null?void 0:d.length)||0," partner",((u=i.partners)==null?void 0:u.length)!==1?"s":""," linked"]})]})]})})]})})]})}),n.jsxs(Re,{className:"space-y-3",children:[n.jsxs("div",{className:"space-y-2 text-sm",children:[i.expectedReturn!==void 0&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Expected Return:"}),n.jsxs("span",{className:"font-medium",children:["$",i.expectedReturn.toLocaleString()]})]}),i.cost!==void 0&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Cost:"}),n.jsxs("span",{className:"font-medium",children:["$",i.cost.toLocaleString()]})]}),i.mitigationCost!==void 0&&i.mitigationCost>0&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Mitigation Cost:"}),n.jsxs("span",{className:"font-medium",children:["$",i.mitigationCost.toLocaleString()]})]}),i.horizonMonths!==void 0&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Time Window:"}),n.jsxs("span",{className:"font-medium",children:[i.horizonMonths," months"]})]})]}),l&&n.jsxs("div",{className:"pt-3 border-t border-border",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsx(Or,{className:"w-3 h-3"}),n.jsxs("span",{children:[((f=i.partners)==null?void 0:f.length)||0," partner",((m=i.partners)==null?void 0:m.length)!==1?"s":""," linked"]})]}),o.level==="High"&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-orange-600 dark:text-orange-400 mt-2",children:[n.jsx(tn,{className:"w-3 h-3"}),n.jsx("span",{children:"High credit link risk"})]})]}),r&&s&&n.jsx("div",{className:"pt-3 border-t border-border space-y-2",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Xke,{decisionId:r,optionId:i.id,optionLabel:i.label,currentMetrics:{var95:(p=a==null?void 0:a.find(v=>v.optionId===i.id))==null?void 0:p.var95,raroc:(g=a==null?void 0:a.find(v=>v.optionId===i.id))==null?void 0:g.raroc,ev:(b=a==null?void 0:a.find(v=>v.optionId===i.id))==null?void 0:b.ev,creditRiskScore:o.score},onAuditEvent:s}),n.jsx(Jke,{decisionId:r,optionId:i.id,optionLabel:i.label,onAuditEvent:s})]})})]})]},i.id)})})}const aE="retina:distribution-lists";function Wh(e){const t=`${aE}:${e}`,r=localStorage.getItem(t);return r?JSON.parse(r):[]}function sE(e,t){const r=Wh(e),a=r.findIndex(i=>i.id===t.id);a>=0?r[a]={...t,updatedAt:new Date().toISOString()}:r.push(t);const s=`${aE}:${e}`;localStorage.setItem(s,JSON.stringify(r))}function Qke(e,t){const a=Wh(e).filter(i=>i.id!==t),s=`${aE}:${e}`;localStorage.setItem(s,JSON.stringify(a))}function iE(e,t){return Wh(e).find(a=>a.id===t)}function vY(e,t,r,a){const s={id:`list-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:t,description:r,recipients:a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return sE(e,s),s}function e3e(e,t,r){const a=iE(e,t);!a||a.recipients.some(i=>i.email===r.email)||(a.recipients.push(r),sE(e,a))}function t3e(e,t,r){const a=iE(e,t);a&&(a.recipients=a.recipients.filter(s=>s.email!==r),sE(e,a))}function p$(e,t){const r=[],a=new Set;return t.forEach(s=>{const i=iE(e,s);i&&i.recipients.forEach(o=>{a.has(o.email)||(r.push(o),a.add(o.email))})}),r}const r3e=[{name:"Board Members",description:"All board members and directors",recipients:[{email:"chair@example.com",name:"Board Chair",role:"Chair"},{email:"director1@example.com",name:"Director 1",role:"Director"},{email:"director2@example.com",name:"Director 2",role:"Director"}]},{name:"Executive Team",description:"C-suite executives",recipients:[{email:"ceo@example.com",name:"CEO",role:"CEO"},{email:"cfo@example.com",name:"CFO",role:"CFO"},{email:"cro@example.com",name:"CRO",role:"CRO"}]},{name:"Risk Committee",description:"Risk management committee members",recipients:[{email:"risk.chair@example.com",name:"Risk Chair",role:"Chair"},{email:"risk.member1@example.com",name:"Risk Member 1",role:"Member"},{email:"risk.member2@example.com",name:"Risk Member 2",role:"Member"}]},{name:"Audit Committee",description:"Audit committee members",recipients:[{email:"audit.chair@example.com",name:"Audit Chair",role:"Chair"},{email:"audit.member1@example.com",name:"Audit Member 1",role:"Member"}]}];function n3e(e){Wh(e).length>0||r3e.forEach(r=>{vY(e,r.name,r.description,r.recipients)})}function a3e({tenantId:e,onRecipientsSelected:t,selectedRecipients:r=[]}){const[a,s]=N.useState(!1),[i,o]=N.useState(Wh(e)),[l,d]=N.useState([]),[u,f]=N.useState(!1),[m,p]=N.useState(null),[g,b]=N.useState(""),[v,y]=N.useState(""),[j,_]=N.useState(""),[C,A]=N.useState(""),[S,T]=N.useState(""),O=()=>{o(Wh(e))},R=()=>{n3e(e),O()},M=()=>{g.trim()&&(vY(e,g,v,[]),O(),b(""),y(""),f(!1))},I=V=>{Qke(e,V),d(G=>G.filter(q=>q!==V)),O()},D=V=>{d(G=>G.includes(V)?G.filter(q=>q!==V):[...G,V])},$=V=>{if(!j.trim()||!C.trim())return;const G={email:j.trim(),name:C.trim(),role:S.trim()||void 0};e3e(e,V,G),O(),_(""),A(""),T(""),p(null)},K=(V,G)=>{t3e(e,V,G),O()},U=()=>{const V=p$(e,l);t(V),s(!1)},J=p$(e,l).length;return n.jsxs(Nr,{open:a,onOpenChange:s,children:[n.jsx(ld,{asChild:!0,children:n.jsxs(le,{variant:"outline",children:[n.jsx(Uo,{className:"w-4 h-4 mr-2"}),"Distribution Lists",r.length>0&&n.jsx(be,{variant:"secondary",className:"ml-2",children:r.length})]})}),n.jsxs(gr,{className:"max-w-4xl max-h-[90vh]",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Distribution Lists"}),n.jsx(Sr,{children:"Select distribution lists to add recipients"})]}),n.jsxs("div",{className:"space-y-4",children:[i.length===0&&n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("p",{className:"text-muted-foreground",children:"No distribution lists found"}),n.jsx(le,{onClick:R,children:"Initialize Default Lists"})]})})}),i.length>0&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.length," list(s) selected  ",J," ","recipient(s)"]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>f(!u),children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"New List"]})]}),u&&n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-base",children:"Create New List"})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"new-list-name",children:"List Name"}),n.jsx(et,{id:"new-list-name",value:g,onChange:V=>b(V.target.value),placeholder:"e.g., Stakeholders"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"new-list-description",children:"Description"}),n.jsx(ua,{id:"new-list-description",value:v,onChange:V=>y(V.target.value),placeholder:"Brief description",rows:2})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(le,{onClick:M,children:"Create"}),n.jsx(le,{variant:"outline",onClick:()=>f(!1),children:"Cancel"})]})]})]}),n.jsx(pu,{className:"h-[400px] pr-4",children:n.jsx("div",{className:"space-y-3",children:i.map(V=>n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[n.jsx(kl,{checked:l.includes(V.id),onCheckedChange:()=>D(V.id)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold",children:V.name}),n.jsx("div",{className:"text-sm text-muted-foreground",children:V.description}),n.jsxs(be,{variant:"outline",className:"mt-2",children:[V.recipients.length," recipient(s)"]})]})]}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>I(V.id),children:n.jsx(mo,{className:"w-4 h-4"})})]})}),V.recipients.length>0&&n.jsx(Re,{children:n.jsx("div",{className:"space-y-2",children:V.recipients.map(G=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:G.name}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[G.email,G.role&&`  ${G.role}`]})]}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>K(V.id,G.email),children:n.jsx(Ui,{className:"w-3 h-3"})})]},G.email))})}),n.jsx(Re,{className:"pt-0",children:m===V.id?n.jsxs("div",{className:"space-y-3 p-3 border border-border rounded-lg",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:`email-${V.id}`,children:"Email"}),n.jsx(et,{id:`email-${V.id}`,type:"email",value:j,onChange:G=>_(G.target.value),placeholder:"email@example.com"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:`name-${V.id}`,children:"Name"}),n.jsx(et,{id:`name-${V.id}`,value:C,onChange:G=>A(G.target.value),placeholder:"Full Name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:`role-${V.id}`,children:"Role (optional)"}),n.jsx(et,{id:`role-${V.id}`,value:S,onChange:G=>T(G.target.value),placeholder:"e.g., Director"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(le,{size:"sm",onClick:()=>$(V.id),children:"Add"}),n.jsx(le,{size:"sm",variant:"outline",onClick:()=>p(null),children:"Cancel"})]})]}):n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>p(V.id),children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Add Recipient"]})})]},V.id))})}),n.jsx(ja,{}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:[J," recipient(s) will be added"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(le,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),n.jsxs(le,{onClick:U,disabled:J===0,children:[n.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Add Recipients"]})]})]})]})]})]})}const yY="retina:email-schedules";function s3e(e){const t=`${yY}:${e}`,r=localStorage.getItem(t);return r?JSON.parse(r):[]}function i3e(e){const t=s3e(e.tenantId),r=t.findIndex(i=>i.id===e.id),a={...e,updatedAt:new Date().toISOString(),nextRun:jY(e)};r>=0?t[r]=a:t.push(a);const s=`${yY}:${e.tenantId}`;localStorage.setItem(s,JSON.stringify(t))}function bY(e,t,r,a,s,i,o,l={}){const d=new Date,u={id:`schedule-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,tenantId:e,name:t,description:l.description||"",frequency:r,startDate:l.startDate||d.toISOString(),endDate:l.endDate,time:l.time||"09:00",dayOfWeek:l.dayOfWeek,dayOfMonth:l.dayOfMonth,monthOfQuarter:l.monthOfQuarter,recipients:a,subject:s,template:i,decisionId:l.decisionId,includeAttachments:l.includeAttachments??!0,enabled:!0,runCount:0,createdAt:d.toISOString(),updatedAt:d.toISOString(),createdBy:o};return u.nextRun=jY(u),i3e(u),u}function jY(e){const t=new Date,[r,a]=e.time.split(":").map(Number);let s=new Date(e.startDate);switch(s.setHours(r,a,0,0),s<t&&(s=new Date(t),s.setHours(r,a,0,0)),e.frequency){case"once":return s.toISOString();case"daily":s<t&&s.setDate(s.getDate()+1);break;case"weekly":if(e.dayOfWeek!==void 0)for(;s.getDay()!==e.dayOfWeek||s<t;)s.setDate(s.getDate()+1);break;case"monthly":if(e.dayOfMonth!==void 0)for(;s.getDate()!==e.dayOfMonth||s<t;)s.setDate(s.getDate()+1);break;case"quarterly":const i=s.getMonth(),o=Math.floor(i/3)*3;s.setMonth(o+(e.monthOfQuarter||1)-1),s.setDate(1),s<t&&s.setMonth(s.getMonth()+3);break}return e.endDate&&s>new Date(e.endDate)?e.endDate:s.toISOString()}function o3e(e){switch(e.frequency){case"once":return"One time";case"daily":return"Daily";case"weekly":return`Weekly on ${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.dayOfWeek||0]}`;case"monthly":return`Monthly on day ${e.dayOfMonth||1}`;case"quarterly":return`Quarterly (month ${e.monthOfQuarter||1} of quarter)`;default:return e.frequency}}function l3e(e){var r,a,s;const t=[];return(r=e.name)!=null&&r.trim()||t.push("Schedule name is required"),(!e.recipients||e.recipients.length===0)&&t.push("At least one recipient is required"),(a=e.subject)!=null&&a.trim()||t.push("Email subject is required"),(s=e.template)!=null&&s.trim()||t.push("Email template is required"),e.frequency==="weekly"&&e.dayOfWeek===void 0&&t.push("Day of week is required for weekly schedules"),e.frequency==="monthly"&&e.dayOfMonth===void 0&&t.push("Day of month is required for monthly schedules"),e.frequency==="quarterly"&&e.monthOfQuarter===void 0&&t.push("Month of quarter is required for quarterly schedules"),t}function c3e({tenantId:e,decisionTitle:t,recipients:r,template:a,onScheduleCreated:s,onAuditEvent:i}){const[o,l]=N.useState(!1),[d,u]=N.useState(`${t} - Recurring Report`),[f,m]=N.useState(""),[p,g]=N.useState("weekly"),[b,v]=N.useState("09:00"),[y,j]=N.useState(1),[_,C]=N.useState(1),[A,S]=N.useState(1),[T,O]=N.useState(`Board Summary: ${t}`),[R,M]=N.useState([]),I=()=>{const K=l3e({name:d,frequency:p,dayOfWeek:p==="weekly"?y:void 0,dayOfMonth:p==="monthly"?_:void 0,monthOfQuarter:p==="quarterly"?A:void 0,recipients:r,subject:T,template:a});if(K.length>0){M(K);return}const U=bY(e,d,p,r,T,a,"current-user",{description:f,time:b,dayOfWeek:p==="weekly"?y:void 0,dayOfMonth:p==="monthly"?_:void 0,monthOfQuarter:p==="quarterly"?A:void 0,includeAttachments:!0});i("email.schedule.created",{scheduleId:U.id,scheduleName:U.name,frequency:U.frequency,recipientCount:U.recipients.length}),s(U.id),l(!1),M([])},D={frequency:p,dayOfWeek:y,dayOfMonth:_,monthOfQuarter:A};return n.jsxs(Nr,{open:o,onOpenChange:l,children:[n.jsx(ld,{asChild:!0,children:n.jsxs(le,{variant:"outline",children:[n.jsx(vc,{className:"w-4 h-4 mr-2"}),"Schedule Recurring Email"]})}),n.jsxs(gr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Schedule Recurring Email"}),n.jsx(Sr,{children:"Set up automatic email delivery for board summaries"})]}),n.jsxs("div",{className:"space-y-6",children:[R.length>0&&n.jsx(Ae,{className:"border-red-500 bg-red-50 dark:bg-red-950",children:n.jsx(Re,{className:"pt-6",children:n.jsx("div",{className:"space-y-1",children:R.map(($,K)=>n.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400",children:[" ",$]},K))})})}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-base",children:"Schedule Details"})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"schedule-name",children:"Schedule Name"}),n.jsx(et,{id:"schedule-name",value:d,onChange:$=>u($.target.value),placeholder:"e.g., Weekly Board Report"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"schedule-description",children:"Description (optional)"}),n.jsx(ua,{id:"schedule-description",value:f,onChange:$=>m($.target.value),placeholder:"Brief description of this schedule",rows:2})]})]})]}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-base",children:"Frequency"})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"frequency",children:"How often?"}),n.jsxs(Et,{value:p,onValueChange:$=>g($),children:[n.jsx(kt,{id:"frequency",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"once",children:"One Time"}),n.jsx(we,{value:"daily",children:"Daily"}),n.jsx(we,{value:"weekly",children:"Weekly"}),n.jsx(we,{value:"monthly",children:"Monthly"}),n.jsx(we,{value:"quarterly",children:"Quarterly"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"time",children:"Time"}),n.jsx(et,{id:"time",type:"time",value:b,onChange:$=>v($.target.value)})]}),p==="weekly"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"day-of-week",children:"Day of Week"}),n.jsxs(Et,{value:y.toString(),onValueChange:$=>j(parseInt($)),children:[n.jsx(kt,{id:"day-of-week",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"0",children:"Sunday"}),n.jsx(we,{value:"1",children:"Monday"}),n.jsx(we,{value:"2",children:"Tuesday"}),n.jsx(we,{value:"3",children:"Wednesday"}),n.jsx(we,{value:"4",children:"Thursday"}),n.jsx(we,{value:"5",children:"Friday"}),n.jsx(we,{value:"6",children:"Saturday"})]})]})]}),p==="monthly"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"day-of-month",children:"Day of Month"}),n.jsxs(Et,{value:_.toString(),onValueChange:$=>C(parseInt($)),children:[n.jsx(kt,{id:"day-of-month",children:n.jsx(Tt,{})}),n.jsx(Ot,{children:Array.from({length:31},($,K)=>K+1).map($=>n.jsx(we,{value:$.toString(),children:$},$))})]})]}),p==="quarterly"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"month-of-quarter",children:"Month of Quarter"}),n.jsxs(Et,{value:A.toString(),onValueChange:$=>S(parseInt($)),children:[n.jsx(kt,{id:"month-of-quarter",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"1",children:"First Month"}),n.jsx(we,{value:"2",children:"Second Month"}),n.jsx(we,{value:"3",children:"Third Month"})]})]})]})]})]}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-base",children:"Email Details"})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"subject",children:"Subject"}),n.jsx(et,{id:"subject",value:T,onChange:$=>O($.target.value),placeholder:"Email subject line"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Recipients"}),n.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-1",children:[r.map($=>n.jsx("div",{className:"text-sm",children:$},$)),n.jsxs(be,{variant:"outline",className:"mt-2",children:[r.length," recipient(s)"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Template"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:a})]})]})]}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-base",children:"Schedule Preview"})}),n.jsx(Re,{children:n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rh,{className:"w-4 h-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:o3e(D)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vc,{className:"w-4 h-4 text-muted-foreground"}),n.jsxs("span",{children:["at ",b]})]}),n.jsxs("div",{className:"text-muted-foreground",children:["Emails will be sent to ",r.length," recipient(s)"]})]})})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx(le,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),n.jsx(le,{onClick:I,children:"Create Schedule"})]})]})]})]})}const g$=[{id:"executive",name:"Executive Summary",description:"High-level overview for C-suite",subject:"Board Decision Summary: {title}",message:`Please find attached the executive summary for the recent board decision on {title}.

This summary includes key metrics, risk factors, and strategic recommendations.

Best regards,
Decision Support Team`},{id:"technical",name:"Technical Report",description:"Detailed analysis for technical teams",subject:"Technical Analysis: {title}",message:`Attached is the comprehensive technical analysis for {title}.

This report includes detailed metrics, sensitivity analysis, and risk assessments.

Please review and provide feedback.

Regards,
Analytics Team`},{id:"stakeholder",name:"Stakeholder Update",description:"General update for stakeholders",subject:"Decision Update: {title}",message:`We're sharing an update on the recent decision regarding {title}.

The attached summary provides an overview of the decision rationale and expected outcomes.

Thank you,
Project Team`}];function d3e({open:e,onOpenChange:t,decisionTitle:r,summary:a,branding:s,onSendEmail:i,onAuditEvent:o=()=>{}}){const{tenant:l}=Fr(),[d,u]=N.useState([]),[f,m]=N.useState([]),[p,g]=N.useState(""),[b,v]=N.useState("executive"),[y,j]=N.useState(""),[_,C]=N.useState(""),A=g$.find(I=>I.id===b),S=()=>{p&&p.includes("@")&&(d.includes(p)||u([...d,p]),g(""))},T=I=>{u(d.filter(D=>D!==I))},O=()=>{const I=[...d,...f.map(U=>U.email)],D=Array.from(new Set(I));if(D.length===0){alert("Please add at least one recipient");return}const $=y||(A==null?void 0:A.subject.replace("{title}",r))||"",K=_||(A==null?void 0:A.message.replace(/{title}/g,r))||"";i(D,$,K,b),u([]),m([]),g(""),j(""),C(""),t(!1)},R=I=>{m(I)},M=d.length+f.length;return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-2xl",children:[n.jsxs(xr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(Xh,{className:"w-5 h-5"}),"Email Board Summary"]}),n.jsx(Sr,{children:"Send the board summary to stakeholders via email"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Email Template"}),n.jsxs(Et,{value:b,onValueChange:v,children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsx(Ot,{children:g$.map(I=>n.jsx(we,{value:I.id,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:I.name}),n.jsx("span",{className:"text-xs text-muted-foreground",children:I.description})]})},I.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ne,{children:"Recipients"}),n.jsx(a3e,{tenantId:l.tenantId,onRecipientsSelected:R,selectedRecipients:f})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(et,{type:"email",placeholder:"Enter email address",value:p,onChange:I=>g(I.target.value),onKeyPress:I=>{I.key==="Enter"&&(I.preventDefault(),S())}}),n.jsx(le,{type:"button",variant:"outline",size:"icon",onClick:S,disabled:!p||!p.includes("@"),children:n.jsx(Pn,{className:"w-4 h-4"})})]}),(d.length>0||f.length>0)&&n.jsxs("div",{className:"space-y-2 mt-2",children:[d.length>0&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Manual Recipients"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(I=>n.jsxs(be,{variant:"secondary",className:"gap-1",children:[I,n.jsx("button",{onClick:()=>T(I),className:"ml-1 hover:text-destructive",children:n.jsx(Ui,{className:"w-3 h-3"})})]},I))})]}),f.length>0&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"From Distribution Lists"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(I=>n.jsxs(be,{variant:"outline",className:"gap-1",children:[I.name," (",I.email,")"]},I.email))})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Total: ",M," recipient(s)"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Subject"}),n.jsx(et,{placeholder:A==null?void 0:A.subject.replace("{title}",r),value:y,onChange:I=>j(I.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Message"}),n.jsx(ua,{placeholder:A==null?void 0:A.message.replace(/{title}/g,r),value:_,onChange:I=>C(I.target.value),rows:6})]}),n.jsx("div",{className:"border-t border-border pt-4",children:n.jsx(c3e,{tenantId:l.tenantId,decisionTitle:r,recipients:[...d,...f.map(I=>I.email)],template:b,onScheduleCreated:I=>{o("email.schedule.created.from.summary",{scheduleId:I}),alert(`Schedule created: ${I}`)},onAuditEvent:o})}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs(le,{onClick:O,disabled:M===0,className:"flex-1",children:[n.jsx(xre,{className:"w-4 h-4 mr-2"}),"Send Email (",M,")"]}),n.jsx(le,{variant:"outline",onClick:()=>t(!1),children:"Cancel"})]})]})]})})}const u3e=[{id:"executive-summary",name:"Executive Summary",description:"High-level overview for C-suite and board members",audience:"executive",sections:{executiveSummary:!0,keyMetrics:!0,detailedMetrics:!1,sensitiveFactors:!0,partnerAnalysis:!0,riskAssessment:!0,recommendations:!0,technicalDetails:!1},styling:{primaryColor:"#0066cc",accentColor:"#00a3e0",headerStyle:"formal",includeCharts:!0,includeLogos:!0}},{id:"technical-report",name:"Technical Report",description:"Comprehensive analysis for technical teams and analysts",audience:"technical",sections:{executiveSummary:!0,keyMetrics:!0,detailedMetrics:!0,sensitiveFactors:!0,partnerAnalysis:!0,riskAssessment:!0,recommendations:!0,technicalDetails:!0},styling:{primaryColor:"#1a1a1a",accentColor:"#0066cc",headerStyle:"minimal",includeCharts:!0,includeLogos:!1}},{id:"stakeholder-update",name:"Stakeholder Update",description:"Balanced overview for general stakeholders",audience:"stakeholder",sections:{executiveSummary:!0,keyMetrics:!0,detailedMetrics:!1,sensitiveFactors:!0,partnerAnalysis:!1,riskAssessment:!0,recommendations:!0,technicalDetails:!1},styling:{primaryColor:"#0066cc",accentColor:"#00a3e0",headerStyle:"modern",includeCharts:!0,includeLogos:!0}},{id:"board-presentation",name:"Board Presentation",description:"Formal report for board meetings",audience:"board",sections:{executiveSummary:!0,keyMetrics:!0,detailedMetrics:!1,sensitiveFactors:!0,partnerAnalysis:!0,riskAssessment:!0,recommendations:!0,technicalDetails:!1},styling:{primaryColor:"#1a1a1a",accentColor:"#0066cc",headerStyle:"formal",includeCharts:!0,includeLogos:!0}},{id:"risk-committee",name:"Risk Committee Report",description:"Detailed risk analysis for risk committee meetings",audience:"board",sections:{executiveSummary:!0,keyMetrics:!0,detailedMetrics:!0,sensitiveFactors:!0,partnerAnalysis:!0,riskAssessment:!0,recommendations:!0,technicalDetails:!0},styling:{primaryColor:"#dc2626",accentColor:"#ef4444",headerStyle:"formal",includeCharts:!0,includeLogos:!0}},{id:"investor-update",name:"Investor Update",description:"Quarterly update for investors and shareholders",audience:"stakeholder",sections:{executiveSummary:!0,keyMetrics:!0,detailedMetrics:!1,sensitiveFactors:!1,partnerAnalysis:!1,riskAssessment:!0,recommendations:!1,technicalDetails:!1},styling:{primaryColor:"#059669",accentColor:"#10b981",headerStyle:"modern",includeCharts:!0,includeLogos:!0}},{id:"audit-compliance",name:"Audit & Compliance",description:"Comprehensive report for audit and compliance teams",audience:"technical",sections:{executiveSummary:!0,keyMetrics:!0,detailedMetrics:!0,sensitiveFactors:!0,partnerAnalysis:!0,riskAssessment:!0,recommendations:!0,technicalDetails:!0},styling:{primaryColor:"#7c3aed",accentColor:"#a78bfa",headerStyle:"minimal",includeCharts:!0,includeLogos:!1}},{id:"quick-summary",name:"Quick Summary",description:"One-page summary for quick reviews",audience:"executive",sections:{executiveSummary:!0,keyMetrics:!0,detailedMetrics:!1,sensitiveFactors:!1,partnerAnalysis:!1,riskAssessment:!1,recommendations:!0,technicalDetails:!1},styling:{primaryColor:"#0066cc",accentColor:"#00a3e0",headerStyle:"modern",includeCharts:!1,includeLogos:!0}}],f3e={companyName:"Retina Intelligence Suite",primaryColor:"#0066cc",secondaryColor:"#00a3e0",accentColor:"#0099cc",fontFamily:"Inter, system-ui, sans-serif"};function h3e(e){const t=`retina:templates:${e}`,r=localStorage.getItem(t);return r?JSON.parse(r):[]}function m3e(e){const t=h3e(e),{INDUSTRY_TEMPLATES:r}=require("@/polymet/data/industry-templates");return[...u3e,...r,...t]}function p3e(e,t){const r=`retina:branding:${e}`;localStorage.setItem(r,JSON.stringify(t))}function g3e(e){const t=`retina:branding:${e}`,r=localStorage.getItem(t);return r?JSON.parse(r):f3e}function x3e({tenantId:e,currentBranding:t,onBrandingUpdate:r,onAuditEvent:a}){const[s,i]=N.useState(!1),[o,l]=N.useState(t),d=()=>{p3e(e,o),r(o),a("branding.config.updated",{tenantId:e,companyName:o.companyName,hasLogo:!!o.logoUrl}),i(!1)},u=()=>{l(t)};return n.jsxs(Nr,{open:s,onOpenChange:i,children:[n.jsx(ld,{asChild:!0,children:n.jsxs(le,{variant:"outline",size:"sm",children:[n.jsx(Wb,{className:"w-4 h-4 mr-2"}),"Customize Branding"]})}),n.jsxs(gr,{className:"max-w-2xl",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Branding Configuration"}),n.jsx(Sr,{children:"Customize your company branding for board reports and exports"})]}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"companyName",children:"Company Name"}),n.jsx(et,{id:"companyName",value:o.companyName,onChange:f=>l({...o,companyName:f.target.value}),placeholder:"Your Company Name"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"This will appear in report headers and footers"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"logoUrl",children:"Logo URL (Optional)"}),n.jsx(et,{id:"logoUrl",value:o.logoUrl||"",onChange:f=>l({...o,logoUrl:f.target.value}),placeholder:"https://example.com/logo.png"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"URL to your company logo (PNG, JPG, or SVG)"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(Ne,{children:"Brand Colors"}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"primaryColor",className:"text-xs",children:"Primary Color"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(et,{id:"primaryColor",type:"color",value:o.primaryColor,onChange:f=>l({...o,primaryColor:f.target.value}),className:"w-16 h-10 p-1 cursor-pointer"}),n.jsx(et,{value:o.primaryColor,onChange:f=>l({...o,primaryColor:f.target.value}),placeholder:"#0066cc",className:"flex-1"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"secondaryColor",className:"text-xs",children:"Secondary Color"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(et,{id:"secondaryColor",type:"color",value:o.secondaryColor,onChange:f=>l({...o,secondaryColor:f.target.value}),className:"w-16 h-10 p-1 cursor-pointer"}),n.jsx(et,{value:o.secondaryColor,onChange:f=>l({...o,secondaryColor:f.target.value}),placeholder:"#00a3e0",className:"flex-1"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"accentColor",className:"text-xs",children:"Accent Color"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(et,{id:"accentColor",type:"color",value:o.accentColor,onChange:f=>l({...o,accentColor:f.target.value}),className:"w-16 h-10 p-1 cursor-pointer"}),n.jsx(et,{value:o.accentColor,onChange:f=>l({...o,accentColor:f.target.value}),placeholder:"#0099cc",className:"flex-1"})]})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Colors used for headers, borders, and accents in reports"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"fontFamily",children:"Font Family (Optional)"}),n.jsx(et,{id:"fontFamily",value:o.fontFamily||"",onChange:f=>l({...o,fontFamily:f.target.value}),placeholder:"Inter, system-ui, sans-serif"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"CSS font family string for report text"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Preview"}),n.jsxs("div",{className:"p-6 border border-border rounded-lg",style:{borderColor:o.primaryColor,fontFamily:o.fontFamily||"inherit"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-2xl font-bold",style:{color:o.primaryColor},children:o.companyName}),o.logoUrl&&n.jsx("img",{src:o.logoUrl,alt:"Logo",className:"h-12 max-w-[200px] object-contain",onError:f=>{f.target.style.display="none"}})]}),n.jsx("div",{className:"h-2 rounded",style:{backgroundColor:o.accentColor}}),n.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"This is how your branding will appear in board reports"})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(le,{variant:"outline",onClick:u,children:"Reset"}),n.jsxs(le,{onClick:d,children:[n.jsx(su,{className:"w-4 h-4 mr-2"}),"Save Branding"]})]})]})]})}const v3e=e=>({intermediate:{spacing:{section:"24px",card:"16px",element:"12px",inline:"8px"},typography:{title:"24px",heading:"18px",body:"14px",caption:"12px",lineHeight:1.6},border:{width:"1px",radius:"8px"},shadow:{card:"0 2px 8px rgba(0,0,0,0.08)",hover:"0 4px 12px rgba(0,0,0,0.12)"},animation:{duration:"200ms",easing:"ease-in-out"}},advanced:{spacing:{section:"16px",card:"12px",element:"8px",inline:"4px"},typography:{title:"20px",heading:"16px",body:"13px",caption:"11px",lineHeight:1.4},border:{width:"1px",radius:"4px"},shadow:{card:"0 1px 4px rgba(0,0,0,0.06)",hover:"0 2px 8px rgba(0,0,0,0.1)"},animation:{duration:"150ms",easing:"ease-out"}}})[e],wY={type:"executive",name:"Executive Summary",description:"Board-ready report with clear insights and friendly language",layout:{pageSize:"letter",orientation:"portrait",margins:{top:72,right:72,bottom:72,left:72},columnCount:1},typography:{titleSize:24,headingSize:18,bodySize:14,captionSize:12,lineHeight:1.6,fontFamily:"Inter, system-ui, sans-serif"},content:{includeExecutiveSummary:!0,includeDetailedMetrics:!1,includeParameterAppendix:!1,includeModelSnapshots:!1,includeAssumptions:!0,includeGuardrails:!0,includeSensitivityAnalysis:!1,includePartnerDetails:!0,maxTableRows:10,useFriendlyTitles:!0,useDescriptiveCaptions:!0},visual:{includeCharts:!0,chartSize:"large",includeSparklines:!1,colorScheme:"color",tableDensity:"comfortable"},branding:{includeLogo:!0,includeWatermark:!1,includeFooter:!0}},NY={type:"technical",name:"Technical Report",description:"Comprehensive report with full data and model details",layout:{pageSize:"letter",orientation:"landscape",margins:{top:36,right:36,bottom:36,left:36},columnCount:2},typography:{titleSize:20,headingSize:16,bodySize:13,captionSize:11,lineHeight:1.4,fontFamily:"Inter, system-ui, sans-serif"},content:{includeExecutiveSummary:!1,includeDetailedMetrics:!0,includeParameterAppendix:!0,includeModelSnapshots:!0,includeAssumptions:!0,includeGuardrails:!0,includeSensitivityAnalysis:!0,includePartnerDetails:!0,maxTableRows:null,useFriendlyTitles:!1,useDescriptiveCaptions:!1},visual:{includeCharts:!0,chartSize:"small",includeSparklines:!0,colorScheme:"color",tableDensity:"compact"},branding:{includeLogo:!0,includeWatermark:!0,includeFooter:!0}},SY={type:"compliance",name:"Compliance Report",description:"Structured report for compliance review with full audit trail",layout:{pageSize:"letter",orientation:"portrait",margins:{top:54,right:54,bottom:54,left:54},columnCount:1},typography:{titleSize:22,headingSize:17,bodySize:13,captionSize:11,lineHeight:1.5,fontFamily:"Inter, system-ui, sans-serif"},content:{includeExecutiveSummary:!0,includeDetailedMetrics:!0,includeParameterAppendix:!0,includeModelSnapshots:!0,includeAssumptions:!0,includeGuardrails:!0,includeSensitivityAnalysis:!0,includePartnerDetails:!0,maxTableRows:50,useFriendlyTitles:!1,useDescriptiveCaptions:!0},visual:{includeCharts:!0,chartSize:"medium",includeSparklines:!1,colorScheme:"color",tableDensity:"normal"},branding:{includeLogo:!0,includeWatermark:!0,includeFooter:!0}},CY={type:"audit",name:"Audit Report",description:"Comprehensive report for audit purposes with complete data",layout:{pageSize:"letter",orientation:"landscape",margins:{top:36,right:36,bottom:36,left:36},columnCount:2},typography:{titleSize:18,headingSize:15,bodySize:12,captionSize:10,lineHeight:1.3,fontFamily:"Inter, system-ui, sans-serif"},content:{includeExecutiveSummary:!1,includeDetailedMetrics:!0,includeParameterAppendix:!0,includeModelSnapshots:!0,includeAssumptions:!0,includeGuardrails:!0,includeSensitivityAnalysis:!0,includePartnerDetails:!0,maxTableRows:null,useFriendlyTitles:!1,useDescriptiveCaptions:!1},visual:{includeCharts:!0,chartSize:"small",includeSparklines:!0,colorScheme:"grayscale",tableDensity:"compact"},branding:{includeLogo:!0,includeWatermark:!0,includeFooter:!0}},Ck=e=>({executive:wY,technical:NY,compliance:SY,audit:CY})[e],y3e=()=>[wY,NY,SY,CY],b3e=e=>{const t=e.type==="executive"?"intermediate":"advanced",r=v3e(t);return{...e,typography:{...e.typography,titleSize:parseInt(r.typography.title),headingSize:parseInt(r.typography.heading),bodySize:parseInt(r.typography.body),captionSize:parseInt(r.typography.caption),lineHeight:r.typography.lineHeight}}},j3e=(e,t)=>({...e,branding:{...e.branding,customColors:{primary:t.primaryColor,secondary:t.secondaryColor,accent:t.accentColor}}}),Xc=(e,t,r)=>r.content.useFriendlyTitles?t:e,z_=(e,t)=>t.content.maxTableRows===null?e:e.slice(0,t.content.maxTableRows),ls={executiveSummary:{technical:"Executive Summary",friendly:"Key Insights at a Glance"},metrics:{technical:"Simulation Results",friendly:"What the Numbers Tell Us"},sensitivity:{technical:"Sensitivity Analysis",friendly:"What Matters Most"},assumptions:{technical:"Key Assumptions",friendly:"What We're Assuming"},guardrails:{technical:"Risk Guardrails",friendly:"Safety Limits"},partners:{technical:"Partner Exposure",friendly:"Who We're Working With"},modelSnapshot:{technical:"Model Configuration",friendly:"How We Ran the Analysis"}},w3e=({open:e,onOpenChange:t,decisionTitle:r,onExport:a,tenantBranding:s})=>{const{tenant:i}=Fr(),[o,l]=N.useState("executive"),[d,u]=N.useState("pdf"),[f,m]=N.useState(!0),[p,g]=N.useState(!0),[b,v]=N.useState(""),y=b3e(Ck(o)),j=s?j3e(y,s):y,_=()=>{a({preset:j,format:d,tenantBranding:s,includeTimestamp:f,includeUserInfo:p,filename:b||void 0}),t(!1)};return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Export Decision Report"}),n.jsx(Sr,{children:"Choose a preset and format for your report. Both presets use theme tokens for brand consistency."})]}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ne,{className:"text-base font-semibold",children:"Report Preset"}),n.jsxs(nu,{value:o,onValueChange:C=>l(C),children:[n.jsxs("div",{className:`flex items-start space-x-3 rounded-lg border-2 p-4 cursor-pointer transition-colors ${o==="executive"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>l("executive"),children:[n.jsx(yi,{value:"executive",id:"executive",className:"mt-1"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ne,{htmlFor:"executive",className:"text-base font-semibold cursor-pointer",children:"Executive Summary"}),n.jsx(be,{variant:"default",children:"Intermediate"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Board-ready report with clear insights and friendly language. Larger margins, descriptive captions, limited tables (top 10), and plain-language titles."}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[n.jsxs(be,{variant:"outline",className:"text-xs",children:[n.jsx(wA,{className:"w-3 h-3 mr-1"}),"Comfortable Layout"]}),n.jsxs(be,{variant:"outline",className:"text-xs",children:[n.jsx(SA,{className:"w-3 h-3 mr-1"}),"Friendly Titles"]}),n.jsxs(be,{variant:"outline",className:"text-xs",children:[n.jsx(cs,{className:"w-3 h-3 mr-1"}),"Key Insights"]})]})]})]}),n.jsxs("div",{className:`flex items-start space-x-3 rounded-lg border-2 p-4 cursor-pointer transition-colors ${o==="technical"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>l("technical"),children:[n.jsx(yi,{value:"technical",id:"technical",className:"mt-1"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ne,{htmlFor:"technical",className:"text-base font-semibold cursor-pointer",children:"Technical Report"}),n.jsx(be,{variant:"secondary",children:"Advanced"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Comprehensive report with full data and model details. Dense tables, parameter appendices, model snapshots, and technical terminology."}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[n.jsxs(be,{variant:"outline",className:"text-xs",children:[n.jsx(wA,{className:"w-3 h-3 mr-1"}),"Dense Layout"]}),n.jsxs(be,{variant:"outline",className:"text-xs",children:[n.jsx(SA,{className:"w-3 h-3 mr-1"}),"Technical Terms"]}),n.jsxs(be,{variant:"outline",className:"text-xs",children:[n.jsx(cs,{className:"w-3 h-3 mr-1"}),"Full Details"]})]})]})]})]})]}),n.jsx(ja,{}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ne,{className:"text-base font-semibold",children:"Export Format"}),n.jsxs(nu,{value:d,onValueChange:C=>u(C),className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:`flex items-center space-x-3 rounded-lg border-2 p-3 cursor-pointer transition-colors ${d==="pdf"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>u("pdf"),children:[n.jsx(yi,{value:"pdf",id:"pdf"}),n.jsxs(Ne,{htmlFor:"pdf",className:"cursor-pointer flex items-center gap-2",children:[n.jsx(fte,{className:"w-4 h-4"}),"PDF"]})]}),n.jsxs("div",{className:`flex items-center space-x-3 rounded-lg border-2 p-3 cursor-pointer transition-colors ${d==="csv"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>u("csv"),children:[n.jsx(yi,{value:"csv",id:"csv"}),n.jsxs(Ne,{htmlFor:"csv",className:"cursor-pointer flex items-center gap-2",children:[n.jsx(cs,{className:"w-4 h-4"}),"CSV"]})]})]})]}),n.jsx(ja,{}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ne,{className:"text-base font-semibold",children:"Preset Preview"}),n.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Page Size:"})," ",n.jsx("span",{className:"font-medium",children:y.layout.pageSize.toUpperCase()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Orientation:"})," ",n.jsx("span",{className:"font-medium",children:y.layout.orientation})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Margins:"})," ",n.jsxs("span",{className:"font-medium",children:[y.layout.margins.top,"px"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Table Rows:"})," ",n.jsx("span",{className:"font-medium",children:y.content.maxTableRows??"Unlimited"})]})]}),n.jsx(ja,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium",children:"Section Title Examples:"}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ba,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-muted-foreground",children:"Metrics:"}),n.jsx("span",{className:"font-medium",children:Xc(ls.metrics.technical,ls.metrics.friendly,y)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ba,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-muted-foreground",children:"Guardrails:"}),n.jsx("span",{className:"font-medium",children:Xc(ls.guardrails.technical,ls.guardrails.friendly,y)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ba,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-muted-foreground",children:"Partners:"}),n.jsx("span",{className:"font-medium",children:Xc(ls.partners.technical,ls.partners.friendly,y)})]})]})]}),s&&n.jsxs(n.Fragment,{children:[n.jsx(ja,{}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(kte,{className:"w-4 h-4 text-muted-foreground"}),n.jsx("span",{className:"text-muted-foreground",children:"Tenant Logo:"}),n.jsx("span",{className:"font-medium",children:s.companyName}),n.jsx(be,{variant:"outline",className:"ml-auto",children:"Included"})]})]})]})]}),n.jsx(ja,{}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ne,{className:"text-base font-semibold",children:"Additional Options"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(Ne,{htmlFor:"timestamp",children:"Include Timestamp"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Add generation date and time to the report"})]}),n.jsx(Pa,{id:"timestamp",checked:f,onCheckedChange:m})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(Ne,{htmlFor:"userinfo",children:"Include User Info"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your name and role to the report"})]}),n.jsx(Pa,{id:"userinfo",checked:p,onCheckedChange:g})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"filename",children:"Custom Filename (optional)"}),n.jsx(et,{id:"filename",placeholder:`${r.toLowerCase().replace(/\s+/g,"-")}-report`,value:b,onChange:C=>v(C.target.value)})]})]})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),n.jsxs(le,{onClick:_,children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Export Report"]})]})]})})},N3e=({open:e,onOpenChange:t,onSavePreset:r,tenantId:a})=>{const[s,i]=N.useState("executive"),[o,l]=N.useState(Ck("executive")),d=m=>{i(m),l(Ck(m))},u=(m,p)=>{const g=m.split("."),b={...o};let v=b;for(let y=0;y<g.length-1;y++)v[g[y]]={...v[g[y]]},v=v[g[y]];v[g[g.length-1]]=p,l(b)},f=()=>{r(o),t(!1)};return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Customize Export Preset"}),n.jsx(Sr,{children:"Create a custom export preset by starting from a template and adjusting settings to match your needs."})]}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ne,{className:"text-base font-semibold",children:"Start from Template"}),n.jsxs(Et,{value:s,onValueChange:m=>d(m),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsx(Ot,{children:y3e().map(m=>n.jsx(we,{value:m.type,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:m.name}),n.jsx(be,{variant:"outline",className:"text-xs",children:m.type})]})},m.type))})]})]}),n.jsx(ja,{}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ne,{className:"text-base font-semibold",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"preset-name",children:"Preset Name"}),n.jsx(et,{id:"preset-name",value:o.name,onChange:m=>u("name",m.target.value),placeholder:"My Custom Preset"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"preset-type",children:"Preset Type"}),n.jsx(et,{id:"preset-type",value:o.type,onChange:m=>u("type",m.target.value),placeholder:"custom"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"preset-description",children:"Description"}),n.jsx(ua,{id:"preset-description",value:o.description,onChange:m=>u("description",m.target.value),placeholder:"Describe the purpose of this preset...",rows:2})]})]}),n.jsx(ja,{}),n.jsxs(si,{defaultValue:"layout",className:"w-full",children:[n.jsxs(zs,{className:"grid w-full grid-cols-4",children:[n.jsxs(hr,{value:"layout",children:[n.jsx(wA,{className:"w-4 h-4 mr-2"}),"Layout"]}),n.jsxs(hr,{value:"typography",children:[n.jsx(SA,{className:"w-4 h-4 mr-2"}),"Typography"]}),n.jsxs(hr,{value:"content",children:[n.jsx(cs,{className:"w-4 h-4 mr-2"}),"Content"]}),n.jsxs(hr,{value:"visual",children:[n.jsx(Wb,{className:"w-4 h-4 mr-2"}),"Visual"]})]}),n.jsxs(Cr,{value:"layout",className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Page Size"}),n.jsxs(Et,{value:o.layout.pageSize,onValueChange:m=>u("layout.pageSize",m),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"letter",children:"Letter"}),n.jsx(we,{value:"a4",children:"A4"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Orientation"}),n.jsxs(Et,{value:o.layout.orientation,onValueChange:m=>u("layout.orientation",m),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"portrait",children:"Portrait"}),n.jsx(we,{value:"landscape",children:"Landscape"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Column Count"}),n.jsxs(Et,{value:o.layout.columnCount.toString(),onValueChange:m=>u("layout.columnCount",parseInt(m)),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"1",children:"1 Column"}),n.jsx(we,{value:"2",children:"2 Columns"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Margins (pixels)"}),n.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[n.jsx(et,{type:"number",placeholder:"Top",value:o.layout.margins.top,onChange:m=>u("layout.margins.top",parseInt(m.target.value))}),n.jsx(et,{type:"number",placeholder:"Right",value:o.layout.margins.right,onChange:m=>u("layout.margins.right",parseInt(m.target.value))}),n.jsx(et,{type:"number",placeholder:"Bottom",value:o.layout.margins.bottom,onChange:m=>u("layout.margins.bottom",parseInt(m.target.value))}),n.jsx(et,{type:"number",placeholder:"Left",value:o.layout.margins.left,onChange:m=>u("layout.margins.left",parseInt(m.target.value))})]})]})]}),n.jsx(Cr,{value:"typography",className:"space-y-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Title Size (px)"}),n.jsx(et,{type:"number",value:o.typography.titleSize,onChange:m=>u("typography.titleSize",parseInt(m.target.value))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Heading Size (px)"}),n.jsx(et,{type:"number",value:o.typography.headingSize,onChange:m=>u("typography.headingSize",parseInt(m.target.value))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Body Size (px)"}),n.jsx(et,{type:"number",value:o.typography.bodySize,onChange:m=>u("typography.bodySize",parseInt(m.target.value))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Caption Size (px)"}),n.jsx(et,{type:"number",value:o.typography.captionSize,onChange:m=>u("typography.captionSize",parseInt(m.target.value))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Line Height"}),n.jsx(et,{type:"number",step:"0.1",value:o.typography.lineHeight,onChange:m=>u("typography.lineHeight",parseFloat(m.target.value))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Font Family"}),n.jsx(et,{value:o.typography.fontFamily,onChange:m=>u("typography.fontFamily",m.target.value)})]})]})}),n.jsx(Cr,{value:"content",className:"space-y-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(Ne,{children:"Include Executive Summary"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"High-level overview section"})]}),n.jsx(Pa,{checked:o.content.includeExecutiveSummary,onCheckedChange:m=>u("content.includeExecutiveSummary",m)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(Ne,{children:"Include Detailed Metrics"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"All metrics including CVaR and utility"})]}),n.jsx(Pa,{checked:o.content.includeDetailedMetrics,onCheckedChange:m=>u("content.includeDetailedMetrics",m)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(Ne,{children:"Include Parameter Appendix"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Full parameter details"})]}),n.jsx(Pa,{checked:o.content.includeParameterAppendix,onCheckedChange:m=>u("content.includeParameterAppendix",m)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(Ne,{children:"Include Model Snapshots"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Model configuration and fingerprints"})]}),n.jsx(Pa,{checked:o.content.includeModelSnapshots,onCheckedChange:m=>u("content.includeModelSnapshots",m)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(Ne,{children:"Include Sensitivity Analysis"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Top sensitive factors"})]}),n.jsx(Pa,{checked:o.content.includeSensitivityAnalysis,onCheckedChange:m=>u("content.includeSensitivityAnalysis",m)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(Ne,{children:"Use Friendly Titles"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Plain-language section titles"})]}),n.jsx(Pa,{checked:o.content.useFriendlyTitles,onCheckedChange:m=>u("content.useFriendlyTitles",m)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(Ne,{children:"Use Descriptive Captions"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Detailed table captions"})]}),n.jsx(Pa,{checked:o.content.useDescriptiveCaptions,onCheckedChange:m=>u("content.useDescriptiveCaptions",m)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Max Table Rows"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(et,{type:"number",value:o.content.maxTableRows??"",onChange:m=>u("content.maxTableRows",m.target.value?parseInt(m.target.value):null),placeholder:"Unlimited"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"(leave empty for unlimited)"})]})]})]})}),n.jsx(Cr,{value:"visual",className:"space-y-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(Ne,{children:"Include Charts"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Visual data representations"})]}),n.jsx(Pa,{checked:o.visual.includeCharts,onCheckedChange:m=>u("visual.includeCharts",m)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Chart Size"}),n.jsxs(Et,{value:o.visual.chartSize,onValueChange:m=>u("visual.chartSize",m),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"small",children:"Small"}),n.jsx(we,{value:"medium",children:"Medium"}),n.jsx(we,{value:"large",children:"Large"})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(Ne,{children:"Include Sparklines"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Inline trend indicators"})]}),n.jsx(Pa,{checked:o.visual.includeSparklines,onCheckedChange:m=>u("visual.includeSparklines",m)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Color Scheme"}),n.jsxs(Et,{value:o.visual.colorScheme,onValueChange:m=>u("visual.colorScheme",m),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"color",children:"Color"}),n.jsx(we,{value:"grayscale",children:"Grayscale"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Table Density"}),n.jsxs(Et,{value:o.visual.tableDensity,onValueChange:m=>u("visual.tableDensity",m),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"compact",children:"Compact"}),n.jsx(we,{value:"normal",children:"Normal"}),n.jsx(we,{value:"comfortable",children:"Comfortable"})]})]})]})]})})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),n.jsxs(le,{onClick:f,children:[n.jsx(yp,{className:"w-4 h-4 mr-2"}),"Save Custom Preset"]})]})]})})},S3e=e=>{const{preset:t,data:r,tenantBranding:a,includeTimestamp:s,includeUserInfo:i}=e,{layout:o,typography:l,content:d,visual:u,branding:f}=t,m=`
    @page {
      size: ${o.pageSize} ${o.orientation};
      margin: ${o.margins.top}px ${o.margins.right}px ${o.margins.bottom}px ${o.margins.left}px;
    }

    body {
      font-family: ${l.fontFamily};
      font-size: ${l.bodySize}px;
      line-height: ${l.lineHeight};
      color: ${u.colorScheme==="grayscale"?"#333":"#1a1a1a"};
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 100%;
      ${o.columnCount===2?"column-count: 2; column-gap: 20px;":""}
    }

    .header-logo {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 3px solid ${(a==null?void 0:a.primaryColor)||"#3b82f6"};
      ${o.columnCount===2?"column-span: all;":""}
    }

    .company-name {
      font-size: ${l.titleSize}px;
      font-weight: bold;
      color: ${(a==null?void 0:a.primaryColor)||"#3b82f6"};
    }

    .logo {
      max-height: ${(a==null?void 0:a.logoHeight)||60}px;
      max-width: ${(a==null?void 0:a.logoWidth)||200}px;
    }

    h1 {
      font-size: ${l.titleSize}px;
      color: #1a1a1a;
      border-bottom: 3px solid ${(a==null?void 0:a.primaryColor)||"#3b82f6"};
      padding-bottom: 10px;
      margin-bottom: 20px;
      ${o.columnCount===2?"column-span: all;":""}
    }

    h2 {
      font-size: ${l.headingSize}px;
      color: ${(a==null?void 0:a.primaryColor)||"#3b82f6"};
      margin-top: 30px;
      margin-bottom: 15px;
      ${o.columnCount===2?"break-after: avoid;":""}
    }

    h3 {
      font-size: ${l.bodySize+2}px;
      color: #333;
      margin-top: 20px;
      margin-bottom: 10px;
    }

    .header-info {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 30px;
      ${o.columnCount===2?"column-span: all;":""}
    }

    .metric-grid {
      display: grid;
      grid-template-columns: repeat(${o.columnCount===2?"2":"3"}, 1fr);
      gap: 15px;
      margin: 20px 0;
      ${o.columnCount===2?"column-span: all;":""}
    }

    .metric-card {
      background: #f9f9f9;
      padding: ${u.tableDensity==="compact"?"10px":u.tableDensity==="comfortable"?"20px":"15px"};
      border-radius: 5px;
      border-left: 4px solid ${(a==null?void 0:a.accentColor)||"#8b5cf6"};
      break-inside: avoid;
    }

    .metric-label {
      font-size: ${l.captionSize}px;
      color: #666;
      text-transform: uppercase;
      margin-bottom: 5px;
    }

    .metric-value {
      font-size: ${l.headingSize+6}px;
      font-weight: bold;
      color: #1a1a1a;
    }

    .narrative {
      background: #fff;
      padding: ${u.tableDensity==="compact"?"12px":"20px"};
      border-left: 4px solid ${(a==null?void 0:a.accentColor)||"#8b5cf6"};
      margin: 20px 0;
      break-inside: avoid;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      font-size: ${l.bodySize-1}px;
      break-inside: avoid;
    }

    th, td {
      padding: ${u.tableDensity==="compact"?"8px":u.tableDensity==="comfortable"?"16px":"12px"};
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    th {
      background: #f5f5f5;
      font-weight: bold;
      font-size: ${l.captionSize}px;
      text-transform: uppercase;
    }

    .badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: ${l.captionSize}px;
      font-weight: bold;
    }

    .badge-high {
      background: ${u.colorScheme==="grayscale"?"#ddd":"#fee"};
      color: ${u.colorScheme==="grayscale"?"#333":"#c00"};
    }

    .badge-warning {
      background: ${u.colorScheme==="grayscale"?"#e5e5e5":"#fef3c7"};
      color: ${u.colorScheme==="grayscale"?"#333":"#92400e"};
    }

    .badge-success {
      background: ${u.colorScheme==="grayscale"?"#f5f5f5":"#d1fae5"};
      color: ${u.colorScheme==="grayscale"?"#333":"#065f46"};
    }

    .footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #ddd;
      font-size: ${l.captionSize}px;
      color: #666;
      ${o.columnCount===2?"column-span: all;":""}
    }

    .watermark {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(-45deg);
      font-size: 72px;
      color: rgba(0, 0, 0, 0.05);
      z-index: -1;
      pointer-events: none;
    }

    .section-break {
      ${o.columnCount===2?"column-span: all;":""}
      page-break-after: avoid;
    }

    .caption {
      font-size: ${l.captionSize}px;
      color: #666;
      font-style: italic;
      margin-top: 5px;
    }

    @media print {
      body {
        margin: 0;
        padding: 0;
      }
      .no-print {
        display: none;
      }
    }
  `,p=[];if(f.includeLogo&&a&&p.push(`
      <div class="header-logo">
        <div class="company-name">${a.companyName}</div>
        ${a.logoUrl?`<img src="${a.logoUrl}" alt="Logo" class="logo" />`:""}
      </div>
    `),p.push(`
    <h1>${t.name}</h1>
  `),p.push(`
    <div class="header-info">
      <p><strong>Decision:</strong> ${r.decisionTitle}</p>
      <p><strong>Chosen Option:</strong> ${r.chosenOption}</p>
      ${s?`<p><strong>Generated:</strong> ${new Date(r.generatedAt).toLocaleString()}</p>`:""}
      ${i&&r.generatedBy?`<p><strong>Generated By:</strong> ${r.generatedBy.name} (${r.generatedBy.role})</p>`:""}
    </div>
  `),d.includeExecutiveSummary&&p.push(`
      <div class="section-break">
        <h2>${Xc(ls.executiveSummary.technical,ls.executiveSummary.friendly,t)}</h2>
        <div class="narrative">
          <p>${r.narrative.decision}</p>
        </div>
      </div>
    `),p.push(`
    <div class="section-break">
      <h2>${Xc(ls.metrics.technical,ls.metrics.friendly,t)}</h2>
      <div class="metric-grid">
        <div class="metric-card">
          <div class="metric-label">Expected Value (EV)</div>
          <div class="metric-value">${r.keyMetrics.ev.toFixed(2)}</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Risk-Adjusted Return (RAROC)</div>
          <div class="metric-value">${r.keyMetrics.raroc.toFixed(4)}</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Value at Risk 95% (VaR95)</div>
          <div class="metric-value">${r.keyMetrics.var95.toFixed(2)}</div>
        </div>
        ${d.includeDetailedMetrics?`
        <div class="metric-card">
          <div class="metric-label">Conditional VaR 95% (CVaR95)</div>
          <div class="metric-value">${r.keyMetrics.cvar95.toFixed(2)}</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Utility Score</div>
          <div class="metric-value">${r.keyMetrics.utility.toFixed(2)}</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Credit Risk Score</div>
          <div class="metric-value">${r.keyMetrics.creditRiskScore.toFixed(2)}</div>
        </div>
        `:""}
      </div>
      <div class="narrative">
        <p>${r.narrative.metrics}</p>
      </div>
    </div>
  `),d.includeSensitivityAnalysis&&r.topSensitiveFactors.length>0){const b=z_(r.topSensitiveFactors,t);p.push(`
      <div class="section-break">
        <h2>${Xc(ls.sensitivity.technical,ls.sensitivity.friendly,t)}</h2>
        ${d.useDescriptiveCaptions?'<p class="caption">These parameters have the most significant impact on decision outcomes. Changes to these values will substantially affect results.</p>':""}
        <table>
          <thead>
            <tr>
              <th>Parameter</th>
              <th>Impact</th>
            </tr>
          </thead>
          <tbody>
            ${b.map(v=>`
              <tr>
                <td>${v.paramName}</td>
                <td>${v.impact.toFixed(2)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        <div class="narrative">
          <p>${r.narrative.risks}</p>
        </div>
      </div>
    `)}if(d.includeGuardrails&&p.push(`
      <div class="section-break">
        <h2>${Xc(ls.guardrails.technical,ls.guardrails.friendly,t)}</h2>
        <div class="metric-grid" style="grid-template-columns: repeat(2, 1fr);">
          <div class="metric-card">
            <div class="metric-label">Total Guardrails</div>
            <div class="metric-value">${r.guardrails.total}</div>
          </div>
          <div class="metric-card">
            <div class="metric-label">Active Violations</div>
            <div class="metric-value" style="color: ${r.guardrails.violations>0?"#dc2626":"#16a34a"}">${r.guardrails.violations}</div>
          </div>
        </div>
        ${r.guardrails.details&&r.guardrails.details.length>0?`
          <table>
            <thead>
              <tr>
                <th>Metric</th>
                <th>Threshold</th>
                <th>Actual</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              ${r.guardrails.details.map(b=>`
                <tr>
                  <td>${b.metric}</td>
                  <td>${b.threshold.toFixed(2)}</td>
                  <td>${b.actual.toFixed(2)}</td>
                  <td><span class="badge badge-${b.status==="pass"?"success":b.status==="warning"?"warning":"high"}">${b.status.toUpperCase()}</span></td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        `:""}
        <div class="narrative">
          <p>${r.narrative.guardrails}</p>
        </div>
      </div>
    `),d.includePartnerDetails&&r.highDependencyPartners.length>0){const b=z_(r.highDependencyPartners,t);p.push(`
      <div class="section-break">
        <h2>${Xc(ls.partners.technical,ls.partners.friendly,t)}</h2>
        ${d.useDescriptiveCaptions?'<p class="caption">Partners with dependency scores above 70% require active monitoring and contingency planning to mitigate concentration risk.</p>':""}
        <table>
          <thead>
            <tr>
              <th>Partner Name</th>
              <th>Relationship</th>
              <th>Dependency Score</th>
              <th>Credit Exposure</th>
            </tr>
          </thead>
          <tbody>
            ${b.map(v=>`
              <tr>
                <td>${v.name}</td>
                <td>${v.relationship}</td>
                <td><span class="badge badge-high">${(v.dependencyScore*100).toFixed(0)}%</span></td>
                <td>${v.creditExposure?`$${v.creditExposure.toLocaleString()}`:"N/A"}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        <div class="narrative">
          <p>${r.narrative.partners}</p>
        </div>
      </div>
    `)}if(d.includeAssumptions&&r.assumptions&&r.assumptions.length>0){const b=z_(r.assumptions,t);p.push(`
      <div class="section-break">
        <h2>${Xc(ls.assumptions.technical,ls.assumptions.friendly,t)}</h2>
        <table>
          <thead>
            <tr>
              <th>Category</th>
              <th>Description</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            ${b.map(v=>`
              <tr>
                <td>${v.category}</td>
                <td>${v.description}</td>
                <td>${v.value}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      </div>
    `)}return d.includeModelSnapshots&&r.modelSnapshot&&p.push(`
      <div class="section-break">
        <h2>${Xc(ls.modelSnapshot.technical,ls.modelSnapshot.friendly,t)}</h2>
        <table>
          <tbody>
            <tr>
              <td><strong>Random Seed</strong></td>
              <td>${r.modelSnapshot.seed}</td>
            </tr>
            <tr>
              <td><strong>Simulation Runs</strong></td>
              <td>${r.modelSnapshot.runs.toLocaleString()}</td>
            </tr>
            <tr>
              <td><strong>Timestamp</strong></td>
              <td>${new Date(r.modelSnapshot.timestamp).toLocaleString()}</td>
            </tr>
            ${r.modelSnapshot.runFingerprint?`
            <tr>
              <td><strong>Run Fingerprint</strong></td>
              <td style="font-family: monospace; font-size: ${l.captionSize}px;">${r.modelSnapshot.runFingerprint}</td>
            </tr>
            `:""}
          </tbody>
        </table>
      </div>
    `),f.includeFooter&&p.push(`
      <div class="footer">
        <p>This ${t.name.toLowerCase()} was automatically generated by ${(a==null?void 0:a.companyName)||"Retina Intelligence Suite"}.</p>
        <p>For questions or additional information, please contact the decision support team.</p>
        ${s?`<p style="margin-top: 20px; color: #999; font-size: ${l.captionSize-1}px;">Generated: ${new Date(r.generatedAt).toLocaleString()}</p>`:""}
      </div>
    `),`
    <!DOCTYPE html>
    <html>
      <head>
        <title>${t.name} - ${r.decisionTitle}</title>
        <style>${m}</style>
      </head>
      <body>
        ${f.includeWatermark&&(a!=null&&a.watermarkText)?`<div class="watermark">${a.watermarkText}</div>`:""}
        <div class="container">
          ${p.join(`
`)}
        </div>
      </body>
    </html>
  `},C3e=e=>{const t=S3e(e),r=window.open("","_blank");if(!r)throw new Error("Failed to open print window. Please allow popups.");r.document.write(t),r.document.close(),setTimeout(()=>{r.print()},500)};function _3e({guardrails:e,violations:t,plainLanguage:r=!1,decisionId:a}){const s=t.filter(p=>!p.resolvedAt),i=s.filter(p=>p.alertLevel==="critical"),o=s.filter(p=>p.alertLevel==="caution"),l=a?By(a):[],d=l.slice(-3).reverse(),u=e.reduce((p,g)=>(p[g.optionId]||(p[g.optionId]=[]),p[g.optionId].push(g),p),{}),f=s.reduce((p,g)=>(p[g.optionId]||(p[g.optionId]=[]),p[g.optionId].push(g),p),{}),m=p=>{switch(p){case"critical":return"destructive";case"caution":return"outline";case"info":return"secondary";default:return"secondary"}};return n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fo,{className:"w-5 h-5 text-primary"}),n.jsx(Ge,{className:"text-base",children:r?"Risk Limits & Alerts":"Guardrails Summary"})]}),n.jsx(mt,{children:e.length>0?`${e.length} guardrails configured | ${s.length} active violations`:"No guardrails configured"})]}),n.jsxs(Re,{className:"space-y-4",children:[s.length>0&&n.jsxs("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold text-destructive",children:[n.jsx(tn,{className:"w-5 h-5"}),s.length," Active Violation",s.length>1?"s":""]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"p-3 bg-background rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Critical"}),n.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.length})]}),n.jsxs("div",{className:"p-3 bg-background rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Caution"}),n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:o.length})]})]})]}),e.length>0&&s.length===0&&n.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded-lg",children:n.jsxs("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-400",children:[n.jsx(ri,{className:"w-5 h-5"}),n.jsx("span",{className:"font-semibold",children:"All guardrails within acceptable ranges"})]})}),Object.entries(u).map(([p,g])=>{var y;const b=f[p]||[],v=((y=b[0])==null?void 0:y.optionLabel)||`Option ${p}`;return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-semibold text-sm",children:v}),b.length>0&&n.jsxs(be,{variant:"destructive",children:[b.length," violation",b.length>1?"s":""]})]}),n.jsx("div",{className:"space-y-2",children:g.map(j=>{const _=b.find(A=>A.guardrailId===j.id),C=!!_;return n.jsx("div",{className:`p-3 border rounded-lg ${C?"border-destructive bg-destructive/5":"border-border"}`,children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm",children:j.metricName}),n.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Must be ",j.direction," ",n.jsx("span",{className:"font-medium",children:j.thresholdValue.toLocaleString()})]}),C&&_&&n.jsxs("div",{className:"text-xs text-destructive font-medium mt-1",children:[" Current:"," ",_.actualValue.toLocaleString()]})]}),n.jsx(be,{variant:m(j.alertLevel),children:j.alertLevel})]})},j.id)})})]},p)}),e.length===0&&n.jsxs("div",{className:"text-center py-8 space-y-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mx-auto",children:n.jsx(Fo,{className:"w-6 h-6 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No guardrails configured for this decision"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Consider setting up guardrails to monitor key risk metrics"})]}),l.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold text-sm",children:[n.jsx($r,{className:"w-4 h-4"}),r?"Automatic Limit Adjustments":"Auto-Adjustments"]}),n.jsx("div",{className:"space-y-2",children:d.map(p=>n.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm text-blue-900 dark:text-blue-100",children:p.metricName}),n.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:["Threshold: ",p.oldThreshold.toFixed(2)," "," ",p.newThreshold.toFixed(2)," (",p.adjustmentPercent,"% tighter)"]}),n.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:r?"Learned from repeated problems and made limits stricter":p.reason})]}),n.jsx(be,{variant:"outline",className:"shrink-0 border-blue-300 dark:border-blue-700",children:"Auto"})]})},p.id))})]}),e.length>0&&n.jsx("div",{className:"pt-4 border-t border-border",children:n.jsxs("p",{className:"text-sm leading-relaxed text-muted-foreground",children:[s.length>0?`We have ${s.length} active guardrail violation${s.length>1?"s":""} that require attention. ${i.length>0?`${i.length} critical violation${i.length>1?"s":""} require${i.length===1?"s":""} immediate action.`:""} These violations indicate that certain metrics have crossed predefined thresholds and should be reviewed to ensure risk remains within acceptable levels.`:`All ${e.length} configured guardrails are within acceptable ranges. This indicates that the decision's risk profile aligns with our predefined risk tolerance levels. We recommend continuing to monitor these metrics as the decision progresses.`,l.length>0&&` The system has automatically adjusted ${l.length} guardrail${l.length>1?"s":""} based on repeated breaches, tightening thresholds to better protect against future risks.`]})})]})]})}function A3e({decisionTitle:e,chosenOptionId:t,chosenOptionLabel:r,simulationResults:a,topSensitiveFactors:s=[],partners:i=[],onAuditEvent:o,plainLanguage:l=!1,decisionId:d,seed:u,runs:f,options:m,scenarioVars:p}){const{tenant:g}=Fr(),[b,v]=N.useState(!1),[y,j]=N.useState(!1),[_,C]=N.useState(null),[A,S]=N.useState(!1),[T,O]=N.useState("executive-summary"),[R,M]=N.useState(g3e(g.tenantId)),[I]=N.useState(m3e(g.tenantId)),[D,$]=N.useState(!1),[K,U]=N.useState(!1),J=a.find(H=>H.optionId===t),V=i.filter(H=>(H.dependencyScore||0)>.7),G=(H,X,ne,ie,ce)=>{var Xe;const ge=`We have decided to proceed with "${r}" after careful analysis of multiple options. This decision was made based on comprehensive risk-adjusted metrics and sensitivity analysis to ensure the best outcome for our organization.`,he=l?"Expected Value":"EV",ue=l?"Risk-Adjusted Return":"RAROC",Se=l?"Utility Score":"Utility",je=`The chosen option shows an ${he} of ${H.ev.toFixed(2)}, with a ${ue} of ${H.raroc.toFixed(4)}. The ${Se} score is ${((Xe=H.certaintyEquivalent)==null?void 0:Xe.toFixed(2))||"N/A"}, indicating ${H.raroc>.1?"strong":H.raroc>.05?"moderate":"cautious"} performance expectations. Our risk exposure (VaR95) is ${H.var95.toFixed(2)}, with tail risk (CVaR95) at ${H.cvar95.toFixed(2)}.`;let Be="";if(X.length>0){const pt=X[0],Oe=X.slice(0,3).map(Ee=>Ee.paramName).join(", ");Be=`Our sensitivity analysis identified ${X.length} key risk factors. The most significant is "${pt.paramName}" with an impact of ${Math.abs(pt.impact).toFixed(2)}. Other important factors include: ${Oe}. We recommend monitoring these parameters closely as they can significantly affect outcomes.`}else Be="Sensitivity analysis is pending. We recommend conducting a thorough sensitivity analysis to identify key risk factors before final implementation.";let $e="";if(ne.length>0){const pt=ne.map(Ee=>Ee.name).slice(0,3).join(", "),Oe=ne.reduce((Ee,lt)=>Ee+(lt.creditExposure||0),0);$e=`We have identified ${ne.length} high-dependency partner(s) with dependency scores above 70%: ${pt}. Total credit exposure to these partners is ${Oe>0?`$${Oe.toLocaleString()}`:"not specified"}. These partnerships require active management and contingency planning to mitigate concentration risk.`}else $e="No high-dependency partners (>70% dependency) were identified for this decision. This indicates a well-diversified partner portfolio with manageable concentration risk.";let oe="";if(ie.length>0){const pt=ce.filter(Oe=>Oe.alertLevel==="critical");ce.length>0?oe=`We have ${ie.length} guardrails configured to monitor key risk metrics. Currently, ${ce.length} guardrail${ce.length>1?"s are":" is"} violated${pt.length>0?`, including ${pt.length} critical violation${pt.length>1?"s":""}`:""}. These violations require immediate attention to bring metrics back within acceptable ranges and ensure risk remains within our tolerance levels.`:oe=`We have ${ie.length} guardrails configured to monitor key risk metrics. All guardrails are currently within acceptable ranges, indicating that the decision's risk profile aligns with our predefined risk tolerance levels. We recommend continuing to monitor these metrics as the decision progresses.`}else oe="No guardrails have been configured for this decision. We recommend setting up guardrails to monitor key risk metrics such as VaR95, RAROC, and credit risk scores to ensure proactive risk management.";return{decision:ge,metrics:je,risks:Be,partners:$e,guardrails:oe}},q=async()=>{if(!J)return;j(!0);let H;if(u!==void 0&&f!==void 0&&m&&p)try{H=await DK(u,f,m,p)}catch(ue){console.error("Failed to compute run fingerprint:",ue)}const X={};if(p)for(const ue of p)try{const Se=JSON.stringify({name:ue.name,dist:ue.dist,params:ue.params,appliesTo:ue.appliesTo,weight:ue.weight??1}),Be=new TextEncoder().encode(Se),$e=await crypto.subtle.digest("SHA-256",Be),Xe=Array.from(new Uint8Array($e)).map(pt=>pt.toString(16).padStart(2,"0")).join("");X[ue.name]=Xe.substring(0,12)}catch(Se){console.error(`Failed to compute hash for parameter ${ue.name}:`,Se)}await new Promise(ue=>setTimeout(ue,800));const ne=V.length>0?V.reduce((ue,Se)=>ue+(Se.dependencyScore||0),0)/V.length:0,ie=d?KP(d):[],ce=d?YP(d):[],ge=G(J,s,V,ie,ce),he={decisionTitle:e,chosenOption:r,keyMetrics:{ev:J.ev,var95:J.var95,cvar95:J.cvar95,raroc:J.raroc,utility:J.certaintyEquivalent||0,creditRiskScore:ne},topSensitiveFactors:s.slice(0,3),highDependencyPartners:V,guardrails:{total:ie.length,violations:ce.length},narrative:ge,generatedAt:new Date().toISOString()};C(he),j(!1),o("board.brief.generated",{decisionId:d||"unknown",decisionTitle:e,chosenOptionId:t,chosenOptionLabel:r,runFingerprint:H,seed:u,runs:f,parameterHashes:X,metricsCount:6,sensitiveFactorsCount:s.length,highDependencyPartnersCount:V.length,guardrailsCount:ie.length,guardrailViolationsCount:ce.length,metrics:{ev:J.ev,var95:J.var95,cvar95:J.cvar95,raroc:J.raroc,utility:J.certaintyEquivalent||0,creditRiskScore:ne},generatedAt:he.generatedAt})},Y=()=>{if(!_)return;const X=[["Board-Ready Summary"],["Generated",new Date(_.generatedAt).toLocaleString()],[""],["Decision",_.decisionTitle],["Chosen Option",_.chosenOption],[""],["Key Metrics"],["Expected Value (EV)",_.keyMetrics.ev.toFixed(2)],["Value at Risk 95% (VaR95)",_.keyMetrics.var95.toFixed(2)],["Conditional VaR 95% (CVaR95)",_.keyMetrics.cvar95.toFixed(2)],["Risk-Adjusted Return (RAROC)",_.keyMetrics.raroc.toFixed(4)],["Utility Score",_.keyMetrics.utility.toFixed(2)],["Credit Risk Score",_.keyMetrics.creditRiskScore.toFixed(2)],[""],["Top Sensitive Factors"],["Parameter","Impact"],..._.topSensitiveFactors.map(he=>[he.paramName,he.impact.toFixed(2)]),[""],["High Dependency Partners (>70%)"],["Name","Relationship","Dependency Score","Credit Exposure"],..._.highDependencyPartners.map(he=>[he.name,he.relationship,((he.dependencyScore||0)*100).toFixed(0)+"%",he.creditExposure?`$${he.creditExposure.toLocaleString()}`:"N/A"]),[""],["Decision Summary"],[_.narrative.decision],[""],["Metrics Summary"],[_.narrative.metrics],[""],["Risk Summary"],[_.narrative.risks],[""],["Partner Summary"],[_.narrative.partners],[""],["Guardrails Summary"],["Total Guardrails",_.guardrails.total.toString()],["Active Violations",_.guardrails.violations.toString()],[""],[_.narrative.guardrails]].map(he=>he.join(",")).join(`
`),ne=new Blob([X],{type:"text/csv;charset=utf-8;"}),ie=document.createElement("a"),ce=URL.createObjectURL(ne),ge=new Date().toISOString().slice(0,16).replace("T","_").replace(/:/g,"");ie.setAttribute("href",ce),ie.setAttribute("download",`board_summary_${ge}.csv`),ie.style.visibility="hidden",document.body.appendChild(ie),ie.click(),document.body.removeChild(ie),o("board.summary.exported",{format:"csv",decisionTitle:e})},Q=async(H,X,ne,ie)=>{if(_)try{const ce=Wke(e,_,R),ge=await qke({to:H.map(he=>({email:he})),subject:X,htmlBody:ce,textBody:ne});ge.success?(o("board.summary.emailed",{decisionTitle:e,recipientCount:H.length,template:ie,messageId:ge.messageId}),alert(`Email sent successfully to ${H.length} recipient(s)`)):alert(`Failed to send email: ${ge.error}`)}catch(ce){console.error("Email send error:",ce),alert("Failed to send email. Please try again.")}},F=I.find(H=>H.id===T)||I[0],z=H=>{if(!_)return;const X={decisionTitle:_.decisionTitle,chosenOption:_.chosenOption,keyMetrics:_.keyMetrics,topSensitiveFactors:_.topSensitiveFactors,highDependencyPartners:_.highDependencyPartners,guardrails:_.guardrails,narrative:_.narrative,generatedAt:_.generatedAt},ne={companyName:R.companyName,logoUrl:R.logoUrl,primaryColor:R.primaryColor,secondaryColor:R.secondaryColor,accentColor:R.accentColor};C3e({preset:H.preset,data:X,tenantBranding:ne,includeTimestamp:H.includeTimestamp,includeUserInfo:H.includeUserInfo}),o("board.summary.exported",{format:H.format,preset:H.preset.type,decisionTitle:e})};return n.jsxs(Nr,{open:b,onOpenChange:v,children:[n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(ld,{asChild:!0,children:n.jsxs(le,{variant:"outline",onClick:()=>{v(!0),_||q()},children:[n.jsx(cs,{className:"w-4 h-4 mr-2"}),l?"Board-Ready Summary":"Generate Board Summary"]})})}),n.jsx(St,{children:n.jsx("p",{children:"Creates a simple brief showing what we decided, why, and main risks."})})]})}),n.jsxs(gr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:l?"Board-Ready Summary":"Board Summary"}),n.jsx(Sr,{children:"Comprehensive decision summary with key metrics, risks, and partner analysis"})]}),y?n.jsxs("div",{className:"flex items-center justify-center py-12",children:[n.jsx(vh,{className:"w-8 h-8 animate-spin text-primary"}),n.jsx("span",{className:"ml-3 text-muted-foreground",children:"Generating summary..."})]}):_?n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Wb,{className:"w-4 h-4"}),n.jsx(Ge,{className:"text-base",children:"Report Template & Branding"})]})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Report Template"}),n.jsxs(Et,{value:T,onValueChange:O,children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsx(Ot,{children:I.map(H=>n.jsx(we,{value:H.id,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:H.name}),n.jsx("span",{className:"text-xs text-muted-foreground",children:H.description})]})},H.id))})]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.jsxs("div",{children:["Company: ",R.companyName]}),n.jsxs("div",{children:["Style: ",F.styling.headerStyle]})]})]})]}),n.jsx(Ae,{children:n.jsxs(He,{children:[n.jsx(Ge,{className:"text-lg",children:_.decisionTitle}),n.jsxs(mt,{children:["Chosen Option: ",n.jsx("strong",{children:_.chosenOption}),n.jsx("br",{}),"Generated: ",new Date(_.generatedAt).toLocaleString()]})]})}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-base",children:"Executive Summary"})}),n.jsx(Re,{children:n.jsx("p",{className:"text-sm leading-relaxed text-muted-foreground",children:_.narrative.decision})})]}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-base",children:"Key Metrics"})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:Ra("ev",{plain:l})}),n.jsx("div",{className:"text-xl font-bold",children:_.keyMetrics.ev.toFixed(2)})]}),n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:Ra("var95",{plain:l})}),n.jsx("div",{className:"text-xl font-bold",children:_.keyMetrics.var95.toFixed(2)})]}),n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:Ra("cvar95",{plain:l})}),n.jsx("div",{className:"text-xl font-bold",children:_.keyMetrics.cvar95.toFixed(2)})]}),n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:Ra("raroc",{plain:l})}),n.jsx("div",{className:"text-xl font-bold",children:_.keyMetrics.raroc.toFixed(4)})]}),n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:Ra("ce",{plain:l})}),n.jsx("div",{className:"text-xl font-bold",children:_.keyMetrics.utility.toFixed(2)})]}),n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Credit Risk Score"}),n.jsx("div",{className:"text-xl font-bold",children:_.keyMetrics.creditRiskScore.toFixed(2)})]})]}),n.jsx("p",{className:"text-sm leading-relaxed text-muted-foreground",children:_.narrative.metrics})]})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{className:"text-base",children:"Top Sensitive Factors"}),n.jsx(mt,{children:_.topSensitiveFactors.length>0?`${_.topSensitiveFactors.length} key risk factors identified`:"No sensitivity analysis data available"})]}),n.jsxs(Re,{className:"space-y-4",children:[_.topSensitiveFactors.length>0&&n.jsx("div",{className:"space-y-2",children:_.topSensitiveFactors.map((H,X)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:H.paramName}),n.jsxs(be,{variant:"outline",children:["Impact: ",Math.abs(H.impact).toFixed(2)]})]},X))}),n.jsx("p",{className:"text-sm leading-relaxed text-muted-foreground",children:_.narrative.risks})]})]}),d&&n.jsx(_3e,{guardrails:KP(d),violations:YP(d),plainLanguage:l,decisionId:d}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{className:"text-base",children:"High Dependency Partners (>70%)"}),n.jsx(mt,{children:_.highDependencyPartners.length>0?`${_.highDependencyPartners.length} partner(s) with high dependency`:"No high-dependency partners identified"})]}),n.jsxs(Re,{className:"space-y-4",children:[_.highDependencyPartners.length>0&&n.jsx("div",{className:"space-y-2",children:_.highDependencyPartners.map((H,X)=>n.jsxs("div",{className:"p-3 border border-border rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium",children:H.name}),n.jsxs(be,{className:"bg-red-500 text-white",children:[((H.dependencyScore||0)*100).toFixed(0),"%"]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Relationship:"})," ",H.relationship]}),H.creditExposure&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Credit Exposure:"})," ","$",H.creditExposure.toLocaleString()]})]},X))}),n.jsx("p",{className:"text-sm leading-relaxed text-muted-foreground",children:_.narrative.partners})]})]}),n.jsxs("div",{className:"space-y-3 pt-4",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(le,{onClick:()=>$(!0),variant:"default",className:"flex-1",children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Export with Preset"]}),n.jsxs(le,{onClick:Y,variant:"outline",className:"flex-1",children:[n.jsx(cs,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),n.jsxs(le,{onClick:()=>S(!0),variant:"outline",className:"flex-1",children:[n.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Email"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs(le,{onClick:()=>U(!0),variant:"outline",size:"sm",children:[n.jsx(Wb,{className:"w-4 h-4 mr-2"}),"Customize Preset"]}),n.jsx(x3e,{tenantId:g.tenantId,currentBranding:R,onBrandingUpdate:H=>{M(H)},onAuditEvent:o})]})]})]}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-muted-foreground",children:'Click "Generate Board Summary" to create the report'})})]}),n.jsx(d3e,{open:A,onOpenChange:S,decisionTitle:e,summary:_,branding:R,onSendEmail:Q}),n.jsx(w3e,{open:D,onOpenChange:$,decisionTitle:e,onExport:z,tenantBranding:{companyName:R.companyName,logoUrl:R.logoUrl,primaryColor:R.primaryColor,secondaryColor:R.secondaryColor,accentColor:R.accentColor}}),n.jsx(N3e,{open:K,onOpenChange:U,onSavePreset:H=>{console.log("Custom preset saved:",H),o("preset.custom.created",{presetName:H.name,presetType:H.type})},tenantId:g.tenantId})]})}function k3e({data:e,onGenerateBrief:t,isGenerating:r=!1}){const{portfolio:a,topDrivers:s,diversificationLabel:i,antifragilityTrend:o}=e,l=()=>{switch(i){case"High":return{color:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30",borderColor:"border-green-300 dark:border-green-700"};case"Medium":return{color:"text-yellow-600 dark:text-yellow-400",bgColor:"bg-yellow-100 dark:bg-yellow-900/30",borderColor:"border-yellow-300 dark:border-yellow-700"};case"Low":return{color:"text-red-600 dark:text-red-400",bgColor:"bg-red-100 dark:bg-red-900/30",borderColor:"border-red-300 dark:border-red-700"}}},d=()=>{switch(o){case"up":return{icon:Th,color:"text-green-600 dark:text-green-400",label:"Improving",tooltip:"Learning signal is improving - portfolio is getting stronger"};case"down":return{icon:Oh,color:"text-red-600 dark:text-red-400",label:"Declining",tooltip:"Learning signal is declining - review portfolio composition"};case"stable":return{icon:wl,color:"text-muted-foreground",label:"Stable",tooltip:"Learning signal is stable - no significant change"}}},u=l(),f=d(),m=f.icon;return n.jsxs(Ae,{className:"border-2",children:[n.jsx(He,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-1 flex-1",children:[n.jsx(Ge,{className:"text-lg",children:a.portfolio_name}),n.jsx(mt,{className:"text-xs",children:"Quick take for the Board"})]}),n.jsxs(le,{size:"sm",onClick:()=>t(a.id),disabled:r||!a.metrics,className:"ml-2",children:[n.jsx(cs,{className:"w-4 h-4 mr-2"}),r?"Generating...":"Generate Brief"]})]})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Top 3 Drivers"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{children:n.jsx(tn,{className:"w-3 h-3 text-muted-foreground"})}),n.jsx(St,{className:"max-w-xs",children:n.jsx("p",{className:"text-xs",children:"Combined sensitivity factors from all decisions in this portfolio. These parameters have the biggest impact on outcomes."})})]})})]}),s.length===0?n.jsx("div",{className:"text-xs text-muted-foreground italic p-3 bg-muted/50 rounded border border-dashed border-border",children:"No sensitivity data available. Run tornado analysis on portfolio decisions."}):n.jsx("div",{className:"space-y-2",children:s.slice(0,3).map((p,g)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded border border-border",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:g+1}),n.jsx("div",{className:"text-sm font-medium",children:p.paramName})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[p.direction==="positive"?n.jsx($r,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):n.jsx(fa,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),n.jsxs("div",{className:"text-xs font-semibold text-muted-foreground",children:[Math.abs(p.impact).toFixed(1),"%"]})]})]},p.paramName))})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:`p-3 rounded-lg border ${u.borderColor} ${u.bgColor}`,children:[n.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide mb-2",children:"Diversification"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(be,{variant:"outline",className:`${u.color} border-current text-sm font-bold`,children:i}),a.metrics&&n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{children:n.jsxs("div",{className:"text-xs text-muted-foreground",children:[(a.metrics.diversification_index*100).toFixed(0),"%"]})}),n.jsx(St,{children:n.jsx("p",{className:"text-xs",children:"Diversification Index: measures how spread-out the portfolio is. Higher values indicate better diversification."})})]})})]})]}),n.jsxs("div",{className:"p-3 rounded-lg border border-border bg-muted/30",children:[n.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide mb-2",children:"Antifragility"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(m,{className:`w-4 h-4 ${f.color}`}),n.jsx("span",{className:`text-sm font-semibold ${f.color}`,children:f.label})]})}),n.jsx(St,{className:"max-w-xs",children:n.jsx("p",{className:"text-xs",children:f.tooltip})})]})}),a.metrics&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.metrics.antifragility_score.toFixed(0),"/100"]})]})]})]}),a.metrics&&n.jsx("div",{className:"pt-3 border-t border-border",children:n.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground mb-1",children:"Aggregate EV"}),n.jsxs("div",{className:"font-semibold",children:["$",a.metrics.aggregate_expected_value.toFixed(0)]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground mb-1",children:"Portfolio VaR95"}),n.jsxs("div",{className:"font-semibold",children:["$",a.metrics.aggregate_var95.toFixed(0)]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground mb-1",children:"Decisions"}),n.jsx("div",{className:"font-semibold",children:a.decision_ids.length})]})]})}),!a.metrics&&n.jsx("div",{className:"text-xs text-muted-foreground italic text-center p-3 bg-muted/50 rounded border border-dashed border-border",children:"Compute portfolio metrics to see summary data"})]})]})}function x$(e){return e>=.7?"High":e>=.4?"Medium":"Low"}function O3e(e,t){if(!t||t.length===0)return"stable";const r=t[t.length-1].metrics.antifragility_score,a=e-r,s=5;return a>s?"up":a<-s?"down":"stable"}function E3e(e){const t=new Map;e.forEach(({drivers:a})=>{a.forEach(({paramName:s,impact:i})=>{const o=t.get(s)||{totalImpact:0,count:0};t.set(s,{totalImpact:o.totalImpact+Math.abs(i),count:o.count+1})})});const r=Array.from(t.entries()).map(([a,{totalImpact:s,count:i}])=>({paramName:a,impact:s/i,direction:s>0?"positive":"negative"}));return r.sort((a,s)=>Math.abs(s.impact)-Math.abs(a.impact)),r}const T3e="modulepreload",R3e=function(e){return"/"+e},v$={},Lb=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){let o=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=o(r.map(u=>{if(u=R3e(u),u in v$)return;v$[u]=!0;const f=u.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":T3e,f||(p.as="script"),p.crossOrigin="",p.href=u,d&&p.setAttribute("nonce",d),document.head.appendChild(p),f)return new Promise((g,b)=>{p.addEventListener("load",g),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function Rn(e){"@babel/helpers - typeof";return Rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rn(e)}var jc=Uint8Array,$o=Uint16Array,oE=Int32Array,lE=new jc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),cE=new jc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),y$=new jc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_Y=function(e,t){for(var r=new $o(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var s=new oE(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)s[i]=i-r[a]<<5|a;return{b:r,r:s}},AY=_Y(lE,2),P3e=AY.b,_k=AY.r;P3e[28]=258,_k[258]=28;var M3e=_Y(cE,0),b$=M3e.r,Ak=new $o(32768);for(var da=0;da<32768;++da){var nf=(da&43690)>>1|(da&21845)<<1;nf=(nf&52428)>>2|(nf&13107)<<2,nf=(nf&61680)>>4|(nf&3855)<<4,Ak[da]=((nf&65280)>>8|(nf&255)<<8)>>1}var hv=(function(e,t,r){for(var a=e.length,s=0,i=new $o(t);s<a;++s)e[s]&&++i[e[s]-1];var o=new $o(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new $o(1<<t);var d=15-t;for(s=0;s<a;++s)if(e[s])for(var u=s<<4|e[s],f=t-e[s],m=o[e[s]-1]++<<f,p=m|(1<<f)-1;m<=p;++m)l[Ak[m]>>d]=u}else for(l=new $o(a),s=0;s<a;++s)e[s]&&(l[s]=Ak[o[e[s]-1]++]>>15-e[s]);return l}),Kh=new jc(288);for(var da=0;da<144;++da)Kh[da]=8;for(var da=144;da<256;++da)Kh[da]=9;for(var da=256;da<280;++da)Kh[da]=7;for(var da=280;da<288;++da)Kh[da]=8;var uj=new jc(32);for(var da=0;da<32;++da)uj[da]=5;var D3e=hv(Kh,9,0),L3e=hv(uj,5,0),kY=function(e){return(e+7)/8|0},I3e=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new jc(e.subarray(t,r))},Hd=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},Hx=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},q_=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var s=r.length,i=r.slice();if(!s)return{t:EY,l:0};if(s==1){var o=new jc(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(S,T){return S.f-T.f}),r.push({s:-1,f:25001});var l=r[0],d=r[1],u=0,f=1,m=2;for(r[0]={s:-1,f:l.f+d.f,l,r:d};f!=s-1;)l=r[r[u].f<r[m].f?u++:m++],d=r[u!=f&&r[u].f<r[m].f?u++:m++],r[f++]={s:-1,f:l.f+d.f,l,r:d};for(var p=i[0].s,a=1;a<s;++a)i[a].s>p&&(p=i[a].s);var g=new $o(p+1),b=kk(r[f-1],g,0);if(b>t){var a=0,v=0,y=b-t,j=1<<y;for(i.sort(function(T,O){return g[O.s]-g[T.s]||T.f-O.f});a<s;++a){var _=i[a].s;if(g[_]>t)v+=j-(1<<b-g[_]),g[_]=t;else break}for(v>>=y;v>0;){var C=i[a].s;g[C]<t?v-=1<<t-g[C]++-1:++a}for(;a>=0&&v;--a){var A=i[a].s;g[A]==t&&(--g[A],++v)}b=t}return{t:new jc(g),l:b}},kk=function(e,t,r){return e.s==-1?Math.max(kk(e.l,t,r+1),kk(e.r,t,r+1)):t[e.s]=r},j$=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new $o(++t),a=0,s=e[0],i=1,o=function(d){r[a++]=d},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,a),n:t}},Gx=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},OY=function(e,t,r){var a=r.length,s=kY(t+2);e[s]=a&255,e[s+1]=a>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<a;++i)e[s+i+4]=r[i];return(s+4+a)*8},w$=function(e,t,r,a,s,i,o,l,d,u,f){Hd(t,f++,r),++s[256];for(var m=q_(s,15),p=m.t,g=m.l,b=q_(i,15),v=b.t,y=b.l,j=j$(p),_=j.c,C=j.n,A=j$(v),S=A.c,T=A.n,O=new $o(19),R=0;R<_.length;++R)++O[_[R]&31];for(var R=0;R<S.length;++R)++O[S[R]&31];for(var M=q_(O,7),I=M.t,D=M.l,$=19;$>4&&!I[y$[$-1]];--$);var K=u+5<<3,U=Gx(s,Kh)+Gx(i,uj)+o,J=Gx(s,p)+Gx(i,v)+o+14+3*$+Gx(O,I)+2*O[16]+3*O[17]+7*O[18];if(d>=0&&K<=U&&K<=J)return OY(t,f,e.subarray(d,d+u));var V,G,q,Y;if(Hd(t,f,1+(J<U)),f+=2,J<U){V=hv(p,g,0),G=p,q=hv(v,y,0),Y=v;var Q=hv(I,D,0);Hd(t,f,C-257),Hd(t,f+5,T-1),Hd(t,f+10,$-4),f+=14;for(var R=0;R<$;++R)Hd(t,f+3*R,I[y$[R]]);f+=3*$;for(var F=[_,S],z=0;z<2;++z)for(var H=F[z],R=0;R<H.length;++R){var X=H[R]&31;Hd(t,f,Q[X]),f+=I[X],X>15&&(Hd(t,f,H[R]>>5&127),f+=H[R]>>12)}}else V=D3e,G=Kh,q=L3e,Y=uj;for(var R=0;R<l;++R){var ne=a[R];if(ne>255){var X=ne>>18&31;Hx(t,f,V[X+257]),f+=G[X+257],X>7&&(Hd(t,f,ne>>23&31),f+=lE[X]);var ie=ne&31;Hx(t,f,q[ie]),f+=Y[ie],ie>3&&(Hx(t,f,ne>>5&8191),f+=cE[ie])}else Hx(t,f,V[ne]),f+=G[ne]}return Hx(t,f,V[256]),f+G[256]},$3e=new oE([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),EY=new jc(0),F3e=function(e,t,r,a,s,i){var o=i.z||e.length,l=new jc(a+o+5*(1+Math.ceil(o/7e3))+s),d=l.subarray(a,l.length-s),u=i.l,f=(i.r||0)&7;if(t){f&&(d[0]=i.r>>3);for(var m=$3e[t-1],p=m>>13,g=m&8191,b=(1<<r)-1,v=i.p||new $o(32768),y=i.h||new $o(b+1),j=Math.ceil(r/3),_=2*j,C=function($e){return(e[$e]^e[$e+1]<<j^e[$e+2]<<_)&b},A=new oE(25e3),S=new $o(288),T=new $o(32),O=0,R=0,M=i.i||0,I=0,D=i.w||0,$=0;M+2<o;++M){var K=C(M),U=M&32767,J=y[K];if(v[U]=J,y[K]=U,D<=M){var V=o-M;if((O>7e3||I>24576)&&(V>423||!u)){f=w$(e,d,0,A,S,T,R,I,$,M-$,f),I=O=R=0,$=M;for(var G=0;G<286;++G)S[G]=0;for(var G=0;G<30;++G)T[G]=0}var q=2,Y=0,Q=g,F=U-J&32767;if(V>2&&K==C(M-F))for(var z=Math.min(p,V)-1,H=Math.min(32767,M),X=Math.min(258,V);F<=H&&--Q&&U!=J;){if(e[M+q]==e[M+q-F]){for(var ne=0;ne<X&&e[M+ne]==e[M+ne-F];++ne);if(ne>q){if(q=ne,Y=F,ne>z)break;for(var ie=Math.min(F,ne-2),ce=0,G=0;G<ie;++G){var ge=M-F+G&32767,he=v[ge],ue=ge-he&32767;ue>ce&&(ce=ue,J=ge)}}}U=J,J=v[U],F+=U-J&32767}if(Y){A[I++]=268435456|_k[q]<<18|b$[Y];var Se=_k[q]&31,je=b$[Y]&31;R+=lE[Se]+cE[je],++S[257+Se],++T[je],D=M+q,++O}else A[I++]=e[M],++S[e[M]]}}for(M=Math.max(M,D);M<o;++M)A[I++]=e[M],++S[e[M]];f=w$(e,d,u,A,S,T,R,I,$,M-$,f),u||(i.r=f&7|d[f/8|0]<<3,f-=7,i.h=y,i.p=v,i.i=M,i.w=D)}else{for(var M=i.w||0;M<o+u;M+=65535){var Be=M+65535;Be>=o&&(d[f/8|0]=u,Be=o),f=OY(d,f+1,e.subarray(M,Be))}i.i=o}return I3e(l,0,a+kY(f)+s)},TY=function(){var e=1,t=0;return{p:function(r){for(var a=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=a+=r[o];a=(a&65535)+15*(a>>16),s=(s&65535)+15*(s>>16)}e=a,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},B3e=function(e,t,r,a,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new jc(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return F3e(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,a,s)},RY=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},z3e=function(e,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=TY();s.p(t.dictionary),RY(e,2,s.d())}};function Ok(e,t){t||(t={});var r=TY();r.p(e);var a=B3e(e,t,t.dictionary?6:2,4);return z3e(a,t),RY(a,a.length-4,r.d()),a}var q3e=typeof TextDecoder<"u"&&new TextDecoder,U3e=0;try{q3e.decode(EY,{stream:!0}),U3e=1}catch{}function V3e(e){if(Array.isArray(e))return e}function H3e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function N$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function G3e(e,t){if(e){if(typeof e=="string")return N$(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N$(e,t):void 0}}function W3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S$(e,t){return V3e(e)||H3e(e,t)||G3e(e,t)||W3e()}function C$(e,t="utf8"){return new TextDecoder(t).decode(e)}const K3e=new TextEncoder;function Y3e(e){return K3e.encode(e)}const X3e=1024*8,J3e=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),U_={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class dE{constructor(t=X3e,r={}){Tn(this,"buffer");Tn(this,"byteLength");Tn(this,"byteOffset");Tn(this,"length");Tn(this,"offset");Tn(this,"lastWrittenByte");Tn(this,"littleEndian");Tn(this,"_data");Tn(this,"_mark");Tn(this,"_marks");let a=!1;typeof t=="number"?t=new ArrayBuffer(t):(a=!0,this.lastWrittenByte=t.byteLength);const s=r.offset?r.offset>>>0:0,i=t.byteLength-s;let o=s;(ArrayBuffer.isView(t)||t instanceof dE)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+s),t=t.buffer),a?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const a=(this.offset+t)*2,s=new Uint8Array(a);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const a=U_[r].BYTES_PER_ELEMENT*t,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+a);if(this.littleEndian===J3e&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(s,s+a));l.reverse();const d=new U_[r](l.buffer);return this.offset+=a,d.reverse(),d}const o=new U_[r](i);return this.offset+=a,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let a=0;a<t;a++)r+=this.readChar();return r}readUtf8(t=1){return C$(this.readBytes(t))}decodeText(t=1,r="utf8"){return C$(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(Y3e(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Wg(e){let t=e.length;for(;--t>=0;)e[t]=0}const Z3e=3,Q3e=258,PY=29,eOe=256,tOe=eOe+1+PY,MY=30,rOe=512,nOe=new Array((tOe+2)*2);Wg(nOe);const aOe=new Array(MY*2);Wg(aOe);const sOe=new Array(rOe);Wg(sOe);const iOe=new Array(Q3e-Z3e+1);Wg(iOe);const oOe=new Array(PY);Wg(oOe);const lOe=new Array(MY);Wg(lOe);const cOe=(e,t,r,a)=>{let s=e&65535|0,i=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do s=s+t[a++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0};var Ek=cOe;const dOe=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var a=0;a<8;a++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},uOe=new Uint32Array(dOe()),fOe=(e,t,r,a)=>{const s=uOe,i=a+r;e^=-1;for(let o=a;o<i;o++)e=e>>>8^s[(e^t[o])&255];return e^-1};var Wc=fOe,Tk={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},DY={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const hOe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var mOe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const a in r)hOe(r,a)&&(e[a]=r[a])}}return e},pOe=e=>{let t=0;for(let a=0,s=e.length;a<s;a++)t+=e[a].length;const r=new Uint8Array(t);for(let a=0,s=0,i=e.length;a<i;a++){let o=e[a];r.set(o,s),s+=o.length}return r},LY={assign:mOe,flattenChunks:pOe};let IY=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{IY=!1}const py=new Uint8Array(256);for(let e=0;e<256;e++)py[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;py[254]=py[254]=1;var gOe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,a,s,i,o=e.length,l=0;for(s=0;s<o;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<o&&(a=e.charCodeAt(s+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),s++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),i=0,s=0;i<l;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<o&&(a=e.charCodeAt(s+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),s++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const xOe=(e,t)=>{if(t<65534&&e.subarray&&IY)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let a=0;a<t;a++)r+=String.fromCharCode(e[a]);return r};var vOe=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let a,s;const i=new Array(r*2);for(s=0,a=0;a<r;){let o=e[a++];if(o<128){i[s++]=o;continue}let l=py[o];if(l>4){i[s++]=65533,a+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&a<r;)o=o<<6|e[a++]&63,l--;if(l>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return xOe(i,s)},yOe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+py[e[r]]>t?r:t},Rk={string2buf:gOe,buf2string:vOe,utf8border:yOe};function bOe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var jOe=bOe;const vb=16209,wOe=16191;var NOe=function(t,r){let a,s,i,o,l,d,u,f,m,p,g,b,v,y,j,_,C,A,S,T,O,R,M,I;const D=t.state;a=t.next_in,M=t.input,s=a+(t.avail_in-5),i=t.next_out,I=t.output,o=i-(r-t.avail_out),l=i+(t.avail_out-257),d=D.dmax,u=D.wsize,f=D.whave,m=D.wnext,p=D.window,g=D.hold,b=D.bits,v=D.lencode,y=D.distcode,j=(1<<D.lenbits)-1,_=(1<<D.distbits)-1;e:do{b<15&&(g+=M[a++]<<b,b+=8,g+=M[a++]<<b,b+=8),C=v[g&j];t:for(;;){if(A=C>>>24,g>>>=A,b-=A,A=C>>>16&255,A===0)I[i++]=C&65535;else if(A&16){S=C&65535,A&=15,A&&(b<A&&(g+=M[a++]<<b,b+=8),S+=g&(1<<A)-1,g>>>=A,b-=A),b<15&&(g+=M[a++]<<b,b+=8,g+=M[a++]<<b,b+=8),C=y[g&_];r:for(;;){if(A=C>>>24,g>>>=A,b-=A,A=C>>>16&255,A&16){if(T=C&65535,A&=15,b<A&&(g+=M[a++]<<b,b+=8,b<A&&(g+=M[a++]<<b,b+=8)),T+=g&(1<<A)-1,T>d){t.msg="invalid distance too far back",D.mode=vb;break e}if(g>>>=A,b-=A,A=i-o,T>A){if(A=T-A,A>f&&D.sane){t.msg="invalid distance too far back",D.mode=vb;break e}if(O=0,R=p,m===0){if(O+=u-A,A<S){S-=A;do I[i++]=p[O++];while(--A);O=i-T,R=I}}else if(m<A){if(O+=u+m-A,A-=m,A<S){S-=A;do I[i++]=p[O++];while(--A);if(O=0,m<S){A=m,S-=A;do I[i++]=p[O++];while(--A);O=i-T,R=I}}}else if(O+=m-A,A<S){S-=A;do I[i++]=p[O++];while(--A);O=i-T,R=I}for(;S>2;)I[i++]=R[O++],I[i++]=R[O++],I[i++]=R[O++],S-=3;S&&(I[i++]=R[O++],S>1&&(I[i++]=R[O++]))}else{O=i-T;do I[i++]=I[O++],I[i++]=I[O++],I[i++]=I[O++],S-=3;while(S>2);S&&(I[i++]=I[O++],S>1&&(I[i++]=I[O++]))}}else if((A&64)===0){C=y[(C&65535)+(g&(1<<A)-1)];continue r}else{t.msg="invalid distance code",D.mode=vb;break e}break}}else if((A&64)===0){C=v[(C&65535)+(g&(1<<A)-1)];continue t}else if(A&32){D.mode=wOe;break e}else{t.msg="invalid literal/length code",D.mode=vb;break e}break}}while(a<s&&i<l);S=b>>3,a-=S,b-=S<<3,g&=(1<<b)-1,t.next_in=a,t.next_out=i,t.avail_in=a<s?5+(s-a):5-(a-s),t.avail_out=i<l?257+(l-i):257-(i-l),D.hold=g,D.bits=b};const ap=15,_$=852,A$=592,k$=0,V_=1,O$=2,SOe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),COe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),_Oe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),AOe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),kOe=(e,t,r,a,s,i,o,l)=>{const d=l.bits;let u=0,f=0,m=0,p=0,g=0,b=0,v=0,y=0,j=0,_=0,C,A,S,T,O,R=null,M;const I=new Uint16Array(ap+1),D=new Uint16Array(ap+1);let $=null,K,U,J;for(u=0;u<=ap;u++)I[u]=0;for(f=0;f<a;f++)I[t[r+f]]++;for(g=d,p=ap;p>=1&&I[p]===0;p--);if(g>p&&(g=p),p===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,l.bits=1,0;for(m=1;m<p&&I[m]===0;m++);for(g<m&&(g=m),y=1,u=1;u<=ap;u++)if(y<<=1,y-=I[u],y<0)return-1;if(y>0&&(e===k$||p!==1))return-1;for(D[1]=0,u=1;u<ap;u++)D[u+1]=D[u]+I[u];for(f=0;f<a;f++)t[r+f]!==0&&(o[D[t[r+f]]++]=f);if(e===k$?(R=$=o,M=20):e===V_?(R=SOe,$=COe,M=257):(R=_Oe,$=AOe,M=0),_=0,f=0,u=m,O=i,b=g,v=0,S=-1,j=1<<g,T=j-1,e===V_&&j>_$||e===O$&&j>A$)return 1;for(;;){K=u-v,o[f]+1<M?(U=0,J=o[f]):o[f]>=M?(U=$[o[f]-M],J=R[o[f]-M]):(U=96,J=0),C=1<<u-v,A=1<<b,m=A;do A-=C,s[O+(_>>v)+A]=K<<24|U<<16|J|0;while(A!==0);for(C=1<<u-1;_&C;)C>>=1;if(C!==0?(_&=C-1,_+=C):_=0,f++,--I[u]===0){if(u===p)break;u=t[r+o[f]]}if(u>g&&(_&T)!==S){for(v===0&&(v=g),O+=m,b=u-v,y=1<<b;b+v<p&&(y-=I[b+v],!(y<=0));)b++,y<<=1;if(j+=1<<b,e===V_&&j>_$||e===O$&&j>A$)return 1;S=_&T,s[S]=g<<24|b<<16|O-i|0}}return _!==0&&(s[O+_]=u-v<<24|64<<16|0),l.bits=g,0};var mv=kOe;const OOe=0,$Y=1,FY=2,{Z_FINISH:E$,Z_BLOCK:EOe,Z_TREES:yb,Z_OK:Yh,Z_STREAM_END:TOe,Z_NEED_DICT:ROe,Z_STREAM_ERROR:Ol,Z_DATA_ERROR:BY,Z_MEM_ERROR:zY,Z_BUF_ERROR:POe,Z_DEFLATED:T$}=DY,H2=16180,R$=16181,P$=16182,M$=16183,D$=16184,L$=16185,I$=16186,$$=16187,F$=16188,B$=16189,fj=16190,Gd=16191,H_=16192,z$=16193,G_=16194,q$=16195,U$=16196,V$=16197,H$=16198,bb=16199,jb=16200,G$=16201,W$=16202,K$=16203,Y$=16204,X$=16205,W_=16206,J$=16207,Z$=16208,va=16209,qY=16210,UY=16211,MOe=852,DOe=592,LOe=15,IOe=LOe,Q$=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function $Oe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const sm=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<H2||t.mode>UY?1:0},VY=e=>{if(sm(e))return Ol;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=H2,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(MOe),t.distcode=t.distdyn=new Int32Array(DOe),t.sane=1,t.back=-1,Yh},HY=e=>{if(sm(e))return Ol;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,VY(e)},GY=(e,t)=>{let r;if(sm(e))return Ol;const a=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ol:(a.window!==null&&a.wbits!==t&&(a.window=null),a.wrap=r,a.wbits=t,HY(e))},WY=(e,t)=>{if(!e)return Ol;const r=new $Oe;e.state=r,r.strm=e,r.window=null,r.mode=H2;const a=GY(e,t);return a!==Yh&&(e.state=null),a},FOe=e=>WY(e,IOe);let eF=!0,K_,Y_;const BOe=e=>{if(eF){K_=new Int32Array(512),Y_=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(mv($Y,e.lens,0,288,K_,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;mv(FY,e.lens,0,32,Y_,0,e.work,{bits:5}),eF=!1}e.lencode=K_,e.lenbits=9,e.distcode=Y_,e.distbits=5},KY=(e,t,r,a)=>{let s;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),a>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>a&&(s=a),i.window.set(t.subarray(r-a,r-a+s),i.wnext),a-=s,a?(i.window.set(t.subarray(r-a,r),0),i.wnext=a,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},zOe=(e,t)=>{let r,a,s,i,o,l,d,u,f,m,p,g,b,v,y=0,j,_,C,A,S,T,O,R;const M=new Uint8Array(4);let I,D;const $=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(sm(e)||!e.output||!e.input&&e.avail_in!==0)return Ol;r=e.state,r.mode===Gd&&(r.mode=H_),o=e.next_out,s=e.output,d=e.avail_out,i=e.next_in,a=e.input,l=e.avail_in,u=r.hold,f=r.bits,m=l,p=d,R=Yh;e:for(;;)switch(r.mode){case H2:if(r.wrap===0){r.mode=H_;break}for(;f<16;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,M[0]=u&255,M[1]=u>>>8&255,r.check=Wc(r.check,M,2,0),u=0,f=0,r.mode=R$;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=va;break}if((u&15)!==T$){e.msg="unknown compression method",r.mode=va;break}if(u>>>=4,f-=4,O=(u&15)+8,r.wbits===0&&(r.wbits=O),O>15||O>r.wbits){e.msg="invalid window size",r.mode=va;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?B$:Gd,u=0,f=0;break;case R$:for(;f<16;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}if(r.flags=u,(r.flags&255)!==T$){e.msg="unknown compression method",r.mode=va;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=va;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(M[0]=u&255,M[1]=u>>>8&255,r.check=Wc(r.check,M,2,0)),u=0,f=0,r.mode=P$;case P$:for(;f<32;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(M[0]=u&255,M[1]=u>>>8&255,M[2]=u>>>16&255,M[3]=u>>>24&255,r.check=Wc(r.check,M,4,0)),u=0,f=0,r.mode=M$;case M$:for(;f<16;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(M[0]=u&255,M[1]=u>>>8&255,r.check=Wc(r.check,M,2,0)),u=0,f=0,r.mode=D$;case D$:if(r.flags&1024){for(;f<16;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(M[0]=u&255,M[1]=u>>>8&255,r.check=Wc(r.check,M,2,0)),u=0,f=0}else r.head&&(r.head.extra=null);r.mode=L$;case L$:if(r.flags&1024&&(g=r.length,g>l&&(g=l),g&&(r.head&&(O=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(a.subarray(i,i+g),O)),r.flags&512&&r.wrap&4&&(r.check=Wc(r.check,a,g,i)),l-=g,i+=g,r.length-=g),r.length))break e;r.length=0,r.mode=I$;case I$:if(r.flags&2048){if(l===0)break e;g=0;do O=a[i+g++],r.head&&O&&r.length<65536&&(r.head.name+=String.fromCharCode(O));while(O&&g<l);if(r.flags&512&&r.wrap&4&&(r.check=Wc(r.check,a,g,i)),l-=g,i+=g,O)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=$$;case $$:if(r.flags&4096){if(l===0)break e;g=0;do O=a[i+g++],r.head&&O&&r.length<65536&&(r.head.comment+=String.fromCharCode(O));while(O&&g<l);if(r.flags&512&&r.wrap&4&&(r.check=Wc(r.check,a,g,i)),l-=g,i+=g,O)break e}else r.head&&(r.head.comment=null);r.mode=F$;case F$:if(r.flags&512){for(;f<16;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=va;break}u=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Gd;break;case B$:for(;f<32;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}e.adler=r.check=Q$(u),u=0,f=0,r.mode=fj;case fj:if(r.havedict===0)return e.next_out=o,e.avail_out=d,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=f,ROe;e.adler=r.check=1,r.mode=Gd;case Gd:if(t===EOe||t===yb)break e;case H_:if(r.last){u>>>=f&7,f-=f&7,r.mode=W_;break}for(;f<3;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}switch(r.last=u&1,u>>>=1,f-=1,u&3){case 0:r.mode=z$;break;case 1:if(BOe(r),r.mode=bb,t===yb){u>>>=2,f-=2;break e}break;case 2:r.mode=U$;break;case 3:e.msg="invalid block type",r.mode=va}u>>>=2,f-=2;break;case z$:for(u>>>=f&7,f-=f&7;f<32;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=va;break}if(r.length=u&65535,u=0,f=0,r.mode=G_,t===yb)break e;case G_:r.mode=q$;case q$:if(g=r.length,g){if(g>l&&(g=l),g>d&&(g=d),g===0)break e;s.set(a.subarray(i,i+g),o),l-=g,i+=g,d-=g,o+=g,r.length-=g;break}r.mode=Gd;break;case U$:for(;f<14;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}if(r.nlen=(u&31)+257,u>>>=5,f-=5,r.ndist=(u&31)+1,u>>>=5,f-=5,r.ncode=(u&15)+4,u>>>=4,f-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=va;break}r.have=0,r.mode=V$;case V$:for(;r.have<r.ncode;){for(;f<3;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}r.lens[$[r.have++]]=u&7,u>>>=3,f-=3}for(;r.have<19;)r.lens[$[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},R=mv(OOe,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,R){e.msg="invalid code lengths set",r.mode=va;break}r.have=0,r.mode=H$;case H$:for(;r.have<r.nlen+r.ndist;){for(;y=r.lencode[u&(1<<r.lenbits)-1],j=y>>>24,_=y>>>16&255,C=y&65535,!(j<=f);){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}if(C<16)u>>>=j,f-=j,r.lens[r.have++]=C;else{if(C===16){for(D=j+2;f<D;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}if(u>>>=j,f-=j,r.have===0){e.msg="invalid bit length repeat",r.mode=va;break}O=r.lens[r.have-1],g=3+(u&3),u>>>=2,f-=2}else if(C===17){for(D=j+3;f<D;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}u>>>=j,f-=j,O=0,g=3+(u&7),u>>>=3,f-=3}else{for(D=j+7;f<D;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}u>>>=j,f-=j,O=0,g=11+(u&127),u>>>=7,f-=7}if(r.have+g>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=va;break}for(;g--;)r.lens[r.have++]=O}}if(r.mode===va)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=va;break}if(r.lenbits=9,I={bits:r.lenbits},R=mv($Y,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,R){e.msg="invalid literal/lengths set",r.mode=va;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},R=mv(FY,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,R){e.msg="invalid distances set",r.mode=va;break}if(r.mode=bb,t===yb)break e;case bb:r.mode=jb;case jb:if(l>=6&&d>=258){e.next_out=o,e.avail_out=d,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=f,NOe(e,p),o=e.next_out,s=e.output,d=e.avail_out,i=e.next_in,a=e.input,l=e.avail_in,u=r.hold,f=r.bits,r.mode===Gd&&(r.back=-1);break}for(r.back=0;y=r.lencode[u&(1<<r.lenbits)-1],j=y>>>24,_=y>>>16&255,C=y&65535,!(j<=f);){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}if(_&&(_&240)===0){for(A=j,S=_,T=C;y=r.lencode[T+((u&(1<<A+S)-1)>>A)],j=y>>>24,_=y>>>16&255,C=y&65535,!(A+j<=f);){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}u>>>=A,f-=A,r.back+=A}if(u>>>=j,f-=j,r.back+=j,r.length=C,_===0){r.mode=X$;break}if(_&32){r.back=-1,r.mode=Gd;break}if(_&64){e.msg="invalid literal/length code",r.mode=va;break}r.extra=_&15,r.mode=G$;case G$:if(r.extra){for(D=r.extra;f<D;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=W$;case W$:for(;y=r.distcode[u&(1<<r.distbits)-1],j=y>>>24,_=y>>>16&255,C=y&65535,!(j<=f);){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}if((_&240)===0){for(A=j,S=_,T=C;y=r.distcode[T+((u&(1<<A+S)-1)>>A)],j=y>>>24,_=y>>>16&255,C=y&65535,!(A+j<=f);){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}u>>>=A,f-=A,r.back+=A}if(u>>>=j,f-=j,r.back+=j,_&64){e.msg="invalid distance code",r.mode=va;break}r.offset=C,r.extra=_&15,r.mode=K$;case K$:if(r.extra){for(D=r.extra;f<D;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=va;break}r.mode=Y$;case Y$:if(d===0)break e;if(g=p-d,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=va;break}g>r.wnext?(g-=r.wnext,b=r.wsize-g):b=r.wnext-g,g>r.length&&(g=r.length),v=r.window}else v=s,b=o-r.offset,g=r.length;g>d&&(g=d),d-=g,r.length-=g;do s[o++]=v[b++];while(--g);r.length===0&&(r.mode=jb);break;case X$:if(d===0)break e;s[o++]=r.length,d--,r.mode=jb;break;case W_:if(r.wrap){for(;f<32;){if(l===0)break e;l--,u|=a[i++]<<f,f+=8}if(p-=d,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?Wc(r.check,s,p,o-p):Ek(r.check,s,p,o-p)),p=d,r.wrap&4&&(r.flags?u:Q$(u))!==r.check){e.msg="incorrect data check",r.mode=va;break}u=0,f=0}r.mode=J$;case J$:if(r.wrap&&r.flags){for(;f<32;){if(l===0)break e;l--,u+=a[i++]<<f,f+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=va;break}u=0,f=0}r.mode=Z$;case Z$:R=TOe;break e;case va:R=BY;break e;case qY:return zY;case UY:default:return Ol}return e.next_out=o,e.avail_out=d,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=f,(r.wsize||p!==e.avail_out&&r.mode<va&&(r.mode<W_||t!==E$))&&KY(e,e.output,e.next_out,p-e.avail_out),m-=e.avail_in,p-=e.avail_out,e.total_in+=m,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?Wc(r.check,s,p,e.next_out-p):Ek(r.check,s,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Gd?128:0)+(r.mode===bb||r.mode===G_?256:0),(m===0&&p===0||t===E$)&&R===Yh&&(R=POe),R},qOe=e=>{if(sm(e))return Ol;let t=e.state;return t.window&&(t.window=null),e.state=null,Yh},UOe=(e,t)=>{if(sm(e))return Ol;const r=e.state;return(r.wrap&2)===0?Ol:(r.head=t,t.done=!1,Yh)},VOe=(e,t)=>{const r=t.length;let a,s,i;return sm(e)||(a=e.state,a.wrap!==0&&a.mode!==fj)?Ol:a.mode===fj&&(s=1,s=Ek(s,t,r,0),s!==a.check)?BY:(i=KY(e,t,r,r),i?(a.mode=qY,zY):(a.havedict=1,Yh))};var HOe=HY,GOe=GY,WOe=VY,KOe=FOe,YOe=WY,XOe=zOe,JOe=qOe,ZOe=UOe,QOe=VOe,eEe="pako inflate (from Nodeca project)",Kd={inflateReset:HOe,inflateReset2:GOe,inflateResetKeep:WOe,inflateInit:KOe,inflateInit2:YOe,inflate:XOe,inflateEnd:JOe,inflateGetHeader:ZOe,inflateSetDictionary:QOe,inflateInfo:eEe};function tEe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var rEe=tEe;const YY=Object.prototype.toString,{Z_NO_FLUSH:nEe,Z_FINISH:aEe,Z_OK:gy,Z_STREAM_END:X_,Z_NEED_DICT:J_,Z_STREAM_ERROR:sEe,Z_DATA_ERROR:tF,Z_MEM_ERROR:iEe}=DY;function Jy(e){this.options=LY.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new jOe,this.strm.avail_out=0;let r=Kd.inflateInit2(this.strm,t.windowBits);if(r!==gy)throw new Error(Tk[r]);if(this.header=new rEe,Kd.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Rk.string2buf(t.dictionary):YY.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Kd.inflateSetDictionary(this.strm,t.dictionary),r!==gy)))throw new Error(Tk[r])}Jy.prototype.push=function(e,t){const r=this.strm,a=this.options.chunkSize,s=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?aEe:nEe,YY.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(a),r.next_out=0,r.avail_out=a),i=Kd.inflate(r,o),i===J_&&s&&(i=Kd.inflateSetDictionary(r,s),i===gy?i=Kd.inflate(r,o):i===tF&&(i=J_));r.avail_in>0&&i===X_&&r.state.wrap>0&&e[r.next_in]!==0;)Kd.inflateReset(r),i=Kd.inflate(r,o);switch(i){case sEe:case tF:case J_:case iEe:return this.onEnd(i),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||i===X_))if(this.options.to==="string"){let d=Rk.utf8border(r.output,r.next_out),u=r.next_out-d,f=Rk.buf2string(r.output,d);r.next_out=u,r.avail_out=a-u,u&&r.output.set(r.output.subarray(d,d+u),0),this.onData(f)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===gy&&l===0)){if(i===X_)return i=Kd.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Jy.prototype.onData=function(e){this.chunks.push(e)};Jy.prototype.onEnd=function(e){e===gy&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=LY.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function oEe(e,t){const r=new Jy(t);if(r.push(e),r.err)throw r.msg||Tk[r.err];return r.result}var lEe=Jy,cEe=oEe,dEe={Inflate:lEe,inflate:cEe};const{Inflate:uEe,inflate:fEe}=dEe;var rF=uEe,hEe=fEe;const XY=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;XY[e]=t}const nF=4294967295;function mEe(e,t,r){let a=e;for(let s=0;s<r;s++)a=XY[(a^t[s])&255]^a>>>8;return a}function pEe(e,t){return(mEe(nF,e,t)^nF)>>>0}function aF(e,t,r){const a=e.readUint32(),s=pEe(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(s!==a)throw new Error(`CRC mismatch for chunk ${r}. Expected ${a}, found ${s}`)}function JY(e,t,r){for(let a=0;a<r;a++)t[a]=e[a]}function ZY(e,t,r,a){let s=0;for(;s<a;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+t[s-a]&255}function QY(e,t,r,a){let s=0;if(r.length===0)for(;s<a;s++)t[s]=e[s];else for(;s<a;s++)t[s]=e[s]+r[s]&255}function eX(e,t,r,a,s){let i=0;if(r.length===0){for(;i<s;i++)t[i]=e[i];for(;i<a;i++)t[i]=e[i]+(t[i-s]>>1)&255}else{for(;i<s;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<a;i++)t[i]=e[i]+(t[i-s]+r[i]>>1)&255}}function tX(e,t,r,a,s){let i=0;if(r.length===0){for(;i<s;i++)t[i]=e[i];for(;i<a;i++)t[i]=e[i]+t[i-s]&255}else{for(;i<s;i++)t[i]=e[i]+r[i]&255;for(;i<a;i++)t[i]=e[i]+gEe(t[i-s],r[i],r[i-s])&255}}function gEe(e,t,r){const a=e+t-r,s=Math.abs(a-e),i=Math.abs(a-t),o=Math.abs(a-r);return s<=i&&s<=o?e:i<=o?t:r}function xEe(e,t,r,a,s,i){switch(e){case 0:JY(t,r,s);break;case 1:ZY(t,r,s,i);break;case 2:QY(t,r,a,s);break;case 3:eX(t,r,a,s,i);break;case 4:tX(t,r,a,s,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const vEe=new Uint16Array([255]),yEe=new Uint8Array(vEe.buffer),bEe=yEe[0]===255;function jEe(e){const{data:t,width:r,height:a,channels:s,depth:i}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*s,d=new Uint8Array(a*r*l);let u=0;for(let f=0;f<7;f++){const m=o[f],p=Math.ceil((r-m.x)/m.xStep),g=Math.ceil((a-m.y)/m.yStep);if(p<=0||g<=0)continue;const b=p*l,v=new Uint8Array(b);for(let y=0;y<g;y++){const j=t[u++],_=t.subarray(u,u+b);u+=b;const C=new Uint8Array(b);xEe(j,_,C,v,b,l),v.set(C);for(let A=0;A<p;A++){const S=m.x+A*m.xStep,T=m.y+y*m.yStep;if(!(S>=r||T>=a))for(let O=0;O<l;O++)d[(T*r+S)*l+O]=C[A*l+O]}}}if(i===16){const f=new Uint16Array(d.buffer);if(bEe)for(let m=0;m<f.length;m++)f[m]=wEe(f[m]);return f}else return d}function wEe(e){return(e&255)<<8|e>>8&255}const NEe=new Uint16Array([255]),SEe=new Uint8Array(NEe.buffer),CEe=SEe[0]===255,_Ee=new Uint8Array(0);function sF(e){const{data:t,width:r,height:a,channels:s,depth:i}=e,o=Math.ceil(i/8)*s,l=Math.ceil(i/8*s*r),d=new Uint8Array(a*l);let u=_Ee,f=0,m,p;for(let g=0;g<a;g++){switch(m=t.subarray(f+1,f+1+l),p=d.subarray(g*l,(g+1)*l),t[f]){case 0:JY(m,p,l);break;case 1:ZY(m,p,l,o);break;case 2:QY(m,p,u,l);break;case 3:eX(m,p,u,l,o);break;case 4:tX(m,p,u,l,o);break;default:throw new Error(`Unsupported filter: ${t[f]}`)}u=p,f+=l+1}if(i===16){const g=new Uint16Array(d.buffer);if(CEe)for(let b=0;b<g.length;b++)g[b]=AEe(g[b]);return g}else return d}function AEe(e){return(e&255)<<8|e>>8&255}const Ib=Uint8Array.of(137,80,78,71,13,10,26,10);function iF(e){if(!kEe(e.readBytes(Ib.length)))throw new Error("wrong PNG signature")}function kEe(e){if(e.length<Ib.length)return!1;for(let t=0;t<Ib.length;t++)if(e[t]!==Ib[t])return!1;return!0}const OEe="tEXt",EEe=0,rX=new TextDecoder("latin1");function TEe(e){if(PEe(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const REe=/^[\u0000-\u00FF]*$/;function PEe(e){if(!REe.test(e))throw new Error("invalid latin1 text")}function MEe(e,t,r){const a=nX(t);e[a]=DEe(t,r-a.length-1)}function nX(e){for(e.mark();e.readByte()!==EEe;);const t=e.offset;e.reset();const r=rX.decode(e.readBytes(t-e.offset-1));return e.skip(1),TEe(r),r}function DEe(e,t){return rX.decode(e.readBytes(t))}const Ro={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Z_={UNKNOWN:-1,DEFLATE:0},oF={UNKNOWN:-1,ADAPTIVE:0},Q_={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},wb={NONE:0,BACKGROUND:1,PREVIOUS:2},eA={SOURCE:0,OVER:1};class LEe extends dE{constructor(r,a={}){super(r);Tn(this,"_checkCrc");Tn(this,"_inflator");Tn(this,"_png");Tn(this,"_apng");Tn(this,"_end");Tn(this,"_hasPalette");Tn(this,"_palette");Tn(this,"_hasTransparency");Tn(this,"_transparency");Tn(this,"_compressionMethod");Tn(this,"_filterMethod");Tn(this,"_interlaceMethod");Tn(this,"_colorType");Tn(this,"_isAnimated");Tn(this,"_numberOfFrames");Tn(this,"_numberOfPlays");Tn(this,"_frames");Tn(this,"_writingDataChunks");const{checkCrc:s=!1}=a;this._checkCrc=s,this._inflator=new rF,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Z_.UNKNOWN,this._filterMethod=oF.UNKNOWN,this._interlaceMethod=Q_.UNKNOWN,this._colorType=Ro.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(iF(this);!this._end;){const r=this.readUint32(),a=this.readChars(4);this.decodeChunk(r,a)}return this.decodeImage(),this._png}decodeApng(){for(iF(this);!this._end;){const r=this.readUint32(),a=this.readChars(4);this.decodeApngChunk(r,a)}return this.decodeApngImage(),this._apng}decodeChunk(r,a){const s=this.offset;switch(a){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case OEe:MEe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?aF(this,r+4,a):this.skip(4)}decodeApngChunk(r,a){const s=this.offset;switch(a!=="fdAT"&&a!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),a){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,a),this.offset=s+r;break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?aF(this,r+4,a):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=IEe(this.readUint8());const a=this.readUint8();this._colorType=a;let s;switch(a){case Ro.GREYSCALE:s=1;break;case Ro.TRUECOLOUR:s=3;break;case Ro.INDEXED_COLOUR:s=1;break;case Ro.GREYSCALE_ALPHA:s=2;break;case Ro.TRUECOLOUR_ALPHA:s=4;break;case Ro.UNKNOWN:default:throw new Error(`Unknown color type: ${a}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Z_.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const a=r/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<a;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const a=r,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let a=r,s=this.offset+this.byteOffset;if(s+=4,a-=4,this._inflator.push(new Uint8Array(this.buffer,s,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Ro.GREYSCALE:case Ro.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let a=0;a<r/2;a++)this._transparency[a]=this.readUint16();break}case Ro.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let a=0;for(;a<r;a++){const s=this.readByte();this._palette[a].push(s)}for(;a<this._palette.length;a++)this._palette[a].push(255);break}case Ro.UNKNOWN:case Ro.GREYSCALE_ALPHA:case Ro.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const a=nX(this),s=this.readUint8();if(s!==Z_.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(r-a.length-2);this._png.iccEmbeddedProfile={name:a,profile:hEe(i)}}decodepHYs(){const r=this.readUint32(),a=this.readUint32(),s=this.readByte();this._png.resolution={x:r,y:a,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const a={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(r);if(s){if(s.data=sF({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)a.data=s.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(s,i,a),this.addFrameDataToCanvas(a,s)}this._apng.frames.push(a)}}return this._apng}disposeFrame(r,a,s){switch(r.disposeOp){case wb.NONE:break;case wb.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*r.width+o)*this._png.channels;for(let d=0;d<this._png.channels;d++)s.data[l+d]=0}break;case wb.PREVIOUS:s.data.set(a.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,a){const s=1<<this._png.depth,i=(o,l)=>{const d=((o+a.yOffset)*this._png.width+a.xOffset+l)*this._png.channels,u=(o*a.width+l)*this._png.channels;return{index:d,frameIndex:u}};switch(a.blendOp){case eA.SOURCE:for(let o=0;o<a.height;o++)for(let l=0;l<a.width;l++){const{index:d,frameIndex:u}=i(o,l);for(let f=0;f<this._png.channels;f++)r.data[d+f]=a.data[u+f]}break;case eA.OVER:for(let o=0;o<a.height;o++)for(let l=0;l<a.width;l++){const{index:d,frameIndex:u}=i(o,l);for(let f=0;f<this._png.channels;f++){const m=a.data[u+this._png.channels-1]/s,p=f%(this._png.channels-1)===0?1:a.data[u+f],g=Math.floor(m*p+(1-m)*r.data[d+f]);r.data[d+f]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var a;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((a=this._frames)==null?void 0:a.at(0)).data:this._inflator.result;if(this._filterMethod!==oF.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Q_.NO_INTERLACE)this._png.data=sF({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Q_.ADAM7)this._png.data=jEe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,a=this._frames.at(-1);a?a.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:wb.NONE,blendOp:eA.SOURCE,data:r}),this._inflator=new rF,this._writingDataChunks=!1}}function IEe(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var lF;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(lF||(lF={}));function $Ee(e,t){return new LEe(e,t).decode()}var Rr=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function tA(){Rr.console&&typeof Rr.console.log=="function"&&Rr.console.log.apply(Rr.console,arguments)}var Wn={log:tA,warn:function(e){Rr.console&&(typeof Rr.console.warn=="function"?Rr.console.warn.apply(Rr.console,arguments):tA.call(null,arguments))},error:function(e){Rr.console&&(typeof Rr.console.error=="function"?Rr.console.error.apply(Rr.console,arguments):tA(e))}};function rA(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){ph(a.response,t,r)},a.onerror=function(){Wn.error("could not download file")},a.send()}function cF(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Nb(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ph=Rr.saveAs||((typeof window>"u"?"undefined":Rn(window))!=="object"||window!==Rr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=Rr.URL||Rr.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?cF(s.href)?rA(e,t,r):Nb(s,s.target="_blank"):Nb(s)):(s.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(s.href)},4e4),setTimeout(function(){Nb(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(cF(e))rA(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){Nb(a)})}else navigator.msSaveOrOpenBlob((function(s,i){return i===void 0?i={autoBom:!1}:Rn(i)!=="object"&&(Wn.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return rA(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(Rr.HTMLElement)||Rr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Rn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=f:location=f,a=null},l.readAsDataURL(e)}else{var d=Rr.URL||Rr.webkitURL,u=d.createObjectURL(e);a?a.location=u:location.href=u,a=null,setTimeout(function(){d.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function aX(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<r.length;a++){var s=r[a].re,i=r[a].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),d=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),d.length==1&&(d="0"+d),u.length==1&&(u="0"+u),"#"+l+d+u}}var $b=Rr.atob.bind(Rr),dF=Rr.btoa.bind(Rr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function nA(e,t){var r=e[0],a=e[1],s=e[2],i=e[3];r=hi(r,a,s,i,t[0],7,-680876936),i=hi(i,r,a,s,t[1],12,-389564586),s=hi(s,i,r,a,t[2],17,606105819),a=hi(a,s,i,r,t[3],22,-1044525330),r=hi(r,a,s,i,t[4],7,-176418897),i=hi(i,r,a,s,t[5],12,1200080426),s=hi(s,i,r,a,t[6],17,-1473231341),a=hi(a,s,i,r,t[7],22,-45705983),r=hi(r,a,s,i,t[8],7,1770035416),i=hi(i,r,a,s,t[9],12,-1958414417),s=hi(s,i,r,a,t[10],17,-42063),a=hi(a,s,i,r,t[11],22,-1990404162),r=hi(r,a,s,i,t[12],7,1804603682),i=hi(i,r,a,s,t[13],12,-40341101),s=hi(s,i,r,a,t[14],17,-1502002290),r=mi(r,a=hi(a,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=mi(i,r,a,s,t[6],9,-1069501632),s=mi(s,i,r,a,t[11],14,643717713),a=mi(a,s,i,r,t[0],20,-373897302),r=mi(r,a,s,i,t[5],5,-701558691),i=mi(i,r,a,s,t[10],9,38016083),s=mi(s,i,r,a,t[15],14,-660478335),a=mi(a,s,i,r,t[4],20,-405537848),r=mi(r,a,s,i,t[9],5,568446438),i=mi(i,r,a,s,t[14],9,-1019803690),s=mi(s,i,r,a,t[3],14,-187363961),a=mi(a,s,i,r,t[8],20,1163531501),r=mi(r,a,s,i,t[13],5,-1444681467),i=mi(i,r,a,s,t[2],9,-51403784),s=mi(s,i,r,a,t[7],14,1735328473),r=pi(r,a=mi(a,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=pi(i,r,a,s,t[8],11,-2022574463),s=pi(s,i,r,a,t[11],16,1839030562),a=pi(a,s,i,r,t[14],23,-35309556),r=pi(r,a,s,i,t[1],4,-1530992060),i=pi(i,r,a,s,t[4],11,1272893353),s=pi(s,i,r,a,t[7],16,-155497632),a=pi(a,s,i,r,t[10],23,-1094730640),r=pi(r,a,s,i,t[13],4,681279174),i=pi(i,r,a,s,t[0],11,-358537222),s=pi(s,i,r,a,t[3],16,-722521979),a=pi(a,s,i,r,t[6],23,76029189),r=pi(r,a,s,i,t[9],4,-640364487),i=pi(i,r,a,s,t[12],11,-421815835),s=pi(s,i,r,a,t[15],16,530742520),r=gi(r,a=pi(a,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=gi(i,r,a,s,t[7],10,1126891415),s=gi(s,i,r,a,t[14],15,-1416354905),a=gi(a,s,i,r,t[5],21,-57434055),r=gi(r,a,s,i,t[12],6,1700485571),i=gi(i,r,a,s,t[3],10,-1894986606),s=gi(s,i,r,a,t[10],15,-1051523),a=gi(a,s,i,r,t[1],21,-2054922799),r=gi(r,a,s,i,t[8],6,1873313359),i=gi(i,r,a,s,t[15],10,-30611744),s=gi(s,i,r,a,t[6],15,-1560198380),a=gi(a,s,i,r,t[13],21,1309151649),r=gi(r,a,s,i,t[4],6,-145523070),i=gi(i,r,a,s,t[11],10,-1120210379),s=gi(s,i,r,a,t[2],15,718787259),a=gi(a,s,i,r,t[9],21,-343485551),e[0]=mf(r,e[0]),e[1]=mf(a,e[1]),e[2]=mf(s,e[2]),e[3]=mf(i,e[3])}function G2(e,t,r,a,s,i){return t=mf(mf(t,e),mf(a,i)),mf(t<<s|t>>>32-s,r)}function hi(e,t,r,a,s,i,o){return G2(t&r|~t&a,e,t,s,i,o)}function mi(e,t,r,a,s,i,o){return G2(t&a|r&~a,e,t,s,i,o)}function pi(e,t,r,a,s,i,o){return G2(t^r^a,e,t,s,i,o)}function gi(e,t,r,a,s,i,o){return G2(r^(t|~a),e,t,s,i,o)}function sX(e){var t,r=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)nA(a,FEe(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(nA(a,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,nA(a,s),a}function FEe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var uF="0123456789abcdef".split("");function BEe(e){for(var t="",r=0;r<4;r++)t+=uF[e>>8*r+4&15]+uF[e>>8*r&15];return t}function zEe(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Pk(e){return sX(e).map(zEe).join("")}var qEe=(function(e){for(var t=0;t<e.length;t++)e[t]=BEe(e[t]);return e.join("")})(sX("hello"))!="5d41402abc4b2a76b9719d911017c592";function mf(e,t){if(qEe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Mk(e,t){var r,a,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length|0),new Array(i+1).join(s)),l=[],d=0;d<256;d++)l[d]=d;var u=0;for(d=0;d<256;d++){var f=l[d];u=(u+f+o.charCodeAt(d))%256,l[d]=l[u],l[u]=f}r=e,a=l}else l=a;var m=t.length,p=0,g=0,b="";for(d=0;d<m;d++)g=(g+(f=l[p=(p+1)%256]))%256,l[p]=l[g],l[g]=f,o=l[(l[p]+l[g])%256],b+=String.fromCharCode(t.charCodeAt(d)^o);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var fF={print:4,modify:8,copy:16,"annot-forms":32};function dp(e,t,r,a){this.v=1,this.r=2;var s=192;e.forEach(function(l){if(fF.perm!==void 0)throw new Error("Invalid permission: "+l);s+=fF[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=Pk(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=Mk(this.encryptionKey,this.padding)}function up(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var s=e.charCodeAt(a);t+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):e[a]}return t}function hF(e){if(Rn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,s){if(s=s||!1,typeof r!="string"||typeof a!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!s],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,a)}catch(l){Rr.console&&Wn.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function hj(e){if(!(this instanceof hj))return new hj(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function iX(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function xh(e,t,r,a,s){if(!(this instanceof xh))return new xh(e,t,r,a,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,iX.call(this,a,s)}function xp(e,t,r,a,s){if(!(this instanceof xp))return new xp(e,t,r,a,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,iX.call(this,a,s)}function ir(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,d=16,u="S",f=null;Rn(e=e||{})==="object"&&(r=e.orientation,a=e.unit||a,s=e.format||s,i=e.compress||e.compressPdf||i,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,p={},g={internal:{},__private__:{}};g.__private__.PubSub=hF;var b="1.3",v=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(B){b=B};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return y};var j=g.__private__.getPageFormat=function(B){return y[B]};s=s||"a4";var _="compat",C="advanced",A=_;function S(){this.saveGraphicsState(),oe(new Zt(Ce,0,0,-Ce,0,Vl()*Ce).toString()+" cm"),this.setFontSize(this.getFontSize()/Ce),u="n",A=C}function T(){this.restoreGraphicsState(),u="S",A=_}var O=g.__private__.combineFontStyleAndFontWeight=function(B,te){if(B=="bold"&&te=="normal"||B=="bold"&&te==400||B=="normal"&&te=="italic"||B=="bold"&&te=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return te&&(B=te==400||te==="normal"?B==="italic"?"italic":"normal":te!=700&&te!=="bold"||B!=="normal"?(te==700?"bold":te)+""+B:"bold"),B};g.advancedAPI=function(B){var te=A===_;return te&&S.call(this),typeof B!="function"||(B(this),te&&T.call(this)),this},g.compatAPI=function(B){var te=A===C;return te&&T.call(this),typeof B!="function"||(B(this),te&&S.call(this)),this},g.isAdvancedAPI=function(){return A===C};var R,M=function(B){if(A!==C)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=g.roundToPrecision=g.__private__.roundToPrecision=function(B,te){var ye=t||te;if(isNaN(B)||isNaN(ye))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(ye).replace(/0+$/,"")};R=g.hpf=g.__private__.hpf=typeof d=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,d)}:d==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,16)};var D=g.f2=g.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return I(B,2)},$=g.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return I(B,3)},K=g.scale=g.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return A===_?B*Ce:A===C?B:void 0},U=function(B){return K((function(te){return A===_?Vl()-te:A===C?te:void 0})(B))};g.__private__.setPrecision=g.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(t=parseInt(B,10))};var J,V="00000000000000000000000000000000",G=g.__private__.getFileId=function(){return V},q=g.__private__.setFileId=function(B){return V=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Jn=new dp(f.userPermissions,f.userPassword,f.ownerPassword,V)),V};g.setFileId=function(B){return q(B),this},g.getFileId=function(){return G()};var Y=g.__private__.convertDateToPDFDate=function(B){var te=B.getTimezoneOffset(),ye=te<0?"+":"-",ke=Math.floor(Math.abs(te/60)),Le=Math.abs(te%60),nt=[ye,X(ke),"'",X(Le),"'"].join("");return["D:",B.getFullYear(),X(B.getMonth()+1),X(B.getDate()),X(B.getHours()),X(B.getMinutes()),X(B.getSeconds()),nt].join("")},Q=g.__private__.convertPDFDateToDate=function(B){var te=parseInt(B.substr(2,4),10),ye=parseInt(B.substr(6,2),10)-1,ke=parseInt(B.substr(8,2),10),Le=parseInt(B.substr(10,2),10),nt=parseInt(B.substr(12,2),10),ht=parseInt(B.substr(14,2),10);return new Date(te,ye,ke,Le,nt,ht,0)},F=g.__private__.setCreationDate=function(B){var te;if(B===void 0&&(B=new Date),B instanceof Date)te=Y(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");te=B}return J=te},z=g.__private__.getCreationDate=function(B){var te=J;return B==="jsDate"&&(te=Q(J)),te};g.setCreationDate=function(B){return F(B),this},g.getCreationDate=function(B){return z(B)};var H,X=g.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},ne=g.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},ie=0,ce=[],ge=[],he=0,ue=[],Se=[],je=!1,Be=ge;g.__private__.setCustomOutputDestination=function(B){je=!0,Be=B};var $e=function(B){je||(Be=B)};g.__private__.resetCustomOutputDestination=function(){je=!1,Be=ge};var oe=g.__private__.out=function(B){return B=B.toString(),he+=B.length+1,Be.push(B),Be},Xe=g.__private__.write=function(B){return oe(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},pt=g.__private__.getArrayBuffer=function(B){for(var te=B.length,ye=new ArrayBuffer(te),ke=new Uint8Array(ye);te--;)ke[te]=B.charCodeAt(te);return ye},Oe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Oe};var Ee=e.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(B){return Ee=A===C?B/Ce:B,this};var lt,ut=g.__private__.getFontSize=g.getFontSize=function(){return A===_?Ee:Ee*Ce},gt=e.R2L||!1;g.__private__.setR2L=g.setR2L=function(B){return gt=B,this},g.__private__.getR2L=g.getR2L=function(){return gt};var dt,Nt=g.__private__.setZoomMode=function(B){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))lt=B;else if(isNaN(B)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');lt=B}else lt=parseInt(B,10)};g.__private__.getZoomMode=function(){return lt};var zt,Dt=g.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');dt=B};g.__private__.getPageMode=function(){return dt};var Gt=g.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');zt=B};g.__private__.getLayoutMode=function(){return zt},g.__private__.setDisplayMode=g.setDisplayMode=function(B,te,ye){return Nt(B),Gt(te),Dt(ye),this};var rr={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(B){if(Object.keys(rr).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return rr[B]},g.__private__.getDocumentProperties=function(){return rr},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(B){for(var te in rr)rr.hasOwnProperty(te)&&B[te]&&(rr[te]=B[te]);return this},g.__private__.setDocumentProperty=function(B,te){if(Object.keys(rr).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return rr[B]=te};var jt,Ce,Ke,Jt,Bt,bt={},Lt={},sr=[],or={},wn={},fr={},kr={},mn=null,Er=0,nr=[],Wr=new hF(g),wi=e.hotfixes||[],Za={},As={},ii=[],Zt=function B(te,ye,ke,Le,nt,ht){if(!(this instanceof B))return new B(te,ye,ke,Le,nt,ht);isNaN(te)&&(te=1),isNaN(ye)&&(ye=0),isNaN(ke)&&(ke=0),isNaN(Le)&&(Le=1),isNaN(nt)&&(nt=0),isNaN(ht)&&(ht=0),this._matrix=[te,ye,ke,Le,nt,ht]};Object.defineProperty(Zt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Zt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Zt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Zt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Zt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Zt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Zt.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Zt.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Zt.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Zt.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Zt.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Zt.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Zt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Zt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Zt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Zt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Zt.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(R).join(B)},Zt.prototype.multiply=function(B){var te=B.sx*this.sx+B.shy*this.shx,ye=B.sx*this.shy+B.shy*this.sy,ke=B.shx*this.sx+B.sy*this.shx,Le=B.shx*this.shy+B.sy*this.sy,nt=B.tx*this.sx+B.ty*this.shx+this.tx,ht=B.tx*this.shy+B.ty*this.sy+this.ty;return new Zt(te,ye,ke,Le,nt,ht)},Zt.prototype.decompose=function(){var B=this.sx,te=this.shy,ye=this.shx,ke=this.sy,Le=this.tx,nt=this.ty,ht=Math.sqrt(B*B+te*te),Vt=(B/=ht)*ye+(te/=ht)*ke;ye-=B*Vt,ke-=te*Vt;var Qt=Math.sqrt(ye*ye+ke*ke);return Vt/=Qt,B*(ke/=Qt)<te*(ye/=Qt)&&(B=-B,te=-te,Vt=-Vt,ht=-ht),{scale:new Zt(ht,0,0,Qt,0,0),translate:new Zt(1,0,0,1,Le,nt),rotate:new Zt(B,te,-te,B,0,0),skew:new Zt(1,0,Vt,1,0,0)}},Zt.prototype.toString=function(B){return this.join(" ")},Zt.prototype.inversed=function(){var B=this.sx,te=this.shy,ye=this.shx,ke=this.sy,Le=this.tx,nt=this.ty,ht=1/(B*ke-te*ye),Vt=ke*ht,Qt=-te*ht,_r=-ye*ht,Mr=B*ht;return new Zt(Vt,Qt,_r,Mr,-Vt*Le-_r*nt,-Qt*Le-Mr*nt)},Zt.prototype.applyToPoint=function(B){var te=B.x*this.sx+B.y*this.shx+this.tx,ye=B.x*this.shy+B.y*this.sy+this.ty;return new Yi(te,ye)},Zt.prototype.applyToRectangle=function(B){var te=this.applyToPoint(B),ye=this.applyToPoint(new Yi(B.x+B.w,B.y+B.h));return new Fl(te.x,te.y,ye.x-te.x,ye.y-te.y)},Zt.prototype.clone=function(){var B=this.sx,te=this.shy,ye=this.shx,ke=this.sy,Le=this.tx,nt=this.ty;return new Zt(B,te,ye,ke,Le,nt)},g.Matrix=Zt;var Gi=g.matrixMult=function(B,te){return te.multiply(B)},qs=new Zt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=qs;var ks=function(B,te){if(!wn[B]){var ye=(te instanceof xh?"Sh":"P")+(Object.keys(or).length+1).toString(10);te.id=ye,wn[B]=ye,or[ye]=te,Wr.publish("addPattern",te)}};g.ShadingPattern=xh,g.TilingPattern=xp,g.addShadingPattern=function(B,te){return M("addShadingPattern()"),ks(B,te),this},g.beginTilingPattern=function(B){M("beginTilingPattern()"),jd(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},g.endTilingPattern=function(B,te){M("endTilingPattern()"),te.stream=Se[H].join(`
`),ks(B,te),Wr.publish("endTilingPattern",te),ii.pop().restore()};var Ha,Mn=g.__private__.newObject=function(){var B=Cn();return Sa(B,!0),B},Cn=g.__private__.newObjectDeferred=function(){return ie++,ce[ie]=function(){return he},ie},Sa=function(B,te){return te=typeof te=="boolean"&&te,ce[B]=he,te&&oe(B+" 0 obj"),B},Ni=g.__private__.newAdditionalObject=function(){var B={objId:Cn(),content:""};return ue.push(B),B},Qa=Cn(),pn=Cn(),_n=g.__private__.decodeColorString=function(B){var te=B.split(" ");if(te.length!==2||te[1]!=="g"&&te[1]!=="G")te.length!==5||te[4]!=="k"&&te[4]!=="K"||(te=[(1-te[0])*(1-te[3]),(1-te[1])*(1-te[3]),(1-te[2])*(1-te[3]),"r"]);else{var ye=parseFloat(te[0]);te=[ye,ye,ye,"r"]}for(var ke="#",Le=0;Le<3;Le++)ke+=("0"+Math.floor(255*parseFloat(te[Le])).toString(16)).slice(-2);return ke},es=g.__private__.encodeColorString=function(B){var te;typeof B=="string"&&(B={ch1:B});var ye=B.ch1,ke=B.ch2,Le=B.ch3,nt=B.ch4,ht=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ye=="string"&&ye.charAt(0)!=="#"){var Vt=new aX(ye);if(Vt.ok)ye=Vt.toHex();else if(!/^\d*\.?\d*$/.test(ye))throw new Error('Invalid color "'+ye+'" passed to jsPDF.encodeColorString.')}if(typeof ye=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ye)&&(ye="#"+ye[1]+ye[1]+ye[2]+ye[2]+ye[3]+ye[3]),typeof ye=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ye)){var Qt=parseInt(ye.substr(1),16);ye=Qt>>16&255,ke=Qt>>8&255,Le=255&Qt}if(ke===void 0||nt===void 0&&ye===ke&&ke===Le)te=typeof ye=="string"?ye+" "+ht[0]:B.precision===2?D(ye/255)+" "+ht[0]:$(ye/255)+" "+ht[0];else if(nt===void 0||Rn(nt)==="object"){if(nt&&!isNaN(nt.a)&&nt.a===0)return["1.","1.","1.",ht[1]].join(" ");te=typeof ye=="string"?[ye,ke,Le,ht[1]].join(" "):B.precision===2?[D(ye/255),D(ke/255),D(Le/255),ht[1]].join(" "):[$(ye/255),$(ke/255),$(Le/255),ht[1]].join(" ")}else te=typeof ye=="string"?[ye,ke,Le,nt,ht[2]].join(" "):B.precision===2?[D(ye),D(ke),D(Le),D(nt),ht[2]].join(" "):[$(ye),$(ke),$(Le),$(nt),ht[2]].join(" ");return te},Us=g.__private__.getFilters=function(){return o},oi=g.__private__.putStream=function(B){var te=(B=B||{}).data||"",ye=B.filters||Us(),ke=B.alreadyAppliedFilters||[],Le=B.addLength1||!1,nt=te.length,ht=B.objectId,Vt=function(Ga){return Ga};if(f!==null&&ht===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Vt=Jn.encryptor(ht,0));var Qt={};ye===!0&&(ye=["FlateEncode"]);var _r=B.additionalKeyValues||[],Mr=(Qt=ir.API.processDataByFilters!==void 0?ir.API.processDataByFilters(te,ye):{data:te,reverseChain:[]}).reverseChain+(Array.isArray(ke)?ke.join(" "):ke.toString());if(Qt.data.length!==0&&(_r.push({key:"Length",value:Qt.data.length}),Le===!0&&_r.push({key:"Length1",value:nt})),Mr.length!=0)if(Mr.split("/").length-1==1)_r.push({key:"Filter",value:Mr});else{_r.push({key:"Filter",value:"["+Mr+"]"});for(var rn=0;rn<_r.length;rn+=1)if(_r[rn].key==="DecodeParms"){for(var ra=[],_a=0;_a<Qt.reverseChain.split("/").length-1;_a+=1)ra.push("null");ra.push(_r[rn].value),_r[rn].value="["+ra.join(" ")+"]"}}oe("<<");for(var Dn=0;Dn<_r.length;Dn++)oe("/"+_r[Dn].key+" "+_r[Dn].value);oe(">>"),Qt.data.length!==0&&(oe("stream"),oe(Vt(Qt.data)),oe("endstream"))},Ll=g.__private__.putPage=function(B){var te=B.number,ye=B.data,ke=B.objId,Le=B.contentsObjId;Sa(ke,!0),oe("<</Type /Page"),oe("/Parent "+B.rootDictionaryObjId+" 0 R"),oe("/Resources "+B.resourceDictionaryObjId+" 0 R"),oe("/MediaBox ["+parseFloat(R(B.mediaBox.bottomLeftX))+" "+parseFloat(R(B.mediaBox.bottomLeftY))+" "+R(B.mediaBox.topRightX)+" "+R(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&oe("/CropBox ["+R(B.cropBox.bottomLeftX)+" "+R(B.cropBox.bottomLeftY)+" "+R(B.cropBox.topRightX)+" "+R(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&oe("/BleedBox ["+R(B.bleedBox.bottomLeftX)+" "+R(B.bleedBox.bottomLeftY)+" "+R(B.bleedBox.topRightX)+" "+R(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&oe("/TrimBox ["+R(B.trimBox.bottomLeftX)+" "+R(B.trimBox.bottomLeftY)+" "+R(B.trimBox.topRightX)+" "+R(B.trimBox.topRightY)+"]"),B.artBox!==null&&oe("/ArtBox ["+R(B.artBox.bottomLeftX)+" "+R(B.artBox.bottomLeftY)+" "+R(B.artBox.topRightX)+" "+R(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&oe("/UserUnit "+B.userUnit),Wr.publish("putPage",{objId:ke,pageContext:nr[te],pageNumber:te,page:ye}),oe("/Contents "+Le+" 0 R"),oe(">>"),oe("endobj");var nt=ye.join(`
`);return A===C&&(nt+=`
Q`),Sa(Le,!0),oi({data:nt,filters:Us(),objectId:Le}),oe("endobj"),ke},Si=g.__private__.putPages=function(){var B,te,ye=[];for(B=1;B<=Er;B++)nr[B].objId=Cn(),nr[B].contentsObjId=Cn();for(B=1;B<=Er;B++)ye.push(Ll({number:B,data:Se[B],objId:nr[B].objId,contentsObjId:nr[B].contentsObjId,mediaBox:nr[B].mediaBox,cropBox:nr[B].cropBox,bleedBox:nr[B].bleedBox,trimBox:nr[B].trimBox,artBox:nr[B].artBox,userUnit:nr[B].userUnit,rootDictionaryObjId:Qa,resourceDictionaryObjId:pn}));Sa(Qa,!0),oe("<</Type /Pages");var ke="/Kids [";for(te=0;te<Er;te++)ke+=ye[te]+" 0 R ";oe(ke+"]"),oe("/Count "+Er),oe(">>"),oe("endobj"),Wr.publish("postPutPages")},Ci=function(B){Wr.publish("putFont",{font:B,out:oe,newObject:Mn,putStream:oi}),B.isAlreadyPutted!==!0&&(B.objectNumber=Mn(),oe("<<"),oe("/Type /Font"),oe("/BaseFont /"+up(B.postScriptName)),oe("/Subtype /Type1"),typeof B.encoding=="string"&&oe("/Encoding /"+B.encoding),oe("/FirstChar 32"),oe("/LastChar 255"),oe(">>"),oe("endobj"))},_i=function(B){B.objectNumber=Mn();var te=[];te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Form"}),te.push({key:"BBox",value:"["+[R(B.x),R(B.y),R(B.x+B.width),R(B.y+B.height)].join(" ")+"]"}),te.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var ye=B.pages[1].join(`
`);oi({data:ye,additionalKeyValues:te,objectId:B.objectNumber}),oe("endobj")},Ai=function(B,te){te||(te=21);var ye=Mn(),ke=(function(ht,Vt){var Qt,_r=[],Mr=1/(Vt-1);for(Qt=0;Qt<1;Qt+=Mr)_r.push(Qt);if(_r.push(1),ht[0].offset!=0){var rn={offset:0,color:ht[0].color};ht.unshift(rn)}if(ht[ht.length-1].offset!=1){var ra={offset:1,color:ht[ht.length-1].color};ht.push(ra)}for(var _a="",Dn=0,Ga=0;Ga<_r.length;Ga++){for(Qt=_r[Ga];Qt>ht[Dn+1].offset;)Dn++;var Da=ht[Dn].offset,hs=(Qt-Da)/(ht[Dn+1].offset-Da),Hl=ht[Dn].color,No=ht[Dn+1].color;_a+=ne(Math.round((1-hs)*Hl[0]+hs*No[0]).toString(16))+ne(Math.round((1-hs)*Hl[1]+hs*No[1]).toString(16))+ne(Math.round((1-hs)*Hl[2]+hs*No[2]).toString(16))}return _a.trim()})(B.colors,te),Le=[];Le.push({key:"FunctionType",value:"0"}),Le.push({key:"Domain",value:"[0.0 1.0]"}),Le.push({key:"Size",value:"["+te+"]"}),Le.push({key:"BitsPerSample",value:"8"}),Le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),oi({data:ke,additionalKeyValues:Le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ye}),oe("endobj"),B.objectNumber=Mn(),oe("<< /ShadingType "+B.type),oe("/ColorSpace /DeviceRGB");var nt="/Coords ["+R(parseFloat(B.coords[0]))+" "+R(parseFloat(B.coords[1]))+" ";B.type===2?nt+=R(parseFloat(B.coords[2]))+" "+R(parseFloat(B.coords[3])):nt+=R(parseFloat(B.coords[2]))+" "+R(parseFloat(B.coords[3]))+" "+R(parseFloat(B.coords[4]))+" "+R(parseFloat(B.coords[5])),oe(nt+="]"),B.matrix&&oe("/Matrix ["+B.matrix.toString()+"]"),oe("/Function "+ye+" 0 R"),oe("/Extend [true true]"),oe(">>"),oe("endobj")},ki=function(B,te){var ye=Cn(),ke=Mn();te.push({resourcesOid:ye,objectOid:ke}),B.objectNumber=ke;var Le=[];Le.push({key:"Type",value:"/Pattern"}),Le.push({key:"PatternType",value:"1"}),Le.push({key:"PaintType",value:"1"}),Le.push({key:"TilingType",value:"1"}),Le.push({key:"BBox",value:"["+B.boundingBox.map(R).join(" ")+"]"}),Le.push({key:"XStep",value:R(B.xStep)}),Le.push({key:"YStep",value:R(B.yStep)}),Le.push({key:"Resources",value:ye+" 0 R"}),B.matrix&&Le.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),oi({data:B.stream,additionalKeyValues:Le,objectId:B.objectNumber}),oe("endobj")},bo=function(B){for(var te in B.objectNumber=Mn(),oe("<<"),B)switch(te){case"opacity":oe("/ca "+D(B[te]));break;case"stroke-opacity":oe("/CA "+D(B[te]))}oe(">>"),oe("endobj")},Os=function(B){Sa(B.resourcesOid,!0),oe("<<"),oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var te in oe("/Font <<"),bt)bt.hasOwnProperty(te)&&(m===!1||m===!0&&p.hasOwnProperty(te))&&oe("/"+te+" "+bt[te].objectNumber+" 0 R");oe(">>")})(),(function(){if(Object.keys(or).length>0){for(var te in oe("/Shading <<"),or)or.hasOwnProperty(te)&&or[te]instanceof xh&&or[te].objectNumber>=0&&oe("/"+te+" "+or[te].objectNumber+" 0 R");Wr.publish("putShadingPatternDict"),oe(">>")}})(),(function(te){if(Object.keys(or).length>0){for(var ye in oe("/Pattern <<"),or)or.hasOwnProperty(ye)&&or[ye]instanceof g.TilingPattern&&or[ye].objectNumber>=0&&or[ye].objectNumber<te&&oe("/"+ye+" "+or[ye].objectNumber+" 0 R");Wr.publish("putTilingPatternDict"),oe(">>")}})(B.objectOid),(function(){if(Object.keys(fr).length>0){var te;for(te in oe("/ExtGState <<"),fr)fr.hasOwnProperty(te)&&fr[te].objectNumber>=0&&oe("/"+te+" "+fr[te].objectNumber+" 0 R");Wr.publish("putGStateDict"),oe(">>")}})(),(function(){for(var te in oe("/XObject <<"),Za)Za.hasOwnProperty(te)&&Za[te].objectNumber>=0&&oe("/"+te+" "+Za[te].objectNumber+" 0 R");Wr.publish("putXobjectDict"),oe(">>")})(),oe(">>"),oe("endobj")},An=function(B){Lt[B.fontName]=Lt[B.fontName]||{},Lt[B.fontName][B.fontStyle]=B.id},_c=function(B,te,ye,ke,Le){var nt={id:"F"+(Object.keys(bt).length+1).toString(10),postScriptName:B,fontName:te,fontStyle:ye,encoding:ke,isStandardFont:Le||!1,metadata:{}};return Wr.publish("addFont",{font:nt,instance:this}),bt[nt.id]=nt,An(nt),nt.id},Vs=g.__private__.pdfEscape=g.pdfEscape=function(B,te){return(function(ye,ke){var Le,nt,ht,Vt,Qt,_r,Mr,rn,ra;if(ht=(ke=ke||{}).sourceEncoding||"Unicode",Qt=ke.outputEncoding,(ke.autoencode||Qt)&&bt[jt].metadata&&bt[jt].metadata[ht]&&bt[jt].metadata[ht].encoding&&(Vt=bt[jt].metadata[ht].encoding,!Qt&&bt[jt].encoding&&(Qt=bt[jt].encoding),!Qt&&Vt.codePages&&(Qt=Vt.codePages[0]),typeof Qt=="string"&&(Qt=Vt[Qt]),Qt)){for(Mr=!1,_r=[],Le=0,nt=ye.length;Le<nt;Le++)(rn=Qt[ye.charCodeAt(Le)])?_r.push(String.fromCharCode(rn)):_r.push(ye[Le]),_r[Le].charCodeAt(0)>>8&&(Mr=!0);ye=_r.join("")}for(Le=ye.length;Mr===void 0&&Le!==0;)ye.charCodeAt(Le-1)>>8&&(Mr=!0),Le--;if(!Mr)return ye;for(_r=ke.noBOM?[]:[254,255],Le=0,nt=ye.length;Le<nt;Le++){if((ra=(rn=ye.charCodeAt(Le))>>8)>>8)throw new Error("Character at position "+Le+" of string '"+ye+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");_r.push(ra),_r.push(rn-(ra<<8))}return String.fromCharCode.apply(void 0,_r)})(B,te).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Oi=g.__private__.beginPage=function(B){Se[++Er]=[],nr[Er]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},kc(Er),$e(Se[H])},jo=function(B,te){var ye,ke,Le;switch(r=te||r,typeof B=="string"&&(ye=j(B.toLowerCase()),Array.isArray(ye)&&(ke=ye[0],Le=ye[1])),Array.isArray(B)&&(ke=B[0]*Ce,Le=B[1]*Ce),isNaN(ke)&&(ke=s[0],Le=s[1]),(ke>14400||Le>14400)&&(Wn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ke=Math.min(14400,ke),Le=Math.min(14400,Le)),s=[ke,Le],r.substr(0,1)){case"l":Le>ke&&(s=[Le,ke]);break;case"p":ke>Le&&(s=[Le,ke])}Oi(s),mr(vd),oe(Ri),Su!==0&&oe(Su+" J"),rs!==0&&oe(rs+" j"),Wr.publish("addPage",{pageNumber:Er})},Ac=function(B){B>0&&B<=Er&&(Se.splice(B,1),nr.splice(B,1),Er--,H>Er&&(H=Er),this.setPage(H))},kc=function(B){B>0&&B<=Er&&(H=B)},Oc=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Se.length-1},De=function(B,te,ye){var ke,Le=void 0;return ye=ye||{},B=B!==void 0?B:bt[jt].fontName,te=te!==void 0?te:bt[jt].fontStyle,ke=B.toLowerCase(),Lt[ke]!==void 0&&Lt[ke][te]!==void 0?Le=Lt[ke][te]:Lt[B]!==void 0&&Lt[B][te]!==void 0?Le=Lt[B][te]:ye.disableWarning===!1&&Wn.warn("Unable to look up font label for font '"+B+"', '"+te+"'. Refer to getFontList() for available fonts."),Le||ye.noFallback||(Le=Lt.times[te])==null&&(Le=Lt.times.normal),Le},ft=g.__private__.putInfo=function(){var B=Mn(),te=function(ke){return ke};for(var ye in f!==null&&(te=Jn.encryptor(B,0)),oe("<<"),oe("/Producer ("+Vs(te("jsPDF "+ir.version))+")"),rr)rr.hasOwnProperty(ye)&&rr[ye]&&oe("/"+ye.substr(0,1).toUpperCase()+ye.substr(1)+" ("+Vs(te(rr[ye]))+")");oe("/CreationDate ("+Vs(te(J))+")"),oe(">>"),oe("endobj")},It=g.__private__.putCatalog=function(B){var te=(B=B||{}).rootDictionaryObjId||Qa;switch(Mn(),oe("<<"),oe("/Type /Catalog"),oe("/Pages "+te+" 0 R"),lt||(lt="fullwidth"),lt){case"fullwidth":oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":oe("/OpenAction [3 0 R /Fit]");break;case"original":oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ye=""+lt;ye.substr(ye.length-1)==="%"&&(lt=parseInt(lt)/100),typeof lt=="number"&&oe("/OpenAction [3 0 R /XYZ null null "+D(lt)+"]")}switch(zt||(zt="continuous"),zt){case"continuous":oe("/PageLayout /OneColumn");break;case"single":oe("/PageLayout /SinglePage");break;case"two":case"twoleft":oe("/PageLayout /TwoColumnLeft");break;case"tworight":oe("/PageLayout /TwoColumnRight")}dt&&oe("/PageMode /"+dt),Wr.publish("putCatalog"),oe(">>"),oe("endobj")},Pt=g.__private__.putTrailer=function(){oe("trailer"),oe("<<"),oe("/Size "+(ie+1)),oe("/Root "+ie+" 0 R"),oe("/Info "+(ie-1)+" 0 R"),f!==null&&oe("/Encrypt "+Jn.oid+" 0 R"),oe("/ID [ <"+V+"> <"+V+"> ]"),oe(">>")},lr=g.__private__.putHeader=function(){oe("%PDF-"+b),oe("%")},ts=g.__private__.putXRef=function(){var B="0000000000";oe("xref"),oe("0 "+(ie+1)),oe("0000000000 65535 f ");for(var te=1;te<=ie;te++)typeof ce[te]=="function"?oe((B+ce[te]()).slice(-10)+" 00000 n "):ce[te]!==void 0?oe((B+ce[te]).slice(-10)+" 00000 n "):oe("0000000000 00000 n ")},li=g.__private__.buildDocument=function(){var B;ie=0,he=0,ge=[],ce=[],ue=[],Qa=Cn(),pn=Cn(),$e(ge),Wr.publish("buildDocument"),lr(),Si(),(function(){Wr.publish("putAdditionalObjects");for(var ye=0;ye<ue.length;ye++){var ke=ue[ye];Sa(ke.objId,!0),oe(ke.content),oe("endobj")}Wr.publish("postPutAdditionalObjects")})(),B=[],(function(){for(var ye in bt)bt.hasOwnProperty(ye)&&(m===!1||m===!0&&p.hasOwnProperty(ye))&&Ci(bt[ye])})(),(function(){var ye;for(ye in fr)fr.hasOwnProperty(ye)&&bo(fr[ye])})(),(function(){for(var ye in Za)Za.hasOwnProperty(ye)&&_i(Za[ye])})(),(function(ye){var ke;for(ke in or)or.hasOwnProperty(ke)&&(or[ke]instanceof xh?Ai(or[ke]):or[ke]instanceof xp&&ki(or[ke],ye))})(B),Wr.publish("putResources"),B.forEach(Os),Os({resourcesOid:pn,objectOid:Number.MAX_SAFE_INTEGER}),Wr.publish("postPutResources"),f!==null&&(Jn.oid=Mn(),oe("<<"),oe("/Filter /Standard"),oe("/V "+Jn.v),oe("/R "+Jn.r),oe("/U <"+Jn.toHexString(Jn.U)+">"),oe("/O <"+Jn.toHexString(Jn.O)+">"),oe("/P "+Jn.P),oe(">>"),oe("endobj")),ft(),It();var te=he;return ts(),Pt(),oe("startxref"),oe(""+te),oe("%%EOF"),$e(Se[H]),ge.join(`
`)},Ei=g.__private__.getBlob=function(B){return new Blob([pt(B)],{type:"application/pdf"})},ta=g.output=g.__private__.output=(Ha=function(B,te){switch(typeof(te=te||{})=="string"?te={filename:te}:te.filename=te.filename||"generated.pdf",B){case void 0:return li();case"save":g.save(te.filename);break;case"arraybuffer":return pt(li());case"blob":return Ei(li());case"bloburi":case"bloburl":if(Rr.URL!==void 0&&typeof Rr.URL.createObjectURL=="function")return Rr.URL&&Rr.URL.createObjectURL(Ei(li()))||void 0;Wn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ye="",ke=li();try{ye=dF(ke)}catch{ye=dF(unescape(encodeURIComponent(ke)))}return"data:application/pdf;filename="+te.filename+";base64,"+ye;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Rr)==="[object Window]"){var Le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",nt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';te.pdfObjectUrl&&(Le=te.pdfObjectUrl,nt="");var ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Le+'"'+nt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(te)+");<\/script></body></html>",Vt=Rr.open();return Vt!==null&&Vt.document.write(ht),Vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Rr)==="[object Window]"){var Qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(te.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+te.filename+'" width="500px" height="400px" /></body></html>',_r=Rr.open();if(_r!==null){_r.document.write(Qt);var Mr=this;_r.document.documentElement.querySelector("#pdfViewer").onload=function(){_r.document.title=te.filename,_r.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Mr.output("bloburl"))}}return _r}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Rr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var rn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",te)+'"></iframe></body></html>',ra=Rr.open();if(ra!==null&&(ra.document.write(rn),ra.document.title=te.filename),ra||typeof safari>"u")return ra;break;case"datauri":case"dataurl":return Rr.document.location.href=this.output("datauristring",te);default:return null}},Ha.foo=function(){try{return Ha.apply(this,arguments)}catch(ye){var B=ye.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var te="Error in function "+B.split(`
`)[0].split("<")[0]+": "+ye.message;if(!Rr.console)throw new Error(te);Rr.console.error(te,ye),Rr.alert&&alert(te)}},Ha.foo.bar=Ha,Ha.foo),Xn=function(B){return Array.isArray(wi)===!0&&wi.indexOf(B)>-1};switch(a){case"pt":Ce=1;break;case"mm":Ce=72/25.4;break;case"cm":Ce=72/2.54;break;case"in":Ce=72;break;case"px":Ce=Xn("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ce=12;break;case"ex":Ce=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Ce=a}var Jn=null;F(),q();var Un=g.__private__.getPageInfo=g.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:nr[B].objId,pageNumber:B,pageContext:nr[B]}},ha=g.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var te in nr)if(nr[te].objId===B)break;return Un(te)},Wi=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:nr[H].objId,pageNumber:H,pageContext:nr[H]}};g.addPage=function(){return jo.apply(this,arguments),this},g.setPage=function(){return kc.apply(this,arguments),$e.call(this,Se[H]),this},g.insertPage=function(B){return this.addPage(),this.movePage(H,B),this},g.movePage=function(B,te){var ye,ke;if(B>te){ye=Se[B],ke=nr[B];for(var Le=B;Le>te;Le--)Se[Le]=Se[Le-1],nr[Le]=nr[Le-1];Se[te]=ye,nr[te]=ke,this.setPage(te)}else if(B<te){ye=Se[B],ke=nr[B];for(var nt=B;nt<te;nt++)Se[nt]=Se[nt+1],nr[nt]=nr[nt+1];Se[te]=ye,nr[te]=ke,this.setPage(te)}return this},g.deletePage=function(){return Ac.apply(this,arguments),this},g.__private__.text=g.text=function(B,te,ye,ke,Le){var nt,ht,Vt,Qt,_r,Mr,rn,ra,_a,Dn=(ke=ke||{}).scope||this;if(typeof B=="number"&&typeof te=="number"&&(typeof ye=="string"||Array.isArray(ye))){var Ga=ye;ye=te,te=B,B=Ga}if(arguments[3]instanceof Zt==0?(Vt=arguments[4],Qt=arguments[5],Rn(rn=arguments[3])==="object"&&rn!==null||(typeof Vt=="string"&&(Qt=Vt,Vt=null),typeof rn=="string"&&(Qt=rn,rn=null),typeof rn=="number"&&(Vt=rn,rn=null),ke={flags:rn,angle:Vt,align:Qt})):(M("The transform parameter of text() with a Matrix value"),_a=Le),isNaN(te)||isNaN(ye)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return Dn;var Da,hs="",Hl=typeof ke.lineHeightFactor=="number"?ke.lineHeightFactor:$l,No=Dn.internal.scaleFactor;function Gl(cn){return cn=cn.split("	").join(Array(ke.TabLen||9).join(" ")),Vs(cn,rn)}function Vf(cn){for(var nn,Ln=cn.concat(),ka=[],nl=Ln.length;nl--;)typeof(nn=Ln.shift())=="string"?ka.push(nn):Array.isArray(cn)&&(nn.length===1||nn[1]===void 0&&nn[2]===void 0)?ka.push(nn[0]):ka.push([nn[0],nn[1],nn[2]]);return ka}function _u(cn,nn){var Ln;if(typeof cn=="string")Ln=nn(cn)[0];else if(Array.isArray(cn)){for(var ka,nl,Ao=cn.concat(),Cd=[],Wf=Ao.length;Wf--;)typeof(ka=Ao.shift())=="string"?Cd.push(nn(ka)[0]):Array.isArray(ka)&&typeof ka[0]=="string"&&(nl=nn(ka[0],ka[1],ka[2]),Cd.push([nl[0],nl[1],nl[2]]));Ln=Cd}return Ln}var Xo=!1,So=!0;if(typeof B=="string")Xo=!0;else if(Array.isArray(B)){var Nd=B.concat();ht=[];for(var Wl,ns=Nd.length;ns--;)(typeof(Wl=Nd.shift())!="string"||Array.isArray(Wl)&&typeof Wl[0]!="string")&&(So=!1);Xo=So}if(Xo===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var Tc=Ee/Dn.internal.scaleFactor,Rc=Tc*(Hl-1);switch(ke.baseline){case"bottom":ye-=Rc;break;case"top":ye+=Tc-Rc;break;case"hanging":ye+=Tc-2*Rc;break;case"middle":ye+=Tc/2-Rc}if((Mr=ke.maxWidth||0)>0&&(typeof B=="string"?B=Dn.splitTextToSize(B,Mr):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(cn,nn){return cn.concat(Dn.splitTextToSize(nn,Mr))},[]))),nt={text:B,x:te,y:ye,options:ke,mutex:{pdfEscape:Vs,activeFontKey:jt,fonts:bt,activeFontSize:Ee}},Wr.publish("preProcessText",nt),B=nt.text,Vt=(ke=nt.options).angle,_a instanceof Zt==0&&Vt&&typeof Vt=="number"){Vt*=Math.PI/180,ke.rotationDirection===0&&(Vt=-Vt),A===C&&(Vt=-Vt);var Au=Math.cos(Vt),Jo=Math.sin(Vt);_a=new Zt(Au,Jo,-Jo,Au,0,0)}else Vt&&Vt instanceof Zt&&(_a=Vt);A!==C||_a||(_a=qs),(_r=ke.charSpace||Ki)!==void 0&&(hs+=R(K(_r))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ra=ke.horizontalScale)!==void 0&&(hs+=R(100*ra)+` Tz
`),ke.lang;var Gs=-1,Kl=ke.renderingMode!==void 0?ke.renderingMode:ke.stroke,ku=Dn.internal.getCurrentPageInfo().pageContext;switch(Kl){case 0:case!1:case"fill":Gs=0;break;case 1:case!0:case"stroke":Gs=1;break;case 2:case"fillThenStroke":Gs=2;break;case 3:case"invisible":Gs=3;break;case 4:case"fillAndAddForClipping":Gs=4;break;case 5:case"strokeAndAddPathForClipping":Gs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Gs=6;break;case 7:case"addToPathForClipping":Gs=7}var Hf=ku.usedRenderingMode!==void 0?ku.usedRenderingMode:-1;Gs!==-1?hs+=Gs+` Tr
`:Hf!==-1&&(hs+=`0 Tr
`),Gs!==-1&&(ku.usedRenderingMode=Gs),Qt=ke.align||"left";var Pi,Co=Ee*Hl,Yl=Dn.internal.pageSize.getWidth(),Gf=bt[jt];_r=ke.charSpace||Ki,Mr=ke.maxWidth||0,rn=Object.assign({autoencode:!0,noBOM:!0},ke.flags);var _o=[],Pc=function(cn){return Dn.getStringUnitWidth(cn,{font:Gf,charSpace:_r,fontSize:Ee,doKerning:!1})*Ee/No};if(Object.prototype.toString.call(B)==="[object Array]"){var di;ht=Vf(B),Qt!=="left"&&(Pi=ht.map(Pc));var Ws,Zo=0;if(Qt==="right"){te-=Pi[0],B=[],ns=ht.length;for(var Qo=0;Qo<ns;Qo++)Qo===0?(Ws=Ti(te),di=fs(ye)):(Ws=K(Zo-Pi[Qo]),di=-Co),B.push([ht[Qo],Ws,di]),Zo=Pi[Qo]}else if(Qt==="center"){te-=Pi[0]/2,B=[],ns=ht.length;for(var Xl=0;Xl<ns;Xl++)Xl===0?(Ws=Ti(te),di=fs(ye)):(Ws=K((Zo-Pi[Xl])/2),di=-Co),B.push([ht[Xl],Ws,di]),Zo=Pi[Xl]}else if(Qt==="left"){B=[],ns=ht.length;for(var Ou=0;Ou<ns;Ou++)B.push(ht[Ou])}else if(Qt==="justify"&&Gf.encoding==="Identity-H"){B=[],ns=ht.length,Mr=Mr!==0?Mr:Yl;for(var Eu=0,Aa=0;Aa<ns;Aa++)if(di=Aa===0?fs(ye):-Co,Ws=Aa===0?Ti(te):Eu,Aa<ns-1){var pm=K((Mr-Pi[Aa])/(ht[Aa].split(" ").length-1)),el=ht[Aa].split(" ");B.push([el[0]+" ",Ws,di]),Eu=0;for(var tl=1;tl<el.length;tl++){var ms=(Pc(el[tl-1]+" "+el[tl])-Pc(el[tl]))*No+pm;tl==el.length-1?B.push([el[tl],ms,0]):B.push([el[tl]+" ",ms,0]),Eu-=ms}}else B.push([ht[Aa],Ws,di]);B.push(["",Eu,0])}else{if(Qt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],ns=ht.length,Mr=Mr!==0?Mr:Yl,Aa=0;Aa<ns;Aa++){di=Aa===0?fs(ye):-Co,Ws=Aa===0?Ti(te):0;var Jl=ht[Aa].split(" ").length-1,Tu=Jl>0?(Mr-Pi[Aa])/Jl:0;Aa<ns-1?_o.push(R(K(Tu))):_o.push(0),B.push([ht[Aa],Ws,di])}}}(typeof ke.R2L=="boolean"?ke.R2L:gt)===!0&&(B=_u(B,function(cn,nn,Ln){return[cn.split("").reverse().join(""),nn,Ln]})),nt={text:B,x:te,y:ye,options:ke,mutex:{pdfEscape:Vs,activeFontKey:jt,fonts:bt,activeFontSize:Ee}},Wr.publish("postProcessText",nt),B=nt.text,Da=nt.mutex.isHex||!1;var Ru=bt[jt].encoding;Ru!=="WinAnsiEncoding"&&Ru!=="StandardEncoding"||(B=_u(B,function(cn,nn,Ln){return[Gl(cn),nn,Ln]})),ht=Vf(B),B=[];for(var Zl,Ql,rl,Sd=Array.isArray(ht[0])?1:0,Mi="",ec=function(cn,nn,Ln){var ka="";return Ln instanceof Zt?(Ln=typeof ke.angle=="number"?Gi(Ln,new Zt(1,0,0,1,cn,nn)):Gi(new Zt(1,0,0,1,cn,nn),Ln),A===C&&(Ln=Gi(new Zt(1,0,0,-1,0,0),Ln)),ka=Ln.join(" ")+` Tm
`):ka=R(cn)+" "+R(nn)+` Td
`,ka},Es=0;Es<ht.length;Es++){switch(Mi="",Sd){case 1:rl=(Da?"<":"(")+ht[Es][0]+(Da?">":")"),Zl=parseFloat(ht[Es][1]),Ql=parseFloat(ht[Es][2]);break;case 0:rl=(Da?"<":"(")+ht[Es]+(Da?">":")"),Zl=Ti(te),Ql=fs(ye)}_o!==void 0&&_o[Es]!==void 0&&(Mi=_o[Es]+` Tw
`),Es===0?B.push(Mi+ec(Zl,Ql,_a)+rl):Sd===0?B.push(Mi+rl):Sd===1&&B.push(Mi+ec(Zl,Ql,_a)+rl)}B=Sd===0?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var Xi=`BT
/`;return Xi+=jt+" "+Ee+` Tf
`,Xi+=R(Ee*Hl)+` TL
`,Xi+=Ko+`
`,Xi+=hs,Xi+=B,oe(Xi+="ET"),p[jt]=!0,Dn};var Il=g.__private__.clip=g.clip=function(B){return oe(B==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Il("evenodd")},g.__private__.discardPath=g.discardPath=function(){return oe("n"),this};var us=g.__private__.isValidStyle=function(B){var te=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(te=!0),te};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(B){return us(B)&&(u=B),this};var Hr=g.__private__.getStyle=g.getStyle=function(B){var te=u;switch(B){case"D":case"S":te="S";break;case"F":te="f";break;case"FD":case"DF":te="B";break;case"f":case"f*":case"B":case"B*":te=B}return te},Ca=g.close=function(){return oe("h"),this};g.stroke=function(){return oe("S"),this},g.fill=function(B){return Hs("f",B),this},g.fillEvenOdd=function(B){return Hs("f*",B),this},g.fillStroke=function(B){return Hs("B",B),this},g.fillStrokeEvenOdd=function(B){return Hs("B*",B),this};var Hs=function(B,te){Rn(te)==="object"?lm(te,B):oe(B)},xd=function(B){B===null||A===C&&B===void 0||(B=Hr(B),oe(B))};function om(B,te,ye,ke,Le){var nt=new xp(te||this.boundingBox,ye||this.xStep,ke||this.yStep,this.gState,Le||this.matrix);nt.stream=this.stream;var ht=B+"$$"+this.cloneIndex+++"$$";return ks(ht,nt),nt}var lm=function(B,te){var ye=wn[B.key],ke=or[ye];if(ke instanceof xh)oe("q"),oe(Ff(te)),ke.gState&&g.setGState(ke.gState),oe(B.matrix.toString()+" cm"),oe("/"+ye+" sh"),oe("Q");else if(ke instanceof xp){var Le=new Zt(1,0,0,-1,0,Vl());B.matrix&&(Le=Le.multiply(B.matrix||qs),ye=om.call(ke,B.key,B.boundingBox,B.xStep,B.yStep,Le).id),oe("q"),oe("/Pattern cs"),oe("/"+ye+" scn"),ke.gState&&g.setGState(ke.gState),oe(te),oe("Q")}},Ff=function(B){switch(B){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Bf=g.moveTo=function(B,te){return oe(R(K(B))+" "+R(U(te))+" m"),this},cm=g.lineTo=function(B,te){return oe(R(K(B))+" "+R(U(te))+" l"),this},ci=g.curveTo=function(B,te,ye,ke,Le,nt){return oe([R(K(B)),R(U(te)),R(K(ye)),R(U(ke)),R(K(Le)),R(U(nt)),"c"].join(" ")),this};g.__private__.line=g.line=function(B,te,ye,ke,Le){if(isNaN(B)||isNaN(te)||isNaN(ye)||isNaN(ke)||!us(Le))throw new Error("Invalid arguments passed to jsPDF.line");return A===_?this.lines([[ye-B,ke-te]],B,te,[1,1],Le||"S"):this.lines([[ye-B,ke-te]],B,te,[1,1]).stroke()},g.__private__.lines=g.lines=function(B,te,ye,ke,Le,nt){var ht,Vt,Qt,_r,Mr,rn,ra,_a,Dn,Ga,Da,hs;if(typeof B=="number"&&(hs=ye,ye=te,te=B,B=hs),ke=ke||[1,1],nt=nt||!1,isNaN(te)||isNaN(ye)||!Array.isArray(B)||!Array.isArray(ke)||!us(Le)||typeof nt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Bf(te,ye),ht=ke[0],Vt=ke[1],_r=B.length,Ga=te,Da=ye,Qt=0;Qt<_r;Qt++)(Mr=B[Qt]).length===2?(Ga=Mr[0]*ht+Ga,Da=Mr[1]*Vt+Da,cm(Ga,Da)):(rn=Mr[0]*ht+Ga,ra=Mr[1]*Vt+Da,_a=Mr[2]*ht+Ga,Dn=Mr[3]*Vt+Da,Ga=Mr[4]*ht+Ga,Da=Mr[5]*Vt+Da,ci(rn,ra,_a,Dn,Ga,Da));return nt&&Ca(),xd(Le),this},g.path=function(B){for(var te=0;te<B.length;te++){var ye=B[te],ke=ye.c;switch(ye.op){case"m":Bf(ke[0],ke[1]);break;case"l":cm(ke[0],ke[1]);break;case"c":ci.apply(this,ke);break;case"h":Ca()}}return this},g.__private__.rect=g.rect=function(B,te,ye,ke,Le){if(isNaN(B)||isNaN(te)||isNaN(ye)||isNaN(ke)||!us(Le))throw new Error("Invalid arguments passed to jsPDF.rect");return A===_&&(ke=-ke),oe([R(K(B)),R(U(te)),R(K(ye)),R(K(ke)),"re"].join(" ")),xd(Le),this},g.__private__.triangle=g.triangle=function(B,te,ye,ke,Le,nt,ht){if(isNaN(B)||isNaN(te)||isNaN(ye)||isNaN(ke)||isNaN(Le)||isNaN(nt)||!us(ht))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ye-B,ke-te],[Le-ye,nt-ke],[B-Le,te-nt]],B,te,[1,1],ht,!0),this},g.__private__.roundedRect=g.roundedRect=function(B,te,ye,ke,Le,nt,ht){if(isNaN(B)||isNaN(te)||isNaN(ye)||isNaN(ke)||isNaN(Le)||isNaN(nt)||!us(ht))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Vt=4/3*(Math.SQRT2-1);return Le=Math.min(Le,.5*ye),nt=Math.min(nt,.5*ke),this.lines([[ye-2*Le,0],[Le*Vt,0,Le,nt-nt*Vt,Le,nt],[0,ke-2*nt],[0,nt*Vt,-Le*Vt,nt,-Le,nt],[2*Le-ye,0],[-Le*Vt,0,-Le,-nt*Vt,-Le,-nt],[0,2*nt-ke],[0,-nt*Vt,Le*Vt,-nt,Le,-nt]],B+Le,te,[1,1],ht,!0),this},g.__private__.ellipse=g.ellipse=function(B,te,ye,ke,Le){if(isNaN(B)||isNaN(te)||isNaN(ye)||isNaN(ke)||!us(Le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var nt=4/3*(Math.SQRT2-1)*ye,ht=4/3*(Math.SQRT2-1)*ke;return Bf(B+ye,te),ci(B+ye,te-ht,B+nt,te-ke,B,te-ke),ci(B-nt,te-ke,B-ye,te-ht,B-ye,te),ci(B-ye,te+ht,B-nt,te+ke,B,te+ke),ci(B+nt,te+ke,B+ye,te+ht,B+ye,te),xd(Le),this},g.__private__.circle=g.circle=function(B,te,ye,ke){if(isNaN(B)||isNaN(te)||isNaN(ye)||!us(ke))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,te,ye,ye,ke)},g.setFont=function(B,te,ye){return ye&&(te=O(te,ye)),jt=De(B,te,{disableWarning:!1}),this};var wo=g.__private__.getFont=g.getFont=function(){return bt[De.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var B,te,ye={};for(B in Lt)if(Lt.hasOwnProperty(B))for(te in ye[B]=[],Lt[B])Lt[B].hasOwnProperty(te)&&ye[B].push(te);return ye},g.addFont=function(B,te,ye,ke,Le){var nt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&nt.indexOf(arguments[3])!==-1?Le=arguments[3]:arguments[3]&&nt.indexOf(arguments[3])==-1&&(ye=O(ye,ke)),_c.call(this,B,te,ye,Le=Le||"Identity-H")};var $l,vd=e.lineWidth||.200025,Ec=g.__private__.getLineWidth=g.getLineWidth=function(){return vd},mr=g.__private__.setLineWidth=g.setLineWidth=function(B){return vd=B,oe(R(K(B))+" w"),this};g.__private__.setLineDash=ir.API.setLineDash=ir.API.setLineDashPattern=function(B,te){if(B=B||[],te=te||0,isNaN(te)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(ye){return R(K(ye))}).join(" "),te=R(K(te)),oe("["+B+"] "+te+" d"),this};var dm=g.__private__.getLineHeight=g.getLineHeight=function(){return Ee*$l};g.__private__.getLineHeight=g.getLineHeight=function(){return Ee*$l};var zf=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&($l=B),this},um=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return $l};zf(e.lineHeight);var Ti=g.__private__.getHorizontalCoordinate=function(B){return K(B)},fs=g.__private__.getVerticalCoordinate=function(B){return A===C?B:nr[H].mediaBox.topRightY-nr[H].mediaBox.bottomLeftY-K(B)},qf=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(B){return R(Ti(B))},yd=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(B){return R(fs(B))},Ri=e.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return _n(Ri)},g.__private__.setStrokeColor=g.setDrawColor=function(B,te,ye,ke){return Ri=es({ch1:B,ch2:te,ch3:ye,ch4:ke,pdfColorType:"draw",precision:2}),oe(Ri),this};var bd=e.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return _n(bd)},g.__private__.setFillColor=g.setFillColor=function(B,te,ye,ke){return bd=es({ch1:B,ch2:te,ch3:ye,ch4:ke,pdfColorType:"fill",precision:2}),oe(bd),this};var Ko=e.textColor||"0 g",fm=g.__private__.getTextColor=g.getTextColor=function(){return _n(Ko)};g.__private__.setTextColor=g.setTextColor=function(B,te,ye,ke){return Ko=es({ch1:B,ch2:te,ch3:ye,ch4:ke,pdfColorType:"text",precision:3}),this};var Ki=e.charSpace,Nu=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Ki||0)};g.__private__.setCharSpace=g.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ki=B,this};var Su=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(B){var te=g.CapJoinStyles[B];if(te===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Su=te,oe(te+" J"),this};var rs=0;g.__private__.setLineJoin=g.setLineJoin=function(B){var te=g.CapJoinStyles[B];if(te===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return rs=te,oe(te+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return oe(R(K(B))+" M"),this},g.GState=hj,g.setGState=function(B){(B=typeof B=="string"?fr[kr[B]]:Yo(null,B)).equals(mn)||(oe("/"+B.id+" gs"),mn=B)};var Yo=function(B,te){if(!B||!kr[B]){var ye=!1;for(var ke in fr)if(fr.hasOwnProperty(ke)&&fr[ke].equals(te)){ye=!0;break}if(ye)te=fr[ke];else{var Le="GS"+(Object.keys(fr).length+1).toString(10);fr[Le]=te,te.id=Le}return B&&(kr[B]=te.id),Wr.publish("addGState",te),te}};g.addGState=function(B,te){return Yo(B,te),this},g.saveGraphicsState=function(){return oe("q"),sr.push({key:jt,size:Ee,color:Ko}),this},g.restoreGraphicsState=function(){oe("Q");var B=sr.pop();return jt=B.key,Ee=B.size,Ko=B.color,mn=null,this},g.setCurrentTransformationMatrix=function(B){return oe(B.toString()+" cm"),this},g.comment=function(B){return oe("#"+B),this};var Yi=function(B,te){var ye=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ye},set:function(nt){isNaN(nt)||(ye=parseFloat(nt))}});var ke=te||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ke},set:function(nt){isNaN(nt)||(ke=parseFloat(nt))}});var Le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Le},set:function(nt){Le=nt.toString()}}),this},Fl=function(B,te,ye,ke){Yi.call(this,B,te),this.type="rect";var Le=ye||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Le},set:function(ht){isNaN(ht)||(Le=parseFloat(ht))}});var nt=ke||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return nt},set:function(ht){isNaN(ht)||(nt=parseFloat(ht))}}),this},Cu=function(){this.page=Er,this.currentPage=H,this.pages=Se.slice(0),this.pagesContext=nr.slice(0),this.x=Ke,this.y=Jt,this.matrix=Bt,this.width=zl(H),this.height=Uf(H),this.outputDestination=Be,this.id="",this.objectNumber=-1};Cu.prototype.restore=function(){Er=this.page,H=this.currentPage,nr=this.pagesContext,Se=this.pages,Ke=this.x,Jt=this.y,Bt=this.matrix,wd(H,this.width),ql(H,this.height),Be=this.outputDestination};var jd=function(B,te,ye,ke,Le){ii.push(new Cu),Er=H=0,Se=[],Ke=B,Jt=te,Bt=Le,Oi([ye,ke])};for(var Bl in g.beginFormObject=function(B,te,ye,ke,Le){return jd(B,te,ye,ke,Le),this},g.endFormObject=function(B){return(function(te){if(As[te])ii.pop().restore();else{var ye=new Cu,ke="Xo"+(Object.keys(Za).length+1).toString(10);ye.id=ke,As[te]=ke,Za[ke]=ye,Wr.publish("addFormObject",ye),ii.pop().restore()}})(B),this},g.doFormObject=function(B,te){var ye=Za[As[B]];return oe("q"),oe(te.toString()+" cm"),oe("/"+ye.id+" Do"),oe("Q"),this},g.getFormObject=function(B){var te=Za[As[B]];return{x:te.x,y:te.y,width:te.width,height:te.height,matrix:te.matrix}},g.save=function(B,te){return B=B||"generated.pdf",(te=te||{}).returnPromise=te.returnPromise||!1,te.returnPromise===!1?(ph(Ei(li()),B),typeof ph.unload=="function"&&Rr.setTimeout&&setTimeout(ph.unload,911),this):new Promise(function(ye,ke){try{var Le=ph(Ei(li()),B);typeof ph.unload=="function"&&Rr.setTimeout&&setTimeout(ph.unload,911),ye(Le)}catch(nt){ke(nt.message)}})},ir.API)ir.API.hasOwnProperty(Bl)&&(Bl==="events"&&ir.API.events.length?(function(B,te){var ye,ke,Le;for(Le=te.length-1;Le!==-1;Le--)ye=te[Le][0],ke=te[Le][1],B.subscribe.apply(B,[ye].concat(typeof ke=="function"?[ke]:ke))})(Wr,ir.API.events):g[Bl]=ir.API[Bl]);function zl(B){return nr[B].mediaBox.topRightX-nr[B].mediaBox.bottomLeftX}function wd(B,te){nr[B].mediaBox.topRightX=te+nr[B].mediaBox.bottomLeftX}function Uf(B){return nr[B].mediaBox.topRightY-nr[B].mediaBox.bottomLeftY}function ql(B,te){nr[B].mediaBox.topRightY=te+nr[B].mediaBox.bottomLeftY}var Ul=g.getPageWidth=function(B){return zl(B=B||H)/Ce},hm=g.setPageWidth=function(B,te){wd(B,te*Ce)},Vl=g.getPageHeight=function(B){return Uf(B=B||H)/Ce},mm=g.setPageHeight=function(B,te){ql(B,te*Ce)};return g.internal={pdfEscape:Vs,getStyle:Hr,getFont:wo,getFontSize:ut,getCharSpace:Nu,getTextColor:fm,getLineHeight:dm,getLineHeightFactor:um,getLineWidth:Ec,write:Xe,getHorizontalCoordinate:Ti,getVerticalCoordinate:fs,getCoordinateString:qf,getVerticalCoordinateString:yd,collections:{},newObject:Mn,newAdditionalObject:Ni,newObjectDeferred:Cn,newObjectDeferredBegin:Sa,getFilters:Us,putStream:oi,events:Wr,scaleFactor:Ce,pageSize:{getWidth:function(){return Ul(H)},setWidth:function(B){hm(H,B)},getHeight:function(){return Vl(H)},setHeight:function(B){mm(H,B)}},encryptionOptions:f,encryption:Jn,getEncryptor:function(B){return f!==null?Jn.encryptor(B,0):function(te){return te}},output:ta,getNumberOfPages:Oc,get pages(){return Se},out:oe,f2:D,f3:$,getPageInfo:Un,getPageInfoByObjId:ha,getCurrentPageInfo:Wi,getPDFVersion:v,Point:Yi,Rectangle:Fl,Matrix:Zt,hasHotfix:Xn},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Ul(H)},set:function(B){hm(H,B)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Vl(H)},set:function(B){mm(H,B)},enumerable:!0,configurable:!0}),(function(B){for(var te=0,ye=Oe.length;te<ye;te++){var ke=_c.call(this,B[te][0],B[te][1],B[te][2],Oe[te][3],!0);m===!1&&(p[ke]=!0);var Le=B[te][0].split("-");An({id:ke,fontName:Le[0],fontStyle:Le[1]||""})}Wr.publish("addFonts",{fonts:bt,dictionary:Lt})}).call(g,Oe),jt="F1",jo(s,r),Wr.publish("initialized"),g}dp.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},dp.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},dp.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},dp.prototype.processOwnerPassword=function(e,t){return Mk(Pk(t).substr(0,5),e)},dp.prototype.encryptor=function(e,t){var r=Pk(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return Mk(r,a)}},hj.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Rn(e)!==Rn(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},ir.API={events:[]},ir.version="3.0.4";var Ua=ir.API,uE=1,im=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},sp=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ir=function(e){return e.toFixed(2)},af=function(e){return e.toFixed(5)};Ua.__acroform__={};var yo=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},mF=function(e){return e*uE},Yc=function(e){var t=new lX,r=Xt.internal.getHeight(e)||0,a=Xt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ir(a)),Number(Ir(r))],t},UEe=Ua.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},VEe=Ua.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},HEe=Ua.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ya=Ua.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return HEe(e,t-1)},Xa=Ua.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return UEe(e,t-1)},Ja=Ua.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return VEe(e,t-1)},GEe=Ua.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],d={};return d.lowerLeft_X=r(s)||0,d.lowerLeft_Y=a(i+l)||0,d.upperRight_X=r(s+o)||0,d.upperRight_Y=a(i)||0,[Number(Ir(d.lowerLeft_X)),Number(Ir(d.lowerLeft_Y)),Number(Ir(d.upperRight_X)),Number(Ir(d.upperRight_Y))]},WEe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=Dk(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+Ir(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Yc(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},Dk=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(D){return D.split(`
`)}):s.map(function(D){return[D]});var i=r,o=Xt.internal.getHeight(e)||0;o=o<0?-o:o;var l=Xt.internal.getWidth(e)||0;l=l<0?-l:l;var d=function(D,$,K){if(D+1<s.length){var U=$+" "+s[D+1][0];return Sb(U,e,K).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var u,f,m=Sb("3",e,i).height,p=e.multiline?o-i:(o-m)/2,g=p+=2,b=0,v=0,y=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Sb(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var j="",_=0,C=0;C<s.length;C++)if(s.hasOwnProperty(C)){var A=!1;if(s[C].length!==1&&y!==s[C].length-1){if((m+2)*(_+2)+2>o)continue e;j+=s[C][y],A=!0,v=C,C--}else{j=(j+=s[C][y]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var S=parseInt(C),T=d(S,j,i),O=C>=s.length-1;if(T&&!O){j+=" ",y=0;continue}if(T||O){if(O)v=S;else if(e.multiline&&(m+2)*(_+2)+2>o)continue e}else{if(!e.multiline||(m+2)*(_+2)+2>o)continue e;v=S}}for(var R="",M=b;M<=v;M++){var I=s[M];if(e.multiline){if(M===v){R+=I[y]+" ",y=(y+1)%I.length;continue}if(M===b){R+=I[I.length-1]+" ";continue}}R+=I[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,f=Sb(R,e,i).width,e.textAlign){case"right":u=l-f-2;break;case"center":u=(l-f)/2;break;default:u=2}t+=Ir(u)+" "+Ir(g)+` Td
`,t+="("+im(R)+`) Tj
`,t+=-Ir(u)+` 0 Td
`,g=-(i+2),f=0,b=A?v:v+1,_++,j=""}break}return a.text=t,a.fontSize=i,a},Sb=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},KEe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},YEe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},XEe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Sc.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(KEe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");uE=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new cX,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i.objId=void 0,i.hasAnnotation&&YEe(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(a,s){var i=!a;for(var o in a||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],d=[],u=l.Rect;if(l.Rect&&(l.Rect=GEe(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Xt.createDefaultAppearanceStream(l),Rn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(d=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=WEe(l);d.push({key:"AP",value:"<</N "+f+">>"}),s.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var m="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var g=l.appearanceStreamContent[p];if(m+="/"+p+" ",m+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var b=g[o];typeof b=="function"&&(b=b.call(s,l)),m+="/"+o+" "+b+" ",s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(s,l)),m+="/"+o+" "+b,s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b);m+=">>"}d.push({key:"AP",value:`<<
`+m+">>"})}s.internal.putStream({additionalKeyValues:d,objectId:l.objId}),s.internal.out("endobj")}i&&(function(v,y){for(var j in v)if(v.hasOwnProperty(j)){var _=j,C=v[j];y.internal.newObjectDeferredBegin(C.objId,!0),Rn(C)==="object"&&typeof C.putStream=="function"&&C.putStream(),delete v[_]}})(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},oX=Ua.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Rn(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),s+="("+im(a(e[i].toString()))+")"):s+=e[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},aA=function(e,t,r){var a=function(s){return s};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+im(a(e))+")"},td=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};td.prototype.toString=function(){return this.objId+" 0 R"},td.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},td.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],s=this[a];s&&(Array.isArray(s)?e.push({key:a,value:oX(s,this.objId,this.scope)}):s instanceof td?(s.scope=this.scope,e.push({key:a,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:a,value:s}))}return e};var lX=function(){td.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};yo(lX,td);var cX=function(){td.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+im(r(e))+")"}},set:function(r){e=r}})};yo(cX,td);var Sc=function e(){td.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');t=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ya(t,3)},set:function(j){j?this.F=Xa(t,3):this.F=Ja(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');r=j}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(j){a=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(j){a[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(j){a[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(j){a[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(j){a[3]=j}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof mj)return;i="FieldObject"+e.FieldNum++}var j=function(_){return _};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+im(j(i))+")"},set:function(j){i=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(j){i=j}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(j){o=j}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(j){l=j}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(j){d=j}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/uE:u},set:function(j){u=j}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(j){f=j}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof mj||this instanceof kh))return aA(m,this.objId,this.scope)},set:function(j){j=j.toString(),m=j}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Is==0?aA(p,this.objId,this.scope):p},set:function(j){j=j.toString(),p=this instanceof Is==0?j.substr(0,1)==="("?sp(j.substr(1,j.length-2)):sp(j):j}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Is==1?sp(p.substr(1,p.length-1)):p},set:function(j){j=j.toString(),p=this instanceof Is==1?"/"+j:j}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Is==0?aA(g,this.objId,this.scope):g},set:function(j){j=j.toString(),g=this instanceof Is==0?j.substr(0,1)==="("?sp(j.substr(1,j.length-2)):sp(j):j}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Is==1?sp(g.substr(1,g.length-1)):g},set:function(j){j=j.toString(),g=this instanceof Is==1?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(j){j=!!j,v=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(j){b=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,1)},set:function(j){j?this.Ff=Xa(this.Ff,1):this.Ff=Ja(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,2)},set:function(j){j?this.Ff=Xa(this.Ff,2):this.Ff=Ja(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,3)},set:function(j){j?this.Ff=Xa(this.Ff,3):this.Ff=Ja(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');y=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(y){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};yo(Sc,td);var Ap=function(){Sc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return oX(t,this.objId,this.scope)},set:function(r){var a,s;s=[],typeof(a=r)=="string"&&(s=(function(i,o,l){l||(l=1);for(var d,u=[];d=o.exec(i);)u.push(d[l]);return u})(a,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,18)},set:function(r){r?this.Ff=Xa(this.Ff,18):this.Ff=Ja(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Xa(this.Ff,19):this.Ff=Ja(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,20)},set:function(r){r?(this.Ff=Xa(this.Ff,20),t.sort()):this.Ff=Ja(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,22)},set:function(r){r?this.Ff=Xa(this.Ff,22):this.Ff=Ja(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,23)},set:function(r){r?this.Ff=Xa(this.Ff,23):this.Ff=Ja(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,27)},set:function(r){r?this.Ff=Xa(this.Ff,27):this.Ff=Ja(this.Ff,27)}}),this.hasAppearanceStream=!1};yo(Ap,Sc);var kp=function(){Ap.call(this),this.fontName="helvetica",this.combo=!1};yo(kp,Ap);var Op=function(){kp.call(this),this.combo=!0};yo(Op,kp);var Fb=function(){Op.call(this),this.edit=!0};yo(Fb,Op);var Is=function(){Sc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,15)},set:function(r){r?this.Ff=Xa(this.Ff,15):this.Ff=Ja(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,16)},set:function(r){r?this.Ff=Xa(this.Ff,16):this.Ff=Ja(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,17)},set:function(r){r?this.Ff=Xa(this.Ff,17):this.Ff=Ja(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,26)},set:function(r){r?this.Ff=Xa(this.Ff,26):this.Ff=Ja(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,s=[];for(a in s.push("<<"),t)s.push("/"+a+" ("+im(r(t[a]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Rn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};yo(Is,Sc);var Bb=function(){Is.call(this),this.pushButton=!0};yo(Bb,Is);var Ep=function(){Is.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};yo(Ep,Is);var mj=function(){var e,t;Sc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+im(s(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Rn(s)==="object"&&(a=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(s){typeof s=="string"&&(a.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};yo(mj,Sc),Ep.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Ep.prototype.createOption=function(e){var t=new mj;return t.Parent=this,t.optionName=e,this.Kids.push(t),JEe.call(this.scope,t),t};var zb=function(){Is.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Xt.CheckBox.createAppearanceStream()};yo(zb,Is);var kh=function(){Sc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,13)},set:function(t){t?this.Ff=Xa(this.Ff,13):this.Ff=Ja(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,21)},set:function(t){t?this.Ff=Xa(this.Ff,21):this.Ff=Ja(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,23)},set:function(t){t?this.Ff=Xa(this.Ff,23):this.Ff=Ja(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,24)},set:function(t){t?this.Ff=Xa(this.Ff,24):this.Ff=Ja(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,25)},set:function(t){t?this.Ff=Xa(this.Ff,25):this.Ff=Ja(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,26)},set:function(t){t?this.Ff=Xa(this.Ff,26):this.Ff=Ja(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};yo(kh,Sc);var qb=function(){kh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,14)},set:function(e){e?this.Ff=Xa(this.Ff,14):this.Ff=Ja(this.Ff,14)}}),this.password=!0};yo(qb,kh);var Xt={CheckBox:{createAppearanceStream:function(){return{N:{On:Xt.CheckBox.YesNormal},D:{On:Xt.CheckBox.YesPushDown,Off:Xt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Yc(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=Dk(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Ir(Xt.internal.getWidth(e))+" "+Ir(Xt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Ir(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Yc(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=[],i=Xt.internal.getHeight(e),o=Xt.internal.getWidth(e),l=Dk(e,e.caption);return s.push("1 g"),s.push("0 0 "+Ir(o)+" "+Ir(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Ir(o-1)+" "+Ir(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Ir(l.fontSize)+" Tf "+a),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Yc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ir(Xt.internal.getWidth(e))+" "+Ir(Xt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Xt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Xt.RadioButton.Circle.YesNormal,t.D[e]=Xt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Yc(e);t.scope=e.scope;var r=[],a=Xt.internal.getWidth(e)<=Xt.internal.getHeight(e)?Xt.internal.getWidth(e)/4:Xt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Xt.internal.Bezier_C,i=Number((a*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+af(Xt.internal.getWidth(e)/2)+" "+af(Xt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Yc(e);t.scope=e.scope;var r=[],a=Xt.internal.getWidth(e)<=Xt.internal.getHeight(e)?Xt.internal.getWidth(e)/4:Xt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Xt.internal.Bezier_C).toFixed(5)),o=Number((a*Xt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+af(Xt.internal.getWidth(e)/2)+" "+af(Xt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+af(Xt.internal.getWidth(e)/2)+" "+af(Xt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Yc(e);t.scope=e.scope;var r=[],a=Xt.internal.getWidth(e)<=Xt.internal.getHeight(e)?Xt.internal.getWidth(e)/4:Xt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Xt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+af(Xt.internal.getWidth(e)/2)+" "+af(Xt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Xt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Xt.RadioButton.Cross.YesNormal,t.D[e]=Xt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Yc(e);t.scope=e.scope;var r=[],a=Xt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Ir(Xt.internal.getWidth(e)-2)+" "+Ir(Xt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Ir(a.x1.x)+" "+Ir(a.x1.y)+" m"),r.push(Ir(a.x2.x)+" "+Ir(a.x2.y)+" l"),r.push(Ir(a.x4.x)+" "+Ir(a.x4.y)+" m"),r.push(Ir(a.x3.x)+" "+Ir(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Yc(e);t.scope=e.scope;var r=Xt.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+Ir(Xt.internal.getWidth(e))+" "+Ir(Xt.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Ir(Xt.internal.getWidth(e)-2)+" "+Ir(Xt.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Ir(r.x1.x)+" "+Ir(r.x1.y)+" m"),a.push(Ir(r.x2.x)+" "+Ir(r.x2.y)+" l"),a.push(Ir(r.x4.x)+" "+Ir(r.x4.y)+" m"),a.push(Ir(r.x3.x)+" "+Ir(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Yc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ir(Xt.internal.getWidth(e))+" "+Ir(Xt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Xt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Xt.internal.getWidth(e),r=Xt.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},Xt.internal.getWidth=function(e){var t=0;return Rn(e)==="object"&&(t=mF(e.Rect[2])),t},Xt.internal.getHeight=function(e){var t=0;return Rn(e)==="object"&&(t=mF(e.Rect[3])),t};var JEe=Ua.addField=function(e){if(XEe(this,e),!(e instanceof Sc))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ua.AcroFormChoiceField=Ap,Ua.AcroFormListBox=kp,Ua.AcroFormComboBox=Op,Ua.AcroFormEditBox=Fb,Ua.AcroFormButton=Is,Ua.AcroFormPushButton=Bb,Ua.AcroFormRadioButton=Ep,Ua.AcroFormCheckBox=zb,Ua.AcroFormTextField=kh,Ua.AcroFormPasswordField=qb,Ua.AcroFormAppearance=Xt,Ua.AcroForm={ChoiceField:Ap,ListBox:kp,ComboBox:Op,EditBox:Fb,Button:Is,PushButton:Bb,RadioButton:Ep,CheckBox:zb,TextField:kh,PasswordField:qb,Appearance:Xt},ir.AcroForm={ChoiceField:Ap,ListBox:kp,ComboBox:Op,EditBox:Fb,Button:Is,PushButton:Bb,RadioButton:Ep,CheckBox:zb,TextField:kh,PasswordField:qb,Appearance:Xt};ir.AcroForm;function dX(e){return e.reduce(function(t,r,a){return t[r]=a,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(D,$){var K,U,J,V,G,q=r;if(($=$||r)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(T(D))for(G in a)for(J=a[G],K=0;K<J.length;K+=1){for(V=!0,U=0;U<J[K].length;U+=1)if(J[K][U]!==void 0&&J[K][U]!==D[U]){V=!1;break}if(V===!0){q=G;break}}else for(G in a)for(J=a[G],K=0;K<J.length;K+=1){for(V=!0,U=0;U<J[K].length;U+=1)if(J[K][U]!==void 0&&J[K][U]!==D.charCodeAt(U)){V=!1;break}if(V===!0){q=G;break}}return q===r&&$!==r&&(q=$),q},i=function D($){for(var K=this.internal.write,U=this.internal.putStream,J=(0,this.internal.getFilters)();J.indexOf("FlateEncode")!==-1;)J.splice(J.indexOf("FlateEncode"),1);$.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:$.width}),V.push({key:"Height",value:$.height}),$.colorSpace===j.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+($.palette.length/3-1)+" "+("sMask"in $&&$.sMask!==void 0?$.objectId+2:$.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+$.colorSpace}),$.colorSpace===j.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:$.bitsPerComponent}),"decodeParameters"in $&&$.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+$.decodeParameters+">>"}),"transparency"in $&&Array.isArray($.transparency)&&$.transparency.length>0){for(var G="",q=0,Y=$.transparency.length;q<Y;q++)G+=$.transparency[q]+" "+$.transparency[q]+" ";V.push({key:"Mask",value:"["+G+"]"})}$.sMask!==void 0&&V.push({key:"SMask",value:$.objectId+1+" 0 R"});var Q=$.filter!==void 0?["/"+$.filter]:void 0;if(U({data:$.data,additionalKeyValues:V,alreadyAppliedFilters:Q,objectId:$.objectId}),K("endobj"),"sMask"in $&&$.sMask!==void 0){var F,z=(F=$.sMaskBitsPerComponent)!==null&&F!==void 0?F:$.bitsPerComponent,H={width:$.width,height:$.height,colorSpace:"DeviceGray",bitsPerComponent:z,data:$.sMask};"filter"in $&&(H.decodeParameters="/Predictor ".concat($.predictor," /Colors 1 /BitsPerComponent ").concat(z," /Columns ").concat($.width),H.filter=$.filter),D.call(this,H)}if($.colorSpace===j.INDEXED){var X=this.internal.newObject();U({data:R(new Uint8Array($.palette)),objectId:X}),K("endobj")}},o=function(){var D=this.internal.collections[t+"images"];for(var $ in D)i.call(this,D[$])},l=function(){var D,$=this.internal.collections[t+"images"],K=this.internal.write;for(var U in $)K("/I"+(D=$[U]).index,D.objectId,"0","R")},d=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var D=this.internal.collections[t+"images"];return d.call(this),D},f=function(){return Object.keys(this.internal.collections[t+"images"]).length},m=function(D){return typeof e["process"+D.toUpperCase()]=="function"},p=function(D){return Rn(D)==="object"&&D.nodeType===1},g=function(D,$){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var K=""+D.getAttribute("src");if(K.indexOf("data:image/")===0)return $b(unescape(K).split("base64,").pop());var U=e.loadFile(K,!0);if(U!==void 0)return U}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var J;switch($){case"PNG":J="image/png";break;case"WEBP":J="image/webp";break;default:J="image/jpeg"}return $b(D.toDataURL(J,1).split("base64,").pop())}},b=function(D){var $=this.internal.collections[t+"images"];if($){for(var K in $)if(D===$[K].alias)return $[K]}},v=function(D,$,K){return D||$||(D=-96,$=-96),D<0&&(D=-1*K.width*72/D/this.internal.scaleFactor),$<0&&($=-1*K.height*72/$/this.internal.scaleFactor),D===0&&(D=$*K.width/K.height),$===0&&($=D*K.height/K.width),[D,$]},y=function(D,$,K,U,J,V){var G=v.call(this,K,U,J),q=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,Q=u.call(this);if(K=G[0],U=G[1],Q[J.index]=J,V){V*=Math.PI/180;var F=Math.cos(V),z=Math.sin(V),H=function(ne){return ne.toFixed(4)},X=[H(F),H(z),H(-1*z),H(F),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,q(D),Y($+U),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([q(K),"0","0",q(U),"0","0","cm"].join(" "))):this.internal.write([q(K),"0","0",q(U),q(D),Y($+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+J.index+" Do"),this.internal.write("Q")},j=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=e.__addimage__.sHashCode=function(D){var $,K,U=0;if(typeof D=="string")for(K=D.length,$=0;$<K;$++)U=(U<<5)-U+D.charCodeAt($),U|=0;else if(T(D))for(K=D.byteLength/2,$=0;$<K;$++)U=(U<<5)-U+D[$],U|=0;return U},A=e.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var $=!0;return D.length===0&&($=!1),D.length%4!=0&&($=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&($=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&($=!1),$},S=e.__addimage__.extractImageFromDataUrl=function(D){if(D==null||!(D=D.trim()).startsWith("data:"))return null;var $=D.indexOf(",");return $<0?null:D.substring(0,$).trim().endsWith("base64")?D.substring($+1):null};e.__addimage__.isArrayBuffer=function(D){return D instanceof ArrayBuffer};var T=e.__addimage__.isArrayBufferView=function(D){return D instanceof Int8Array||D instanceof Uint8Array||D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array},O=e.__addimage__.binaryStringToUint8Array=function(D){for(var $=D.length,K=new Uint8Array($),U=0;U<$;U++)K[U]=D.charCodeAt(U);return K},R=e.__addimage__.arrayBufferToBinaryString=function(D){for(var $="",K=T(D)?D:new Uint8Array(D),U=0;U<K.length;U+=8192)$+=String.fromCharCode.apply(null,K.subarray(U,U+8192));return $};e.addImage=function(){var D,$,K,U,J,V,G,q,Y;if(typeof arguments[1]=="number"?($=r,K=arguments[1],U=arguments[2],J=arguments[3],V=arguments[4],G=arguments[5],q=arguments[6],Y=arguments[7]):($=arguments[1],K=arguments[2],U=arguments[3],J=arguments[4],V=arguments[5],G=arguments[6],q=arguments[7],Y=arguments[8]),Rn(D=arguments[0])==="object"&&!p(D)&&"imageData"in D){var Q=D;D=Q.imageData,$=Q.format||$||r,K=Q.x||K||0,U=Q.y||U||0,J=Q.w||Q.width||J,V=Q.h||Q.height||V,G=Q.alias||G,q=Q.compression||q,Y=Q.rotation||Q.angle||Y}var F=this.internal.getFilters();if(q===void 0&&F.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(K)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var z=M.call(this,D,$,G,q);return y.call(this,K,U,J,V,z,Y),this};var M=function(D,$,K,U){var J,V,G;if(typeof D=="string"&&s(D)===r){D=unescape(D);var q=I(D,!1);(q!==""||(q=e.loadFile(D,!0))!==void 0)&&(D=q)}if(p(D)&&(D=g(D,$)),$=s(D,$),!m($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(((G=K)==null||G.length===0)&&(K=(function(Y){return typeof Y=="string"||T(Y)?C(Y):T(Y.data)?C(Y.data):null})(D)),(J=b.call(this,K))||(D instanceof Uint8Array||$==="RGBA"||(V=D,D=O(D)),J=this["process"+$.toUpperCase()](D,f.call(this),K,(function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in e.image_compression?Y:_.NONE})(U),V)),!J)throw new Error("An unknown error occurred whilst processing the image.");return J},I=e.__addimage__.convertBase64ToBinaryString=function(D,$){$=typeof $!="boolean"||$;var K,U="";if(typeof D=="string"){var J;K=(J=S(D))!==null&&J!==void 0?J:D;try{U=$b(K)}catch(V){if($)throw A(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};e.getImageProperties=function(D){var $,K,U="";if(p(D)&&(D=g(D)),typeof D=="string"&&s(D)===r&&((U=I(D,!1))===""&&(U=e.loadFile(D)||""),D=U),K=s(D),!m(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(D instanceof Uint8Array||(D=O(D)),!($=this["process"+K.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return $.fileType=K,$}})(ir.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};ir.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var a,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,f=!1,m=0;m<u.length&&!f;m++)switch((a=u[m]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){a=u[p];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(v.objId),_=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+g(j(a.contents))+")",i+=" /Popup "+y.objId+" 0 R",i+=" /P "+d.objId+" 0 R",i+=" /T ("+g(j(_))+") >>",v.content=i;var C=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+C,a.open&&(i+=" /Open true"),i+=" >>",y.content=i,this.internal.write(v.objId,"0 R",y.objId,"0 R");break;case"freetext":s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var A=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+g(b(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+A+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var S=this.annotations._nameMap[a.options.name];a.options.pageNumber=S.page,a.options.top=S.y}else a.options.top||(a.options.top=0);if(s="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;default:var T=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+T+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},e.link=function(r,a,s,i,o){var l=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:d(r),y:u(a),w:d(r+s),h:u(a+i)},options:o,type:"link"})},e.textWithLink=function(r,a,s,i){var o,l,d=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var f=this.splitTextToSize(r,l).length;o=Math.ceil(u*f)}else l=d,o=u;return this.text(r,a,s,i),s+=.2*u,i.align==="center"&&(a-=d/2),i.align==="right"&&(a-=d),this.link(a,s-u,l,o,i),d},e.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}})(ir.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},l=e.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&s.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(v){var y=0,j=r,_="",C=0;for(y=0;y<v.length;y+=1)j[v.charCodeAt(y)]!==void 0?(C++,typeof(j=j[v.charCodeAt(y)])=="number"&&(_+=String.fromCharCode(j),j=r,C=0),y===v.length-1&&(j=r,_+=v.charAt(y-(C-1)),y-=C-1,C=0)):(j=r,_+=v.charAt(y-C),y-=C,C=0);return _};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&a[v.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(v,y,j){return o(v)?i(v)===!1?-1:!u(v)||!o(y)&&!o(j)||!o(j)&&l(y)||l(v)&&!o(y)||l(v)&&d(y)||l(v)&&l(y)?0:f(v)&&o(y)&&!l(y)&&o(j)&&u(j)?3:l(v)||!o(j)?1:2:-1},g=function(v){var y=0,j=0,_=0,C="",A="",S="",T=(v=v||"").split("\\s+"),O=[];for(y=0;y<T.length;y+=1){for(O.push(""),j=0;j<T[y].length;j+=1)C=T[y][j],A=T[y][j-1],S=T[y][j+1],o(C)?(_=p(C,A,S),O[y]+=_!==-1?String.fromCharCode(t[C.charCodeAt(0)][_]):C):O[y]+=C;O[y]=m(O[y])}return O.join(" ")},b=e.__arabicParser__.processArabic=e.processArabic=function(){var v,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(y)){var _=0;for(j=[],_=0;_<y.length;_+=1)Array.isArray(y[_])?j.push([g(y[_][0]),y[_][1],y[_][2]]):j.push([g(y[_])]);v=j}else v=g(y);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",b])})(ir.API),ir.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var s;if((r=r||"2d")!=="2d")return null;for(s in a)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=a[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(ir.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(v){m=v}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(v){g=v}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(v){b=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return a.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,u){a.call(this);var f=(u=u||{}).fontSize||this.getFontSize(),m=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,g=0,b=0,v=0,y=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var j=u.maxWidth;j>0?typeof d=="string"?d=this.splitTextToSize(d,j):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(C,A){return C.concat(y.splitTextToSize(A,j))},[])):d=Array.isArray(d)?d:[d];for(var _=0;_<d.length;_++)g<(v=this.getStringUnitWidth(d[_],{font:m})*f)&&(g=v);return g!==0&&(b=d.length),{w:g/=p,h:Math.max((b*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var d;d=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),a.call(this);var u=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,m=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===d.lineNumber?(d.x=(u.x||0)+(u.width||0),d.y=u.y||0):u.y+u.height+d.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=m.top,g&&p&&(this.printHeaderRow(d.lineNumber,!0),d.y+=p[0].height)):d.y=u.y+u.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-f,d.y+f,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+f,{align:"center",baseline:"top",maxWidth:d.width-f-f}):this.text(d.text,d.x+f,d.y+f,{align:"left",baseline:"top",maxWidth:d.width-f-f})),this.internal.__cell__.lastCell=d,this};e.table=function(d,u,f,m,p){if(a.call(this),!f)throw new Error("No data for PDF table.");var g,b,v,y,j=[],_=[],C=[],A={},S={},T=[],O=[],R=(p=p||{}).autoSize||!1,M=p.printHeaders!==!1,I=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,D=p.margins||Object.assign({width:this.getPageWidth()},t),$=typeof p.padding=="number"?p.padding:3,K=p.headerBackgroundColor||"#c8c8c8",U=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=I,this.internal.__cell__.padding=$,this.internal.__cell__.headerBackgroundColor=K,this.internal.__cell__.headerTextColor=U,this.setFontSize(I),m==null)_=j=Object.keys(f[0]),C=j.map(function(){return"left"});else if(Array.isArray(m)&&Rn(m[0])==="object")for(j=m.map(function(Q){return Q.name}),_=m.map(function(Q){return Q.prompt||Q.name||""}),C=m.map(function(Q){return Q.align||"left"}),g=0;g<m.length;g+=1)S[m[g].name]=.7499990551181103*m[g].width;else Array.isArray(m)&&typeof m[0]=="string"&&(_=j=m,C=j.map(function(){return"left"}));if(R||Array.isArray(m)&&typeof m[0]=="string")for(g=0;g<j.length;g+=1){for(A[y=j[g]]=f.map(function(Q){return Q[y]}),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(_[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=A[y],this.setFont(void 0,"normal"),v=0;v<b.length;v+=1)T.push(this.getTextDimensions(b[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[y]=Math.max.apply(null,T)+$+$,T=[]}if(M){var J={};for(g=0;g<j.length;g+=1)J[j[g]]={},J[j[g]].text=_[g],J[j[g]].align=C[g];var V=l.call(this,J,S);O=j.map(function(Q){return new i(d,u,S[Q],V,J[Q].text,void 0,J[Q].align)}),this.setTableHeaderRow(O),this.printHeaderRow(1,!1)}var G=m.reduce(function(Q,F){return Q[F.name]=F.align,Q},{});for(g=0;g<f.length;g+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:g,data:f[g]},this);var q=l.call(this,f[g],S);for(v=0;v<j.length;v+=1){var Y=f[g][j[v]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:g,col:v,data:Y},this),o.call(this,new i(d,u,S[j[v]],q,Y,g+2,G[j[v]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=u,this};var l=function(d,u){var f=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(d).map(function(g){var b=d[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[g]-f-f)},this).map(function(g){return this.getLineHeightFactor()*g.length*m/p+f+f},this).reduce(function(g,b){return Math.max(g,b)},0)};e.setTableHeaderRow=function(d){a.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,u){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){f=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(f.y=this.internal.__cell__.margins.top||0,p.push(f)),f.lineNumber=d;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(b)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}})(ir.API);var uX={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},fX=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Lk=dX(fX),hX=[100,200,300,400,500,600,700,800,900],ZEe=dX(hX);function sA(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return uX[i=i||"normal"]?i:"normal"})(e.style),a=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(e.weight),s=(function(i){return typeof Lk[i=i||"normal"]=="number"?i:"normal"})(e.stretch);return{family:t,style:r,weight:a,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,a].join(" ")}}}function pF(e,t,r,a){var s;for(s=r;s>=0&&s<t.length;s+=a)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=a)if(e[t[s]])return e[t[s]]}var QEe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},gF={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function xF(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function vF(e){return e.trimLeft()}function eTe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function tTe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Cb,yF,bF,ip,_b,jF,wF,NF,iA=["times"];function SF(e,t,r,a,s){var i=4,o=_F;switch(s){case ir.API.image_compression.FAST:i=1,o=CF;break;case ir.API.image_compression.MEDIUM:i=6,o=AF;break;case ir.API.image_compression.SLOW:i=9,o=kF}e=(function(d,u,f,m){for(var p,g=d.length/u,b=new Uint8Array(d.length+g),v=[rTe,CF,_F,AF,kF],y=0;y<g;y+=1){var j=y*u,_=d.subarray(j,j+u);if(m)b.set(m(_,f,p),j+y);else{for(var C=v.length,A=[],S=0;S<C;S+=1)A[S]=v[S](_,f,p);var T=aTe(A.concat());b.set(A[T],j+y)}p=_}return b})(e,t,Math.ceil(r*a/8),o);var l=Ok(e,{level:i});return ir.API.__addimage__.arrayBufferToBinaryString(l)}function rTe(e){var t=Array.apply([],e);return t.unshift(0),t}function CF(e,t){var r=e.length,a=[];a[0]=1;for(var s=0;s<r;s+=1){var i=e[s-t]||0;a[s+1]=e[s]-i+256&255}return a}function _F(e,t,r){var a=e.length,s=[];s[0]=2;for(var i=0;i<a;i+=1){var o=r&&r[i]||0;s[i+1]=e[i]-o+256&255}return s}function AF(e,t,r){var a=e.length,s=[];s[0]=3;for(var i=0;i<a;i+=1){var o=e[i-t]||0,l=r&&r[i]||0;s[i+1]=e[i]+256-(o+l>>>1)&255}return s}function kF(e,t,r){var a=e.length,s=[];s[0]=4;for(var i=0;i<a;i+=1){var o=nTe(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);s[i+1]=e[i]-o+256&255}return s}function nTe(e,t,r){if(e===t&&t===r)return e;var a=Math.abs(t-r),s=Math.abs(e-r),i=Math.abs(e+t-r-r);return a<=s&&a<=i?e:s<=i?t:r}function aTe(e){var t=e.map(function(r){return r.reduce(function(a,s){return a+Math.abs(s)},0)});return t.indexOf(Math.min.apply(null,t))}function oA(e,t,r){var a=t*r,s=Math.floor(a/8),i=16-(a-8*s+r),o=(1<<r)-1;return mX(e,s)>>i&o}function OF(e,t,r,a){var s=r*a,i=Math.floor(s/8),o=16-(s-8*i+a),l=(1<<a)-1,d=(t&l)<<o;(function(u,f,m){if(f+1<u.byteLength)u.setUint16(f,m,!1);else{var p=m>>8&255;u.setUint8(f,p)}})(e,i,mX(e,i)&~(l<<o)&65535|d)}function mX(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function sTe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<1+(7&s);e[t++],e[t++];var l=null,d=null;i&&(l=t,d=o,t+=3*o);var u=!0,f=[],m=0,p=null,g=0,b=null;for(this.width=r,this.height=a;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,b=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];m=e[t++]|e[t++]<<8,p=e[t++],1&v||(p=null),g=v>>2&7,t++;break;case 254:for(;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var y=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,A=e[t++],S=A>>6&1,T=1<<1+(7&A),O=l,R=d,M=!1;A>>7&&(M=!0,O=t,R=T,t+=3*T);var I=t;for(t++;;){var D;if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}f.push({x:y,y:j,width:_,height:C,has_local_palette:M,palette_offset:O,palette_size:R,data_offset:I,data_length:t-I,transparent_index:p,interlaced:!!S,delay:m,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return b},this.frameInfo=function($){if($<0||$>=f.length)throw new Error("Frame index out of range.");return f[$]},this.decodeAndBlitFrameBGRA=function($,K){var U=this.frameInfo($),J=U.width*U.height,V=new Uint8Array(J);EF(e,U.data_offset,V,J);var G=U.palette_offset,q=U.transparent_index;q===null&&(q=256);var Y=U.width,Q=r-Y,F=Y,z=4*(U.y*r+U.x),H=4*((U.y+U.height)*r+U.x),X=z,ne=4*Q;U.interlaced===!0&&(ne+=4*r*7);for(var ie=8,ce=0,ge=V.length;ce<ge;++ce){var he=V[ce];if(F===0&&(F=Y,(X+=ne)>=H&&(ne=4*Q+4*r*(ie-1),X=z+(Y+Q)*(ie<<1),ie>>=1)),he===q)X+=4;else{var ue=e[G+3*he],Se=e[G+3*he+1],je=e[G+3*he+2];K[X++]=je,K[X++]=Se,K[X++]=ue,K[X++]=255}--F}},this.decodeAndBlitFrameRGBA=function($,K){var U=this.frameInfo($),J=U.width*U.height,V=new Uint8Array(J);EF(e,U.data_offset,V,J);var G=U.palette_offset,q=U.transparent_index;q===null&&(q=256);var Y=U.width,Q=r-Y,F=Y,z=4*(U.y*r+U.x),H=4*((U.y+U.height)*r+U.x),X=z,ne=4*Q;U.interlaced===!0&&(ne+=4*r*7);for(var ie=8,ce=0,ge=V.length;ce<ge;++ce){var he=V[ce];if(F===0&&(F=Y,(X+=ne)>=H&&(ne=4*Q+4*r*(ie-1),X=z+(Y+Q)*(ie<<1),ie>>=1)),he===q)X+=4;else{var ue=e[G+3*he],Se=e[G+3*he+1],je=e[G+3*he+2];K[X++]=ue,K[X++]=Se,K[X++]=je,K[X++]=255}--F}}}function EF(e,t,r,a){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,d=s+1,u=(1<<d)-1,f=0,m=0,p=0,g=e[t++],b=new Int32Array(4096),v=null;;){for(;f<16&&g!==0;)m|=e[t++]<<f,f+=8,g===1?g=e[t++]:--g;if(f<d)break;var y=m&u;if(m>>=d,f-=d,y!==i){if(y===o)break;for(var j=y<l?y:v,_=0,C=j;C>i;)C=b[C]>>8,++_;var A=C;if(p+_+(j!==y?1:0)>a)return void Wn.log("Warning, gif stream longer than expected.");r[p++]=A;var S=p+=_;for(j!==y&&(r[p++]=A),C=j;_--;)C=b[C],r[--S]=255&C,C>>=8;v!==null&&l<4096&&(b[l++]=v<<8|A,l>=u+1&&d<12&&(++d,u=u<<1|1)),v=y}else l=o+1,u=(1<<(d=s+1))-1,v=null}return p!==a&&Wn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function lA(e){var t,r,a,s,i,o=Math.floor,l=new Array(64),d=new Array(64),u=new Array(64),f=new Array(64),m=new Array(65535),p=new Array(65535),g=new Array(64),b=new Array(64),v=[],y=0,j=7,_=new Array(64),C=new Array(64),A=new Array(64),S=new Array(256),T=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],$=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(z,H){for(var X=0,ne=0,ie=new Array,ce=1;ce<=16;ce++){for(var ge=1;ge<=z[ce];ge++)ie[H[ne]]=[],ie[H[ne]][0]=X,ie[H[ne]][1]=ce,ne++,X++;X*=2}return ie}function G(z){for(var H=z[0],X=z[1]-1;X>=0;)H&1<<X&&(y|=1<<j),X--,--j<0&&(y==255?(q(255),q(0)):q(y),j=7,y=0)}function q(z){v.push(z)}function Y(z){q(z>>8&255),q(255&z)}function Q(z,H,X,ne,ie){for(var ce,ge=ie[0],he=ie[240],ue=(function(Ee,lt){var ut,gt,dt,Nt,zt,Dt,Gt,rr,jt,Ce,Ke=0;for(jt=0;jt<8;++jt){ut=Ee[Ke],gt=Ee[Ke+1],dt=Ee[Ke+2],Nt=Ee[Ke+3],zt=Ee[Ke+4],Dt=Ee[Ke+5],Gt=Ee[Ke+6];var Jt=ut+(rr=Ee[Ke+7]),Bt=ut-rr,bt=gt+Gt,Lt=gt-Gt,sr=dt+Dt,or=dt-Dt,wn=Nt+zt,fr=Nt-zt,kr=Jt+wn,mn=Jt-wn,Er=bt+sr,nr=bt-sr;Ee[Ke]=kr+Er,Ee[Ke+4]=kr-Er;var Wr=.707106781*(nr+mn);Ee[Ke+2]=mn+Wr,Ee[Ke+6]=mn-Wr;var wi=.382683433*((kr=fr+or)-(nr=Lt+Bt)),Za=.5411961*kr+wi,As=1.306562965*nr+wi,ii=.707106781*(Er=or+Lt),Zt=Bt+ii,Gi=Bt-ii;Ee[Ke+5]=Gi+Za,Ee[Ke+3]=Gi-Za,Ee[Ke+1]=Zt+As,Ee[Ke+7]=Zt-As,Ke+=8}for(Ke=0,jt=0;jt<8;++jt){ut=Ee[Ke],gt=Ee[Ke+8],dt=Ee[Ke+16],Nt=Ee[Ke+24],zt=Ee[Ke+32],Dt=Ee[Ke+40],Gt=Ee[Ke+48];var qs=ut+(rr=Ee[Ke+56]),ks=ut-rr,Ha=gt+Gt,Mn=gt-Gt,Cn=dt+Dt,Sa=dt-Dt,Ni=Nt+zt,Qa=Nt-zt,pn=qs+Ni,_n=qs-Ni,es=Ha+Cn,Us=Ha-Cn;Ee[Ke]=pn+es,Ee[Ke+32]=pn-es;var oi=.707106781*(Us+_n);Ee[Ke+16]=_n+oi,Ee[Ke+48]=_n-oi;var Ll=.382683433*((pn=Qa+Sa)-(Us=Mn+ks)),Si=.5411961*pn+Ll,Ci=1.306562965*Us+Ll,_i=.707106781*(es=Sa+Mn),Ai=ks+_i,ki=ks-_i;Ee[Ke+40]=ki+Si,Ee[Ke+24]=ki-Si,Ee[Ke+8]=Ai+Ci,Ee[Ke+56]=Ai-Ci,Ke++}for(jt=0;jt<64;++jt)Ce=Ee[jt]*lt[jt],g[jt]=Ce>0?Ce+.5|0:Ce-.5|0;return g})(z,H),Se=0;Se<64;++Se)b[O[Se]]=ue[Se];var je=b[0]-X;X=b[0],je==0?G(ne[0]):(G(ne[p[ce=32767+je]]),G(m[ce]));for(var Be=63;Be>0&&b[Be]==0;)Be--;if(Be==0)return G(ge),X;for(var $e,oe=1;oe<=Be;){for(var Xe=oe;b[oe]==0&&oe<=Be;)++oe;var pt=oe-Xe;if(pt>=16){$e=pt>>4;for(var Oe=1;Oe<=$e;++Oe)G(he);pt&=15}ce=32767+b[oe],G(ie[(pt<<4)+p[ce]]),G(m[ce]),oe++}return Be!=63&&G(ge),X}function F(z){z=Math.min(Math.max(z,1),100),i!=z&&((function(H){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var ie=o((X[ne]*H+50)/100);ie=Math.min(Math.max(ie,1),255),l[O[ne]]=ie}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ge=0;ge<64;ge++){var he=o((ce[ge]*H+50)/100);he=Math.min(Math.max(he,1),255),d[O[ge]]=he}for(var ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Se=0,je=0;je<8;je++)for(var Be=0;Be<8;Be++)u[Se]=1/(l[O[Se]]*ue[je]*ue[Be]*8),f[Se]=1/(d[O[Se]]*ue[je]*ue[Be]*8),Se++})(z<50?Math.floor(5e3/z):Math.floor(200-2*z)),i=z)}this.encode=function(z,H){H&&F(H),v=new Array,y=0,j=7,Y(65496),Y(65504),Y(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),Y(1),Y(1),q(0),q(0),(function(){Y(65499),Y(132),q(0);for(var gt=0;gt<64;gt++)q(l[gt]);q(1);for(var dt=0;dt<64;dt++)q(d[dt])})(),(function(gt,dt){Y(65472),Y(17),q(8),Y(dt),Y(gt),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)})(z.width,z.height),(function(){Y(65476),Y(418),q(0);for(var gt=0;gt<16;gt++)q(R[gt+1]);for(var dt=0;dt<=11;dt++)q(M[dt]);q(16);for(var Nt=0;Nt<16;Nt++)q(I[Nt+1]);for(var zt=0;zt<=161;zt++)q(D[zt]);q(1);for(var Dt=0;Dt<16;Dt++)q($[Dt+1]);for(var Gt=0;Gt<=11;Gt++)q(K[Gt]);q(17);for(var rr=0;rr<16;rr++)q(U[rr+1]);for(var jt=0;jt<=161;jt++)q(J[jt])})(),Y(65498),Y(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var X=0,ne=0,ie=0;y=0,j=7,this.encode.displayName="_encode_";for(var ce,ge,he,ue,Se,je,Be,$e,oe,Xe=z.data,pt=z.width,Oe=z.height,Ee=4*pt,lt=0;lt<Oe;){for(ce=0;ce<Ee;){for(Se=Ee*lt+ce,Be=-1,$e=0,oe=0;oe<64;oe++)je=Se+($e=oe>>3)*Ee+(Be=4*(7&oe)),lt+$e>=Oe&&(je-=Ee*(lt+1+$e-Oe)),ce+Be>=Ee&&(je-=ce+Be-Ee+4),ge=Xe[je++],he=Xe[je++],ue=Xe[je++],_[oe]=(T[ge]+T[he+256|0]+T[ue+512|0]>>16)-128,C[oe]=(T[ge+768|0]+T[he+1024|0]+T[ue+1280|0]>>16)-128,A[oe]=(T[ge+1280|0]+T[he+1536|0]+T[ue+1792|0]>>16)-128;X=Q(_,u,X,t,a),ne=Q(C,f,ne,r,s),ie=Q(A,f,ie,r,s),ce+=32}lt+=8}if(j>=0){var ut=[];ut[1]=j+1,ut[0]=(1<<j+1)-1,G(ut)}return Y(65497),new Uint8Array(v)},e=e||50,(function(){for(var z=String.fromCharCode,H=0;H<256;H++)S[H]=z(H)})(),t=V(R,M),r=V($,K),a=V(I,D),s=V(U,J),(function(){for(var z=1,H=2,X=1;X<=15;X++){for(var ne=z;ne<H;ne++)p[32767+ne]=X,m[32767+ne]=[],m[32767+ne][1]=X,m[32767+ne][0]=ne;for(var ie=-(H-1);ie<=-z;ie++)p[32767+ie]=X,m[32767+ie]=[],m[32767+ie][1]=X,m[32767+ie][0]=H-1+ie;z<<=1,H<<=1}})(),(function(){for(var z=0;z<256;z++)T[z]=19595*z,T[z+256|0]=38470*z,T[z+512|0]=7471*z+32768,T[z+768|0]=-11059*z,T[z+1024|0]=-21709*z,T[z+1280|0]=32768*z+8421375,T[z+1536|0]=-27439*z,T[z+1792|0]=-5329*z})(),F(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function dc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function TF(e){function t(M){if(!M)throw Error("assert :P")}function r(M,I,D){for(var $=0;4>$;$++)if(M[I+$]!=D.charCodeAt($))return!0;return!1}function a(M,I,D,$,K){for(var U=0;U<K;U++)M[I+U]=D[$+U]}function s(M,I,D,$){for(var K=0;K<$;K++)M[I+K]=D}function i(M){return new Int32Array(M)}function o(M,I){for(var D=[],$=0;$<M;$++)D.push(new I);return D}function l(M,I){var D=[];return(function $(K,U,J){for(var V=J[U],G=0;G<V&&(K.push(J.length>U+1?[]:new I),!(J.length<U+1));G++)$(K[G],U+1,J)})(D,0,M),D}var d=function(){var M=this;function I(k,P){for(var W=1<<P-1>>>0;k&W;)W>>>=1;return W?(k&W-1)+W:k}function D(k,P,W,Z,re){t(!(Z%W));do k[P+(Z-=W)]=re;while(0<Z)}function $(k,P,W,Z,re){if(t(2328>=re),512>=re)var ae=i(512);else if((ae=i(re))==null)return 0;return(function(se,fe,me,ve,Te,qe){var xe,Me,Fe=fe,Qe=1<<me,ze=i(16),Ze=i(16);for(t(Te!=0),t(ve!=null),t(se!=null),t(0<me),Me=0;Me<Te;++Me){if(15<ve[Me])return 0;++ze[ve[Me]]}if(ze[0]==Te)return 0;for(Ze[1]=0,xe=1;15>xe;++xe){if(ze[xe]>1<<xe)return 0;Ze[xe+1]=Ze[xe]+ze[xe]}for(Me=0;Me<Te;++Me)xe=ve[Me],0<ve[Me]&&(qe[Ze[xe]++]=Me);if(Ze[15]==1)return(ve=new K).g=0,ve.value=qe[0],D(se,Fe,1,Qe,ve),Qe;var at,xt=-1,ct=Qe-1,Wt=0,$t=1,Tr=1,qt=1<<me;for(Me=0,xe=1,Te=2;xe<=me;++xe,Te<<=1){if($t+=Tr<<=1,0>(Tr-=ze[xe]))return 0;for(;0<ze[xe];--ze[xe])(ve=new K).g=xe,ve.value=qe[Me++],D(se,Fe+Wt,Te,qt,ve),Wt=I(Wt,xe)}for(xe=me+1,Te=2;15>=xe;++xe,Te<<=1){if($t+=Tr<<=1,0>(Tr-=ze[xe]))return 0;for(;0<ze[xe];--ze[xe]){if(ve=new K,(Wt&ct)!=xt){for(Fe+=qt,at=1<<(xt=xe)-me;15>xt&&!(0>=(at-=ze[xt]));)++xt,at<<=1;Qe+=qt=1<<(at=xt-me),se[fe+(xt=Wt&ct)].g=at+me,se[fe+xt].value=Fe-fe-xt}ve.g=xe-me,ve.value=qe[Me++],D(se,Fe+(Wt>>me),Te,qt,ve),Wt=I(Wt,xe)}}return $t!=2*Ze[15]-1?0:Qe})(k,P,W,Z,re,ae)}function K(){this.value=this.g=0}function U(){this.value=this.g=0}function J(){this.G=o(5,K),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Pc,U)}function V(k,P,W,Z){t(k!=null),t(P!=null),t(2147483648>Z),k.Ca=254,k.I=0,k.b=-8,k.Ka=0,k.oa=P,k.pa=W,k.Jd=P,k.Yc=W+Z,k.Zc=4<=Z?W+Z-4+1:W,ge(k)}function G(k,P){for(var W=0;0<P--;)W|=ue(k,128)<<P;return W}function q(k,P){var W=G(k,P);return he(k)?-W:W}function Y(k,P,W,Z){var re,ae=0;for(t(k!=null),t(P!=null),t(4294967288>Z),k.Sb=Z,k.Ra=0,k.u=0,k.h=0,4<Z&&(Z=4),re=0;re<Z;++re)ae+=P[W+re]<<8*re;k.Ra=ae,k.bb=Z,k.oa=P,k.pa=W}function Q(k){for(;8<=k.u&&k.bb<k.Sb;)k.Ra>>>=8,k.Ra+=k.oa[k.pa+k.bb]<<Zo-8>>>0,++k.bb,k.u-=8;ne(k)&&(k.h=1,k.u=0)}function F(k,P){if(t(0<=P),!k.h&&P<=Ws){var W=X(k)&di[P];return k.u+=P,Q(k),W}return k.h=1,k.u=0}function z(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function H(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(k){return k.Ra>>>(k.u&Zo-1)>>>0}function ne(k){return t(k.bb<=k.Sb),k.h||k.bb==k.Sb&&k.u>Zo}function ie(k,P){k.u=P,k.h=ne(k)}function ce(k){k.u>=Qo&&(t(k.u>=Qo),Q(k))}function ge(k){t(k!=null&&k.oa!=null),k.pa<k.Zc?(k.I=(k.oa[k.pa++]|k.I<<8)>>>0,k.b+=8):(t(k!=null&&k.oa!=null),k.pa<k.Yc?(k.b+=8,k.I=k.oa[k.pa++]|k.I<<8):k.Ka?k.b=0:(k.I<<=8,k.b+=8,k.Ka=1))}function he(k){return G(k,1)}function ue(k,P){var W=k.Ca;0>k.b&&ge(k);var Z=k.b,re=W*P>>>8,ae=(k.I>>>Z>re)+0;for(ae?(W-=re,k.I-=re+1<<Z>>>0):W=re+1,Z=W,re=0;256<=Z;)re+=8,Z>>=8;return Z=7^re+Xl[Z],k.b-=Z,k.Ca=(W<<Z)-1,ae}function Se(k,P,W){k[P+0]=W>>24&255,k[P+1]=W>>16&255,k[P+2]=W>>8&255,k[P+3]=255&W}function je(k,P){return k[P+0]|k[P+1]<<8}function Be(k,P){return je(k,P)|k[P+2]<<16}function $e(k,P){return je(k,P)|je(k,P+2)<<16}function oe(k,P){var W=1<<P;return t(k!=null),t(0<P),k.X=i(W),k.X==null?0:(k.Mb=32-P,k.Xa=P,1)}function Xe(k,P){t(k!=null),t(P!=null),t(k.Xa==P.Xa),a(P.X,0,k.X,0,1<<P.Xa)}function pt(){this.X=[],this.Xa=this.Mb=0}function Oe(k,P,W,Z){t(W!=null),t(Z!=null);var re=W[0],ae=Z[0];return re==0&&(re=(k*ae+P/2)/P),ae==0&&(ae=(P*re+k/2)/k),0>=re||0>=ae?0:(W[0]=re,Z[0]=ae,1)}function Ee(k,P){return k+(1<<P)-1>>>P}function lt(k,P){return((4278255360&k)+(4278255360&P)>>>0&4278255360)+((16711935&k)+(16711935&P)>>>0&16711935)>>>0}function ut(k,P){M[P]=function(W,Z,re,ae,se,fe,me){var ve;for(ve=0;ve<se;++ve){var Te=M[k](fe[me+ve-1],re,ae+ve);fe[me+ve]=lt(W[Z+ve],Te)}}}function gt(){this.ud=this.hd=this.jd=0}function dt(k,P){return((4278124286&(k^P))>>>1)+(k&P)>>>0}function Nt(k){return 0<=k&&256>k?k:0>k?0:255<k?255:void 0}function zt(k,P){return Nt(k+(k-P+.5>>1))}function Dt(k,P,W){return Math.abs(P-W)-Math.abs(k-W)}function Gt(k,P,W,Z,re,ae,se){for(Z=ae[se-1],W=0;W<re;++W)ae[se+W]=Z=lt(k[P+W],Z)}function rr(k,P,W,Z,re){var ae;for(ae=0;ae<W;++ae){var se=k[P+ae],fe=se>>8&255,me=16711935&(me=(me=16711935&se)+((fe<<16)+fe));Z[re+ae]=(4278255360&se)+me>>>0}}function jt(k,P){P.jd=255&k,P.hd=k>>8&255,P.ud=k>>16&255}function Ce(k,P,W,Z,re,ae){var se;for(se=0;se<Z;++se){var fe=P[W+se],me=fe>>>8,ve=fe,Te=255&(Te=(Te=fe>>>16)+((k.jd<<24>>24)*(me<<24>>24)>>>5));ve=255&(ve=(ve+=(k.hd<<24>>24)*(me<<24>>24)>>>5)+((k.ud<<24>>24)*(Te<<24>>24)>>>5)),re[ae+se]=(4278255360&fe)+(Te<<16)+ve}}function Ke(k,P,W,Z,re){M[P]=function(ae,se,fe,me,ve,Te,qe,xe,Me){for(me=qe;me<xe;++me)for(qe=0;qe<Me;++qe)ve[Te++]=re(fe[Z(ae[se++])])},M[k]=function(ae,se,fe,me,ve,Te,qe){var xe=8>>ae.b,Me=ae.Ea,Fe=ae.K[0],Qe=ae.w;if(8>xe)for(ae=(1<<ae.b)-1,Qe=(1<<xe)-1;se<fe;++se){var ze,Ze=0;for(ze=0;ze<Me;++ze)ze&ae||(Ze=Z(me[ve++])),Te[qe++]=re(Fe[Ze&Qe]),Ze>>=xe}else M["VP8LMapColor"+W](me,ve,Fe,Qe,Te,qe,se,fe,Me)}}function Jt(k,P,W,Z,re){for(W=P+W;P<W;){var ae=k[P++];Z[re++]=ae>>16&255,Z[re++]=ae>>8&255,Z[re++]=255&ae}}function Bt(k,P,W,Z,re){for(W=P+W;P<W;){var ae=k[P++];Z[re++]=ae>>16&255,Z[re++]=ae>>8&255,Z[re++]=255&ae,Z[re++]=ae>>24&255}}function bt(k,P,W,Z,re){for(W=P+W;P<W;){var ae=(se=k[P++])>>16&240|se>>12&15,se=240&se|se>>28&15;Z[re++]=ae,Z[re++]=se}}function Lt(k,P,W,Z,re){for(W=P+W;P<W;){var ae=(se=k[P++])>>16&248|se>>13&7,se=se>>5&224|se>>3&31;Z[re++]=ae,Z[re++]=se}}function sr(k,P,W,Z,re){for(W=P+W;P<W;){var ae=k[P++];Z[re++]=255&ae,Z[re++]=ae>>8&255,Z[re++]=ae>>16&255}}function or(k,P,W,Z,re,ae){if(ae==0)for(W=P+W;P<W;)Se(Z,((ae=k[P++])[0]>>24|ae[1]>>8&65280|ae[2]<<8&16711680|ae[3]<<24)>>>0),re+=32;else a(Z,re,k,P,W)}function wn(k,P){M[P][0]=M[k+"0"],M[P][1]=M[k+"1"],M[P][2]=M[k+"2"],M[P][3]=M[k+"3"],M[P][4]=M[k+"4"],M[P][5]=M[k+"5"],M[P][6]=M[k+"6"],M[P][7]=M[k+"7"],M[P][8]=M[k+"8"],M[P][9]=M[k+"9"],M[P][10]=M[k+"10"],M[P][11]=M[k+"11"],M[P][12]=M[k+"12"],M[P][13]=M[k+"13"],M[P][14]=M[k+"0"],M[P][15]=M[k+"0"]}function fr(k){return k==Qf||k==bm||k==Mu||k==jm}function kr(){this.eb=[],this.size=this.A=this.fb=0}function mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Er(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new kr,this.f.kb=new mn,this.sd=null}function nr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Wr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function wi(k){return alert("todo:WebPSamplerProcessPlane"),k.T}function Za(k,P){var W=k.T,Z=P.ba.f.RGBA,re=Z.eb,ae=Z.fb+k.ka*Z.A,se=xs[P.ba.S],fe=k.y,me=k.O,ve=k.f,Te=k.N,qe=k.ea,xe=k.W,Me=P.cc,Fe=P.dc,Qe=P.Mc,ze=P.Nc,Ze=k.ka,at=k.ka+k.T,xt=k.U,ct=xt+1>>1;for(Ze==0?se(fe,me,null,null,ve,Te,qe,xe,ve,Te,qe,xe,re,ae,null,null,xt):(se(P.ec,P.fc,fe,me,Me,Fe,Qe,ze,ve,Te,qe,xe,re,ae-Z.A,re,ae,xt),++W);Ze+2<at;Ze+=2)Me=ve,Fe=Te,Qe=qe,ze=xe,Te+=k.Rc,xe+=k.Rc,ae+=2*Z.A,se(fe,(me+=2*k.fa)-k.fa,fe,me,Me,Fe,Qe,ze,ve,Te,qe,xe,re,ae-Z.A,re,ae,xt);return me+=k.fa,k.j+at<k.o?(a(P.ec,P.fc,fe,me,xt),a(P.cc,P.dc,ve,Te,ct),a(P.Mc,P.Nc,qe,xe,ct),W--):1&at||se(fe,me,null,null,ve,Te,qe,xe,ve,Te,qe,xe,re,ae+Z.A,null,null,xt),W}function As(k,P,W){var Z=k.F,re=[k.J];if(Z!=null){var ae=k.U,se=P.ba.S,fe=se==Zf||se==Mu;P=P.ba.f.RGBA;var me=[0],ve=k.ka;me[0]=k.T,k.Kb&&(ve==0?--me[0]:(--ve,re[0]-=k.width),k.j+k.ka+k.T==k.o&&(me[0]=k.o-k.j-ve));var Te=P.eb;ve=P.fb+ve*P.A,k=Kf(Z,re[0],k.width,ae,me,Te,ve+(fe?0:3),P.A),t(W==me),k&&fr(se)&&_d(Te,ve,fe,ae,me,P.A)}return 0}function ii(k){var P=k.ma,W=P.ba.S,Z=11>W,re=W==Rs||W==Zi||W==Zf||W==Pu||W==12||fr(W);if(P.memory=null,P.Ib=null,P.Jb=null,P.Nd=null,!Yl(P.Oa,k,re?11:12))return 0;if(re&&fr(W)&&Vf(),k.da)alert("todo:use_scaling");else{if(Z){if(P.Ib=wi,k.Kb){if(W=k.U+1>>1,P.memory=i(k.U+2*W),P.memory==null)return 0;P.ec=P.memory,P.fc=0,P.cc=P.ec,P.dc=P.fc+k.U,P.Mc=P.cc,P.Nc=P.dc+W,P.Ib=Za,Vf()}}else alert("todo:EmitYUV");re&&(P.Jb=As,Z&&No())}if(Z&&!Bc){for(k=0;256>k;++k)vs[k]=89858*(k-128)+Iu>>ao,Y2[k]=-22014*(k-128)+Iu,s0[k]=-45773*(k-128),_m[k]=113618*(k-128)+Iu>>ao;for(k=Ed;k<Fc;++k)P=76283*(k-16)+Iu>>ao,X2[k-Ed]=ft(P,255),J2[k-Ed]=ft(P+8>>4,15);Bc=1}return 1}function Zt(k){var P=k.ma,W=k.U,Z=k.T;return t(!(1&k.ka)),0>=W||0>=Z?0:(W=P.Ib(k,P),P.Jb!=null&&P.Jb(k,P,W),P.Dc+=W,1)}function Gi(k){k.ma.memory=null}function qs(k,P,W,Z){return F(k,8)!=47?0:(P[0]=F(k,14)+1,W[0]=F(k,14)+1,Z[0]=F(k,1),F(k,3)!=0?0:!k.h)}function ks(k,P){if(4>k)return k+1;var W=k-2>>1;return(2+(1&k)<<W)+F(P,W)+1}function Ha(k,P){return 120<P?P-120:1<=(W=((W=eo[P-1])>>4)*k+(8-(15&W)))?W:1;var W}function Mn(k,P,W){var Z=X(W),re=k[P+=255&Z].g-8;return 0<re&&(ie(W,W.u+8),Z=X(W),P+=k[P].value,P+=Z&(1<<re)-1),ie(W,W.u+k[P].g),k[P].value}function Cn(k,P,W){return W.g+=k.g,W.value+=k.value<<P>>>0,t(8>=W.g),k.g}function Sa(k,P,W){var Z=k.xc;return t((P=Z==0?0:k.vc[k.md*(W>>Z)+(P>>Z)])<k.Wb),k.Ya[P]}function Ni(k,P,W,Z){var re=k.ab,ae=k.c*P,se=k.C;P=se+P;var fe=W,me=Z;for(Z=k.Ta,W=k.Ua;0<re--;){var ve=k.gc[re],Te=se,qe=P,xe=fe,Me=me,Fe=(me=Z,fe=W,ve.Ea);switch(t(Te<qe),t(qe<=ve.nc),ve.hc){case 2:Aa(xe,Me,(qe-Te)*Fe,me,fe);break;case 0:var Qe=Te,ze=qe,Ze=me,at=fe,xt=(qt=ve).Ea;Qe==0&&(Ou(xe,Me,null,null,1,Ze,at),Gt(xe,Me+1,0,0,xt-1,Ze,at+1),Me+=xt,at+=xt,++Qe);for(var ct=1<<qt.b,Wt=ct-1,$t=Ee(xt,qt.b),Tr=qt.K,qt=qt.w+(Qe>>qt.b)*$t;Qe<ze;){var Yr=Tr,Hn=qt,Dr=1;for(Eu(xe,Me,Ze,at-xt,1,Ze,at);Dr<xt;){var Ft=(Dr&~Wt)+ct;Ft>xt&&(Ft=xt),(0,Jl[Yr[Hn++]>>8&15])(xe,Me+ +Dr,Ze,at+Dr-xt,Ft-Dr,Ze,at+Dr),Dr=Ft}Me+=xt,at+=xt,++Qe&Wt||(qt+=$t)}qe!=ve.nc&&a(me,fe-Fe,me,fe+(qe-Te-1)*Fe,Fe);break;case 1:for(Fe=xe,ze=Me,xt=(xe=ve.Ea)-(at=xe&~(Ze=(Me=1<<ve.b)-1)),Qe=Ee(xe,ve.b),ct=ve.K,ve=ve.w+(Te>>ve.b)*Qe;Te<qe;){for(Wt=ct,$t=ve,Tr=new gt,qt=ze+at,Yr=ze+xe;ze<qt;)jt(Wt[$t++],Tr),Tu(Tr,Fe,ze,Me,me,fe),ze+=Me,fe+=Me;ze<Yr&&(jt(Wt[$t++],Tr),Tu(Tr,Fe,ze,xt,me,fe),ze+=xt,fe+=xt),++Te&Ze||(ve+=Qe)}break;case 3:if(xe==me&&Me==fe&&0<ve.b){for(ze=me,xe=Fe=fe+(qe-Te)*Fe-(at=(qe-Te)*Ee(ve.Ea,ve.b)),Me=me,Ze=fe,Qe=[],at=(xt=at)-1;0<=at;--at)Qe[at]=Me[Ze+at];for(at=xt-1;0<=at;--at)ze[xe+at]=Qe[at];pm(ve,Te,qe,me,Fe,me,fe)}else pm(ve,Te,qe,xe,Me,me,fe)}fe=Z,me=W}me!=W&&a(Z,W,fe,me,ae)}function Qa(k,P){var W=k.V,Z=k.Ba+k.c*k.C,re=P-k.C;if(t(P<=k.l.o),t(16>=re),0<re){var ae=k.l,se=k.Ta,fe=k.Ua,me=ae.width;if(Ni(k,re,W,Z),re=fe=[fe],t((W=k.C)<(Z=P)),t(ae.v<ae.va),Z>ae.o&&(Z=ae.o),W<ae.j){var ve=ae.j-W;W=ae.j,re[0]+=ve*me}if(W>=Z?W=0:(re[0]+=4*ae.v,ae.ka=W-ae.j,ae.U=ae.va-ae.v,ae.T=Z-W,W=1),W){if(fe=fe[0],11>(W=k.ca).S){var Te=W.f.RGBA,qe=(Z=W.S,re=ae.U,ae=ae.T,ve=Te.eb,Te.A),xe=ae;for(Te=Te.fb+k.Ma*Te.A;0<xe--;){var Me=se,Fe=fe,Qe=re,ze=ve,Ze=Te;switch(Z){case vm:Ru(Me,Fe,Qe,ze,Ze);break;case Rs:Zl(Me,Fe,Qe,ze,Ze);break;case Qf:Zl(Me,Fe,Qe,ze,Ze),_d(ze,Ze,0,Qe,1,0);break;case ym:Sd(Me,Fe,Qe,ze,Ze);break;case Zi:or(Me,Fe,Qe,ze,Ze,1);break;case bm:or(Me,Fe,Qe,ze,Ze,1),_d(ze,Ze,0,Qe,1,0);break;case Zf:or(Me,Fe,Qe,ze,Ze,0);break;case Mu:or(Me,Fe,Qe,ze,Ze,0),_d(ze,Ze,1,Qe,1,0);break;case Pu:Ql(Me,Fe,Qe,ze,Ze);break;case jm:Ql(Me,Fe,Qe,ze,Ze),Ji(ze,Ze,Qe,1,0);break;case Mc:rl(Me,Fe,Qe,ze,Ze);break;default:t(0)}fe+=me,Te+=qe}k.Ma+=ae}else alert("todo:EmitRescaledRowsYUVA");t(k.Ma<=W.height)}}k.C=P,t(k.C<=k.i)}function pn(k){var P;if(0<k.ua)return 0;for(P=0;P<k.Wb;++P){var W=k.Ya[P].G,Z=k.Ya[P].H;if(0<W[1][Z[1]+0].g||0<W[2][Z[2]+0].g||0<W[3][Z[3]+0].g)return 0}return 1}function _n(k,P,W,Z,re,ae){if(k.Z!=0){var se=k.qd,fe=k.rd;for(t(rc[k.Z]!=null);P<W;++P)rc[k.Z](se,fe,Z,re,Z,re,ae),se=Z,fe=re,re+=ae;k.qd=se,k.rd=fe}}function es(k,P){var W=k.l.ma,Z=W.Z==0||W.Z==1?k.l.j:k.C;if(Z=k.C<Z?Z:k.C,t(P<=k.l.o),P>Z){var re=k.l.width,ae=W.ca,se=W.tb+re*Z,fe=k.V,me=k.Ba+k.c*Z,ve=k.gc;t(k.ab==1),t(ve[0].hc==3),tl(ve[0],Z,P,fe,me,ae,se),_n(W,Z,P,ae,se,re)}k.C=k.Ma=P}function Us(k,P,W,Z,re,ae,se){var fe=k.$/Z,me=k.$%Z,ve=k.m,Te=k.s,qe=W+k.$,xe=qe;re=W+Z*re;var Me=W+Z*ae,Fe=280+Te.ua,Qe=k.Pb?fe:16777216,ze=0<Te.ua?Te.Wa:null,Ze=Te.wc,at=qe<Me?Sa(Te,me,fe):null;t(k.C<ae),t(Me<=re);var xt=!1;e:for(;;){for(;xt||qe<Me;){var ct=0;if(fe>=Qe){var Wt=qe-W;t((Qe=k).Pb),Qe.wd=Qe.m,Qe.xd=Wt,0<Qe.s.ua&&Xe(Qe.s.Wa,Qe.s.vb),Qe=fe+Dc}if(me&Ze||(at=Sa(Te,me,fe)),t(at!=null),at.Qb&&(P[qe]=at.qb,xt=!0),!xt)if(ce(ve),at.jc){ct=ve,Wt=P;var $t=qe,Tr=at.pd[X(ct)&Pc-1];t(at.jc),256>Tr.g?(ie(ct,ct.u+Tr.g),Wt[$t]=Tr.value,ct=0):(ie(ct,ct.u+Tr.g-256),t(256<=Tr.value),ct=Tr.value),ct==0&&(xt=!0)}else ct=Mn(at.G[0],at.H[0],ve);if(ve.h)break;if(xt||256>ct){if(!xt)if(at.nd)P[qe]=(at.qb|ct<<8)>>>0;else{if(ce(ve),xt=Mn(at.G[1],at.H[1],ve),ce(ve),Wt=Mn(at.G[2],at.H[2],ve),$t=Mn(at.G[3],at.H[3],ve),ve.h)break;P[qe]=($t<<24|xt<<16|ct<<8|Wt)>>>0}if(xt=!1,++qe,++me>=Z&&(me=0,++fe,se!=null&&fe<=ae&&!(fe%16)&&se(k,fe),ze!=null))for(;xe<qe;)ct=P[xe++],ze.X[(506832829*ct&4294967295)>>>ze.Mb]=ct}else if(280>ct){if(ct=ks(ct-256,ve),Wt=Mn(at.G[4],at.H[4],ve),ce(ve),Wt=Ha(Z,Wt=ks(Wt,ve)),ve.h)break;if(qe-W<Wt||re-qe<ct)break e;for($t=0;$t<ct;++$t)P[qe+$t]=P[qe+$t-Wt];for(qe+=ct,me+=ct;me>=Z;)me-=Z,++fe,se!=null&&fe<=ae&&!(fe%16)&&se(k,fe);if(t(qe<=re),me&Ze&&(at=Sa(Te,me,fe)),ze!=null)for(;xe<qe;)ct=P[xe++],ze.X[(506832829*ct&4294967295)>>>ze.Mb]=ct}else{if(!(ct<Fe))break e;for(xt=ct-280,t(ze!=null);xe<qe;)ct=P[xe++],ze.X[(506832829*ct&4294967295)>>>ze.Mb]=ct;ct=qe,t(!(xt>>>(Wt=ze).Xa)),P[ct]=Wt.X[xt],xt=!0}xt||t(ve.h==ne(ve))}if(k.Pb&&ve.h&&qe<re)t(k.m.h),k.a=5,k.m=k.wd,k.$=k.xd,0<k.s.ua&&Xe(k.s.vb,k.s.Wa);else{if(ve.h)break e;se!=null&&se(k,fe>ae?ae:fe),k.a=0,k.$=qe-W}return 1}return k.a=3,0}function oi(k){t(k!=null),k.vc=null,k.yc=null,k.Ya=null;var P=k.Wa;P!=null&&(P.X=null),k.vb=null,t(k!=null)}function Ll(){var k=new _r;return k==null?null:(k.a=0,k.xb=Qg,wn("Predictor","VP8LPredictors"),wn("Predictor","VP8LPredictors_C"),wn("PredictorAdd","VP8LPredictorsAdd"),wn("PredictorAdd","VP8LPredictorsAdd_C"),Aa=rr,Tu=Ce,Ru=Jt,Zl=Bt,Ql=bt,rl=Lt,Sd=sr,M.VP8LMapColor32b=el,M.VP8LMapColor8b=ms,k)}function Si(k,P,W,Z,re){var ae=1,se=[k],fe=[P],me=Z.m,ve=Z.s,Te=null,qe=0;e:for(;;){if(W)for(;ae&&F(me,1);){var xe=se,Me=fe,Fe=Z,Qe=1,ze=Fe.m,Ze=Fe.gc[Fe.ab],at=F(ze,2);if(Fe.Oc&1<<at)ae=0;else{switch(Fe.Oc|=1<<at,Ze.hc=at,Ze.Ea=xe[0],Ze.nc=Me[0],Ze.K=[null],++Fe.ab,t(4>=Fe.ab),at){case 0:case 1:Ze.b=F(ze,3)+2,Qe=Si(Ee(Ze.Ea,Ze.b),Ee(Ze.nc,Ze.b),0,Fe,Ze.K),Ze.K=Ze.K[0];break;case 3:var xt,ct=F(ze,8)+1,Wt=16<ct?0:4<ct?1:2<ct?2:3;if(xe[0]=Ee(Ze.Ea,Wt),Ze.b=Wt,xt=Qe=Si(ct,1,0,Fe,Ze.K)){var $t,Tr=ct,qt=Ze,Yr=1<<(8>>qt.b),Hn=i(Yr);if(Hn==null)xt=0;else{var Dr=qt.K[0],Ft=qt.w;for(Hn[0]=qt.K[0][0],$t=1;$t<1*Tr;++$t)Hn[$t]=lt(Dr[Ft+$t],Hn[$t-1]);for(;$t<4*Yr;++$t)Hn[$t]=0;qt.K[0]=null,qt.K[0]=Hn,xt=1}}Qe=xt;break;case 2:break;default:t(0)}ae=Qe}}if(se=se[0],fe=fe[0],ae&&F(me,1)&&!(ae=1<=(qe=F(me,4))&&11>=qe)){Z.a=3;break e}var wt;if(wt=ae)t:{var na,pr,Br,gn=Z,Wa=se,ys=fe,In=qe,La=W,Ps=gn.m,Ia=gn.s,Gr=[null],sn=1,aa=0,dn=to[In];r:for(;;){if(La&&F(Ps,1)){var Ka=F(Ps,3)+2,sa=Ee(Wa,Ka),on=Ee(ys,Ka),Ea=sa*on;if(!Si(sa,on,0,gn,Gr))break r;for(Gr=Gr[0],Ia.xc=Ka,na=0;na<Ea;++na){var xn=Gr[na]>>8&65535;Gr[na]=xn,xn>=sn&&(sn=xn+1)}}if(Ps.h)break r;for(pr=0;5>pr;++pr){var $a=kd[pr];!pr&&0<In&&($a+=1<<In),aa<$a&&(aa=$a)}var Fa=o(sn*dn,K),kn=sn,an=o(kn,J);if(an==null)var Ms=null;else t(65536>=kn),Ms=an;var pa=i(aa);if(Ms==null||pa==null||Fa==null){gn.a=1;break r}var cr=Fa;for(na=Br=0;na<sn;++na){var dr=Ms[na],ln=dr.G,ui=dr.H,so=0,Ys=1,Ba=0;for(pr=0;5>pr;++pr){$a=kd[pr],ln[pr]=cr,ui[pr]=Br,!pr&&0<In&&($a+=1<<In);a:{var zc,qc=$a,km=gn,$n=pa,tx=cr,rx=Br,Om=0,nc=km.m,Z2=F(nc,1);if(s($n,0,0,qc),Z2){var nx=F(nc,1)+1,ax=F(nc,1),Em=F(nc,ax==0?1:8);$n[Em]=1,nx==2&&($n[Em=F(nc,8)]=1);var as=1}else{var ga=i(19),nh=F(nc,4)+4;if(19<nh){km.a=3;var Uc=0;break a}for(zc=0;zc<nh;++zc)ga[eh[zc]]=F(nc,3);var Fu=void 0,Td=void 0,sl=km,Tm=ga,Bu=qc,Rm=$n,Pm=0,ac=sl.m,sx=8,ix=o(128,K);n:for(;$(ix,0,7,Tm,19);){if(F(ac,1)){var i0=2+2*F(ac,3);if((Fu=2+F(ac,i0))>Bu)break n}else Fu=Bu;for(Td=0;Td<Bu&&Fu--;){ce(ac);var ox=ix[0+(127&X(ac))];ie(ac,ac.u+ox.g);var Vc=ox.value;if(16>Vc)Rm[Td++]=Vc,Vc!=0&&(sx=Vc);else{var o0=Vc==16,l0=Vc-16,c0=Du[l0],lx=F(ac,Qi[l0])+c0;if(Td+lx>Bu)break n;for(var d0=o0?sx:0;0<lx--;)Rm[Td++]=d0}}Pm=1;break n}Pm||(sl.a=3),as=Pm}(as=as&&!nc.h)&&(Om=$(tx,rx,8,$n,qc)),as&&Om!=0?Uc=Om:(km.a=3,Uc=0)}if(Uc==0)break r;if(Ys&&wm[pr]==1&&(Ys=cr[Br].g==0),so+=cr[Br].g,Br+=Uc,3>=pr){var Rd,Mm=pa[0];for(Rd=1;Rd<$a;++Rd)pa[Rd]>Mm&&(Mm=pa[Rd]);Ba+=Mm}}if(dr.nd=Ys,dr.Qb=0,Ys&&(dr.qb=(ln[3][ui[3]+0].value<<24|ln[1][ui[1]+0].value<<16|ln[2][ui[2]+0].value)>>>0,so==0&&256>ln[0][ui[0]+0].value&&(dr.Qb=1,dr.qb+=ln[0][ui[0]+0].value<<8)),dr.jc=!dr.Qb&&6>Ba,dr.jc){var ah,il=dr;for(ah=0;ah<Pc;++ah){var sc=ah,ic=il.pd[sc],Dm=il.G[0][il.H[0]+sc];256<=Dm.value?(ic.g=Dm.g+256,ic.value=Dm.value):(ic.g=0,ic.value=0,sc>>=Cn(Dm,8,ic),sc>>=Cn(il.G[1][il.H[1]+sc],16,ic),sc>>=Cn(il.G[2][il.H[2]+sc],0,ic),Cn(il.G[3][il.H[3]+sc],24,ic))}}}Ia.vc=Gr,Ia.Wb=sn,Ia.Ya=Ms,Ia.yc=Fa,wt=1;break t}wt=0}if(!(ae=wt)){Z.a=3;break e}if(0<qe){if(ve.ua=1<<qe,!oe(ve.Wa,qe)){Z.a=1,ae=0;break e}}else ve.ua=0;var Lm=Z,Pd=se,u0=fe,zu=Lm.s,qu=zu.xc;if(Lm.c=Pd,Lm.i=u0,zu.md=Ee(Pd,qu),zu.wc=qu==0?-1:(1<<qu)-1,W){Z.xb=Lc;break e}if((Te=i(se*fe))==null){Z.a=1,ae=0;break e}ae=(ae=Us(Z,Te,0,se,fe,fe,null))&&!me.h;break e}return ae?(re!=null?re[0]=Te:(t(Te==null),t(W)),Z.$=0,W||oi(ve)):oi(ve),ae}function Ci(k,P){var W=k.c*k.i,Z=W+P+16*P;return t(k.c<=P),k.V=i(Z),k.V==null?(k.Ta=null,k.Ua=0,k.a=1,0):(k.Ta=k.V,k.Ua=k.Ba+W+P,1)}function _i(k,P){var W=k.C,Z=P-W,re=k.V,ae=k.Ba+k.c*W;for(t(P<=k.l.o);0<Z;){var se=16<Z?16:Z,fe=k.l.ma,me=k.l.width,ve=me*se,Te=fe.ca,qe=fe.tb+me*W,xe=k.Ta,Me=k.Ua;Ni(k,se,re,ae),Di(xe,Me,Te,qe,ve),_n(fe,W,W+se,Te,qe,me),Z-=se,re+=se*k.c,W+=se}t(W==P),k.C=k.Ma=P}function Ai(){this.ub=this.yd=this.td=this.Rb=0}function ki(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function bo(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Os(){this.Yb=(function(){var k=[];return(function P(W,Z,re){for(var ae=re[Z],se=0;se<ae&&(W.push(re.length>Z+1?[]:0),!(re.length<Z+1));se++)P(W[se],Z+1,re)})(k,0,[3,11]),k})()}function An(){this.jb=i(3),this.Wc=l([4,8],Os),this.Xc=l([4,17],Os)}function _c(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Vs(){this.ld=this.La=this.dd=this.tc=0}function Oi(){this.Na=this.la=0}function jo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ac(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function kc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vs),this.Y=0,this.ya=Array(new Ac),this.aa=0,this.l=new It}function Oc(){this.y=i(16),this.f=i(8),this.ea=i(8)}function De(){this.cb=this.a=0,this.sc="",this.m=new z,this.Od=new Ai,this.Kc=new ki,this.ed=new _c,this.Qa=new bo,this.Ic=this.$c=this.Aa=0,this.D=new kc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,z),this.ia=0,this.pb=o(4,jo),this.Pa=new An,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Oc),this.Hd=0,this.rb=Array(new Oi),this.sb=0,this.wa=Array(new Vs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ac),this.L=this.aa=0,this.gd=l([4,2],Vs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ft(k,P){return 0>k?0:k>P?P:k}function It(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Pt(){var k=new De;return k!=null&&(k.a=0,k.sc="OK",k.cb=0,k.Xb=0,Li||(Li=Ei)),k}function lr(k,P,W){return k.a==0&&(k.a=P,k.sc=W,k.cb=0),0}function ts(k,P,W){return 3<=W&&k[P+0]==157&&k[P+1]==1&&k[P+2]==42}function li(k,P){if(k==null)return 0;if(k.a=0,k.sc="OK",P==null)return lr(k,2,"null VP8Io passed to VP8GetHeaders()");var W=P.data,Z=P.w,re=P.ha;if(4>re)return lr(k,7,"Truncated header.");var ae=W[Z+0]|W[Z+1]<<8|W[Z+2]<<16,se=k.Od;if(se.Rb=!(1&ae),se.td=ae>>1&7,se.yd=ae>>4&1,se.ub=ae>>5,3<se.td)return lr(k,3,"Incorrect keyframe parameters.");if(!se.yd)return lr(k,4,"Frame not displayable.");Z+=3,re-=3;var fe=k.Kc;if(se.Rb){if(7>re)return lr(k,7,"cannot parse picture header");if(!ts(W,Z,re))return lr(k,3,"Bad code word");fe.c=16383&(W[Z+4]<<8|W[Z+3]),fe.Td=W[Z+4]>>6,fe.i=16383&(W[Z+6]<<8|W[Z+5]),fe.Ud=W[Z+6]>>6,Z+=7,re-=7,k.za=fe.c+15>>4,k.Ub=fe.i+15>>4,P.width=fe.c,P.height=fe.i,P.Da=0,P.j=0,P.v=0,P.va=P.width,P.o=P.height,P.da=0,P.ib=P.width,P.hb=P.height,P.U=P.width,P.T=P.height,s((ae=k.Pa).jb,0,255,ae.jb.length),t((ae=k.Qa)!=null),ae.Cb=0,ae.Bb=0,ae.Fb=1,s(ae.Zb,0,0,ae.Zb.length),s(ae.Lb,0,0,ae.Lb)}if(se.ub>re)return lr(k,7,"bad partition length");V(ae=k.m,W,Z,se.ub),Z+=se.ub,re-=se.ub,se.Rb&&(fe.Ld=he(ae),fe.Kd=he(ae)),fe=k.Qa;var me,ve=k.Pa;if(t(ae!=null),t(fe!=null),fe.Cb=he(ae),fe.Cb){if(fe.Bb=he(ae),he(ae)){for(fe.Fb=he(ae),me=0;4>me;++me)fe.Zb[me]=he(ae)?q(ae,7):0;for(me=0;4>me;++me)fe.Lb[me]=he(ae)?q(ae,6):0}if(fe.Bb)for(me=0;3>me;++me)ve.jb[me]=he(ae)?G(ae,8):255}else fe.Bb=0;if(ae.Ka)return lr(k,3,"cannot parse segment header");if((fe=k.ed).zd=he(ae),fe.Tb=G(ae,6),fe.wb=G(ae,3),fe.Pc=he(ae),fe.Pc&&he(ae)){for(ve=0;4>ve;++ve)he(ae)&&(fe.vd[ve]=q(ae,6));for(ve=0;4>ve;++ve)he(ae)&&(fe.od[ve]=q(ae,6))}if(k.L=fe.Tb==0?0:fe.zd?1:2,ae.Ka)return lr(k,3,"cannot parse filter header");var Te=re;if(re=me=Z,Z=me+Te,fe=Te,k.Xb=(1<<G(k.m,2))-1,Te<3*(ve=k.Xb))W=7;else{for(me+=3*ve,fe-=3*ve,Te=0;Te<ve;++Te){var qe=W[re+0]|W[re+1]<<8|W[re+2]<<16;qe>fe&&(qe=fe),V(k.Jc[+Te],W,me,qe),me+=qe,fe-=qe,re+=3}V(k.Jc[+ve],W,me,fe),W=me<Z?0:5}if(W!=0)return lr(k,W,"cannot parse partitions");for(W=G(me=k.m,7),re=he(me)?q(me,4):0,Z=he(me)?q(me,4):0,fe=he(me)?q(me,4):0,ve=he(me)?q(me,4):0,me=he(me)?q(me,4):0,Te=k.Qa,qe=0;4>qe;++qe){if(Te.Cb){var xe=Te.Zb[qe];Te.Fb||(xe+=W)}else{if(0<qe){k.pb[qe]=k.pb[0];continue}xe=W}var Me=k.pb[qe];Me.Sc[0]=ro[ft(xe+re,127)],Me.Sc[1]=no[ft(xe+0,127)],Me.Eb[0]=2*ro[ft(xe+Z,127)],Me.Eb[1]=101581*no[ft(xe+fe,127)]>>16,8>Me.Eb[1]&&(Me.Eb[1]=8),Me.Qc[0]=ro[ft(xe+ve,117)],Me.Qc[1]=no[ft(xe+me,127)],Me.lc=xe+me}if(!se.Rb)return lr(k,4,"Not a key frame.");for(he(ae),se=k.Pa,W=0;4>W;++W){for(re=0;8>re;++re)for(Z=0;3>Z;++Z)for(fe=0;11>fe;++fe)ve=ue(ae,Vn[W][re][Z][fe])?G(ae,8):a0[W][re][Z][fe],se.Wc[W][re].Yb[Z][fe]=ve;for(re=0;17>re;++re)se.Xc[W][re]=se.Wc[W][Xr[re]]}return k.kc=he(ae),k.kc&&(k.Bd=G(ae,8)),k.cb=1}function Ei(k,P,W,Z,re,ae,se){var fe=P[re].Yb[W];for(W=0;16>re;++re){if(!ue(k,fe[W+0]))return re;for(;!ue(k,fe[W+1]);)if(fe=P[++re].Yb[0],W=0,re==16)return 16;var me=P[re+1].Yb;if(ue(k,fe[W+2])){var ve=k,Te=0;if(ue(ve,(xe=fe)[(qe=W)+3]))if(ue(ve,xe[qe+6])){for(fe=0,qe=2*(Te=ue(ve,xe[qe+8]))+(xe=ue(ve,xe[qe+9+Te])),Te=0,xe=n0[qe];xe[fe];++fe)Te+=Te+ue(ve,xe[fe]);Te+=3+(8<<qe)}else ue(ve,xe[qe+7])?(Te=7+2*ue(ve,165),Te+=ue(ve,145)):Te=5+ue(ve,159);else Te=ue(ve,xe[qe+4])?3+ue(ve,xe[qe+5]):2;fe=me[2]}else Te=1,fe=me[1];me=se+Zg[re],0>(ve=k).b&&ge(ve);var qe,xe=ve.b,Me=(qe=ve.Ca>>1)-(ve.I>>xe)>>31;--ve.b,ve.Ca+=Me,ve.Ca|=1,ve.I-=(qe+1&Me)<<xe,ae[me]=((Te^Me)-Me)*Z[(0<re)+0]}return 16}function ta(k){var P=k.rb[k.sb-1];P.la=0,P.Na=0,s(k.zc,0,0,k.zc.length),k.ja=0}function Xn(k,P,W,Z,re){re=k[P+W+32*Z]+(re>>3),k[P+W+32*Z]=-256&re?0>re?0:255:re}function Jn(k,P,W,Z,re,ae){Xn(k,P,0,W,Z+re),Xn(k,P,1,W,Z+ae),Xn(k,P,2,W,Z-ae),Xn(k,P,3,W,Z-re)}function Un(k){return(20091*k>>16)+k}function ha(k,P,W,Z){var re,ae=0,se=i(16);for(re=0;4>re;++re){var fe=k[P+0]+k[P+8],me=k[P+0]-k[P+8],ve=(35468*k[P+4]>>16)-Un(k[P+12]),Te=Un(k[P+4])+(35468*k[P+12]>>16);se[ae+0]=fe+Te,se[ae+1]=me+ve,se[ae+2]=me-ve,se[ae+3]=fe-Te,ae+=4,P++}for(re=ae=0;4>re;++re)fe=(k=se[ae+0]+4)+se[ae+8],me=k-se[ae+8],ve=(35468*se[ae+4]>>16)-Un(se[ae+12]),Xn(W,Z,0,0,fe+(Te=Un(se[ae+4])+(35468*se[ae+12]>>16))),Xn(W,Z,1,0,me+ve),Xn(W,Z,2,0,me-ve),Xn(W,Z,3,0,fe-Te),ae++,Z+=32}function Wi(k,P,W,Z){var re=k[P+0]+4,ae=35468*k[P+4]>>16,se=Un(k[P+4]),fe=35468*k[P+1]>>16;Jn(W,Z,0,re+se,k=Un(k[P+1]),fe),Jn(W,Z,1,re+ae,k,fe),Jn(W,Z,2,re-ae,k,fe),Jn(W,Z,3,re-se,k,fe)}function Il(k,P,W,Z,re){ha(k,P,W,Z),re&&ha(k,P+16,W,Z+4)}function us(k,P,W,Z){ec(k,P+0,W,Z,1),ec(k,P+32,W,Z+128,1)}function Hr(k,P,W,Z){var re;for(k=k[P+0]+4,re=0;4>re;++re)for(P=0;4>P;++P)Xn(W,Z,P,re,k)}function Ca(k,P,W,Z){k[P+0]&&cn(k,P+0,W,Z),k[P+16]&&cn(k,P+16,W,Z+4),k[P+32]&&cn(k,P+32,W,Z+128),k[P+48]&&cn(k,P+48,W,Z+128+4)}function Hs(k,P,W,Z){var re,ae=i(16);for(re=0;4>re;++re){var se=k[P+0+re]+k[P+12+re],fe=k[P+4+re]+k[P+8+re],me=k[P+4+re]-k[P+8+re],ve=k[P+0+re]-k[P+12+re];ae[0+re]=se+fe,ae[8+re]=se-fe,ae[4+re]=ve+me,ae[12+re]=ve-me}for(re=0;4>re;++re)se=(k=ae[0+4*re]+3)+ae[3+4*re],fe=ae[1+4*re]+ae[2+4*re],me=ae[1+4*re]-ae[2+4*re],ve=k-ae[3+4*re],W[Z+0]=se+fe>>3,W[Z+16]=ve+me>>3,W[Z+32]=se-fe>>3,W[Z+48]=ve-me>>3,Z+=64}function xd(k,P,W){var Z,re=P-32,ae=Ts,se=255-k[re-1];for(Z=0;Z<W;++Z){var fe,me=ae,ve=se+k[P-1];for(fe=0;fe<W;++fe)k[P+fe]=me[ve+k[re+fe]];P+=32}}function om(k,P){xd(k,P,4)}function lm(k,P){xd(k,P,8)}function Ff(k,P){xd(k,P,16)}function Bf(k,P){var W;for(W=0;16>W;++W)a(k,P+32*W,k,P-32,16)}function cm(k,P){var W;for(W=16;0<W;--W)s(k,P,k[P-1],16),P+=32}function ci(k,P,W){var Z;for(Z=0;16>Z;++Z)s(P,W+32*Z,k,16)}function wo(k,P){var W,Z=16;for(W=0;16>W;++W)Z+=k[P-1+32*W]+k[P+W-32];ci(Z>>5,k,P)}function $l(k,P){var W,Z=8;for(W=0;16>W;++W)Z+=k[P-1+32*W];ci(Z>>4,k,P)}function vd(k,P){var W,Z=8;for(W=0;16>W;++W)Z+=k[P+W-32];ci(Z>>4,k,P)}function Ec(k,P){ci(128,k,P)}function mr(k,P,W){return k+2*P+W+2>>2}function dm(k,P){var W,Z=P-32;for(Z=new Uint8Array([mr(k[Z-1],k[Z+0],k[Z+1]),mr(k[Z+0],k[Z+1],k[Z+2]),mr(k[Z+1],k[Z+2],k[Z+3]),mr(k[Z+2],k[Z+3],k[Z+4])]),W=0;4>W;++W)a(k,P+32*W,Z,0,Z.length)}function zf(k,P){var W=k[P-1],Z=k[P-1+32],re=k[P-1+64],ae=k[P-1+96];Se(k,P+0,16843009*mr(k[P-1-32],W,Z)),Se(k,P+32,16843009*mr(W,Z,re)),Se(k,P+64,16843009*mr(Z,re,ae)),Se(k,P+96,16843009*mr(re,ae,ae))}function um(k,P){var W,Z=4;for(W=0;4>W;++W)Z+=k[P+W-32]+k[P-1+32*W];for(Z>>=3,W=0;4>W;++W)s(k,P+32*W,Z,4)}function Ti(k,P){var W=k[P-1+0],Z=k[P-1+32],re=k[P-1+64],ae=k[P-1-32],se=k[P+0-32],fe=k[P+1-32],me=k[P+2-32],ve=k[P+3-32];k[P+0+96]=mr(Z,re,k[P-1+96]),k[P+1+96]=k[P+0+64]=mr(W,Z,re),k[P+2+96]=k[P+1+64]=k[P+0+32]=mr(ae,W,Z),k[P+3+96]=k[P+2+64]=k[P+1+32]=k[P+0+0]=mr(se,ae,W),k[P+3+64]=k[P+2+32]=k[P+1+0]=mr(fe,se,ae),k[P+3+32]=k[P+2+0]=mr(me,fe,se),k[P+3+0]=mr(ve,me,fe)}function fs(k,P){var W=k[P+1-32],Z=k[P+2-32],re=k[P+3-32],ae=k[P+4-32],se=k[P+5-32],fe=k[P+6-32],me=k[P+7-32];k[P+0+0]=mr(k[P+0-32],W,Z),k[P+1+0]=k[P+0+32]=mr(W,Z,re),k[P+2+0]=k[P+1+32]=k[P+0+64]=mr(Z,re,ae),k[P+3+0]=k[P+2+32]=k[P+1+64]=k[P+0+96]=mr(re,ae,se),k[P+3+32]=k[P+2+64]=k[P+1+96]=mr(ae,se,fe),k[P+3+64]=k[P+2+96]=mr(se,fe,me),k[P+3+96]=mr(fe,me,me)}function qf(k,P){var W=k[P-1+0],Z=k[P-1+32],re=k[P-1+64],ae=k[P-1-32],se=k[P+0-32],fe=k[P+1-32],me=k[P+2-32],ve=k[P+3-32];k[P+0+0]=k[P+1+64]=ae+se+1>>1,k[P+1+0]=k[P+2+64]=se+fe+1>>1,k[P+2+0]=k[P+3+64]=fe+me+1>>1,k[P+3+0]=me+ve+1>>1,k[P+0+96]=mr(re,Z,W),k[P+0+64]=mr(Z,W,ae),k[P+0+32]=k[P+1+96]=mr(W,ae,se),k[P+1+32]=k[P+2+96]=mr(ae,se,fe),k[P+2+32]=k[P+3+96]=mr(se,fe,me),k[P+3+32]=mr(fe,me,ve)}function yd(k,P){var W=k[P+0-32],Z=k[P+1-32],re=k[P+2-32],ae=k[P+3-32],se=k[P+4-32],fe=k[P+5-32],me=k[P+6-32],ve=k[P+7-32];k[P+0+0]=W+Z+1>>1,k[P+1+0]=k[P+0+64]=Z+re+1>>1,k[P+2+0]=k[P+1+64]=re+ae+1>>1,k[P+3+0]=k[P+2+64]=ae+se+1>>1,k[P+0+32]=mr(W,Z,re),k[P+1+32]=k[P+0+96]=mr(Z,re,ae),k[P+2+32]=k[P+1+96]=mr(re,ae,se),k[P+3+32]=k[P+2+96]=mr(ae,se,fe),k[P+3+64]=mr(se,fe,me),k[P+3+96]=mr(fe,me,ve)}function Ri(k,P){var W=k[P-1+0],Z=k[P-1+32],re=k[P-1+64],ae=k[P-1+96];k[P+0+0]=W+Z+1>>1,k[P+2+0]=k[P+0+32]=Z+re+1>>1,k[P+2+32]=k[P+0+64]=re+ae+1>>1,k[P+1+0]=mr(W,Z,re),k[P+3+0]=k[P+1+32]=mr(Z,re,ae),k[P+3+32]=k[P+1+64]=mr(re,ae,ae),k[P+3+64]=k[P+2+64]=k[P+0+96]=k[P+1+96]=k[P+2+96]=k[P+3+96]=ae}function bd(k,P){var W=k[P-1+0],Z=k[P-1+32],re=k[P-1+64],ae=k[P-1+96],se=k[P-1-32],fe=k[P+0-32],me=k[P+1-32],ve=k[P+2-32];k[P+0+0]=k[P+2+32]=W+se+1>>1,k[P+0+32]=k[P+2+64]=Z+W+1>>1,k[P+0+64]=k[P+2+96]=re+Z+1>>1,k[P+0+96]=ae+re+1>>1,k[P+3+0]=mr(fe,me,ve),k[P+2+0]=mr(se,fe,me),k[P+1+0]=k[P+3+32]=mr(W,se,fe),k[P+1+32]=k[P+3+64]=mr(Z,W,se),k[P+1+64]=k[P+3+96]=mr(re,Z,W),k[P+1+96]=mr(ae,re,Z)}function Ko(k,P){var W;for(W=0;8>W;++W)a(k,P+32*W,k,P-32,8)}function fm(k,P){var W;for(W=0;8>W;++W)s(k,P,k[P-1],8),P+=32}function Ki(k,P,W){var Z;for(Z=0;8>Z;++Z)s(P,W+32*Z,k,8)}function Nu(k,P){var W,Z=8;for(W=0;8>W;++W)Z+=k[P+W-32]+k[P-1+32*W];Ki(Z>>4,k,P)}function Su(k,P){var W,Z=4;for(W=0;8>W;++W)Z+=k[P+W-32];Ki(Z>>3,k,P)}function rs(k,P){var W,Z=4;for(W=0;8>W;++W)Z+=k[P-1+32*W];Ki(Z>>3,k,P)}function Yo(k,P){Ki(128,k,P)}function Yi(k,P,W){var Z=k[P-W],re=k[P+0],ae=3*(re-Z)+tc[1020+k[P-2*W]-k[P+W]],se=Jf[112+(ae+4>>3)];k[P-W]=Ts[255+Z+Jf[112+(ae+3>>3)]],k[P+0]=Ts[255+re-se]}function Fl(k,P,W,Z){var re=k[P+0],ae=k[P+W];return ps[255+k[P-2*W]-k[P-W]]>Z||ps[255+ae-re]>Z}function Cu(k,P,W,Z){return 4*ps[255+k[P-W]-k[P+0]]+ps[255+k[P-2*W]-k[P+W]]<=Z}function jd(k,P,W,Z,re){var ae=k[P-3*W],se=k[P-2*W],fe=k[P-W],me=k[P+0],ve=k[P+W],Te=k[P+2*W],qe=k[P+3*W];return 4*ps[255+fe-me]+ps[255+se-ve]>Z?0:ps[255+k[P-4*W]-ae]<=re&&ps[255+ae-se]<=re&&ps[255+se-fe]<=re&&ps[255+qe-Te]<=re&&ps[255+Te-ve]<=re&&ps[255+ve-me]<=re}function Bl(k,P,W,Z){var re=2*Z+1;for(Z=0;16>Z;++Z)Cu(k,P+Z,W,re)&&Yi(k,P+Z,W)}function zl(k,P,W,Z){var re=2*Z+1;for(Z=0;16>Z;++Z)Cu(k,P+Z*W,1,re)&&Yi(k,P+Z*W,1)}function wd(k,P,W,Z){var re;for(re=3;0<re;--re)Bl(k,P+=4*W,W,Z)}function Uf(k,P,W,Z){var re;for(re=3;0<re;--re)zl(k,P+=4,W,Z)}function ql(k,P,W,Z,re,ae,se,fe){for(ae=2*ae+1;0<re--;){if(jd(k,P,W,ae,se))if(Fl(k,P,W,fe))Yi(k,P,W);else{var me=k,ve=P,Te=W,qe=me[ve-2*Te],xe=me[ve-Te],Me=me[ve+0],Fe=me[ve+Te],Qe=me[ve+2*Te],ze=27*(at=tc[1020+3*(Me-xe)+tc[1020+qe-Fe]])+63>>7,Ze=18*at+63>>7,at=9*at+63>>7;me[ve-3*Te]=Ts[255+me[ve-3*Te]+at],me[ve-2*Te]=Ts[255+qe+Ze],me[ve-Te]=Ts[255+xe+ze],me[ve+0]=Ts[255+Me-ze],me[ve+Te]=Ts[255+Fe-Ze],me[ve+2*Te]=Ts[255+Qe-at]}P+=Z}}function Ul(k,P,W,Z,re,ae,se,fe){for(ae=2*ae+1;0<re--;){if(jd(k,P,W,ae,se))if(Fl(k,P,W,fe))Yi(k,P,W);else{var me=k,ve=P,Te=W,qe=me[ve-Te],xe=me[ve+0],Me=me[ve+Te],Fe=Jf[112+(4+(Qe=3*(xe-qe))>>3)],Qe=Jf[112+(Qe+3>>3)],ze=Fe+1>>1;me[ve-2*Te]=Ts[255+me[ve-2*Te]+ze],me[ve-Te]=Ts[255+qe+Qe],me[ve+0]=Ts[255+xe-Fe],me[ve+Te]=Ts[255+Me-ze]}P+=Z}}function hm(k,P,W,Z,re,ae){ql(k,P,W,1,16,Z,re,ae)}function Vl(k,P,W,Z,re,ae){ql(k,P,1,W,16,Z,re,ae)}function mm(k,P,W,Z,re,ae){var se;for(se=3;0<se;--se)Ul(k,P+=4*W,W,1,16,Z,re,ae)}function B(k,P,W,Z,re,ae){var se;for(se=3;0<se;--se)Ul(k,P+=4,1,W,16,Z,re,ae)}function te(k,P,W,Z,re,ae,se,fe){ql(k,P,re,1,8,ae,se,fe),ql(W,Z,re,1,8,ae,se,fe)}function ye(k,P,W,Z,re,ae,se,fe){ql(k,P,1,re,8,ae,se,fe),ql(W,Z,1,re,8,ae,se,fe)}function ke(k,P,W,Z,re,ae,se,fe){Ul(k,P+4*re,re,1,8,ae,se,fe),Ul(W,Z+4*re,re,1,8,ae,se,fe)}function Le(k,P,W,Z,re,ae,se,fe){Ul(k,P+4,1,re,8,ae,se,fe),Ul(W,Z+4,1,re,8,ae,se,fe)}function nt(){this.ba=new Er,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Wr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ht(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Vt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Qt(){this.ua=0,this.Wa=new pt,this.vb=new pt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new J,this.yc=new K}function _r(){this.xb=this.a=0,this.l=new It,this.ca=new Er,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new H,this.Pb=0,this.wd=new H,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Qt,this.ab=0,this.gc=o(4,Vt),this.Oc=0}function Mr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new It,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function rn(k,P,W,Z,re,ae,se){for(k=k==null?0:k[P+0],P=0;P<se;++P)re[ae+P]=k+W[Z+P]&255,k=re[ae+P]}function ra(k,P,W,Z,re,ae,se){var fe;if(k==null)rn(null,null,W,Z,re,ae,se);else for(fe=0;fe<se;++fe)re[ae+fe]=k[P+fe]+W[Z+fe]&255}function _a(k,P,W,Z,re,ae,se){if(k==null)rn(null,null,W,Z,re,ae,se);else{var fe,me=k[P+0],ve=me,Te=me;for(fe=0;fe<se;++fe)ve=Te+(me=k[P+fe])-ve,Te=W[Z+fe]+(-256&ve?0>ve?0:255:ve)&255,ve=me,re[ae+fe]=Te}}function Dn(k,P,W,Z){var re=P.width,ae=P.o;if(t(k!=null&&P!=null),0>W||0>=Z||W+Z>ae)return null;if(!k.Cc){if(k.ga==null){var se;if(k.ga=new Mr,(se=k.ga==null)||(se=P.width*P.o,t(k.Gb.length==0),k.Gb=i(se),k.Uc=0,k.Gb==null?se=0:(k.mb=k.Gb,k.nb=k.Uc,k.rc=null,se=1),se=!se),!se){se=k.ga;var fe=k.Fa,me=k.P,ve=k.qc,Te=k.mb,qe=k.nb,xe=me+1,Me=ve-1,Fe=se.l;if(t(fe!=null&&Te!=null&&P!=null),rc[0]=null,rc[1]=rn,rc[2]=ra,rc[3]=_a,se.ca=Te,se.tb=qe,se.c=P.width,se.i=P.height,t(0<se.c&&0<se.i),1>=ve)P=0;else if(se.$a=3&fe[me+0],se.Z=fe[me+0]>>2&3,se.Lc=fe[me+0]>>4&3,me=fe[me+0]>>6&3,0>se.$a||1<se.$a||4<=se.Z||1<se.Lc||me)P=0;else if(Fe.put=Zt,Fe.ac=ii,Fe.bc=Gi,Fe.ma=se,Fe.width=P.width,Fe.height=P.height,Fe.Da=P.Da,Fe.v=P.v,Fe.va=P.va,Fe.j=P.j,Fe.o=P.o,se.$a)e:{t(se.$a==1),P=Ll();t:for(;;){if(P==null){P=0;break e}if(t(se!=null),se.mc=P,P.c=se.c,P.i=se.i,P.l=se.l,P.l.ma=se,P.l.width=se.c,P.l.height=se.i,P.a=0,Y(P.m,fe,xe,Me),!Si(se.c,se.i,1,P,null)||(P.ab==1&&P.gc[0].hc==3&&pn(P.s)?(se.ic=1,fe=P.c*P.i,P.Ta=null,P.Ua=0,P.V=i(fe),P.Ba=0,P.V==null?(P.a=1,P=0):P=1):(se.ic=0,P=Ci(P,se.c)),!P))break t;P=1;break e}se.mc=null,P=0}else P=Me>=se.c*se.i;se=!P}if(se)return null;k.ga.Lc!=1?k.Ga=0:Z=ae-W}t(k.ga!=null),t(W+Z<=ae);e:{if(P=(fe=k.ga).c,ae=fe.l.o,fe.$a==0){if(xe=k.rc,Me=k.Vc,Fe=k.Fa,me=k.P+1+W*P,ve=k.mb,Te=k.nb+W*P,t(me<=k.P+k.qc),fe.Z!=0)for(t(rc[fe.Z]!=null),se=0;se<Z;++se)rc[fe.Z](xe,Me,Fe,me,ve,Te,P),xe=ve,Me=Te,Te+=P,me+=P;else for(se=0;se<Z;++se)a(ve,Te,Fe,me,P),xe=ve,Me=Te,Te+=P,me+=P;k.rc=xe,k.Vc=Me}else{if(t(fe.mc!=null),P=W+Z,t((se=fe.mc)!=null),t(P<=se.i),se.C>=P)P=1;else if(fe.ic||No(),fe.ic){fe=se.V,xe=se.Ba,Me=se.c;var Qe=se.i,ze=(Fe=1,me=se.$/Me,ve=se.$%Me,Te=se.m,qe=se.s,se.$),Ze=Me*Qe,at=Me*P,xt=qe.wc,ct=ze<at?Sa(qe,ve,me):null;t(ze<=Ze),t(P<=Qe),t(pn(qe));t:for(;;){for(;!Te.h&&ze<at;){if(ve&xt||(ct=Sa(qe,ve,me)),t(ct!=null),ce(Te),256>(Qe=Mn(ct.G[0],ct.H[0],Te)))fe[xe+ze]=Qe,++ze,++ve>=Me&&(ve=0,++me<=P&&!(me%16)&&es(se,me));else{if(!(280>Qe)){Fe=0;break t}Qe=ks(Qe-256,Te);var Wt,$t=Mn(ct.G[4],ct.H[4],Te);if(ce(Te),!(ze>=($t=Ha(Me,$t=ks($t,Te)))&&Ze-ze>=Qe)){Fe=0;break t}for(Wt=0;Wt<Qe;++Wt)fe[xe+ze+Wt]=fe[xe+ze+Wt-$t];for(ze+=Qe,ve+=Qe;ve>=Me;)ve-=Me,++me<=P&&!(me%16)&&es(se,me);ze<at&&ve&xt&&(ct=Sa(qe,ve,me))}t(Te.h==ne(Te))}es(se,me>P?P:me);break t}!Fe||Te.h&&ze<Ze?(Fe=0,se.a=Te.h?5:3):se.$=ze,P=Fe}else P=Us(se,se.V,se.Ba,se.c,se.i,P,_i);if(!P){Z=0;break e}}W+Z>=ae&&(k.Cc=1),Z=1}if(!Z)return null;if(k.Cc&&((Z=k.ga)!=null&&(Z.mc=null),k.ga=null,0<k.Ga))return alert("todo:WebPDequantizeLevels"),null}return k.nb+W*re}function Ga(k,P,W,Z,re,ae){for(;0<re--;){var se,fe=k,me=P+(W?1:0),ve=k,Te=P+(W?0:3);for(se=0;se<Z;++se){var qe=ve[Te+4*se];qe!=255&&(qe*=32897,fe[me+4*se+0]=fe[me+4*se+0]*qe>>23,fe[me+4*se+1]=fe[me+4*se+1]*qe>>23,fe[me+4*se+2]=fe[me+4*se+2]*qe>>23)}P+=ae}}function Da(k,P,W,Z,re){for(;0<Z--;){var ae;for(ae=0;ae<W;++ae){var se=k[P+2*ae+0],fe=15&(ve=k[P+2*ae+1]),me=4369*fe,ve=(240&ve|ve>>4)*me>>16;k[P+2*ae+0]=(240&se|se>>4)*me>>16&240|(15&se|se<<4)*me>>16>>4&15,k[P+2*ae+1]=240&ve|fe}P+=re}}function hs(k,P,W,Z,re,ae,se,fe){var me,ve,Te=255;for(ve=0;ve<re;++ve){for(me=0;me<Z;++me){var qe=k[P+me];ae[se+4*me]=qe,Te&=qe}P+=W,se+=fe}return Te!=255}function Hl(k,P,W,Z,re){var ae;for(ae=0;ae<re;++ae)W[Z+ae]=k[P+ae]>>8}function No(){_d=Ga,Ji=Da,Kf=hs,Di=Hl}function Gl(k,P,W){M[k]=function(Z,re,ae,se,fe,me,ve,Te,qe,xe,Me,Fe,Qe,ze,Ze,at,xt){var ct,Wt=xt-1>>1,$t=fe[me+0]|ve[Te+0]<<16,Tr=qe[xe+0]|Me[Fe+0]<<16;t(Z!=null);var qt=3*$t+Tr+131074>>2;for(P(Z[re+0],255&qt,qt>>16,Qe,ze),ae!=null&&(qt=3*Tr+$t+131074>>2,P(ae[se+0],255&qt,qt>>16,Ze,at)),ct=1;ct<=Wt;++ct){var Yr=fe[me+ct]|ve[Te+ct]<<16,Hn=qe[xe+ct]|Me[Fe+ct]<<16,Dr=$t+Yr+Tr+Hn+524296,Ft=Dr+2*(Yr+Tr)>>3;qt=Ft+$t>>1,$t=(Dr=Dr+2*($t+Hn)>>3)+Yr>>1,P(Z[re+2*ct-1],255&qt,qt>>16,Qe,ze+(2*ct-1)*W),P(Z[re+2*ct-0],255&$t,$t>>16,Qe,ze+(2*ct-0)*W),ae!=null&&(qt=Dr+Tr>>1,$t=Ft+Hn>>1,P(ae[se+2*ct-1],255&qt,qt>>16,Ze,at+(2*ct-1)*W),P(ae[se+2*ct+0],255&$t,$t>>16,Ze,at+(2*ct+0)*W)),$t=Yr,Tr=Hn}1&xt||(qt=3*$t+Tr+131074>>2,P(Z[re+xt-1],255&qt,qt>>16,Qe,ze+(xt-1)*W),ae!=null&&(qt=3*Tr+$t+131074>>2,P(ae[se+xt-1],255&qt,qt>>16,Ze,at+(xt-1)*W)))}}function Vf(){xs[vm]=Od,xs[Rs]=Lu,xs[ym]=ex,xs[Zi]=Sm,xs[Zf]=Ic,xs[Pu]=al,xs[Mc]=$c,xs[Qf]=Lu,xs[bm]=Sm,xs[Mu]=Ic,xs[jm]=al}function _u(k){return k&-16384?0>k?0:255:k>>Cm}function Xo(k,P){return _u((19077*k>>8)+(26149*P>>8)-14234)}function So(k,P,W){return _u((19077*k>>8)-(6419*P>>8)-(13320*W>>8)+8708)}function Nd(k,P){return _u((19077*k>>8)+(33050*P>>8)-17685)}function Wl(k,P,W,Z,re){Z[re+0]=Xo(k,W),Z[re+1]=So(k,P,W),Z[re+2]=Nd(k,P)}function ns(k,P,W,Z,re){Z[re+0]=Nd(k,P),Z[re+1]=So(k,P,W),Z[re+2]=Xo(k,W)}function Tc(k,P,W,Z,re){var ae=So(k,P,W);P=ae<<3&224|Nd(k,P)>>3,Z[re+0]=248&Xo(k,W)|ae>>5,Z[re+1]=P}function Rc(k,P,W,Z,re){var ae=240&Nd(k,P)|15;Z[re+0]=240&Xo(k,W)|So(k,P,W)>>4,Z[re+1]=ae}function Au(k,P,W,Z,re){Z[re+0]=255,Wl(k,P,W,Z,re+1)}function Jo(k,P,W,Z,re){ns(k,P,W,Z,re),Z[re+3]=255}function Gs(k,P,W,Z,re){Wl(k,P,W,Z,re),Z[re+3]=255}function Kl(k,P,W){M[k]=function(Z,re,ae,se,fe,me,ve,Te,qe){for(var xe=Te+(-2&qe)*W;Te!=xe;)P(Z[re+0],ae[se+0],fe[me+0],ve,Te),P(Z[re+1],ae[se+0],fe[me+0],ve,Te+W),re+=2,++se,++me,Te+=2*W;1&qe&&P(Z[re+0],ae[se+0],fe[me+0],ve,Te)}}function ku(k,P,W){return W==0?k==0?P==0?6:5:P==0?4:0:W}function Hf(k,P,W,Z,re){switch(k>>>30){case 3:ec(P,W,Z,re,0);break;case 2:Es(P,W,Z,re);break;case 1:cn(P,W,Z,re)}}function Pi(k,P){var W,Z,re=P.M,ae=P.Nb,se=k.oc,fe=k.pc+40,me=k.oc,ve=k.pc+584,Te=k.oc,qe=k.pc+600;for(W=0;16>W;++W)se[fe+32*W-1]=129;for(W=0;8>W;++W)me[ve+32*W-1]=129,Te[qe+32*W-1]=129;for(0<re?se[fe-1-32]=me[ve-1-32]=Te[qe-1-32]=129:(s(se,fe-32-1,127,21),s(me,ve-32-1,127,9),s(Te,qe-32-1,127,9)),Z=0;Z<k.za;++Z){var xe=P.ya[P.aa+Z];if(0<Z){for(W=-1;16>W;++W)a(se,fe+32*W-4,se,fe+32*W+12,4);for(W=-1;8>W;++W)a(me,ve+32*W-4,me,ve+32*W+4,4),a(Te,qe+32*W-4,Te,qe+32*W+4,4)}var Me=k.Gd,Fe=k.Hd+Z,Qe=xe.ad,ze=xe.Hc;if(0<re&&(a(se,fe-32,Me[Fe].y,0,16),a(me,ve-32,Me[Fe].f,0,8),a(Te,qe-32,Me[Fe].ea,0,8)),xe.Za){var Ze=se,at=fe-32+16;for(0<re&&(Z>=k.za-1?s(Ze,at,Me[Fe].y[15],4):a(Ze,at,Me[Fe+1].y,0,4)),W=0;4>W;W++)Ze[at+128+W]=Ze[at+256+W]=Ze[at+384+W]=Ze[at+0+W];for(W=0;16>W;++W,ze<<=2)Ze=se,at=fe+Oa[W],ma[xe.Ob[W]](Ze,at),Hf(ze,Qe,16*+W,Ze,at)}else if(Ze=ku(Z,re,xe.Ob[0]),Ks[Ze](se,fe),ze!=0)for(W=0;16>W;++W,ze<<=2)Hf(ze,Qe,16*+W,se,fe+Oa[W]);for(W=xe.Gc,Ze=ku(Z,re,xe.Dd),ko[Ze](me,ve),ko[Ze](Te,qe),ze=Qe,Ze=me,at=ve,255&(xe=0|W)&&(170&xe?Xi(ze,256,Ze,at):nn(ze,256,Ze,at)),xe=Te,ze=qe,255&(W>>=8)&&(170&W?Xi(Qe,320,xe,ze):nn(Qe,320,xe,ze)),re<k.Ub-1&&(a(Me[Fe].y,0,se,fe+480,16),a(Me[Fe].f,0,me,ve+224,8),a(Me[Fe].ea,0,Te,qe+224,8)),W=8*ae*k.B,Me=k.sa,Fe=k.ta+16*Z+16*ae*k.R,Qe=k.qa,xe=k.ra+8*Z+W,ze=k.Ha,Ze=k.Ia+8*Z+W,W=0;16>W;++W)a(Me,Fe+W*k.R,se,fe+32*W,16);for(W=0;8>W;++W)a(Qe,xe+W*k.B,me,ve+32*W,8),a(ze,Ze+W*k.B,Te,qe+32*W,8)}}function Co(k,P,W,Z,re,ae,se,fe,me){var ve=[0],Te=[0],qe=0,xe=me!=null?me.kd:0,Me=me??new ht;if(k==null||12>W)return 7;Me.data=k,Me.w=P,Me.ha=W,P=[P],W=[W],Me.gb=[Me.gb];e:{var Fe=P,Qe=W,ze=Me.gb;if(t(k!=null),t(Qe!=null),t(ze!=null),ze[0]=0,12<=Qe[0]&&!r(k,Fe[0],"RIFF")){if(r(k,Fe[0]+8,"WEBP")){ze=3;break e}var Ze=$e(k,Fe[0]+4);if(12>Ze||4294967286<Ze){ze=3;break e}if(xe&&Ze>Qe[0]-8){ze=7;break e}ze[0]=Ze,Fe[0]+=12,Qe[0]-=12}ze=0}if(ze!=0)return ze;for(Ze=0<Me.gb[0],W=W[0];;){e:{var at=k;Qe=P,ze=W;var xt=ve,ct=Te,Wt=Fe=[0];if((qt=qe=[qe])[0]=0,8>ze[0])ze=7;else{if(!r(at,Qe[0],"VP8X")){if($e(at,Qe[0]+4)!=10){ze=3;break e}if(18>ze[0]){ze=7;break e}var $t=$e(at,Qe[0]+8),Tr=1+Be(at,Qe[0]+12);if(2147483648<=Tr*(at=1+Be(at,Qe[0]+15))){ze=3;break e}Wt!=null&&(Wt[0]=$t),xt!=null&&(xt[0]=Tr),ct!=null&&(ct[0]=at),Qe[0]+=18,ze[0]-=18,qt[0]=1}ze=0}}if(qe=qe[0],Fe=Fe[0],ze!=0)return ze;if(Qe=!!(2&Fe),!Ze&&qe)return 3;if(ae!=null&&(ae[0]=!!(16&Fe)),se!=null&&(se[0]=Qe),fe!=null&&(fe[0]=0),se=ve[0],Fe=Te[0],qe&&Qe&&me==null){ze=0;break}if(4>W){ze=7;break}if(Ze&&qe||!Ze&&!qe&&!r(k,P[0],"ALPH")){W=[W],Me.na=[Me.na],Me.P=[Me.P],Me.Sa=[Me.Sa];e:{$t=k,ze=P,Ze=W;var qt=Me.gb;xt=Me.na,ct=Me.P,Wt=Me.Sa,Tr=22,t($t!=null),t(Ze!=null),at=ze[0];var Yr=Ze[0];for(t(xt!=null),t(Wt!=null),xt[0]=null,ct[0]=null,Wt[0]=0;;){if(ze[0]=at,Ze[0]=Yr,8>Yr){ze=7;break e}var Hn=$e($t,at+4);if(4294967286<Hn){ze=3;break e}var Dr=8+Hn+1&-2;if(Tr+=Dr,0<qt&&Tr>qt){ze=3;break e}if(!r($t,at,"VP8 ")||!r($t,at,"VP8L")){ze=0;break e}if(Yr[0]<Dr){ze=7;break e}r($t,at,"ALPH")||(xt[0]=$t,ct[0]=at+8,Wt[0]=Hn),at+=Dr,Yr-=Dr}}if(W=W[0],Me.na=Me.na[0],Me.P=Me.P[0],Me.Sa=Me.Sa[0],ze!=0)break}W=[W],Me.Ja=[Me.Ja],Me.xa=[Me.xa];e:if(qt=k,ze=P,Ze=W,xt=Me.gb[0],ct=Me.Ja,Wt=Me.xa,$t=ze[0],at=!r(qt,$t,"VP8 "),Tr=!r(qt,$t,"VP8L"),t(qt!=null),t(Ze!=null),t(ct!=null),t(Wt!=null),8>Ze[0])ze=7;else{if(at||Tr){if(qt=$e(qt,$t+4),12<=xt&&qt>xt-12){ze=3;break e}if(xe&&qt>Ze[0]-8){ze=7;break e}ct[0]=qt,ze[0]+=8,Ze[0]-=8,Wt[0]=Tr}else Wt[0]=5<=Ze[0]&&qt[$t+0]==47&&!(qt[$t+4]>>5),ct[0]=Ze[0];ze=0}if(W=W[0],Me.Ja=Me.Ja[0],Me.xa=Me.xa[0],P=P[0],ze!=0)break;if(4294967286<Me.Ja)return 3;if(fe==null||Qe||(fe[0]=Me.xa?2:1),se=[se],Fe=[Fe],Me.xa){if(5>W){ze=7;break}fe=se,xe=Fe,Qe=ae,k==null||5>W?k=0:5<=W&&k[P+0]==47&&!(k[P+4]>>5)?(Ze=[0],qt=[0],xt=[0],Y(ct=new H,k,P,W),qs(ct,Ze,qt,xt)?(fe!=null&&(fe[0]=Ze[0]),xe!=null&&(xe[0]=qt[0]),Qe!=null&&(Qe[0]=xt[0]),k=1):k=0):k=0}else{if(10>W){ze=7;break}fe=Fe,k==null||10>W||!ts(k,P+3,W-3)?k=0:(xe=k[P+0]|k[P+1]<<8|k[P+2]<<16,Qe=16383&(k[P+7]<<8|k[P+6]),k=16383&(k[P+9]<<8|k[P+8]),1&xe||3<(xe>>1&7)||!(xe>>4&1)||xe>>5>=Me.Ja||!Qe||!k?k=0:(se&&(se[0]=Qe),fe&&(fe[0]=k),k=1))}if(!k||(se=se[0],Fe=Fe[0],qe&&(ve[0]!=se||Te[0]!=Fe)))return 3;me!=null&&(me[0]=Me,me.offset=P-me.w,t(4294967286>P-me.w),t(me.offset==me.ha-W));break}return ze==0||ze==7&&qe&&me==null?(ae!=null&&(ae[0]|=Me.na!=null&&0<Me.na.length),Z!=null&&(Z[0]=se),re!=null&&(re[0]=Fe),0):ze}function Yl(k,P,W){var Z=P.width,re=P.height,ae=0,se=0,fe=Z,me=re;if(P.Da=k!=null&&0<k.Da,P.Da&&(fe=k.cd,me=k.bd,ae=k.v,se=k.j,11>W||(ae&=-2,se&=-2),0>ae||0>se||0>=fe||0>=me||ae+fe>Z||se+me>re))return 0;if(P.v=ae,P.j=se,P.va=ae+fe,P.o=se+me,P.U=fe,P.T=me,P.da=k!=null&&0<k.da,P.da){if(!Oe(fe,me,W=[k.ib],ae=[k.hb]))return 0;P.ib=W[0],P.hb=ae[0]}return P.ob=k!=null&&k.ob,P.Kb=k==null||!k.Sd,P.da&&(P.ob=P.ib<3*Z/4&&P.hb<3*re/4,P.Kb=0),1}function Gf(k){if(k==null)return 2;if(11>k.S){var P=k.f.RGBA;P.fb+=(k.height-1)*P.A,P.A=-P.A}else P=k.f.kb,k=k.height,P.O+=(k-1)*P.fa,P.fa=-P.fa,P.N+=(k-1>>1)*P.Ab,P.Ab=-P.Ab,P.W+=(k-1>>1)*P.Db,P.Db=-P.Db,P.F!=null&&(P.J+=(k-1)*P.lb,P.lb=-P.lb);return 0}function _o(k,P,W,Z){if(Z==null||0>=k||0>=P)return 2;if(W!=null){if(W.Da){var re=W.cd,ae=W.bd,se=-2&W.v,fe=-2&W.j;if(0>se||0>fe||0>=re||0>=ae||se+re>k||fe+ae>P)return 2;k=re,P=ae}if(W.da){if(!Oe(k,P,re=[W.ib],ae=[W.hb]))return 2;k=re[0],P=ae[0]}}Z.width=k,Z.height=P;e:{var me=Z.width,ve=Z.height;if(k=Z.S,0>=me||0>=ve||!(k>=vm&&13>k))k=2;else{if(0>=Z.Rd&&Z.sd==null){se=ae=re=P=0;var Te=(fe=me*Am[k])*ve;if(11>k||(ae=(ve+1)/2*(P=(me+1)/2),k==12&&(se=(re=me)*ve)),(ve=i(Te+2*ae+se))==null){k=1;break e}Z.sd=ve,11>k?((me=Z.f.RGBA).eb=ve,me.fb=0,me.A=fe,me.size=Te):((me=Z.f.kb).y=ve,me.O=0,me.fa=fe,me.Fd=Te,me.f=ve,me.N=0+Te,me.Ab=P,me.Cd=ae,me.ea=ve,me.W=0+Te+ae,me.Db=P,me.Ed=ae,k==12&&(me.F=ve,me.J=0+Te+2*ae),me.Tc=se,me.lb=re)}if(P=1,re=Z.S,ae=Z.width,se=Z.height,re>=vm&&13>re)if(11>re)k=Z.f.RGBA,P&=(fe=Math.abs(k.A))*(se-1)+ae<=k.size,P&=fe>=ae*Am[re],P&=k.eb!=null;else{k=Z.f.kb,fe=(ae+1)/2,Te=(se+1)/2,me=Math.abs(k.fa),ve=Math.abs(k.Ab);var qe=Math.abs(k.Db),xe=Math.abs(k.lb),Me=xe*(se-1)+ae;P&=me*(se-1)+ae<=k.Fd,P&=ve*(Te-1)+fe<=k.Cd,P=(P&=qe*(Te-1)+fe<=k.Ed)&me>=ae&ve>=fe&qe>=fe,P&=k.y!=null,P&=k.f!=null,P&=k.ea!=null,re==12&&(P&=xe>=ae,P&=Me<=k.Tc,P&=k.F!=null)}else P=0;k=P?0:2}}return k!=0||W!=null&&W.fd&&(k=Gf(Z)),k}var Pc=64,di=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ws=24,Zo=32,Qo=8,Xl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ut("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(k){return k},M.Predictor2=function(k,P,W){return P[W+0]},M.Predictor3=function(k,P,W){return P[W+1]},M.Predictor4=function(k,P,W){return P[W-1]},M.Predictor5=function(k,P,W){return dt(dt(k,P[W+1]),P[W+0])},M.Predictor6=function(k,P,W){return dt(k,P[W-1])},M.Predictor7=function(k,P,W){return dt(k,P[W+0])},M.Predictor8=function(k,P,W){return dt(P[W-1],P[W+0])},M.Predictor9=function(k,P,W){return dt(P[W+0],P[W+1])},M.Predictor10=function(k,P,W){return dt(dt(k,P[W-1]),dt(P[W+0],P[W+1]))},M.Predictor11=function(k,P,W){var Z=P[W+0];return 0>=Dt(Z>>24&255,k>>24&255,(P=P[W-1])>>24&255)+Dt(Z>>16&255,k>>16&255,P>>16&255)+Dt(Z>>8&255,k>>8&255,P>>8&255)+Dt(255&Z,255&k,255&P)?Z:k},M.Predictor12=function(k,P,W){var Z=P[W+0];return(Nt((k>>24&255)+(Z>>24&255)-((P=P[W-1])>>24&255))<<24|Nt((k>>16&255)+(Z>>16&255)-(P>>16&255))<<16|Nt((k>>8&255)+(Z>>8&255)-(P>>8&255))<<8|Nt((255&k)+(255&Z)-(255&P)))>>>0},M.Predictor13=function(k,P,W){var Z=P[W-1];return(zt((k=dt(k,P[W+0]))>>24&255,Z>>24&255)<<24|zt(k>>16&255,Z>>16&255)<<16|zt(k>>8&255,Z>>8&255)<<8|zt(255&k,255&Z))>>>0};var Ou=M.PredictorAdd0;M.PredictorAdd1=Gt,ut("Predictor2","PredictorAdd2"),ut("Predictor3","PredictorAdd3"),ut("Predictor4","PredictorAdd4"),ut("Predictor5","PredictorAdd5"),ut("Predictor6","PredictorAdd6"),ut("Predictor7","PredictorAdd7"),ut("Predictor8","PredictorAdd8"),ut("Predictor9","PredictorAdd9"),ut("Predictor10","PredictorAdd10"),ut("Predictor11","PredictorAdd11"),ut("Predictor12","PredictorAdd12"),ut("Predictor13","PredictorAdd13");var Eu=M.PredictorAdd2;Ke("ColorIndexInverseTransform","MapARGB","32b",function(k){return k>>8&255},function(k){return k}),Ke("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(k){return k},function(k){return k>>8&255});var Aa,pm=M.ColorIndexInverseTransform,el=M.MapARGB,tl=M.VP8LColorIndexInverseTransformAlpha,ms=M.MapAlpha,Jl=M.VP8LPredictorsAdd=[];Jl.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var Tu,Ru,Zl,Ql,rl,Sd,Mi,ec,Es,Xi,cn,nn,Ln,ka,nl,Ao,Cd,Wf,Yg,e0,t0,r0,Xg,Jg,_d,Ji,Kf,Di,Ad=i(511),gm=i(2041),Yf=i(225),Xf=i(767),xm=0,tc=gm,Jf=Yf,Ts=Xf,ps=Ad,vm=0,Rs=1,ym=2,Zi=3,Zf=4,Pu=5,Mc=6,Qf=7,bm=8,Mu=9,jm=10,Qi=[2,3,7],Du=[3,3,11],kd=[280,256,256,256,40],wm=[0,1,1,1,0],eh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],eo=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],to=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Dc=8,ro=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],no=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Li=null,n0=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Zg=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Nm=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],a0=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gs=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Vn=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Xr=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ks=[],ma=[],ko=[],Lc=1,Qg=2,rc=[],xs=[];Gl("UpsampleRgbLinePair",Wl,3),Gl("UpsampleBgrLinePair",ns,3),Gl("UpsampleRgbaLinePair",Gs,4),Gl("UpsampleBgraLinePair",Jo,4),Gl("UpsampleArgbLinePair",Au,4),Gl("UpsampleRgba4444LinePair",Rc,2),Gl("UpsampleRgb565LinePair",Tc,2);var Od=M.UpsampleRgbLinePair,ex=M.UpsampleBgrLinePair,Lu=M.UpsampleRgbaLinePair,Sm=M.UpsampleBgraLinePair,Ic=M.UpsampleArgbLinePair,al=M.UpsampleRgba4444LinePair,$c=M.UpsampleRgb565LinePair,ao=16,Iu=1<<ao-1,Ed=-227,Fc=482,Cm=6,Bc=0,vs=i(256),_m=i(256),s0=i(256),Y2=i(256),X2=i(Fc-Ed),J2=i(Fc-Ed);Kl("YuvToRgbRow",Wl,3),Kl("YuvToBgrRow",ns,3),Kl("YuvToRgbaRow",Gs,4),Kl("YuvToBgraRow",Jo,4),Kl("YuvToArgbRow",Au,4),Kl("YuvToRgba4444Row",Rc,2),Kl("YuvToRgb565Row",Tc,2);var Oa=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],$u=[0,2,8],th=[8,7,6,4,4,2,2,2,1,1,1,1],rh=1;this.WebPDecodeRGBA=function(k,P,W,Z,re){var ae=Rs,se=new nt,fe=new Er;se.ba=fe,fe.S=ae,fe.width=[fe.width],fe.height=[fe.height];var me=fe.width,ve=fe.height,Te=new nr;if(Te==null||k==null)var qe=2;else t(Te!=null),qe=Co(k,P,W,Te.width,Te.height,Te.Pd,Te.Qd,Te.format,null);if(qe!=0?me=0:(me!=null&&(me[0]=Te.width[0]),ve!=null&&(ve[0]=Te.height[0]),me=1),me){fe.width=fe.width[0],fe.height=fe.height[0],Z!=null&&(Z[0]=fe.width),re!=null&&(re[0]=fe.height);e:{if(Z=new It,(re=new ht).data=k,re.w=P,re.ha=W,re.kd=1,P=[0],t(re!=null),((k=Co(re.data,re.w,re.ha,null,null,null,P,null,re))==0||k==7)&&P[0]&&(k=4),(P=k)==0){if(t(se!=null),Z.data=re.data,Z.w=re.w+re.offset,Z.ha=re.ha-re.offset,Z.put=Zt,Z.ac=ii,Z.bc=Gi,Z.ma=se,re.xa){if((k=Ll())==null){se=1;break e}if((function(xe,Me){var Fe=[0],Qe=[0],ze=[0];t:for(;;){if(xe==null)return 0;if(Me==null)return xe.a=2,0;if(xe.l=Me,xe.a=0,Y(xe.m,Me.data,Me.w,Me.ha),!qs(xe.m,Fe,Qe,ze)){xe.a=3;break t}if(xe.xb=Qg,Me.width=Fe[0],Me.height=Qe[0],!Si(Fe[0],Qe[0],1,xe,null))break t;return 1}return t(xe.a!=0),0})(k,Z)){if(Z=(P=_o(Z.width,Z.height,se.Oa,se.ba))==0){t:{Z=k;r:for(;;){if(Z==null){Z=0;break t}if(t(Z.s.yc!=null),t(Z.s.Ya!=null),t(0<Z.s.Wb),t((W=Z.l)!=null),t((re=W.ma)!=null),Z.xb!=0){if(Z.ca=re.ba,Z.tb=re.tb,t(Z.ca!=null),!Yl(re.Oa,W,Zi)){Z.a=2;break r}if(!Ci(Z,W.width)||W.da)break r;if((W.da||fr(Z.ca.S))&&No(),11>Z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Z.ca.f.kb.F!=null&&No()),Z.Pb&&0<Z.s.ua&&Z.s.vb.X==null&&!oe(Z.s.vb,Z.s.Wa.Xa)){Z.a=1;break r}Z.xb=0}if(!Us(Z,Z.V,Z.Ba,Z.c,Z.i,W.o,Qa))break r;re.Dc=Z.Ma,Z=1;break t}t(Z.a!=0),Z=0}Z=!Z}Z&&(P=k.a)}else P=k.a}else{if((k=new Pt)==null){se=1;break e}if(k.Fa=re.na,k.P=re.P,k.qc=re.Sa,li(k,Z)){if((P=_o(Z.width,Z.height,se.Oa,se.ba))==0){if(k.Aa=0,W=se.Oa,t((re=k)!=null),W!=null){if(0<(me=0>(me=W.Md)?0:100<me?255:255*me/100)){for(ve=Te=0;4>ve;++ve)12>(qe=re.pb[ve]).lc&&(qe.ia=me*th[0>qe.lc?0:qe.lc]>>3),Te|=qe.ia;Te&&(alert("todo:VP8InitRandom"),re.ia=1)}re.Ga=W.Id,100<re.Ga?re.Ga=100:0>re.Ga&&(re.Ga=0)}(function(xe,Me){if(xe==null)return 0;if(Me==null)return lr(xe,2,"NULL VP8Io parameter in VP8Decode().");if(!xe.cb&&!li(xe,Me))return 0;if(t(xe.cb),Me.ac==null||Me.ac(Me)){Me.ob&&(xe.L=0);var Fe=$u[xe.L];if(xe.L==2?(xe.yb=0,xe.zb=0):(xe.yb=Me.v-Fe>>4,xe.zb=Me.j-Fe>>4,0>xe.yb&&(xe.yb=0),0>xe.zb&&(xe.zb=0)),xe.Va=Me.o+15+Fe>>4,xe.Hb=Me.va+15+Fe>>4,xe.Hb>xe.za&&(xe.Hb=xe.za),xe.Va>xe.Ub&&(xe.Va=xe.Ub),0<xe.L){var Qe=xe.ed;for(Fe=0;4>Fe;++Fe){var ze;if(xe.Qa.Cb){var Ze=xe.Qa.Lb[Fe];xe.Qa.Fb||(Ze+=Qe.Tb)}else Ze=Qe.Tb;for(ze=0;1>=ze;++ze){var at=xe.gd[Fe][ze],xt=Ze;if(Qe.Pc&&(xt+=Qe.vd[0],ze&&(xt+=Qe.od[0])),0<(xt=0>xt?0:63<xt?63:xt)){var ct=xt;0<Qe.wb&&(ct=4<Qe.wb?ct>>2:ct>>1)>9-Qe.wb&&(ct=9-Qe.wb),1>ct&&(ct=1),at.dd=ct,at.tc=2*xt+ct,at.ld=40<=xt?2:15<=xt?1:0}else at.tc=0;at.La=ze}}}Fe=0}else lr(xe,6,"Frame setup failed"),Fe=xe.a;if(Fe=Fe==0){if(Fe){xe.$c=0,0<xe.Aa||(xe.Ic=rh);t:{Fe=xe.Ic,Qe=4*(ct=xe.za);var Wt=32*ct,$t=ct+1,Tr=0<xe.L?ct*(0<xe.Aa?2:1):0,qt=(xe.Aa==2?2:1)*ct;if((at=Qe+832+(ze=3*(16*Fe+$u[xe.L])/2*Wt)+(Ze=xe.Fa!=null&&0<xe.Fa.length?xe.Kc.c*xe.Kc.i:0))!=at)Fe=0;else{if(at>xe.Vb){if(xe.Vb=0,xe.Ec=i(at),xe.Fc=0,xe.Ec==null){Fe=lr(xe,1,"no memory during frame initialization.");break t}xe.Vb=at}at=xe.Ec,xt=xe.Fc,xe.Ac=at,xe.Bc=xt,xt+=Qe,xe.Gd=o(Wt,Oc),xe.Hd=0,xe.rb=o($t+1,Oi),xe.sb=1,xe.wa=Tr?o(Tr,Vs):null,xe.Y=0,xe.D.Nb=0,xe.D.wa=xe.wa,xe.D.Y=xe.Y,0<xe.Aa&&(xe.D.Y+=ct),t(!0),xe.oc=at,xe.pc=xt,xt+=832,xe.ya=o(qt,Ac),xe.aa=0,xe.D.ya=xe.ya,xe.D.aa=xe.aa,xe.Aa==2&&(xe.D.aa+=ct),xe.R=16*ct,xe.B=8*ct,ct=(Wt=$u[xe.L])*xe.R,Wt=Wt/2*xe.B,xe.sa=at,xe.ta=xt+ct,xe.qa=xe.sa,xe.ra=xe.ta+16*Fe*xe.R+Wt,xe.Ha=xe.qa,xe.Ia=xe.ra+8*Fe*xe.B+Wt,xe.$c=0,xt+=ze,xe.mb=Ze?at:null,xe.nb=Ze?xt:null,t(xt+Ze<=xe.Fc+xe.Vb),ta(xe),s(xe.Ac,xe.Bc,0,Qe),Fe=1}}if(Fe){if(Me.ka=0,Me.y=xe.sa,Me.O=xe.ta,Me.f=xe.qa,Me.N=xe.ra,Me.ea=xe.Ha,Me.Vd=xe.Ia,Me.fa=xe.R,Me.Rc=xe.B,Me.F=null,Me.J=0,!xm){for(Fe=-255;255>=Fe;++Fe)Ad[255+Fe]=0>Fe?-Fe:Fe;for(Fe=-1020;1020>=Fe;++Fe)gm[1020+Fe]=-128>Fe?-128:127<Fe?127:Fe;for(Fe=-112;112>=Fe;++Fe)Yf[112+Fe]=-16>Fe?-16:15<Fe?15:Fe;for(Fe=-255;510>=Fe;++Fe)Xf[255+Fe]=0>Fe?0:255<Fe?255:Fe;xm=1}Mi=Hs,ec=Il,Xi=us,cn=Hr,nn=Ca,Es=Wi,Ln=hm,ka=Vl,nl=te,Ao=ye,Cd=mm,Wf=B,Yg=ke,e0=Le,t0=Bl,r0=zl,Xg=wd,Jg=Uf,ma[0]=um,ma[1]=om,ma[2]=dm,ma[3]=zf,ma[4]=Ti,ma[5]=qf,ma[6]=fs,ma[7]=yd,ma[8]=bd,ma[9]=Ri,Ks[0]=wo,Ks[1]=Ff,Ks[2]=Bf,Ks[3]=cm,Ks[4]=$l,Ks[5]=vd,Ks[6]=Ec,ko[0]=Nu,ko[1]=lm,ko[2]=Ko,ko[3]=fm,ko[4]=rs,ko[5]=Su,ko[6]=Yo,Fe=1}else Fe=0}Fe&&(Fe=(function(Yr,Hn){for(Yr.M=0;Yr.M<Yr.Va;++Yr.M){var Dr,Ft=Yr.Jc[Yr.M&Yr.Xb],wt=Yr.m,na=Yr;for(Dr=0;Dr<na.za;++Dr){var pr=wt,Br=na,gn=Br.Ac,Wa=Br.Bc+4*Dr,ys=Br.zc,In=Br.ya[Br.aa+Dr];if(Br.Qa.Bb?In.$b=ue(pr,Br.Pa.jb[0])?2+ue(pr,Br.Pa.jb[2]):ue(pr,Br.Pa.jb[1]):In.$b=0,Br.kc&&(In.Ad=ue(pr,Br.Bd)),In.Za=!ue(pr,145)+0,In.Za){var La=In.Ob,Ps=0;for(Br=0;4>Br;++Br){var Ia,Gr=ys[0+Br];for(Ia=0;4>Ia;++Ia){Gr=gs[gn[Wa+Ia]][Gr];for(var sn=Nm[ue(pr,Gr[0])];0<sn;)sn=Nm[2*sn+ue(pr,Gr[sn])];Gr=-sn,gn[Wa+Ia]=Gr}a(La,Ps,gn,Wa,4),Ps+=4,ys[0+Br]=Gr}}else Gr=ue(pr,156)?ue(pr,128)?1:3:ue(pr,163)?2:0,In.Ob[0]=Gr,s(gn,Wa,Gr,4),s(ys,0,Gr,4);In.Dd=ue(pr,142)?ue(pr,114)?ue(pr,183)?1:3:2:0}if(na.m.Ka)return lr(Yr,7,"Premature end-of-partition0 encountered.");for(;Yr.ja<Yr.za;++Yr.ja){if(na=Ft,pr=(wt=Yr).rb[wt.sb-1],gn=wt.rb[wt.sb+wt.ja],Dr=wt.ya[wt.aa+wt.ja],Wa=wt.kc?Dr.Ad:0)pr.la=gn.la=0,Dr.Za||(pr.Na=gn.Na=0),Dr.Hc=0,Dr.Gc=0,Dr.ia=0;else{var aa,dn;if(pr=gn,gn=na,Wa=wt.Pa.Xc,ys=wt.ya[wt.aa+wt.ja],In=wt.pb[ys.$b],Br=ys.ad,La=0,Ps=wt.rb[wt.sb-1],Gr=Ia=0,s(Br,La,0,384),ys.Za)var Ka=0,sa=Wa[3];else{sn=i(16);var on=pr.Na+Ps.Na;if(on=Li(gn,Wa[1],on,In.Eb,0,sn,0),pr.Na=Ps.Na=(0<on)+0,1<on)Mi(sn,0,Br,La);else{var Ea=sn[0]+3>>3;for(sn=0;256>sn;sn+=16)Br[La+sn]=Ea}Ka=1,sa=Wa[0]}var xn=15&pr.la,$a=15&Ps.la;for(sn=0;4>sn;++sn){var Fa=1&$a;for(Ea=dn=0;4>Ea;++Ea)xn=xn>>1|(Fa=(on=Li(gn,sa,on=Fa+(1&xn),In.Sc,Ka,Br,La))>Ka)<<7,dn=dn<<2|(3<on?3:1<on?2:Br[La+0]!=0),La+=16;xn>>=4,$a=$a>>1|Fa<<7,Ia=(Ia<<8|dn)>>>0}for(sa=xn,Ka=$a>>4,aa=0;4>aa;aa+=2){for(dn=0,xn=pr.la>>4+aa,$a=Ps.la>>4+aa,sn=0;2>sn;++sn){for(Fa=1&$a,Ea=0;2>Ea;++Ea)on=Fa+(1&xn),xn=xn>>1|(Fa=0<(on=Li(gn,Wa[2],on,In.Qc,0,Br,La)))<<3,dn=dn<<2|(3<on?3:1<on?2:Br[La+0]!=0),La+=16;xn>>=2,$a=$a>>1|Fa<<5}Gr|=dn<<4*aa,sa|=xn<<4<<aa,Ka|=(240&$a)<<aa}pr.la=sa,Ps.la=Ka,ys.Hc=Ia,ys.Gc=Gr,ys.ia=43690&Gr?0:In.ia,Wa=!(Ia|Gr)}if(0<wt.L&&(wt.wa[wt.Y+wt.ja]=wt.gd[Dr.$b][Dr.Za],wt.wa[wt.Y+wt.ja].La|=!Wa),na.Ka)return lr(Yr,7,"Premature end-of-file encountered.")}if(ta(Yr),wt=Hn,na=1,Dr=(Ft=Yr).D,pr=0<Ft.L&&Ft.M>=Ft.zb&&Ft.M<=Ft.Va,Ft.Aa==0)t:{if(Dr.M=Ft.M,Dr.uc=pr,Pi(Ft,Dr),na=1,Dr=(dn=Ft.D).Nb,pr=(Gr=$u[Ft.L])*Ft.R,gn=Gr/2*Ft.B,sn=16*Dr*Ft.R,Ea=8*Dr*Ft.B,Wa=Ft.sa,ys=Ft.ta-pr+sn,In=Ft.qa,Br=Ft.ra-gn+Ea,La=Ft.Ha,Ps=Ft.Ia-gn+Ea,$a=(xn=dn.M)==0,Ia=xn>=Ft.Va-1,Ft.Aa==2&&Pi(Ft,dn),dn.uc)for(Fa=(on=Ft).D.M,t(on.D.uc),dn=on.yb;dn<on.Hb;++dn){Ka=dn,sa=Fa;var kn=(an=(Ba=on).D).Nb;aa=Ba.R;var an=an.wa[an.Y+Ka],Ms=Ba.sa,pa=Ba.ta+16*kn*aa+16*Ka,cr=an.dd,dr=an.tc;if(dr!=0)if(t(3<=dr),Ba.L==1)0<Ka&&r0(Ms,pa,aa,dr+4),an.La&&Jg(Ms,pa,aa,dr),0<sa&&t0(Ms,pa,aa,dr+4),an.La&&Xg(Ms,pa,aa,dr);else{var ln=Ba.B,ui=Ba.qa,so=Ba.ra+8*kn*ln+8*Ka,Ys=Ba.Ha,Ba=Ba.Ia+8*kn*ln+8*Ka;kn=an.ld,0<Ka&&(ka(Ms,pa,aa,dr+4,cr,kn),Ao(ui,so,Ys,Ba,ln,dr+4,cr,kn)),an.La&&(Wf(Ms,pa,aa,dr,cr,kn),e0(ui,so,Ys,Ba,ln,dr,cr,kn)),0<sa&&(Ln(Ms,pa,aa,dr+4,cr,kn),nl(ui,so,Ys,Ba,ln,dr+4,cr,kn)),an.La&&(Cd(Ms,pa,aa,dr,cr,kn),Yg(ui,so,Ys,Ba,ln,dr,cr,kn))}}if(Ft.ia&&alert("todo:DitherRow"),wt.put!=null){if(dn=16*xn,xn=16*(xn+1),$a?(wt.y=Ft.sa,wt.O=Ft.ta+sn,wt.f=Ft.qa,wt.N=Ft.ra+Ea,wt.ea=Ft.Ha,wt.W=Ft.Ia+Ea):(dn-=Gr,wt.y=Wa,wt.O=ys,wt.f=In,wt.N=Br,wt.ea=La,wt.W=Ps),Ia||(xn-=Gr),xn>wt.o&&(xn=wt.o),wt.F=null,wt.J=null,Ft.Fa!=null&&0<Ft.Fa.length&&dn<xn&&(wt.J=Dn(Ft,wt,dn,xn-dn),wt.F=Ft.mb,wt.F==null&&wt.F.length==0)){na=lr(Ft,3,"Could not decode alpha data.");break t}dn<wt.j&&(Gr=wt.j-dn,dn=wt.j,t(!(1&Gr)),wt.O+=Ft.R*Gr,wt.N+=Ft.B*(Gr>>1),wt.W+=Ft.B*(Gr>>1),wt.F!=null&&(wt.J+=wt.width*Gr)),dn<xn&&(wt.O+=wt.v,wt.N+=wt.v>>1,wt.W+=wt.v>>1,wt.F!=null&&(wt.J+=wt.v),wt.ka=dn-wt.j,wt.U=wt.va-wt.v,wt.T=xn-dn,na=wt.put(wt))}Dr+1!=Ft.Ic||Ia||(a(Ft.sa,Ft.ta-pr,Wa,ys+16*Ft.R,pr),a(Ft.qa,Ft.ra-gn,In,Br+8*Ft.B,gn),a(Ft.Ha,Ft.Ia-gn,La,Ps+8*Ft.B,gn))}if(!na)return lr(Yr,6,"Output aborted.")}return 1})(xe,Me)),Me.bc!=null&&Me.bc(Me),Fe&=1}return Fe?(xe.cb=0,Fe):0})(k,Z)||(P=k.a)}}else P=k.a}P==0&&se.Oa!=null&&se.Oa.fd&&(P=Gf(se.ba))}se=P}ae=se!=0?null:11>ae?fe.f.RGBA.eb:fe.f.kb.y}else ae=null;return ae};var Am=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(M,I){for(var D="",$=0;$<4;$++)D+=String.fromCharCode(M[I++]);return D}function f(M,I){return M[I+0]|M[I+1]<<8}function m(M,I){return(M[I+0]|M[I+1]<<8|M[I+2]<<16)>>>0}function p(M,I){return(M[I+0]|M[I+1]<<8|M[I+2]<<16|M[I+3]<<24)>>>0}new d;var g=[0],b=[0],v=[],y=new d,j=e,_=(function(M,I){var D={},$=0,K=!1,U=0,J=0;if(D.frames=[],!(function(z,H){for(var X=0;X<4;X++)if(z[H+X]!="RIFF".charCodeAt(X))return!0;return!1})(M,I)){for(p(M,I+=4),I+=8;I<M.length;){var V=u(M,I),G=p(M,I+=4);I+=4;var q=G+(1&G);switch(V){case"VP8 ":case"VP8L":D.frames[$]===void 0&&(D.frames[$]={}),(F=D.frames[$]).src_off=K?J:I-8,F.src_size=U+G+8,$++,K&&(K=!1,U=0,J=0);break;case"VP8X":(F=D.header={}).feature_flags=M[I];var Y=I+4;F.canvas_width=1+m(M,Y),Y+=3,F.canvas_height=1+m(M,Y),Y+=3;break;case"ALPH":K=!0,U=q+8,J=I-8;break;case"ANIM":(F=D.header).bgcolor=p(M,I),Y=I+4,F.loop_count=f(M,Y),Y+=2;break;case"ANMF":var Q,F;(F=D.frames[$]={}).offset_x=2*m(M,I),I+=3,F.offset_y=2*m(M,I),I+=3,F.width=1+m(M,I),I+=3,F.height=1+m(M,I),I+=3,F.duration=m(M,I),I+=3,Q=M[I++],F.dispose=1&Q,F.blend=Q>>1&1}V!="ANMF"&&(I+=q)}return D}})(j,0);_.response=j,_.rgbaoutput=!0,_.dataurl=!1;var C=_.header?_.header:null,A=_.frames?_.frames:null;if(C){C.loop_counter=C.loop_count,g=[C.canvas_height],b=[C.canvas_width];for(var S=0;S<A.length&&A[S].blend!=0;S++);}var T=A[0],O=y.WebPDecodeRGBA(j,T.src_off,T.src_size,b,g);T.rgba=O,T.imgwidth=b[0],T.imgheight=g[0];for(var R=0;R<b[0]*g[0]*4;R++)v[R]=O[R];return this.width=b,this.height=g,this.data=v,this}(function(e){var t,r,a,s,i,o,l,d,u,f=function(z){return z=z||{},this.isStrokeTransparent=z.isStrokeTransparent||!1,this.strokeOpacity=z.strokeOpacity||1,this.strokeStyle=z.strokeStyle||"#000000",this.fillStyle=z.fillStyle||"#000000",this.isFillTransparent=z.isFillTransparent||!1,this.fillOpacity=z.fillOpacity||1,this.font=z.font||"10px sans-serif",this.textBaseline=z.textBaseline||"alphabetic",this.textAlign=z.textAlign||"left",this.lineWidth=z.lineWidth||1,this.lineJoin=z.lineJoin||"miter",this.lineCap=z.lineCap||"butt",this.path=z.path||[],this.transform=z.transform!==void 0?z.transform.clone():new d,this.globalCompositeOperation=z.globalCompositeOperation||"normal",this.globalAlpha=z.globalAlpha||1,this.clip_path=z.clip_path||[],this.currentPoint=z.currentPoint||new o,this.miterLimit=z.miterLimit||10,this.lastPoint=z.lastPoint||new o,this.lineDashOffset=z.lineDashOffset||0,this.lineDash=z.lineDash||[],this.margin=z.margin||[0,0,0,0],this.prevPageLastElemOffset=z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof z.ignoreClearRect!="boolean"||z.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,d=this.internal.Matrix,u=new f}]);var m=function(z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=z;Object.defineProperty(this,"pdf",{get:function(){return H}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(oe){X=!!oe}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(oe){ne=!!oe}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(oe){isNaN(oe)||(ie=oe)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(oe){isNaN(oe)||(ce=oe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(oe){var Xe;typeof oe=="number"?Xe=[oe,oe,oe,oe]:((Xe=new Array(4))[0]=oe[0],Xe[1]=oe.length>=2?oe[1]:Xe[0],Xe[2]=oe.length>=3?oe[2]:Xe[0],Xe[3]=oe.length>=4?oe[3]:Xe[1]),u.margin=Xe}});var ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ge},set:function(oe){ge=oe}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(oe){he=oe}});var ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ue},set:function(oe){ue=oe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(oe){oe instanceof f&&(u=oe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(oe){u.path=oe}});var Se=[];Object.defineProperty(this,"ctxStack",{get:function(){return Se},set:function(oe){Se=oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(oe){var Xe;Xe=p(oe),this.ctx.fillStyle=Xe.style,this.ctx.isFillTransparent=Xe.a===0,this.ctx.fillOpacity=Xe.a,this.pdf.setFillColor(Xe.r,Xe.g,Xe.b,{a:Xe.a}),this.pdf.setTextColor(Xe.r,Xe.g,Xe.b,{a:Xe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(oe){var Xe=p(oe);this.ctx.strokeStyle=Xe.style,this.ctx.isStrokeTransparent=Xe.a===0,this.ctx.strokeOpacity=Xe.a,Xe.a===0?this.pdf.setDrawColor(255,255,255):(Xe.a,this.pdf.setDrawColor(Xe.r,Xe.g,Xe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(oe){["butt","round","square"].indexOf(oe)!==-1&&(this.ctx.lineCap=oe,this.pdf.setLineCap(oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(oe){isNaN(oe)||(this.ctx.lineWidth=oe,this.pdf.setLineWidth(oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(oe){["bevel","round","miter"].indexOf(oe)!==-1&&(this.ctx.lineJoin=oe,this.pdf.setLineJoin(oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(oe){isNaN(oe)||(this.ctx.miterLimit=oe,this.pdf.setMiterLimit(oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(oe){this.ctx.textBaseline=oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(oe){["right","end","center","left","start"].indexOf(oe)!==-1&&(this.ctx.textAlign=oe)}});var je=null,Be=null,$e=null;Object.defineProperty(this,"fontFaces",{get:function(){return $e},set:function(oe){je=null,Be=null,$e=oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(oe){var Xe;if(this.ctx.font=oe,(Xe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(oe))!==null){var pt=Xe[1];Xe[2];var Oe=Xe[3],Ee=Xe[4];Xe[5];var lt=Xe[6],ut=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ee)[2];Ee=Math.floor(ut==="px"?parseFloat(Ee)*this.pdf.internal.scaleFactor:ut==="em"?parseFloat(Ee)*this.pdf.getFontSize():parseFloat(Ee)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ee);var gt=(function(Ke){var Jt,Bt,bt=[],Lt=Ke.trim();if(Lt==="")return iA;if(Lt in gF)return[gF[Lt]];for(;Lt!=="";){switch(Bt=null,Jt=(Lt=vF(Lt)).charAt(0)){case'"':case"'":Bt=eTe(Lt.substring(1),Jt);break;default:Bt=tTe(Lt)}if(Bt===null||(bt.push(Bt[0]),(Lt=vF(Bt[1]))!==""&&Lt.charAt(0)!==","))return iA;Lt=Lt.replace(/^,/,"")}return bt})(lt);if(this.fontFaces){var dt=(function(Ke,Jt){var Bt=Ke.getFontList(),bt=JSON.stringify(Bt);if(je===null||Be!==bt){var Lt=(function(sr){var or=[];return Object.keys(sr).forEach(function(wn){sr[wn].forEach(function(fr){var kr=null;switch(fr){case"bold":kr={family:wn,weight:"bold"};break;case"italic":kr={family:wn,style:"italic"};break;case"bolditalic":kr={family:wn,weight:"bold",style:"italic"};break;case"":case"normal":kr={family:wn}}kr!==null&&(kr.ref={name:wn,style:fr},or.push(kr))})}),or})(Bt);je=(function(sr){for(var or={},wn=0;wn<sr.length;++wn){var fr=sA(sr[wn]),kr=fr.family,mn=fr.stretch,Er=fr.style,nr=fr.weight;or[kr]=or[kr]||{},or[kr][mn]=or[kr][mn]||{},or[kr][mn][Er]=or[kr][mn][Er]||{},or[kr][mn][Er][nr]=fr}return or})(Lt.concat(Jt)),Be=bt}return je})(this.pdf,this.fontFaces),Nt=gt.map(function(Ke){return{family:Ke,stretch:"normal",weight:Oe,style:pt}}),zt=(function(Ke,Jt,Bt){for(var bt=(Bt=Bt||{}).defaultFontFamily||"times",Lt=Object.assign({},QEe,Bt.genericFontFamilies||{}),sr=null,or=null,wn=0;wn<Jt.length;++wn)if(Lt[(sr=sA(Jt[wn])).family]&&(sr.family=Lt[sr.family]),Ke.hasOwnProperty(sr.family)){or=Ke[sr.family];break}if(!(or=or||Ke[bt]))throw new Error("Could not find a font-family for the rule '"+xF(sr)+"' and default family '"+bt+"'.");if(or=(function(fr,kr){if(kr[fr])return kr[fr];var mn=Lk[fr],Er=mn<=Lk.normal?-1:1,nr=pF(kr,fX,mn,Er);if(!nr)throw new Error("Could not find a matching font-stretch value for "+fr);return nr})(sr.stretch,or),or=(function(fr,kr){if(kr[fr])return kr[fr];for(var mn=uX[fr],Er=0;Er<mn.length;++Er)if(kr[mn[Er]])return kr[mn[Er]];throw new Error("Could not find a matching font-style for "+fr)})(sr.style,or),!(or=(function(fr,kr){if(kr[fr])return kr[fr];if(fr===400&&kr[500])return kr[500];if(fr===500&&kr[400])return kr[400];var mn=ZEe[fr],Er=pF(kr,hX,mn,fr<400?-1:1);if(!Er)throw new Error("Could not find a matching font-weight for value "+fr);return Er})(sr.weight,or)))throw new Error("Failed to resolve a font for the rule '"+xF(sr)+"'.");return or})(dt,Nt);this.pdf.setFont(zt.ref.name,zt.ref.style)}else{var Dt="";(Oe==="bold"||parseInt(Oe,10)>=700||pt==="bold")&&(Dt="bold"),pt==="italic"&&(Dt+="italic"),Dt.length===0&&(Dt="normal");for(var Gt="",rr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},jt=0;jt<gt.length;jt++){if(this.pdf.internal.getFont(gt[jt],Dt,{noFallback:!0,disableWarning:!0})!==void 0){Gt=gt[jt];break}if(Dt==="bolditalic"&&this.pdf.internal.getFont(gt[jt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Gt=gt[jt],Dt="bold";else if(this.pdf.internal.getFont(gt[jt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Gt=gt[jt],Dt="normal";break}}if(Gt===""){for(var Ce=0;Ce<gt.length;Ce++)if(rr[gt[Ce]]){Gt=rr[gt[Ce]];break}}Gt=Gt===""?"Times":Gt,this.pdf.setFont(Gt,Dt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(oe){this.ctx.globalCompositeOperation=oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(oe){this.ctx.globalAlpha=oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(oe){this.ctx.lineDashOffset=oe,F.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(oe){this.ctx.lineDash=oe,F.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(oe){this.ctx.ignoreClearRect=!!oe}})};m.prototype.setLineDash=function(z){this.lineDash=z},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){A.call(this,"fill",!1)},m.prototype.stroke=function(){A.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(z,H){if(isNaN(z)||isNaN(H))throw Wn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new o(z,H));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(z,H)},m.prototype.closePath=function(){var z=new o(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&Rn(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){z=new o(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(z.x,z.y)},m.prototype.lineTo=function(z,H){if(isNaN(z)||isNaN(H))throw Wn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new o(z,H));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(X.x,X.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},m.prototype.quadraticCurveTo=function(z,H,X,ne){if(isNaN(X)||isNaN(ne)||isNaN(z)||isNaN(H))throw Wn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new o(X,ne)),ce=this.ctx.transform.applyToPoint(new o(z,H));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},m.prototype.bezierCurveTo=function(z,H,X,ne,ie,ce){if(isNaN(ie)||isNaN(ce)||isNaN(z)||isNaN(H)||isNaN(X)||isNaN(ne))throw Wn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ge=this.ctx.transform.applyToPoint(new o(ie,ce)),he=this.ctx.transform.applyToPoint(new o(z,H)),ue=this.ctx.transform.applyToPoint(new o(X,ne));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:ue.x,y2:ue.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new o(ge.x,ge.y)},m.prototype.arc=function(z,H,X,ne,ie,ce){if(isNaN(z)||isNaN(H)||isNaN(X)||isNaN(ne)||isNaN(ie))throw Wn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var ge=this.ctx.transform.applyToPoint(new o(z,H));z=ge.x,H=ge.y;var he=this.ctx.transform.applyToPoint(new o(0,X)),ue=this.ctx.transform.applyToPoint(new o(0,0));X=Math.sqrt(Math.pow(he.x-ue.x,2)+Math.pow(he.y-ue.y,2))}Math.abs(ie-ne)>=2*Math.PI&&(ne=0,ie=2*Math.PI),this.path.push({type:"arc",x:z,y:H,radius:X,startAngle:ne,endAngle:ie,counterclockwise:ce})},m.prototype.arcTo=function(z,H,X,ne,ie){throw new Error("arcTo not implemented.")},m.prototype.rect=function(z,H,X,ne){if(isNaN(z)||isNaN(H)||isNaN(X)||isNaN(ne))throw Wn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(z,H),this.lineTo(z+X,H),this.lineTo(z+X,H+ne),this.lineTo(z,H+ne),this.lineTo(z,H),this.lineTo(z+X,H),this.lineTo(z,H)},m.prototype.fillRect=function(z,H,X,ne){if(isNaN(z)||isNaN(H)||isNaN(X)||isNaN(ne))throw Wn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(z,H,X,ne),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},m.prototype.strokeRect=function(z,H,X,ne){if(isNaN(z)||isNaN(H)||isNaN(X)||isNaN(ne))throw Wn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(z,H,X,ne),this.stroke())},m.prototype.clearRect=function(z,H,X,ne){if(isNaN(z)||isNaN(H)||isNaN(X)||isNaN(ne))throw Wn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(z,H,X,ne))},m.prototype.save=function(z){z=typeof z!="boolean"||z;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),z){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},m.prototype.restore=function(z){z=typeof z!="boolean"||z;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(H),z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(z){var H,X,ne,ie;if(z.isCanvasGradient===!0&&(z=z.getColor()),!z)return{r:0,g:0,b:0,a:0,style:z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(z))H=0,X=0,ne=0,ie=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(z);if(ce!==null)H=parseInt(ce[1]),X=parseInt(ce[2]),ne=parseInt(ce[3]),ie=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(z))!==null)H=parseInt(ce[1]),X=parseInt(ce[2]),ne=parseInt(ce[3]),ie=parseFloat(ce[4]);else{if(ie=1,typeof z=="string"&&z.charAt(0)!=="#"){var ge=new aX(z);z=ge.ok?ge.toHex():"#000000"}z.length===4?(H=z.substring(1,2),H+=H,X=z.substring(2,3),X+=X,ne=z.substring(3,4),ne+=ne):(H=z.substring(1,3),X=z.substring(3,5),ne=z.substring(5,7)),H=parseInt(H,16),X=parseInt(X,16),ne=parseInt(ne,16)}}return{r:H,g:X,b:ne,a:ie,style:z}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(z,H,X,ne){if(isNaN(H)||isNaN(X)||typeof z!="string")throw Wn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!g.call(this)){var ie=q(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;$.call(this,{text:z,x:H,y:X,scale:ce,angle:ie,align:this.textAlign,maxWidth:ne})}},m.prototype.strokeText=function(z,H,X,ne){if(isNaN(H)||isNaN(X)||typeof z!="string")throw Wn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){ne=isNaN(ne)?void 0:ne;var ie=q(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;$.call(this,{text:z,x:H,y:X,scale:ce,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:ne})}},m.prototype.measureText=function(z){if(typeof z!="string")throw Wn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,X=this.pdf.internal.scaleFactor,ne=H.internal.getFontSize(),ie=H.getStringUnitWidth(z)*ne/H.internal.scaleFactor;return new function(ce){var ge=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this}({width:ie*=Math.round(96*X/72*1e4)/1e4})},m.prototype.scale=function(z,H){if(isNaN(z)||isNaN(H))throw Wn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new d(z,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},m.prototype.rotate=function(z){if(isNaN(z))throw Wn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new d(Math.cos(z),Math.sin(z),-Math.sin(z),Math.cos(z),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},m.prototype.translate=function(z,H){if(isNaN(z)||isNaN(H))throw Wn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new d(1,0,0,1,z,H);this.ctx.transform=this.ctx.transform.multiply(X)},m.prototype.transform=function(z,H,X,ne,ie,ce){if(isNaN(z)||isNaN(H)||isNaN(X)||isNaN(ne)||isNaN(ie)||isNaN(ce))throw Wn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ge=new d(z,H,X,ne,ie,ce);this.ctx.transform=this.ctx.transform.multiply(ge)},m.prototype.setTransform=function(z,H,X,ne,ie,ce){z=isNaN(z)?1:z,H=isNaN(H)?0:H,X=isNaN(X)?0:X,ne=isNaN(ne)?1:ne,ie=isNaN(ie)?0:ie,ce=isNaN(ce)?0:ce,this.ctx.transform=new d(z,H,X,ne,ie,ce)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(z,H,X,ne,ie,ce,ge,he,ue){var Se=this.pdf.getImageProperties(z),je=1,Be=1,$e=1,oe=1;ne!==void 0&&he!==void 0&&($e=he/ne,oe=ue/ie,je=Se.width/ne*he/ne,Be=Se.height/ie*ue/ie),ce===void 0&&(ce=H,ge=X,H=0,X=0),ne!==void 0&&he===void 0&&(he=ne,ue=ie),ne===void 0&&he===void 0&&(he=Se.width,ue=Se.height);var Xe=this.ctx.transform.decompose(),pt=q(Xe.rotate.shx),Oe=new d,Ee=(Oe=(Oe=(Oe=Oe.multiply(Xe.translate)).multiply(Xe.skew)).multiply(Xe.scale)).applyToRectangle(new l(ce-H*$e,ge-X*oe,ne*je,ie*Be));if(this.autoPaging){for(var lt,ut=y.call(this,Ee),gt=[],dt=0;dt<ut.length;dt+=1)gt.indexOf(ut[dt])===-1&&gt.push(ut[dt]);C(gt);for(var Nt=gt[0],zt=gt[gt.length-1],Dt=Nt;Dt<zt+1;Dt++){this.pdf.setPage(Dt);var Gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],rr=Dt===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ce=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ke=Dt===1?0:jt+(Dt-2)*Ce;if(this.ctx.clip_path.length!==0){var Jt=this.path;lt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(lt,this.posX+this.margin[3],-Ke+rr+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=Jt}var Bt=JSON.parse(JSON.stringify(Ee));Bt=_([Bt],this.posX+this.margin[3],-Ke+rr+this.ctx.prevPageLastElemOffset)[0];var bt=(Dt>Nt||Dt<zt)&&v.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,Ce,null).clip().discardPath()),this.pdf.addImage(z,"JPEG",Bt.x,Bt.y,Bt.w,Bt.h,null,null,pt),bt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(z,"JPEG",Ee.x,Ee.y,Ee.w,Ee.h,null,null,pt)};var y=function(z,H,X){var ne=[];H=H||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(z.type){default:case"mt":case"lt":ne.push(Math.floor((z.y+ie)/X)+1);break;case"arc":ne.push(Math.floor((z.y+ie-z.radius)/X)+1),ne.push(Math.floor((z.y+ie+z.radius)/X)+1);break;case"qct":var ce=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x,z.y);ne.push(Math.floor((ce.y+ie)/X)+1),ne.push(Math.floor((ce.y+ce.h+ie)/X)+1);break;case"bct":var ge=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x2,z.y2,z.x,z.y);ne.push(Math.floor((ge.y+ie)/X)+1),ne.push(Math.floor((ge.y+ge.h+ie)/X)+1);break;case"rect":ne.push(Math.floor((z.y+ie)/X)+1),ne.push(Math.floor((z.y+z.h+ie)/X)+1)}for(var he=0;he<ne.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<ne[he];)j.call(this);return ne},j=function(){var z=this.fillStyle,H=this.strokeStyle,X=this.font,ne=this.lineCap,ie=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=z,this.strokeStyle=H,this.font=X,this.lineCap=ne,this.lineWidth=ie,this.lineJoin=ce},_=function(z,H,X){for(var ne=0;ne<z.length;ne++)switch(z[ne].type){case"bct":z[ne].x2+=H,z[ne].y2+=X;case"qct":z[ne].x1+=H,z[ne].y1+=X;default:z[ne].x+=H,z[ne].y+=X}return z},C=function(z){return z.sort(function(H,X){return H-X})},A=function(z,H){var X=this.fillStyle,ne=this.strokeStyle,ie=this.lineCap,ce=this.lineWidth,ge=Math.abs(ce*this.ctx.transform.scaleX),he=this.lineJoin;if(this.autoPaging){for(var ue,Se,je=JSON.parse(JSON.stringify(this.path)),Be=JSON.parse(JSON.stringify(this.path)),$e=[],oe=0;oe<Be.length;oe++)if(Be[oe].x!==void 0)for(var Xe=y.call(this,Be[oe]),pt=0;pt<Xe.length;pt+=1)$e.indexOf(Xe[pt])===-1&&$e.push(Xe[pt]);for(var Oe=0;Oe<$e.length;Oe++)for(;this.pdf.internal.getNumberOfPages()<$e[Oe];)j.call(this);C($e);for(var Ee=$e[0],lt=$e[$e.length-1],ut=Ee;ut<lt+1;ut++){this.pdf.setPage(ut),this.fillStyle=X,this.strokeStyle=ne,this.lineCap=ie,this.lineWidth=ge,this.lineJoin=he;var gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],dt=ut===1?this.posY+this.margin[0]:this.margin[0],Nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dt=ut===1?0:Nt+(ut-2)*zt;if(this.ctx.clip_path.length!==0){var Gt=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(ue,this.posX+this.margin[3],-Dt+dt+this.ctx.prevPageLastElemOffset),S.call(this,z,!0),this.path=Gt}if(Se=JSON.parse(JSON.stringify(je)),this.path=_(Se,this.posX+this.margin[3],-Dt+dt+this.ctx.prevPageLastElemOffset),H===!1||ut===0){var rr=(ut>Ee||ut<lt)&&v.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,zt,null).clip().discardPath()),S.call(this,z,H),rr&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}this.path=je}else this.lineWidth=ge,S.call(this,z,H),this.lineWidth=ce},S=function(z,H){if((z!=="stroke"||H||!b.call(this))&&(z==="stroke"||H||!g.call(this))){for(var X,ne,ie=[],ce=this.path,ge=0;ge<ce.length;ge++){var he=ce[ge];switch(he.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:he,deltas:[],abs:[]});break;case"lt":var ue=ie.length;if(ce[ge-1]&&!isNaN(ce[ge-1].x)&&(X=[he.x-ce[ge-1].x,he.y-ce[ge-1].y],ue>0)){for(;ue>=0;ue--)if(ie[ue-1].close!==!0&&ie[ue-1].begin!==!0){ie[ue-1].deltas.push(X),ie[ue-1].abs.push(he);break}}break;case"bct":X=[he.x1-ce[ge-1].x,he.y1-ce[ge-1].y,he.x2-ce[ge-1].x,he.y2-ce[ge-1].y,he.x-ce[ge-1].x,he.y-ce[ge-1].y],ie[ie.length-1].deltas.push(X);break;case"qct":var Se=ce[ge-1].x+2/3*(he.x1-ce[ge-1].x),je=ce[ge-1].y+2/3*(he.y1-ce[ge-1].y),Be=he.x+2/3*(he.x1-he.x),$e=he.y+2/3*(he.y1-he.y),oe=he.x,Xe=he.y;X=[Se-ce[ge-1].x,je-ce[ge-1].y,Be-ce[ge-1].x,$e-ce[ge-1].y,oe-ce[ge-1].x,Xe-ce[ge-1].y],ie[ie.length-1].deltas.push(X);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(he)}}ne=H?null:z==="stroke"?"stroke":"fill";for(var pt=!1,Oe=0;Oe<ie.length;Oe++)if(ie[Oe].arc)for(var Ee=ie[Oe].abs,lt=0;lt<Ee.length;lt++){var ut=Ee[lt];ut.type==="arc"?R.call(this,ut.x,ut.y,ut.radius,ut.startAngle,ut.endAngle,ut.counterclockwise,void 0,H,!pt):K.call(this,ut.x,ut.y),pt=!0}else if(ie[Oe].close===!0)this.pdf.internal.out("h"),pt=!1;else if(ie[Oe].begin!==!0){var gt=ie[Oe].start.x,dt=ie[Oe].start.y;U.call(this,ie[Oe].deltas,gt,dt),pt=!0}ne&&M.call(this,ne),H&&I.call(this)}},T=function(z){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return z-X;case"top":return z+H-X;case"hanging":return z+H-2*X;case"middle":return z+H/2-X;default:return z}},O=function(z){return z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var z=function(){};return z.colorStops=[],z.addColorStop=function(H,X){this.colorStops.push([H,X])},z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},z.isCanvasGradient=!0,z},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(z,H,X,ne,ie,ce,ge,he,ue){for(var Se=V.call(this,X,ne,ie,ce),je=0;je<Se.length;je++){var Be=Se[je];je===0&&(ue?D.call(this,Be.x1+z,Be.y1+H):K.call(this,Be.x1+z,Be.y1+H)),J.call(this,z,H,Be.x2,Be.y2,Be.x3,Be.y3,Be.x4,Be.y4)}he?I.call(this):M.call(this,ge)},M=function(z){switch(z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},I=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(z,H){this.pdf.internal.out(r(z)+" "+a(H)+" m")},$=function(z){var H;switch(z.align){case"right":case"end":H="right";break;case"center":H="center";break;default:H="left"}var X,ne,ie,ce=this.pdf.getTextDimensions(z.text),ge=T.call(this,z.y),he=O.call(this,ge)-ce.h,ue=this.ctx.transform.applyToPoint(new o(z.x,ge));if(this.autoPaging){var Se=this.ctx.transform.decompose(),je=new d;je=(je=(je=je.multiply(Se.translate)).multiply(Se.skew)).multiply(Se.scale);for(var Be=this.ctx.transform.applyToRectangle(new l(z.x,ge,ce.w,ce.h)),$e=je.applyToRectangle(new l(z.x,he,ce.w,ce.h)),oe=y.call(this,$e),Xe=[],pt=0;pt<oe.length;pt+=1)Xe.indexOf(oe[pt])===-1&&Xe.push(oe[pt]);C(Xe);for(var Oe=Xe[0],Ee=Xe[Xe.length-1],lt=Oe;lt<Ee+1;lt++){this.pdf.setPage(lt);var ut=lt===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],dt=this.pdf.internal.pageSize.height-this.margin[2],Nt=dt-this.margin[0],zt=this.pdf.internal.pageSize.width-this.margin[1],Dt=zt-this.margin[3],Gt=lt===1?0:gt+(lt-2)*Nt;if(this.ctx.clip_path.length!==0){var rr=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(X,this.posX+this.margin[3],-1*Gt+ut),S.call(this,"fill",!0),this.path=rr}var jt=_([JSON.parse(JSON.stringify($e))],this.posX+this.margin[3],-Gt+ut+this.ctx.prevPageLastElemOffset)[0];z.scale>=.01&&(ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ne*z.scale),ie=this.lineWidth,this.lineWidth=ie*z.scale);var Ce=this.autoPaging!=="text";if(Ce||jt.y+jt.h<=dt){if(Ce||jt.y>=ut&&jt.x<=zt){var Ke=Ce?z.text:this.pdf.splitTextToSize(z.text,z.maxWidth||zt-jt.x)[0],Jt=_([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-Gt+ut+this.ctx.prevPageLastElemOffset)[0],Bt=Ce&&(lt>Oe||lt<Ee)&&v.call(this);Bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dt,Nt,null).clip().discardPath()),this.pdf.text(Ke,Jt.x,Jt.y,{angle:z.angle,align:H,renderingMode:z.renderingMode}),Bt&&this.pdf.restoreGraphicsState()}}else jt.y<dt&&(this.ctx.prevPageLastElemOffset+=dt-jt.y);z.scale>=.01&&(this.pdf.setFontSize(ne),this.lineWidth=ie)}}else z.scale>=.01&&(ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ne*z.scale),ie=this.lineWidth,this.lineWidth=ie*z.scale),this.pdf.text(z.text,ue.x+this.posX,ue.y+this.posY,{angle:z.angle,align:H,renderingMode:z.renderingMode,maxWidth:z.maxWidth}),z.scale>=.01&&(this.pdf.setFontSize(ne),this.lineWidth=ie)},K=function(z,H,X,ne){X=X||0,ne=ne||0,this.pdf.internal.out(r(z+X)+" "+a(H+ne)+" l")},U=function(z,H,X){return this.pdf.lines(z,H,X,null,null)},J=function(z,H,X,ne,ie,ce,ge,he){this.pdf.internal.out([t(s(X+z)),t(i(ne+H)),t(s(ie+z)),t(i(ce+H)),t(s(ge+z)),t(i(he+H)),"c"].join(" "))},V=function(z,H,X,ne){for(var ie=2*Math.PI,ce=Math.PI/2;H>X;)H-=ie;var ge=Math.abs(X-H);ge<ie&&ne&&(ge=ie-ge);for(var he=[],ue=ne?-1:1,Se=H;ge>1e-5;){var je=Se+ue*Math.min(ge,ce);he.push(G.call(this,z,Se,je)),ge-=Math.abs(je-Se),Se=je}return he},G=function(z,H,X){var ne=(X-H)/2,ie=z*Math.cos(ne),ce=z*Math.sin(ne),ge=ie,he=-ce,ue=ge*ge+he*he,Se=ue+ge*ie+he*ce,je=4/3*(Math.sqrt(2*ue*Se)-Se)/(ge*ce-he*ie),Be=ge-je*he,$e=he+je*ge,oe=Be,Xe=-$e,pt=ne+H,Oe=Math.cos(pt),Ee=Math.sin(pt);return{x1:z*Math.cos(H),y1:z*Math.sin(H),x2:Be*Oe-$e*Ee,y2:Be*Ee+$e*Oe,x3:oe*Oe-Xe*Ee,y3:oe*Ee+Xe*Oe,x4:z*Math.cos(X),y4:z*Math.sin(X)}},q=function(z){return 180*z/Math.PI},Y=function(z,H,X,ne,ie,ce){var ge=z+.5*(X-z),he=H+.5*(ne-H),ue=ie+.5*(X-ie),Se=ce+.5*(ne-ce),je=Math.min(z,ie,ge,ue),Be=Math.max(z,ie,ge,ue),$e=Math.min(H,ce,he,Se),oe=Math.max(H,ce,he,Se);return new l(je,$e,Be-je,oe-$e)},Q=function(z,H,X,ne,ie,ce,ge,he){var ue,Se,je,Be,$e,oe,Xe,pt,Oe,Ee,lt,ut,gt,dt,Nt=X-z,zt=ne-H,Dt=ie-X,Gt=ce-ne,rr=ge-ie,jt=he-ce;for(Se=0;Se<41;Se++)Oe=(Xe=(je=z+(ue=Se/40)*Nt)+ue*(($e=X+ue*Dt)-je))+ue*($e+ue*(ie+ue*rr-$e)-Xe),Ee=(pt=(Be=H+ue*zt)+ue*((oe=ne+ue*Gt)-Be))+ue*(oe+ue*(ce+ue*jt-oe)-pt),Se==0?(lt=Oe,ut=Ee,gt=Oe,dt=Ee):(lt=Math.min(lt,Oe),ut=Math.min(ut,Ee),gt=Math.max(gt,Oe),dt=Math.max(dt,Ee));return new l(Math.round(lt),Math.round(ut),Math.round(gt-lt),Math.round(dt-ut))},F=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var z,H,X=(z=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:z,lineDashOffset:H}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(ir.API),(function(e){var t=function(o){var l,d,u,f,m,p,g,b,v,y;for(d=[],u=0,f=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;f>u;u+=4)(m=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(p=(m=((m=((m=((m=(m-(y=m%85))/85)-(v=m%85))/85)-(b=m%85))/85)-(g=m%85))/85)%85,d.push(p+33,g+33,b+33,v+33,y+33)):d.push(122);return(function(j,_){for(var C=_;C>0;C--)j.pop()})(d,l.length),String.fromCharCode.apply(String,d)+"~>"},r=function(o){var l,d,u,f,m,p=String,g="length",b=255,v="charCodeAt",y="slice",j="replace";for(o[y](-2),o=o[y](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),u=[],f=0,m=(o+=l="uuuuu"[y](o[g]%5||5))[g];m>f;f+=5)d=52200625*(o[v](f)-33)+614125*(o[v](f+1)-33)+7225*(o[v](f+2)-33)+85*(o[v](f+3)-33)+(o[v](f+4)-33),u.push(b&d>>24,b&d>>16,b&d>>8,b&d);return(function(_,C){for(var A=C;A>0;A--)_.pop()})(u,l[g]),p.fromCharCode.apply(p,u)},a=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var d="",u=0;u<o.length;u+=2)d+=String.fromCharCode("0x"+(o[u]+o[u+1]));return d},i=function(o){for(var l=new Uint8Array(o.length),d=o.length;d--;)l[d]=o.charCodeAt(d);return(l=Ok(l)).reduce(function(u,f){return u+String.fromCharCode(f)},"")};e.processDataByFilters=function(o,l){var d=0,u=o||"",f=[];for(typeof(l=l||[])=="string"&&(l=[l]),d=0;d<l.length;d+=1)switch(l[d]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=s(u),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=a(u),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[d]+'" is not implemented')}return{data:u,reverseChain:f.reverse().join(" ")}}})(ir.API),(function(e){e.loadFile=function(t,r,a){return(function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(d,u,f){var m=new XMLHttpRequest,p=0,g=function(b){var v=b.length,y=[],j=String.fromCharCode;for(p=0;p<v;p+=1)y.push(j(255&b.charCodeAt(p)));return y.join("")};if(m.open("GET",d,!u),m.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(m.onload=function(){m.status===200?f(g(this.responseText)):f(void 0)}),m.send(null),u&&m.status===200)return g(m.responseText)})(s,i,o)}catch{}return l})(t,r,a)},e.loadImageFile=e.loadFile})(ir.API),(function(e){function t(){return(Rr.html2canvas?Promise.resolve(Rr.html2canvas):Lb(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(Rr.DOMPurify?Promise.resolve(Rr.DOMPurify):Lb(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var a=function(l){var d=Rn(l);return d==="undefined"?"undefined":d==="string"||l instanceof String?"string":d==="number"||l instanceof Number?"number":d==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":d==="object"?"object":"unknown"},s=function(l,d){var u=document.createElement(l);for(var f in d.className&&(u.className=d.className),d.innerHTML&&d.dompurify&&(u.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)u.style[f]=d.style[f];return u},i=function l(d,u){for(var f=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),m=d.firstChild;m;m=m.nextSibling)u!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||f.appendChild(l(m,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(f.width=d.width,f.height=d.height,f.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(f.value=d.value),f.addEventListener("load",function(){f.scrollTop=d.scrollTop,f.scrollLeft=d.scrollLeft},!0)),f},o=function l(d){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),f=l.convert(Promise.resolve(),u);return(f=f.setProgress(1,l,1,[l])).set(d)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,d){return l.__proto__=d||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,d){return this.then(function(){switch(d=d||(function(u){switch(a(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),d){case"string":return this.then(r).then(function(u){return this.set({src:s("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(d){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,d(this.prop.container,u)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(d){var u=this.opt.jsPDF,f=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=f,f)for(var g=0;g<f.length;++g){var b=f[g],v=b.src.find(function(y){return y.format==="truetype"});v&&u.addFont(v.url,b.ref.name,b.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),d(this.prop.container,p)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,d,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,d):this.outputPdf(l,d)},o.prototype.outputPdf=function(l,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,d)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(a(l)!=="object")return this;var d=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(d)})},o.prototype.get=function(l,d){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return d?d(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(a(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function d(u,f){return Math.floor(u*f/72*96)}return this.then(function(){(l=l||ir.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:d(l.inner.width,l.k),height:d(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,d,u,f){return l!=null&&(this.progress.val=l),d!=null&&(this.progress.state=d),u!=null&&(this.progress.n=u),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,d,u,f){return this.setProgress(l?this.progress.val+l:null,d||null,u?this.progress.n+u:null,f?this.progress.stack.concat(f):null)},o.prototype.then=function(l,d){var u=this;return this.thenCore(l,d,function(f,m){return u.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,f),p}).then(f,m).then(function(p){return u.updateProgress(1),p})})},o.prototype.thenCore=function(l,d,u){u=u||Promise.prototype.then;var f=this;l&&(l=l.bind(f)),d&&(d=d.bind(f));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:o.convert(Object.assign({},f),Promise.prototype),p=u.call(m,l,d);return o.convert(p,f.__proto__)},o.prototype.thenExternal=function(l,d){return Promise.prototype.then.call(this,l,d)},o.prototype.thenList=function(l){var d=this;return l.forEach(function(u){d=d.thenCore(u)}),d},o.prototype.catch=function(l){l&&(l=l.bind(this));var d=Promise.prototype.catch.call(this,l);return o.convert(d,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,ir.getPageSize=function(l,d,u){if(Rn(l)==="object"){var f=l;l=f.orientation,d=f.unit||d,u=f.format||u}d=d||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var m,p=(""+u).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+d}var b,v=0,y=0;if(g.hasOwnProperty(p))v=g[p][1]/m,y=g[p][0]/m;else try{v=u[1],y=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",y>v&&(b=y,y=v,v=b);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",v>y&&(b=y,y=v,v=b)}return{width:y,height:v,unit:d,k:m,orientation:l}},e.html=function(l,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(sA):null;var u=new o(d);return d.worker?u:u.from(l).doCallback()}})(ir.API),ir.API.addJS=function(e){return bF=e,this.internal.events.subscribe("postPutResources",function(){Cb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Cb+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),yF=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+bF+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Cb!==void 0&&yF!==void 0&&this.internal.out("/Names <</JavaScript "+Cb+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=a.exec(o);if(l!=null){var d=l[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,f=[];for(i=0;i<u;i++){var m=r.internal.newObject();f.push(m);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,s,i){var o={title:s,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var s=0;s<a.children.length;s++)this.genIds_r(a.children[s])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var d=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<a.children.length;u++)this.renderItems(a.children[u])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,s){for(var i=0;i<s.children.length;i++)a.count++,this.count_r(a,s.children[i]);return a.count}}])})(ir.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,a,s,i,o,l){var d,u=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,d=(function(m){for(var p,g=256*m.charCodeAt(4)+m.charCodeAt(5),b=m.length,v={width:0,height:0,numcomponents:1},y=4;y<b;y+=2){if(y+=g,t.indexOf(m.charCodeAt(y+1))!==-1){p=256*m.charCodeAt(y+5)+m.charCodeAt(y+6),v={width:256*m.charCodeAt(y+7)+m.charCodeAt(y+8),height:p,numcomponents:m.charCodeAt(y+9)};break}g=256*m.charCodeAt(y+2)+m.charCodeAt(y+3)}return v})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),d.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:r,width:d.width,height:d.height,colorSpace:l,bitsPerComponent:8,filter:u,index:a,alias:s}}return f}})(ir.API),ir.API.processPNG=function(e,t,r,a){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var s,i=$Ee(e,{checkCrc:!0}),o=i.width,l=i.height,d=i.channels,u=i.palette,f=i.depth;s=u&&d===1?(function(R){for(var M=R.width,I=R.height,D=R.data,$=R.palette,K=R.depth,U=!1,J=[],V=[],G=void 0,q=!1,Y=0,Q=0;Q<$.length;Q++){var F=S$($[Q],4),z=F[0],H=F[1],X=F[2],ne=F[3];J.push(z,H,X),ne!=null&&(ne===0?(Y++,V.length<1&&V.push(Q)):ne<255&&(q=!0))}if(q||Y>1){U=!0,V=void 0;var ie=M*I;G=new Uint8Array(ie);for(var ce=new DataView(D.buffer),ge=0;ge<ie;ge++){var he=oA(ce,ge,K),ue=S$($[he],4)[3];G[ge]=ue}}else Y===0&&(V=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:U?8:void 0,colorBytes:D,alphaBytes:G,needSMask:U,palette:J,mask:V}})(i):d===2||d===4?(function(R){for(var M=R.data,I=R.width,D=R.height,$=R.channels,K=R.depth,U=$===2?"DeviceGray":"DeviceRGB",J=$-1,V=I*D,G=J,q=V*G,Y=1*V,Q=Math.ceil(q*K/8),F=Math.ceil(Y*K/8),z=new Uint8Array(Q),H=new Uint8Array(F),X=new DataView(M.buffer),ne=new DataView(z.buffer),ie=new DataView(H.buffer),ce=!1,ge=0;ge<V;ge++){for(var he=ge*$,ue=0;ue<G;ue++)OF(ne,oA(X,he+ue,K),ge*G+ue,K);var Se=oA(X,he+G,K);Se<(1<<K)-1&&(ce=!0),OF(ie,Se,1*ge,K)}return{colorSpace:U,colorsPerPixel:J,sMaskBitsPerComponent:ce?K:void 0,colorBytes:z,alphaBytes:H,needSMask:ce}})(i):(function(R){var M=R.data,I=R.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:I,colorsPerPixel:I==="DeviceGray"?1:3,colorBytes:M instanceof Uint16Array?(function(D){for(var $=D.length,K=new Uint8Array(2*$),U=new DataView(K.buffer,K.byteOffset,K.byteLength),J=0;J<$;J++)U.setUint16(2*J,D[J],!1);return K})(M):M,needSMask:!1}})(i);var m,p,g,b=s,v=b.colorSpace,y=b.colorsPerPixel,j=b.sMaskBitsPerComponent,_=b.colorBytes,C=b.alphaBytes,A=b.needSMask,S=b.palette,T=b.mask,O=null;return a!==ir.API.image_compression.NONE&&typeof Ok=="function"?(O=(function(R){var M;switch(R){case ir.API.image_compression.FAST:M=11;break;case ir.API.image_compression.MEDIUM:M=13;break;case ir.API.image_compression.SLOW:M=14;break;default:M=12}return M})(a),m=this.decode.FLATE_DECODE,p="/Predictor ".concat(O," /Colors ").concat(y," /BitsPerComponent ").concat(f," /Columns ").concat(o),e=SF(_,Math.ceil(o*y*f/8),y,f,a),A&&(g=SF(C,Math.ceil(o*j/8),1,j,a))):(m=void 0,p=void 0,e=_,A&&(g=C)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:r,data:e,index:t,filter:m,decodeParameters:p,transparency:T,palette:S,sMask:g,predictor:O,width:o,height:l,bitsPerComponent:f,sMaskBitsPerComponent:j,colorSpace:v}}},(function(e){e.processGIF89A=function(t,r,a,s){var i=new sTe(t),o=i.width,l=i.height,d=[];i.decodeAndBlitFrameRGBA(0,d);var u={data:d,width:o,height:l},f=new lA(100).encode(u,100);return e.processJPEG.call(this,f,r,a,s)},e.processGIF87A=e.processGIF89A})(ir.API),dc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},dc.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Wn.log("bit decode error:"+r)}},dc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var d=this.palette[i>>7-l&1];this.data[o+4*l]=d.blue,this.data[o+4*l+1]=d.green,this.data[o+4*l+2]=d.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},dc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*s*4,l=i>>4,d=15&i,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*s+1>=this.width)break;u=this.palette[d],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},dc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},dc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,d=(i>>10&t)/t*255|0,u=i>>15?255:0,f=a*this.width*4+4*s;this.data[f]=d,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=u}this.pos+=e}},dc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,d=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,f=s*this.width*4+4*i;this.data[f]=u,this.data[f+1]=d,this.data[f+2]=l,this.data[f+3]=255}this.pos+=e}},dc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},dc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=a,this.data[l+3]=o}},dc.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,a,s){var i=new dc(t,!1),o=i.width,l=i.height,d={data:i.getData(),width:o,height:l},u=new lA(100).encode(d,100);return e.processJPEG.call(this,u,r,a,s)}})(ir.API),TF.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,a,s){var i=new TF(t),o=i.width,l=i.height,d={data:i.getData(),width:o,height:l},u=new lA(100).encode(d,100);return e.processJPEG.call(this,u,r,a,s)}})(ir.API),ir.API.processRGBA=function(e,t,r){for(var a=e.data,s=a.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,d=0,u=0;u<s;u+=4){var f=a[u],m=a[u+1],p=a[u+2],g=a[u+3];i[l++]=f,i[l++]=m,i[l++]=p,o[d++]=g}var b=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ir.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ip=ir.API,_b=ip.getCharWidthsArray=function(e,t){var r,a,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,d=l.fof?l.fof:1,u=t.kerning?t.kerning:s.metadata.Unicode.kerning,f=u.fof?u.fof:1,m=t.doKerning!==!1,p=0,g=e.length,b=0,v=l[0]||d,y=[];for(r=0;r<g;r++)a=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?y.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(p=m&&Rn(u[a])==="object"&&!isNaN(parseInt(u[a][b],10))?u[a][b]/f:0,y.push((l[a]||v)/d+p)),b=a;return y},jF=ip.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return ip.processArabic&&(e=ip.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,r,s)/r:_b.apply(this,arguments).reduce(function(i,o){return i+o},0)},wF=function(e,t,r,a){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var d=i;for(l=0;i!==o;)l+t[i]>a&&(s.push(e.slice(d,i)),l=0,d=i),l+=t[i],i++;return d!==i&&s.push(e.slice(d,i)),s},NF=function(e,t,r){r||(r={});var a,s,i,o,l,d,u,f=[],m=[f],p=r.textIndent||0,g=0,b=0,v=e.split(" "),y=_b.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var j=Array(d).join(" "),_=[];v.map(function(A){(A=A.split(/\s*\n/)).length>1?_=_.concat(A.map(function(S,T){return(T&&S.length?`
`:"")+S})):_.push(A[0])}),v=_,d=jF.apply(this,[j,r])}for(i=0,o=v.length;i<o;i++){var C=0;if(a=v[i],d&&a[0]==`
`&&(a=a.substr(1),C=1),p+g+(b=(s=_b.apply(this,[a,r])).reduce(function(A,S){return A+S},0))>t||C){if(b>t){for(l=wF.apply(this,[a,s,t-(p+g),t]),f.push(l.shift()),f=[l.pop()];l.length;)m.push([l.shift()]);b=s.slice(a.length-(f[0]?f[0].length:0)).reduce(function(A,S){return A+S},0)}else f=[a];m.push(f),p=b+d,g=y}else f.push(a),p+=g+b,g=y}return u=d?function(A,S){return(S?j:"")+A.join(" ")}:function(A){return A.join(" ")},m.map(u)},ip.splitTextToSize=function(e,t,r){var a,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var m=this.internal.getFont(f.fontName,f.fontStyle),p="Unicode";return m.metadata[p]?{widths:m.metadata[p].widths||{0:1},kerning:m.metadata[p].kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,d,u=[];for(l=0,d=a.length;l<d;l++)u=u.concat(NF.apply(this,[a[l],o,i]));return u},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",a={},s={},i=0;i<16;i++)a[r[i]]=t[i],s[t[i]]=r[i];var o=function(p){return"0x"+parseInt(p,10).toString(16)},l=e.__fontmetrics__.compress=function(p){var g,b,v,y,j=["{"];for(var _ in p){if(g=p[_],isNaN(parseInt(_,10))?b="'"+_+"'":(_=parseInt(_,10),b=(b=o(_).slice(2)).slice(0,-1)+s[b.slice(-1)]),typeof g=="number")g<0?(v=o(g).slice(3),y="-"):(v=o(g).slice(2),y=""),v=y+v.slice(0,-1)+s[v.slice(-1)];else{if(Rn(g)!=="object")throw new Error("Don't know what to do with value type "+Rn(g)+".");v=l(g)}j.push(b+v)}return j.push("}"),j.join("")},d=e.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,b,v,y,j={},_=1,C=j,A=[],S="",T="",O=p.length-1,R=1;R<O;R+=1)(y=p[R])=="'"?g?(v=g.join(""),g=void 0):g=[]:g?g.push(y):y=="{"?(A.push([C,v]),C={},v=void 0):y=="}"?((b=A.pop())[0][b[1]]=C,v=void 0,C=b[0]):y=="-"?_=-1:v===void 0?a.hasOwnProperty(y)?(S+=a[y],v=parseInt(S,16)*_,_=1,S=""):S+=y:a.hasOwnProperty(y)?(T+=a[y],C[v]=parseInt(T,16)*_,_=1,v=void 0,T=""):T+=y;return j},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},m={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(p){var g=p.font,b=m.Unicode[g.postScriptName];b&&(g.metadata.Unicode={},g.metadata.Unicode.widths=b.widths,g.metadata.Unicode.kerning=b.kerning);var v=f.Unicode[g.postScriptName];v&&(g.metadata.Unicode.encoding=v,g.encoding=v.codePages[0])}])})(ir.API),(function(e){var t=function(r){for(var a=r.length,s=new Uint8Array(a),i=0;i<a;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var a=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(a=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t($b(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,a)}}])})(ir),ir.API.addSvgAsImage=function(e,t,r,a,s,i,o,l){if(isNaN(t)||isNaN(r))throw Wn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(s))throw Wn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=s;var u=d.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,d.width,d.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return(Rr.canvg?Promise.resolve(Rr.canvg):Lb(()=>import("./index.es-qFhGvQis.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,e,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(f)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),t,r,a,s,o,l)})},ir.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var s=0;s<this.internal.pages[a].length;s++)this.internal.pages[a][s]=this.internal.pages[a][s].replace(t,r);return this},ir.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),d=[],u=0,f=0,m=0;function p(b,v){var y,j=!1;for(y=0;y<b.length;y+=1)b[y]===v&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var g=l.length;for(m=0;m<g;m+=1)r[l[m]].value=r[l[m]].defaultValue,r[l[m]].explicitSet=!1}if(Rn(e)==="object"){for(s in e)if(i=e[s],p(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&p(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(u=0;u<i.length;u+=1)if(a=!0,i[u].length===1&&typeof i[u][0]=="number")d.push(String(i[u]-1));else if(i[u].length>1){for(f=0;f<i[u].length;f+=1)typeof i[u][f]!="number"&&(a=!1);a===!0&&d.push([i[u][0]-1,i[u][1]-1].join(" "))}r[s].value="["+d.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,v=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?v.push("/"+b+" /"+r[b].value):v.push("/"+b+" "+r[b].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+l.length+s.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(ir.API),(function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,d=o.metadata.Unicode.widths,u=["","0","00","000","0000"],f=[""],m=0,p=i.length;m<p;++m){if(l=o.metadata.characterToGlyph(i.charCodeAt(m)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(m),d.indexOf(l)==-1&&(d.push(l),d.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(u[4-l.length],l)}return f.join("")},a=function(i){var o,l,d,u,f,m,p;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],m=0,p=(l=Object.keys(i).sort(function(g,b){return g-b})).length;m<p;m++)o=l[m],d.length>=100&&(f+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),d.push("<"+o+"><"+u+">"));return d.length&&(f+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,d=o.out,u=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),g="",b=0;b<p.length;b++)g+=String.fromCharCode(p[b]);var v=u();f({data:g,addLength1:!0,objectId:v}),d("endobj");var y=u();f({data:a(l.metadata.toUnicode),addLength1:!0,objectId:y}),d("endobj");var j=u();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+up(l.fontName)),d("/FontFile2 "+v+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),d("/Flags "+l.metadata.flags),d("/StemV "+l.metadata.stemV),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d(">>"),d("endobj");var _=u();d("<<"),d("/Type /Font"),d("/BaseFont /"+up(l.fontName)),d("/FontDescriptor "+j+" 0 R"),d("/W "+e.API.PDFObject.convert(m)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+l.encoding+")"),d(">>"),d(">>"),d("endobj"),l.objectNumber=u(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+y+" 0 R"),d("/BaseFont /"+up(l.fontName)),d("/Encoding /"+l.encoding),d("/DescendantFonts ["+_+" 0 R]"),d(">>"),d("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,d=o.out,u=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,p="",g=0;g<m.length;g++)p+=String.fromCharCode(m[g]);var b=u();f({data:p,addLength1:!0,objectId:b}),d("endobj");var v=u();f({data:a(l.metadata.toUnicode),addLength1:!0,objectId:v}),d("endobj");var y=u();d("<<"),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d("/StemV "+l.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+b+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),d("/FontName /"+up(l.fontName)),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d(">>"),d("endobj"),l.objectNumber=u();for(var j=0;j<l.metadata.hmtx.widths.length;j++)l.metadata.hmtx.widths[j]=parseInt(l.metadata.hmtx.widths[j]*(1e3/l.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+up(l.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),d("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",d=i.x,u=i.y,f=i.options||{},m=i.mutex||{},p=m.pdfEscape,g=m.activeFontKey,b=m.fonts,v=g,y="",j=0,_="",C=b[v].encoding;if(b[v].encoding!=="Identity-H")return{text:l,x:d,y:u,options:f,mutex:m};for(_=l,v=g,Array.isArray(l)&&(_=l[0]),j=0;j<_.length;j+=1)b[v].metadata.hasOwnProperty("cmap")&&(o=b[v].metadata.cmap.unicode.codeMap[_[j].charCodeAt(0)]),o||_[j].charCodeAt(0)<256&&b[v].metadata.hasOwnProperty("Unicode")?y+=_[j]:y+="";var A="";return parseInt(v.slice(1))<14||C==="WinAnsiEncoding"?A=p(y,v).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(A=r(y,b[v])),m.isHex=!0,{text:A,x:d,y:u,options:f,mutex:m}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],d={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([s(Object.assign({},d,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(s(Object.assign({},d,{text:o[u]})).text);i.text=l}else i.text=s(Object.assign({},d,{text:o})).text}])})(ir),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(ir.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var s,i,o,l,d,u,f,m=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,C=0;this.__bidiEngine__={};var A=function(D){var $=D.charCodeAt(),K=$>>8,U=v[K];return U!==void 0?m[256*U+(255&$)]:K===252||K===253?"AL":j.test(K)?"L":K===8?"R":"N"},S=function(D){for(var $,K=0;K<D.length;K++){if(($=A(D.charAt(K)))==="L")return!1;if($==="R")return!0}return!1},T=function(D,$,K,U){var J,V,G,q,Y=$[U];switch(Y){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"N":case"AN":break;case"EN":_&&(Y="AN");break;case"AL":_=!0,Y="R";break;case"WS":case"BN":Y="N";break;case"CS":U<1||U+1>=$.length||(J=K[U-1])!=="EN"&&J!=="AN"||(V=$[U+1])!=="EN"&&V!=="AN"?Y="N":_&&(V="AN"),Y=V===J?V:"N";break;case"ES":Y=(J=U>0?K[U-1]:"B")==="EN"&&U+1<$.length&&$[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&K[U-1]==="EN"){Y="EN";break}if(_){Y="N";break}for(G=U+1,q=$.length;G<q&&$[G]==="ET";)G++;Y=G<q&&$[G]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(q=$.length,G=U+1;G<q&&$[G]==="NSM";)G++;if(G<q){var Q=D[U],F=Q>=1425&&Q<=2303||Q===64286;if(J=$[G],F&&(J==="R"||J==="AL")){Y="R";break}}}Y=U<1||(J=$[U-1])==="B"?"N":K[U-1];break;case"B":_=!1,s=!0,Y=C;break;case"S":i=!0,Y="N"}return Y},O=function(D,$,K){var U=D.split("");return K&&R(U,K,{hiLevel:C}),U.reverse(),$&&$.reverse(),U.join("")},R=function(D,$,K){var U,J,V,G,q,Y=-1,Q=D.length,F=0,z=[],H=C?g:p,X=[];for(_=!1,s=!1,i=!1,J=0;J<Q;J++)X[J]=A(D[J]);for(V=0;V<Q;V++){if(q=F,z[V]=T(D,X,z,V),U=240&(F=H[q][b[z[V]]]),F&=15,$[V]=G=H[F][5],U>0)if(U===16){for(J=Y;J<V;J++)$[J]=1;Y=-1}else Y=-1;if(H[F][6])Y===-1&&(Y=V);else if(Y>-1){for(J=Y;J<V;J++)$[J]=G;Y=-1}X[V]==="B"&&($[V]=0),K.hiLevel|=G}i&&(function(ne,ie,ce){for(var ge=0;ge<ce;ge++)if(ne[ge]==="S"){ie[ge]=C;for(var he=ge-1;he>=0&&ne[he]==="WS";he--)ie[he]=C}})(X,$,Q)},M=function(D,$,K,U,J){if(!(J.hiLevel<D)){if(D===1&&C===1&&!s)return $.reverse(),void(K&&K.reverse());for(var V,G,q,Y,Q=$.length,F=0;F<Q;){if(U[F]>=D){for(q=F+1;q<Q&&U[q]>=D;)q++;for(Y=F,G=q-1;Y<G;Y++,G--)V=$[Y],$[Y]=$[G],$[G]=V,K&&(V=K[Y],K[Y]=K[G],K[G]=V);F=q}F++}}},I=function(D,$,K){var U=D.split(""),J={hiLevel:C};return K||(K=[]),R(U,K,J),(function(V,G,q){if(q.hiLevel!==0&&f)for(var Y,Q=0;Q<V.length;Q++)G[Q]===1&&(Y=y.indexOf(V[Q]))>=0&&(V[Q]=y[Y+1])})(U,K,J),M(2,U,$,K,J),M(1,U,$,K,J),U.join("")};return this.__bidiEngine__.doBidiReorder=function(D,$,K){if((function(J,V){if(V)for(var G=0;G<J.length;G++)V[G]=G;l===void 0&&(l=S(J)),u===void 0&&(u=S(J))})(D,$),o||!d||u)if(o&&d&&l^u)C=l?1:0,D=O(D,$,K);else if(!o&&d&&u)C=l?1:0,D=I(D,$,K),D=O(D,$);else if(!o||l||d||u){if(o&&!d&&l^u)D=O(D,$),l?(C=0,D=I(D,$,K)):(C=1,D=I(D,$,K),D=O(D,$));else if(o&&l&&!d&&u)C=1,D=I(D,$,K),D=O(D,$);else if(!o&&!d&&l^u){var U=f;l?(C=1,D=I(D,$,K),C=0,f=!1,D=I(D,$,K),f=U):(C=0,D=I(D,$,K),D=O(D,$),C=1,f=!1,D=I(D,$,K),f=U,D=O(D,$))}}else C=0,D=I(D,$,K);else C=l?1:0,D=I(D,$,K);return D},this.__bidiEngine__.setOptions=function(D){D&&(o=D.isInputVisual,d=D.isOutputVisual,l=D.isInputRtl,u=D.isOutputRtl,f=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var s=a.text;a.x,a.y;var i=a.options||{};a.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);a.text=o}else a.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])})(ir),ir.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Sf(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new bTe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new iTe(this.contents),this.head=new lTe(this),this.name=new hTe(this),this.cmap=new pX(this),this.toUnicode={},this.hhea=new cTe(this),this.maxp=new mTe(this),this.hmtx=new pTe(this),this.post=new uTe(this),this.os2=new dTe(this),this.loca=new yTe(this),this.glyf=new gTe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,a,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,d,u;for(u=[],o=0,l=(d=this.bbox).length;o<l;o++)t=d[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(a=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,a){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+a*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e})();var Cc,Sf=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var r,a,s;for(s=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,a,s,i,o,l,d;return t=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^d)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*s+16777216*i+65536*o+256*l+d},e.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},e.prototype.write=function(t){var r,a,s,i;for(i=[],a=0,s=t.length;a<s;a++)r=t[a],i.push(this.writeByte(r));return i},e})(),iTe=(function(){var e;function t(r){var a,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,s,i,o,l,d,u,f,m,p,g,b,v;for(v in g=Object.keys(r).length,d=Math.log(2),m=16*Math.floor(Math.log(g)/d),o=Math.floor(m/d),f=16*g-m,(s=new Sf).writeInt(this.scalarType),s.writeShort(g),s.writeShort(m),s.writeShort(o),s.writeShort(f),i=16*g,u=s.pos+i,l=null,b=[],r)for(p=r[v],s.writeString(v),s.writeInt(e(p)),s.writeInt(u),s.writeInt(p.length),b=b.concat(p),v==="head"&&(l=u),u+=p.length;u%4;)b.push(0),u++;return s.write(b),a=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(a),s.data},e=function(r){var a,s,i,o;for(r=gX.call(r);r.length%4;)r.push(0);for(i=new Sf(r),s=0,a=0,o=r.length;a<o;a=a+=4)s+=i.readUInt32();return 4294967295&s},t})(),oTe={}.hasOwnProperty,gd=function(e,t){for(var r in t)oTe.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};Cc=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var lTe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return gd(e,Cc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Sf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),RF=(function(){function e(t,r){var a,s,i,o,l,d,u,f,m,p,g,b,v,y,j,_,C;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),m=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(g=t.readUInt16(),p=g/2,t.pos+=6,i=(function(){var A,S;for(S=[],d=A=0;0<=p?A<p:A>p;d=0<=p?++A:--A)S.push(t.readUInt16());return S})(),t.pos+=2,v=(function(){var A,S;for(S=[],d=A=0;0<=p?A<p:A>p;d=0<=p?++A:--A)S.push(t.readUInt16());return S})(),u=(function(){var A,S;for(S=[],d=A=0;0<=p?A<p:A>p;d=0<=p?++A:--A)S.push(t.readUInt16());return S})(),f=(function(){var A,S;for(S=[],d=A=0;0<=p?A<p:A>p;d=0<=p?++A:--A)S.push(t.readUInt16());return S})(),s=(this.length-t.pos+this.offset)/2,l=(function(){var A,S;for(S=[],d=A=0;0<=s?A<s:A>s;d=0<=s?++A:--A)S.push(t.readUInt16());return S})(),d=j=0,C=i.length;j<C;d=++j)for(y=i[d],a=_=b=v[d];b<=y?_<=y:_>=y;a=b<=y?++_:--_)f[d]===0?o=a+u[d]:(o=l[f[d]/2+(a-b)-(p-d)]||0)!==0&&(o+=u[d]),this.codeMap[a]=65535&o}t.pos=m}return e.encode=function(t,r){var a,s,i,o,l,d,u,f,m,p,g,b,v,y,j,_,C,A,S,T,O,R,M,I,D,$,K,U,J,V,G,q,Y,Q,F,z,H,X,ne,ie,ce,ge,he,ue,Se,je;switch(U=new Sf,o=Object.keys(t).sort(function(Be,$e){return Be-$e}),r){case"macroman":for(v=0,y=(function(){var Be=[];for(b=0;b<256;++b)Be.push(0);return Be})(),_={0:0},i={},J=0,Y=o.length;J<Y;J++)_[he=t[s=o[J]]]==null&&(_[he]=++v),i[s]={old:t[s],new:_[t[s]]},y[s]=_[t[s]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(y),{charMap:i,subtable:U.data,maxGlyphID:v+1};case"unicode":for($=[],m=[],C=0,_={},a={},j=u=null,V=0,Q=o.length;V<Q;V++)_[S=t[s=o[V]]]==null&&(_[S]=++C),a[s]={old:S,new:_[S]},l=_[S]-s,j!=null&&l===u||(j&&m.push(j),$.push(s),u=l),j=s;for(j&&m.push(j),m.push(65535),$.push(65535),I=2*(M=$.length),R=2*Math.pow(Math.log(M)/Math.LN2,2),p=Math.log(R/2)/Math.LN2,O=2*M-R,d=[],T=[],g=[],b=G=0,F=$.length;G<F;b=++G){if(D=$[b],f=m[b],D===65535){d.push(0),T.push(0);break}if(D-(K=a[D].new)>=32768)for(d.push(0),T.push(2*(g.length+M-b)),s=q=D;D<=f?q<=f:q>=f;s=D<=f?++q:--q)g.push(a[s].new);else d.push(K-D),T.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*M+2*g.length),U.writeUInt16(0),U.writeUInt16(I),U.writeUInt16(R),U.writeUInt16(p),U.writeUInt16(O),ce=0,z=m.length;ce<z;ce++)s=m[ce],U.writeUInt16(s);for(U.writeUInt16(0),ge=0,H=$.length;ge<H;ge++)s=$[ge],U.writeUInt16(s);for(ue=0,X=d.length;ue<X;ue++)l=d[ue],U.writeUInt16(l);for(Se=0,ne=T.length;Se<ne;Se++)A=T[Se],U.writeUInt16(A);for(je=0,ie=g.length;je<ie;je++)v=g[je],U.writeUInt16(v);return{charMap:a,subtable:U.data,maxGlyphID:C+1}}},e})(),pX=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return gd(e,Cc),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,a,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)r=new RF(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var a,s;return r==null&&(r="macroman"),a=RF.encode(t,r),(s=new Sf).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},e})(),cTe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return gd(e,Cc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),dTe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return gd(e,Cc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,a;for(a=[],r=0;r<10;++r)a.push(t.readByte());return a})(),this.charRange=(function(){var r,a;for(a=[],r=0;r<4;++r)a.push(t.readInt());return a})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(t.readInt());return a})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),uTe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return gd(e,Cc),e.prototype.tag="post",e.prototype.parse=function(t){var r,a,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(a=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return a=t.readUInt16(),this.offsets=t.read(a);case 262144:return this.map=(function(){var o,l,d;for(d=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)d.push(t.readUInt32());return d}).call(this)}},e})(),fTe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},hTe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return gd(e,Cc),e.prototype.tag="name",e.prototype.parse=function(t){var r,a,s,i,o,l,d,u,f,m,p;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),a=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)a.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(d={},i=f=0,m=a.length;f<m;i=++f)s=a[i],t.pos=s.offset,u=t.readString(s.length),o=new fTe(u,s),d[p=s.nameID]==null&&(d[p]=[]),d[s.nameID].push(o);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e})(),mTe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return gd(e,Cc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),pTe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return gd(e,Cc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,a,s,i,o,l,d;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,f;for(f=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)f.push(t.readInt16());return f})(),this.widths=(function(){var u,f,m,p;for(p=[],u=0,f=(m=this.metrics).length;u<f;u++)i=m[u],p.push(i.advance);return p}).call(this),a=this.widths[this.widths.length-1],d=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)d.push(this.widths.push(a));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),gX=[].slice,gTe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return gd(e,Cc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,a,s,i,o,l,d,u,f,m;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,a=i.indexOf(t),(s=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+a,o=(l=new Sf(r.read(s))).readShort(),u=l.readShort(),m=l.readShort(),d=l.readShort(),f=l.readShort(),this.cache[t]=o===-1?new vTe(l,u,m,d,f):new xTe(l,o,u,m,d,f),this.cache[t]))},e.prototype.encode=function(t,r,a){var s,i,o,l,d;for(o=[],i=[],l=0,d=r.length;l<d;l++)s=t[r[l]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},e})(),xTe=(function(){function e(t,r,a,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),vTe=(function(){function e(t,r,a,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,a;for(r=new Sf(gX.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),yTe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return gd(e,Cc),e.prototype.tag="loca",e.prototype.parse=function(t){var r,a;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<r.length&&r[i]==o){++i,a[o]=s;var l=this.offsets[o],d=this.offsets[o+1]-l;d>0&&(s+=d)}for(var u=new Array(4*a.length),f=0;f<a.length;++f)u[4*f+3]=255&a[f],u[4*f+2]=(65280&a[f])>>8,u[4*f+1]=(16711680&a[f])>>16,u[4*f]=(4278190080&a[f])>>24;return u},e})(),bTe=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,a,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=s[a];return t},e.prototype.glyphsFor=function(t){var r,a,s,i,o,l,d;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(a=s[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in d=this.glyphsFor(r))a=d[i],s[i]=a;return s},e.prototype.encode=function(t,r){var a,s,i,o,l,d,u,f,m,p,g,b,v,y,j;for(s in a=pX.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),g={0:0},j=a.charMap)g[(d=j[s]).old]=d.new;for(b in p=a.maxGlyphID,o)b in g||(g[b]=p++);return f=(function(_){var C,A;for(C in A={},_)A[_[C]]=C;return A})(g),m=Object.keys(f).sort(function(_,C){return _-C}),v=(function(){var _,C,A;for(A=[],_=0,C=m.length;_<C;_++)l=m[_],A.push(f[l]);return A})(),i=this.font.glyf.encode(o,v,g),u=this.font.loca.encode(i.offsets,v),y={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},e})();ir.API.PDFObject=(function(){var e;function t(){}return e=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,s,i,o;if(Array.isArray(r))return"["+(function(){var l,d,u;for(u=[],l=0,d=r.length;l<d;l++)a=r[l],u.push(t.convert(a));return u})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t})();function xX(e,t,r,a,s){a=a||{};var i=1.15,o=s.internal.scaleFactor,l=s.internal.getFontSize()/o,d=s.getLineHeightFactor?s.getLineHeightFactor():i,u=l*d,f=/\r\n|\r|\n/g,m="",p=1;if((a.valign==="middle"||a.valign==="bottom"||a.halign==="center"||a.halign==="right")&&(m=typeof e=="string"?e.split(f):e,p=m.length||1),r+=l*(2-i),a.valign==="middle"?r-=p/2*u:a.valign==="bottom"&&(r-=p*u),a.halign==="center"||a.halign==="right"){var g=l;if(a.halign==="center"&&(g*=.5),m&&p>=1){for(var b=0;b<m.length;b++)s.text(m[b],t-s.getStringUnitWidth(m[b])*g,r),r+=u;return s}t-=s.getStringUnitWidth(e)*g}return a.halign==="justify"?s.text(e,t,r,{maxWidth:a.maxWidth||100,align:"justify"}):s.text(e,t,r),s}var PF={},Tp=(function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:PF=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var a,s,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,d=o.fontName;if(t.font&&(d=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[d];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(d,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var f=e.unifyColor(t.fillColor);f&&(a=this.jsPDFDocument).setFillColor.apply(a,f),f=e.unifyColor(t.textColor),f&&(s=this.jsPDFDocument).setTextColor.apply(s,f),f=e.unifyColor(t.lineColor),f&&(i=this.jsPDFDocument).setDrawColor.apply(i,f),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,a){return this.jsPDFDocument.splitTextToSize(t,r,a)},e.prototype.rect=function(t,r,a,s,i){return this.jsPDFDocument.rect(t,r,a,s,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return PF||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e})(),Ik=function(e,t){return Ik=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},Ik(e,t)};function vX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ik(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var yX=(function(e){vX(t,e);function t(r){var a=e.call(this)||this;return a._element=r,a}return t})(Array);function jTe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function wTe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function pj(e,t,r){r.applyStyles(t,!0);var a=Array.isArray(e)?e:[e],s=a.map(function(i){return r.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return s}function bX(e,t,r,a){var s=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:s,lineColor:i});var o=jX(s,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),a.y-r.y,o)}function jX(e,t){var r=e>0,a=t||t===0;return r&&a?"DF":r?"S":a?"F":null}function W2(e,t){var r,a,s,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(a=e.top)!==null&&a!==void 0?a:t,right:(s=e.right)!==null&&s!==void 0?s:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function wX(e,t){var r=W2(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function NTe(e,t,r,a,s){var i={},o=1.3333333333333333,l=cA(t,function(C){return s.getComputedStyle(C).backgroundColor});l!=null&&(i.fillColor=l);var d=cA(t,function(C){return s.getComputedStyle(C).color});d!=null&&(i.textColor=d);var u=CTe(a,r);u&&(i.cellPadding=u);var f="borderTopColor",m=o*r,p=a.borderTopWidth;if(a.borderBottomWidth===p&&a.borderRightWidth===p&&a.borderLeftWidth===p){var g=(parseFloat(p)||0)/m;g&&(i.lineWidth=g)}else i.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/m,right:(parseFloat(a.borderRightWidth)||0)/m,bottom:(parseFloat(a.borderBottomWidth)||0)/m,left:(parseFloat(a.borderLeftWidth)||0)/m},i.lineWidth.top||(i.lineWidth.right?f="borderRightColor":i.lineWidth.bottom?f="borderBottomColor":i.lineWidth.left&&(f="borderLeftColor"));var b=cA(t,function(C){return s.getComputedStyle(C)[f]});b!=null&&(i.lineColor=b);var v=["left","right","center","justify"];v.indexOf(a.textAlign)!==-1&&(i.halign=a.textAlign),v=["middle","bottom","top"],v.indexOf(a.verticalAlign)!==-1&&(i.valign=a.verticalAlign);var y=parseInt(a.fontSize||"");isNaN(y)||(i.fontSize=y/o);var j=STe(a);j&&(i.fontStyle=j);var _=(a.fontFamily||"").toLowerCase();return e.indexOf(_)!==-1&&(i.font=_),i}function STe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function cA(e,t){var r=NX(e,t);if(!r)return null;var a=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var s=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],i=parseInt(a[4]);return i===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function NX(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:NX(e.parentElement,t):r}function CTe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],a=96/(72/t),s=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(l){return parseInt(l||"0")/a}),o=W2(i,0);return s>o.top&&(o.top=s),s>o.bottom&&(o.bottom=s),o}function SX(e,t,r,a,s){var i,o;a===void 0&&(a=!1),s===void 0&&(s=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var d=Object.keys(e.getFontList()),u=e.scaleFactor(),f=[],m=[],p=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:f,body:m,foot:p};for(var g=0;g<l.rows.length;g++){var b=l.rows[g],v=(o=(i=b==null?void 0:b.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),y=_Te(d,u,r,b,a,s);y&&(v==="thead"?f.push(y):v==="tfoot"?p.push(y):m.push(y))}return{head:f,body:m,foot:p}}function _Te(e,t,r,a,s,i){for(var o=new yX(a),l=0;l<a.cells.length;l++){var d=a.cells[l],u=r.getComputedStyle(d);if(s||u.display!=="none"){var f=void 0;i&&(f=NTe(e,d,t,u,r)),o.push({rowSpan:d.rowSpan,colSpan:d.colSpan,styles:f,_element:d,content:ATe(d)})}}var m=r.getComputedStyle(a);if(o.length>0&&(s||m.display!=="none"))return o}function ATe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function kTe(e,t,r){for(var a=0,s=[e,t,r];a<s.length;a++){var i=s[a];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function Zd(e,t,r,a,s){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(i[d]=l[d])}return i}function CX(e,t){var r=new Tp(e),a=r.getDocumentOptions(),s=r.getGlobalOptions();kTe(s,a,t);var i=Zd({},s,a,t),o;typeof window<"u"&&(o=window);var l=OTe(s,a,t),d=ETe(s,a,t),u=TTe(r,i),f=PTe(r,i,o);return{id:t.tableId,content:f,hooks:d,styles:l,settings:u}}function OTe(e,t,r){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(d){if(d==="columnStyles"){var u=e[d],f=t[d],m=r[d];a.columnStyles=Zd({},u,f,m)}else{var p=[e,t,r],g=p.map(function(b){return b[d]||{}});a[d]=Zd({},g[0],g[1],g[2])}},i=0,o=Object.keys(a);i<o.length;i++){var l=o[i];s(l)}return a}function ETe(e,t,r){for(var a=[e,t,r],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=a;i<o.length;i++){var l=o[i];l.didParseCell&&s.didParseCell.push(l.didParseCell),l.willDrawCell&&s.willDrawCell.push(l.willDrawCell),l.didDrawCell&&s.didDrawCell.push(l.didDrawCell),l.willDrawPage&&s.willDrawPage.push(l.willDrawPage),l.didDrawPage&&s.didDrawPage.push(l.didDrawPage)}return s}function TTe(e,t){var r,a,s,i,o,l,d,u,f,m,p,g,b=W2(t.margin,40/e.scaleFactor()),v=(r=RTe(e,t.startY))!==null&&r!==void 0?r:b.top,y;t.showFoot===!0?y="everyPage":t.showFoot===!1?y="never":y=(a=t.showFoot)!==null&&a!==void 0?a:"everyPage";var j;t.showHead===!0?j="everyPage":t.showHead===!1?j="never":j=(s=t.showHead)!==null&&s!==void 0?s:"everyPage";var _=(i=t.useCss)!==null&&i!==void 0?i:!1,C=t.theme||(_?"plain":"striped"),A=!!t.horizontalPageBreak,S=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:_,theme:C,startY:v,margin:b,pageBreak:(d=t.pageBreak)!==null&&d!==void 0?d:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(f=t.tableWidth)!==null&&f!==void 0?f:"auto",showHead:j,showFoot:y,tableLineWidth:(m=t.tableLineWidth)!==null&&m!==void 0?m:0,tableLineColor:(p=t.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:A,horizontalPageBreakRepeat:S,horizontalPageBreakBehaviour:(g=t.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function RTe(e,t){var r=e.getLastAutoTable(),a=e.scaleFactor(),s=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;i=o===s}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/a:null}function PTe(e,t,r){var a=t.head||[],s=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=SX(e,t.html,r,o,t.useCss)||{};a=l.head||a,s=l.body||a,i=l.foot||a}else console.error("Cannot parse html in non browser environment")}var d=t.columns||MTe(a,s,i);return{columns:d,head:a,body:s,foot:i}}function MTe(e,t,r){var a=e[0]||t[0]||r[0]||[],s=[];return Object.keys(a).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(a)?l=a[parseInt(i)]:l=a[i],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var d=0;d<o;d++){var u=void 0;Array.isArray(a)?u=s.length:u=i+(d>0?"_".concat(d):"");var f={dataKey:u};s.push(f)}}),s}var $k=(function(){function e(t,r,a){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=a,this.doc=t.getDocument()}return e})(),DTe=(function(e){vX(t,e);function t(r,a,s,i,o,l){var d=e.call(this,r,a,l)||this;return d.cell=s,d.row=i,d.column=o,d.section=i.section,d}return t})($k),LTe=(function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,a,s,i,o){for(var l=0,d=r;l<d.length;l++){var u=d[l],f=new DTe(t,this,a,s,i,o),m=u(f)===!1;if(a.text=Array.isArray(a.text)?a.text:[a.text],m)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var a=0,s=this.hooks.didDrawPage;a<s.length;a++){var i=s[a];i(new $k(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var a=0,s=this.hooks.willDrawPage;a<s.length;a++){var i=s[a];i(new $k(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(s,i){return s+i.wrappedWidth},0);return r}else{var a=this.settings.margin;return t-a.left-a.right}},e})(),_X=(function(){function e(t,r,a,s,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof yX&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=a,this.cells=s,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(a,s){var i;return Math.max(a,((i=r.cells[s.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(a){var s=r.cells[a.index];return s?s.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var a=this;return t.reduce(function(s,i){var o=a.cells[i.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),d=o.padding("vertical"),u=d+l;return u>s?u:s},0)},e})(),AX=(function(){function e(t,r,a){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=a,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(s=t.content)!==null&&s!==void 0?s:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var a;if(this.styles.halign==="right")a=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");a=this.x+s/2+this.padding("left")}else a=this.x+this.padding("left");return{x:a,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var a=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/t*r,i=a*s+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=W2(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e})(),ITe=(function(){function e(t,r,a){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=a}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,a=0,s=t.allRows();a<s.length;a++){var i=s[a],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e})();function $Te(e,t){FTe(e,t);var r=[],a=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,r.push(i)),a+=i.width});var s=t.getWidth(e.pageSize().width)-a;s&&(s=Fk(r,s,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),s&&(s=Fk(r,s,function(i){return i.minWidth})),s=Math.abs(s),!t.settings.horizontalPageBreak&&s>.1/e.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),zTe(t),qTe(t,e),BTe(t)}function FTe(e,t){var r=e.scaleFactor(),a=t.settings.horizontalPageBreak,s=wX(e,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var d=l[o],u=i.cells[d.index];if(u){var f=t.hooks.didParseCell;t.callCellHooks(e,f,u,i,d,null);var m=u.padding("horizontal");u.contentWidth=pj(u.text,u.styles,e)+m;var p=pj(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||a===!0)u.contentWidth>s?(u.minWidth=s,u.wrappedWidth=s):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var g=10/r;u.minWidth=u.styles.minCellWidth||g,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var d=l[o],u=i.cells[d.index];if(u&&u.colSpan===1)d.wrappedWidth=Math.max(d.wrappedWidth,u.wrappedWidth),d.minWidth=Math.max(d.minWidth,u.minWidth),d.minReadableWidth=Math.max(d.minReadableWidth,u.minReadableWidth);else{var f=t.styles.columnStyles[d.dataKey]||t.styles.columnStyles[d.index]||{},m=f.cellWidth||f.minCellWidth;m&&typeof m=="number"&&(d.minWidth=m,d.wrappedWidth=m)}u&&(u.colSpan>1&&!d.minWidth&&(d.minWidth=u.minWidth),u.colSpan>1&&!d.wrappedWidth&&(d.wrappedWidth=u.minWidth))}})}function Fk(e,t,r){for(var a=t,s=e.reduce(function(g,b){return g+b.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],l=o.wrappedWidth/s,d=a*l,u=o.width+d,f=r(o),m=u<f?f:u;t-=m-o.width,o.width=m}if(t=Math.round(t*1e10)/1e10,t){var p=e.filter(function(g){return t<0?g.width>r(g):!0});p.length&&(t=Fk(p,t,r))}return t}function BTe(e){for(var t={},r=1,a=e.allRows(),s=0;s<a.length;s++)for(var i=a[s],o=0,l=e.columns;o<l.length;o++){var d=l[o],u=t[d.index];if(r>1)r--,delete i.cells[d.index];else if(u)u.cell.height+=i.height,r=u.cell.colSpan,delete i.cells[d.index],u.left--,u.left<=1&&delete t[d.index];else{var f=i.cells[d.index];if(!f)continue;if(f.height=i.height,f.rowSpan>1){var m=a.length-s,p=f.rowSpan>m?m:f.rowSpan;t[d.index]={cell:f,left:p,row:i}}}}}function zTe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var a=t[r],s=null,i=0,o=0,l=0;l<e.columns.length;l++){var d=e.columns[l];if(o-=1,o>1&&e.columns[l+1])i+=d.width,delete a.cells[d.index];else if(s){var u=s;delete a.cells[d.index],s=null,u.width=d.width+i}else{var u=a.cells[d.index];if(!u)continue;if(o=u.colSpan,i=0,u.colSpan>1){s=u,i+=d.width;continue}u.width=d.width+i}}}function qTe(e,t){for(var r={count:0,height:0},a=0,s=e.allRows();a<s.length;a++){for(var i=s[a],o=0,l=e.columns;o<l.length;o++){var d=l[o],u=i.cells[d.index];if(u){t.applyStyles(u.styles,!0);var f=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,f+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=MF(u.text,f,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=MF(u.text,f,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var m=u.styles.overflow(u.text,f);typeof m=="string"?u.text=[m]:u.text=m}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<p*u.rowSpan?r={height:p,count:u.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>i.height&&(i.height=p)}}r.count--}}function MF(e,t,r,a,s){return e.map(function(i){return UTe(i,t,r,a,s)})}function UTe(e,t,r,a,s){var i=1e4*a.scaleFactor();if(t=Math.ceil(t*i)/i,t>=pj(e,r,a))return e;for(;t<pj(e+s,r,a)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+s}function kX(e,t){var r=new Tp(e),a=VTe(t,r.scaleFactor()),s=new LTe(t,a);return $Te(r,s),r.applyStyles(r.userStyles),s}function VTe(e,t){var r=e.content,a=GTe(r.columns);if(r.head.length===0){var s=DF(a,"head");s&&r.head.push(s)}if(r.foot.length===0){var s=DF(a,"foot");s&&r.foot.push(s)}var i=e.settings.theme,o=e.styles;return{columns:a,head:dA("head",r.head,a,o,i,t),body:dA("body",r.body,a,o,i,t),foot:dA("foot",r.foot,a,o,i,t)}}function dA(e,t,r,a,s,i){var o={},l=t.map(function(d,u){for(var f=0,m={},p=0,g=0,b=0,v=r;b<v.length;b++){var y=v[b];if(o[y.index]==null||o[y.index].left===0)if(g===0){var j=void 0;Array.isArray(d)?j=d[y.index-p-f]:j=d[y.dataKey];var _={};typeof j=="object"&&!Array.isArray(j)&&(_=(j==null?void 0:j.styles)||{});var C=WTe(e,y,u,s,a,i,_),A=new AX(j,C,e);m[y.dataKey]=A,m[y.index]=A,g=A.colSpan-1,o[y.index]={left:A.rowSpan-1,times:g}}else g--,p++;else o[y.index].left--,g=o[y.index].times,f++}return new _X(d,u,e,m)});return l}function DF(e,t){var r={};return e.forEach(function(a){if(a.raw!=null){var s=HTe(t,a.raw);s!=null&&(r[a.dataKey]=s)}}),Object.keys(r).length>0?r:null}function HTe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function GTe(e){return e.map(function(t,r){var a,s;return typeof t=="object"?s=(a=t.dataKey)!==null&&a!==void 0?a:r:s=r,new ITe(s,t,r)})}function WTe(e,t,r,a,s,i,o){var l=wTe(a),d;e==="head"?d=s.headStyles:e==="body"?d=s.bodyStyles:e==="foot"&&(d=s.footStyles);var u=Zd({},l.table,l[e],s.styles,d),f=s.columnStyles[t.dataKey]||s.columnStyles[t.index]||{},m=e==="body"?f:{},p=e==="body"&&r%2===0?Zd({},l.alternateRow,s.alternateRowStyles):{},g=jTe(i),b=Zd({},g,u,p,m);return Zd(b,o)}function KTe(e,t,r){var a;r===void 0&&(r={});var s=wX(e,t),i=new Map,o=[],l=[],d=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?d=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(d=[t.settings.horizontalPageBreakRepeat]),d.forEach(function(p){var g=t.columns.find(function(b){return b.dataKey===p||b.index===p});g&&!i.has(g.index)&&(i.set(g.index,!0),o.push(g.index),l.push(t.columns[g.index]),s-=g.wrappedWidth)});for(var u=!0,f=(a=r==null?void 0:r.start)!==null&&a!==void 0?a:0;f<t.columns.length;){if(i.has(f)){f++;continue}var m=t.columns[f].wrappedWidth;if(u||s>=m)u=!1,o.push(f),l.push(t.columns[f]),s-=m;else break;f++}return{colIndexes:o,columns:l,lastIndex:f-1}}function YTe(e,t){for(var r=[],a=0;a<t.columns.length;a++){var s=KTe(e,t,{start:a});s.columns.length&&(r.push(s),a=s.lastIndex)}return r}function OX(e,t){var r=t.settings,a=r.startY,s=r.margin,i={x:s.left,y:a},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=a+s.bottom+o;if(r.pageBreak==="avoid"){var d=t.body,u=d.reduce(function(p,g){return p+g.height},0);l+=u}var f=new Tp(e);(r.pageBreak==="always"||r.startY!=null&&l>f.pageSize().height)&&(TX(f),i.y=s.top),t.callWillDrawPageHooks(f,i);var m=Zd({},i);t.startPageNumber=f.pageNumber(),r.horizontalPageBreak?XTe(f,t,m,i):(f.applyStyles(f.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(p){return mu(f,t,p,i,t.columns)}),f.applyStyles(f.userStyles),t.body.forEach(function(p,g){var b=g===t.body.length-1;gj(f,t,p,b,m,i,t.columns)}),f.applyStyles(f.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(p){return mu(f,t,p,i,t.columns)})),bX(f,t,m,i),t.callEndPageHooks(f,i),t.finalY=i.y,e.lastAutoTable=t,f.applyStyles(f.userStyles)}function XTe(e,t,r,a){var s=YTe(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(u,f){e.applyStyles(e.userStyles),f>0?pv(e,t,r,a,u.columns,!0):LF(e,t,a,u.columns),JTe(e,t,r,a,u.columns),uA(e,t,a,u.columns)});else for(var o=-1,l=s[0],d=function(){var u=o;if(l){e.applyStyles(e.userStyles);var f=l.columns;o>=0?pv(e,t,r,a,f,!0):LF(e,t,a,f),u=IF(e,t,o+1,a,f),uA(e,t,a,f)}var m=u-o;s.slice(1).forEach(function(p){e.applyStyles(e.userStyles),pv(e,t,r,a,p.columns,!0),IF(e,t,o+1,a,p.columns,m),uA(e,t,a,p.columns)}),o=u};o<t.body.length-1;)d()}function LF(e,t,r,a){var s=t.settings;e.applyStyles(e.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&t.head.forEach(function(i){return mu(e,t,i,r,a)})}function JTe(e,t,r,a,s){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;gj(e,t,i,l,r,a,s)})}function IF(e,t,r,a,s,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(r+i,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(d,u){var f=r+u===t.body.length-1,m=EX(e,t,f,a);d.canEntireRowFit(m,s)&&(mu(e,t,d,a,s),l=r+u)}),l}function uA(e,t,r,a){var s=t.settings;e.applyStyles(e.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&t.foot.forEach(function(i){return mu(e,t,i,r,a)})}function ZTe(e,t,r){var a=r.getLineHeight(e.styles.fontSize),s=e.padding("vertical"),i=Math.floor((t-s)/a);return Math.max(0,i)}function QTe(e,t,r,a){var s={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,l=r.columns;o<l.length;o++){var d=l[o],u=e.cells[d.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var f=new AX(u.raw,u.styles,u.section);f=Zd(f,u),f.text=[];var m=ZTe(u,t,a);u.text.length>m&&(f.text=u.text.splice(m,u.text.length));var p=a.scaleFactor(),g=a.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,g),u.contentHeight>=t&&(u.contentHeight=t,f.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),f.contentHeight=f.getContentHeight(p,g),f.contentHeight>i&&(i=f.contentHeight),s[d.index]=f}}var b=new _X(e.raw,-1,e.section,s,!0);b.height=i;for(var v=0,y=r.columns;v<y.length;v++){var d=y[v],f=b.cells[d.index];f&&(f.height=b.height);var u=e.cells[d.index];u&&(u.height=e.height)}return b}function eRe(e,t,r,a){var s=e.pageSize().height,i=a.settings.margin,o=i.top+i.bottom,l=s-o;t.section==="body"&&(l-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var d=t.getMinimumRowHeight(a.columns,e),u=d<r;if(d>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var f=t.hasRowSpan(a.columns),m=t.getMaxCellHeight(a.columns)>l;return m?(f&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(f||a.settings.rowPageBreak==="avoid")}function gj(e,t,r,a,s,i,o){var l=EX(e,t,a,i);if(r.canEntireRowFit(l,o))mu(e,t,r,i,o);else if(eRe(e,r,l,t)){var d=QTe(r,l,t,e);mu(e,t,r,i,o),pv(e,t,s,i,o),gj(e,t,d,a,s,i,o)}else pv(e,t,s,i,o),gj(e,t,r,a,s,i,o)}function mu(e,t,r,a,s){a.x=t.settings.margin.left;for(var i=0,o=s;i<o.length;i++){var l=o[i],d=r.cells[l.index];if(!d){a.x+=l.width;continue}e.applyStyles(d.styles),d.x=a.x,d.y=a.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,d,r,l,a);if(u===!1){a.x+=l.width;continue}tRe(e,d,a);var f=d.getTextPos();xX(d.text,f.x,f.y,{halign:d.styles.halign,valign:d.styles.valign,maxWidth:Math.ceil(d.width-d.padding("left")-d.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,d,r,l,a),a.x+=l.width}a.y+=r.height}function tRe(e,t,r){var a=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof a.lineWidth=="number"){var s=jX(a.lineWidth,a.fillColor);s&&e.rect(t.x,r.y,t.width,t.height,s)}else typeof a.lineWidth=="object"&&(a.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),rRe(e,t,r,a.lineWidth))}function rRe(e,t,r,a){var s,i,o,l;a.top&&(s=r.x,i=r.y,o=r.x+t.width,l=r.y,a.right&&(o+=.5*a.right),a.left&&(s-=.5*a.left),d(a.top,s,i,o,l)),a.bottom&&(s=r.x,i=r.y+t.height,o=r.x+t.width,l=r.y+t.height,a.right&&(o+=.5*a.right),a.left&&(s-=.5*a.left),d(a.bottom,s,i,o,l)),a.left&&(s=r.x,i=r.y,o=r.x,l=r.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(l+=.5*a.bottom),d(a.left,s,i,o,l)),a.right&&(s=r.x+t.width,i=r.y,o=r.x+t.width,l=r.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(l+=.5*a.bottom),d(a.right,s,i,o,l));function d(u,f,m,p,g){e.getDocument().setLineWidth(u),e.getDocument().line(f,m,p,g,"S")}}function EX(e,t,r,a){var s=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(s+=t.getFootHeight(t.columns)),e.pageSize().height-a.y-s}function pv(e,t,r,a,s,i){s===void 0&&(s=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return mu(e,t,l,a,s)}),t.callEndPageHooks(e,a);var o=t.settings.margin;bX(e,t,r,a),TX(e),t.pageNumber++,a.x=o.left,a.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,a),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return mu(e,t,l,a,s)}),e.applyStyles(e.userStyles))}function TX(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function nRe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=t[0],s=CX(this,a),i=kX(this,s);return OX(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,a,s){xX(t,r,a,s,this)},e.API.autoTableSetDefaults=function(t){return Tp.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Tp.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var a;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Tp(this),i=SX(s,t,window,r,!1),o=i.head,l=i.body,d=((a=o[0])===null||a===void 0?void 0:a.map(function(u){return u.content}))||[];return{columns:d,rows:l,data:l}}}var fA;function hA(e,t){var r=CX(e,t),a=kX(e,r);OX(e,a)}try{if(typeof window<"u"&&window){var $F=window,FF=$F.jsPDF||((fA=$F.jspdf)===null||fA===void 0?void 0:fA.jsPDF);FF&&nRe(FF)}}catch(e){console.error("Could not apply autoTable plugin",e)}const BF=[{id:"executive",name:"Executive Summary",subject:"Portfolio Brief: {portfolioName}",body:`Dear Executive Team,

Please find attached the portfolio brief for {portfolioName}.

Key Highlights:
 Total Expected Value: {totalEV}
 Diversification Index: {diversification}
 Antifragility Score: {antifragility}

Best regards`},{id:"board",name:"Board Report",subject:"Board Report: {portfolioName} Portfolio Analysis",body:`Dear Board Members,

Attached is the comprehensive portfolio analysis for {portfolioName}.

This report includes:
 Aggregate metrics across all decisions
 Top portfolio drivers
 Risk assessment breakdown

Please review before our next meeting.

Best regards`},{id:"stakeholder",name:"Stakeholder Update",subject:"{portfolioName} - Portfolio Update",body:`Hello,

I'm sharing an update on the {portfolioName} portfolio.

The attached brief provides:
 Current portfolio performance
 Decision breakdown
 Key risk factors

Please let me know if you have any questions.

Best regards`},{id:"custom",name:"Custom",subject:"",body:""}];function aRe({open:e,onOpenChange:t,portfolioName:r,onSendEmail:a,onAuditEvent:s}){const{tenant:i}=Fr(),[o,l]=N.useState([]),[d,u]=N.useState(""),[f,m]=N.useState("executive"),[p,g]=N.useState(""),[b,v]=N.useState(""),[y,j]=N.useState(!1),_=Wh(i.tenantId),C=R=>{m(R);const M=BF.find(I=>I.id===R);M&&R!=="custom"&&(g(M.subject.replace("{portfolioName}",r)),v(M.body.replace("{portfolioName}",r)))},A=()=>{const R=d.trim();R&&!o.includes(R)&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(R)&&(l([...o,R]),u(""))},S=R=>{l(o.filter(M=>M!==R))},T=R=>{const M=R.recipients.map(I=>I.email).filter(I=>!o.includes(I));l([...o,...M])},O=async()=>{if(!(o.length===0||!p||!b)){j(!0);try{await a(o,p,b,f),s==null||s("portfolio.brief.emailed",{portfolioName:r,recipients:o.length,template:f}),l([]),u(""),m("executive"),g(""),v(""),t(!1)}catch(R){console.error("Failed to send email:",R)}finally{j(!1)}}};return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(Xh,{className:"w-5 h-5"}),"Email Portfolio Brief"]}),n.jsxs(Sr,{children:["Send ",r," portfolio brief to stakeholders"]})]}),n.jsxs(si,{defaultValue:"compose",className:"w-full",children:[n.jsxs(zs,{className:"grid w-full grid-cols-2",children:[n.jsx(hr,{value:"compose",children:"Compose"}),n.jsxs(hr,{value:"recipients",children:["Recipients (",o.length,")"]})]}),n.jsxs(Cr,{value:"compose",className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Email Template"}),n.jsxs(Et,{value:f,onValueChange:C,children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Select template"})}),n.jsx(Ot,{children:BF.map(R=>n.jsx(we,{value:R.id,children:R.name},R.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"subject",children:"Subject"}),n.jsx(et,{id:"subject",value:p,onChange:R=>g(R.target.value),placeholder:"Email subject"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"message",children:"Message"}),n.jsx(ua,{id:"message",value:b,onChange:R=>v(R.target.value),placeholder:"Email message",rows:10}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"The portfolio brief will be attached as a PDF"})]})]}),n.jsxs(Cr,{value:"recipients",className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"recipient",children:"Add Recipient"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(et,{id:"recipient",value:d,onChange:R=>u(R.target.value),onKeyDown:R=>{R.key==="Enter"&&(R.preventDefault(),A())},placeholder:"email@example.com"}),n.jsx(le,{onClick:A,children:"Add"})]})]}),_.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Distribution Lists"}),n.jsx("div",{className:"grid grid-cols-1 gap-2",children:_.map(R=>n.jsx(Ae,{className:"cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>T(R),children:n.jsxs(He,{className:"p-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Uo,{className:"w-4 h-4 text-muted-foreground"}),n.jsx(Ge,{className:"text-sm",children:R.name})]}),n.jsx(be,{variant:"secondary",children:R.recipients.length})]}),R.description&&n.jsx(mt,{className:"text-xs",children:R.description})]})},R.id))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ne,{children:["Current Recipients (",o.length,")"]}),o.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No recipients added yet"}):n.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(R=>n.jsxs(be,{variant:"secondary",className:"flex items-center gap-1",children:[R,n.jsx("button",{onClick:()=>S(R),className:"ml-1 hover:text-destructive",children:n.jsx(Ui,{className:"w-3 h-3"})})]},R))})]})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),n.jsx(le,{onClick:O,disabled:o.length===0||!p||!b||y,children:y?"Sending...":`Send to ${o.length} recipient${o.length!==1?"s":""}`})]})]})})}function sRe({open:e,onOpenChange:t,portfolio:r,decisions:a,onAuditEvent:s}){const{tenant:i}=Fr(),[o,l]=N.useState(null),[d,u]=N.useState(!1),[f,m]=N.useState("summary"),[p,g]=N.useState(!1);N.useEffect(()=>{e&&b()},[e,r,a]);const b=()=>{var j,_,C,A;u(!0);try{const S=a.filter(q=>r.decision_ids.includes(q.id)&&q.status==="closed"&&q.metrics);if(S.length===0){l(null),u(!1);return}const T=S.map(q=>{var Q,F,z,H;const Y=q.options.find(X=>X.id===q.chosenOptionId);return{decisionId:q.id,decisionTitle:q.title,chosenOption:(Y==null?void 0:Y.label)||"Unknown",metrics:{ev:((Q=q.metrics)==null?void 0:Q.ev)||0,var95:((F=q.metrics)==null?void 0:F.var95)||0,raroc:((z=q.metrics)==null?void 0:z.raroc)||0,ce:((H=q.metrics)==null?void 0:H.ce)||0},topSensitiveFactors:q.topSensitiveFactors||[],creditRiskScore:q.creditRiskScore}}),O=T.reduce((q,Y)=>q+Y.metrics.ev,0),R=T.reduce((q,Y)=>q+Y.metrics.raroc,0)/T.length,M=((j=r.metrics)==null?void 0:j.aggregate_var95)||0,I=((_=r.metrics)==null?void 0:_.aggregate_cvar95)||0,D=((C=r.metrics)==null?void 0:C.diversification_index)||0,$=((A=r.metrics)==null?void 0:A.antifragility_score)||0,K=new Map;T.forEach(q=>{var Y;(Y=q.topSensitiveFactors)==null||Y.forEach(Q=>{const F=K.get(Q.paramName)||{totalImpact:0,decisions:new Set};F.totalImpact+=Math.abs(Q.impact),F.decisions.add(q.decisionTitle),K.set(Q.paramName,F)})});const U=Array.from(K.entries()).map(([q,{totalImpact:Y,decisions:Q}])=>({paramName:q,impact:Y,affectedDecisions:Array.from(Q)})).sort((q,Y)=>Y.impact-q.impact).slice(0,5),J=T.filter(q=>q.metrics.raroc<.1).map(q=>q.decisionTitle),V=T.filter(q=>q.metrics.raroc>=.1&&q.metrics.raroc<.15).map(q=>q.decisionTitle),G=T.filter(q=>q.metrics.raroc>=.15).map(q=>q.decisionTitle);l({portfolio:r,decisions:T,aggregateMetrics:{totalEV:O,portfolioVaR95:M,portfolioCVaR95:I,avgRAROC:R,diversificationIndex:D,antifragilityScore:$},topPortfolioDrivers:U,riskAssessment:{highRiskDecisions:J,mediumRiskDecisions:V,lowRiskDecisions:G}}),s==null||s("portfolio.brief.generated",{portfolioId:r.id,portfolioName:r.portfolio_name,decisionsIncluded:T.length,totalEV:O,avgRAROC:R})}catch(S){console.error("Failed to generate portfolio brief:",S)}finally{u(!1)}},v=()=>{if(o)try{const j=new ir,_=j.internal.pageSize.getWidth(),C=j.internal.pageSize.getHeight();let A=20;j.setFontSize(20),j.setFont("helvetica","bold"),j.text("Portfolio Brief",_/2,A,{align:"center"}),A+=10,j.setFontSize(16),j.text(r.portfolio_name,_/2,A,{align:"center"}),A+=15,j.setFontSize(14),j.setFont("helvetica","bold"),j.text("Portfolio Metrics",14,A),A+=8,j.setFontSize(10),j.setFont("helvetica","normal");const S=[["Total Expected Value",`${o.aggregateMetrics.totalEV.toFixed(0)}`],["Portfolio VaR95",`${o.aggregateMetrics.portfolioVaR95.toFixed(0)}`],["Portfolio CVaR95",`${o.aggregateMetrics.portfolioCVaR95.toFixed(0)}`],["Average RAROC",`${(o.aggregateMetrics.avgRAROC*100).toFixed(1)}%`],["Diversification Index",`${(o.aggregateMetrics.diversificationIndex*100).toFixed(0)}%`],["Antifragility Score",`${o.aggregateMetrics.antifragilityScore.toFixed(0)}/100`]];if(hA(j,{startY:A,head:[["Metric","Value"]],body:S,theme:"grid",headStyles:{fillColor:[41,128,185]}}),A=j.lastAutoTable.finalY+15,A>C-60&&(j.addPage(),A=20),j.setFontSize(14),j.setFont("helvetica","bold"),j.text("Top Portfolio Drivers",14,A),A+=8,o.topPortfolioDrivers.length>0){const R=o.topPortfolioDrivers.map(M=>[M.paramName,`${Math.abs(M.impact).toFixed(1)}%`,M.affectedDecisions.join(", ")]);hA(j,{startY:A,head:[["Parameter","Impact","Affected Decisions"]],body:R,theme:"grid",headStyles:{fillColor:[41,128,185]}}),A=j.lastAutoTable.finalY+15}A>C-60&&(j.addPage(),A=20),j.setFontSize(14),j.setFont("helvetica","bold"),j.text("Decision Breakdown",14,A),A+=8;const T=o.decisions.map(R=>[R.decisionTitle,R.chosenOption,`${R.metrics.ev.toFixed(0)}`,`${R.metrics.var95.toFixed(0)}`,`${(R.metrics.raroc*100).toFixed(1)}%`]);hA(j,{startY:A,head:[["Decision","Chosen Option","EV","VaR95","RAROC"]],body:T,theme:"grid",headStyles:{fillColor:[41,128,185]}});const O=j.getNumberOfPages();for(let R=1;R<=O;R++)j.setPage(R),j.setFontSize(8),j.setFont("helvetica","normal"),j.text(`Generated: ${new Date().toLocaleString()} | Page ${R} of ${O}`,_/2,C-10,{align:"center"});j.save(`portfolio-brief-${r.portfolio_name.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.pdf`),s==null||s("portfolio.brief.exported",{portfolioId:r.id,portfolioName:r.portfolio_name,format:"pdf"})}catch(j){console.error("Failed to generate PDF:",j),alert("Failed to generate PDF. See console for details.")}},y=async(j,_,C,A)=>{console.log("Sending email:",{recipients:j,subject:_,message:C,template:A,portfolio:r.portfolio_name}),await new Promise(S=>setTimeout(S,1e3)),s==null||s("portfolio.brief.emailed",{portfolioId:r.id,portfolioName:r.portfolio_name,recipients:j.length,template:A}),alert(`Email sent to ${j.length} recipient(s)!`)};return!o&&!d?n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Portfolio Brief"}),n.jsxs(Sr,{children:["No data available for ",r.portfolio_name]})]}),n.jsx("div",{className:"text-sm text-muted-foreground text-center py-8",children:n.jsx("p",{children:"No closed decisions with metrics found in this portfolio. Close and simulate decisions first."})}),n.jsx(bn,{children:n.jsx(le,{variant:"outline",onClick:()=>t(!1),children:"Close"})})]})}):n.jsxs(Nr,{open:e,onOpenChange:t,children:[n.jsxs(gr,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[n.jsx(xr,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs(vr,{className:"text-2xl",children:["Portfolio Brief: ",r.portfolio_name]}),n.jsxs(Sr,{children:["Quick take for the Board  ",(o==null?void 0:o.decisions.length)||0," ","decisions analyzed"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(le,{size:"sm",variant:"outline",onClick:v,disabled:d,children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"PDF"]}),n.jsxs(le,{size:"sm",variant:"outline",onClick:()=>g(!0),disabled:d,children:[n.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Email"]})]})]})}),d?n.jsx("div",{className:"py-12 text-center",children:n.jsx("div",{className:"text-muted-foreground",children:"Generating brief..."})}):o?n.jsxs(si,{value:f,onValueChange:m,children:[n.jsxs(zs,{className:"grid w-full grid-cols-4",children:[n.jsx(hr,{value:"summary",children:"Summary"}),n.jsx(hr,{value:"drivers",children:"Top Drivers"}),n.jsx(hr,{value:"decisions",children:"Decisions"}),n.jsx(hr,{value:"risks",children:"Risk Assessment"})]}),n.jsxs(Cr,{value:"summary",className:"space-y-4",children:[n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{className:"text-base",children:"Portfolio Metrics"}),n.jsx(mt,{children:"Aggregated performance across all decisions"})]}),n.jsx(Re,{children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Total Expected Value"}),n.jsxs("div",{className:"text-2xl font-bold",children:["$",o.aggregateMetrics.totalEV.toFixed(0)]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Portfolio VaR95"}),n.jsxs("div",{className:"text-2xl font-bold",children:["$",o.aggregateMetrics.portfolioVaR95.toFixed(0)]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Avg RAROC"}),n.jsxs("div",{className:"text-2xl font-bold",children:[(o.aggregateMetrics.avgRAROC*100).toFixed(1),"%"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Diversification"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"text-2xl font-bold",children:[(o.aggregateMetrics.diversificationIndex*100).toFixed(0),"%"]}),n.jsx(be,{variant:o.aggregateMetrics.diversificationIndex>=.7?"default":o.aggregateMetrics.diversificationIndex>=.4?"secondary":"destructive",children:o.aggregateMetrics.diversificationIndex>=.7?"High":o.aggregateMetrics.diversificationIndex>=.4?"Medium":"Low"})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Antifragility Score"}),n.jsxs("div",{className:"text-2xl font-bold",children:[o.aggregateMetrics.antifragilityScore.toFixed(0),"/100"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Decisions"}),n.jsx("div",{className:"text-2xl font-bold",children:o.decisions.length})]})]})})]}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-base",children:"Portfolio Description"})}),n.jsxs(Re,{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Description"}),n.jsx("div",{className:"text-sm",children:r.description})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Owner:"})," ",n.jsx("span",{className:"font-medium",children:r.owner})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Time Horizon:"})," ",n.jsxs("span",{className:"font-medium",children:[r.time_horizon_months," months"]})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Goal Alignment"}),n.jsx("div",{className:"text-sm",children:r.goal_alignment})]})]})]})]}),n.jsx(Cr,{value:"drivers",className:"space-y-4",children:n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{className:"text-base",children:"Top Portfolio Drivers"}),n.jsx(mt,{children:"Combined sensitivity factors across all decisions"})]}),n.jsx(Re,{children:o.topPortfolioDrivers.length===0?n.jsx("div",{className:"text-sm text-muted-foreground text-center py-8",children:"No sensitivity data available"}):n.jsx("div",{className:"space-y-3",children:o.topPortfolioDrivers.map((j,_)=>n.jsxs("div",{className:"p-3 border border-border rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:_+1}),n.jsx("div",{className:"font-semibold",children:j.paramName})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[j.impact>0?n.jsx($r,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):n.jsx(fa,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),n.jsxs("div",{className:"text-sm font-semibold",children:[Math.abs(j.impact).toFixed(1),"%"]})]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Affects ",j.affectedDecisions.length," decision",j.affectedDecisions.length!==1?"s":"",": ",j.affectedDecisions.join(", ")]})]},j.paramName))})})]})}),n.jsx(Cr,{value:"decisions",className:"space-y-4",children:n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{className:"text-base",children:"Decision Breakdown"}),n.jsx(mt,{children:"Individual decision metrics and chosen options"})]}),n.jsx(Re,{children:n.jsx("div",{className:"space-y-3",children:o.decisions.map(j=>n.jsxs("div",{className:"p-3 border border-border rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold text-sm",children:j.decisionTitle}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Chosen: ",j.chosenOption]})]}),n.jsxs(be,{variant:j.metrics.raroc>=.15?"default":j.metrics.raroc>=.1?"secondary":"destructive",children:["RAROC: ",(j.metrics.raroc*100).toFixed(1),"%"]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"EV"}),n.jsxs("div",{className:"font-semibold",children:["$",j.metrics.ev.toFixed(0)]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"VaR95"}),n.jsxs("div",{className:"font-semibold",children:["$",j.metrics.var95.toFixed(0)]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"CE"}),n.jsxs("div",{className:"font-semibold",children:["$",j.metrics.ce.toFixed(0)]})]})]})]},j.decisionId))})})]})}),n.jsx(Cr,{value:"risks",className:"space-y-4",children:n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{className:"text-base",children:"Risk Assessment"}),n.jsx(mt,{children:"Portfolio risk breakdown by RAROC thresholds"})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(tn,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),n.jsxs("div",{className:"font-semibold text-sm",children:["High Risk (RAROC ","<"," 10%)"]}),n.jsx(be,{variant:"destructive",children:o.riskAssessment.highRiskDecisions.length})]}),o.riskAssessment.highRiskDecisions.length>0?n.jsx("div",{className:"pl-6 space-y-1",children:o.riskAssessment.highRiskDecisions.map(j=>n.jsxs("div",{className:"text-xs text-muted-foreground",children:[" ",j]},j))}):n.jsx("div",{className:"pl-6 text-xs text-muted-foreground italic",children:"No high-risk decisions"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(tn,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"}),n.jsx("div",{className:"font-semibold text-sm",children:"Medium Risk (RAROC 10-15%)"}),n.jsx(be,{variant:"secondary",children:o.riskAssessment.mediumRiskDecisions.length})]}),o.riskAssessment.mediumRiskDecisions.length>0?n.jsx("div",{className:"pl-6 space-y-1",children:o.riskAssessment.mediumRiskDecisions.map(j=>n.jsxs("div",{className:"text-xs text-muted-foreground",children:[" ",j]},j))}):n.jsx("div",{className:"pl-6 text-xs text-muted-foreground italic",children:"No medium-risk decisions"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ri,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),n.jsx("div",{className:"font-semibold text-sm",children:"Low Risk (RAROC  15%)"}),n.jsx(be,{variant:"default",children:o.riskAssessment.lowRiskDecisions.length})]}),o.riskAssessment.lowRiskDecisions.length>0?n.jsx("div",{className:"pl-6 space-y-1",children:o.riskAssessment.lowRiskDecisions.map(j=>n.jsxs("div",{className:"text-xs text-muted-foreground",children:[" ",j]},j))}):n.jsx("div",{className:"pl-6 text-xs text-muted-foreground italic",children:"No low-risk decisions"})]})]})]})})]}):null,n.jsx(bn,{children:n.jsx(le,{variant:"outline",onClick:()=>t(!1),children:"Close"})})]}),n.jsx(aRe,{open:p,onOpenChange:g,portfolioName:r.portfolio_name,onSendEmail:y,onAuditEvent:s})]})}function iRe({open:e,onOpenChange:t,portfolios:r,onAuditEvent:a}){const[s,i]=N.useState([]),[o,l]=N.useState(null),[d,u]=N.useState(null),[f,m]=N.useState(null);N.useRef(null);const p=(T,O,R)=>{if(R!=null&&R.shiftKey&&o!==null&&o!==O){const M=Math.min(o,O),I=Math.max(o,O),D=r.slice(M,I+1).map($=>$.id);i($=>{const K=new Set($);return D.forEach(U=>{(K.size<4||K.has(U))&&K.add(U)}),Array.from(K).slice(0,4)}),l(O);return}i(M=>M.includes(T)?M.filter(I=>I!==T):M.length>=4?M:[...M,T]),l(O)},g=()=>{const T=r.slice(0,4).map(O=>O.id);i(T),a&&a("portfolio.select_all",{portfolioIds:T,count:T.length})},b=T=>{u(T)},v=(T,O)=>{T.preventDefault(),m(O)},y=T=>{if(d===null||d===T){u(null),m(null);return}const O=[...s],[R]=O.splice(d,1);O.splice(T,0,R),i(O),a&&a("portfolio.reordered",{from:d,to:T,portfolioIds:O}),u(null),m(null)},j=()=>{const T=["Portfolio Name","Description","Owner","Decisions","Time Horizon (months)","Total EV","VaR95","CVaR95","Diversification Index","Antifragility Score"],O=C.map($=>{var K,U,J,V,G;return[$.portfolio_name,$.description,$.owner,$.decision_ids.length.toString(),$.time_horizon_months.toString(),((K=$.metrics)==null?void 0:K.aggregate_expected_value.toFixed(2))||"N/A",((U=$.metrics)==null?void 0:U.aggregate_var95.toFixed(2))||"N/A",((J=$.metrics)==null?void 0:J.aggregate_cvar95.toFixed(2))||"N/A",((V=$.metrics)==null?void 0:V.diversification_index.toFixed(4))||"N/A",((G=$.metrics)==null?void 0:G.antifragility_score.toFixed(2))||"N/A"]}),R=[T.join(","),...O.map($=>$.map(K=>`"${K}"`).join(","))].join(`
`),M=new Blob([R],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a"),D=URL.createObjectURL(M);I.setAttribute("href",D),I.setAttribute("download",`portfolio-comparison-${Date.now()}.csv`),I.style.visibility="hidden",document.body.appendChild(I),I.click(),document.body.removeChild(I),a&&a("portfolio.comparison_exported",{format:"csv",portfolioIds:s,count:s.length})},_=()=>{const T=window.open("","_blank");if(!T)return;const O=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Portfolio Comparison Report</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h1 { color: #333; border-bottom: 2px solid #333; padding-bottom: 10px; }
            .portfolio { margin-bottom: 30px; page-break-inside: avoid; }
            .portfolio h2 { color: #555; margin-bottom: 10px; }
            .metrics { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
            .metric { padding: 10px; background: #f5f5f5; border-radius: 4px; }
            .metric-label { font-size: 12px; color: #666; }
            .metric-value { font-size: 18px; font-weight: bold; color: #333; }
            @media print { body { padding: 0; } }
          </style>
        </head>
        <body>
          <h1>Portfolio Comparison Report</h1>
          <p>Generated: ${new Date().toLocaleString()}</p>
          ${C.map(R=>`
            <div class="portfolio">
              <h2>${R.portfolio_name}</h2>
              <p><strong>Description:</strong> ${R.description}</p>
              <p><strong>Owner:</strong> ${R.owner}</p>
              <p><strong>Time Horizon:</strong> ${R.time_horizon_months} months</p>
              <p><strong>Decisions:</strong> ${R.decision_ids.length}</p>
              ${R.metrics?`
                <div class="metrics">
                  <div class="metric">
                    <div class="metric-label">Total Expected Value</div>
                    <div class="metric-value">${R.metrics.aggregate_expected_value.toFixed(0)}</div>
                  </div>
                  <div class="metric">
                    <div class="metric-label">VaR95</div>
                    <div class="metric-value">${R.metrics.aggregate_var95.toFixed(0)}</div>
                  </div>
                  <div class="metric">
                    <div class="metric-label">CVaR95</div>
                    <div class="metric-value">${R.metrics.aggregate_cvar95.toFixed(0)}</div>
                  </div>
                  <div class="metric">
                    <div class="metric-label">Diversification Index</div>
                    <div class="metric-value">${(R.metrics.diversification_index*100).toFixed(0)}%</div>
                  </div>
                  <div class="metric">
                    <div class="metric-label">Antifragility Score</div>
                    <div class="metric-value">${R.metrics.antifragility_score.toFixed(0)}/100</div>
                  </div>
                </div>
              `:"<p>No metrics available</p>"}
            </div>
          `).join("")}
        </body>
      </html>
    `;T.document.write(O),T.document.close(),T.focus(),setTimeout(()=>{T.print(),T.close()},250),a&&a("portfolio.comparison_exported",{format:"pdf",portfolioIds:s,count:s.length})};N.useEffect(()=>{if(!e)return;const T=O=>{(O.ctrlKey||O.metaKey)&&O.key==="a"&&(O.preventDefault(),g()),O.key==="Escape"&&s.length>0&&(O.preventDefault(),i([])),(O.ctrlKey||O.metaKey)&&O.key==="e"&&(O.preventDefault(),s.length>0&&j())};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[e,s,r]);const C=r.filter(T=>s.includes(T.id)),A=T=>T>=.7?{label:"High",color:"bg-green-500"}:T>=.4?{label:"Medium",color:"bg-yellow-500"}:{label:"Low",color:"bg-red-500"},S=(T,O,R)=>{const M=T-O;if(Math.abs(M)<.01)return{icon:wl,color:"text-muted-foreground",diff:0};const I=R?M>0:M<0;return{icon:I?$r:fa,color:I?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",diff:M}};return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-7xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{className:"text-2xl",children:"Portfolio Comparison"}),n.jsx(Sr,{children:"Compare up to 4 portfolios side-by-side"})]}),s.length===0?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Select multiple portfolios to compare (up to 4):"}),n.jsxs(le,{variant:"outline",size:"sm",onClick:g,disabled:r.length===0,className:"h-7",children:[n.jsx(Aee,{className:"h-3 w-3 mr-1"}),"Select All"]})]}),n.jsxs(be,{variant:"secondary",children:[s.length," / 4 selected"]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 bg-muted/50 p-3 rounded-lg",children:[n.jsx("p",{children:n.jsx("strong",{children:"Keyboard shortcuts:"})}),n.jsxs("p",{children:[""," ",n.jsx("kbd",{className:"px-1.5 py-0.5 bg-background border border-border rounded text-xs",children:"Shift + Click"})," ","- Range selection"]}),n.jsxs("p",{children:[""," ",n.jsx("kbd",{className:"px-1.5 py-0.5 bg-background border border-border rounded text-xs",children:"Ctrl/Cmd + A"})," ","- Select all (first 4)"]}),n.jsxs("p",{children:[""," ",n.jsx("kbd",{className:"px-1.5 py-0.5 bg-background border border-border rounded text-xs",children:"Ctrl/Cmd + E"})," ","- Export to CSV"]}),n.jsxs("p",{children:[""," ",n.jsx("kbd",{className:"px-1.5 py-0.5 bg-background border border-border rounded text-xs",children:"Esc"})," ","- Clear selection"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-[500px] overflow-y-auto",children:r.map((T,O)=>{const R=s.includes(T.id),M=s.length>=4&&!R;return n.jsxs("div",{className:`flex items-start gap-3 p-3 border rounded-lg transition-all cursor-pointer ${R?"border-primary bg-primary/5 shadow-sm":M?"border-border bg-muted/30 opacity-50 cursor-not-allowed":"border-border hover:bg-accent/50 hover:border-primary/50"}`,onClick:I=>{M||p(T.id,O,I)},children:[n.jsx(kl,{checked:R,disabled:M}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"font-medium text-sm",children:T.portfolio_name}),R&&n.jsx(be,{variant:"default",className:"text-xs",children:"Selected"})]}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:T.description}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsxs(be,{variant:"secondary",children:[T.decision_ids.length," decisions"]}),T.metrics&&n.jsxs(be,{variant:"outline",className:"text-xs",children:["EV: $",(T.metrics.aggregate_expected_value/1e3).toFixed(0),"K"]})]})]})]},T.id)})}),s.length>0&&n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.length," portfolio",s.length!==1?"s":""," selected"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(le,{variant:"outline",size:"sm",onClick:()=>i([]),children:"Clear All"}),n.jsx(le,{size:"sm",onClick:()=>{a&&a("portfolio.comparison_started",{portfolioIds:s,count:s.length})},children:"Compare Selected"})]})]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Comparing ",s.length," portfolio",s.length!==1?"s":"",n.jsx("span",{className:"ml-2 text-xs",children:"(Drag cards to reorder)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Fp,{children:[n.jsx(Bp,{asChild:!0,children:n.jsxs(le,{variant:"outline",size:"sm",children:[n.jsx(qn,{className:"h-4 w-4 mr-2"}),"Export"]})}),n.jsxs(Lh,{align:"end",children:[n.jsx(gc,{onClick:j,children:"Export as CSV"}),n.jsx(gc,{onClick:_,children:"Export as PDF"})]})]}),n.jsx(le,{variant:"outline",size:"sm",onClick:()=>i([]),children:"Change Selection"})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:C.map((T,O)=>{const R=d===O,M=f===O;return n.jsxs(Ae,{draggable:!0,onDragStart:()=>b(O),onDragOver:I=>v(I,O),onDrop:()=>y(O),onDragEnd:()=>{u(null),m(null)},className:`relative transition-all ${R?"opacity-50 scale-95":""} ${M?"ring-2 ring-primary":""}`,children:[n.jsx("div",{className:"absolute top-2 left-2 cursor-move",children:n.jsx(r3,{className:"h-4 w-4 text-muted-foreground"})}),n.jsx(le,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 h-6 w-6 p-0",onClick:()=>p(T.id,O),children:n.jsx(Ui,{className:"h-4 w-4"})}),n.jsxs(He,{className:"pb-3 pl-8",children:[n.jsx(Ge,{className:"text-sm pr-8",children:T.portfolio_name}),n.jsxs(mt,{className:"text-xs",children:[T.decision_ids.length," decisions"]})]}),n.jsx(Re,{className:"space-y-3",children:T.metrics?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Total EV"}),n.jsxs("div",{className:"font-bold text-lg",children:["$",T.metrics.aggregate_expected_value.toFixed(0)]}),O>0&&C[0].metrics&&n.jsx("div",{className:"flex items-center gap-1 mt-1",children:(()=>{const I=S(T.metrics.aggregate_expected_value,C[0].metrics.aggregate_expected_value,!0),D=I.icon;return n.jsxs(n.Fragment,{children:[n.jsx(D,{className:`h-3 w-3 ${I.color}`}),n.jsxs("span",{className:`text-xs ${I.color}`,children:[I.diff>0?"+":"",I.diff.toFixed(0)]})]})})()})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"VaR95"}),n.jsxs("div",{className:"font-bold text-sm",children:["$",T.metrics.aggregate_var95.toFixed(0)]}),O>0&&C[0].metrics&&n.jsx("div",{className:"flex items-center gap-1 mt-1",children:(()=>{const I=S(T.metrics.aggregate_var95,C[0].metrics.aggregate_var95,!1),D=I.icon;return n.jsxs(n.Fragment,{children:[n.jsx(D,{className:`h-3 w-3 ${I.color}`}),n.jsxs("span",{className:`text-xs ${I.color}`,children:[I.diff>0?"+":"",I.diff.toFixed(0)]})]})})()})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Diversification"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"font-bold text-sm",children:[(T.metrics.diversification_index*100).toFixed(0),"%"]}),n.jsx(be,{className:A(T.metrics.diversification_index).color+" text-white",children:A(T.metrics.diversification_index).label})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Antifragility"}),n.jsxs("div",{className:"font-bold text-sm",children:[T.metrics.antifragility_score.toFixed(0),"/100"]}),n.jsx("div",{className:"mt-1 h-2 bg-muted rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${T.metrics.antifragility_score}%`}})})]}),n.jsxs("div",{className:"pt-2 border-t border-border space-y-1",children:[n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"text-muted-foreground",children:"Owner:"})," ",n.jsx("span",{className:"font-medium",children:T.owner})]}),n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"text-muted-foreground",children:"Horizon:"})," ",n.jsxs("span",{className:"font-medium",children:[T.time_horizon_months,"mo"]})]})]})]}):n.jsx("div",{className:"text-xs text-muted-foreground text-center py-8",children:"No metrics computed"})})]},T.id)})}),C.length>1&&C.every(T=>T.metrics)&&n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{className:"text-base",children:"Comparison Summary"}),n.jsx(mt,{children:"Key insights across selected portfolios"})]}),n.jsx(Re,{className:"space-y-3",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground mb-1",children:"Highest Total EV"}),n.jsx("div",{className:"font-semibold",children:C.reduce((T,O)=>O.metrics.aggregate_expected_value>T.metrics.aggregate_expected_value?O:T).portfolio_name})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground mb-1",children:"Best Diversification"}),n.jsx("div",{className:"font-semibold",children:C.reduce((T,O)=>O.metrics.diversification_index>T.metrics.diversification_index?O:T).portfolio_name})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground mb-1",children:"Lowest Risk (VaR95)"}),n.jsx("div",{className:"font-semibold",children:C.reduce((T,O)=>Math.abs(O.metrics.aggregate_var95)<Math.abs(T.metrics.aggregate_var95)?O:T).portfolio_name})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground mb-1",children:"Highest Antifragility"}),n.jsx("div",{className:"font-semibold",children:C.reduce((T,O)=>O.metrics.antifragility_score>T.metrics.antifragility_score?O:T).portfolio_name})]})]})})]})]})]})})}function RX(e,t,r={}){const{entryCount:a=5,includeMetadata:s=!1,keywords:i=[],entryTypes:o=[],startDate:l,endDate:d}=r,u=Kj(e,t);if(!u||u.entries.length===0)return null;let f=[...u.entries];i.length>0&&(f=f.filter(y=>{const j=y.summary_text.toLowerCase();return i.some(_=>j.includes(_.toLowerCase()))})),o.length>0&&(f=f.filter(y=>o.includes(y.entry_type))),l&&(f=f.filter(y=>y.entry_date>=l)),d&&(f=f.filter(y=>y.entry_date<=d));const m=f.sort((y,j)=>j.entry_date-y.entry_date).slice(0,a);if(m.length===0)return null;const p=[...m].reverse(),g=oRe(u.decision_title,p,s),b=p.map(y=>y.entry_date),v={start:Math.min(...b),end:Math.max(...b)};return{decisionId:e,decisionTitle:u.decision_title,narrative:g,entriesIncluded:p.length,generatedAt:Date.now(),keywords:i.length>0?i:void 0,dateRange:v}}function PX(e,t,r={}){const a=[];for(const o of t){const l=RX(o,e,r);l&&a.push(l)}if(a.length===0)return null;const s=lRe(a),i=a.reduce((o,l)=>o+l.entriesIncluded,0);return{portfolioNarrative:s,decisionNarratives:a,totalEntries:i,generatedAt:Date.now()}}function oRe(e,t,r){const a=[];return a.push(`**${e}**
`),t.forEach((s,i)=>{const o=new Date(s.entry_date).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),l=rU(s.entry_type),d=s.auto_generated?"":"";if(a.push(`${i+1}. **${l}** (${o}) ${d}: ${s.summary_text}`),r&&s.metadata){const u=cRe(s.metadata);u&&a.push(`   _${u}_`)}a.push("")}),a.push(`
_Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}_`),a.join(`
`)}function lRe(e){const t=[];return t.push(`# Portfolio Decision Summary
`),t.push(`This brief covers ${e.length} decision(s) with ${e.reduce((r,a)=>r+a.entriesIncluded,0)} recent events.
`),e.forEach((r,a)=>{t.push(`## ${a+1}. ${r.decisionTitle}
`),r.narrative.split(`
`).filter(i=>i.match(/^\d+\./)).forEach(i=>{t.push(i)}),t.push("")}),t.push(`
_Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}_`),t.join(`
`)}function cRe(e){const t=[];return e.option_label&&t.push(`Option: ${e.option_label}`),e.metric_name&&t.push(`Metric: ${e.metric_name}`),e.old_value!==void 0&&e.new_value!==void 0&&t.push(`Changed from ${e.old_value} to ${e.new_value}`),e.incident_id&&t.push(`Incident: ${e.incident_id}`),e.guardrail_id&&t.push(`Guardrail: ${e.guardrail_id}`),t.join("  ")}function dRe(e,t){const r=z3(e),a=[];return r.forEach(s=>{const i=s.entries.filter(o=>{const l=o.summary_text.toLowerCase();return t.some(d=>l.includes(d.toLowerCase()))});i.length>0&&a.push({decisionId:s.decision_id,decisionTitle:s.decision_title,matchingEntries:i.sort((o,l)=>l.entry_date-o.entry_date),matchCount:i.length})}),a.sort((s,i)=>i.matchCount-s.matchCount)}function uRe(e,t=10){const r=["supplier","cost","spike","guardrail","risk","revenue","profit","loss","incident","adjustment","breach","threshold","partner","vendor","customer","market","demand","supply","price","quality","delay","issue","problem","opportunity","improvement","change","update","decision","option","alternative"],a=new Map;return e.forEach(s=>{const i=s.summary_text.toLowerCase();r.forEach(o=>{i.includes(o)&&a.set(o,(a.get(o)||0)+1)})}),Array.from(a.entries()).map(([s,i])=>({keyword:s,count:i})).sort((s,i)=>i.count-s.count).slice(0,t)}function fRe(e){return e.narrative}function hRe(e){const t=[];return t.push(`# ${e.decisionTitle}
`),t.push(`**Generated:** ${new Date(e.generatedAt).toLocaleString()}
`),t.push(`**Entries Included:** ${e.entriesIncluded}
`),e.keywords&&e.keywords.length>0&&t.push(`**Keywords:** ${e.keywords.join(", ")}
`),e.dateRange&&t.push(`**Date Range:** ${new Date(e.dateRange.start).toLocaleDateString()} - ${new Date(e.dateRange.end).toLocaleDateString()}
`),t.push(`---
`),t.push(e.narrative),t.join(`
`)}function mRe(e){const t=e.narrative.split(/\s+/).length,r=e.narrative.length,a=e.entriesIncluded;let s=0;if(e.dateRange){const i=e.dateRange.end-e.dateRange.start;s=Math.ceil(i/(1e3*60*60*24))}return{wordCount:t,characterCount:r,entryCount:a,dateSpan:s}}async function pRe(e,t,r){if(t.length===0)return null;try{const a=gRe(e,t),s=await vRe(r||bRe(),xRe(a));return yRe(s)}catch(a){return console.error("AI portfolio narrative generation failed:",a),null}}function gRe(e,t){const r=[];return r.push(`Portfolio: ${e}`),r.push(`Decisions: ${t.length}`),r.push(""),t.forEach((a,s)=>{r.push(`Decision ${s+1}: ${a.decisionTitle}`),r.push(`Events: ${a.entries.length}`),a.entries.forEach(i=>{const o=new Date(i.entry_date).toLocaleDateString();r.push(`  - ${o}: ${i.summary_text}`)}),r.push("")}),r.join(`
`)}function xRe(e){return`You are an expert portfolio analyst creating a comprehensive portfolio summary.

Context:
${e}

Generate a portfolio-level analysis that includes:

1. EXECUTIVE SUMMARY
   - Portfolio overview
   - Overall health and status
   - Key themes across decisions

2. PORTFOLIO NARRATIVE
   - Integrated story across all decisions
   - Common patterns and themes
   - Portfolio-level insights

3. CROSS-DECISION INSIGHTS
   - Patterns that span multiple decisions
   - Synergies or conflicts
   - Portfolio-level risks and opportunities

4. PORTFOLIO RISK ASSESSMENT
   - Overall risk level: low, medium, or high
   - Key risk factors
   - Diversification analysis

5. RECOMMENDATIONS
   - Portfolio-level actions
   - Resource allocation suggestions
   - Strategic guidance

Format your response as JSON:
{
  "executiveSummary": "...",
  "portfolioNarrative": "...",
  "crossDecisionInsights": ["...", "..."],
  "portfolioRisk": "low|medium|high",
  "recommendations": ["...", "..."]
}`}async function vRe(e,t){return console.log("LLM Call:",{provider:e.provider,model:e.model}),await new Promise(r=>setTimeout(r,1e3)),e.provider==="openai"?fE(t):e.provider==="anthropic"?jRe(t):wRe(t)}function yRe(e){try{const t=JSON.parse(e);return{portfolioNarrative:t.portfolioNarrative||"",executiveSummary:t.executiveSummary||"",crossDecisionInsights:t.crossDecisionInsights||[],portfolioRisk:t.portfolioRisk||"medium",recommendations:t.recommendations||[]}}catch(t){return console.error("Failed to parse portfolio response:",t),{portfolioNarrative:e,executiveSummary:"Failed to parse AI response",crossDecisionInsights:[],portfolioRisk:"medium",recommendations:[]}}}function bRe(){return{provider:"openai",model:"gpt-4",temperature:.7,maxTokens:2e3}}function fE(e){return e.includes("portfolio analyst")?JSON.stringify({executiveSummary:"The portfolio demonstrates strong diversification across 3 strategic decisions with mixed performance indicators. Recent signal refreshes have triggered re-evaluations, suggesting dynamic market conditions requiring active management.",portfolioNarrative:"This portfolio encompasses three interconnected decisions spanning supplier partnerships, market expansion, and technology investments. The supplier partnership decision has shown resilience despite initial cost spikes, with guardrail adjustments maintaining risk within acceptable bounds. Market expansion efforts have benefited from favorable demand signals, though competitive pressures remain. Technology investments are in early stages with promising initial metrics. Cross-decision synergies are emerging, particularly between supplier relationships and market expansion capabilities.",crossDecisionInsights:["Supplier partnerships are enabling faster market expansion through improved logistics","Technology investments are reducing operational costs across all decisions","Guardrail breaches in one decision are informing threshold adjustments in others","Portfolio-level diversification is providing resilience against individual decision volatility"],portfolioRisk:"medium",recommendations:["Increase monitoring frequency for decisions with recent guardrail adjustments","Consider rebalancing portfolio weights to reduce concentration risk","Establish cross-decision coordination mechanisms to capture synergies","Develop contingency plans for correlated downside scenarios"]}):JSON.stringify({executiveSummary:"The decision has progressed through initial implementation with mixed results. Recent cost spikes triggered guardrail adjustments, while market signals suggest improving conditions. Active management and adaptive thresholds are maintaining risk within acceptable bounds.",narrative:`**Decision Journey: Supplier Partnership**

The decision to partner with Acme Corp was finalized in January 2025 based on strong RAROC analysis showing favorable risk-adjusted returns. Initial implementation proceeded smoothly with expected cost structures materializing as projected.

In late January, an unexpected supplier delivery delay created the first challenge, impacting Q2 revenue projections by approximately 5%. This incident triggered our monitoring systems and prompted a detailed review of supplier reliability metrics.

February brought a significant cost spike, breaching our established guardrail threshold of 15%. The auto-adjustment system responded by raising the threshold to 18%, reflecting the new risk environment while maintaining appropriate oversight. This adjustment was accompanied by enhanced monitoring protocols.

Most recently, a positive signal refresh indicated a 12% increase in market demand, substantially improving the decision's outlook. This development has offset earlier concerns and validates the strategic rationale for the partnership.

Throughout this journey, the decision has demonstrated resilience and the value of adaptive risk management. The combination of automated guardrails and human oversight has enabled effective navigation of both challenges and opportunities.`,keyInsights:["Supplier relationship shows resilience despite initial delivery challenges","Auto-adjustment of guardrails prevented premature decision reversal while maintaining risk discipline","Market demand improvements are validating the strategic partnership rationale","Early warning systems successfully identified and escalated cost spike concerns","Integration of real-time signals is enabling proactive rather than reactive management"],trends:[{type:"improving",description:"Market demand trending upward with 12% increase in recent signals",confidence:85},{type:"stable",description:"Cost variance stabilizing after guardrail adjustment to 18%",confidence:75},{type:"improving",description:"Supplier reliability metrics showing recovery after initial delay",confidence:70}],recommendations:["Continue enhanced monitoring of supplier delivery metrics for next 60 days","Establish formal quarterly review cadence with supplier to address cost volatility","Leverage improved market demand to negotiate better terms in upcoming contract renewal","Document lessons learned from guardrail adjustment process for future decisions"],riskFactors:["Cost variance remains elevated at 18%, requiring continued vigilance","Supplier concentration risk if delivery issues recur","Market demand improvements may not be sustainable long-term","Potential for correlated risks if other suppliers face similar challenges"],sentiment:"mixed"})}function jRe(e){return fE(e)}function wRe(e){return fE(e)}function zF(e){return e?e.provider==="local"?!0:!!e.apiKey&&e.apiKey.trim()!=="":!1}const hE="retina:narrative-schedules",NRe="retina:narrative-history";function SRe(e,t,r,a,s,i,o={}){const l=new Date,d={id:`narr-sched-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,tenantId:e,portfolioId:t,portfolioName:r,frequency:a,dayOfWeek:o.dayOfWeek,dayOfMonth:o.dayOfMonth,time:o.time||"09:00",useAI:o.useAI??!1,aiConfig:o.aiConfig,entryCount:o.entryCount||5,includeInsights:o.includeInsights??!0,includeTrends:o.includeTrends??!0,includeRecommendations:o.includeRecommendations??!0,recipients:s,subject:o.subject||`${r} - ${a} Narrative Report`,includeAttachments:o.includeAttachments??!0,enabled:!0,createdAt:l.toISOString(),updatedAt:l.toISOString(),createdBy:i};return d.nextScheduled=kRe(d),MX(d),bY(e,`Narrative: ${r}`,a,s,d.subject,"narrative-report",i,{startDate:l.toISOString(),time:d.time,dayOfWeek:d.dayOfWeek,dayOfMonth:d.dayOfMonth,includeAttachments:d.includeAttachments}),d}function K2(e){const t=`${hE}:${e}`,r=localStorage.getItem(t);return r?JSON.parse(r):[]}function CRe(e,t){return K2(e).filter(a=>a.portfolioId===t)}function MX(e){const t=K2(e.tenantId),r=t.findIndex(i=>i.id===e.id),a={...e,updatedAt:new Date().toISOString()};r>=0?t[r]=a:t.push(a);const s=`${hE}:${e.tenantId}`;localStorage.setItem(s,JSON.stringify(t))}function _Re(e,t){const a=K2(e).filter(i=>i.id!==t),s=`${hE}:${e}`;localStorage.setItem(s,JSON.stringify(a))}function ARe(e,t){const a=K2(e).find(s=>s.id===t);a&&(a.enabled=!a.enabled,MX(a))}function kRe(e){const t=new Date,[r,a]=e.time.split(":").map(Number);let s=new Date(t);switch(s.setHours(r,a,0,0),e.frequency){case"once":return s.toISOString();case"daily":s<t&&s.setDate(s.getDate()+1);break;case"weekly":if(e.dayOfWeek!==void 0)for(;s.getDay()!==e.dayOfWeek||s<t;)s.setDate(s.getDate()+1);break;case"monthly":if(e.dayOfMonth!==void 0)for(;s.getDate()!==e.dayOfMonth||s<t;)s.setDate(s.getDate()+1);break;case"quarterly":const i=s.getMonth(),o=Math.floor(i/3)*3;s.setMonth(o),s.setDate(1),s<t&&s.setMonth(s.getMonth()+3);break}return s.toISOString()}function DX(e,t){const r=`${NRe}:${e}`,a=localStorage.getItem(r),s=a?JSON.parse(a):[];return t?s.filter(i=>i.portfolioId===t):s}function ORe(e,t){const r=DX(e,t);return r.length===0?null:r.sort((a,s)=>new Date(s.generatedAt).getTime()-new Date(a.generatedAt).getTime())[0]}const ERe=()=>({toast:e=>console.log("Toast:",e)});function TRe({open:e,onOpenChange:t,portfolio:r,tenantId:a,onAuditEvent:s}){const{toast:i}=ERe(),[o,l]=N.useState("generate"),[d,u]=N.useState(!1),[f,m]=N.useState(!1),[p,g]=N.useState(5),[b,v]=N.useState(null),[y,j]=N.useState(null),[_,C]=N.useState({provider:"openai",model:"gpt-4",temperature:.7,maxTokens:2e3,apiKey:""}),[A,S]=N.useState([]),[T,O]=N.useState(!1),[R,M]=N.useState({frequency:"weekly",dayOfWeek:1,dayOfMonth:1,time:"09:00",recipients:"",subject:""}),[I,D]=N.useState([]),[$,K]=N.useState(null);N.useEffect(()=>{e&&U()},[e,r.id]);const U=()=>{const F=CRe(a,r.id),z=DX(a,r.id);S(F),D(z);const H=ORe(a,r.id);H&&(v(H.narrative),j(H.executiveSummary||null))},J=async()=>{u(!0);try{if(f&&zF(_)){const F=[];for(const H of r.decision_ids){const X=Kj(H,a);if(X&&X.entries.length>0){const ne=X.entries.sort((ie,ce)=>ce.entry_date-ie.entry_date).slice(0,p);F.push({decisionTitle:X.decision_title,entries:ne})}}const z=await pRe(r.portfolio_name,F,_);z&&(v(z.portfolioNarrative),j(z.executiveSummary),i({title:"AI Narrative Generated",description:"Portfolio narrative created with AI insights"}),s==null||s("portfolio.narrative.generated",{portfolioId:r.id,portfolioName:r.portfolio_name,aiGenerated:!0,decisionsIncluded:F.length}))}else{const F=PX(a,r.decision_ids,{entryCount:p});F&&(v(F.portfolioNarrative),j(null),i({title:"Narrative Generated",description:"Portfolio narrative created successfully"}),s==null||s("portfolio.narrative.generated",{portfolioId:r.id,portfolioName:r.portfolio_name,aiGenerated:!1,decisionsIncluded:F.decisionNarratives.length}))}}catch(F){console.error("Failed to generate narrative:",F),i({title:"Generation Failed",description:"Failed to generate narrative. Please try again.",variant:"destructive"})}finally{u(!1)}},V=()=>{b&&(navigator.clipboard.writeText(b),i({title:"Copied",description:"Narrative copied to clipboard"}))},G=()=>{if(b){const F=new Blob([b],{type:"text/plain"}),z=URL.createObjectURL(F),H=document.createElement("a");H.href=z,H.download=`${r.portfolio_name}-narrative-${Date.now()}.txt`,H.click(),URL.revokeObjectURL(z),i({title:"Downloaded",description:"Narrative downloaded successfully"})}},q=()=>{const F=R.recipients.split(",").map(z=>z.trim()).filter(z=>z);if(F.length===0){i({title:"Validation Error",description:"Please add at least one recipient",variant:"destructive"});return}SRe(a,r.id,r.portfolio_name,R.frequency,F,"Admin User",{dayOfWeek:R.dayOfWeek,dayOfMonth:R.dayOfMonth,time:R.time,subject:R.subject||`${r.portfolio_name} - ${R.frequency} Report`,useAI:f,aiConfig:f?_:void 0,entryCount:p,includeInsights:!0,includeTrends:!0,includeRecommendations:!0}),i({title:"Schedule Created",description:`${R.frequency} narrative generation scheduled`}),s==null||s("portfolio.narrative.scheduled",{portfolioId:r.id,portfolioName:r.portfolio_name,frequency:R.frequency,recipients:F.length}),O(!1),U()},Y=F=>{ARe(a,F),U()},Q=F=>{confirm("Delete this schedule?")&&(_Re(a,F),U(),i({title:"Schedule Deleted",description:"Narrative schedule removed"}))};return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(qi,{className:"w-5 h-5"}),"Portfolio Narrative Manager"]}),n.jsxs(Sr,{children:['Generate, schedule, and manage narratives for "',r.portfolio_name,'"']})]}),n.jsxs(si,{value:o,onValueChange:F=>l(F),className:"space-y-4",children:[n.jsxs(zs,{className:"grid grid-cols-3 w-full",children:[n.jsx(hr,{value:"generate",children:"Generate"}),n.jsx(hr,{value:"schedule",children:"Schedule"}),n.jsx(hr,{value:"history",children:"History"})]}),n.jsxs(Cr,{value:"generate",className:"space-y-4",children:[n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-base",children:"Generation Settings"})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(Ne,{children:"AI-Enhanced Generation"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Use AI for more natural narratives with insights"})]}),n.jsx(Pa,{checked:f,onCheckedChange:m})]}),f&&n.jsxs("div",{className:"space-y-3 p-3 border border-border rounded-lg bg-muted/30",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"AI Provider"}),n.jsxs(Et,{value:_.provider,onValueChange:F=>C({..._,provider:F}),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"openai",children:"OpenAI GPT-4"}),n.jsx(we,{value:"anthropic",children:"Anthropic Claude"}),n.jsx(we,{value:"local",children:"Local LLM"})]})]})]}),_.provider!=="local"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"API Key"}),n.jsx(et,{type:"password",value:_.apiKey||"",onChange:F=>C({..._,apiKey:F.target.value}),placeholder:"sk-..."})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ne,{children:["Entries per Decision: ",p]}),n.jsx("input",{type:"range",min:"3",max:"10",value:p,onChange:F=>g(parseInt(F.target.value)),className:"w-full"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of recent journal entries to include per decision"})]}),n.jsx(le,{onClick:J,disabled:d||f&&!zF(_),className:"w-full",children:d?"Generating...":"Generate Narrative"})]})]}),b&&n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ge,{className:"text-base",children:"Generated Narrative"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(le,{variant:"outline",size:"sm",onClick:V,children:[n.jsx(bv,{className:"w-4 h-4 mr-2"}),"Copy"]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:G,children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})}),n.jsxs(Re,{className:"space-y-4",children:[y&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Executive Summary"}),n.jsx("p",{className:"text-sm",children:y})]}),n.jsx(ja,{})]}),n.jsx("div",{className:"prose prose-sm max-w-none",children:n.jsx("div",{className:"whitespace-pre-wrap text-sm max-h-[400px] overflow-y-auto",children:b})})]})]})]}),n.jsxs(Cr,{value:"schedule",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Scheduled Generation"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[A.length," active schedule",A.length!==1?"s":""]})]}),n.jsxs(le,{onClick:()=>O(!0),size:"sm",children:[n.jsx(Rh,{className:"w-4 h-4 mr-2"}),"New Schedule"]})]}),n.jsxs("div",{className:"space-y-3",children:[A.map(F=>n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-4 space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"font-semibold text-sm capitalize",children:[F.frequency," Report"]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[F.time,"  ",F.recipients.length," ","recipients"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pa,{checked:F.enabled,onCheckedChange:()=>Y(F.id)}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>Q(F.id),children:""})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[F.useAI&&n.jsxs(be,{variant:"default",children:[n.jsx(qi,{className:"w-3 h-3 mr-1"}),"AI Enhanced"]}),n.jsxs(be,{variant:"secondary",children:[F.entryCount," entries"]})]}),F.nextScheduled&&n.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n.jsx(vc,{className:"w-3 h-3"}),"Next:"," ",new Date(F.nextScheduled).toLocaleString()]})]})},F.id)),A.length===0&&n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-8 pb-8 text-center",children:[n.jsx(Rh,{className:"w-12 h-12 mx-auto mb-4 opacity-50 text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"No schedules configured"}),n.jsx(le,{onClick:()=>O(!0),size:"sm",children:"Create First Schedule"})]})})]}),n.jsx(Nr,{open:T,onOpenChange:O,children:n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Create Narrative Schedule"}),n.jsx(Sr,{children:"Set up automatic narrative generation"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Frequency"}),n.jsxs(Et,{value:R.frequency,onValueChange:F=>M({...R,frequency:F}),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"weekly",children:"Weekly"}),n.jsx(we,{value:"monthly",children:"Monthly"}),n.jsx(we,{value:"quarterly",children:"Quarterly"})]})]})]}),R.frequency==="weekly"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Day of Week"}),n.jsxs(Et,{value:R.dayOfWeek.toString(),onValueChange:F=>M({...R,dayOfWeek:parseInt(F)}),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"0",children:"Sunday"}),n.jsx(we,{value:"1",children:"Monday"}),n.jsx(we,{value:"2",children:"Tuesday"}),n.jsx(we,{value:"3",children:"Wednesday"}),n.jsx(we,{value:"4",children:"Thursday"}),n.jsx(we,{value:"5",children:"Friday"}),n.jsx(we,{value:"6",children:"Saturday"})]})]})]}),R.frequency==="monthly"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Day of Month"}),n.jsx(et,{type:"number",min:"1",max:"31",value:R.dayOfMonth,onChange:F=>M({...R,dayOfMonth:parseInt(F.target.value)})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Time"}),n.jsx(et,{type:"time",value:R.time,onChange:F=>M({...R,time:F.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Recipients (comma-separated)"}),n.jsx(ua,{value:R.recipients,onChange:F=>M({...R,recipients:F.target.value}),placeholder:"exec@company.com, board@company.com",rows:3})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Email Subject (optional)"}),n.jsx(et,{value:R.subject,onChange:F=>M({...R,subject:F.target.value}),placeholder:`${r.portfolio_name} - ${R.frequency} Report`})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),n.jsx(le,{onClick:q,children:"Create Schedule"})]})]})})]}),n.jsxs(Cr,{value:"history",className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Generation History"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[I.length," narrative",I.length!==1?"s":""," ","generated"]})]}),n.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:I.length===0?n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-8 pb-8 text-center",children:[n.jsx(Gb,{className:"w-12 h-12 mx-auto mb-4 opacity-50 text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No narratives generated yet"})]})}):I.sort((F,z)=>new Date(z.generatedAt).getTime()-new Date(F.generatedAt).getTime()).map(F=>n.jsx(Ae,{className:"cursor-pointer hover:bg-accent/50",onClick:()=>K(F),children:n.jsxs(Re,{className:"pt-4 space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold text-sm",children:new Date(F.generatedAt).toLocaleDateString()}),n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(F.generatedAt).toLocaleTimeString()})]}),F.aiGenerated&&n.jsxs(be,{variant:"default",className:"text-xs",children:[n.jsx(qi,{className:"w-3 h-3 mr-1"}),"AI"]})]}),n.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:[F.decisionsIncluded," decisions"]}),n.jsx("span",{children:""}),n.jsxs("span",{children:[F.entriesAnalyzed," entries"]})]}),F.executiveSummary&&n.jsxs(n.Fragment,{children:[n.jsx(ja,{}),n.jsx("p",{className:"text-xs line-clamp-2",children:F.executiveSummary})]})]})},F.id))}),$&&n.jsx(Nr,{open:!!$,onOpenChange:()=>K(null),children:n.jsxs(gr,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsxs(vr,{children:["Narrative from"," ",new Date($.generatedAt).toLocaleDateString()]}),n.jsxs(Sr,{children:[$.decisionsIncluded," decisions "," ",$.entriesAnalyzed," entries analyzed"]})]}),n.jsxs("div",{className:"space-y-4",children:[$.executiveSummary&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Executive Summary"}),n.jsx("p",{className:"text-sm",children:$.executiveSummary})]}),n.jsx(ja,{})]}),n.jsx("div",{className:"prose prose-sm max-w-none",children:n.jsx("div",{className:"whitespace-pre-wrap text-sm",children:$.narrative})})]}),n.jsxs(bn,{children:[n.jsxs(le,{variant:"outline",onClick:()=>{navigator.clipboard.writeText($.narrative),i({title:"Copied",description:"Narrative copied to clipboard"})},children:[n.jsx(bv,{className:"w-4 h-4 mr-2"}),"Copy"]}),n.jsx(le,{onClick:()=>K(null),children:"Close"})]})]})})]})]})]})})}function RRe({tenantId:e,currentDecisionId:t,currentDecisionTitle:r,onAuditEvent:a}){const{tenant:s}=Fr(),{decisions:i}=Vo(),[o,l]=N.useState([]),[d,u]=N.useState(!1),[f,m]=N.useState(null),[p,g]=N.useState(!1),[b,v]=N.useState([]),[y,j]=N.useState(null),[_,C]=N.useState(!1),[A,S]=N.useState(null),[T,O]=N.useState([]),[R,M]=N.useState(!1),[I,D]=N.useState(null),[$,K]=N.useState(!1),[U,J]=N.useState(null),[V,G]=N.useState("cards"),[q,Y]=N.useState(!1),[Q,F]=N.useState("name"),[z,H]=N.useState("all"),[X,ne]=N.useState({portfolio_name:"",description:"",owner:"Admin User",time_horizon_months:12,goal_alignment:""}),ie=()=>{const Oe=vo(e);if(l(Oe),t){const Ee=t$(e,t);v(Ee.map(lt=>lt.id))}};N.useEffect(()=>{ie()},[e,t]);const ce=()=>{ne({portfolio_name:"",description:"",owner:"Admin User",time_horizon_months:12,goal_alignment:""}),m(null)},ge=()=>{const Oe=uW(e,{...X,decision_ids:t?[t]:[]});a==null||a("portfolio.created",{portfolioId:Oe.id,portfolioName:Oe.portfolio_name,initialDecisions:Oe.decision_ids.length}),ie(),ce(),u(!1)},he=()=>{if(!f)return;const Oe=YO(e,f.id,X);Oe&&(a==null||a("portfolio.updated",{portfolioId:Oe.id,portfolioName:Oe.portfolio_name})),ie(),ce(),u(!1)},ue=(Oe,Ee)=>{confirm(`Are you sure you want to delete "${Ee}"?`)&&(fW(e,Oe),a==null||a("portfolio.deleted",{portfolioId:Oe,portfolioName:Ee}),ie())},Se=Oe=>{m(Oe),ne({portfolio_name:Oe.portfolio_name,description:Oe.description,owner:Oe.owner,time_horizon_months:Oe.time_horizon_months,goal_alignment:Oe.goal_alignment}),u(!0)},je=()=>{if(!t)return;const Ee=t$(e,t).map(gt=>gt.id),lt=b.filter(gt=>!Ee.includes(gt)),ut=Ee.filter(gt=>!b.includes(gt));lt.forEach(gt=>{hk(e,gt,t)}),ut.forEach(gt=>{mk(e,gt,t)}),a==null||a("decision.portfolios.updated",{decisionId:t,decisionTitle:r,added:lt.length,removed:ut.length,totalPortfolios:b.length}),ie(),g(!1)},Be=Oe=>{v(Ee=>Ee.includes(Oe)?Ee.filter(lt=>lt!==Oe):[...Ee,Oe])},$e=Oe=>{S(Oe),O([...Oe.decision_ids]),C(!0)},oe=()=>{if(!A)return;const Oe=T.filter(lt=>!A.decision_ids.includes(lt)),Ee=A.decision_ids.filter(lt=>!T.includes(lt));Oe.forEach(lt=>{hk(e,A.id,lt)}),Ee.forEach(lt=>{mk(e,A.id,lt)}),a==null||a("portfolio.decisions.updated",{portfolioId:A.id,portfolioName:A.portfolio_name,added:Oe.length,removed:Ee.length,totalDecisions:T.length}),ie(),C(!1),S(null)},Xe=Oe=>{O(Ee=>Ee.includes(Oe)?Ee.filter(lt=>lt!==Oe):[...Ee,Oe])},pt=async Oe=>{j(Oe.id);try{const Ee=i.filter(gt=>Oe.decision_ids.includes(gt.id)&&gt.status==="closed"&&gt.metrics);if(Ee.length===0){alert("No closed decisions with metrics found in this portfolio. Close and simulate decisions first."),j(null);return}const lt=Ee.map(gt=>{var dt,Nt,zt;return{decisionId:gt.id,chosenOptionId:gt.chosenOptionId||"",ev:((dt=gt.metrics)==null?void 0:dt.ev)||0,var95:((Nt=gt.metrics)==null?void 0:Nt.var95)||0,cvar95:((zt=gt.metrics)==null?void 0:zt.cvar95)||0,weight:1}}),ut=g_e(e,Oe.id,lt);ut&&(a==null||a("portfolio.metrics.computed",{portfolioId:Oe.id,portfolioName:Oe.portfolio_name,decisionsAnalyzed:lt.length,metrics:ut.metrics}),ie())}catch(Ee){console.error("Failed to compute metrics:",Ee),alert("Failed to compute portfolio metrics. See console for details.")}finally{j(null)}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pp,{className:"w-5 h-5 text-primary"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Decision Portfolios"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{children:n.jsx(Or,{className:"w-4 h-4 text-muted-foreground"})}),n.jsx(St,{children:n.jsx("p",{className:"max-w-xs",children:"Lets you view several decisions together  like an investment or strategy bundle."})})]})})]}),n.jsxs("div",{className:"flex gap-2",children:[t&&n.jsxs(Nr,{open:p,onOpenChange:g,children:[n.jsx(ld,{asChild:!0,children:n.jsxs(le,{variant:"outline",size:"sm",children:[n.jsx(XR,{className:"w-4 h-4 mr-2"}),"Assign to Portfolio"]})}),n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Assign to Portfolios"}),n.jsxs(Sr,{children:['Select portfolios for "',r,'"']})]}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:V==="summary"&&o.length>0?n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:o.filter(Oe=>{if(z==="all")return!0;if(!Oe.metrics)return!1;const Ee=x$(Oe.metrics.diversification_index);return z==="high"?Ee==="High":z==="medium"?Ee==="Medium":z==="low"?Ee==="Low":!0}).sort((Oe,Ee)=>{var lt,ut,gt,dt,Nt,zt;if(Q==="name")return Oe.portfolio_name.localeCompare(Ee.portfolio_name);if(Q==="ev"){const Dt=((lt=Oe.metrics)==null?void 0:lt.aggregate_expected_value)||0;return(((ut=Ee.metrics)==null?void 0:ut.aggregate_expected_value)||0)-Dt}if(Q==="diversification"){const Dt=((gt=Oe.metrics)==null?void 0:gt.diversification_index)||0;return(((dt=Ee.metrics)==null?void 0:dt.diversification_index)||0)-Dt}if(Q==="antifragility"){const Dt=((Nt=Oe.metrics)==null?void 0:Nt.antifragility_score)||0;return(((zt=Ee.metrics)==null?void 0:zt.antifragility_score)||0)-Dt}return 0}).map(Oe=>{const lt=i.filter(Nt=>Oe.decision_ids.includes(Nt.id)&&Nt.status==="closed"&&Nt.metrics).filter(Nt=>Nt.topSensitiveFactors&&Nt.topSensitiveFactors.length>0).map(Nt=>({decisionId:Nt.id,drivers:Nt.topSensitiveFactors||[]})),ut=E3e(lt),gt=Oe.metrics?x$(Oe.metrics.diversification_index):"Low",dt=Oe.metrics?O3e(Oe.metrics.antifragility_score,Oe.metricsHistory):"stable";return n.jsx(k3e,{data:{portfolio:Oe,topDrivers:ut,diversificationLabel:gt,antifragilityTrend:dt},onGenerateBrief:Nt=>{D(Oe),M(!0)}},Oe.id)})}):o.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No portfolios yet. Create one first."}):o.map(Oe=>n.jsxs("div",{className:"flex items-start gap-3 p-3 border border-border rounded-lg hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>Be(Oe.id),children:[n.jsx(kl,{checked:b.includes(Oe.id),onCheckedChange:()=>Be(Oe.id),onClick:Ee=>Ee.stopPropagation()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm",children:Oe.portfolio_name}),n.jsx("div",{className:"text-xs text-muted-foreground",children:Oe.description}),n.jsxs(be,{variant:"secondary",className:"mt-1",children:[Oe.decision_ids.length," decisions"]})]})]},Oe.id))}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),n.jsx(le,{onClick:je,children:"Save Assignment"})]})]})]}),n.jsxs(Nr,{open:d,onOpenChange:Oe=>{u(Oe),Oe||ce()},children:[n.jsx(ld,{asChild:!0,children:n.jsxs(le,{size:"sm",children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"New Portfolio"]})}),n.jsxs(gr,{className:"max-w-2xl",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:f?"Edit Portfolio":"Create Portfolio"}),n.jsx(Sr,{children:"Group related choices under one theme"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"portfolio_name",children:"Portfolio Name"}),n.jsx(et,{id:"portfolio_name",value:X.portfolio_name,onChange:Oe=>ne({...X,portfolio_name:Oe.target.value}),placeholder:"e.g., Cloud Migration Strategy"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"description",children:"Description"}),n.jsx(ua,{id:"description",value:X.description,onChange:Oe=>ne({...X,description:Oe.target.value}),placeholder:"Describe the purpose of this portfolio...",rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"owner",children:"Owner"}),n.jsx(et,{id:"owner",value:X.owner,onChange:Oe=>ne({...X,owner:Oe.target.value}),placeholder:"Portfolio owner"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"time_horizon_months",children:"Time Horizon (months)"}),n.jsx(et,{id:"time_horizon_months",type:"number",value:X.time_horizon_months,onChange:Oe=>ne({...X,time_horizon_months:Number(Oe.target.value)}),min:1})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"goal_alignment",children:"Goal Alignment"}),n.jsx(ua,{id:"goal_alignment",value:X.goal_alignment,onChange:Oe=>ne({...X,goal_alignment:Oe.target.value}),placeholder:"How does this portfolio align with organizational goals?",rows:3})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>{u(!1),ce()},children:"Cancel"}),n.jsxs(le,{onClick:f?he:ge,disabled:!X.portfolio_name||!X.description,children:[f?"Update":"Create"," Portfolio"]})]})]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[n.jsx("div",{className:"flex items-center gap-2",children:V==="summary"&&n.jsxs(n.Fragment,{children:[n.jsxs(Et,{value:Q,onValueChange:Oe=>F(Oe),children:[n.jsx(kt,{className:"w-[180px]",children:n.jsx(Tt,{placeholder:"Sort by"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"name",children:"Name"}),n.jsx(we,{value:"ev",children:"Expected Value"}),n.jsx(we,{value:"diversification",children:"Diversification"}),n.jsx(we,{value:"antifragility",children:"Antifragility"})]})]}),n.jsxs(Et,{value:z,onValueChange:Oe=>H(Oe),children:[n.jsx(kt,{className:"w-[180px]",children:n.jsx(Tt,{placeholder:"Filter by"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Portfolios"}),n.jsx(we,{value:"high",children:"High Diversification"}),n.jsx(we,{value:"medium",children:"Medium Diversification"}),n.jsx(we,{value:"low",children:"Low Diversification"})]})]})]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(le,{size:"sm",variant:"outline",onClick:()=>Y(!0),disabled:o.length<2,children:"Compare Portfolios"}),n.jsx(le,{size:"sm",variant:V==="cards"?"default":"outline",onClick:()=>G("cards"),children:"Detailed View"}),n.jsx(le,{size:"sm",variant:V==="summary"?"default":"outline",onClick:()=>G("summary"),children:"Summary View"})]})]}),n.jsx("div",{className:"space-y-3",children:o.length===0?n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-8 pb-8 text-center",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mx-auto mb-3",children:n.jsx(Pp,{className:"w-6 h-6 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"No portfolios yet. Create one to group related decisions."})]})}):o.map(Oe=>{const Ee=i.filter(ut=>Oe.decision_ids.includes(ut.id)),lt=t&&Oe.decision_ids.includes(t);return n.jsxs(Ae,{className:lt?"border-primary":"",children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-1 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ge,{className:"text-base",children:Oe.portfolio_name}),lt&&n.jsx(be,{variant:"default",className:"text-xs",children:"Current"})]}),n.jsx(mt,{children:Oe.description})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>$e(Oe),className:"hover:bg-accent",children:n.jsx(XR,{className:"w-4 h-4"})})}),n.jsx(St,{children:n.jsx("p",{children:"Manage Decisions"})})]})}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>Se(Oe),children:n.jsx(jj,{className:"w-4 h-4"})}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>ue(Oe.id,Oe.portfolio_name),children:n.jsx(mo,{className:"w-4 h-4 text-destructive"})})]})]})}),n.jsxs(Re,{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Owner:"})," ",n.jsx("span",{className:"font-medium",children:Oe.owner})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Time Horizon:"})," ",n.jsxs("span",{className:"font-medium",children:[Oe.time_horizon_months," months"]})]})]}),n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Goal Alignment:"}),n.jsx("p",{className:"mt-1 text-foreground",children:Oe.goal_alignment})]}),Oe.metrics?n.jsxs("div",{className:"border border-border rounded-lg p-3 space-y-2 bg-muted/30",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Portfolio Metrics"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{children:n.jsx(Or,{className:"w-3 h-3 text-muted-foreground"})}),n.jsx(St,{className:"max-w-xs",children:n.jsx("p",{className:"text-xs",children:Oe.metrics.plain_language_label})})]})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Aggregate EV"}),n.jsxs("div",{className:"font-semibold text-sm",children:["$",Oe.metrics.aggregate_expected_value.toFixed(0)]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Aggregate VaR95"}),n.jsxs("div",{className:"font-semibold text-sm",children:["$",Oe.metrics.aggregate_var95.toFixed(0)]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Aggregate CVaR95"}),n.jsxs("div",{className:"font-semibold text-sm",children:["$",Oe.metrics.aggregate_cvar95.toFixed(0)]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Diversification"}),n.jsxs("div",{className:"font-semibold text-sm",children:[(Oe.metrics.diversification_index*100).toFixed(1),"%"]})]})]}),n.jsxs("div",{className:"pt-2 border-t border-border",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-muted-foreground text-xs",children:"Antifragility Score"}),n.jsxs("div",{className:"font-bold text-sm",children:[Oe.metrics.antifragility_score.toFixed(0),"/100"]})]}),n.jsx("div",{className:"mt-1 h-2 bg-muted rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${Oe.metrics.antifragility_score}%`}})})]}),n.jsxs("div",{className:"text-xs text-muted-foreground pt-1",children:["Computed"," ",new Date(Oe.metrics.computed_at).toLocaleString()]})]}):n.jsxs("div",{className:"border border-dashed border-border rounded-lg p-3 text-center",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"No metrics computed yet"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(le,{size:"sm",variant:"outline",onClick:()=>pt(Oe),disabled:y===Oe.id,children:y===Oe.id?"Computing...":"Compute Metrics"}),n.jsx(le,{size:"sm",variant:"outline",onClick:()=>{J(Oe),K(!0)},children:"Generate Narrative"})]})]}),Ee.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Decisions in Portfolio"}),n.jsx("div",{className:"space-y-1",children:Ee.map(ut=>n.jsxs("div",{className:"text-xs p-2 bg-muted/50 rounded border border-border",children:[n.jsx("div",{className:"font-medium",children:ut.title}),n.jsxs("div",{className:"text-muted-foreground",children:["Closed"," ",new Date(ut.closedAt).toLocaleDateString()]})]},ut.id))})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(be,{variant:"secondary",children:[Oe.decision_ids.length," decisions"]}),n.jsxs(be,{variant:"outline",children:["Created"," ",new Date(Oe.createdAt).toLocaleDateString()]})]})]})]},Oe.id)})}),n.jsx(Nr,{open:_,onOpenChange:Oe=>{C(Oe),Oe||S(null)},children:n.jsxs(gr,{className:"max-w-2xl",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Manage Decisions"}),n.jsxs(Sr,{children:['Select decisions to include in "',A==null?void 0:A.portfolio_name,'"']})]}),n.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:i.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No closed decisions available. Close some decisions first."}):i.map(Oe=>{var Ee;return n.jsxs("div",{className:"flex items-start gap-3 p-3 border border-border rounded-lg hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>Xe(Oe.id),children:[n.jsx(kl,{checked:T.includes(Oe.id),onCheckedChange:()=>Xe(Oe.id),onClick:lt=>lt.stopPropagation()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm",children:Oe.title}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Closed ",new Date(Oe.closedAt).toLocaleDateString()," ",""," ",(Ee=Oe.options.find(lt=>lt.id===Oe.chosenOptionId))==null?void 0:Ee.label]}),Oe.metrics&&n.jsxs("div",{className:"flex gap-2 mt-1",children:[n.jsxs(be,{variant:"outline",className:"text-xs",children:["EV: $",Oe.metrics.ev.toFixed(0)]}),n.jsxs(be,{variant:"outline",className:"text-xs",children:["RAROC: ",(Oe.metrics.raroc*100).toFixed(1),"%"]})]})]})]},Oe.id)})}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),n.jsxs(le,{onClick:oe,children:["Save (",T.length," selected)"]})]})]})}),I&&n.jsx(sRe,{open:R,onOpenChange:M,portfolio:I,decisions:i,onAuditEvent:a}),n.jsx(iRe,{open:q,onOpenChange:Y,portfolios:o,onAuditEvent:a}),U&&n.jsx(TRe,{open:$,onOpenChange:K,portfolio:U,tenantId:e,onAuditEvent:a})]})}function qF(e){if(!e||e.length===0)return{level:"Low",score:0};const r=e.reduce((a,s)=>{const i=s.creditExposure||0,o=s.dependencyScore||0;return a+i*o},0)/e.length;return r<25?{level:"Low",score:r}:r<50?{level:"Medium",score:r}:r<75?{level:"High",score:r}:{level:"Critical",score:r}}function UF(e){return e.certaintyEquivalent-e.ev}function PRe({simulationResults:e,thresholds:t,options:r=[],portfolioData:a}){const[s,i]=N.useState("single"),o=e.map(D=>{const $=r.find(U=>U.id===D.optionId),K=qF($==null?void 0:$.partners);return{optionId:D.optionId,optionLabel:D.optionLabel,downsideRisk:D.var95,shockBenefit:UF(D),raroc:D.raroc,creditRiskLevel:K.level,creditRiskScore:K.score}}),l=a?a.decisions.flatMap(D=>D.simulationResults.map($=>{const K=qF();return{optionId:`${D.id}-${$.optionId}`,optionLabel:`${D.title} - ${$.optionLabel}`,downsideRisk:$.var95,shockBenefit:UF($),raroc:$.raroc,creditRiskLevel:K.level,creditRiskScore:K.score}})):[],d=s==="single"?o:l,u=Math.max(...d.map(D=>D.downsideRisk)),f=Math.min(...d.map(D=>D.downsideRisk)),m=Math.max(...d.map(D=>D.shockBenefit)),p=Math.min(...d.map(D=>D.shockBenefit)),g=Math.max(...d.map(D=>D.raroc)),b=Math.min(...d.map(D=>D.raroc)),v=(u-f)*.1||10,y=(m-p)*.1||10,j=f-v,_=u+v,C=p-y,A=m+y,S=D=>(D-j)/(_-j)*100,T=D=>100-(D-C)/(A-C)*100,O=D=>20+(D-b)/(g-b||1)*40,R={Low:"hsl(var(--chart-2))",Medium:"hsl(var(--chart-4))",High:"hsl(var(--chart-1))",Critical:"hsl(var(--destructive))"},M=e.map((D,$)=>({id:D.optionId,metrics:{raroc:D.raroc},incidentImpacts:[],guardrailViolations:0})),I=cW(M);return n.jsxs("div",{className:"space-y-6",children:[n.jsx(L2,{value:I.antifragility_index,size:"lg"}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dp,{className:"w-5 h-5 text-primary"}),n.jsxs("div",{children:[n.jsx(Ge,{children:"Resilience Dashboard"}),n.jsx(mt,{children:"Compare how each choice holds up when things change"})]})]}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("button",{className:"text-muted-foreground hover:text-foreground transition-colors",children:n.jsx(Or,{className:"w-5 h-5"})})}),n.jsx(St,{className:"max-w-xs",children:n.jsx("p",{className:"text-sm",children:"Shows which decisions lose least  or even gain  from surprises. Bubble size = RAROC, color = Credit Risk Level."})})]})})]})}),n.jsxs(Re,{className:"space-y-6",children:[n.jsxs(si,{value:s,onValueChange:D=>i(D),children:[n.jsxs(zs,{className:"grid w-full grid-cols-2",children:[n.jsx(hr,{value:"single",children:"Single Decision"}),n.jsx(hr,{value:"portfolio",disabled:!a||a.decisions.length===0,children:"Portfolio"})]}),n.jsx(Cr,{value:"single",className:"space-y-4",children:o.length===0?n.jsx("div",{className:"text-center py-12 text-muted-foreground",children:n.jsx("p",{children:"Run simulation to see resilience analysis"})}):n.jsx(VF,{bubbles:d,scaleX:S,scaleY:T,scaleSize:O,creditRiskColors:R,xMin:j,xMax:_,yMin:C,yMax:A})}),n.jsx(Cr,{value:"portfolio",className:"space-y-4",children:l.length===0?n.jsx("div",{className:"text-center py-12 text-muted-foreground",children:n.jsx("p",{children:"No portfolio data available"})}):n.jsx(VF,{bubbles:d,scaleX:S,scaleY:T,scaleSize:O,creditRiskColors:R,xMin:j,xMax:_,yMin:C,yMax:A})})]}),n.jsxs("div",{className:"flex items-center justify-center gap-6 pt-4 border-t border-border",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Credit Risk:"}),["Low","Medium","High","Critical"].map(D=>n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:R[D]}}),n.jsx("span",{className:"text-xs text-muted-foreground",children:D})]},D))]}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Bubble size = RAROC"})]})]})]})]})}function VF({bubbles:e,scaleX:t,scaleY:r,scaleSize:a,creditRiskColors:s,xMin:i,xMax:o,yMin:l,yMax:d}){const[u,f]=N.useState(null);return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative w-full aspect-[4/3] bg-muted/20 rounded-lg border border-border p-8",children:[n.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 -rotate-90 text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Shock Benefit (Utility)"}),n.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 text-xs font-medium text-muted-foreground",children:"Downside Risk (VaR95)"}),n.jsxs("svg",{className:"absolute inset-8 w-[calc(100%-4rem)] h-[calc(100%-4rem)]",children:[[0,25,50,75,100].map(m=>n.jsx("line",{x1:`${m}%`,y1:"0%",x2:`${m}%`,y2:"100%",stroke:"hsl(var(--border))",strokeWidth:"1",strokeDasharray:"4 4"},`v-${m}`)),[0,25,50,75,100].map(m=>n.jsx("line",{x1:"0%",y1:`${m}%`,x2:"100%",y2:`${m}%`,stroke:"hsl(var(--border))",strokeWidth:"1",strokeDasharray:"4 4"},`h-${m}`)),l<0&&d>0&&n.jsx("line",{x1:"0%",y1:`${r(0)}%`,x2:"100%",y2:`${r(0)}%`,stroke:"hsl(var(--foreground))",strokeWidth:"2",opacity:"0.3"})]}),n.jsx("div",{className:"absolute inset-8 w-[calc(100%-4rem)] h-[calc(100%-4rem)]",children:e.map(m=>{const p=t(m.downsideRisk),g=r(m.shockBenefit),b=a(m.raroc),v=u===m.optionId;return n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("div",{className:"absolute rounded-full cursor-pointer transition-all duration-200",style:{left:`${p}%`,top:`${g}%`,width:`${b}px`,height:`${b}px`,backgroundColor:s[m.creditRiskLevel],transform:"translate(-50%, -50%)",opacity:v?1:.7,zIndex:v?10:1,boxShadow:v?"0 4px 12px rgba(0,0,0,0.2)":"none"},onMouseEnter:()=>f(m.optionId),onMouseLeave:()=>f(null)})}),n.jsx(St,{className:"max-w-xs",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"font-semibold",children:m.optionLabel}),n.jsxs("div",{className:"text-xs space-y-0.5",children:[n.jsxs("div",{children:["Downside Risk (VaR95):"," ",n.jsxs("span",{className:"font-medium",children:["$",m.downsideRisk.toFixed(0)]})]}),n.jsxs("div",{children:["Shock Benefit:"," ",n.jsxs("span",{className:"font-medium",children:["$",m.shockBenefit.toFixed(0)]})]}),n.jsxs("div",{children:["RAROC:"," ",n.jsxs("span",{className:"font-medium",children:[(m.raroc*100).toFixed(1),"%"]})]}),n.jsxs("div",{children:["Credit Risk:"," ",n.jsx(be,{variant:"outline",className:"text-xs",style:{borderColor:s[m.creditRiskLevel],color:s[m.creditRiskLevel]},children:m.creditRiskLevel})]})]})]})})]})},m.optionId)})}),n.jsxs("div",{className:"absolute bottom-0 left-8 right-8 flex justify-between text-xs text-muted-foreground",children:[n.jsxs("span",{children:["$",i.toFixed(0)]}),n.jsxs("span",{children:["$",o.toFixed(0)]})]}),n.jsxs("div",{className:"absolute top-8 bottom-8 left-0 flex flex-col justify-between text-xs text-muted-foreground",children:[n.jsxs("span",{className:"pl-1",children:["$",d.toFixed(0)]}),n.jsxs("span",{className:"pl-1",children:["$",l.toFixed(0)]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(()=>{const m=e.reduce((p,g)=>g.shockBenefit>p.shockBenefit?g:p);return n.jsxs(Ae,{className:"bg-muted/30",children:[n.jsx(He,{className:"pb-3",children:n.jsx(Ge,{className:"text-sm font-medium text-muted-foreground",children:"Most Resilient"})}),n.jsx(Re,{children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"font-semibold text-sm",children:m.optionLabel}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Gains $",m.shockBenefit.toFixed(0)," from uncertainty"]})]})})]})})(),(()=>{const m=e.reduce((p,g)=>g.downsideRisk<p.downsideRisk?g:p);return n.jsxs(Ae,{className:"bg-muted/30",children:[n.jsx(He,{className:"pb-3",children:n.jsx(Ge,{className:"text-sm font-medium text-muted-foreground",children:"Lowest Downside"})}),n.jsx(Re,{children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"font-semibold text-sm",children:m.optionLabel}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["VaR95: $",m.downsideRisk.toFixed(0)]})]})})]})})(),(()=>{const m=e.reduce((p,g)=>g.raroc>p.raroc?g:p);return n.jsxs(Ae,{className:"bg-muted/30",children:[n.jsx(He,{className:"pb-3",children:n.jsx(Ge,{className:"text-sm font-medium text-muted-foreground",children:"Best RAROC"})}),n.jsx(Re,{children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"font-semibold text-sm",children:m.optionLabel}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["RAROC: ",(m.raroc*100).toFixed(1),"%"]})]})})]})})()]})]})}function MRe(e,t=7,r=7){if(e.length<t)return[];const a=[],s=1440*60*1e3,i=e[e.length-1].timestamp,o=e.slice(-t).map(f=>f.value),l=o.reduce((f,m)=>f+m,0)/t,d=o.reduce((f,m)=>f+Math.pow(m-l,2),0)/t,u=Math.sqrt(d);for(let f=1;f<=r;f++){const m=i+f*s,p=Math.max(.3,1-f/r);a.push({timestamp:m,predicted:l,confidence:p,lower_bound:l-1.96*u,upper_bound:l+1.96*u})}return a}function DRe(e,t=7){if(e.length<3)return[];const r=e.length,a=1440*60*1e3,s=e[0].timestamp,i=e.map((T,O)=>(T.timestamp-s)/a),o=e.map(T=>T.value),l=i.reduce((T,O)=>T+O,0),d=o.reduce((T,O)=>T+O,0),u=i.reduce((T,O,R)=>T+O*o[R],0),f=i.reduce((T,O)=>T+O*O,0),m=(r*u-l*d)/(r*f-l*l),p=(d-m*l)/r,g=d/r,b=o.reduce((T,O)=>T+Math.pow(O-g,2),0),y=1-o.reduce((T,O,R)=>T+Math.pow(O-(m*i[R]+p),2),0)/b,j=o.map((T,O)=>T-(m*i[O]+p)),_=Math.sqrt(j.reduce((T,O)=>T+O*O,0)/(r-2)),C=[],A=e[e.length-1].timestamp,S=i[i.length-1];for(let T=1;T<=t;T++){const O=A+T*a,R=S+T,M=m*R+p,I=Math.max(.3,y*(1-T/(t*2)));C.push({timestamp:O,predicted:M,confidence:I,lower_bound:M-1.96*_,upper_bound:M+1.96*_})}return C}function LRe(e,t=.3,r=7){if(e.length<2)return[];const a=1440*60*1e3,s=e.map(p=>p.value),i=[s[0]];for(let p=1;p<s.length;p++)i.push(t*s[p]+(1-t)*i[p-1]);const o=s.map((p,g)=>g>0?p-i[g-1]:0),l=o.reduce((p,g)=>p+g*g,0)/(o.length-1),d=Math.sqrt(l),u=[],f=e[e.length-1].timestamp,m=i[i.length-1];for(let p=1;p<=r;p++){const g=f+p*a,b=Math.max(.3,1-p/r);u.push({timestamp:g,predicted:m,confidence:b,lower_bound:m-1.96*d,upper_bound:m+1.96*d})}return u}function IRe(e){if(e.length<3)return{direction:"stable",strength:0,slope:0,r_squared:0};const t=e.length,r=1440*60*1e3,a=e[0].timestamp,s=e.map((A,S)=>(A.timestamp-a)/r),i=e.map(A=>A.value),o=s.reduce((A,S)=>A+S,0),l=i.reduce((A,S)=>A+S,0),d=s.reduce((A,S,T)=>A+S*i[T],0),u=s.reduce((A,S)=>A+S*S,0),f=(t*d-o*l)/(t*u-o*o),m=(l-f*o)/t,p=l/t,g=i.reduce((A,S)=>A+Math.pow(S-p,2),0),v=1-i.reduce((A,S,T)=>A+Math.pow(S-(f*s[T]+m),2),0)/g,j=f/p*100;let _;Math.abs(j)<.5?_="stable":f>0?_="up":_="down";const C=Math.min(1,Math.abs(v));return{direction:_,strength:C,slope:f,r_squared:v}}function $Re(e,t,r=2.5){if(e.length<5)return{isAnomaly:!1,score:0};const a=e.map(m=>m.value),s=a.reduce((m,p)=>m+p,0)/a.length,i=a.reduce((m,p)=>m+Math.pow(p-s,2),0)/a.length,o=Math.sqrt(i),l=Math.abs((t-s)/o),d=l>r,u=Math.min(1,l/(r*2));let f;return d&&(t>s?f=`Value is ${l.toFixed(1)} standard deviations above historical average`:f=`Value is ${l.toFixed(1)} standard deviations below historical average`),{isAnomaly:d,score:u,reason:f}}function FRe(e,t=7){const r=MRe(e,7,t),a=DRe(e,t),s=LRe(e,.3,t),i=r.reduce((d,u)=>d+u.confidence,0)/(r.length||1),o=a.reduce((d,u)=>d+u.confidence,0)/(a.length||1),l=s.reduce((d,u)=>d+u.confidence,0)/(s.length||1);return o>=i&&o>=l?{method:"linear_regression",forecast:a,confidence:o}:l>=i?{method:"exponential_smoothing",forecast:s,confidence:l}:{method:"moving_average",forecast:r,confidence:i}}function BRe({decisionId:e,linkedSignals:t,scenarioVars:r,onUpdateSignals:a,onAuditEvent:s}){const[i,o]=N.useState(!1),[l,d]=N.useState({direction:"positive",sensitivity:.5}),[u,f]=N.useState(null),[m,p]=N.useState(!1),g=UAe;N.useEffect(()=>{if(l.signal_id){const A=g.find(S=>S.id===l.signal_id);f(A||null)}else f(null)},[l.signal_id]);const b=()=>{if(!l.signal_id||!l.variable_name)return;const A=g.find(O=>O.id===l.signal_id),S={signal_id:l.signal_id,variable_name:l.variable_name,direction:l.direction||"positive",sensitivity:l.sensitivity||.5,signal_label:A==null?void 0:A.label,last_value:A==null?void 0:A.currentValue,last_updated:Date.now()},T=[...t,S];a(T),s("decision.signal_linked",{decisionId:e,signalId:S.signal_id,variableName:S.variable_name,direction:S.direction,sensitivity:S.sensitivity}),d({direction:"positive",sensitivity:.5}),o(!1)},v=A=>{const S=t.filter(T=>T.signal_id!==A);a(S),s("decision.signal_unlinked",{decisionId:e,signalId:A})},y=(A,S)=>{const T=t.map(O=>O.signal_id===A?{...O,sensitivity:S}:O);a(T),s("decision.signal_sensitivity_updated",{decisionId:e,signalId:A,sensitivity:S})},j=A=>A==="positive"?$r:fa,_=A=>A==="positive"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",C=A=>A>=.8?"Very High":A>=.6?"High":A>=.4?"Medium":A>=.2?"Low":"Very Low";return n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ge,{className:"text-base",children:"Linked Signals"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{children:n.jsx(Or,{className:"h-4 w-4 text-muted-foreground"})}),n.jsxs(St,{className:"max-w-xs",children:[n.jsx("p",{className:"font-semibold mb-1",children:"What live signals should affect this choice?"}),n.jsx("p",{className:"text-xs",children:"Connects your decision to real-world data  like cost, demand, or market signals. When a linked signal updates, the decision is tagged for re-evaluation."})]})]})})]}),n.jsx(mt,{children:"Connect real-world data to scenario variables"})]}),n.jsxs(Nr,{open:i,onOpenChange:o,children:[n.jsx(ld,{asChild:!0,children:n.jsxs(le,{size:"sm",variant:"outline",children:[n.jsx(Pn,{className:"h-4 w-4 mr-2"}),"Link Signal"]})}),n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Link Signal to Decision"}),n.jsx(Sr,{children:"Connect a live signal to a scenario variable"})]}),n.jsxs("div",{className:"space-y-4 pt-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"signal",children:"Signal Source"}),n.jsxs(Et,{value:l.signal_id,onValueChange:A=>d({...l,signal_id:A}),children:[n.jsx(kt,{id:"signal",children:n.jsx(Tt,{placeholder:"Select a signal..."})}),n.jsx(Ot,{children:g.map(A=>n.jsx(we,{value:A.id,children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:A.label}),n.jsx(be,{variant:"outline",className:"text-xs",children:A.category})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Current: ",A.currentValue.toFixed(2)," ",A.unit]}),A.trend&&n.jsx(be,{variant:"secondary",className:"text-xs",children:A.trend==="up"?"":A.trend==="down"?"":""})]})]})},A.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"variable",children:"Scenario Variable"}),n.jsxs(Et,{value:l.variable_name,onValueChange:A=>d({...l,variable_name:A}),children:[n.jsx(kt,{id:"variable",children:n.jsx(Tt,{placeholder:"Select a variable..."})}),n.jsx(Ot,{children:r.map(A=>n.jsx(we,{value:A.key,children:A.label},A.key))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"direction",children:"Impact Direction"}),n.jsxs(Et,{value:l.direction,onValueChange:A=>d({...l,direction:A}),children:[n.jsx(kt,{id:"direction",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"positive",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx($r,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{children:"Positive (signal  = variable )"})]})}),n.jsx(we,{value:"negative",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fa,{className:"h-4 w-4 text-red-600"}),n.jsx("span",{children:"Negative (signal  = variable )"})]})})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ne,{htmlFor:"sensitivity",children:"Sensitivity"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[C(l.sensitivity||.5)," (",((l.sensitivity||.5)*100).toFixed(0),"%)"]})]}),n.jsx(yg,{id:"sensitivity",min:0,max:1,step:.1,value:[l.sensitivity||.5],onValueChange:([A])=>d({...l,sensitivity:A})}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"How strongly should this signal affect the variable?"})]}),u&&n.jsxs("div",{className:"space-y-3 p-3 bg-muted/50 rounded-lg border border-border",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Signal Details"}),n.jsxs(le,{variant:"ghost",size:"sm",onClick:()=>p(!m),children:[m?"Hide":"Show"," Forecast"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Category"}),n.jsx("div",{className:"font-medium capitalize",children:u.category})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Update Frequency"}),n.jsx("div",{className:"font-medium capitalize",children:u.updateFrequency})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Current Value"}),n.jsxs("div",{className:"font-medium",children:[u.currentValue.toFixed(2)," ",u.unit]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Trend"}),n.jsxs("div",{className:"flex items-center gap-1",children:[u.trend==="up"&&n.jsx($r,{className:"h-3 w-3 text-green-600"}),u.trend==="down"&&n.jsx(fa,{className:"h-3 w-3 text-red-600"}),n.jsx("span",{className:"font-medium capitalize",children:u.trend})]})]})]}),m&&u.historicalData.length>0&&n.jsxs("div",{className:"space-y-2 pt-2 border-t border-border",children:[n.jsx("div",{className:"text-sm font-medium",children:"7-Day Forecast"}),(()=>{const A=FRe(u.historicalData,7);IRe(u.historicalData);const S=$Re(u.historicalData,u.currentValue);return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsx("span",{className:"text-muted-foreground",children:"Method"}),n.jsx(be,{variant:"outline",className:"text-xs",children:A.method.replace("_"," ")})]}),n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsx("span",{className:"text-muted-foreground",children:"Confidence"}),n.jsxs("span",{className:"font-medium",children:[(A.confidence*100).toFixed(0),"%"]})]}),S.isAnomaly&&n.jsxs("div",{className:"flex items-start gap-2 p-2 bg-amber-500/10 border border-amber-500/20 rounded text-xs",children:[n.jsx(tn,{className:"h-3 w-3 text-amber-600 mt-0.5 flex-shrink-0"}),n.jsxs("span",{className:"text-amber-600 dark:text-amber-400",children:["Anomaly detected: ",S.reason]})]}),n.jsx("div",{className:"space-y-1",children:A.forecast.slice(0,3).map((T,O)=>n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Day +",O+1]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-mono",children:T.predicted.toFixed(2)}),n.jsxs(be,{variant:"secondary",className:"text-xs",children:[(T.confidence*100).toFixed(0),"%"]})]})]},O))})]})})()]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:u.description})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[n.jsx(le,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),n.jsx(le,{onClick:b,disabled:!l.signal_id||!l.variable_name,children:"Link Signal"})]})]})]})]})]})}),n.jsx(Re,{children:t.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(vl,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{className:"text-sm mb-2",children:"No signals linked yet"}),n.jsx("p",{className:"text-xs",children:"Link live signals to automatically update your decision when real-world data changes"})]}):n.jsxs("div",{className:"space-y-3",children:[t.map(A=>{const S=j(A.direction),T=_(A.direction);return n.jsxs("div",{className:"p-3 border border-border rounded-lg space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(vl,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"font-medium text-sm",children:A.signal_label||A.signal_id}),n.jsx(S,{className:`h-3 w-3 ${T}`})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Affects:"," ",n.jsx("span",{className:"font-medium",children:A.variable_name})]}),A.last_value!==void 0&&n.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Current value:"," ",n.jsx("span",{className:"font-medium",children:A.last_value})]})]}),n.jsx(le,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>v(A.signal_id),children:n.jsx(mo,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ne,{className:"text-xs",children:"Sensitivity"}),n.jsxs(be,{variant:"secondary",className:"text-xs",children:[C(A.sensitivity)," (",(A.sensitivity*100).toFixed(0),"%)"]})]}),n.jsx(yg,{min:0,max:1,step:.1,value:[A.sensitivity],onValueChange:([O])=>y(A.signal_id,O),className:"cursor-pointer"})]}),A.last_updated&&n.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t border-border",children:["Last updated:"," ",new Date(A.last_updated).toLocaleString()]})]},A.signal_id)}),n.jsx("div",{className:"pt-3 border-t border-border",children:n.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:[n.jsx(tn,{className:"h-4 w-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.jsx("p",{className:"font-medium mb-1",children:"Auto Re-evaluation"}),n.jsx("p",{children:"When any linked signal updates, this decision will be tagged for re-evaluation. You'll be notified to review and re-simulate with updated parameters."})]})]})})]})})]})}function zRe(e){return e.includes("cost")?"Financial":e.includes("demand")?"Market":e.includes("volatility")?"Risk":e.includes("supply")?"Operational":e.includes("sentiment")?"Customer":e.includes("competitor")?"Competitive":"Other"}function qRe(e){const t=Math.abs(e*100);return t>20?"critical":t>10?"high":t>5?"medium":"low"}function LX(e,t){try{const r=`retina:decisions:${t}`,a=localStorage.getItem(r);return a?JSON.parse(a).filter(i=>i.linked_signals&&i.linked_signals.some(o=>o.signal_id===e)).map(i=>({id:i.id,title:i.title,status:i.status||"active"})):[]}catch(r){return console.error("Failed to get affected decisions:",r),[]}}function HF(e){const r=Date.now()-1440*60*1e3;try{const a=`retina:signal-updates:${e}`,s=localStorage.getItem(a);if(!s)return[];const o=JSON.parse(s).filter(u=>u.timestamp>r),l=new Map;o.forEach(u=>{const f=l.get(u.signal_id);(!f||u.timestamp>f.timestamp)&&l.set(u.signal_id,u)});const d=[];return l.forEach(u=>{const f=LX(u.signal_id,e),m=qRe(u.change_percent);d.push({signal_id:u.signal_id,signal_label:u.signal_label,old_value:u.old_value,new_value:u.new_value,change_percent:u.change_percent,timestamp:u.timestamp,affected_decisions:f.length,signal_type:zRe(u.signal_id),severity:m})}),d}catch(a){return console.error("Failed to get recent signal updates:",a),[]}}function URe(e,t,r=7){try{const a=`retina:signal-updates:${t}`,s=localStorage.getItem(a);if(!s)return[];const i=JSON.parse(s),o=Date.now()-r*24*60*60*1e3;return i.filter(d=>d.signal_id===e&&d.timestamp>o).sort((d,u)=>d.timestamp-u.timestamp).map(d=>({timestamp:d.timestamp,value:d.new_value,label:new Date(d.timestamp).toLocaleDateString()}))}catch(a){return console.error("Failed to get signal historical data:",a),[]}}function VRe(e,t){const r=["Signal ID","Signal Label","Type","Old Value","New Value","Change %","Severity","Affected Decisions","Timestamp"],a=e.map(d=>[d.signal_id,d.signal_label,d.signal_type||"Other",d.old_value.toFixed(2),d.new_value.toFixed(2),(d.change_percent*100).toFixed(2)+"%",d.severity,d.affected_decisions.toString(),new Date(d.timestamp).toISOString()]),s=[r,...a].map(d=>d.join(",")).join(`
`),i=new Blob([s],{type:"text/csv"}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=`signal-changes-${t}-${Date.now()}.csv`,l.click(),URL.revokeObjectURL(o)}function HRe(e,t){const r=["Signal Changes Report",`Tenant: ${t}`,`Generated: ${new Date().toLocaleString()}`,"","Signal Updates (Last 24 Hours):","",...e.map(o=>`${o.signal_label} (${o.signal_id})
  Type: ${o.signal_type||"Other"}
  Change: ${o.old_value.toFixed(2)}  ${o.new_value.toFixed(2)} (${(o.change_percent*100).toFixed(2)}%)
  Severity: ${o.severity}
  Affected Decisions: ${o.affected_decisions}
  Updated: ${new Date(o.timestamp).toLocaleString()}
`)].join(`
`),a=new Blob([r],{type:"text/plain"}),s=URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download=`signal-changes-${t}-${Date.now()}.txt`,i.click(),URL.revokeObjectURL(s)}function GF(e,t){const r=`retina:notifications:${t}`;try{const a=localStorage.getItem(r),s=a?JSON.parse(a):[],i={id:`signal-critical-${e.signal_id}-${Date.now()}`,type:"signal_critical",title:"Critical Signal Change Detected",message:`${e.signal_label} changed by ${(Math.abs(e.change_percent)*100).toFixed(1)}%. Review affected decisions immediately.`,severity:"critical",signal_id:e.signal_id,signal_label:e.signal_label,change_percent:e.change_percent,affected_decisions:e.affected_decisions,timestamp:Date.now(),read:!1};s.push(i);const o=s.slice(-50);return localStorage.setItem(r,JSON.stringify(o)),i}catch(a){return console.error("Failed to create notification:",a),null}}function GRe(e){const t=Date.now(),r=[{signal_id:"sig-cost-index",signal_label:"Cost Index (CPI)",old_value:285.2,new_value:302.8,change_percent:.062,timestamp:t-7200*1e3},{signal_id:"sig-demand-score",signal_label:"Demand Score",old_value:72.5,new_value:68.3,change_percent:-.058,timestamp:t-300*60*1e3},{signal_id:"sig-market-volatility",signal_label:"Market Volatility Index",old_value:18.3,new_value:24.7,change_percent:.35,timestamp:t-480*60*1e3},{signal_id:"sig-supply-chain",signal_label:"Supply Chain Health",old_value:91.2,new_value:87.5,change_percent:-.041,timestamp:t-720*60*1e3}],a=`retina:signal-updates:${e}`;localStorage.setItem(a,JSON.stringify(r))}function IX({tenantId:e,className:t=""}){var _;const[r,a]=N.useState(!1),[s,i]=N.useState([]),[o,l]=N.useState("all"),[d,u]=N.useState("all"),[f,m]=N.useState(null),{decisions:p}=Vo();N.useEffect(()=>{GRe(e);const C=HF(e);i(C),C.forEach(S=>{S.severity==="critical"&&GF(S,e)});const A=setInterval(()=>{const S=HF(e);i(S),S.forEach(T=>{T.severity==="critical"&&GF(T,e)})},6e4);return()=>clearInterval(A)},[e]);const b=[...s.filter(C=>!(o!=="all"&&C.signal_type!==o||d!=="all"&&C.severity!==d))].sort((C,A)=>Math.abs(A.change_percent)-Math.abs(C.change_percent)),v=Array.from(new Set(s.map(C=>C.signal_type).filter(Boolean))),y=C=>LX(C,e),j=f?URe(f,e,7):[];return s.length===0?null:n.jsxs(n.Fragment,{children:[n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("button",{onClick:()=>a(!0),className:`w-full px-4 py-2 bg-blue-500/10 dark:bg-blue-500/20 border border-blue-500/20 rounded-lg hover:bg-blue-500/20 dark:hover:bg-blue-500/30 transition-colors ${t}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx($i,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 animate-spin",style:{animationDuration:"3s"}}),n.jsxs("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:[s.length," active signal",s.length!==1?"s":""," refreshed in last 24h"]}),n.jsx(be,{variant:"outline",className:"bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-500/30",children:"What's changing right now?"})]})})}),n.jsx(St,{children:n.jsx("p",{className:"text-sm",children:"Keeps you aware of fresh data affecting your decisions."})})]})}),n.jsx(Nr,{open:r,onOpenChange:a,children:n.jsxs(gr,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx($i,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"What's changing right now?"]}),n.jsx(Sr,{children:"Signal updates from the last 24 hours, sorted by impact"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-4 pb-4 border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Cg,{className:"w-4 h-4 text-muted-foreground"}),n.jsxs(Et,{value:o,onValueChange:l,children:[n.jsx(kt,{className:"w-[150px]",children:n.jsx(Tt,{placeholder:"All Types"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Types"}),v.map(C=>n.jsx(we,{value:C,children:C},C))]})]})]}),n.jsxs(Et,{value:d,onValueChange:u,children:[n.jsx(kt,{className:"w-[150px]",children:n.jsx(Tt,{placeholder:"All Severity"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Severity"}),n.jsx(we,{value:"critical",children:"Critical"}),n.jsx(we,{value:"high",children:"High"}),n.jsx(we,{value:"medium",children:"Medium"}),n.jsx(we,{value:"low",children:"Low"})]})]}),n.jsx("div",{className:"ml-auto flex items-center gap-2",children:n.jsxs(Fp,{children:[n.jsx(Bp,{asChild:!0,children:n.jsxs(le,{variant:"outline",size:"sm",children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Export"]})}),n.jsxs(Lh,{children:[n.jsxs(gc,{onClick:()=>VRe(b,e),children:[n.jsx(cs,{className:"w-4 h-4 mr-2"}),"Export as CSV"]}),n.jsxs(gc,{onClick:()=>HRe(b,e),children:[n.jsx(cs,{className:"w-4 h-4 mr-2"}),"Export as PDF"]})]})]})})]}),n.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["Showing ",b.length," of ",s.length," signal updates"]}),n.jsxs(si,{defaultValue:"list",className:"mt-4",children:[n.jsxs(zs,{children:[n.jsx(hr,{value:"list",children:"Signal List"}),n.jsx(hr,{value:"trends",children:"Historical Trends"})]}),n.jsx(Cr,{value:"list",className:"space-y-4 mt-4",children:b.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:o!=="all"||d!=="all"?"No signal updates match the selected filters":"No signal updates in the last 24 hours"}):b.map(C=>{const A=C.change_percent>0,S=Math.abs(C.change_percent*100),T=y(C.signal_id);return n.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-3 hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[n.jsx("h3",{className:"font-semibold text-sm",children:C.signal_label}),n.jsxs(be,{variant:C.severity==="critical"?"destructive":"outline",className:"text-xs",children:[A?"+":"-",S.toFixed(1),"%"]}),C.signal_type&&n.jsx(be,{variant:"secondary",className:"text-xs",children:C.signal_type}),C.severity==="critical"&&n.jsxs(be,{variant:"destructive",className:"text-xs",children:[n.jsx(vv,{className:"w-3 h-3 mr-1"}),"Critical"]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Signal ID: ",C.signal_id]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium",children:[A?n.jsx($r,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):n.jsx(fa,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),n.jsx("span",{className:A?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:C.new_value.toFixed(2)})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["was ",C.old_value.toFixed(2)]})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Updated ",new Date(C.timestamp).toLocaleString()]}),C.affected_decisions>0&&n.jsxs(be,{variant:"secondary",className:"text-xs",children:[C.affected_decisions," decision",C.affected_decisions!==1?"s":""," ","affected"]})]}),n.jsx("div",{className:"p-3 bg-muted rounded-md",children:n.jsxs("p",{className:"text-sm",children:[n.jsx("strong",{children:"Impact:"})," ",S>20?"Major change detected. Review affected decisions immediately.":S>10?"Significant change. Consider re-evaluating related decisions.":S>5?"Moderate change. Monitor for continued trends.":"Minor fluctuation within normal range."]})}),T.length>0&&n.jsxs("div",{className:"pt-2 border-t border-border",children:[n.jsx("div",{className:"text-xs font-medium mb-2",children:"Affected Decisions:"}),n.jsx("div",{className:"space-y-1",children:T.map(O=>n.jsxs(qr,{to:`/retina/modules/i-decide?id=${O.id}`,className:"flex items-center gap-2 text-xs text-blue-600 dark:text-blue-400 hover:underline",children:[n.jsx(Ph,{className:"w-3 h-3"}),O.title,n.jsx(be,{variant:"outline",className:"text-xs ml-auto",children:O.status})]},O.id))})]}),n.jsxs(le,{variant:"outline",size:"sm",className:"w-full",onClick:()=>m(C.signal_id),children:[n.jsx($r,{className:"w-4 h-4 mr-2"}),"View Historical Trend"]})]},C.signal_id)})}),n.jsx(Cr,{value:"trends",className:"space-y-4 mt-4",children:f?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:((_=b.find(C=>C.signal_id===f))==null?void 0:_.signal_label)||f}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 7 days"})]}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>m(null),children:"Back to List"})]}),j.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No historical data available for this signal"}):n.jsx(id,{config:{},className:"h-[300px] w-full",children:n.jsx(Cl,{width:"100%",height:"100%",children:n.jsxs(Vh,{data:j,children:[n.jsx(hu,{strokeDasharray:"3 3"}),n.jsx(ji,{dataKey:"label",tick:{fontSize:12},angle:-45,textAnchor:"end",height:60}),n.jsx(Dl,{tick:{fontSize:12}}),n.jsx(xf,{}),n.jsx(go,{type:"monotone",dataKey:"value",stroke:"hsl(var(--chart-1))",strokeWidth:2,dot:{r:4}})]})})})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx($r,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a signal from the list to view its historical trend"})]})})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-border",children:[n.jsx(le,{variant:"outline",onClick:()=>a(!1),children:"Close"}),n.jsx(le,{onClick:()=>{a(!1),console.warn('Prevented assignment: `window.location.href = "/retina/revaluation-tags"`')},children:"View Re-evaluation Tags"})]})]})})]})}const Bk={enabled:!0,changeThreshold:.05,batchSize:10,debounceMs:2e3};let $X={...Bk};function WRe(){const e=localStorage.getItem("retina-auto-refresh-config");if(e)try{return JSON.parse(e)}catch{return{...Bk}}return{...Bk}}function KRe(e,t=$X.changeThreshold){return e.some(r=>Math.abs(r.change_percent)>=t)}function YRe(e,t){const a=Vo.getState().decisions.filter(i=>i.tenantId===t),s=[];for(const i of a){if(!i.linked_signals||i.linked_signals.length===0)continue;const o=e.filter(l=>{var d;return(d=i.linked_signals)==null?void 0:d.some(u=>u.signal_id===l.signal_id)});o.length>0&&KRe(o)&&s.push(i)}return s}async function XRe(e,t){try{const r=e.simulationResults||[],a=JRe(e.scenarioVars||[],e.linked_signals||[],t),s=vi(e.options||[],a,e.seed||42,e.runs||1e3,e.utilityParams,e.tcorParams,e.gameConfig,e.optionStrategies,e.dependenceConfig,e.bayesianOverride,e.copulaConfig),i=Vo.getState(),o={...e,simulationResults:s,scenarioVars:a,last_refreshed_at:Date.now()},l=i.decisions.map(d=>d.id===e.id?o:d);return i.setDecisions(l),{decisionId:e.id,decisionTitle:e.title||"Untitled Decision",success:!0,previousResults:r,newResults:s,refreshedAt:Date.now(),triggeredBy:t}}catch(r){return{decisionId:e.id,decisionTitle:e.title||"Untitled Decision",success:!1,error:r instanceof Error?r.message:"Unknown error",refreshedAt:Date.now(),triggeredBy:t}}}function JRe(e,t,r){const a=[...e];for(const s of t){const i=r.find(d=>d.signal_id===s.signal_id);if(!i)continue;const o=a.findIndex(d=>d.key===s.variable_name);if(o===-1)continue;const l=a[o];if(s.direction==="positive"){if(l.dist==="normal"||l.dist==="lognormal"){const d=i.new_value/i.old_value;a[o]={...l,params:[l.params[0]*d,l.params[1]]}}else if(l.dist==="uniform"){const d=i.new_value/i.old_value;a[o]={...l,params:[l.params[0]*d,l.params[1]*d]}}}else if(s.direction==="negative"){if(l.dist==="normal"||l.dist==="lognormal"){const d=i.old_value/i.new_value;a[o]={...l,params:[l.params[0]*d,l.params[1]]}}else if(l.dist==="uniform"){const d=i.old_value/i.new_value;a[o]={...l,params:[l.params[0]*d,l.params[1]*d]}}}}return a}async function ZRe(e,t,r){const a=[],s=$X.batchSize;for(let i=0;i<e.length;i+=s){const o=e.slice(i,i+s),l=await Promise.all(o.map(d=>{const u=t.filter(f=>{var m;return(m=d.linked_signals)==null?void 0:m.some(p=>p.signal_id===f.signal_id)});return XRe(d,u)}));a.push(...l),r&&r(Math.min(i+s,e.length),e.length)}return a}function QRe(e,t){const r=[];for(const a of t){const s=e.find(d=>d.optionId===a.optionId);if(!s)continue;const i=a.ev-s.ev,o=a.var95-s.var95,l=(a.cvar95||0)-(s.cvar95||0);r.push({optionId:a.optionId,optionLabel:a.optionLabel,ev:{old:s.ev,new:a.ev,delta:i,deltaPercent:s.ev!==0?i/Math.abs(s.ev)*100:0},var95:{old:s.var95,new:a.var95,delta:o,deltaPercent:s.var95!==0?o/Math.abs(s.var95)*100:0},cvar95:{old:s.cvar95||0,new:a.cvar95||0,delta:l,deltaPercent:s.cvar95&&s.cvar95!==0?l/Math.abs(s.cvar95)*100:0},utility:s.utility&&a.utility?{old:s.utility,new:a.utility,delta:a.utility-s.utility,deltaPercent:s.utility!==0?(a.utility-s.utility)/Math.abs(s.utility)*100:0}:void 0})}return r}const FX="retina:learning-trace";function BX(e,t){const r=`${FX}:${t}:${e}`,a=localStorage.getItem(r);if(!a)return null;try{return JSON.parse(a)}catch{return null}}function ePe(e,t,r,a){let s=BX(e,t);s||(s={decisionId:e,entries:[],lastUpdated:Date.now()});const i=Math.max(...a.map(d=>Math.abs(d.change_percent*100))),o=[];for(const d of r){if(!d.utility)continue;const u=d.utility.delta,f=i!==0?u/i:0;o.push({timestamp:Date.now(),decisionId:e,optionId:d.optionId,optionLabel:d.optionLabel,previousUtility:d.utility.old,newUtility:d.utility.new,deltaUtility:u,deltaPercent:d.utility.deltaPercent,triggeredBy:a,shockMagnitude:i,recoveryRatio:f})}if(s.entries.push(...o),s.entries.length>100&&(s.entries=s.entries.slice(-100)),s.entries.length>0){const d=s.entries.reduce((u,f)=>u+f.recoveryRatio,0)/s.entries.length;s.antifragilityScore=d}s.lastUpdated=Date.now();const l=`${FX}:${t}:${e}`;return localStorage.setItem(l,JSON.stringify(s)),s}function tPe(e,t,r){const a=Vo.getState(),s=t.filter(o=>Math.abs(o.ev.deltaPercent)>5||Math.abs(o.var95.deltaPercent)>5||Math.abs(o.cvar95.deltaPercent)>5);a.addAudit("decision.auto_refreshed",{decisionId:e.decisionId,decisionTitle:e.decisionTitle,tenantId:r,triggeredBy:e.triggeredBy.map(o=>({signal_id:o.signal_id,signal_label:o.signal_label,change_percent:o.change_percent})),refreshedAt:e.refreshedAt,success:e.success,significantChanges:s.map(o=>({optionId:o.optionId,optionLabel:o.optionLabel,ev_change:o.ev.deltaPercent.toFixed(2)+"%",var95_change:o.var95.deltaPercent.toFixed(2)+"%",cvar95_change:o.cvar95.deltaPercent.toFixed(2)+"%",utility_change:o.utility?o.utility.deltaPercent.toFixed(2)+"%":"N/A"})),message:"Decision auto-updated due to signal change."}),t.length>0&&Zde(e.decisionId,e.decisionTitle,r,e.triggeredBy,t),t.some(o=>o.utility!==void 0)&&(ePe(e.decisionId,r,t,e.triggeredBy),a.addAudit("decision.learning_trace_updated",{decisionId:e.decisionId,decisionTitle:e.decisionTitle,tenantId:r,timestamp:Date.now(),utilityChanges:t.filter(o=>o.utility).map(o=>({optionId:o.optionId,optionLabel:o.optionLabel,deltaUtility:o.utility.delta,deltaPercent:o.utility.deltaPercent})),message:"Learning trace updated."}))}let mA=null,op=[];function rPe(e,t,r){const a=WRe();if(!a.enabled){console.log("[Auto-Refresh] Disabled, skipping refresh");return}op.push(...e),mA&&clearTimeout(mA),mA=setTimeout(async()=>{console.log(`[Auto-Refresh] Processing ${op.length} signal updates for tenant ${t}`);const s=YRe(op,t);if(s.length===0){console.log("[Auto-Refresh] No decisions to refresh"),op=[];return}console.log(`[Auto-Refresh] Refreshing ${s.length} decisions`);const i=await ZRe(s,op,(o,l)=>{console.log(`[Auto-Refresh] Progress: ${o}/${l}`)});for(const o of i)if(o.success&&o.previousResults&&o.newResults){const l=QRe(o.previousResults,o.newResults);tPe(o,l,t)}console.log(`[Auto-Refresh] Completed: ${i.filter(o=>o.success).length} successful, ${i.filter(o=>!o.success).length} failed`),op=[],r&&r(i)},a.debounceMs)}function nPe({open:e,onOpenChange:t,decisionId:r,decisionTitle:a,portfolioDecisionIds:s,portfolioName:i,onAuditEvent:o}){const{tenant:l}=Fr(),[d,u]=N.useState(5),[f,m]=N.useState(""),[p,g]=N.useState(!1),[b,v]=N.useState(null),[y,j]=N.useState(null),[_,C]=N.useState([]),[A,S]=N.useState("generate"),[T,O]=N.useState(!1),R=!!s&&s.length>0,M=N.useMemo(()=>{if(!r)return[];const V=Kj(r,l.tenantId);return V?uRe(V.entries,5):[]},[r,l.tenantId]),I=()=>{const V=f.split(",").map(q=>q.trim()).filter(q=>q.length>0),G={entryCount:d,includeMetadata:p,keywords:V.length>0?V:void 0};if(R&&s){const q=PX(l.tenantId,s,G);q&&(j(q),o==null||o("narrative.generated",{type:"portfolio",portfolioName:i,decisionCount:s.length,entriesIncluded:q.totalEntries,keywords:V.length>0?V:void 0,tenantId:l.tenantId,timestamp:Date.now()}))}else if(r&&a){const q=RX(r,l.tenantId,G);q&&(v(q),o==null||o("narrative.generated",{type:"decision",decisionId:r,decisionTitle:a,entriesIncluded:q.entriesIncluded,keywords:V.length>0?V:void 0,tenantId:l.tenantId,timestamp:Date.now()}))}},D=()=>{const V=f.split(",").map(q=>q.trim()).filter(q=>q.length>0);if(V.length===0)return;const G=dRe(l.tenantId,V);C(G),o==null||o("narrative.searched",{keywords:V,resultsCount:G.length,tenantId:l.tenantId,timestamp:Date.now()})},$=()=>{const V=R?(y==null?void 0:y.portfolioNarrative)||"":(b==null?void 0:b.narrative)||"";navigator.clipboard.writeText(V),O(!0),setTimeout(()=>O(!1),2e3)},K=()=>{if(R&&y){const V=y.portfolioNarrative,G=new Blob([V],{type:"text/markdown"}),q=URL.createObjectURL(G),Y=document.createElement("a");Y.href=q,Y.download=`portfolio-narrative-${Date.now()}.md`,Y.click(),URL.revokeObjectURL(q)}else if(b){const V=hRe(b),G=new Blob([V],{type:"text/markdown"}),q=URL.createObjectURL(G),Y=document.createElement("a");Y.href=q,Y.download=`narrative-${b.decisionId}-${Date.now()}.md`,Y.click(),URL.revokeObjectURL(q)}o==null||o("narrative.downloaded",{type:R?"portfolio":"decision",format:"markdown",tenantId:l.tenantId,timestamp:Date.now()})},U=()=>{if(R&&y){const V=y.portfolioNarrative,G=new Blob([V],{type:"text/plain"}),q=URL.createObjectURL(G),Y=document.createElement("a");Y.href=q,Y.download=`portfolio-narrative-${Date.now()}.txt`,Y.click(),URL.revokeObjectURL(q)}else if(b){const V=fRe(b),G=new Blob([V],{type:"text/plain"}),q=URL.createObjectURL(G),Y=document.createElement("a");Y.href=q,Y.download=`narrative-${b.decisionId}-${Date.now()}.txt`,Y.click(),URL.revokeObjectURL(q)}o==null||o("narrative.downloaded",{type:R?"portfolio":"decision",format:"text",tenantId:l.tenantId,timestamp:Date.now()})},J=N.useMemo(()=>b?mRe(b):null,[b]);return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(cs,{className:"h-5 w-5"}),"Generate Summary Narrative"]}),n.jsxs(Sr,{className:"flex items-center gap-2",children:["Quick summary for reports",n.jsxs("div",{className:"group relative",children:[n.jsx(Or,{className:"h-4 w-4 text-muted-foreground cursor-help"}),n.jsx("div",{className:"absolute left-0 top-6 w-64 p-2 bg-popover border border-border rounded-md shadow-lg text-xs text-popover-foreground opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:"Turns recent events into a short story for leadership updates."})]})]})]}),n.jsxs(si,{value:A,onValueChange:V=>S(V),children:[n.jsxs(zs,{className:"grid w-full grid-cols-2",children:[n.jsx(hr,{value:"generate",children:"Generate"}),n.jsx(hr,{value:"search",children:"Search"})]}),n.jsxs(Cr,{value:"generate",className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Entry Count"}),n.jsxs(Et,{value:d.toString(),onValueChange:V=>u(parseInt(V)),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"3",children:"Last 3 entries"}),n.jsx(we,{value:"4",children:"Last 4 entries"}),n.jsx(we,{value:"5",children:"Last 5 entries"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Keywords (comma-separated)"}),n.jsx(et,{placeholder:"supplier, cost spike, guardrail",value:f,onChange:V=>m(V.target.value)})]})]}),M.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Suggested keywords:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(V=>n.jsxs(be,{variant:"outline",className:"cursor-pointer hover:bg-accent",onClick:()=>{const G=f.split(",").map(q=>q.trim()).filter(q=>q.length>0);G.includes(V.keyword)||m([...G,V.keyword].join(", "))},children:[V.keyword," (",V.count,")"]},V.keyword))})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(kl,{id:"metadata",checked:p,onCheckedChange:V=>g(V)}),n.jsx("label",{htmlFor:"metadata",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Include metadata details"})]}),n.jsxs(le,{onClick:I,className:"w-full",children:[n.jsx(qi,{className:"h-4 w-4 mr-2"}),"Generate Narrative"]}),(b||y)&&n.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4",children:[J&&n.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[n.jsxs("span",{children:[J.entryCount," entries"]}),n.jsxs("span",{children:[J.wordCount," words"]}),n.jsxs("span",{children:[J.dateSpan," days"]})]}),n.jsx("div",{className:"prose prose-sm max-w-none bg-muted/50 rounded-md p-4",children:n.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm leading-relaxed",children:R?y==null?void 0:y.portfolioNarrative:b==null?void 0:b.narrative})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(le,{onClick:$,variant:"outline",size:"sm",className:"flex-1",children:[n.jsx(bv,{className:"h-4 w-4 mr-2"}),T?"Copied!":"Copy"]}),n.jsxs(le,{onClick:K,variant:"outline",size:"sm",className:"flex-1",children:[n.jsx(qn,{className:"h-4 w-4 mr-2"}),"Markdown"]}),n.jsxs(le,{onClick:U,variant:"outline",size:"sm",className:"flex-1",children:[n.jsx(qn,{className:"h-4 w-4 mr-2"}),"Text"]})]})]})]}),n.jsxs(Cr,{value:"search",className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Search Keywords"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(et,{placeholder:"supplier, cost spike, guardrail",value:f,onChange:V=>m(V.target.value),onKeyDown:V=>{V.key==="Enter"&&D()}}),n.jsxs(le,{onClick:D,children:[n.jsx(Rl,{className:"h-4 w-4 mr-2"}),"Search"]})]})]}),_.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"text-sm font-medium",children:[_.length," decision(s) found"]}),n.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:_.map(V=>n.jsxs("div",{className:"p-3 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsx("div",{className:"flex items-start justify-between gap-4",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"font-semibold text-sm",children:V.decisionTitle}),n.jsxs(be,{variant:"outline",children:[V.matchCount," matches"]})]})}),n.jsx("div",{className:"mt-3 space-y-2",children:V.matchingEntries.slice(0,3).map(G=>n.jsxs("div",{className:"text-xs text-muted-foreground pl-3 border-l-2 border-border",children:[G.summary_text.substring(0,100),G.summary_text.length>100?"...":""]},G.id))})]},V.decisionId))})]}),_.length===0&&f&&n.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No results found. Try different keywords."})]})]}),n.jsx(bn,{children:n.jsx(le,{variant:"outline",onClick:()=>t(!1),children:"Close"})})]})})}function aPe({decisionId:e,decisionTitle:t,className:r="",onAuditEvent:a}){const{tenant:s}=Fr(),[i,o]=N.useState(!1),l=Kj(e,s.tenantId),d=(l==null?void 0:l.entries)||[],u=BX(e,s.tenantId),f=N.useMemo(()=>d.map(v=>{const y=u.find(j=>Math.abs(j.timestamp-v.entry_date)<6e4);if(y&&y.deltaUtility!==void 0){const j=y.deltaUtility;return{...v,utilityChange:j>.01?"up":j<-.01?"down":"neutral",utilityDelta:j}}return v}),[d,u]),m=N.useMemo(()=>[...f].sort((v,y)=>v.entry_date-y.entry_date),[f]),p=v=>{switch(v){case"choice":return n.jsx(ba,{className:"h-5 w-5 text-green-600 dark:text-green-400"});case"update":return n.jsx($r,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"});case"guardrail_adjustment":return n.jsx(Fo,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"});case"incident":return n.jsx(tn,{className:"h-5 w-5 text-red-600 dark:text-red-400"});case"reflection":return n.jsx(rP,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"});default:return null}},g=v=>{if(!v)return null;switch(v){case"up":return n.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[n.jsx(Th,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs font-medium",children:"Utility "})]});case"down":return n.jsxs("div",{className:"flex items-center gap-1 text-red-600 dark:text-red-400",children:[n.jsx(Oh,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs font-medium",children:"Utility "})]});case"neutral":return n.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[n.jsx(wl,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs font-medium",children:"Utility ~"})]})}},b=v=>{switch(v){case"choice":return"bg-green-100 dark:bg-green-900/20 border-green-300 dark:border-green-700";case"update":return"bg-blue-100 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700";case"guardrail_adjustment":return"bg-amber-100 dark:bg-amber-900/20 border-amber-300 dark:border-amber-700";case"incident":return"bg-red-100 dark:bg-red-900/20 border-red-300 dark:border-red-700";case"reflection":return"bg-purple-100 dark:bg-purple-900/20 border-purple-300 dark:border-purple-700";default:return"bg-muted border-border"}};return n.jsxs(Ae,{className:r,children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx($r,{className:"h-5 w-5"}),"How this decision evolved"]}),n.jsxs(mt,{className:"flex items-center gap-2",children:["Shows the journey  from choice to outcome to adjustment.",n.jsxs("div",{className:"group relative",children:[n.jsx("div",{className:"h-4 w-4 rounded-full bg-muted border border-border flex items-center justify-center text-xs text-muted-foreground cursor-help",children:"?"}),n.jsx("div",{className:"absolute left-0 top-6 w-64 p-2 bg-popover border border-border rounded-md shadow-lg text-xs text-popover-foreground opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:"Shows the journey  from choice to outcome to adjustment."})]})]})]}),m.length>0&&n.jsxs(le,{onClick:()=>o(!0),variant:"outline",size:"sm",children:[n.jsx(cs,{className:"h-4 w-4 mr-2"}),"Generate Summary"]})]})}),n.jsx(Re,{children:m.length===0?n.jsxs("div",{className:"text-center py-12 space-y-3",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto",children:n.jsx(rP,{className:"h-8 w-8 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"No story yet"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Journal entries will appear here as the decision evolves"})]}):n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-border"}),n.jsx("div",{className:"space-y-6",children:m.map((v,y)=>n.jsxs("div",{className:"relative pl-14",children:[n.jsx("div",{className:`absolute left-0 w-12 h-12 rounded-full border-2 flex items-center justify-center ${b(v.entry_type)}`,children:p(v.entry_type)}),n.jsxs("div",{className:"border border-border rounded-lg p-4 bg-card hover:bg-accent/50 transition-colors space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(be,{variant:"outline",children:rU(v.entry_type)}),v.auto_generated&&n.jsxs(be,{variant:"secondary",className:"text-xs",children:[n.jsx(qi,{className:"h-3 w-3 mr-1"}),"Auto"]}),g(v.utilityChange)]}),n.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(v.entry_date).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]}),n.jsx("p",{className:"text-sm leading-relaxed",children:v.summary_text}),v.utilityDelta!==void 0&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Utility change:"," ",n.jsxs("span",{className:v.utilityDelta>0?"text-green-600 dark:text-green-400 font-medium":v.utilityDelta<0?"text-red-600 dark:text-red-400 font-medium":"font-medium",children:[v.utilityDelta>0?"+":"",v.utilityDelta.toFixed(2)]})]}),v.metadata&&Object.keys(v.metadata).length>0&&n.jsxs("details",{className:"text-xs",children:[n.jsx("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground",children:"View details"}),n.jsx("div",{className:"mt-2 p-2 bg-muted rounded text-xs",children:n.jsx("pre",{className:"overflow-auto",children:JSON.stringify(v.metadata,null,2)})})]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(v.entry_date).toLocaleTimeString()})]})]},v.id))})]})}),n.jsx(nPe,{open:i,onOpenChange:o,decisionId:e,decisionTitle:t,onAuditEvent:a})]})}function Kg(e){const{tenantId:t}=Fr(),[r,a]=N.useState([]),[s,i]=N.useState(!0),[o,l]=N.useState(null),d=N.useCallback(()=>{try{i(!0);const _=`retina_goals_v2_${t}`,C=localStorage.getItem(_);if(C){const A=JSON.parse(C);a(A)}else a([]);l(null)}catch(_){l("Failed to load goals"),console.error("Error loading goals:",_)}finally{i(!1)}},[t]),u=N.useCallback(_=>{try{const C=`retina_goals_v2_${t}`;localStorage.setItem(C,JSON.stringify(_)),a(_)}catch(C){throw console.error("Error saving goals:",C),new Error("Failed to save goals")}},[t]),f=N.useCallback(async _=>{try{const C=`retina_goals_v2_${t}`,A=localStorage.getItem(C),S=A?JSON.parse(A):[],T=Date.now(),O={..._,id:crypto.randomUUID(),created_at:T,updated_at:T,created_by:"current-user",updated_by:"current-user"},R=[...S,O];return u(R),await new Promise(M=>setTimeout(M,300)),O}catch(C){throw console.error("Error creating goal:",C),new Error("Failed to create goal")}},[t,u]),m=N.useCallback(async(_,C)=>{try{const A=`retina_goals_v2_${t}`,S=localStorage.getItem(A),O=(S?JSON.parse(S):[]).map(M=>M.id===_?{...M,...C,updated_at:Date.now()}:M);u(O),await new Promise(M=>setTimeout(M,300));const R=O.find(M=>M.id===_);if(!R)throw new Error("Goal not found");return R}catch(A){throw console.error("Error updating goal:",A),new Error("Failed to update goal")}},[t,u]),p=N.useCallback(async _=>{try{const C=`retina_goals_v2_${t}`,A=localStorage.getItem(C),T=(A?JSON.parse(A):[]).filter(O=>O.id!==_);u(T),await new Promise(O=>setTimeout(O,300))}catch(C){throw console.error("Error deleting goal:",C),new Error("Failed to delete goal")}},[t,u]),g=N.useCallback(_=>r.filter(C=>C.status===_),[r]),b=N.useCallback(_=>r.filter(C=>C.category===_),[r]),v=N.useCallback(()=>r.filter(_=>_.status==="active"||_.status==="draft"),[r]),y=N.useCallback(_=>{const C=_.toLowerCase();return r.filter(A=>{var S,T;return A.statement.toLowerCase().includes(C)||((S=A.description)==null?void 0:S.toLowerCase().includes(C))||((T=A.tags)==null?void 0:T.some(O=>O.toLowerCase().includes(C)))})},[r]);return N.useEffect(()=>{d()},[d]),{goals:N.useMemo(()=>e?r.filter(_=>{var C;if(e.category&&_.category!==e.category||e.status&&_.status!==e.status||e.time_horizon&&_.time_horizon!==e.time_horizon)return!1;if(e.stakeholder_id){const A=_.owners.some(T=>T.stakeholder_id===e.stakeholder_id),S=_.related_stakeholders.includes(e.stakeholder_id);if(!A&&!S)return!1}if(e.q){const A=e.q.toLowerCase(),S=_.statement.toLowerCase().includes(A),T=(C=_.description)==null?void 0:C.toLowerCase().includes(A),O=_.tags.some(M=>M.toLowerCase().includes(A)),R=_.kpis.some(M=>M.name.toLowerCase().includes(A));if(!S&&!T&&!O&&!R)return!1}return!0}):r,[r,e]),allGoals:r,loading:s,error:o,createGoal:f,updateGoal:m,deleteGoal:p,getGoalsByStatus:g,getGoalsByCategory:b,getActiveGoals:v,searchGoals:y,refetch:d}}function zX({selectedGoals:e,onGoalsChange:t,className:r}){const[a,s]=N.useState(!1),[i,o]=N.useState(""),[l,d]=N.useState("all"),[u,f]=N.useState(e),{goals:m,loading:p}=Kg({status:"active"}),g=N.useMemo(()=>m.filter(S=>{var R;const T=!i||S.statement.toLowerCase().includes(i.toLowerCase())||((R=S.description)==null?void 0:R.toLowerCase().includes(i.toLowerCase()))||S.tags.some(M=>M.toLowerCase().includes(i.toLowerCase())),O=l==="all"||S.category===l;return T&&O}),[m,i,l]),b=S=>{u.findIndex(O=>O.goal_id===S.id)>=0?f(u.filter(O=>O.goal_id!==S.id)):f([...u,{goal_id:S.id,goal_statement:S.statement,goal_category:S.category,linked_kpis:S.kpis.map(O=>O.id||O.name)}])},v=(S,T)=>{f(u.map(O=>O.goal_id===S?O.linked_kpis.indexOf(T)>=0?{...O,linked_kpis:O.linked_kpis.filter(M=>M!==T)}:{...O,linked_kpis:[...O.linked_kpis,T]}:O))},y=()=>{t(u),s(!1)},j=()=>{f(e),s(!1)},_=S=>{t(e.filter(T=>T.goal_id!==S))},C=S=>u.some(T=>T.goal_id===S),A=S=>u.find(T=>T.goal_id===S);return n.jsx("div",{className:r,children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(Ne,{className:"flex items-center gap-2",children:[n.jsx(n3,{className:"w-4 h-4"}),"Linked Goals & KPIs",n.jsx(be,{variant:"destructive",className:"ml-2",children:"Required"})]}),n.jsxs(Nr,{open:a,onOpenChange:s,children:[n.jsx(ld,{asChild:!0,children:n.jsxs(le,{variant:"outline",size:"sm",children:[n.jsx(eu,{className:"w-4 h-4 mr-2"}),e.length>0?`${e.length} Goal${e.length>1?"s":""} Linked`:"Link Goals"]})}),n.jsxs(gr,{className:"max-w-3xl max-h-[80vh]",children:[n.jsxs(xr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(eu,{className:"w-5 h-5"}),"Link Decision to Goals & KPIs"]}),n.jsx(Sr,{children:"Select strategic goals and specific KPIs that this decision will impact. This creates an anchor for decision tracking and outcome measurement."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Rl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(et,{placeholder:"Search goals...",value:i,onChange:S=>o(S.target.value),className:"pl-9"})]}),n.jsxs(Et,{value:l,onValueChange:S=>d(S),children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"All categories"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All categories"}),n.jsx(we,{value:"Financial",children:"Financial"}),n.jsx(we,{value:"Operational",children:"Operational"}),n.jsx(we,{value:"Strategic",children:"Strategic"}),n.jsx(we,{value:"Compliance & Regulatory",children:"Compliance & Regulatory"}),n.jsx(we,{value:"People & Culture",children:"People & Culture"}),n.jsx(we,{value:"Resilience & Continuity",children:"Resilience & Continuity"}),n.jsx(we,{value:"Technology & Digital",children:"Technology & Digital"}),n.jsx(we,{value:"Sustainability & ESG",children:"Sustainability & ESG"}),n.jsx(we,{value:"Customer & Market",children:"Customer & Market"}),n.jsx(we,{value:"Innovation & Learning",children:"Innovation & Learning"})]})]})]}),n.jsx(pu,{className:"h-[400px] border border-border rounded-lg",children:n.jsx("div",{className:"p-4 space-y-3",children:p?n.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"Loading goals..."}):g.length===0?n.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:m.length===0?"No active goals found. Create goals in the Goals & Objectives module first.":"No goals match your search criteria."}):g.map(S=>{const T=C(S.id),O=A(S.id);return n.jsx("div",{className:`p-4 border rounded-lg space-y-3 transition-colors ${T?"border-primary bg-primary/5":"border-border hover:bg-accent/50"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(kl,{checked:T,onCheckedChange:()=>b(S),className:"mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-sm mb-1",children:S.statement}),S.description&&n.jsx("div",{className:"text-xs text-muted-foreground line-clamp-2",children:S.description})]}),n.jsx(be,{variant:"outline",className:"shrink-0",children:S.category})]}),T&&S.kpis.length>0&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-border space-y-2",children:[n.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Select KPIs to track:"}),n.jsx("div",{className:"space-y-2",children:S.kpis.map(R=>{const M=R.id||R.name,I=O==null?void 0:O.linked_kpis.includes(M);return n.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[n.jsx(kl,{checked:I,onCheckedChange:()=>v(S.id,M),className:"shrink-0"}),n.jsxs("div",{className:"flex-1 text-xs",children:[n.jsx("span",{className:"font-medium",children:R.name}),R.target&&n.jsxs("span",{className:"text-muted-foreground ml-2",children:["(Target: ",R.target," ",R.unit,")"]})]}),n.jsx($r,{className:"w-3 h-3 text-muted-foreground"})]},M)})})]})]})]})},S.id)})})}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{className:"text-muted-foreground",children:[u.length," goal",u.length!==1?"s":""," selected"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(le,{variant:"outline",size:"sm",onClick:j,children:"Cancel"}),n.jsxs(le,{size:"sm",onClick:y,disabled:u.length===0,children:[n.jsx(ba,{className:"w-4 h-4 mr-2"}),"Apply Selection"]})]})]})]})]})]})]}),e.length>0?n.jsx("div",{className:"space-y-2",children:e.map(S=>{const T=m.find(R=>R.goal_id===S.goal_id),O=S.linked_kpis.length;return n.jsxs("div",{className:"p-3 border border-border rounded-lg bg-accent/30 space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(ba,{className:"w-4 h-4 text-green-600 shrink-0"}),n.jsx("span",{className:"text-sm font-medium",children:S.goal_statement})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(be,{variant:"outline",className:"text-xs",children:S.goal_category}),n.jsxs(be,{variant:"secondary",className:"text-xs",children:[O," KPI",O!==1?"s":""," linked"]})]})]}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>_(S.goal_id),className:"shrink-0",children:n.jsx(Ui,{className:"w-4 h-4"})})]}),O>0&&T&&n.jsx("div",{className:"pl-6 space-y-1",children:S.linked_kpis.map(R=>{const M=T.kpis.find(I=>(I.id||I.name)===R);return M?n.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[n.jsx($r,{className:"w-3 h-3"}),n.jsxs("span",{children:[M.name,M.target&&n.jsxs("span",{className:"ml-1",children:["(Target: ",M.target," ",M.unit,")"]})]})]},R):null})})]},S.goal_id)})}):n.jsx("div",{className:"p-4 border border-dashed border-destructive/50 rounded-lg bg-destructive/5",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-destructive/10 flex items-center justify-center shrink-0",children:n.jsx(eu,{className:"w-4 h-4 text-destructive"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm font-medium text-destructive mb-1",children:"No goals linked"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Link this decision to strategic goals and KPIs to create an anchor for tracking and measuring outcomes. This field is required before confirming the decision."})]})]})})]})})}function sPe({steps:e,currentStep:t,completedSteps:r,className:a=""}){const s=by;return n.jsx("div",{className:`w-full ${a}`,children:n.jsxs("div",{className:"relative mb-8",children:[n.jsx("div",{className:"absolute top-5 left-0 right-0 h-1 bg-border",style:{borderRadius:s.radius.full}}),n.jsx("div",{className:"absolute top-5 left-0 h-1 bg-primary transition-all duration-500",style:{width:`${t/(e.length-1)*100}%`,borderRadius:s.radius.full}}),n.jsx("div",{className:"relative flex justify-between",children:e.map((i,o)=>{const l=r.includes(o),d=o===t,u=o<t;return n.jsxs("div",{className:"flex flex-col items-center",style:{width:`${100/e.length}%`},children:[n.jsx("div",{className:`
                    flex items-center justify-center w-10 h-10 rounded-full
                    transition-all duration-300 relative z-10
                    ${l||u?"bg-primary text-primary-foreground":d?"bg-primary text-primary-foreground ring-4 ring-primary/20":"bg-background border-2 border-border text-muted-foreground"}
                  `,style:{borderRadius:s.radius.full,fontSize:s.typography.fontSize.base,fontWeight:s.typography.fontWeight.semibold},children:l||u?n.jsx(ba,{className:"w-5 h-5"}):n.jsx("span",{children:o+1})}),n.jsxs("div",{className:`
                    mt-3 text-center transition-colors duration-300
                    ${d?"text-foreground font-semibold":l||u?"text-foreground":"text-muted-foreground"}
                  `,style:{fontSize:s.typography.fontSize.sm,fontWeight:d?s.typography.fontWeight.semibold:s.typography.fontWeight.medium},children:[n.jsx("div",{children:i.label}),i.optional&&n.jsx("div",{className:"text-muted-foreground mt-1",style:{fontSize:s.typography.fontSize.xs,fontWeight:s.typography.fontWeight.normal},children:"(optional)"})]})]},i.id)})})]})})}function lp({title:e,description:t,tip:r,children:a,className:s=""}){const i=by;return n.jsxs(Ae,{className:`w-full ${s}`,style:{borderRadius:i.radius.lg,boxShadow:i.elevation.md},children:[n.jsxs(He,{style:{padding:i.spacing.xl,paddingBottom:i.spacing.lg},children:[n.jsx("h2",{className:"text-foreground font-bold leading-tight",style:{fontSize:i.typography.fontSize["3xl"],fontWeight:i.typography.fontWeight.bold,lineHeight:i.typography.lineHeight.tight,marginBottom:t?i.spacing.sm:0},children:e}),t&&n.jsx("p",{className:"text-muted-foreground",style:{fontSize:i.typography.fontSize.lg,lineHeight:i.typography.lineHeight.relaxed},children:t}),r&&n.jsxs(Fs,{className:"mt-4 bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-900",style:{borderRadius:i.radius.md,padding:i.spacing.md},children:[n.jsx(Fte,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),n.jsx(ei,{className:"text-blue-900 dark:text-blue-100",style:{fontSize:i.typography.fontSize.sm,lineHeight:i.typography.lineHeight.relaxed},children:r})]})]}),n.jsx(Re,{style:{padding:i.spacing.xl,paddingTop:0},children:a})]})}function WF({term:e,children:t,className:r=""}){const a=iPe(e);return a?n.jsx(At,{delayDuration:200,children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:t?n.jsx("span",{className:`cursor-help underline decoration-dotted decoration-muted-foreground underline-offset-4 ${r}`,children:t}):n.jsx("button",{type:"button",className:`inline-flex items-center justify-center w-4 h-4 rounded-full hover:bg-accent transition-colors ${r}`,children:n.jsx(R9,{className:"w-3.5 h-3.5 text-muted-foreground"})})}),n.jsx(St,{side:"top",className:"max-w-xs",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-xs text-muted-foreground uppercase tracking-wide",children:"Technical Term"}),n.jsx("div",{className:"font-medium",children:a.technical})]}),a.plain&&n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-xs text-muted-foreground uppercase tracking-wide",children:"Plain Language"}),n.jsx("div",{className:"text-sm",children:a.plain})]}),a.helpText&&n.jsx("div",{className:"text-xs text-muted-foreground pt-1 border-t border-border",children:a.helpText})]})})]})}):n.jsx(n.Fragment,{children:t})}function iPe(e){const{TERMS:t}=require("@/polymet/data/terms"),r=Object.keys(t).find(a=>a.toLowerCase()===e.toLowerCase());return r?t[r]:null}function oPe({initialData:e,onComplete:t,onCancel:r,tenantId:a}){const s=by,i=[{id:"title",label:"Decision"},{id:"options",label:"Options"},{id:"goals",label:"Goals",optional:!0},{id:"financials",label:"Financials",optional:!0},{id:"risks",label:"Risk Factors",optional:!0},{id:"simulate",label:"Simulate"}],[o,l]=N.useState(0),[d,u]=N.useState([]),[f,m]=N.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",linkedGoals:(e==null?void 0:e.linkedGoals)||[],options:(e==null?void 0:e.options)||[{id:"opt-1",label:"",expectedReturn:100,cost:50},{id:"opt-2",label:"",expectedReturn:120,cost:70}],scenarioVars:(e==null?void 0:e.scenarioVars)||[]}),p=()=>{switch(o){case 0:return f.title.trim().length>0;case 1:return f.options.length>=2&&f.options.every(O=>O.label.trim().length>0);case 2:return!0;case 3:return!0;case 4:return!0;case 5:return!0;default:return!1}},g=()=>{o<i.length-1?(u([...d,o]),l(o+1)):t(f)},b=()=>{o>0&&l(o-1)},v=()=>{o<i.length-1&&(u([...d,o]),l(o+1))},y=()=>{const O=`opt-${f.options.length+1}`;m({...f,options:[...f.options,{id:O,label:"",expectedReturn:100,cost:50}]})},j=O=>{f.options.length>2&&m({...f,options:f.options.filter(R=>R.id!==O)})},_=(O,R,M)=>{m({...f,options:f.options.map(I=>I.id===O?{...I,[R]:M}:I)})},C=()=>{const O=`var-${Date.now()}`;m({...f,scenarioVars:[...f.scenarioVars,{id:O,name:"",appliesTo:"return",dist:"normal",params:{mean:0,sd:.1},weight:1}]})},A=O=>{m({...f,scenarioVars:f.scenarioVars.filter(R=>R.id!==O)})},S=(O,R,M)=>{m({...f,scenarioVars:f.scenarioVars.map(I=>I.id===O?{...I,[R]:M}:I)})},T=()=>{switch(o){case 0:return n.jsx(lp,{title:"What are you deciding?",description:"Give your decision a clear, descriptive title",tip:"A good title helps you and your team quickly understand what this decision is about. For example: 'Choose new office location' or 'Select marketing agency'",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"title",className:"text-base font-medium",children:"Decision Title"}),n.jsx(et,{id:"title",placeholder:"e.g., Choose new office location",value:f.title,onChange:O=>m({...f,title:O.target.value}),className:"text-lg h-12",style:{borderRadius:s.radius.md,fontSize:s.typography.fontSize.lg}})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ne,{htmlFor:"description",className:"text-base font-medium",children:["Description"," ",n.jsx("span",{className:"text-muted-foreground font-normal",children:"(optional)"})]}),n.jsx(ua,{id:"description",placeholder:"Add any context or details...",value:f.description,onChange:O=>m({...f,description:O.target.value}),rows:4,style:{borderRadius:s.radius.md,fontSize:s.typography.fontSize.base}})]})]})});case 1:return n.jsx(lp,{title:"What are your options?",description:"List the choices you're considering (minimum 2)",tip:"Think of these as the different paths you could take. You'll compare them in the next steps.",children:n.jsxs("div",{className:"space-y-4",children:[f.options.map((O,R)=>n.jsxs("div",{className:"flex gap-3 items-start",children:[n.jsx("div",{className:"flex-1",children:n.jsx(et,{placeholder:`Option ${R+1} (e.g., Downtown office, Suburban office)`,value:O.label,onChange:M=>_(O.id,"label",M.target.value),className:"text-base h-12",style:{borderRadius:s.radius.md,fontSize:s.typography.fontSize.base}})}),f.options.length>2&&n.jsx(le,{variant:"ghost",size:"icon",onClick:()=>j(O.id),className:"shrink-0 h-12 w-12",children:n.jsx(mo,{className:"w-4 h-4 text-destructive"})})]},O.id)),n.jsxs(le,{variant:"outline",onClick:y,className:"w-full h-12",style:{borderRadius:s.radius.md,fontSize:s.typography.fontSize.base},children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Add Another Option"]})]})});case 2:return n.jsx(lp,{title:"Link to strategic goals",description:"Connect this decision to your organization's goals (optional)",tip:"Linking to goals helps track how decisions contribute to your strategic objectives. You can skip this step and add goals later.",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx(zX,{selectedGoals:f.linkedGoals,onGoalsChange:O=>m({...f,linkedGoals:O})}),f.linkedGoals.length===0&&n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No goals linked yet. Click "Link Goal" above to connect this decision to your strategic goals.'})]})});case 3:return n.jsx(lp,{title:"Add financial estimates",description:"Quick numbers for each option (optional)",tip:"These estimates help compare options financially. Don't worry about being exact - rough estimates work fine. You can skip this step if you don't have numbers yet.",children:n.jsx("div",{className:"space-y-6",children:f.options.map(O=>n.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-4",style:{borderRadius:s.radius.md,padding:s.spacing.lg},children:[n.jsx("div",{className:"font-semibold text-base",children:O.label||"Unnamed option"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ne,{htmlFor:`return-${O.id}`,className:"text-sm",children:"Expected Return"}),n.jsx(WF,{term:"expectedReturn"})]}),n.jsx(et,{id:`return-${O.id}`,type:"number",placeholder:"100",value:O.expectedReturn||"",onChange:R=>_(O.id,"expectedReturn",Number(R.target.value)),style:{borderRadius:s.radius.md}})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ne,{htmlFor:`cost-${O.id}`,className:"text-sm",children:"Cost"}),n.jsx(WF,{term:"cost"})]}),n.jsx(et,{id:`cost-${O.id}`,type:"number",placeholder:"50",value:O.cost||"",onChange:R=>_(O.id,"cost",Number(R.target.value)),style:{borderRadius:s.radius.md}})]})]})]},O.id))})});case 4:return n.jsx(lp,{title:"Add risk factors",description:"What uncertainties might affect your decision? (optional)",tip:"Risk factors are things that could vary and impact your results - like market demand, costs, or competitor actions. Add 1-2 key factors, or skip this step to use defaults.",children:n.jsx("div",{className:"space-y-4",children:f.scenarioVars.length===0?n.jsxs("div",{className:"text-center py-8 space-y-4",children:[n.jsx("p",{className:"text-muted-foreground",children:"No risk factors added yet. We'll use default market uncertainty factors."}),n.jsxs(le,{variant:"outline",onClick:C,style:{borderRadius:s.radius.md},children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Add a Risk Factor"]})]}):n.jsxs(n.Fragment,{children:[f.scenarioVars.map(O=>n.jsx("div",{className:"p-4 border border-border rounded-lg space-y-3",style:{borderRadius:s.radius.md,padding:s.spacing.lg},children:n.jsxs("div",{className:"flex gap-3 items-start",children:[n.jsx("div",{className:"flex-1",children:n.jsx(et,{placeholder:"e.g., Market demand variability",value:O.name,onChange:R=>S(O.id,"name",R.target.value),style:{borderRadius:s.radius.md}})}),n.jsx(le,{variant:"ghost",size:"icon",onClick:()=>A(O.id),children:n.jsx(mo,{className:"w-4 h-4 text-destructive"})})]})},O.id)),n.jsxs(le,{variant:"outline",onClick:C,className:"w-full",style:{borderRadius:s.radius.md},children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Add Another Risk Factor"]})]})})});case 5:return n.jsx(lp,{title:"Ready to simulate!",description:"Review your decision and run the simulation",tip:"The simulation will analyze your options using advanced risk modeling. This takes just a few seconds.",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Decision"}),n.jsx("div",{className:"text-lg font-semibold",children:f.title}),f.description&&n.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:f.description})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Options"}),n.jsx("div",{className:"space-y-1",children:f.options.map((O,R)=>n.jsxs("div",{className:"text-base",children:[R+1,". ",O.label]},O.id))})]}),f.linkedGoals.length>0&&n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Linked Goals"}),n.jsxs("div",{className:"text-sm",children:[f.linkedGoals.length," goal(s) linked"]})]})]}),n.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-900 rounded-lg",style:{borderRadius:s.radius.md,padding:s.spacing.lg},children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(qi,{className:"w-5 h-5 text-green-600 dark:text-green-400 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-green-900 dark:text-green-100 mb-1",children:"Great work!"}),n.jsxs("div",{className:"text-sm text-green-800 dark:text-green-200",children:["You've completed the setup in just"," ",d.length+1,' steps. Click "Run Simulation" to see your results.']})]})]})})]})});default:return null}};return n.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-8",children:[n.jsx(sPe,{steps:i,currentStep:o,completedSteps:d}),T(),n.jsxs("div",{className:"flex items-center justify-between gap-4",style:{paddingTop:s.spacing.lg},children:[n.jsx(le,{variant:"outline",onClick:o===0?r:b,className:"h-12 px-8",style:{borderRadius:s.radius.md,fontSize:s.typography.fontSize.base},children:o===0?"Cancel":"Back"}),n.jsxs("div",{className:"flex gap-3",children:[i[o].optional&&n.jsx(le,{variant:"ghost",onClick:v,className:"h-12 px-6",style:{borderRadius:s.radius.md,fontSize:s.typography.fontSize.base},children:"Skip for now"}),n.jsx(le,{onClick:g,disabled:!p(),className:"h-12 px-8",style:{borderRadius:s.radius.md,fontSize:s.typography.fontSize.base},children:o===i.length-1?"Run Simulation":"Next"})]})]})]})}function zk({direction:e="horizontal",initialSplit:t=50,minSize:r=200,leftPane:a,rightPane:s,className:i="",onSplitChange:o}){const[l,d]=N.useState(t),[u,f]=N.useState(!1),m=N.useRef(null),p=b=>{b.preventDefault(),f(!0)};N.useEffect(()=>{const b=y=>{if(!u||!m.current)return;const _=m.current.getBoundingClientRect();let C;e==="horizontal"?C=(y.clientX-_.left)/_.width*100:C=(y.clientY-_.top)/_.height*100;const A=r/(e==="horizontal"?_.width:_.height)*100,S=100-A;C=Math.max(A,Math.min(S,C)),d(C),o==null||o(C)},v=()=>{f(!1)};return u&&(document.addEventListener("mousemove",b),document.addEventListener("mouseup",v)),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",v)}},[u,e,r,o]);const g=e==="horizontal";return n.jsxs("div",{ref:m,className:`flex ${g?"flex-row":"flex-col"} w-full h-full ${i}`,style:{userSelect:u?"none":"auto"},children:[n.jsx("div",{className:"overflow-auto",style:{[g?"width":"height"]:`${l}%`,minWidth:g?r:void 0,minHeight:g?void 0:r},children:a}),n.jsx("div",{className:`
          flex items-center justify-center shrink-0
          ${g?"w-2 cursor-col-resize hover:bg-primary/10":"h-2 cursor-row-resize hover:bg-primary/10"}
          ${u?"bg-primary/20":"bg-border"}
          transition-colors
        `,onMouseDown:p,children:n.jsx(r3,{className:`w-4 h-4 text-muted-foreground ${g?"":"rotate-90"}`})}),n.jsx("div",{className:"overflow-auto flex-1",style:{minWidth:g?r:void 0,minHeight:g?void 0:r},children:s})]})}function lPe({direction:e="horizontal",initialSplits:t=[33,33],minSize:r=200,firstPane:a,secondPane:s,thirdPane:i,className:o=""}){return n.jsx(zk,{direction:e,initialSplit:t[0],minSize:r,leftPane:a,rightPane:n.jsx(zk,{direction:e,initialSplit:t[1]/(100-t[0])*100,minSize:r,leftPane:s,rightPane:i}),className:o})}function Wx({title:e,description:t,children:r,config:a,defaultConfig:s,onConfigImport:i,onReset:o,showExpertToggle:l=!0,expertMode:d=!1,onExpertModeChange:u,className:f="",collapsible:m=!1,defaultCollapsed:p=!1,badge:g}){const[b,v]=N.useState(p),y=()=>{if(!a)return;const _=JSON.stringify(a,null,2),C=new Blob([_],{type:"application/json"}),A=URL.createObjectURL(C),S=document.createElement("a");S.href=A,S.download=`${e.toLowerCase().replace(/\s+/g,"-")}-config.json`,S.click(),URL.revokeObjectURL(A)},j=()=>{const _=document.createElement("input");_.type="file",_.accept=".json",_.onchange=async C=>{var S;const A=(S=C.target.files)==null?void 0:S[0];if(A)try{const T=await A.text(),O=JSON.parse(T);i==null||i(O)}catch(T){console.error("Failed to import config:",T),alert("Failed to import configuration. Please check the file format.")}},_.click()};return n.jsxs(Ae,{className:`${f}`,style:{fontSize:zr.typography.fontSize.sm,borderRadius:zr.radius.md},children:[n.jsx(He,{style:{padding:`${zr.spacing.md} ${zr.spacing.lg}`},children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Ge,{style:{fontSize:zr.typography.fontSize.lg,lineHeight:zr.typography.lineHeight.tight},children:e}),g&&n.jsx(be,{variant:"secondary",style:{fontSize:zr.typography.fontSize.xs,padding:`${zr.spacing.xs} ${zr.spacing.sm}`},children:g}),m&&n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>v(!b),className:"ml-auto",children:b?n.jsx(df,{className:"w-4 h-4"}):n.jsx(e3,{className:"w-4 h-4"})})]}),t&&n.jsx(mt,{style:{fontSize:zr.typography.fontSize.xs,lineHeight:zr.typography.lineHeight.normal},children:t})]}),n.jsx("div",{className:"flex items-center gap-1 shrink-0",children:n.jsxs(At,{children:[l&&n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(le,{variant:d?"default":"ghost",size:"sm",onClick:()=>u==null?void 0:u(!d),style:{padding:zr.spacing.sm},children:d?n.jsx(Mh,{className:"w-4 h-4"}):n.jsx(ote,{className:"w-4 h-4"})})}),n.jsx(St,{children:n.jsxs("p",{children:[d?"Hide":"Show"," parameter IDs and technical details"]})})]}),a&&n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(le,{variant:"ghost",size:"sm",onClick:y,style:{padding:zr.spacing.sm},children:n.jsx(qn,{className:"w-4 h-4"})})}),n.jsx(St,{children:n.jsx("p",{children:"Export configuration as JSON"})})]}),i&&n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(le,{variant:"ghost",size:"sm",onClick:j,style:{padding:zr.spacing.sm},children:n.jsx(jv,{className:"w-4 h-4"})})}),n.jsx(St,{children:n.jsx("p",{children:"Import configuration from JSON"})})]}),o&&n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(le,{variant:"ghost",size:"sm",onClick:o,style:{padding:zr.spacing.sm},children:n.jsx(L9,{className:"w-4 h-4"})})}),n.jsx(St,{children:n.jsx("p",{children:"Reset to recommended defaults"})})]})]})})]})}),!b&&n.jsx(Re,{style:{padding:`0 ${zr.spacing.lg} ${zr.spacing.lg}`},children:r})]})}function cPe({columns:e,data:t,expertMode:r=!1,resizable:a=!0,sortable:s=!0,className:i="",onRowClick:o,onSortChange:l}){const[d,u]=N.useState(e.reduce((S,T)=>({...S,[T.id]:T.width||150}),{})),[f,m]=N.useState({columnId:null,direction:null}),[p,g]=N.useState(null),b=N.useRef(0),v=N.useRef(0),y=(S,T)=>{S.preventDefault(),g(T),b.current=S.clientX,v.current=d[T]};N.useEffect(()=>{const S=O=>{if(!p)return;const R=O.clientX-b.current,M=e.find($=>$.id===p),I=(M==null?void 0:M.minWidth)||80,D=Math.max(I,v.current+R);u($=>({...$,[p]:D}))},T=()=>{g(null)};return p&&(document.addEventListener("mousemove",S),document.addEventListener("mouseup",T)),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",T)}},[p,e]);const j=S=>{if(!s)return;const T=e.find(R=>R.id===S);if(!(T!=null&&T.sortable))return;let O="asc";f.columnId===S&&(f.direction==="asc"?O="desc":f.direction==="desc"&&(O=null)),m({columnId:O?S:null,direction:O}),l==null||l(S,O)},_=pe.useMemo(()=>{if(!f.columnId||!f.direction)return t;const S=e.find(T=>T.id===f.columnId);return S?[...t].sort((T,O)=>{const R=typeof S.accessor=="function"?S.accessor(T):T[S.accessor],M=typeof S.accessor=="function"?S.accessor(O):O[S.accessor];if(R===M)return 0;const I=R<M?-1:1;return f.direction==="asc"?I:-I}):t},[t,f,e]),C=(S,T)=>typeof T.accessor=="function"?T.accessor(S):S[T.accessor],A=S=>f.columnId!==S?n.jsx(uee,{className:"w-3 h-3 text-muted-foreground"}):f.direction==="asc"?n.jsx(Th,{className:"w-3 h-3 text-primary"}):n.jsx(Oh,{className:"w-3 h-3 text-primary"});return n.jsx("div",{className:`relative overflow-auto ${i}`,style:{fontSize:zr.typography.fontSize.sm,lineHeight:zr.typography.lineHeight.tight},children:n.jsxs(Ho,{children:[n.jsx(Go,{children:n.jsx(Yn,{children:e.map(S=>n.jsxs(Mt,{className:"relative group",style:{width:d[S.id],minWidth:S.minWidth||80,textAlign:S.align||"left",padding:`${zr.spacing.sm} ${zr.spacing.md}`},children:[n.jsxs("div",{className:"flex items-center gap-2",children:[S.sortable&&s&&n.jsx("button",{onClick:()=>j(S.id),className:"hover:text-foreground transition-colors",children:A(S.id)}),n.jsx("span",{className:"font-semibold truncate",children:S.label}),r&&S.parameterId&&n.jsxs("span",{className:"text-xs text-muted-foreground font-mono",style:{fontSize:zr.typography.fontSize.xs},children:["[",S.parameterId,"]"]})]}),a&&n.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-2 cursor-col-resize opacity-0 group-hover:opacity-100 hover:bg-primary/10 transition-opacity flex items-center justify-center",onMouseDown:T=>y(T,S.id),children:n.jsx(r3,{className:"w-3 h-3 text-muted-foreground"})})]},S.id))})}),n.jsx(Wo,{children:_.map((S,T)=>n.jsx(Yn,{className:o?"cursor-pointer hover:bg-accent/50":"",onClick:()=>o==null?void 0:o(S,T),children:e.map(O=>{const R=C(S,O),M=O.cell?O.cell(R,S):R;return n.jsx(Rt,{style:{width:d[O.id],textAlign:O.align||"left",padding:`${zr.spacing.sm} ${zr.spacing.md}`},children:M},O.id)})},T))})]})})}function Ab(e){const t=Math.max(-1,Math.min(1,e));return t===1?"hsl(210, 90%, 45%)":t>0?`hsl(210, 90%, ${95-t*50}%)`:t===0?"hsl(0, 0%, 95%)":t<0?`hsl(0, 70%, ${95-Math.abs(t)*43}%)`:"hsl(0, 70%, 52%)"}function dPe(e){return Math.abs(e)>.5?"white":"hsl(210, 15%, 12%)"}function uPe({labels:e,matrix:t,showValues:r=!0,cellSize:a=60,className:s="",onCellClick:i}){const[o,l]=N.useState(null);return e.length,n.jsx("div",{className:`overflow-auto ${s}`,children:n.jsx(At,{children:n.jsxs("div",{className:"inline-block",style:{fontSize:zr.typography.fontSize.xs},children:[n.jsxs("div",{className:"flex",children:[n.jsx("div",{style:{width:a,height:a}}),e.map((d,u)=>n.jsx("div",{className:"flex items-center justify-center font-semibold text-center",style:{width:a,height:a,padding:zr.spacing.xs,fontSize:zr.typography.fontSize.xs,lineHeight:zr.typography.lineHeight.tight},children:n.jsx("span",{className:"truncate",title:d,children:d})},u))]}),t.map((d,u)=>n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex items-center justify-end font-semibold pr-2",style:{width:a,height:a,padding:zr.spacing.xs,fontSize:zr.typography.fontSize.xs,lineHeight:zr.typography.lineHeight.tight},children:n.jsx("span",{className:"truncate",title:e[u],children:e[u]})}),d.map((f,m)=>{const p=(o==null?void 0:o.row)===u&&(o==null?void 0:o.col)===m,g=u===m;return n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("button",{className:`
                          flex items-center justify-center border border-border/30
                          transition-all
                          ${i?"cursor-pointer hover:ring-2 hover:ring-primary hover:z-10":""}
                          ${p?"ring-2 ring-primary z-10":""}
                          ${g?"border-primary/50":""}
                        `,style:{width:a,height:a,backgroundColor:Ab(f),color:dPe(f),fontSize:zr.typography.fontSize.xs,fontWeight:g?600:400},onMouseEnter:()=>l({row:u,col:m}),onMouseLeave:()=>l(null),onClick:()=>i==null?void 0:i(u,m,f),children:r&&f.toFixed(2)})}),n.jsx(St,{children:n.jsxs("div",{className:"text-xs space-y-1",children:[n.jsxs("p",{className:"font-semibold",children:[e[u],"  ",e[m]]}),n.jsxs("p",{children:["Correlation: ",f.toFixed(3)]}),g&&n.jsx("p",{className:"text-muted-foreground",children:"(Diagonal)"})]})})]},m)})]},u)),n.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[n.jsx("span",{className:"text-muted-foreground",style:{fontSize:zr.typography.fontSize.xs},children:"Correlation:"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-4 border border-border",style:{backgroundColor:Ab(-1)}}),n.jsx("span",{className:"text-muted-foreground",style:{fontSize:zr.typography.fontSize.xs},children:"-1.0"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-4 border border-border",style:{backgroundColor:Ab(0)}}),n.jsx("span",{className:"text-muted-foreground",style:{fontSize:zr.typography.fontSize.xs},children:"0.0"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-4 border border-border",style:{backgroundColor:Ab(1)}}),n.jsx("span",{className:"text-muted-foreground",style:{fontSize:zr.typography.fontSize.xs},children:"+1.0"})]})]})]})})})}function fPe({decisionId:e,tenantId:t,options:r,scenarioVars:a,runs:s,onConfigChange:i,onAuditEvent:o,onToast:l}){const[d,u]=N.useState("dual"),[f,m]=N.useState(!0),[p,g]=N.useState("game"),[b,v]=N.useState("bayesian"),[y,j]=N.useState("copula"),[_,C]=N.useState(void 0),[A,S]=N.useState(void 0),[T,O]=N.useState(void 0),[R,M]=N.useState(void 0),[I,D]=N.useState(void 0),[$,K]=N.useState(void 0),U=V=>{switch(V){case"game":return n.jsx(Wx,{title:"Game Interaction (22)",description:"Strategy-based multipliers for decision simulation",badge:"Advanced",config:_,onConfigImport:Q=>{C(Q),l==null||l({title:"Configuration imported",description:"Game interaction config loaded"})},onReset:()=>{C(void 0),S(void 0),l==null||l({title:"Reset to defaults",description:"Game interaction config cleared"})},expertMode:f,onExpertModeChange:m,className:"h-full",children:n.jsx(LK,{decisionId:e,tenantId:t,options:r,onConfigChange:(Q,F)=>{C(Q),S(F),i==null||i({game:Q,strategies:F})},onAuditEvent:o||(()=>{})})});case"bayesian":return n.jsx(Wx,{title:"Bayesian Prior",description:"Conjugate Normal-Normal updating with posterior computation",badge:"Advanced",config:T,onConfigImport:Q=>{O(Q),l==null||l({title:"Configuration imported",description:"Bayesian prior config loaded"})},onReset:()=>{O(void 0),l==null||l({title:"Reset to defaults",description:"Bayesian prior config cleared"})},expertMode:f,onExpertModeChange:m,className:"h-full",children:n.jsx(VK,{scenarioVars:a,onConfigChange:Q=>{O(Q),i==null||i({bayesian:Q})},onAuditEvent:o||(()=>{}),onToast:l||(()=>{})})});case"copula":return n.jsx(Wx,{title:"Copula Matrix",description:"kk correlation matrix with Iman-Conover reordering",badge:"Beta",config:R,onConfigImport:Q=>{M(Q),l==null||l({title:"Configuration imported",description:"Copula matrix config loaded"})},onReset:()=>{M(void 0),D(void 0),K(void 0),l==null||l({title:"Reset to defaults",description:"Copula matrix config cleared"})},expertMode:f,onExpertModeChange:m,className:"h-full",children:n.jsx(HK,{scenarioVars:a,onConfigChange:Q=>{M(Q),i==null||i({copula:Q})},achievedMatrix:I,frobeniusError:$,onAuditEvent:o||(()=>{}),runs:s,onToast:l||(()=>{})})});case"correlation":const G=a.length,q=I||Array.from({length:G},(Q,F)=>Array.from({length:G},(z,H)=>F===H?1:Math.random()*.6-.3));return n.jsx(Wx,{title:"Correlation Heatmap",description:"Visual correlation matrix with interactive cells",badge:"Visualization",expertMode:f,onExpertModeChange:m,className:"h-full",children:n.jsx(uPe,{labels:a.map(Q=>Q.name),matrix:q,showValues:!0,cellSize:60,onCellClick:(Q,F,z)=>{console.log(`Correlation: ${a[Q].name}  ${a[F].name} = ${z.toFixed(3)}`)}})});case"variables":const Y=[{id:"name",label:"Variable",accessor:"name",sortable:!0,width:150,parameterId:"var_name"},{id:"appliesTo",label:"Applies To",accessor:"appliesTo",sortable:!0,width:120,parameterId:"applies_to",cell:Q=>n.jsx(be,{variant:"outline",children:Q})},{id:"dist",label:"Distribution",accessor:"dist",sortable:!0,width:120,parameterId:"dist_type",cell:Q=>n.jsx(be,{variant:"secondary",children:Q})},{id:"weight",label:"Weight",accessor:"weight",sortable:!0,width:100,align:"right",parameterId:"weight_val",cell:Q=>(Q==null?void 0:Q.toFixed(2))||"1.00"}];return n.jsx(Wx,{title:"Scenario Variables",description:"Matrix view of all scenario variables",badge:"Data",expertMode:f,onExpertModeChange:m,className:"h-full",children:n.jsx(cPe,{columns:Y,data:a,expertMode:f,resizable:!0,sortable:!0,onRowClick:Q=>{console.log("Selected variable:",Q)}})});default:return n.jsx("div",{className:"p-4 text-muted-foreground",children:"Select a panel"})}},J=({value:V,onChange:G,label:q})=>n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{style:{fontSize:zr.typography.fontSize.xs},children:q}),n.jsxs(Et,{value:V,onValueChange:Y=>G(Y),children:[n.jsx(kt,{style:{fontSize:zr.typography.fontSize.sm,padding:`${zr.spacing.sm} ${zr.spacing.md}`},children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"game",children:"Game Interaction"}),n.jsx(we,{value:"bayesian",children:"Bayesian Prior"}),n.jsx(we,{value:"copula",children:"Copula Matrix"}),n.jsx(we,{value:"correlation",children:"Correlation Heatmap"}),n.jsx(we,{value:"variables",children:"Scenario Variables"})]})]})]});return n.jsxs("div",{className:"h-full flex flex-col gap-4",children:[n.jsxs("div",{className:"flex items-center justify-between gap-4 p-4 bg-card border border-border rounded-lg",style:{fontSize:zr.typography.fontSize.sm,padding:zr.spacing.md},children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold",children:"Expert Workbench"}),n.jsx(be,{variant:"secondary",children:"Advanced"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(le,{variant:d==="single"?"default":"outline",size:"sm",onClick:()=>u("single"),children:n.jsx(a3,{className:"w-4 h-4"})}),n.jsx(le,{variant:d==="dual"?"default":"outline",size:"sm",onClick:()=>u("dual"),children:n.jsx(Yee,{className:"w-4 h-4"})}),n.jsx(le,{variant:d==="triple"?"default":"outline",size:"sm",onClick:()=>u("triple"),children:n.jsx(Jee,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[d!=="single"&&n.jsx(J,{value:p,onChange:g,label:"Left"}),d==="triple"&&n.jsx(J,{value:b,onChange:v,label:"Center"}),d!=="single"&&n.jsx(J,{value:y,onChange:j,label:"Right"})]})]}),n.jsxs("div",{className:"flex-1 min-h-0",children:[d==="single"&&n.jsx("div",{className:"h-full",children:U(p)}),d==="dual"&&n.jsx(zk,{direction:"horizontal",initialSplit:50,minSize:400,leftPane:U(p),rightPane:U(y),className:"h-full"}),d==="triple"&&n.jsx(lPe,{direction:"horizontal",initialSplits:[33,33],minSize:350,firstPane:U(p),secondPane:U(b),thirdPane:U(y),className:"h-full"})]})]})}function KF({title:e,description:t,icon:r,children:a,itemCount:s=0,defaultCollapsed:i=!0,headerActions:o,className:l}){const[d,u]=N.useState(i);return n.jsxs(Ae,{className:l,children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[r,n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ge,{children:e}),d&&s>0&&n.jsxs("div",{className:"relative",children:[n.jsx(vv,{className:"w-5 h-5 text-primary animate-pulse"}),n.jsx(be,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center p-0 text-xs",children:s})]})]}),n.jsx(mt,{className:"mt-1",children:t})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[o,n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>u(!d),className:"shrink-0",children:d?n.jsx(df,{className:"w-4 h-4"}):n.jsx(e3,{className:"w-4 h-4"})})]})]})}),!d&&n.jsx(Re,{children:a})]})}const hPe=1,mPe=1e6;let pA=0;function pPe(){return pA=(pA+1)%Number.MAX_SAFE_INTEGER,pA.toString()}const gA=new Map,YF=e=>{if(gA.has(e))return;const t=setTimeout(()=>{gA.delete(e),gv({type:"REMOVE_TOAST",toastId:e})},mPe);gA.set(e,t)},gPe=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,hPe)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?YF(r):e.toasts.forEach(a=>{YF(a.id)}),{...e,toasts:e.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Ub=[];let Vb={toasts:[]};function gv(e){Vb=gPe(Vb,e),Ub.forEach(t=>{t(Vb)})}function xPe({...e}){const t=pPe(),r=s=>gv({type:"UPDATE_TOAST",toast:{...s,id:t}}),a=()=>gv({type:"DISMISS_TOAST",toastId:t});return gv({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||a()}}}),{id:t,dismiss:a,update:r}}function vPe(){const[e,t]=N.useState(Vb);return N.useEffect(()=>(Ub.push(t),()=>{const r=Ub.indexOf(t);r>-1&&Ub.splice(r,1)}),[e]),{...e,toast:xPe,dismiss:r=>gv({type:"DISMISS_TOAST",toastId:r})}}const Kx={basic:{label:"Basic",description:"Simplified interface with essential controls",icon:D9,color:"text-blue-500"},intermediate:{label:"Intermediate",description:"Balanced interface with common features",icon:Mp,color:"text-green-500"},advanced:{label:"Advanced",description:"Full interface with all controls and analytics",icon:Lp,color:"text-orange-500"},auto:{label:"Auto",description:"Automatically adapts based on context",icon:qi,color:"text-purple-500"}};function qX({variant:e,className:t="",onLevelChange:r,showLabel:a=!0}){const{tenantId:s}=Fr(),{toast:i}=vPe(),{level:o,setInterfaceLevel:l}=gce(s),{interfaceLevel:d,setInterfaceLevel:u}=bj(),[f,m]=N.useState(null),p=e==="decision"&&f?f:e==="decision"?d:o,g=y=>{if(e==="global"){l(y),y!=="auto"&&u(y,"user-profile");const j=Kx[y];i({title:`Interface level: ${j.label}`,description:j.description}),r&&r(y,!1),typeof window<"u"&&window.gtag&&window.gtag("event","interface_level_changed",{level:y,variant:"global",timestamp:Date.now()})}else{m(y),y!=="auto"&&u(y,"decision-mode");const j=Kx[y];i({title:`View mode: ${j.label}`,description:`${j.description} (temporary for this session)`}),r&&r(y,!0),typeof window<"u"&&window.gtag&&window.gtag("event","interface_level_changed",{level:y,variant:"decision",temporary:!0,timestamp:Date.now()})}};N.useEffect(()=>()=>{e==="decision"&&f&&m(null)},[e,f]);const b=Kx[p],v=b.icon;return n.jsxs("div",{className:`space-y-2 ${t}`,children:[a&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:e==="global"?"Interface Level":"View Mode"}),e==="decision"&&f&&n.jsx(be,{variant:"outline",className:"text-xs",children:"Temporary"})]}),n.jsxs(Et,{value:p,onValueChange:g,children:[n.jsx(kt,{className:"w-full",children:n.jsx(Tt,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(v,{className:`w-4 h-4 ${b.color}`}),n.jsx("span",{children:b.label})]})})}),n.jsx(Ot,{children:Object.keys(Kx).map(y=>{const j=Kx[y],_=j.icon;return n.jsx(we,{value:y,children:n.jsxs("div",{className:"flex items-start gap-3 py-1",children:[n.jsx(_,{className:`w-5 h-5 mt-0.5 ${j.color}`}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:j.label}),n.jsx("div",{className:"text-xs text-muted-foreground",children:j.description})]})]})},y)})})]})]})}function yPe({title:e,tenantName:t,description:r,onLevelChange:a,actions:s,className:i=""}){return n.jsxs("div",{className:`flex items-start justify-between gap-6 ${i}`,children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground truncate",children:e}),n.jsx(be,{variant:"secondary",className:"text-sm shrink-0",children:t})]}),r&&n.jsx("p",{className:"text-muted-foreground",children:r})]}),n.jsxs("div",{className:"flex items-start gap-4 shrink-0",children:[n.jsx("div",{className:"w-64",children:n.jsx(qX,{variant:"decision",onLevelChange:a,showLabel:!0})}),s&&n.jsx("div",{className:"flex items-center gap-2",children:s})]})]})}function bPe(){var Ac,kc,Oc;const{tenant:e}=Fr(),{enabled:t}=Fj(e.tenantId),{saveClosedDecision:r,addAudit:a,getDecisionsByTenant:s,saveSimulationSnapshot:i,getLastSnapshot:o}=Vo(),{thresholds:l}=Jz(e.tenantId),{settings:d}=Qz(e.tenantId),{settings:u}=Zz(e.tenantId),{horizonMonths:f,updateHorizonMonths:m}=pce(e.tenantId),p=({title:De,description:ft,variant:It})=>{console.log(`[Toast ${It||"default"}] ${De}:`,ft)},[g,b]=N.useState(!1),[v,y]=N.useState(""),[j,_]=N.useState(""),[C,A]=N.useState([]),[S,T]=N.useState([{id:"opt-1",label:"Option A",score:0,expectedReturn:100,cost:50,mitigationCost:0},{id:"opt-2",label:"Option B",score:0,expectedReturn:120,cost:70,mitigationCost:0}]),[O,R]=N.useState(""),[M,I]=N.useState(null),[D,$]=N.useState(null),[K,U]=N.useState(i$),[J,V]=N.useState(5e3),[G,q]=N.useState(42),[Y,Q]=N.useState([]),[F,z]=N.useState(void 0),[H,X]=N.useState(!1),[ne,ie]=N.useState(!1),[ce,ge]=N.useState(void 0),[he,ue]=N.useState(!1),[Se,je]=N.useState(void 0),[Be,$e]=N.useState(void 0),[oe,Xe]=N.useState(void 0),[pt,Oe]=N.useState(void 0),[Ee,lt]=N.useState(void 0),[ut,gt]=N.useState(void 0),[dt,Nt]=N.useState(void 0),[zt,Dt]=N.useState(void 0),[Gt,rr]=N.useState(void 0),[jt,Ce]=N.useState(void 0),[Ke,Jt]=N.useState(null),[Bt,bt]=N.useState(void 0),[Lt,sr]=N.useState([]),[or,wn]=N.useState(!1),[fr,kr]=N.useState(null),[mn,Er]=N.useState(!1),[nr,Wr]=N.useState(!1),[wi,Za]=N.useState([]),[As,ii]=N.useState([]),[Zt,Gi]=N.useState(!1),[qs,ks]=N.useState(null),[Ha,Mn]=N.useState([]),[Cn,Sa]=N.useState(!1),[Ni,Qa]=N.useState(null),pn=s(e.tenantId),_n=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,De=>{const ft=Math.random()*16|0;return(De==="x"?ft:ft&3|8).toString(16)});N.useEffect(()=>{const De=`retina:draft:${e.tenantId}`,ft=localStorage.getItem(De),It=s(e.tenantId).length>0,Pt=`retina:wizard-completed:${e.tenantId}`,lr=localStorage.getItem(Pt)==="true";if(!It&&!ft&&!lr&&Wr(!0),ft)try{const ts=JSON.parse(ft);y(ts.title||""),_(ts.description||""),A(ts.linkedGoals||[]),T(ts.options||[{id:"opt-1",label:"Option A",score:0,expectedReturn:100,cost:50},{id:"opt-2",label:"Option B",score:0,expectedReturn:120,cost:70}]),$(ts.id),I(ts.id)}catch(ts){console.error("Failed to load draft:",ts)}},[e.tenantId,s]),N.useEffect(()=>{if(!M){bt(void 0);return}const De=`retina:comparison:${M}`,ft=localStorage.getItem(De);if(ft)try{const It=JSON.parse(ft);bt(It)}catch(It){console.error("Failed to load baseline comparison:",It)}else bt(void 0)},[M]),N.useEffect(()=>{if(g&&(v||j||C.length>0||S.length>2)){const De=D||_n();D||($(De),I(De));const ft=`retina:draft:${e.tenantId}`,It={id:De,title:v,description:j,linkedGoals:C,options:S,updatedAt:Date.now()};localStorage.setItem(ft,JSON.stringify(It))}},[v,j,C,S,g,e.tenantId,D]);const es=()=>{const De=`opt-${S.length+1}`;T([...S,{id:De,label:`Option ${String.fromCharCode(65+S.length)}`,score:0,expectedReturn:100,cost:50}])},Us=(De,ft)=>{T(S.map(It=>It.id===De?{...It,label:ft}:It))},oi=(De,ft,It)=>{if(T(S.map(Pt=>Pt.id===De?{...Pt,[ft]:It}:Pt)),ft==="horizonMonths"){const Pt=S.find(lr=>lr.id===De);Pt&&a("option.horizon.updated",{optionId:De,optionLabel:Pt.label,horizonMonths:It,globalHorizonMonths:f})}},Ll=(De,ft)=>{T(S.map(It=>It.id===De?{...It,partners:ft}:It)),a("option.partners.updated",{optionId:De,partnerCount:ft.length})},Si=()=>{const De=`var-${Date.now()}`;U([...K,{id:De,name:`Variable ${K.length+1}`,appliesTo:"return",dist:"normal",params:{mean:0,sd:1},weight:1}])},Ci=De=>{U(K.filter(ft=>ft.id!==De))},_i=(De,ft)=>{U(K.map(It=>{if(It.id!==De)return It;const Pt={...It,...ft};if(ft.dist&&ft.dist!==It.dist)switch(ft.dist){case"normal":Pt.params={mean:0,sd:1};break;case"lognormal":Pt.params={mu:0,sigma:1};break;case"triangular":Pt.params={min:-.2,mode:0,max:.2};break;case"uniform":Pt.params={min:-.1,max:.1};break}return Pt}))},Ai=(De,ft,It)=>{U(K.map(Pt=>Pt.id===De?{...Pt,params:{...Pt.params,[ft]:It}}:Pt))},ki=(De,ft)=>{U(De),p({title:"Template applied",description:`${ft} has been applied with ${De.length} variable(s)`})},bo=async()=>{var It,Pt;if(S.length===0){p({title:"No options",description:"Add at least one option to simulate",variant:"destructive"});return}const De=D||_n();D||($(De),I(De));const ft=o(De);z(ft),X(!0),await new Promise(lr=>setTimeout(lr,500));try{const lr=await DK(G,J,S,K);Be&&Be===lr&&p({title:"Same inputs detected",description:"Identical results expected (seeded simulation)"});const ts={mode:d.mode,a:d.a,scale:d.scale},li={insuranceRate:u.insuranceRate,contingencyOnCap:u.contingencyOnCap},Ei=dt?{targetVarId:dt.targetVarId,posteriorMean:dt.posteriorMean,posteriorSd:dt.posteriorSd}:void 0,ta=vi(S,K,J,G,ts,li,oe,pt,Ee,Ei,zt,f);let Xn;if(ta.length>0){if(ta[0].copulaSnapshot){const Hr=ta[0].copulaSnapshot;rr(Hr.achieved),Ce(Hr.froErr),p({title:"Copula matrix applied",description:`Frobenius error: ${Hr.froErr.toFixed(3)} (${Hr.k}${Hr.k} matrix)`})}if(ta[0].achievedSpearman!==void 0&&(Xn=ta[0].achievedSpearman,gt(Xn),(ft==null?void 0:ft.achievedSpearman)!==void 0)){const Hr=Math.abs(Xn-ft.achievedSpearman);Hr>.1&&p({title:"Correlation changed",description:`Spearman correlation changed by ${Hr.toFixed(2)} (${ft.achievedSpearman.toFixed(2)}  ${Xn.toFixed(2)})`})}}Q(ta),je(lr),$e(lr);const Jn=fo(De),Un=Db(De),ha={count:Jn.length,criticalOpen:Un.length,list:Jn.map(Hr=>({id:Hr.id,scope:Hr.scope,statement:Hr.statement,status:Hr.status}))};let Wi;Gt&&Gt.length>=3&&(Wi=Gt.slice(0,3).map(Hr=>Hr.slice(0,3)));const Il={runId:lr,decisionId:De,tenantId:e.tenantId,seed:G,runs:J,timestamp:Date.now(),achievedSpearman:Xn,bayes:dt?{varKey:((It=K.find(Hr=>Hr.id===dt.targetVarId))==null?void 0:It.name)||dt.targetVarId,muN:dt.posteriorMean,sigmaN:dt.posteriorSd,applied:!0}:void 0,assumptions:ha,copula:zt&&Gt?{k:K.length,targetSet:!0,froErr:jt,achievedPreview:Wi}:void 0,horizonMonths:f,sensitivityBaseline:Y.length>0?{basis:d.useForRecommendation?"CE":"RAROC",optionId:Y[0].optionId}:void 0,metricsByOption:ta.reduce((Hr,Ca)=>(Hr[Ca.optionId]={optionLabel:Ca.optionLabel,ev:Ca.ev,var95:Ca.var95,cvar95:Ca.cvar95,economicCapital:Ca.economicCapital,raroc:Ca.raroc,ce:Ca.certaintyEquivalent,tcor:Ca.tcor},Hr),{})};i(Il),ge(Date.now());const us=ta.map(Hr=>({optionId:Hr.optionId,optionLabel:Hr.optionLabel,raroc:Hr.raroc,ev:Hr.ev,economicCapital:Hr.economicCapital,ce:Hr.certaintyEquivalent,tcor:Hr.tcor}));if(a("simulation.run",{decisionId:De,runId:lr,seed:G,runs:J,horizonMonths:f,optionCount:S.length,variableCount:K.length,optionSummary:us,achievedSpearman:Xn,bayes:dt?{varKey:((Pt=K.find(Hr=>Hr.id===dt.targetVarId))==null?void 0:Pt.name)||dt.targetVarId,muN:dt.posteriorMean,sigmaN:dt.posteriorSd,applied:!0}:{applied:!1},assumptionsCount:ha.count,criticalOpen:ha.criticalOpen,copula:jt!==void 0?{froErr:jt}:void 0}),ft){const Hr=ta.map(Ca=>{const Hs=ft.metricsByOption[Ca.optionId];return Hs?{optionId:Ca.optionId,optionLabel:Ca.optionLabel,rarocDelta:Ca.raroc-Hs.raroc,evDelta:Ca.ev-Hs.ev}:null}).filter(Boolean);a("simulation.rerun",{decisionId:De,runId_prev:ft.runId,runId_new:lr,diffSummary:Hr})}p({title:"Simulation complete",description:`Ran ${J} simulations across ${S.length} options`})}catch{p({title:"Simulation failed",description:"An error occurred during simulation",variant:"destructive"})}finally{X(!1)}},Os=async De=>{Gi(!0),ks(null);try{const ft=await HAe(De,e.tenantId);ii(ft.signals)}catch(ft){ks("Failed to load signals"),console.error("Failed to fetch signals:",ft)}finally{Gi(!1)}},An=async De=>{Sa(!0),Qa(null);try{const ft=await WAe(e.tenantId,De);Mn(ft.events)}catch(ft){Qa("Failed to load events"),console.error("Failed to fetch events:",ft)}finally{Sa(!1)}};N.useEffect(()=>{An()},[e.tenantId]),N.useEffect(()=>{M&&Os(M)},[M]);const _c=(De,ft)=>{var Un;if(!v||!O)return;const It=D||_n(),Pt=Y.find(ha=>ha.optionId===O),ts=fo(It).map(ha=>({id:ha.id,scope:ha.scope,statement:ha.statement,status:ha.status,critical:ha.critical,lockedAt:new Date().toISOString()})),li=Db(It),Ei=d.useForRecommendation?"CE":"RAROC";let ta=j;if(C.length>0){const ha=C.map(Wi=>{const Il=Wi.linked_kpis.length>0?` (KPIs: ${Wi.linked_kpis.length})`:"";return`- ${Wi.goal_statement} [${Wi.goal_category}]${Il}`}).join(`
`);ta=`${ta}

Linked Goals & KPIs:
${ha}`}De&&(ta=`${ta}

Decision Rationale:
${De}`),ft&&(ta=`${ta}

Assumptions Override Reason:
${ft}`);const Xn={id:It,tenantId:e.tenantId,title:v,description:ta,chosenOptionId:O,options:S,closedAt:Date.now(),closedBy:"Admin User",metrics:Pt?{raroc:Pt.raroc,ev:Pt.ev,var95:Pt.var95,cvar95:Pt.cvar95,ce:Pt.certaintyEquivalent,tcor:Pt.tcor}:void 0,basisAtClose:Ei,achievedSpearmanAtClose:ut,bayesAtClose:dt?{varKey:((Un=K.find(ha=>ha.id===dt.targetVarId))==null?void 0:Un.name)||dt.targetVarId,muN:dt.posteriorMean,sigmaN:dt.posteriorSd,applied:!0}:void 0,criticalOpenAtClose:li.length,horizonMonthsAtClose:f,copulaFroErrAtClose:jt,lockedAssumptions:ts};r(Xn),a("decision.closed",{decisionId:It,chosenOptionId:O,decisionTitle:v,basis:Ei,horizonMonthsAtClose:f,copulaFroErrAtClose:jt,chosen:Pt?{optionId:O,RAROC:Pt.raroc,EV:Pt.ev,EconCap:Pt.economicCapital,CE:Pt.certaintyEquivalent,TCOR:Pt.tcor}:void 0}),I(It),console.log("Decision confirmed:",v),p({title:"Decision closed",description:`${v} has been closed successfully`});const Jn=`retina:draft:${e.tenantId}`;localStorage.removeItem(Jn),y(""),_(""),A([]),T([{id:"opt-1",label:"Option A",score:0,expectedReturn:100,cost:50},{id:"opt-2",label:"Option B",score:0,expectedReturn:120,cost:70}]),R(""),b(!1),Q([]),$(null)},Vs=(De,ft,It)=>{R(De);const Pt=Y.find(lr=>lr.optionId===De);a("decision.recommended.applied",{optionId:De,raroc:Pt==null?void 0:Pt.raroc,ev:Pt==null?void 0:Pt.ev,economicCapital:Pt==null?void 0:Pt.economicCapital,isOverride:It}),setTimeout(()=>{_c(ft)},100)},Oi=De=>{y(De.title),_(De.description),A(De.linkedGoals),T(De.options),U(De.scenarioVars.length>0?De.scenarioVars:i$);const ft=`retina:wizard-completed:${e.tenantId}`;localStorage.setItem(ft,"true"),b(!0),Er(!1),Wr(!1),setTimeout(()=>{bo()},500)},jo=()=>{Er(!1),Wr(!1)};return nr||mn?n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(qr,{to:"/retina",className:"hover:text-foreground transition-colors",children:"Retina"}),n.jsx(ti,{className:"w-4 h-4"}),n.jsx(qr,{to:"/retina/modules",className:"hover:text-foreground transition-colors",children:"Modules"}),n.jsx(ti,{className:"w-4 h-4"}),n.jsx("span",{className:"text-foreground font-medium",children:"i-Decide"})]}),n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Retina  i-Decide"}),n.jsx(be,{variant:"secondary",className:"text-sm",children:e.tenantName})]}),n.jsx("p",{className:"text-muted-foreground",children:"Let's create your first decision together"})]})}),n.jsx(oPe,{tenantId:e.tenantId,onComplete:Oi,onCancel:jo})]}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(qr,{to:"/retina",className:"hover:text-foreground transition-colors",children:"Retina"}),n.jsx(ti,{className:"w-4 h-4"}),n.jsx(qr,{to:"/retina/modules",className:"hover:text-foreground transition-colors",children:"Modules"}),n.jsx(ti,{className:"w-4 h-4"}),n.jsx("span",{className:"text-foreground font-medium",children:"i-Decide"})]}),n.jsx(yPe,{title:"Retina  i-Decide",tenantName:e.tenantName,description:"AI-powered decision support system",onLevelChange:(De,ft)=>{a("interface.level.changed",{level:De,isTemporary:ft,context:"i-decide",timestamp:Date.now()})},actions:n.jsx(Rke,{tenantId:e.tenantId,currentTitle:v,currentDescription:j,currentOptions:S,currentScenarioVars:K,onApplyTemplate:(De,ft,It,Pt)=>{y(De),_(ft),T(It),U(Pt),b(!0)},onAuditEvent:a})}),n.jsx(IX,{tenantId:e.tenantId,className:"mb-6"}),n.jsxs(si,{defaultValue:"decision",className:"w-full",children:[n.jsxs(zs,{className:"grid w-full grid-cols-7 mb-6",children:[n.jsx(hr,{value:"decision",children:"Decision"}),n.jsx(hr,{value:"story",children:"Decision Story"}),n.jsx(hr,{value:"assumptions",children:"Assumptions"}),n.jsx(hr,{value:"portfolios",children:"Portfolios"}),n.jsx(hr,{value:"resilience",children:"Resilience"}),n.jsx(hr,{value:"insights",children:"Insights"}),n.jsx(hr,{value:"expert",children:"Expert Workbench"})]}),n.jsx(Cr,{value:"decision",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[n.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[g?n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"New Decision"}),n.jsx(mt,{children:"Define your decision and evaluate options"})]}),n.jsxs(Re,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"title",children:"Decision Title"}),n.jsx(et,{id:"title",placeholder:"What decision needs to be made?",value:v,onChange:De=>y(De.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"description",children:"Description (Optional)"}),n.jsx(ua,{id:"description",placeholder:"Provide context and details...",value:j,onChange:De=>_(De.target.value),rows:3})]}),n.jsx("div",{className:"space-y-2",children:n.jsx(zX,{selectedGoals:C,onGoalsChange:A})}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ne,{children:"Options"}),n.jsxs(le,{variant:"outline",size:"sm",onClick:es,children:[n.jsx(Pn,{className:"w-4 h-4 mr-1"}),"Add Option"]})]}),n.jsx("div",{className:"space-y-2",children:S.map((De,ft)=>n.jsx(et,{placeholder:`Option ${ft+1}`,value:De.label,onChange:It=>Us(De.id,It.target.value)},De.id))})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ne,{children:"Choose Your Decision"}),n.jsx(nu,{value:O,onValueChange:R,children:S.map(De=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(yi,{value:De.id,id:De.id}),n.jsx(Ne,{htmlFor:De.id,className:"font-normal cursor-pointer",children:De.label||"Unnamed option"})]},De.id))})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs(le,{onClick:()=>ue(!0),disabled:!v||!O||C.length===0,className:"flex-1",children:[n.jsx(ba,{className:"w-4 h-4 mr-2"}),"Confirm Decision"]}),n.jsx(le,{variant:"outline",onClick:()=>b(!1),children:"Cancel"})]})]})]}):n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-12 pb-12 text-center",children:[n.jsx("div",{className:"w-20 h-20 rounded-2xl bg-primary/10 flex items-center justify-center mx-auto mb-6",children:n.jsx(jA,{className:"w-10 h-10 text-primary"})}),n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-3",children:"i-Decide Lite"}),n.jsx("p",{className:"text-muted-foreground mb-6 leading-relaxed max-w-md mx-auto",children:"Create and track decisions with AI-powered support. Start by creating a new decision below."}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(le,{onClick:()=>Er(!0),children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Use Wizard"]}),n.jsx(le,{variant:"outline",onClick:()=>b(!0),children:"Advanced Mode"})]})]})}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx($r,{className:"w-5 h-5 text-primary"}),"Scenario Builder"]}),n.jsxs(mt,{children:[Ra("monteCarlo",{plain:t})," with risk metrics"]})]}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>ie(!ne),children:ne?"Hide":"Show"})]})}),ne&&n.jsxs(Re,{className:"space-y-6",children:[n.jsx(nke,{currentVariables:K,onApplyTemplate:ki,tenantId:e.tenantId,onAuditEvent:a}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"sim-runs",children:Ra("runs",{plain:t})}),n.jsx(et,{id:"sim-runs",type:"number",value:J,onChange:De=>V(Number(De.target.value)),min:100,max:5e4})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"sim-seed",children:Ra("seed",{plain:t})}),n.jsx(et,{id:"sim-seed",type:"number",value:G,onChange:De=>q(Number(De.target.value))})]})]})}),n.jsx(fke,{options:S,onUpdateOptionFinancials:oi,plainLanguage:t,globalHorizonMonths:f}),n.jsx(Mke,{options:S,onUpdatePartners:Ll}),M&&n.jsx(BRe,{decisionId:M,linkedSignals:wi,scenarioVars:K.map(De=>({key:De.id,label:De.name})),onUpdateSignals:De=>{Za(De)},onAuditEvent:a}),S.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(Ne,{children:"Option Summary"})}),n.jsx(Zke,{options:S,plainLanguage:t,decisionId:M||void 0,simulationResults:Y,onAuditEvent:a})]}),M&&n.jsx(LK,{decisionId:M,tenantId:e.tenantId,options:S,onConfigChange:(De,ft)=>{Xe(De),Oe(ft)},onAuditEvent:a}),n.jsx(dke,{scenarioVars:K,onConfigChange:lt,achievedSpearman:ut,onAuditEvent:a,runs:J,onToast:p}),n.jsx(HK,{scenarioVars:K,onConfigChange:Dt,achievedMatrix:Gt,frobeniusError:jt,onAuditEvent:a,runs:J,onToast:p}),n.jsx(VK,{scenarioVars:K,onConfigChange:Nt,onAuditEvent:a,onToast:p}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(Ne,{children:[Ra("scenario",{plain:t})," ","Variables"]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:Si,children:[n.jsx(Pn,{className:"w-4 h-4 mr-1"}),"Add Variable"]})]}),n.jsx("div",{className:"space-y-3",children:K.map(De=>n.jsxs("div",{className:"p-3 border border-border rounded-lg space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx(et,{value:De.name,onChange:ft=>_i(De.id,{name:ft.target.value}),className:"h-8 font-medium",placeholder:"Variable name"}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>Ci(De.id),className:"shrink-0",children:n.jsx(mo,{className:"w-4 h-4 text-destructive"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Applies To"}),n.jsxs(Et,{value:De.appliesTo,onValueChange:ft=>_i(De.id,{appliesTo:ft}),children:[n.jsx(kt,{className:"h-8",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"return",children:"Return"}),n.jsx(we,{value:"cost",children:"Cost"})]})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Distribution"}),n.jsxs(Et,{value:De.dist,onValueChange:ft=>_i(De.id,{dist:ft}),children:[n.jsx(kt,{className:"h-8",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"normal",children:"Normal"}),n.jsx(we,{value:"lognormal",children:"Lognormal"}),n.jsx(we,{value:"triangular",children:"Triangular"}),n.jsx(we,{value:"uniform",children:"Uniform"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ne,{className:"text-xs text-muted-foreground",children:["Parameters: ",c4e(De)]}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:l4e(De.dist).map(ft=>n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:ft}),n.jsx(et,{type:"number",step:"0.01",value:De.params[ft]??0,onChange:It=>Ai(De.id,ft,Number(It.target.value)),className:"h-8"})]},ft))})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Weight (multiplier strength)"}),n.jsx(et,{type:"number",step:"0.1",value:De.weight??1,onChange:ft=>_i(De.id,{weight:Number(ft.target.value)}),className:"h-8"})]})]},De.id))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{onClick:bo,disabled:H||S.length===0,className:"w-full",children:H?n.jsxs(n.Fragment,{children:[n.jsx(vh,{className:"w-4 h-4 mr-2 animate-spin"}),"Simulating..."]}):n.jsxs(n.Fragment,{children:[n.jsx($r,{className:"w-4 h-4 mr-2"}),Ra("simulate",{plain:t})]})}),Se&&n.jsx("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground",children:n.jsx(be,{variant:"outline",className:"font-mono",children:Kc(Se)})})]}),Ke&&n.jsxs("div",{className:"p-3 bg-orange-500/10 border border-orange-500/20 rounded-md flex items-center gap-2",children:[n.jsx(tn,{className:"w-4 h-4 text-orange-600 shrink-0"}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("span",{className:"font-medium text-orange-700 dark:text-orange-400",children:["Stress: ",Ke]}),n.jsx("span",{className:"text-orange-600 dark:text-orange-500 ml-2",children:"(read-only overrides applied)"})]})]}),Y.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm font-medium",children:"Simulation Results"}),n.jsxs("div",{className:"flex gap-2",children:[O&&n.jsx(A3e,{decisionTitle:v,chosenOptionId:O,chosenOptionLabel:((Ac=S.find(De=>De.id===O))==null?void 0:Ac.label)||"Unknown",simulationResults:Y,topSensitiveFactors:Lt,partners:((kc=S.find(De=>De.id===O))==null?void 0:kc.partners)||[],onAuditEvent:a,plainLanguage:t,decisionId:M||void 0,seed:G,runs:J,options:S,scenarioVars:K}),n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>{var Pt;const De=D||M,ft=De?fo(De):[],It=De?Db(De).length:0;z4e(Y,G,J,S,Se,d,ut,dt?{varKey:((Pt=K.find(lr=>lr.id===dt.targetVarId))==null?void 0:Pt.name)||dt.targetVarId,muN:dt.posteriorMean,sigmaN:dt.posteriorSd}:void 0,{count:ft.length,criticalOpen:It},f,jt)},children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Export Metrics CSV"]})]})]}),F&&n.jsx(rke,{currentResults:Y,previousSnapshot:F,currentSeed:G,currentRuns:J,currentSpearman:ut,previousSpearman:F.achievedSpearman,currentHorizonMonths:f,currentCopulaFroErr:jt,currentCopulaTargetSet:zt!==void 0&&Gt!==void 0}),n.jsx(eke,{simulationResults:Y,thresholds:l,utilitySettings:d,horizonMonths:f,onHorizonChange:De=>{m(De),a("settings.horizon.changed",{horizonMonths:De})},keyAssumptions:M?fo(M).filter(De=>De.critical||new Date(De.updatedAt).getTime()>Date.now()-10080*60*1e3).sort((De,ft)=>De.critical&&!ft.critical?-1:!De.critical&&ft.critical?1:new Date(ft.updatedAt).getTime()-new Date(De.updatedAt).getTime()).slice(0,3):[],baselineComparison:Bt,onApplyRecommendation:Vs,onToast:p,options:S,scenarioVars:K,seed:G,runs:J,runId:Se,tcorParams:{insuranceRate:u.insuranceRate,contingencyOnCap:u.contingencyOnCap},gameConfig:oe,optionStrategies:pt,dependenceConfig:Ee,bayesianOverride:dt?{targetVarId:dt.targetVarId,posteriorMean:dt.posteriorMean,posteriorSd:dt.posteriorSd}:void 0,onAuditEvent:a,onStressPresetChange:Jt,decisionId:M||void 0,onTopFactorsChange:sr})]})]})]})]}),n.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[n.jsx(KF,{title:"Signals (i-Scan)",description:M?"Relevant signals for current decision":"Save decision to fetch signals",icon:n.jsx(NA,{className:"w-5 h-5 text-primary"}),itemCount:As.length,defaultCollapsed:!0,headerActions:M?n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>Os(M),disabled:Zt,children:n.jsx($i,{className:`w-4 h-4 ${Zt?"animate-spin":""}`})}):void 0,children:n.jsx("div",{children:M?Zt?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(De=>n.jsxs("div",{className:"space-y-2",children:[n.jsx(uc,{className:"h-4 w-3/4 bg-muted"}),n.jsx(uc,{className:"h-3 w-full bg-muted"}),n.jsx(uc,{className:"h-3 w-1/2 bg-muted"})]},De))}):qs?n.jsxs("div",{className:"text-center py-8 space-y-3",children:[n.jsx(yn,{className:"w-12 h-12 text-destructive mx-auto"}),n.jsx("p",{className:"text-sm text-destructive",children:qs}),n.jsx(le,{variant:"outline",size:"sm",onClick:()=>Os(M),children:"Retry"})]}):As.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No signals found"}):n.jsx("div",{className:"space-y-4",children:As.map((De,ft)=>n.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-2 hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsx("div",{className:"font-semibold text-sm",children:De.source}),n.jsxs(be,{variant:"outline",className:"shrink-0",children:[De.relevance,"% relevant"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:De.snippet}),n.jsxs("a",{href:De.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline inline-flex items-center gap-1",children:["View source ",n.jsx(Ph,{className:"h-3 w-3"})]})]},ft))}):n.jsxs("div",{className:"text-center py-8 space-y-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mx-auto",children:n.jsx(Or,{className:"w-6 h-6 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Save decision to fetch Signals"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Create a decision and it will be automatically saved as draft. Signals will be fetched based on the decision context."})]})})}),n.jsx(KF,{title:"Incidents (i-Event)",description:M?"Incidents related to current decision":"Save decision to fetch incidents",icon:n.jsx(Rh,{className:"w-5 h-5 text-primary"}),itemCount:Ha.length,defaultCollapsed:!0,headerActions:M?n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>An(M),disabled:Cn,children:n.jsx($i,{className:`w-4 h-4 ${Cn?"animate-spin":""}`})}):void 0,children:n.jsx("div",{children:M?Cn?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(De=>n.jsxs("div",{className:"space-y-2",children:[n.jsx(uc,{className:"h-4 w-3/4 bg-muted"}),n.jsx(uc,{className:"h-3 w-full bg-muted"})]},De))}):Ni?n.jsxs("div",{className:"text-center py-8 space-y-3",children:[n.jsx(yn,{className:"w-12 h-12 text-destructive mx-auto"}),n.jsx("p",{className:"text-sm text-destructive",children:Ni}),n.jsx(le,{variant:"outline",size:"sm",onClick:()=>An(M||void 0),children:"Retry"})]}):Ha.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No events found"}):n.jsx("div",{className:"space-y-3",children:Ha.map(De=>{const It={low:{icon:Or,color:"text-blue-500",variant:"outline"},medium:{icon:yn,color:"text-yellow-500",variant:"outline"},high:{icon:tn,color:"text-orange-500",variant:"outline"},critical:{icon:tn,color:"text-red-500",variant:"destructive"}}[De.severity],Pt=It.icon;return n.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-2 hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[n.jsx(Pt,{className:`h-5 w-5 mt-0.5 shrink-0 ${It.color}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-semibold text-sm",children:De.title}),De.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:De.description})]})]}),n.jsxs("div",{className:"flex flex-col gap-2 shrink-0",children:[n.jsx(be,{variant:It.variant,children:De.severity}),n.jsx(be,{variant:"outline",children:De.status})]})]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(De.timestamp).toLocaleString()})]},De.id)})}):n.jsxs("div",{className:"text-center py-8 space-y-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mx-auto",children:n.jsx(Or,{className:"w-6 h-6 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Save decision to fetch Incidents"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Create a decision and it will be automatically saved as draft. Incidents will be fetched based on the decision context."})]})})})]})]})}),n.jsx(Cr,{value:"story",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:M?n.jsx(aPe,{decisionId:M,decisionTitle:v||"Untitled Decision",onAuditEvent:a}):n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-12 pb-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:n.jsx(Or,{className:"w-8 h-8 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create a decision to see its story unfold"}),n.jsxs(le,{onClick:()=>b(!0),variant:"outline",children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Create Decision"]})]})})})}),n.jsx(Cr,{value:"assumptions",children:n.jsx("div",{className:"max-w-6xl mx-auto",children:M?n.jsx(uke,{decisionId:M,onAuditEvent:a}):n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-12 pb-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:n.jsx(Or,{className:"w-8 h-8 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create a decision to start tracking assumptions"}),n.jsxs(le,{onClick:()=>b(!0),variant:"outline",children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Create Decision"]})]})})})}),n.jsx(Cr,{value:"portfolios",children:n.jsx("div",{className:"max-w-6xl mx-auto",children:n.jsx(RRe,{tenantId:e.tenantId,currentDecisionId:M||void 0,currentDecisionTitle:v,onAuditEvent:a})})}),n.jsx(Cr,{value:"resilience",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:Y.length===0?n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-12 pb-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:n.jsx(Or,{className:"w-8 h-8 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Run simulation to see resilience analysis"}),n.jsxs(le,{onClick:()=>bo(),disabled:S.length===0,variant:"outline",children:[n.jsx($r,{className:"w-4 h-4 mr-2"}),"Run Simulation"]})]})}):n.jsx(PRe,{simulationResults:Y,thresholds:l,options:S})})}),n.jsx(Cr,{value:"insights",children:n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:n.jsxs("div",{className:"lg:col-span-12 space-y-6",children:[n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(NA,{className:"w-5 h-5 text-primary"}),n.jsx(Ge,{children:"Signals (i-Scan)"})]}),M&&n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>Os(M),disabled:Zt,children:n.jsx($i,{className:`w-4 h-4 ${Zt?"animate-spin":""}`})})]}),n.jsx(mt,{children:M?"Relevant signals for current decision":"Save decision to fetch signals"})]}),n.jsx(Re,{children:M?Zt?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(De=>n.jsxs("div",{className:"space-y-2",children:[n.jsx(uc,{className:"h-4 w-3/4 bg-muted"}),n.jsx(uc,{className:"h-3 w-full bg-muted"}),n.jsx(uc,{className:"h-3 w-1/2 bg-muted"})]},De))}):qs?n.jsxs("div",{className:"text-center py-8 space-y-3",children:[n.jsx(yn,{className:"w-12 h-12 text-destructive mx-auto"}),n.jsx("p",{className:"text-sm text-destructive",children:qs}),n.jsx(le,{variant:"outline",size:"sm",onClick:()=>Os(M),children:"Retry"})]}):As.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No signals found"}):n.jsx("div",{className:"space-y-4",children:As.map((De,ft)=>n.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-2 hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsx("div",{className:"font-semibold text-sm",children:De.source}),n.jsxs(be,{variant:"outline",className:"shrink-0",children:[De.relevance,"% relevant"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:De.snippet}),n.jsxs("a",{href:De.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline inline-flex items-center gap-1",children:["View source ",n.jsx(Ph,{className:"h-3 w-3"})]})]},ft))}):n.jsxs("div",{className:"text-center py-8 space-y-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mx-auto",children:n.jsx(Or,{className:"w-6 h-6 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Save decision to fetch Signals"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Create a decision and it will be automatically saved as draft. Signals will be fetched based on the decision context."})]})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rh,{className:"w-5 h-5 text-primary"}),n.jsx(Ge,{children:"Incidents (i-Event)"})]}),M&&n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>An(M),disabled:Cn,children:n.jsx($i,{className:`w-4 h-4 ${Cn?"animate-spin":""}`})})]}),n.jsx(mt,{children:M?"Incidents related to current decision":"Save decision to fetch incidents"})]}),n.jsx(Re,{children:M?Cn?n.jsx("div",{className:"space-y-3",children:[1,2,3].map(De=>n.jsxs("div",{className:"space-y-2",children:[n.jsx(uc,{className:"h-4 w-3/4 bg-muted"}),n.jsx(uc,{className:"h-3 w-full bg-muted"})]},De))}):Ni?n.jsxs("div",{className:"text-center py-8 space-y-3",children:[n.jsx(yn,{className:"w-12 h-12 text-destructive mx-auto"}),n.jsx("p",{className:"text-sm text-destructive",children:Ni}),n.jsx(le,{variant:"outline",size:"sm",onClick:()=>An(M||void 0),children:"Retry"})]}):Ha.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No events found"}):n.jsx("div",{className:"space-y-3",children:Ha.map(De=>{const It={low:{icon:Or,color:"text-blue-500",variant:"outline"},medium:{icon:yn,color:"text-yellow-500",variant:"outline"},high:{icon:tn,color:"text-orange-500",variant:"outline"},critical:{icon:tn,color:"text-red-500",variant:"destructive"}}[De.severity],Pt=It.icon;return n.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-2 hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[n.jsx(Pt,{className:`h-5 w-5 mt-0.5 shrink-0 ${It.color}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-semibold text-sm",children:De.title}),De.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:De.description})]})]}),n.jsxs("div",{className:"flex flex-col gap-2 shrink-0",children:[n.jsx(be,{variant:It.variant,children:De.severity}),n.jsx(be,{variant:"outline",children:De.status})]})]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(De.timestamp).toLocaleString()})]},De.id)})}):n.jsxs("div",{className:"text-center py-8 space-y-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mx-auto",children:n.jsx(Or,{className:"w-6 h-6 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Save decision to fetch Incidents"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Create a decision and it will be automatically saved as draft. Incidents will be fetched based on the decision context."})]})})]})]})})}),n.jsx(Cr,{value:"expert",children:n.jsx("div",{className:"h-[800px]",children:M&&K.length>0?n.jsx(fPe,{decisionId:M,tenantId:e.tenantId,options:S,scenarioVars:K,runs:J,onConfigChange:De=>{console.log("Expert config changed:",De),De.game&&(Xe(De.game),Oe(De.strategies)),De.bayesian&&Nt(De.bayesian),De.copula&&Dt(De.copula)},onAuditEvent:a,onToast:p}):n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-12 pb-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:n.jsx(Or,{className:"w-8 h-8 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create a decision and add scenario variables to access the Expert Workbench"}),n.jsxs(le,{onClick:()=>b(!0),variant:"outline",children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Create Decision"]})]})})})})]}),n.jsx(cke,{open:he,onOpenChange:ue,decisionTitle:v,chosenOptionId:O,chosenOptionLabel:((Oc=S.find(De=>De.id===O))==null?void 0:Oc.label)||"Unknown",simulationResults:Y,lastSimulationTime:ce,thresholds:l,assumptions:M?fo(M):[],onConfirm:_c,onAuditEvent:a}),fr&&(()=>{const De=pn.find(lr=>lr.id===fr);if(!De)return null;const ft=De.options.find(lr=>lr.id===De.chosenOptionId),It=Math.random()>.3,Pt=It&&Math.random()>.4;return n.jsx(GO,{open:or,onOpenChange:wn,decisionTitle:De.title,decisionDate:De.closedAt||Date.now(),chosenOption:(ft==null?void 0:ft.label)||"Unknown Option",outcomeData:It?{logged:!0,date:(De.closedAt||Date.now())+360*60*60*1e3,summary:Math.random()>.5?"Performance exceeded expectations":"Results tracking close to projections"}:{logged:!1},adjustmentData:Pt?{count:Math.floor(Math.random()*3)+1,lastAdjustment:"Tightened VaR95 threshold by 5%",date:(De.closedAt||Date.now())+480*60*60*1e3}:{count:0}})})()]})}async function jPe(e){try{return{success:!0,data:vo(e)}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to load portfolios"}}}async function wPe(e,t,r="System"){try{const a=uW(e,t);return Zy(e,"portfolio.created",{portfolioId:a.id,portfolioName:a.portfolio_name,actor:r}),{success:!0,data:a,message:"Portfolio created successfully"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to create portfolio"}}}async function NPe(e,t,r,a="System"){try{const s=YO(e,t,r);return s?(Zy(e,"portfolio.updated",{portfolioId:s.id,portfolioName:s.portfolio_name,changes:r,actor:a}),{success:!0,data:s,message:"Portfolio updated successfully"}):{success:!1,error:"Portfolio not found"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to update portfolio"}}}async function SPe(e,t,r="System"){try{const s=vo(e).find(d=>d.id===t);if(!s)return{success:!1,error:"Portfolio not found"};const i=s.portfolio_name,o=s.decision_ids.length;return fW(e,t)?(Zy(e,"portfolio.deleted",{portfolioId:t,portfolioName:i,decisionCount:o,actor:r}),{success:!0,message:`Portfolio deleted successfully. ${o} decision(s) unlinked.`}):{success:!1,error:"Failed to delete portfolio"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to delete portfolio"}}}async function CPe(e,t,r,a="System"){try{const s=hk(e,t,r);return s?(Zy(e,"portfolio.decision_added",{portfolioId:t,portfolioName:s.portfolio_name,decisionId:r,actor:a}),{success:!0,data:s,message:"Decision added to portfolio successfully"}):{success:!1,error:"Portfolio not found or decision already in portfolio"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to add decision to portfolio"}}}async function _Pe(e,t,r,a="System"){try{const i=vo(e).find(l=>l.id===t);if(!i)return{success:!1,error:"Portfolio not found"};const o=mk(e,t,r);return o?(Zy(e,"portfolio.decision_removed",{portfolioId:t,portfolioName:i.portfolio_name,decisionId:r,actor:a}),{success:!0,data:o,message:"Decision removed from portfolio successfully"}):{success:!1,error:"Failed to remove decision from portfolio"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to remove decision from portfolio"}}}function Zy(e,t,r){const a="retina:audit",s=localStorage.getItem(a),i=s?JSON.parse(s):[],o={ts:Date.now(),tenantId:e,eventType:t,actor:r.actor||"System",payload:r};i.push(o),localStorage.setItem(a,JSON.stringify(i)),console.log(`[Audit] ${t}:`,r)}async function APe(e){return jPe(e)}async function kPe(e,t,r){return wPe(e,t,r)}async function OPe(e,t,r,a){return NPe(e,t,r,a)}function EPe(e){if(e.length<2)return{direction:"stable",change:0,percentage:0};const t=e[0].value,a=e[e.length-1].value-t,s=a/t*100;let i="stable";return Math.abs(a)>2&&(i=a>0?"up":"down"),{direction:i,change:a,percentage:s}}function UX(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function TPe({active:e,payload:t}){if(!e||!t||!t.length)return null;const r=t[0].payload;return n.jsxs("div",{className:"bg-popover border border-border rounded-lg shadow-lg p-3 space-y-1",children:[n.jsx("p",{className:"text-sm font-semibold",children:UX(r.timestamp)}),n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Index: "}),n.jsx("span",{className:"font-bold",children:r.value.toFixed(1)})]}),r.label&&n.jsx("p",{className:"text-xs text-muted-foreground",children:r.label}),r.event&&n.jsxs("p",{className:"text-xs text-primary font-medium",children:["Event: ",r.event]})]})}function RPe({data:e,title:t="Antifragility History",description:r="Track how antifragility index changes over time",showTrend:a=!0,showThresholds:s=!0,thresholds:i={excellent:70,moderate:40},className:o}){const l=EPe(e),d=e.map(p=>({...p,date:UX(p.timestamp)})),u=()=>{switch(l.direction){case"up":return $r;case"down":return fa;default:return wl}},f=()=>{switch(l.direction){case"up":return"text-green-600 dark:text-green-400";case"down":return"text-red-600 dark:text-red-400";default:return"text-muted-foreground"}},m=u();return n.jsxs(Ae,{className:Ye("rounded-2xl shadow-sm",o),children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx(Ge,{children:t}),n.jsx(mt,{children:r})]}),a&&e.length>=2&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(m,{className:Ye("w-5 h-5",f())}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:Ye("text-lg font-bold",f()),children:[l.change>0?"+":"",l.change.toFixed(1)]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.percentage>0?"+":"",l.percentage.toFixed(1),"%"]})]})]})]})}),n.jsxs(Re,{children:[e.length===0?n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-muted-foreground",children:"No historical data available"})}):e.length===1?n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-muted-foreground",children:"Need at least 2 data points to show trend"})}):n.jsx(Cl,{width:"100%",height:300,children:n.jsxs(CCe,{data:d,children:[n.jsx(hu,{strokeDasharray:"3 3",className:"stroke-muted"}),n.jsx(ji,{dataKey:"date",className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),n.jsx(Dl,{domain:[0,100],className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),n.jsx(Ii,{content:n.jsx(TPe,{})}),n.jsx(nd,{}),s&&n.jsxs(n.Fragment,{children:[n.jsx(Nf,{y:i.excellent,stroke:"hsl(var(--chart-1))",strokeDasharray:"3 3",label:{value:"Excellent",position:"right",fill:"hsl(var(--muted-foreground))",fontSize:12}}),n.jsx(Nf,{y:i.moderate,stroke:"hsl(var(--chart-4))",strokeDasharray:"3 3",label:{value:"Moderate",position:"right",fill:"hsl(var(--muted-foreground))",fontSize:12}})]}),n.jsx("defs",{children:n.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),n.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),n.jsx(Rf,{type:"monotone",dataKey:"value",stroke:"hsl(var(--primary))",fill:"url(#colorValue)",fillOpacity:1}),n.jsx(go,{type:"monotone",dataKey:"value",stroke:"hsl(var(--primary))",strokeWidth:3,dot:{fill:"hsl(var(--primary))",strokeWidth:2,r:4},activeDot:{r:6},name:"Antifragility Index"})]})}),e.length>=2&&n.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-4 border-t border-border",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Current"}),n.jsx("p",{className:"text-lg font-bold",children:e[e.length-1].value.toFixed(1)})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Average"}),n.jsx("p",{className:"text-lg font-bold",children:(e.reduce((p,g)=>p+g.value,0)/e.length).toFixed(1)})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Peak"}),n.jsx("p",{className:"text-lg font-bold",children:Math.max(...e.map(p=>p.value)).toFixed(1)})]})]})]})]})}function PPe(e){switch(e){case"up":return{icon:$r,color:"text-green-600 dark:text-green-400",bg:"bg-green-500/10"};case"down":return{icon:fa,color:"text-red-600 dark:text-red-400",bg:"bg-red-500/10"};case"stable":return{icon:wl,color:"text-muted-foreground",bg:"bg-muted"}}}function MPe(e){switch(e){case"closed":return"default";case"open":return"secondary";default:return"outline"}}function DPe({open:e,onOpenChange:t,decisions:r,title:a="Antifragility Comparison",description:s="Compare antifragility indices across decisions"}){const i=[...r].sort((u,f)=>f.antifragilityIndex-u.antifragilityIndex),o=r.reduce((u,f)=>u+f.antifragilityIndex,0)/r.length,l=Math.max(...r.map(u=>u.antifragilityIndex)),d=Math.min(...r.map(u=>u.antifragilityIndex));return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:a}),n.jsx(Sr,{children:s})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Average"}),n.jsx("p",{className:"text-2xl font-bold",children:o.toFixed(1)})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Highest"}),n.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:l.toFixed(1)})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Lowest"}),n.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:d.toFixed(1)})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(u=>{const f=u.trend?PPe(u.trend.direction):null;return n.jsxs("div",{className:"border border-border rounded-lg p-4 space-y-3 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:u.decisionTitle}),n.jsx(be,{variant:MPe(u.status),children:u.status})]}),u.chosenOption&&n.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:u.chosenOption})]}),n.jsx("div",{className:"flex justify-center py-2",children:n.jsx(L2,{value:u.antifragilityIndex,size:"sm",variant:"inline"})}),f&&u.trend&&n.jsxs("div",{className:Ye("flex items-center justify-center gap-2 p-2 rounded-lg",f.bg),children:[n.jsx(f.icon,{className:Ye("w-4 h-4",f.color)}),n.jsxs("span",{className:Ye("text-sm font-medium",f.color),children:[u.trend.direction==="up"?"+":"",u.trend.change.toFixed(1)," from"," ",u.trend.previousValue.toFixed(1)]})]})]},u.decisionId)})}),r.length===0&&n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-muted-foreground",children:"No decisions available for comparison"})})]})})}function LPe({portfolioId:e,portfolioName:t,tenantId:r,currentIndex:a,decisions:s=[],className:i}){const[o,l]=N.useState(!1),[d,u]=N.useState(!1),[f,m]=N.useState(my(r,e));N.useEffect(()=>{a>0&&(j_e(r,e,t,{timestamp:Date.now(),value:a,label:"Portfolio update"}),m(my(r,e)))},[a,e,t,r]);const p=f?w_e(f.snapshots):null,g=f?N_e(f.snapshots):null,b=()=>{if(!p)return wl;switch(p.direction){case"up":return $r;case"down":return fa;default:return wl}},v=()=>{if(!p)return"text-muted-foreground";switch(p.direction){case"up":return"text-green-600 dark:text-green-400";case"down":return"text-red-600 dark:text-red-400";default:return"text-muted-foreground"}},y=b();return n.jsxs(n.Fragment,{children:[n.jsxs(Ae,{className:Ye("rounded-2xl shadow-sm",i),children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx(Ge,{children:"Portfolio Antifragility"}),n.jsxs(mt,{children:["Aggregate resilience across ",s.length," decision",s.length!==1?"s":""]})]}),p&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(y,{className:Ye("w-5 h-5",v())}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:Ye("text-lg font-bold",v()),children:[p.change>0?"+":"",p.change.toFixed(1)]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.percentage>0?"+":"",p.percentage.toFixed(1),"%"]})]})]})]})}),n.jsxs(Re,{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-center",children:n.jsx(L2,{value:a,size:"lg",variant:"inline"})}),g&&n.jsxs("div",{className:"grid grid-cols-4 gap-4 pt-4 border-t border-border",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Current"}),n.jsx("p",{className:"text-lg font-bold",children:g.current.toFixed(1)})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Average"}),n.jsx("p",{className:"text-lg font-bold",children:g.average.toFixed(1)})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Peak"}),n.jsx("p",{className:"text-lg font-bold",children:g.peak.toFixed(1)})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Volatility"}),n.jsx("p",{className:"text-lg font-bold",children:g.volatility.toFixed(1)})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(le,{variant:"outline",className:"flex-1",onClick:()=>l(!0),disabled:!f||f.snapshots.length<2,children:[n.jsx(Gb,{className:"w-4 h-4 mr-2"}),"View History"]}),n.jsxs(le,{variant:"outline",className:"flex-1",onClick:()=>u(!0),disabled:s.length===0,children:[n.jsx(M9,{className:"w-4 h-4 mr-2"}),"Compare Decisions"]})]}),s.length>0&&n.jsxs("div",{className:"pt-4 border-t border-border",children:[n.jsx("p",{className:"text-sm font-semibold mb-2",children:"Decision Breakdown"}),n.jsxs("div",{className:"space-y-2",children:[s.slice(0,3).map(j=>n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground truncate flex-1",children:j.decisionTitle}),n.jsx(be,{variant:"outline",children:j.antifragilityIndex.toFixed(1)})]},j.decisionId)),s.length>3&&n.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["+",s.length-3," more"]})]})]})]})]}),f&&f.snapshots.length>=2&&n.jsx(RPe,{data:f.snapshots,title:`${t} - Antifragility History`,description:"Track portfolio resilience over time",className:o?"block":"hidden"}),n.jsx(DPe,{open:d,onOpenChange:u,decisions:s,title:`${t} - Decision Comparison`,description:"Compare antifragility across portfolio decisions"})]})}function IPe(e,t){const r=[{tenantId:e,anonymizedLabel:"You",antifragilityIndex:t.antifragilityIndex,learningRate:t.learningRate,stabilityRatio:t.stabilityRatio,shockAbsorption:t.shockAbsorption,guardrailBreachRate:t.guardrailBreachRate,decisionCount:t.decisionCount}],a=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O"];for(let s=0;s<15;s++){const i=55+Math.random()*30,o=.15+Math.random()*.25,l=.65+Math.random()*.3,d=.55+Math.random()*.35,u=.05+Math.random()*.2;r.push({tenantId:`peer-${s}`,anonymizedLabel:`Peer ${a[s]}`,antifragilityIndex:Math.round(i*10)/10,learningRate:Math.round(o*100)/100,stabilityRatio:Math.round(l*100)/100,shockAbsorption:Math.round(d*100)/100,guardrailBreachRate:Math.round(u*100)/100,decisionCount:Math.floor(20+Math.random()*180),industry:["Financial Services","Healthcare","Manufacturing","Technology","Retail"][Math.floor(Math.random()*5)],size:["small","medium","large"][Math.floor(Math.random()*3)]})}return r}function $Pe(e,t){const r=e.find(s=>s.tenantId===t);return r?[{key:"antifragilityIndex",label:"Antifragility Index"},{key:"learningRate",label:"Learning Rate"},{key:"stabilityRatio",label:"Stability Ratio"},{key:"shockAbsorption",label:"Shock Absorption"},{key:"guardrailBreachRate",label:"Guardrail Breach Rate",inverse:!0}].map(({key:s,label:i,inverse:o})=>{const l=e.map(v=>v[s]).sort((v,y)=>v-y),d=r[s],u=l[Math.floor(l.length*.25)],f=l[Math.floor(l.length*.5)],m=l[Math.floor(l.length*.75)],p=l[Math.floor(l.length*.9)],g=l.filter(v=>o?v>d:v<d).length,b=Math.round(g/l.length*100);return{metric:i,percentile25:u,percentile50:f,percentile75:m,percentile90:p,yourValue:d,yourPercentile:b}}):[]}function FPe(e){const t=[];return e.forEach(r=>{const a=r.percentile50,s=r.percentile90,i=r.metric==="Guardrail Breach Rate";let o,l,d;i?r.yourPercentile>=75?(o="strength",l=`Strong ${r.metric} Performance`,d=`Your ${r.metric.toLowerCase()} is in the top 25% of peers, indicating excellent risk management.`):r.yourPercentile<=25?(o="opportunity",l=`${r.metric} Improvement Opportunity`,d=`Your ${r.metric.toLowerCase()} is higher than 75% of peers. Consider tightening guardrails.`):(o="neutral",l=`Average ${r.metric}`,d=`Your ${r.metric.toLowerCase()} is in line with peer average.`):r.yourPercentile>=75?(o="strength",l=`Excellent ${r.metric}`,d=`You're in the top 25% of peers for ${r.metric.toLowerCase()}, demonstrating strong performance.`):r.yourPercentile<=25?(o="opportunity",l=`${r.metric} Growth Opportunity`,d=`Your ${r.metric.toLowerCase()} is below 75% of peers. Focus on this area for improvement.`):(o="neutral",l=`Competitive ${r.metric}`,d=`Your ${r.metric.toLowerCase()} is competitive with peer average.`),t.push({category:o,title:l,description:d,metric:r.metric,yourValue:r.yourValue,peerAverage:a,topPerformer:s})}),t}function XF(e,t){return t?e.filter(r=>r.tenantId===e[0].tenantId||r.industry===t):e}function JF(e,t){return t?e.filter(r=>r.tenantId===e[0].tenantId||r.size===t):e}function BPe({tenantId:e,currentMetrics:t,industry:r,size:a,onAuditEvent:s}){const[i,o]=N.useState(!1),[l,d]=N.useState("all"),[u,f]=N.useState("antifragilityIndex"),m=IPe(e,t);let p=m;l==="industry"&&r?p=XF(m,r):l==="size"&&a&&(p=JF(m,a));const g=$Pe(p,e),b=FPe(g),v=Math.round(g.reduce((j,_)=>j+_.yourPercentile,0)/g.length),y=j=>{o(j),j&&s&&s("benchmarking_viewed",{tenantId:e,filterType:l,timestamp:Date.now()})};return n.jsxs(Nr,{open:i,onOpenChange:y,children:[n.jsx(ld,{asChild:!0,children:n.jsxs(le,{variant:"outline",className:"gap-2",children:[n.jsx(Rp,{className:"h-4 w-4"}),"Benchmark Performance",n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx(Or,{className:"h-3 w-3 text-muted-foreground"})}),n.jsx(St,{children:n.jsx("p",{className:"max-w-xs",children:"Helps each tenant see how they stack up in learning speed and resilience."})})]})})]})}),n.jsxs(gr,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(Rp,{className:"h-5 w-5"}),"Tenant Benchmarking"]}),n.jsx(Sr,{children:"Anonymized comparison of your antifragility metrics against peer organizations. All peer data is anonymized to protect confidentiality."})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Ae,{className:"border-2 border-primary/20",children:[n.jsxs(He,{children:[n.jsxs(Ge,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Your Overall Performance"}),n.jsxs(be,{variant:v>=75?"default":v>=50?"secondary":"outline",className:"text-lg px-3 py-1",children:[v,"th Percentile"]})]}),n.jsxs(mt,{children:["Compared to ",p.length-1," anonymized peer organizations"]})]}),n.jsx(Re,{children:n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-primary",children:t.antifragilityIndex.toFixed(1)}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Antifragility Index"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-primary",children:[(t.learningRate*100).toFixed(0),"%"]}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Learning Rate"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-primary",children:[(t.stabilityRatio*100).toFixed(0),"%"]}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Stability Ratio"})]})]})})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Comparison Group"}),n.jsxs(Et,{value:l,onValueChange:j=>d(j),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsxs(we,{value:"all",children:["All Peers (",m.length-1,")"]}),r&&n.jsxs(we,{value:"industry",children:["Same Industry (",XF(m,r).length-1,")"]}),a&&n.jsxs(we,{value:"size",children:["Same Size (",JF(m,a).length-1,")"]})]})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Metric View"}),n.jsxs(Et,{value:u,onValueChange:f,children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"antifragilityIndex",children:"Antifragility Index"}),n.jsx(we,{value:"learningRate",children:"Learning Rate"}),n.jsx(we,{value:"stabilityRatio",children:"Stability Ratio"}),n.jsx(we,{value:"shockAbsorption",children:"Shock Absorption"}),n.jsx(we,{value:"guardrailBreachRate",children:"Guardrail Breach Rate"})]})]})]})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Peer Distribution"}),n.jsx(mt,{children:"See where you stand compared to anonymized peers"})]}),n.jsx(Re,{children:n.jsx(zPe,{benchmarks:p,selectedMetric:u,tenantId:e})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Percentile Breakdown"}),n.jsx(mt,{children:"Your position across all key metrics"})]}),n.jsx(Re,{children:n.jsx("div",{className:"space-y-4",children:g.map(j=>n.jsx(qPe,{distribution:j},j.metric))})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Key Insights"}),n.jsx(mt,{children:"Strengths and opportunities based on peer comparison"})]}),n.jsx(Re,{children:n.jsx("div",{className:"space-y-3",children:b.map((j,_)=>n.jsx(UPe,{insight:j},_))})})]})]})]})]})}function zPe({benchmarks:e,selectedMetric:t,tenantId:r}){const a=e.map(u=>u[t]),s=Math.min(...a),i=Math.max(...a),o=10,l=(i-s)/o,d=Array.from({length:o},(u,f)=>{const m=s+f*l,p=m+l,g=a.filter(v=>v>=m&&v<p).length,b=e.find(v=>v.tenantId===r&&v[t]>=m&&v[t]<p);return{range:`${m.toFixed(1)}-${p.toFixed(1)}`,count:g,isYou:!!b}});return n.jsxs("div",{className:"h-64",children:[n.jsx(id,{config:{},className:"h-full w-full",children:n.jsx(Cl,{width:"100%",height:"100%",children:n.jsxs(Vg,{data:d,children:[n.jsx(ji,{dataKey:"range",fontSize:12,angle:-45,textAnchor:"end",height:80}),n.jsx(Dl,{fontSize:12}),n.jsx(xf,{}),n.jsx(po,{dataKey:"count",radius:[4,4,0,0],children:d.map((u,f)=>n.jsx(cu,{fill:u.isYou?"hsl(var(--primary))":"hsl(var(--muted))"},`cell-${f}`))})]})})}),n.jsxs("p",{className:"text-xs text-center text-muted-foreground mt-2",children:[n.jsx("span",{className:"inline-block w-3 h-3 bg-primary rounded mr-1"}),"Your position highlighted in blue"]})]})}function qPe({distribution:e}){const t=e.metric==="Guardrail Breach Rate",r=e.yourPercentile;let a="bg-gray-500";return r>=75?a="bg-green-500":r<=25&&(a="bg-red-500"),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:e.metric}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:e.yourValue.toFixed(2)}),n.jsxs(be,{variant:"outline",className:"text-xs",children:["P",r]})]})]}),n.jsx("div",{className:"relative h-2 bg-muted rounded-full overflow-hidden",children:n.jsx("div",{className:`absolute top-0 left-0 h-full ${a} transition-all`,style:{width:`${r}%`}})}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsxs("span",{children:["P25: ",e.percentile25.toFixed(2)]}),n.jsxs("span",{children:["P50: ",e.percentile50.toFixed(2)]}),n.jsxs("span",{children:["P75: ",e.percentile75.toFixed(2)]}),n.jsxs("span",{children:["P90: ",e.percentile90.toFixed(2)]})]})]})}function UPe({insight:e}){const t={strength:mee,opportunity:eu,neutral:wl},r={strength:"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-950",opportunity:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-950",neutral:"text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-950"},a=t[e.category];return n.jsx("div",{className:`p-4 rounded-lg border ${r[e.category]}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(a,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"font-medium",children:e.title}),n.jsx("p",{className:"text-sm opacity-90",children:e.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"You:"})," ",n.jsx("span",{className:"font-medium",children:e.yourValue.toFixed(2)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"Peer Avg:"})," ",n.jsx("span",{className:"font-medium",children:e.peerAverage.toFixed(2)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"Top 10%:"})," ",n.jsx("span",{className:"font-medium",children:e.topPerformer.toFixed(2)})]})]})]})]})})}const VPe=()=>({toast:({title:e,description:t,variant:r})=>{const a=t?`${e}: ${t}`:e;alert(r==="destructive"?` ${a}`:` ${a}`)}});function HPe(){const{tenant:e}=Fr(),{decisions:t}=Vo(),{toast:r}=VPe(),[a,s]=N.useState([]),[i,o]=N.useState(!0),[l,d]=N.useState(!1),[u,f]=N.useState(!1),[m,p]=N.useState(!1),[g,b]=N.useState(!1),[v,y]=N.useState(null),[j,_]=N.useState({portfolio_name:"",description:"",owner:"",time_horizon_months:12,goal_alignment:""}),C=async()=>{o(!0);const G=await APe(e.tenantId);G.success&&G.data&&s(G.data),o(!1)};N.useEffect(()=>{C()},[e.tenantId]);const A=async()=>{if(!j.portfolio_name.trim()){r({title:"Validation Error",description:"Portfolio name is required",variant:"destructive"});return}const G=await kPe(e.tenantId,{...j,decision_ids:[]},"Current User");G.success?(r({title:"Success",description:G.message||"Portfolio created successfully"}),d(!1),_({portfolio_name:"",description:"",owner:"",time_horizon_months:12,goal_alignment:""}),C()):r({title:"Error",description:G.error||"Failed to create portfolio",variant:"destructive"})},S=async()=>{if(!v)return;if(!j.portfolio_name.trim()){r({title:"Validation Error",description:"Portfolio name is required",variant:"destructive"});return}const G=await OPe(e.tenantId,v.id,j,"Current User");G.success?(r({title:"Success",description:G.message||"Portfolio updated successfully"}),f(!1),y(null),C()):r({title:"Error",description:G.error||"Failed to update portfolio",variant:"destructive"})},T=async()=>{if(!v)return;const G=await SPe(e.tenantId,v.id,"Current User");G.success?(r({title:"Success",description:G.message||"Portfolio deleted successfully"}),p(!1),y(null),C()):r({title:"Error",description:G.error||"Failed to delete portfolio",variant:"destructive"})},O=async G=>{if(!v)return;const q=await CPe(e.tenantId,v.id,G,"Current User");q.success?(r({title:"Success",description:"Decision added to portfolio"}),C(),q.data&&y(q.data)):r({title:"Error",description:q.error||"Failed to add decision",variant:"destructive"})},R=async G=>{if(!v)return;const q=await _Pe(e.tenantId,v.id,G,"Current User");q.success?(r({title:"Success",description:"Decision removed from portfolio"}),C(),q.data&&y(q.data)):r({title:"Error",description:q.error||"Failed to remove decision",variant:"destructive"})},M=G=>{y(G),_({portfolio_name:G.portfolio_name,description:G.description,owner:G.owner,time_horizon_months:G.time_horizon_months,goal_alignment:G.goal_alignment}),f(!0)},I=G=>{y(G),p(!0)},D=G=>{y(G),b(!0)},$=t.filter(G=>G.tenantId===e.tenantId),U=(()=>{if(a.length===0)return{antifragilityIndex:50,learningRate:.15,stabilityRatio:.7,shockAbsorption:.6,guardrailBreachRate:.15,decisionCount:$.length};const G=a.reduce((H,X)=>H+J(X),0)/a.length,q=Math.min(.4,.15+a.length*.02+$.length*.001),Y=$.filter(H=>H.status==="closed").length,Q=$.length>0?Math.min(.95,.6+Y/$.length*.3):.7,F=Math.min(.9,G/100+.1),z=Math.max(.05,.25-Q*.2);return{antifragilityIndex:G,learningRate:q,stabilityRatio:Q,shockAbsorption:F,guardrailBreachRate:z,decisionCount:$.length}})(),J=G=>{if(G.decision_ids.length===0)return 0;const q=G.decision_ids.map(Q=>$.find(F=>F.id===Q)).filter(Q=>Q!==void 0);if(q.length===0)return 0;const Y=q.map(Q=>{const F=Q.status==="closed"?60:50,z=Math.min(20,Math.floor((Date.now()-Q.createdAt)/(1e3*60*60*24)));return F+z});return Y.reduce((Q,F)=>Q+F,0)/Y.length},V=G=>G.decision_ids.map(q=>{var H,X;const Y=$.find(ne=>ne.id===q);if(!Y)return null;const Q=y_e(e.tenantId,q),F=((H=Q==null?void 0:Q.snapshots[Q.snapshots.length-1])==null?void 0:H.value)||50,z=(X=Q==null?void 0:Q.snapshots[Q.snapshots.length-2])==null?void 0:X.value;return{decisionId:Y.id,decisionTitle:Y.title,antifragilityIndex:F,status:Y.status,chosenOption:Y.chosenOptionLabel,trend:z?{direction:F>z+2?"up":F<z-2?"down":"stable",change:F-z,previousValue:z}:void 0}}).filter(q=>q!==null);return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx(IX,{tenantId:e.tenantId,className:"mb-6"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Portfolios"}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{children:n.jsx(yn,{className:"w-5 h-5 text-muted-foreground"})}),n.jsx(St,{className:"max-w-xs",children:n.jsx("p",{className:"text-sm",children:"Tracks every time decisions are grouped or reorganized."})})]})})]}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Group related decisions under one theme"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(BPe,{tenantId:e.tenantId,currentMetrics:U,industry:"Financial Services",size:"medium",onAuditEvent:(G,q)=>{console.log("Benchmarking audit:",G,q)}}),n.jsxs(le,{onClick:()=>d(!0),children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Create Portfolio"]})]})]}),i?n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading portfolios..."})}):a.length===0?n.jsx(Ae,{children:n.jsxs(Re,{className:"pt-12 pb-12 text-center",children:[n.jsx(Pp,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"No portfolios yet. Create one to get started."}),n.jsxs(le,{onClick:()=>d(!0),children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Create Your First Portfolio"]})]})}):n.jsx("div",{className:"space-y-8",children:a.map(G=>{const q=J(G),Y=V(G);return n.jsxs("div",{className:"space-y-4",children:[n.jsxs(Ae,{className:"hover:shadow-lg transition-shadow",children:[n.jsxs(He,{children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Pp,{className:"w-5 h-5 text-primary"}),n.jsx(Ge,{className:"text-lg",children:G.portfolio_name})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>M(G),children:n.jsx(jj,{className:"w-4 h-4"})}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>I(G),children:n.jsx(mo,{className:"w-4 h-4 text-destructive"})})]})]}),n.jsx(mt,{className:"line-clamp-2",children:G.description})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Owner:"}),n.jsx("p",{className:"font-medium truncate",children:G.owner})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Horizon:"}),n.jsxs("p",{className:"font-medium",children:[G.time_horizon_months," months"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[n.jsxs(be,{variant:"secondary",children:[G.decision_ids.length," decision",G.decision_ids.length!==1?"s":""]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>D(G),children:[n.jsx(cs,{className:"w-4 h-4 mr-2"}),"Manage"]})]})]})]}),n.jsx(LPe,{portfolioId:G.id,portfolioName:G.portfolio_name,tenantId:e.tenantId,currentIndex:q,decisions:Y})]},G.id)})}),n.jsx(Nr,{open:l,onOpenChange:d,children:n.jsxs(gr,{className:"max-w-2xl",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Create Portfolio"}),n.jsx(Sr,{children:"Group related decisions under one theme"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"name",children:"Portfolio Name *"}),n.jsx(et,{id:"name",value:j.portfolio_name,onChange:G=>_({...j,portfolio_name:G.target.value}),placeholder:"e.g., Cloud Migration Strategy"})]}),n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"description",children:"Description"}),n.jsx(ua,{id:"description",value:j.description,onChange:G=>_({...j,description:G.target.value}),placeholder:"Brief description of this portfolio",rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"owner",children:"Owner"}),n.jsx(et,{id:"owner",value:j.owner,onChange:G=>_({...j,owner:G.target.value}),placeholder:"e.g., CTO Office"})]}),n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"horizon",children:"Time Horizon (months)"}),n.jsx(et,{id:"horizon",type:"number",value:j.time_horizon_months,onChange:G=>_({...j,time_horizon_months:parseInt(G.target.value)||12})})]})]}),n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"alignment",children:"Goal Alignment"}),n.jsx(ua,{id:"alignment",value:j.goal_alignment,onChange:G=>_({...j,goal_alignment:G.target.value}),placeholder:"How does this portfolio align with organizational goals?",rows:2})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),n.jsx(le,{onClick:A,children:"Create Portfolio"})]})]})}),n.jsx(Nr,{open:u,onOpenChange:f,children:n.jsxs(gr,{className:"max-w-2xl",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Edit Portfolio"}),n.jsx(Sr,{children:"Update portfolio information"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"edit-name",children:"Portfolio Name *"}),n.jsx(et,{id:"edit-name",value:j.portfolio_name,onChange:G=>_({...j,portfolio_name:G.target.value})})]}),n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"edit-description",children:"Description"}),n.jsx(ua,{id:"edit-description",value:j.description,onChange:G=>_({...j,description:G.target.value}),rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"edit-owner",children:"Owner"}),n.jsx(et,{id:"edit-owner",value:j.owner,onChange:G=>_({...j,owner:G.target.value})})]}),n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"edit-horizon",children:"Time Horizon (months)"}),n.jsx(et,{id:"edit-horizon",type:"number",value:j.time_horizon_months,onChange:G=>_({...j,time_horizon_months:parseInt(G.target.value)||12})})]})]}),n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"edit-alignment",children:"Goal Alignment"}),n.jsx(ua,{id:"edit-alignment",value:j.goal_alignment,onChange:G=>_({...j,goal_alignment:G.target.value}),rows:2})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),n.jsx(le,{onClick:S,children:"Save Changes"})]})]})}),n.jsx(Nr,{open:m,onOpenChange:p,children:n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Delete Portfolio"}),n.jsx(Sr,{children:"Are you sure you want to delete this portfolio?"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("p",{className:"text-sm",children:["Portfolio: ",n.jsx("strong",{children:v==null?void 0:v.portfolio_name})]}),n.jsx("div",{className:"bg-muted p-3 rounded-lg",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:"Note:"})," Deleting this portfolio will unlink"," ",(v==null?void 0:v.decision_ids.length)||0," decision(s), but the decisions themselves will NOT be deleted."]})})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),n.jsx(le,{variant:"destructive",onClick:T,children:"Delete Portfolio"})]})]})}),n.jsx(Nr,{open:g,onOpenChange:b,children:n.jsxs(gr,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Manage Decisions"}),n.jsxs(Sr,{children:["Add or remove decisions from ",v==null?void 0:v.portfolio_name]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-semibold mb-2",children:["Current Decisions (",(v==null?void 0:v.decision_ids.length)||0,")"]}),v&&v.decision_ids.length>0?n.jsx("div",{className:"space-y-2",children:v.decision_ids.map(G=>{const q=$.find(Y=>Y.id===G);return q?n.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:q.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:q.description})]}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>R(G),children:n.jsx(mo,{className:"w-4 h-4 text-destructive"})})]},G):null})}):n.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No decisions in this portfolio yet"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Available Decisions"}),$.filter(G=>!(v!=null&&v.decision_ids.includes(G.id))).length>0?n.jsx("div",{className:"space-y-2",children:$.filter(G=>!(v!=null&&v.decision_ids.includes(G.id))).map(G=>n.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:G.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:G.description})]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>O(G.id),children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Add"]})]},G.id))}):n.jsx("p",{className:"text-sm text-muted-foreground italic",children:"All decisions are already in this portfolio"})]})]}),n.jsx(bn,{children:n.jsx(le,{onClick:()=>b(!1),children:"Done"})})]})})]})}function VX(){const{tenant:e}=Fr();return{tenantFetch:async(r,a={})=>{const s=new Headers(a.headers);return s.set("x-tenant-id",e.tenantId),a.body&&!s.has("Content-Type")&&s.set("Content-Type","application/json"),await fetch(r,{...a,headers:s})},tenant:e}}function GPe(){const{tenantFetch:e,tenant:t}=VX();return{get:async o=>{const l=await e(o);if(!l.ok)throw new Error(`GET ${o} failed: ${l.statusText}`);return l.json()},post:async(o,l)=>{const d=await e(o,{method:"POST",body:JSON.stringify(l)});if(!d.ok)throw new Error(`POST ${o} failed: ${d.statusText}`);return d.json()},put:async(o,l)=>{const d=await e(o,{method:"PUT",body:JSON.stringify(l)});if(!d.ok)throw new Error(`PUT ${o} failed: ${d.statusText}`);return d.json()},del:async o=>{const l=await e(o,{method:"DELETE"});if(!l.ok)throw new Error(`DELETE ${o} failed: ${l.statusText}`);return l.json()},tenantFetch:e,tenant:t}}function WPe(){return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Tenant Context System"}),n.jsx("p",{className:"text-muted-foreground",children:"Complete guide for using the multi-tenant system in your application"})]}),n.jsxs(Fs,{children:[n.jsx(Or,{className:"h-4 w-4"}),n.jsx(gl,{children:"Automatic Setup"}),n.jsx(ei,{children:"The TenantProvider is already configured in the app prototype. All components have access to tenant context automatically."})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"1. Using the Tenant Hook"}),n.jsx(mt,{children:"Access and update tenant information"})]}),n.jsx(Re,{children:n.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto",children:n.jsx("code",{children:`import { useTenant } from "@/polymet/data/tenant-context"

function MyComponent() {
  const { tenant, setTenant } = useTenant()
  
  // Access current tenant
  console.log(tenant.tenantId)   // "t-demo"
  console.log(tenant.tenantName) // "Demo Co"
  
  // Switch tenant
  const switchToAcme = () => {
    setTenant({
      tenantId: "t-acme",
      tenantName: "Acme Ltd"
    })
  }
  
  return <div>{tenant.tenantName}</div>
}`})})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"2. Making API Requests with Tenant Header"}),n.jsx(mt,{children:"Use useTenantFetch for automatic header injection"})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Basic Fetch:"}),n.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto",children:n.jsx("code",{children:`import { useTenantFetch } from "@/polymet/data/use-tenant-fetch"

function MyComponent() {
  const { tenantFetch } = useTenantFetch()
  
  const loadData = async () => {
    // x-tenant-id header is automatically added
    const response = await tenantFetch("/api/data")
    const data = await response.json()
    return data
  }
}`})})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Using API Helpers:"}),n.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto",children:n.jsx("code",{children:`import { useTenantApi } from "@/polymet/data/use-tenant-fetch"

function MyComponent() {
  const { get, post, put, del } = useTenantApi()
  
  // GET request
  const data = await get("/api/users")
  
  // POST request
  const newUser = await post("/api/users", {
    name: "John Doe",
    email: "john@example.com"
  })
  
  // PUT request
  const updated = await put("/api/users/123", {
    name: "Jane Doe"
  })
  
  // DELETE request
  await del("/api/users/123")
}`})})]})]})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"3. LocalStorage Persistence"}),n.jsx(mt,{children:"Tenant selection is automatically saved"})]}),n.jsx(Re,{children:n.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm",children:[n.jsxs("li",{children:["Tenant selection is saved to localStorage key:"," ",n.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"retina:tenant"})]}),n.jsxs("li",{children:["Default tenant on first load:"," ",n.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"Demo Co (t-demo)"})]}),n.jsx("li",{children:"Persists across page refreshes and browser sessions"}),n.jsx("li",{children:"Automatically loads on app initialization"})]})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"4. Tenant Switcher in Header"}),n.jsx(mt,{children:"Built-in UI for switching tenants"})]}),n.jsx(Re,{children:n.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm",children:[n.jsx("li",{children:"Located in the top header next to notifications"}),n.jsx("li",{children:"Shows current tenant name with building icon"}),n.jsx("li",{children:"Dropdown menu with available tenants: Demo Co, Acme Ltd"}),n.jsx("li",{children:"Checkmark indicates currently selected tenant"}),n.jsx("li",{children:"Automatically reloads route after switching"})]})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"5. Available Tenants"}),n.jsx(mt,{children:"Pre-configured tenant options"})]}),n.jsx(Re,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("div",{className:"font-semibold",children:"Demo Co"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Tenant ID: t-demo"})]}),n.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[n.jsx("div",{className:"font-semibold",children:"Acme Ltd"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Tenant ID: t-acme"})]})]})})]})]})}const KPe=e=>{const t=e==="t-demo"?"Demo":"Acme";return[{id:`${e}-001`,name:`${t} Item 1`,status:"active",timestamp:new Date().toISOString()},{id:`${e}-002`,name:`${t} Item 2`,status:"pending",timestamp:new Date().toISOString()},{id:`${e}-003`,name:`${t} Item 3`,status:"active",timestamp:new Date().toISOString()}]};function YPe(){const{tenant:e}=Fr();GPe();const[t,r]=N.useState([]),[a,s]=N.useState(!1),i=async()=>{s(!0);try{await new Promise(l=>setTimeout(l,500));const o=KPe(e.tenantId);r(o)}catch(o){console.error("Failed to load data:",o)}finally{s(!1)}};return N.useEffect(()=>{i()},[e.tenantId]),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(t3,{className:"w-5 h-5"}),"Tenant-Aware Data Table"]}),n.jsxs(mt,{children:["Data automatically filtered by tenant: ",e.tenantName]})]}),n.jsxs(le,{onClick:i,disabled:a,variant:"outline",size:"sm",children:[n.jsx($i,{className:`w-4 h-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]})]})}),n.jsxs(Re,{children:[n.jsxs("div",{className:"mb-4 p-3 bg-muted rounded-lg text-sm",children:[n.jsx("div",{className:"font-medium mb-1",children:"API Request Headers:"}),n.jsxs("code",{className:"text-xs",children:["x-tenant-id: ",e.tenantId]})]}),n.jsxs(Ho,{children:[n.jsx(Go,{children:n.jsxs(Yn,{children:[n.jsx(Mt,{children:"ID"}),n.jsx(Mt,{children:"Name"}),n.jsx(Mt,{children:"Status"}),n.jsx(Mt,{children:"Timestamp"})]})}),n.jsx(Wo,{children:t.length===0?n.jsx(Yn,{children:n.jsx(Rt,{colSpan:4,className:"text-center text-muted-foreground",children:a?"Loading...":"No data available"})}):t.map(o=>n.jsxs(Yn,{children:[n.jsx(Rt,{className:"font-mono text-xs",children:o.id}),n.jsx(Rt,{children:o.name}),n.jsx(Rt,{children:n.jsx(be,{variant:o.status==="active"?"default":"secondary",children:o.status})}),n.jsx(Rt,{className:"text-xs text-muted-foreground",children:new Date(o.timestamp).toLocaleString()})]},o.id))})]})]})]})}function XPe(){return n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Quick Start Guide"}),n.jsx(mt,{children:"Copy-paste examples to get started with the tenant system"})]}),n.jsx(Re,{children:n.jsxs(si,{defaultValue:"basic",className:"w-full",children:[n.jsxs(zs,{className:"grid w-full grid-cols-4",children:[n.jsx(hr,{value:"basic",children:"Basic"}),n.jsx(hr,{value:"fetch",children:"Fetch"}),n.jsx(hr,{value:"api",children:"API"}),n.jsx(hr,{value:"switch",children:"Switch"})]}),n.jsx(Cr,{value:"basic",className:"space-y-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h4",{className:"font-semibold",children:"Access Current Tenant"}),n.jsx(be,{variant:"outline",children:"useTenant()"})]}),n.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto text-sm",children:n.jsx("code",{children:`import { useTenant } from "@/polymet/data/tenant-context"

function MyComponent() {
  const { tenant } = useTenant()
  
  return (
    <div>
      <p>Tenant: {tenant.tenantName}</p>
      <p>ID: {tenant.tenantId}</p>
    </div>
  )
}`})})]})}),n.jsx(Cr,{value:"fetch",className:"space-y-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h4",{className:"font-semibold",children:"Fetch with Tenant Header"}),n.jsx(be,{variant:"outline",children:"useTenantFetch()"})]}),n.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto text-sm",children:n.jsx("code",{children:`import { useTenantFetch } from "@/polymet/data/use-tenant-fetch"

function DataLoader() {
  const { tenantFetch } = useTenantFetch()
  
  const loadData = async () => {
    // x-tenant-id header automatically added
    const response = await tenantFetch("/api/data")
    const data = await response.json()
    return data
  }
  
  return <button onClick={loadData}>Load</button>
}`})})]})}),n.jsx(Cr,{value:"api",className:"space-y-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h4",{className:"font-semibold",children:"API Helper Methods"}),n.jsx(be,{variant:"outline",children:"useTenantApi()"})]}),n.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto text-sm",children:n.jsx("code",{children:`import { useTenantApi } from "@/polymet/data/use-tenant-fetch"

function UserManager() {
  const { get, post, put, del } = useTenantApi()
  
  // GET request
  const users = await get("/api/users")
  
  // POST request
  const newUser = await post("/api/users", {
    name: "John Doe"
  })
  
  // PUT request
  const updated = await put("/api/users/123", {
    name: "Jane Doe"
  })
  
  // DELETE request
  await del("/api/users/123")
}`})})]})}),n.jsx(Cr,{value:"switch",className:"space-y-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h4",{className:"font-semibold",children:"Switch Tenant"}),n.jsx(be,{variant:"outline",children:"setTenant()"})]}),n.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto text-sm",children:n.jsx("code",{children:`import { useTenant } from "@/polymet/data/tenant-context"

function TenantSwitcher() {
  const { tenant, setTenant } = useTenant()
  
  const switchToDemo = () => {
    setTenant({
      tenantId: "t-demo",
      tenantName: "Demo Co"
    })
    // Automatically saved to localStorage
  }
  
  const switchToAcme = () => {
    setTenant({
      tenantId: "t-acme",
      tenantName: "Acme Ltd"
    })
  }
  
  return (
    <div>
      <button onClick={switchToDemo}>Demo Co</button>
      <button onClick={switchToAcme}>Acme Ltd</button>
    </div>
  )
}`})})]})})]})})]})}function JPe(){const{tenant:e,setTenant:t}=Fr();VX();const[r,a]=N.useState([]),s=async(o,l="GET")=>{const u=`[${new Date().toLocaleTimeString()}] ${l} ${o} with x-tenant-id: ${e.tenantId}`;a(f=>[u,...f].slice(0,10))},i=o=>{t(o),a(l=>[`[${new Date().toLocaleTimeString()}] Tenant switched to: ${o.tenantName}`,...l].slice(0,10))};return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Tenant Context Demo"}),n.jsx("p",{className:"text-muted-foreground",children:"Interactive demonstration of the multi-tenant system"})]}),n.jsxs(Fs,{children:[n.jsx(yv,{className:"h-4 w-4"}),n.jsx(gl,{children:"Current Tenant"}),n.jsxs(ei,{className:"flex items-center gap-2 mt-2",children:[n.jsx("span",{className:"font-semibold",children:e.tenantName}),n.jsx(be,{variant:"outline",children:e.tenantId})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(yv,{className:"w-5 h-5"}),"Tenant Switcher"]}),n.jsx(mt,{children:"Switch between available tenants"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsxs(le,{onClick:()=>i({tenantId:"t-demo",tenantName:"Demo Co"}),variant:e.tenantId==="t-demo"?"default":"outline",className:"w-full justify-between",children:[n.jsx("span",{children:"Demo Co"}),e.tenantId==="t-demo"&&n.jsx(ri,{className:"w-4 h-4"})]}),n.jsxs(le,{onClick:()=>i({tenantId:"t-acme",tenantName:"Acme Ltd"}),variant:e.tenantId==="t-acme"?"default":"outline",className:"w-full justify-between",children:[n.jsx("span",{children:"Acme Ltd"}),e.tenantId==="t-acme"&&n.jsx(ri,{className:"w-4 h-4"})]})]})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(t3,{className:"w-5 h-5"}),"API Request Simulator"]}),n.jsx(mt,{children:"Simulate API calls with tenant headers"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(le,{onClick:()=>s("/api/users","GET"),variant:"outline",className:"w-full",children:"GET /api/users"}),n.jsx(le,{onClick:()=>s("/api/scans","POST"),variant:"outline",className:"w-full",children:"POST /api/scans"}),n.jsx(le,{onClick:()=>s("/api/events","GET"),variant:"outline",className:"w-full",children:"GET /api/events"})]})]})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(Wee,{className:"w-5 h-5"}),"Request Log"]}),n.jsx(mt,{children:"Recent API calls with tenant context"})]}),n.jsx(Re,{children:r.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No requests yet. Try switching tenants or simulating API calls."}):n.jsx("div",{className:"space-y-2",children:r.map((o,l)=>n.jsx("div",{className:"text-sm font-mono bg-muted p-2 rounded border border-border",children:o},l))})})]}),n.jsx(XPe,{}),n.jsx(YPe,{}),n.jsx(WPe,{})]})}const ZPe=["decision.closed","feature.flag.changed","simulation.rerun","decision.recommended.applied","board.brief.generated","guardrail.added","guardrail.deleted","guardrail.violated","guardrail.template.applied","guardrail.notifications.updated","guardrail.outcome_breach","guardrail.auto_adjusted","outcomes.exported","adjustments.exported"],QPe=["viewer","analyst","manager","admin"];function e6e(){const{tenant:e}=Fr(),{audit:t}=Vo(),[r,a]=N.useState("7d"),[s,i]=N.useState([]),[o,l]=N.useState([]),[d,u]=N.useState(""),[f,m]=N.useState(!1),p=N.useMemo(()=>t.filter(S=>S.tenantId===e.tenantId).sort((S,T)=>T.ts-S.ts),[t,e.tenantId]),g=N.useMemo(()=>{let S=[...p];if(r!=="all"){const T=Date.now(),O={"24h":1440*60*1e3,"7d":10080*60*1e3,"30d":720*60*60*1e3}[r];S=S.filter(R=>T-R.ts<=O)}if(s.length>0&&(S=S.filter(T=>s.includes(T.eventType))),o.length>0&&(S=S.filter(T=>T.actorRole&&o.includes(T.actorRole))),d.trim()){const T=d.toLowerCase();S=S.filter(O=>JSON.stringify(O.payload).toLowerCase().includes(T))}return S},[p,r,s,o,d]),b=S=>{const T=new Date(S);return{date:T.toLocaleDateString(),time:T.toLocaleTimeString()}},v=S=>S.includes("closed")||S.includes("recommended")?"default":S.includes("flag")?"secondary":S.includes("simulation")?"outline":"secondary",y=S=>{i(T=>T.includes(S)?T.filter(O=>O!==S):[...T,S])},j=S=>{l(T=>T.includes(S)?T.filter(O=>O!==S):[...T,S])},_=()=>{a("7d"),i([]),l([]),u("")},C=r!=="7d"||s.length>0||o.length>0||d.trim()!=="",A=()=>{H4e(g)};return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(qr,{to:"/retina",className:"hover:text-foreground transition-colors",children:"Retina"}),n.jsx(ti,{className:"w-4 h-4"}),n.jsx("span",{className:"text-foreground font-medium",children:"Audit"})]}),n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Audit Log"}),n.jsx(be,{variant:"secondary",className:"text-sm",children:e.tenantName})]}),n.jsx("p",{className:"text-muted-foreground",children:"Track all system events and user actions"})]}),n.jsxs(le,{onClick:A,disabled:g.length===0,children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Cg,{className:"w-5 h-5 text-muted-foreground"}),n.jsx(Ge,{children:"Filters"})]}),C&&n.jsxs(le,{variant:"ghost",size:"sm",onClick:_,children:[n.jsx(Ui,{className:"w-4 h-4 mr-2"}),"Clear Filters"]})]})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("label",{className:"text-sm font-medium min-w-[100px]",children:"Time Range:"}),n.jsx("div",{className:"flex gap-2",children:["24h","7d","30d","all"].map(S=>n.jsxs(le,{variant:r===S?"default":"outline",size:"sm",onClick:()=>a(S),children:[S==="24h"&&"Last 24h",S==="7d"&&"Last 7 days",S==="30d"&&"Last 30 days",S==="all"&&"All"]},S))})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("label",{className:"text-sm font-medium min-w-[100px] pt-1",children:"Event Types:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:ZPe.map(S=>n.jsxs(be,{variant:s.includes(S)?"default":"outline",className:"cursor-pointer hover:bg-primary/80",onClick:()=>y(S),children:[S,s.includes(S)&&n.jsx(Ui,{className:"w-3 h-3 ml-1"})]},S))})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("label",{className:"text-sm font-medium min-w-[100px] pt-1",children:"Roles:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:QPe.map(S=>n.jsxs(be,{variant:o.includes(S)?"default":"outline",className:"cursor-pointer hover:bg-primary/80",onClick:()=>j(S),children:[S,o.includes(S)&&n.jsx(Ui,{className:"w-3 h-3 ml-1"})]},S))})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("label",{className:"text-sm font-medium min-w-[100px]",children:"Search:"}),n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(Rl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(et,{placeholder:"Search in payload JSON...",value:d,onChange:S=>u(S.target.value),className:"pl-9"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:n.jsx(vl,{className:"w-6 h-6 text-primary"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:g.length}),n.jsx("div",{className:"text-sm text-muted-foreground",children:C?"Filtered Events":"Total Events"})]})]})})}),n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-500/10 flex items-center justify-center",children:n.jsx(vc,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:g.length>0?b(g[0].ts).date:"N/A"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Latest Activity"})]})]})})}),n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-lg bg-green-500/10 flex items-center justify-center",children:n.jsx(wv,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:new Set(g.map(S=>S.actor)).size}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Users"})]})]})})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Audit Events"}),n.jsx(mt,{children:C?`Showing ${g.length} filtered events`:`Showing all ${g.length} events for ${e.tenantName}`})]}),n.jsx(Re,{children:f?n.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((S,T)=>n.jsx(uc,{className:"h-16 w-full bg-muted"},T))}):g.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(vl,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:C?"No events match your filters":"No audit events yet"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:C?"Try adjusting your filter criteria":"Events will appear here as actions are performed"})]}):n.jsx("div",{className:"rounded-lg border border-border overflow-hidden",children:n.jsxs(Ho,{children:[n.jsx(Go,{children:n.jsxs(Yn,{children:[n.jsx(Mt,{children:"Timestamp"}),n.jsx(Mt,{children:"Tenant ID"}),n.jsx(Mt,{children:"Actor"}),n.jsx(Mt,{children:"Role"}),n.jsx(Mt,{children:"Event Type"}),n.jsx(Mt,{children:"Payload"})]})}),n.jsx(Wo,{children:g.map((S,T)=>{const{date:O,time:R}=b(S.ts),M=JSON.stringify(S.payload),I=M.length>50?M.substring(0,50)+"...":M;return n.jsxs(Yn,{children:[n.jsx(Rt,{children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm font-medium",children:O}),n.jsx("div",{className:"text-xs text-muted-foreground",children:R})]})}),n.jsx(Rt,{children:n.jsx(be,{variant:"outline",className:"font-mono text-xs",children:S.tenantId})}),n.jsx(Rt,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:n.jsx(wv,{className:"w-4 h-4 text-muted-foreground"})}),n.jsx("span",{className:"text-sm",children:S.actor})]})}),n.jsx(Rt,{children:S.actorRole?n.jsx(be,{variant:"secondary",children:S.actorRole}):n.jsx("span",{className:"text-xs text-muted-foreground",children:"N/A"})}),n.jsx(Rt,{children:n.jsx(be,{variant:v(S.eventType),children:S.eventType})}),n.jsx(Rt,{children:n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("div",{className:"text-sm text-muted-foreground max-w-xs truncate cursor-help",children:I})}),n.jsx(St,{className:"max-w-md",children:n.jsx("pre",{className:"text-xs whitespace-pre-wrap break-words",children:JSON.stringify(S.payload,null,2)})})]})})})]},T)})})]})})})]})]})}function t6e({requiredRole:e,children:t}){const{user:r,hasPermission:a}=kg();return r?a(e)?n.jsx(n.Fragment,{children:t}):n.jsx("div",{className:"flex items-center justify-center min-h-[60vh] p-6",children:n.jsxs(Ae,{className:"max-w-md w-full",children:[n.jsxs(He,{className:"text-center",children:[n.jsx("div",{className:"mx-auto mb-4 w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center",children:n.jsx(Fo,{className:"w-6 h-6 text-destructive"})}),n.jsx(Ge,{children:"Insufficient Permissions"}),n.jsxs(mt,{children:["You don't have permission to access this page. This page requires"," ",n.jsx("strong",{children:e})," role or higher."]})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:["Your current role: ",n.jsx("strong",{children:r.role})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx(le,{asChild:!0,children:n.jsx(qr,{to:"/retina",children:"Go to Dashboard"})})})]})]})}):n.jsx("div",{className:"flex items-center justify-center min-h-[60vh] p-6",children:n.jsxs(Ae,{className:"max-w-md w-full",children:[n.jsxs(He,{className:"text-center",children:[n.jsx("div",{className:"mx-auto mb-4 w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center",children:n.jsx(Fo,{className:"w-6 h-6 text-destructive"})}),n.jsx(Ge,{children:"Authentication Required"}),n.jsx(mt,{children:"You must be logged in to access this page"})]}),n.jsx(Re,{className:"flex justify-center",children:n.jsx(le,{asChild:!0,children:n.jsx(qr,{to:"/retina",children:"Go to Dashboard"})})})]})})}const ZF={viewer:Mh,editor:Fo,admin:wy};function r6e(){const{tenant:e}=Fr(),{flags:t,updateFlag:r,isEnabled:a}=aB(e.tenantId),{user:s,canModifyFeatureFlags:i,updateRole:o}=kg(),{addAudit:l}=Vo(),{thresholds:d,updateThresholds:u}=Jz(e.tenantId),{settings:f,updateUtilitySettings:m}=Qz(e.tenantId),{settings:p,updateTCORSettings:g}=Zz(e.tenantId),[b,v]=N.useState(null),[y,j]=N.useState(d.red.toString()),[_,C]=N.useState(d.amber.toString()),[A,S]=N.useState(f.mode),[T,O]=N.useState(f.a.toString()),[R,M]=N.useState(f.scale.toString()),[I,D]=N.useState(f.useForRecommendation),[$,K]=N.useState(p.insuranceRate.toString()),[U,J]=N.useState(p.contingencyOnCap.toString());pe.useEffect(()=>{j(d.red.toString()),C(d.amber.toString())},[d]),pe.useEffect(()=>{S(f.mode),O(f.a.toString()),M(f.scale.toString()),D(f.useForRecommendation)},[f]),pe.useEffect(()=>{K(p.insuranceRate.toString()),J(p.contingencyOnCap.toString())},[p]),pe.useEffect(()=>{if(b){const Q=setTimeout(()=>v(null),5e3);return()=>clearTimeout(Q)}},[b]);const V=Object.values(t).filter(Boolean).length,G=i(e.tenantId),q=(Q,F)=>{if(!G){v({title:"Permission Denied",description:"You don't have permission to modify feature flags",variant:"destructive"});return}r(Q,F),l("feature.flag.changed",{tenantId:e.tenantId,moduleKey:Q,enabled:F,actorRole:(s==null?void 0:s.role)||"unknown"})},Y=Q=>{if(!G){v({title:"Permission Denied",description:"You don't have permission to modify feature flags",variant:"destructive"});return}const F=Q==="enable",z=[];yh.forEach(H=>{a(H.key)!==F&&(r(H.key,F),z.push(H.key))}),z.length>0&&(l("feature.flag.bulk.changed",{tenantId:e.tenantId,action:Q,modules:z,count:z.length,actorRole:(s==null?void 0:s.role)||"unknown"}),v({title:"Bulk Action Complete",description:`${Q==="enable"?"Enabled":"Disabled"} ${z.length} module(s)`}))};return n.jsxs("div",{className:"p-6 space-y-6",children:[b&&n.jsxs(Fs,{variant:b.variant==="destructive"?"destructive":"default",className:"mb-4",children:[n.jsx(yn,{className:"h-4 w-4"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:b.title}),n.jsx("div",{className:"text-sm",children:b.description})]}),n.jsx(le,{variant:"ghost",size:"sm",className:"ml-auto",onClick:()=>v(null),children:"Dismiss"})]}),n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Admin Settings"}),n.jsxs("p",{className:"text-muted-foreground mt-1",children:["Manage module features for ",e.tenantName]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(be,{variant:"outline",className:"text-sm",children:[n.jsx(Mp,{className:"h-3 w-3 mr-1"}),V," / ",yh.length," enabled"]}),s&&n.jsxs(be,{variant:"secondary",className:"text-sm",children:[pe.createElement(ZF[s.role],{className:"h-3 w-3 mr-1"}),s.role]})]})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Role Switcher (Demo)"}),n.jsx(mt,{children:"Switch between roles to test RBAC controls. In production, roles are assigned by administrators."})]}),n.jsx(Re,{children:n.jsx("div",{className:"space-y-4",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["viewer","editor","admin"].map(Q=>{const F=ZF[Q],z=(s==null?void 0:s.role)===Q,H={viewer:"Can view goals and data, but cannot create or edit",editor:"Can create and edit goals, but cannot manage modules",admin:"Full access to all features and settings"};return n.jsxs("button",{onClick:()=>{o(Q),l("user.role.changed",{tenantId:e.tenantId,previousRole:s==null?void 0:s.role,newRole:Q,userId:s==null?void 0:s.id}),v({title:"Role Updated",description:`Switched to ${Q} role`})},className:`p-4 border rounded-lg text-left transition-all ${z?"border-primary bg-primary/5 ring-2 ring-primary":"border-border hover:border-primary/50 hover:bg-accent"}`,children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(F,{className:"w-5 h-5"}),n.jsx("div",{className:"font-semibold capitalize",children:Q}),z&&n.jsx(be,{variant:"default",className:"ml-auto text-xs",children:"Active"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:H[Q]})]},Q)})})})})]}),!G&&n.jsxs(Fs,{children:[n.jsx(yn,{className:"h-4 w-4"}),n.jsxs(ei,{children:["Your current role (",n.jsx("strong",{children:s==null?void 0:s.role}),") does not have permission to manage modules. Module toggles are disabled. Requires"," ",n.jsx("strong",{children:"admin"})," role."]})]}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx(Ge,{children:"Module Features"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enable or disable modules for this tenant. Changes are saved automatically."})]}),n.jsx(At,{children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("span",{children:n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>Y("enable"),disabled:!G||V===yh.length,children:[n.jsx(ri,{className:"h-4 w-4 mr-1"}),"Enable All"]})})}),!G&&n.jsx(St,{children:n.jsx("p",{children:"Requires manager role"})})]}),n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("span",{children:n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>Y("disable"),disabled:!G||V===0,children:[n.jsx(vp,{className:"h-4 w-4 mr-1"}),"Disable All"]})})}),!G&&n.jsx(St,{children:n.jsx("p",{children:"Requires manager role"})})]})]})})]})}),n.jsx(Re,{children:n.jsx("div",{className:"space-y-4",children:yh.map(Q=>{const F=a(Q.key);return n.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"text-2xl text-muted-foreground",children:Q.icon}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"font-semibold",children:Q.name}),n.jsx(be,{variant:F?"default":"secondary",className:"text-xs",children:F?"Enabled":"Disabled"})]}),n.jsx("div",{className:"text-sm text-muted-foreground",children:Q.description}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Route: ",Q.path]})]})]}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("span",{children:n.jsx(Pa,{checked:F,onCheckedChange:z=>q(Q.key,z),disabled:!G})})}),!G&&n.jsx(St,{children:n.jsx("p",{children:"Requires manager role"})})]})})]},Q.key)})})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Decision Metrics"}),n.jsx(mt,{children:"Configure RAROC thresholds for risk assessment badges"})]}),n.jsx(Re,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"red-threshold",children:"Red Threshold"}),n.jsx(et,{id:"red-threshold",type:"number",step:"0.01",min:"0",value:y,onChange:Q=>j(Q.target.value),placeholder:"0.05"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["RAROC ","<"," ",y||"0.05"," will show red badge"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"amber-threshold",children:"Amber Threshold"}),n.jsx(et,{id:"amber-threshold",type:"number",step:"0.01",min:"0",value:_,onChange:Q=>C(Q.target.value),placeholder:"0.10"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["RAROC ","<"," ",_||"0.10"," will show amber badge"]})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(le,{onClick:()=>{const Q=parseFloat(y),F=parseFloat(_);if(isNaN(Q)||isNaN(F)){v({title:"Invalid Input",description:"Please enter valid numbers for both thresholds",variant:"destructive"});return}if(Q<=0||F<=0){v({title:"Invalid Thresholds",description:"Thresholds must be greater than 0",variant:"destructive"});return}if(Q>=F){v({title:"Invalid Thresholds",description:"Red threshold must be less than amber threshold",variant:"destructive"});return}try{u({red:Q,amber:F}),l("settings.raroc.updated",{tenantId:e.tenantId,red:Q,amber:F,actorRole:(s==null?void 0:s.role)||"unknown"}),v({title:"Thresholds Updated",description:`RAROC thresholds saved: Red < ${Q}, Amber < ${F}`})}catch{v({title:"Error",description:"Failed to save thresholds. Please try again.",variant:"destructive"})}},children:"Save Thresholds"}),n.jsx(le,{variant:"outline",onClick:()=>{j("0.05"),C("0.10")},children:"Reset to Defaults"})]}),n.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[n.jsx("div",{className:"text-sm font-medium",children:"Current Thresholds:"}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(be,{className:"bg-red-500 text-white hover:bg-red-600",children:"Red"}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["RAROC ","<"," ",d.red]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(be,{className:"bg-amber-500 text-white hover:bg-amber-600",children:"Amber"}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[d.red,"  RAROC ","<"," ",d.amber]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(be,{className:"bg-green-500 text-white hover:bg-green-600",children:"Green"}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["RAROC  ",d.amber]})]})]})]})]})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Utility"}),n.jsx(mt,{children:"Configure utility function for Expected Utility and Certainty Equivalent computation"})]}),n.jsx(Re,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"utility-mode",children:"Mode"}),n.jsxs(Et,{value:A,onValueChange:Q=>S(Q),children:[n.jsx(kt,{id:"utility-mode",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"CARA",children:"CARA"}),n.jsx(we,{value:"CRRA",children:"CRRA"}),n.jsx(we,{value:"Exponential",children:"Exponential"}),n.jsx(we,{value:"Quadratic",children:"Quadratic"}),n.jsx(we,{value:"Power",children:"Power"})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:HP[A]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"risk-aversion",children:n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("span",{className:"cursor-help border-b border-dotted border-muted-foreground",children:"Risk aversion (a)"})}),n.jsx(St,{children:n.jsx("p",{className:"text-xs max-w-xs",children:"Higher values = more risk-averse. Default: 0.000005"})})]})})}),n.jsx(et,{id:"risk-aversion",type:"number",step:"0.000001",min:"0",value:T,onChange:Q=>O(Q.target.value),placeholder:"0.000005"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Coefficient for CARA utility function"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"outcome-scale",children:n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("span",{className:"cursor-help border-b border-dotted border-muted-foreground",children:"Outcome scale"})}),n.jsx(St,{children:n.jsx("p",{className:"text-xs max-w-xs",children:"Divides outcomes before utility computation. Default: 100000"})})]})})}),n.jsx(et,{id:"outcome-scale",type:"number",step:"1000",min:"1",value:R,onChange:Q=>M(Q.target.value),placeholder:"100000"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Scale factor for normalizing outcomes"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"use-recommendation",children:"Recommendation"}),n.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[n.jsx(Pa,{id:"use-recommendation",checked:I,onCheckedChange:D}),n.jsx(Ne,{htmlFor:"use-recommendation",className:"font-normal cursor-pointer",children:"Use Utility for recommendation"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"When enabled, recommendations use CE instead of RAROC"})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(le,{onClick:()=>{const Q=parseFloat(T),F=parseFloat(R);if(isNaN(Q)||isNaN(F)){v({title:"Invalid Input",description:"Please enter valid numbers for all fields",variant:"destructive"});return}if(Q<0||F<=0){v({title:"Invalid Values",description:"Risk aversion must be  0 and scale must be > 0",variant:"destructive"});return}try{m({mode:A,a:Q,scale:F,useForRecommendation:I}),l("settings.utility.changed",{tenantId:e.tenantId,mode:A,a:Q,scale:F,useForRecommendation:I,actorRole:(s==null?void 0:s.role)||"unknown"}),v({title:"Utility Settings Updated",description:`Saved: mode=${A}, a=${Q}, scale=${F}, useForRec=${I}`})}catch{v({title:"Error",description:"Failed to save utility settings. Please try again.",variant:"destructive"})}},children:"Save Utility Settings"}),n.jsx(le,{variant:"outline",onClick:()=>{S("CARA"),O("0.000005"),M("100000"),D(!1)},children:"Reset to Defaults"})]}),n.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[n.jsx("div",{className:"text-sm font-medium",children:"Current Settings:"}),n.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[n.jsxs("div",{children:["Mode: ",f.mode]}),n.jsx("div",{className:"text-xs italic",children:HP[f.mode]}),n.jsxs("div",{children:["Risk aversion (a): ",f.a]}),n.jsxs("div",{children:["Outcome scale: ",f.scale]}),n.jsxs("div",{children:["Use for recommendation:"," ",f.useForRecommendation?"Yes":"No"]})]})]})]})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"TCOR (proxy)"}),n.jsx(mt,{children:"Configure Total Cost of Risk parameters"})]}),n.jsx(Re,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"insurance-rate",children:"Insurance rate on cost"}),n.jsx(et,{id:"insurance-rate",type:"number",step:"0.001",min:"0",max:"1",value:$,onChange:Q=>K(Q.target.value),placeholder:"0.01"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Default: 0.01 (1% of option cost)"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"contingency-rate",children:"Contingency on econ capital"}),n.jsx(et,{id:"contingency-rate",type:"number",step:"0.01",min:"0",max:"1",value:U,onChange:Q=>J(Q.target.value),placeholder:"0.15"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Default: 0.15 (15% of economic capital)"})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(le,{onClick:()=>{const Q=parseFloat($),F=parseFloat(U);if(isNaN(Q)||isNaN(F)){v({title:"Invalid Input",description:"Please enter valid numbers for both fields",variant:"destructive"});return}if(Q<0||Q>1||F<0||F>1){v({title:"Invalid Values",description:"Rates must be between 0 and 1",variant:"destructive"});return}try{g({insuranceRate:Q,contingencyOnCap:F}),l("settings.tcor.changed",{tenantId:e.tenantId,insuranceRate:Q,contingencyOnCap:F,actorRole:(s==null?void 0:s.role)||"unknown"}),v({title:"TCOR Settings Updated",description:`Saved: insurance=${Q}, contingency=${F}`})}catch{v({title:"Error",description:"Failed to save TCOR settings. Please try again.",variant:"destructive"})}},children:"Save TCOR Settings"}),n.jsx(le,{variant:"outline",onClick:()=>{K("0.01"),J("0.15")},children:"Reset to Defaults"})]}),n.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[n.jsx("div",{className:"text-sm font-medium",children:"Current Settings:"}),n.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[n.jsxs("div",{children:["Insurance rate: ",p.insuranceRate," (",(p.insuranceRate*100).toFixed(1),"%)"]}),n.jsxs("div",{children:["Contingency on capital: ",p.contingencyOnCap," (",(p.contingencyOnCap*100).toFixed(1),"%)"]})]})]})]})})]}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-base",children:"About Feature Flags"})}),n.jsxs(Re,{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsxs("p",{children:[" Feature flags are stored per-tenant in localStorage with key:"," ",n.jsxs("code",{className:"bg-muted px-1 py-0.5 rounded text-xs",children:["retina:features:",e.tenantId]})]}),n.jsx("p",{children:" Disabled modules will be hidden from the sidebar and modules index"}),n.jsx("p",{children:" Attempting to access a disabled module will show a guard message"}),n.jsx("p",{children:" Changes take effect immediately without page refresh"})]})]})]})}function n6e(){return n.jsx(t6e,{requiredRole:"admin",children:n.jsx(r6e,{})})}function a6e(e){const t=[],r=Date.now(),s=lU(e,1).flatMap(d=>Object.entries(d.metrics).map(([u,f])=>({metric:u,count:f,date:d.date})));if(s.length>0){const d={};s.forEach(u=>{const f=u.metric.includes("RAROC")?"Finance":u.metric.includes("VaR")?"Risk":"General";d[f]=(d[f]||0)+u.count}),Object.entries(d).forEach(([u,f])=>{f>=2&&t.push({id:`guardrail-${u}-${r}`,timestamp:r,category:"guardrails",title:`Guardrails Tightened ${f} in ${u} Domain`,description:`System detected ${f} guardrail adjustments in the ${u} domain over the last 24 hours, indicating increased risk sensitivity in this area.`,impact:f>=3?"high":"medium",metrics:[{label:"Adjustments",value:`${f}`,trend:"up"},{label:"Domain",value:u}]})})}const i=vo(e);if(i.forEach(d=>{const u=my(e,d.id);if(u.length>=2){const f=u[u.length-1],m=u[u.length-2],p=(f.index-m.index)/m.index*100;Math.abs(p)>=10&&t.push({id:`antifragility-${d.id}-${r}`,timestamp:r,category:"antifragility",title:`Portfolio "${d.name}" Shows ${Math.abs(p).toFixed(0)}% Antifragility ${p>0?"Gain":"Decline"}`,description:`Portfolio antifragility index ${p>0?"increased":"decreased"} from ${m.index.toFixed(1)} to ${f.index.toFixed(1)}, indicating ${p>0?"improved":"reduced"} resilience to shocks.`,impact:Math.abs(p)>=20?"high":"medium",metrics:[{label:"Current Index",value:f.index.toFixed(1),trend:p>0?"up":"down"},{label:"Change",value:`${p>0?"+":""}${p.toFixed(1)}%`,trend:p>0?"up":"down"}],relatedEntities:[{type:"portfolio",id:d.id,name:d.name}]})}}),i.length>=2){const d=i.map(m=>{const p=my(e,m.id);return{name:m.name,index:p.length>0?p[p.length-1].index:50}}),u=d.reduce((m,p)=>m+p.index,0)/d.length,f=d.filter(m=>m.index>=70);f.length>=2&&t.push({id:`cross-portfolio-${r}`,timestamp:r,category:"antifragility",title:`${f.length} Portfolios Achieve "Excellent" Antifragility Rating`,description:`Organization-wide antifragility average is ${u.toFixed(1)}, with ${f.length} portfolios exceeding the 70-point threshold for excellent resilience.`,impact:"high",metrics:[{label:"Org Average",value:u.toFixed(1),trend:u>=60?"up":"stable"},{label:"Strong Portfolios",value:`${f.length}/${i.length}`}]})}const o=Math.floor(Math.random()*5)+1;o>=3&&t.push({id:`signals-${r}`,timestamp:r,category:"signals",title:`${o} Decisions Auto-Refreshed from Signal Updates`,description:`External signals triggered automatic re-evaluation of ${o} decisions, ensuring decisions remain aligned with current market conditions.`,impact:"medium",metrics:[{label:"Refreshed Decisions",value:`${o}`}]});const l=Math.floor(Math.random()*3);return l>=2&&t.push({id:`incidents-${r}`,timestamp:r,category:"incidents",title:`${l} Incidents Matched to Active Decisions`,description:`System detected ${l} external incidents that impacted active decisions, triggering automatic journal entries and re-evaluation tags.`,impact:"high",metrics:[{label:"Matched Incidents",value:`${l}`,trend:"up"}]}),t.sort((d,u)=>{const f={high:0,medium:1,low:2},m=f[d.impact]-f[u.impact];return m!==0?m:u.timestamp-d.timestamp}),t}function s6e(e){var i;const t=a6e(e),r=t.filter(o=>o.impact==="high").length,a={};t.forEach(o=>{a[o.category]=(a[o.category]||0)+1});const s=((i=Object.entries(a).sort((o,l)=>l[1]-o[1])[0])==null?void 0:i[0])||"none";return{date:Date.now(),insights:t,summary:{totalInsights:t.length,highImpact:r,topCategory:s}}}function i6e(e){return{guardrails:{color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-950",label:"Guardrails"},antifragility:{color:"text-green-600 dark:text-green-400",bgColor:"bg-green-50 dark:bg-green-950",label:"Antifragility"},signals:{color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-50 dark:bg-purple-950",label:"Signals"},incidents:{color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-50 dark:bg-orange-950",label:"Incidents"},outcomes:{color:"text-cyan-600 dark:text-cyan-400",bgColor:"bg-cyan-50 dark:bg-cyan-950",label:"Outcomes"}}[e]}function o6e(e){return{high:{color:"bg-red-100 text-red-800 dark:bg-red-950 dark:text-red-200",label:"High Impact"},medium:{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-950 dark:text-yellow-200",label:"Medium Impact"},low:{color:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",label:"Low Impact"}}[e]}function l6e(){const{tenant:e}=Fr(),[t,r]=N.useState("all"),[a,s]=N.useState("all"),[i,o]=N.useState(1),l=s6e(e.tenantId),d=l.insights.filter(m=>!(t!=="all"&&m.category!==t||a!=="all"&&m.impact!==a)),u=()=>{const p=[["Timestamp","Category","Impact","Title","Description"],...d.map(y=>[new Date(y.timestamp).toLocaleString(),y.category,y.impact,y.title,y.description])].map(y=>y.join(",")).join(`
`),g=new Blob([p],{type:"text/csv"}),b=URL.createObjectURL(g),v=document.createElement("a");v.href=b,v.download=`learning-feed-${new Date().toISOString().split("T")[0]}.csv`,v.click(),URL.revokeObjectURL(b)},f=()=>{console.warn("Prevented function call: `window.location.reload()`")};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[n.jsx(qi,{className:"h-8 w-8 text-primary"}),"Daily Learning Feed"]}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"System-generated insights from the last 24 hours"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(le,{variant:"outline",size:"sm",onClick:f,children:[n.jsx($i,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:u,children:[n.jsx(qn,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs(Ae,{children:[n.jsxs(He,{className:"pb-3",children:[n.jsx(mt,{children:"Total Insights"}),n.jsx(Ge,{className:"text-3xl",children:l.summary.totalInsights})]}),n.jsx(Re,{children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Generated in last 24h"})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{className:"pb-3",children:[n.jsx(mt,{children:"High Impact"}),n.jsx(Ge,{className:"text-3xl text-red-600 dark:text-red-400",children:l.summary.highImpact})]}),n.jsx(Re,{children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Requiring attention"})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{className:"pb-3",children:[n.jsx(mt,{children:"Top Category"}),n.jsx(Ge,{className:"text-2xl capitalize",children:l.summary.topCategory})]}),n.jsx(Re,{children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Most active area"})})]})]}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(Cg,{className:"h-5 w-5"}),"Filters"]}),n.jsxs(mt,{children:["Showing ",d.length," of ",l.insights.length," ","insights"]})]})})}),n.jsx(Re,{children:n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Category"}),n.jsxs(Et,{value:t,onValueChange:r,children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Categories"}),n.jsx(we,{value:"guardrails",children:"Guardrails"}),n.jsx(we,{value:"antifragility",children:"Antifragility"}),n.jsx(we,{value:"signals",children:"Signals"}),n.jsx(we,{value:"incidents",children:"Incidents"}),n.jsx(we,{value:"outcomes",children:"Outcomes"})]})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Impact"}),n.jsxs(Et,{value:a,onValueChange:s,children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Impacts"}),n.jsx(we,{value:"high",children:"High Impact"}),n.jsx(we,{value:"medium",children:"Medium Impact"}),n.jsx(we,{value:"low",children:"Low Impact"})]})]})]})]})})]}),n.jsx("div",{className:"space-y-4",children:d.length===0?n.jsx(Ae,{children:n.jsxs(Re,{className:"py-12 text-center",children:[n.jsx(qi,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No insights match your filters. Try adjusting the filters above."})]})}):d.map(m=>n.jsx(c6e,{insight:m},m.id))})]})}function c6e({insight:e}){const t=i6e(e.category),r=o6e(e.impact);return n.jsxs(Ae,{className:"hover:shadow-md transition-shadow",children:[n.jsx(He,{children:n.jsx("div",{className:"flex items-start justify-between gap-4",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(be,{variant:"outline",className:t.bgColor,children:n.jsx("span",{className:t.color,children:t.label})}),n.jsx(be,{className:r.color,children:r.label}),n.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp).toLocaleString()})]}),n.jsx(Ge,{className:"text-xl",children:e.title}),n.jsx(mt,{className:"mt-2",children:e.description})]})})}),e.metrics&&e.metrics.length>0&&n.jsxs(Re,{children:[n.jsx("div",{className:"flex flex-wrap gap-6",children:e.metrics.map((a,s)=>n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:a.label}),n.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[n.jsx("p",{className:"text-lg font-semibold",children:a.value}),a.trend&&n.jsxs("span",{children:[a.trend==="up"&&n.jsx($r,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),a.trend==="down"&&n.jsx(fa,{className:"h-4 w-4 text-red-600 dark:text-red-400"}),a.trend==="stable"&&n.jsx(wl,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})]})]})]})},s))}),e.relatedEntities&&e.relatedEntities.length>0&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Related Entities"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:e.relatedEntities.map((a,s)=>n.jsxs(be,{variant:"secondary",children:[a.type,": ",a.name]},s))})]})]})]})}function d6e(e,t){const r=[];if((!e.statement||e.statement.trim()==="")&&r.push({row:t,field:"statement",message:"Goal statement is required and cannot be empty",value:e.statement}),!e.category)r.push({row:t,field:"category",message:"Category is required",value:e.category});else{const a=["strategic","operational","financial","customer","learning","compliance"];a.includes(e.category)||r.push({row:t,field:"category",message:`Invalid category. Must be one of: ${a.join(", ")}`,value:e.category})}if(!e.priority)r.push({row:t,field:"priority",message:"Priority is required",value:e.priority});else{const a=["critical","high","medium","low"];a.includes(e.priority)||r.push({row:t,field:"priority",message:`Invalid priority. Must be one of: ${a.join(", ")}`,value:e.priority})}if(!e.time_horizon)r.push({row:t,field:"time_horizon",message:"Time horizon is required",value:e.time_horizon});else{const a=["short","medium","long"];a.includes(e.time_horizon)||r.push({row:t,field:"time_horizon",message:`Invalid time horizon. Must be one of: ${a.join(", ")}`,value:e.time_horizon})}if(!e.status)r.push({row:t,field:"status",message:"Status is required",value:e.status});else{const a=["draft","active","on-hold","completed","archived"];a.includes(e.status)||r.push({row:t,field:"status",message:`Invalid status. Must be one of: ${a.join(", ")}`,value:e.status})}if(!e.owners||e.owners.length===0)r.push({row:t,field:"owners",message:"At least one owner is required",value:e.owners});else{e.owners.forEach((s,i)=>{s.stakeholder_id||r.push({row:t,field:`owners[${i}].stakeholder_id`,message:"Owner stakeholder_id is required",value:s}),s.ownership_percentage!==void 0&&(s.ownership_percentage<0||s.ownership_percentage>100)&&r.push({row:t,field:`owners[${i}].ownership_percentage`,message:"Ownership percentage must be between 0 and 100",value:s.ownership_percentage})});const a=e.owners.reduce((s,i)=>s+(i.ownership_percentage||0),0);a>100&&r.push({row:t,field:"owners",message:`Total ownership percentage (${a}%) exceeds 100%`,value:a})}return!e.kpis||e.kpis.length===0?r.push({row:t,field:"kpis",message:"At least one KPI is required",value:e.kpis}):e.kpis.forEach((a,s)=>{(!a.name||a.name.trim()==="")&&r.push({row:t,field:`kpis[${s}].name`,message:"KPI name is required",value:a}),a.target_value||r.push({row:t,field:`kpis[${s}].target_value`,message:"KPI target value is required",value:a}),a.unit||r.push({row:t,field:`kpis[${s}].unit`,message:"KPI unit is required",value:a})}),e.start_date&&e.target_date&&e.start_date>e.target_date&&r.push({row:t,field:"dates",message:"Start date cannot be after target date",value:{start_date:e.start_date,target_date:e.target_date}}),e.depends_on&&e.depends_on.length>0&&e.id&&e.depends_on.includes(e.id)&&r.push({row:t,field:"depends_on",message:"Goal cannot depend on itself",value:e.depends_on}),r}function QF(e){const t=[],r=[];e.forEach((i,o)=>{const l=d6e(i,o+1);t.push(...l)});const a=new Map;e.forEach((i,o)=>{i.id&&(a.has(i.id)||a.set(i.id,[]),a.get(i.id).push(o+1))}),a.forEach((i,o)=>{i.length>1&&t.push({row:i[0],field:"id",message:`Duplicate ID "${o}" found in rows: ${i.join(", ")}`,value:o})});const s=new Map;return e.forEach((i,o)=>{if(i.statement&&i.category){const l=`${i.category}:${i.statement.toLowerCase().trim()}`;s.has(l)||s.set(l,[]),s.get(l).push(o+1)}}),s.forEach((i,o)=>{if(i.length>1){const[l,d]=o.split(":");r.push({row:i[0],field:"statement",message:`Potential duplicate: "${d}" in category "${l}" found in rows: ${i.join(", ")}`,value:d})}}),{valid:t.length===0,errors:t,warnings:r}}function e9(e){const t=[],r=new Map;e.forEach(o=>{o.id&&r.set(o.id,o)});const a=new Set,s=new Set;function i(o,l){if(s.has(o))return!0;if(a.has(o))return!1;a.add(o),s.add(o);const d=r.get(o);if(d!=null&&d.depends_on){for(const u of d.depends_on)if(i(u,[...l,o]))return!0}return s.delete(o),!1}return e.forEach((o,l)=>{o.id&&o.depends_on&&o.depends_on.length>0&&(a.clear(),s.clear(),i(o.id,[])&&t.push({row:l+1,field:"depends_on",message:`Circular dependency detected for goal "${o.statement}"`,value:o.depends_on}))}),t}function u6e(e){if(e.length===0)return"";const t=new Map;e.forEach(a=>{t.has(a.row)||t.set(a.row,[]),t.get(a.row).push(a)});const r=[];return t.forEach((a,s)=>{r.push(`Row ${s}:`),a.forEach(i=>{r.push(`   ${i.field}: ${i.message}`)})}),r.join(`
`)}function f6e({open:e,onOpenChange:t,goals:r,onImport:a,onAuditEvent:s}){const[i,o]=N.useState("export"),[l,d]=N.useState("json"),[u,f]=N.useState("json"),[m,p]=N.useState("upload"),[g,b]=N.useState(""),[v,y]=N.useState([]),[j,_]=N.useState([]),[C,A]=N.useState(null),[S,T]=N.useState("skip"),[O,R]=N.useState(new Set),[M,I]=N.useState(!1),D=N.useCallback(()=>{const Q=JSON.stringify(r,null,2),F=new Blob([Q],{type:"application/json"}),z=URL.createObjectURL(F),H=document.createElement("a");H.href=z,H.download=`goals-export-${Date.now()}.json`,H.click(),URL.revokeObjectURL(z),s==null||s("goals_exported",{format:"json",count:r.length,timestamp:Date.now()})},[r,s]),$=N.useCallback(()=>{const Q=[],F=["id","category","statement","description","priority","time_horizon","status","start_date","target_date","owners_emails","related_stakeholders","depends_on_ids","kpi_name_1","kpi_target_1","kpi_unit_1","kpi_name_2","kpi_target_2","kpi_unit_2","kpi_name_3","kpi_target_3","kpi_unit_3","tags"];Q.push(F),r.forEach(ie=>{var ge,he,ue,Se,je,Be,$e,oe,Xe,pt,Oe;const ce=[ie.id,ie.category,ie.statement,ie.description||"",ie.priority,ie.time_horizon,ie.status,((ge=ie.start_date)==null?void 0:ge.toString())||"",((he=ie.target_date)==null?void 0:he.toString())||"",ie.owners.map(Ee=>Ee.stakeholder_id).join(";"),ie.related_stakeholders.join(";"),ie.depends_on.join(";"),((ue=ie.kpis[0])==null?void 0:ue.name)||"",((Se=ie.kpis[0])==null?void 0:Se.target_value)||"",((je=ie.kpis[0])==null?void 0:je.unit)||"",((Be=ie.kpis[1])==null?void 0:Be.name)||"",(($e=ie.kpis[1])==null?void 0:$e.target_value)||"",((oe=ie.kpis[1])==null?void 0:oe.unit)||"",((Xe=ie.kpis[2])==null?void 0:Xe.name)||"",((pt=ie.kpis[2])==null?void 0:pt.target_value)||"",((Oe=ie.kpis[2])==null?void 0:Oe.unit)||"",ie.tags.join(";")];Q.push(ce)});const z=Q.map(ie=>ie.map(ce=>`"${String(ce).replace(/"/g,'""')}"`).join(",")).join(`
`),H=new Blob([z],{type:"text/csv"}),X=URL.createObjectURL(H),ne=document.createElement("a");ne.href=X,ne.download=`goals-export-${Date.now()}.csv`,ne.click(),URL.revokeObjectURL(X),s==null||s("goals_exported",{format:"csv",count:r.length,timestamp:Date.now()})},[r,s]),K=N.useCallback(Q=>{var H;const F=(H=Q.target.files)==null?void 0:H[0];if(!F)return;const z=new FileReader;z.onload=X=>{var ie;const ne=(ie=X.target)==null?void 0:ie.result;if(b(ne),u==="json")p("preview"),J(ne);else{const ge=ne.split(`
`)[0].split(",").map(he=>he.trim().replace(/^"|"$/g,""));y(ge),p("mapping"),U(ge)}},z.readAsText(F)},[u]),U=N.useCallback(Q=>{const F=[],z={id:"id",category:"category",statement:"statement",description:"description",priority:"priority",time_horizon:"time_horizon",status:"status",start_date:"start_date",target_date:"target_date",owners_emails:"owners",related_stakeholders:"related_stakeholders",depends_on_ids:"depends_on",tags:"tags"};Q.forEach(H=>{const X=H.toLowerCase().replace(/\s+/g,"_"),ne=z[X]||"";F.push({csvColumn:H,goalField:ne})}),_(F)},[]),J=N.useCallback(Q=>{try{const F=JSON.parse(Q),z=Array.isArray(F)?F:[F],H=QF(z),X=e9(z),ne=q(z,r);A({goals:z,errors:[...H.errors,...X],warnings:H.warnings,duplicates:ne}),ne.length>0&&p("dedup")}catch(F){A({goals:[],errors:[{row:0,field:"json",message:"Invalid JSON format: "+F.message}],warnings:[],duplicates:[]})}},[r]),V=N.useCallback(()=>{const Q=g.split(`
`).slice(1),F=[];Q.forEach((ne,ie)=>{if(!ne.trim())return;const ce=G(ne),ge={};j.forEach((ue,Se)=>{if(!ue.goalField||Se>=ce.length)return;const je=ce[Se].trim();if(je)switch(ue.goalField){case"id":ge.id=je;break;case"category":ge.category=je;break;case"statement":ge.statement=je;break;case"description":ge.description=je;break;case"priority":ge.priority=je;break;case"time_horizon":ge.time_horizon=je;break;case"status":ge.status=je;break;case"start_date":ge.start_date=parseInt(je)||void 0;break;case"target_date":ge.target_date=parseInt(je)||void 0;break;case"owners":ge.owners=je.split(";").map(Be=>({stakeholder_id:Be.trim(),ownership_percentage:100}));break;case"related_stakeholders":ge.related_stakeholders=je.split(";").map(Be=>Be.trim());break;case"depends_on":ge.depends_on=je.split(";").map(Be=>Be.trim());break;case"tags":ge.tags=je.split(";").map(Be=>Be.trim());break}});const he=[];for(let ue=1;ue<=3;ue++){const Se=j.find($e=>$e.csvColumn===`kpi_name_${ue}`),je=j.find($e=>$e.csvColumn===`kpi_target_${ue}`),Be=j.find($e=>$e.csvColumn===`kpi_unit_${ue}`);if(Se&&je&&Be){const $e=j.indexOf(Se),oe=j.indexOf(je),Xe=j.indexOf(Be);ce[$e]&&ce[oe]&&ce[Xe]&&he.push({name:ce[$e].trim(),target_value:ce[oe].trim(),unit:ce[Xe].trim(),current_value:"0"})}}ge.kpis=he,F.push(ge)});const z=QF(F),H=e9(F),X=q(F,r);A({goals:F,errors:[...z.errors,...H],warnings:z.warnings,duplicates:X}),p("preview"),X.length>0&&p("dedup")},[g,j,r]),G=Q=>{const F=[];let z="",H=!1;for(let X=0;X<Q.length;X++){const ne=Q[X];ne==='"'?H&&Q[X+1]==='"'?(z+='"',X++):H=!H:ne===","&&!H?(F.push(z),z=""):z+=ne}return F.push(z),F},q=(Q,F)=>{const z=[];return Q.forEach(H=>{if(H.id){const X=F.find(ne=>ne.id===H.id);if(X){z.push({importGoal:H,existingGoal:X,matchType:"id"});return}}if(H.statement&&H.category){const X=F.find(ne=>ne.statement.toLowerCase()===H.statement.toLowerCase()&&ne.category===H.category);X&&z.push({importGoal:H,existingGoal:X,matchType:"statement"})}}),z},Y=N.useCallback(async()=>{if(C){I(!0);try{const Q=C.goals.filter((z,H)=>!C.errors.some(X=>X.row===H+1));let F=Q;C.duplicates.length>0&&(F=Q.filter((z,H)=>O.has(H))),await a(F,S),s==null||s("goals_imported",{format:u,count:F.length,dedupStrategy:S,timestamp:Date.now()}),p("upload"),b(""),A(null),R(new Set),t(!1)}catch(Q){console.error("Import failed:",Q)}finally{I(!1)}}},[C,O,S,a,u,s,t]);return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Import / Export Goals"}),n.jsx(Sr,{children:"Export goals to JSON or CSV, or import from external sources"})]}),n.jsxs(si,{value:i,onValueChange:Q=>o(Q),children:[n.jsxs(zs,{className:"grid w-full grid-cols-2",children:[n.jsxs(hr,{value:"export",children:[n.jsx(qn,{className:"h-4 w-4 mr-2"}),"Export"]}),n.jsxs(hr,{value:"import",children:[n.jsx(jv,{className:"h-4 w-4 mr-2"}),"Import"]})]}),n.jsx(Cr,{value:"export",className:"space-y-4",children:n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Export Format"}),n.jsx(mt,{children:"Choose the format for exporting your goals"})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs(nu,{value:l,onValueChange:Q=>d(Q),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(yi,{value:"json",id:"export-json"}),n.jsxs(Ne,{htmlFor:"export-json",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx(YR,{className:"h-4 w-4"}),"JSON (exact goal_v2 schema)"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(yi,{value:"csv",id:"export-csv"}),n.jsxs(Ne,{htmlFor:"export-csv",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx(cs,{className:"h-4 w-4"}),"CSV (flat columns)"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-md",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium",children:[r.length," goal",r.length!==1?"s":""," ready to export"]}),n.jsx("div",{className:"text-sm text-muted-foreground",children:l==="json"?"Full schema with all fields":"Flattened format with up to 3 KPIs"})]}),n.jsxs(le,{onClick:l==="json"?D:$,disabled:r.length===0,children:[n.jsx(qn,{className:"h-4 w-4 mr-2"}),"Export ",l.toUpperCase()]})]})]})]})}),n.jsxs(Cr,{value:"import",className:"space-y-4",children:[m==="upload"&&n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Upload File"}),n.jsx(mt,{children:"Select a JSON or CSV file to import goals"})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Import Format"}),n.jsxs(nu,{value:u,onValueChange:Q=>f(Q),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(yi,{value:"json",id:"import-json"}),n.jsxs(Ne,{htmlFor:"import-json",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx(YR,{className:"h-4 w-4"}),"JSON"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(yi,{value:"csv",id:"import-csv"}),n.jsxs(Ne,{htmlFor:"import-csv",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx(cs,{className:"h-4 w-4"}),"CSV"]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"file-upload",children:"Select File"}),n.jsx(et,{id:"file-upload",type:"file",accept:u==="json"?".json":".csv",onChange:K})]}),n.jsxs(Fs,{children:[n.jsx(Or,{className:"h-4 w-4"}),n.jsx(ei,{children:u==="json"?"JSON files should match the goal_v2 schema exactly":"CSV files will be mapped to goal fields in the next step"})]})]})]}),m==="mapping"&&n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Field Mapping"}),n.jsx(mt,{children:"Map CSV columns to goal fields"})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:j.map((Q,F)=>n.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center",children:[n.jsx("div",{className:"text-sm font-medium",children:Q.csvColumn}),n.jsxs(Et,{value:Q.goalField,onValueChange:z=>{const H=[...j];H[F].goalField=z,_(H)},children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Select field"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"",children:"Skip"}),n.jsx(we,{value:"id",children:"ID"}),n.jsx(we,{value:"category",children:"Category"}),n.jsx(we,{value:"statement",children:"Statement"}),n.jsx(we,{value:"description",children:"Description"}),n.jsx(we,{value:"priority",children:"Priority"}),n.jsx(we,{value:"time_horizon",children:"Time Horizon"}),n.jsx(we,{value:"status",children:"Status"}),n.jsx(we,{value:"start_date",children:"Start Date"}),n.jsx(we,{value:"target_date",children:"Target Date"}),n.jsx(we,{value:"owners",children:"Owners"}),n.jsx(we,{value:"related_stakeholders",children:"Related Stakeholders"}),n.jsx(we,{value:"depends_on",children:"Dependencies"}),n.jsx(we,{value:"tags",children:"Tags"})]})]})]},F))}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(le,{variant:"outline",onClick:()=>p("upload"),children:"Back"}),n.jsx(le,{onClick:V,children:"Continue to Preview"})]})]})]}),m==="preview"&&C&&n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Import Preview"}),n.jsx(mt,{children:"Review goals before importing"})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(be,{variant:"outline",children:[C.goals.length," goals"]}),C.errors.length>0&&n.jsxs(be,{variant:"destructive",children:[C.errors.length," errors"]}),C.warnings.length>0&&n.jsxs(be,{variant:"secondary",children:[C.warnings.length," warnings"]}),C.duplicates.length>0&&n.jsxs(be,{variant:"secondary",children:[C.duplicates.length," duplicates"]})]}),C.errors.length>0&&n.jsxs(Fs,{variant:"destructive",children:[n.jsx(yn,{className:"h-4 w-4"}),n.jsxs(ei,{children:[n.jsx("div",{className:"font-medium mb-2",children:"Validation Errors:"}),n.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:u6e(C.errors)})]})]}),C.warnings.length>0&&n.jsxs(Fs,{children:[n.jsx(Or,{className:"h-4 w-4"}),n.jsxs(ei,{children:[n.jsx("div",{className:"font-medium mb-2",children:"Warnings:"}),n.jsx("div",{className:"space-y-1",children:C.warnings.slice(0,3).map((Q,F)=>n.jsxs("div",{className:"text-xs",children:["Row ",Q.row,": ",Q.message]},F))})]})]}),n.jsx("div",{className:"max-h-64 overflow-y-auto",children:n.jsxs(Ho,{children:[n.jsx(Go,{children:n.jsxs(Yn,{children:[n.jsx(Mt,{children:"Statement"}),n.jsx(Mt,{children:"Category"}),n.jsx(Mt,{children:"Priority"}),n.jsx(Mt,{children:"Status"})]})}),n.jsx(Wo,{children:C.goals.slice(0,10).map((Q,F)=>n.jsxs(Yn,{children:[n.jsx(Rt,{className:"font-medium",children:Q.statement}),n.jsx(Rt,{children:n.jsx(be,{variant:"outline",children:Q.category})}),n.jsx(Rt,{children:Q.priority}),n.jsx(Rt,{children:Q.status})]},F))})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(le,{variant:"outline",onClick:()=>p("upload"),children:"Cancel"}),C.duplicates.length>0?n.jsx(le,{onClick:()=>p("dedup"),children:"Handle Duplicates"}):n.jsx(le,{onClick:Y,disabled:C.errors.length>0||M,children:M?"Importing...":"Import Goals"})]})]})]}),m==="dedup"&&C&&n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Handle Duplicates"}),n.jsxs(mt,{children:[C.duplicates.length," duplicate goal",C.duplicates.length!==1?"s":""," found"]})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"De-duplication Strategy"}),n.jsxs(nu,{value:S,onValueChange:Q=>T(Q),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(yi,{value:"skip",id:"dedup-skip"}),n.jsx(Ne,{htmlFor:"dedup-skip",className:"cursor-pointer",children:"Skip duplicates (keep existing)"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(yi,{value:"replace",id:"dedup-replace"}),n.jsx(Ne,{htmlFor:"dedup-replace",className:"cursor-pointer",children:"Replace existing with imported"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(yi,{value:"merge",id:"dedup-merge"}),n.jsx(Ne,{htmlFor:"dedup-merge",className:"cursor-pointer",children:"Merge (update existing fields)"})]})]})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:C.duplicates.map((Q,F)=>n.jsxs("div",{className:"p-3 border border-border rounded-md space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kl,{checked:O.has(F),onCheckedChange:z=>{const H=new Set(O);z?H.add(F):H.delete(F),R(H)}}),n.jsx("div",{className:"text-sm font-medium",children:Q.importGoal.statement})]}),n.jsxs(be,{variant:"secondary",children:["Match by ",Q.matchType]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground pl-6",children:["Existing: ",Q.existingGoal.statement," (",Q.existingGoal.status,")"]})]},F))}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(le,{variant:"outline",onClick:()=>p("preview"),children:"Back"}),n.jsx(le,{onClick:Y,disabled:M,children:M?"Importing...":"Import Selected"})]})]})]})]})]})]})})}function HX({filters:e,onFiltersChange:t,stakeholders:r}){const a=Object.values(e).some(o=>o!==void 0&&o!==""),s=()=>{t({})},i=(o,l)=>{t({...e,[o]:l==="all"||l===""?void 0:l})};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-medium",children:"Filters"}),a&&n.jsxs(le,{variant:"ghost",size:"sm",onClick:s,className:"h-8 text-xs",children:[n.jsx(Ui,{className:"w-3 h-3 mr-1"}),"Clear All"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"lg:col-span-2",children:[n.jsx(Ne,{htmlFor:"search",className:"text-xs",children:"Search"}),n.jsxs("div",{className:"relative",children:[n.jsx(Rl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(et,{id:"search",placeholder:"Search goals...",value:e.q||"",onChange:o=>i("q",o.target.value),className:"pl-9"})]})]}),n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"category",className:"text-xs",children:"Category"}),n.jsxs(Et,{value:e.category||"all",onValueChange:o=>i("category",o),children:[n.jsx(kt,{id:"category",children:n.jsx(Tt,{placeholder:"All Categories"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Categories"}),n.jsx(we,{value:"Financial",children:"Financial"}),n.jsx(we,{value:"Operational",children:"Operational"}),n.jsx(we,{value:"Strategic",children:"Strategic"}),n.jsx(we,{value:"Compliance & Regulatory",children:"Compliance & Regulatory"}),n.jsx(we,{value:"People & Culture",children:"People & Culture"}),n.jsx(we,{value:"Resilience & Continuity",children:"Resilience & Continuity"}),n.jsx(we,{value:"Technology & Digital",children:"Technology & Digital"}),n.jsx(we,{value:"Sustainability & ESG",children:"Sustainability & ESG"}),n.jsx(we,{value:"Customer & Market",children:"Customer & Market"}),n.jsx(we,{value:"Innovation & Learning",children:"Innovation & Learning"})]})]})]}),n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"status",className:"text-xs",children:"Status"}),n.jsxs(Et,{value:e.status||"all",onValueChange:o=>i("status",o),children:[n.jsx(kt,{id:"status",children:n.jsx(Tt,{placeholder:"All Statuses"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Statuses"}),n.jsx(we,{value:"active",children:"Active"}),n.jsx(we,{value:"draft",children:"Draft"}),n.jsx(we,{value:"paused",children:"Paused"}),n.jsx(we,{value:"retired",children:"Retired"})]})]})]}),n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"time_horizon",className:"text-xs",children:"Time Horizon"}),n.jsxs(Et,{value:e.time_horizon||"all",onValueChange:o=>i("time_horizon",o),children:[n.jsx(kt,{id:"time_horizon",children:n.jsx(Tt,{placeholder:"All Horizons"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Horizons"}),n.jsx(we,{value:"short_term",children:"Short Term"}),n.jsx(we,{value:"mid_term",children:"Mid Term"}),n.jsx(we,{value:"long_term",children:"Long Term"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(Ne,{htmlFor:"stakeholder",className:"text-xs",children:"Filter by Owner/Stakeholder"}),n.jsxs(Et,{value:e.stakeholder_id||"all",onValueChange:o=>i("stakeholder_id",o),children:[n.jsx(kt,{id:"stakeholder",children:n.jsx(Tt,{placeholder:"All Stakeholders"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Stakeholders"}),r.map(o=>n.jsx(we,{value:o.id,children:o.name},o.id))]})]})]})]})}function h6e({goals:e,stakeholders:t,onRowClick:r,page:a,pageSize:s,onPageChange:i}){const o=Math.ceil(e.length/s),l=a*s,d=Math.min(l+s,e.length),u=e.slice(l,d),f=g=>{switch(g){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"draft":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"retired":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},m=g=>{const b=["","Critical","High","Medium","Low","Minimal"],v=["","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200","bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200","bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200","bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200","bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"];return{label:b[g],color:v[g]}},p=g=>g.owners.map(b=>{const v=t.find(y=>y.id===b.stakeholder_id);return(v==null?void 0:v.name)||"Unknown"}).join(", ");return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:n.jsxs(Ho,{children:[n.jsx(Go,{children:n.jsxs(Yn,{className:"bg-muted/50",children:[n.jsx(Mt,{className:"w-[140px]",children:"Category"}),n.jsx(Mt,{className:"min-w-[300px]",children:"Statement"}),n.jsx(Mt,{className:"w-[200px]",children:"KPI(s)"}),n.jsx(Mt,{className:"w-[120px]",children:"Target"}),n.jsx(Mt,{className:"w-[120px]",children:"Priority"}),n.jsx(Mt,{className:"w-[180px]",children:"Owners"}),n.jsx(Mt,{className:"w-[100px]",children:"Status"})]})}),n.jsx(Wo,{children:u.length===0?n.jsx(Yn,{children:n.jsx(Rt,{colSpan:7,className:"h-32 text-center text-muted-foreground",children:"No goals found. Try adjusting your filters."})}):u.map(g=>{const b=m(g.priority),v=p(g),y=g.kpis[0],j=g.kpis.length;return n.jsxs(Yn,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>r(g),children:[n.jsx(Rt,{children:n.jsx(be,{variant:"outline",className:"text-xs",children:g.category})}),n.jsx(Rt,{children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"font-medium line-clamp-2",children:g.statement}),g.description&&n.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:g.description})]})}),n.jsx(Rt,{children:y?n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-sm font-medium",children:y.name}),j>1&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",j-1," more"]})]}):n.jsx("span",{className:"text-xs text-muted-foreground",children:"No KPIs"})}),n.jsx(Rt,{children:(y==null?void 0:y.target)!==void 0?n.jsxs("span",{className:"text-sm font-medium",children:[y.target," ",y.unit]}):(y==null?void 0:y.range_min)!==void 0&&(y==null?void 0:y.range_max)!==void 0?n.jsxs("span",{className:"text-sm font-medium",children:[y.range_min,"-",y.range_max," ",y.unit]}):n.jsx("span",{className:"text-xs text-muted-foreground",children:""})}),n.jsx(Rt,{children:n.jsx(be,{className:b.color,children:b.label})}),n.jsx(Rt,{children:n.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[n.jsx(Uo,{className:"w-3 h-3 text-muted-foreground flex-shrink-0"}),n.jsx("span",{className:"truncate",title:v,children:v||"No owners"})]})}),n.jsx(Rt,{children:n.jsx(be,{className:f(g.status),children:g.status.charAt(0).toUpperCase()+g.status.slice(1)})})]},g.id)})})]})}),o>1&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",l+1," to ",d," of ",e.length," goals"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(le,{variant:"outline",size:"sm",onClick:()=>i(0),disabled:a===0,children:n.jsx(Mee,{className:"w-4 h-4"})}),n.jsx(le,{variant:"outline",size:"sm",onClick:()=>i(a-1),disabled:a===0,children:n.jsx(T9,{className:"w-4 h-4"})}),n.jsxs("span",{className:"text-sm",children:["Page ",a+1," of ",o]}),n.jsx(le,{variant:"outline",size:"sm",onClick:()=>i(a+1),disabled:a>=o-1,children:n.jsx(ti,{className:"w-4 h-4"})}),n.jsx(le,{variant:"outline",size:"sm",onClick:()=>i(o-1),disabled:a>=o-1,children:n.jsx(Lee,{className:"w-4 h-4"})})]})]})]})}function GX({open:e,onOpenChange:t,goal:r,stakeholders:a,allGoals:s,onEdit:i,onDelete:o}){const{canEdit:l,isReadOnly:d}=kg();if(!r)return null;const u=v=>{switch(v){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"draft":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"retired":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},m=(v=>{const y=["","Critical","High","Medium","Low","Minimal"],j=["","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200","bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200","bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200","bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200","bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"];return{label:y[v],color:j[v]}})(r.priority),p=r.dependencies.depends_on.map(v=>s.find(y=>y.id===v)).filter(Boolean),g=r.dependencies.enables.map(v=>s.find(y=>y.id===v)).filter(Boolean),b=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return n.jsx(am,{open:e,onOpenChange:t,children:n.jsxs(Pf,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[n.jsx(Mf,{children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(be,{className:u(r.status),children:r.status.charAt(0).toUpperCase()+r.status.slice(1)}),n.jsx(be,{variant:"outline",children:r.category}),n.jsx(be,{className:m.color,children:m.label}),n.jsxs(be,{variant:"outline",children:[n.jsx(vc,{className:"w-3 h-3 mr-1"}),r.time_horizon_detail?`${r.time_horizon_detail.value} ${r.time_horizon_detail.unit}`:r.time_horizon.replace("_"," ")]})]}),n.jsx(Df,{className:"text-xl leading-tight",children:r.statement}),r.description&&n.jsx(Lf,{className:"text-sm",children:r.description})]}),n.jsxs("div",{className:"flex gap-2",children:[i&&n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("span",{children:n.jsx(le,{variant:"outline",size:"sm",onClick:()=>i(r),disabled:d(),children:n.jsx(jj,{className:"w-4 h-4"})})})}),d()&&n.jsx(St,{children:n.jsx("p",{children:"Read-only access"})})]})}),o&&n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("span",{children:n.jsx(le,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this goal?")&&(o(r.id),t(!1))},disabled:d(),children:n.jsx(mo,{className:"w-4 h-4"})})})}),d()&&n.jsx(St,{children:n.jsx("p",{children:"Read-only access"})})]})})]})]})}),n.jsxs("div",{className:"mt-6 space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[n.jsx($r,{className:"w-4 h-4"}),"Key Performance Indicators"]}),n.jsx("div",{className:"space-y-3",children:r.kpis.map((v,y)=>n.jsxs("div",{className:"border border-border rounded-lg p-3 space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsx("p",{className:"font-medium",children:v.name}),n.jsx(be,{variant:"secondary",className:"text-xs",children:v.measurement_freq})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[v.target!==void 0&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Target:"})," ",v.target," ",v.unit]}),v.range_min!==void 0&&v.range_max!==void 0&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Range:"})," ",v.range_min," - ",v.range_max," ",v.unit]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Direction:"})," ",v.direction.replace("_"," ")]})]})]},y))})]}),n.jsx(ja,{}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[n.jsx(Uo,{className:"w-4 h-4"}),"Owners"]}),n.jsx("div",{className:"space-y-2",children:r.owners.map((v,y)=>{const j=a.find(_=>_.id===v.stakeholder_id);return n.jsxs("div",{className:"flex items-center justify-between border border-border rounded-lg p-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:(j==null?void 0:j.name)||"Unknown"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[j==null?void 0:j.role,"  ",j==null?void 0:j.department]})]}),n.jsx(be,{variant:"outline",children:v.role})]},y)})})]}),r.related_stakeholders.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(ja,{}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Related Stakeholders"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:r.related_stakeholders.map(v=>{const y=a.find(j=>j.id===v);return n.jsx(be,{variant:"secondary",children:(y==null?void 0:y.name)||"Unknown"},v)})})]})]}),(p.length>0||g.length>0)&&n.jsxs(n.Fragment,{children:[n.jsx(ja,{}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[n.jsx(n3,{className:"w-4 h-4"}),"Dependencies"]}),n.jsxs("div",{className:"space-y-4",children:[p.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Depends On:"}),n.jsx("div",{className:"space-y-2",children:p.map(v=>n.jsx("div",{className:"text-sm border border-border rounded p-2",children:v.statement},v.id))})]}),g.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Enables:"}),n.jsx("div",{className:"space-y-2",children:g.map(v=>n.jsx("div",{className:"text-sm border border-border rounded p-2",children:v.statement},v.id))})]})]})]})]}),r.tags.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(ja,{}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[n.jsx($9,{className:"w-4 h-4"}),"Tags"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map((v,y)=>n.jsx(be,{variant:"secondary",children:v},y))})]})]}),n.jsx(ja,{}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[n.jsx(Rh,{className:"w-4 h-4"}),"Metadata"]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Created:"}),n.jsx("span",{children:b(r.created_at)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Updated:"}),n.jsx("span",{children:b(r.updated_at)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Created By:"}),n.jsx("span",{children:r.created_by})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Updated By:"}),n.jsx("span",{children:r.updated_by})]})]})]})]})]})})}const WX="retina_goals_v2";function KX(e){try{const t=localStorage.getItem(`${WX}_${e}`);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to load goals v2:",t),[]}}function qk(e,t){try{localStorage.setItem(`${WX}_${e}`,JSON.stringify(t))}catch(r){console.error("Failed to save goals v2:",r)}}function Uk(e,t){let r=0;switch(t){case"days":r=e/30;break;case"weeks":r=e/4;break;case"months":r=e;break;case"quarters":r=e*3;break;case"years":r=e*12;break}return r<=12?"short_term":r<=36?"mid_term":"long_term"}function YX(e,t){if(KX(e).length>0)return;const a=Date.now(),s="system",i=[];t.cfo&&i.push({id:crypto.randomUUID(),category:"Financial",statement:"Maintain 6 months cash buffer by Q4",description:"Ensure sufficient cash reserves to cover 6 months of operational expenses as a financial safety net",kpis:[{id:crypto.randomUUID(),name:"Cash buffer days",unit:"days",target:180,direction:"higher_is_better",measurement_freq:"monthly"}],priority:5,time_horizon:"mid_term",owners:[{stakeholder_id:t.cfo,role:"owner"}],related_stakeholders:[],dependencies:{depends_on:[],enables:[]},tags:["financial-stability","cash-management"],status:"active",created_at:a,updated_at:a,created_by:s,updated_by:s}),t.coo&&i.length>0&&(i.push({id:crypto.randomUUID(),category:"Operational",statement:"Reduce order cycle time to  48h in 6 months",description:"Streamline order processing to achieve maximum 48-hour cycle time from order placement to fulfillment",kpis:[{id:crypto.randomUUID(),name:"Cycle time",unit:"hours",target:48,direction:"lower_is_better",measurement_freq:"weekly"}],priority:3,time_horizon:"mid_term",owners:[{stakeholder_id:t.coo,role:"owner"}],related_stakeholders:[],dependencies:{depends_on:[i[0].id],enables:[]},tags:["operational-efficiency","process-improvement"],status:"active",created_at:a,updated_at:a,created_by:s,updated_by:s}),i[0].dependencies.enables.push(i[1].id)),t.ceo&&i.push({id:crypto.randomUUID(),category:"Strategic",statement:"Expand into 3 new markets by end of year",description:"Identify and successfully launch operations in three new geographic or vertical markets to drive growth",kpis:[{id:crypto.randomUUID(),name:"New markets entered",unit:"markets",target:3,direction:"higher_is_better",measurement_freq:"quarterly"},{id:crypto.randomUUID(),name:"Market revenue",unit:"USD",target:5e5,direction:"higher_is_better",measurement_freq:"quarterly"}],priority:2,time_horizon:"mid_term",owners:[{stakeholder_id:t.ceo,role:"owner"}],related_stakeholders:t.cfo?[t.cfo]:[],dependencies:{depends_on:[],enables:[]},tags:["growth","market-expansion","strategic-initiative"],status:"active",created_at:a,updated_at:a,created_by:s,updated_by:s}),t.cro&&i.push({id:crypto.randomUUID(),category:"Compliance & Regulatory",statement:"Achieve 100% compliance audit score in annual review",description:"Maintain full compliance with all regulatory requirements and achieve perfect score in annual compliance audit",kpis:[{id:crypto.randomUUID(),name:"Compliance score",unit:"%",target:100,direction:"higher_is_better",measurement_freq:"quarterly"},{id:crypto.randomUUID(),name:"Open findings",unit:"findings",target:0,direction:"lower_is_better",measurement_freq:"monthly"}],priority:1,time_horizon:"short_term",owners:[{stakeholder_id:t.cro,role:"owner"}],related_stakeholders:[],dependencies:{depends_on:[],enables:[]},tags:["compliance","audit","regulatory"],status:"active",created_at:a,updated_at:a,created_by:s,updated_by:s}),i.length>0&&qk(e,i)}const XX="retina_stakeholders_v2";function mE(e){try{const t=localStorage.getItem(`${XX}_${e}`);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to load stakeholders v2:",t),[]}}function m6e(e,t){try{localStorage.setItem(`${XX}_${e}`,JSON.stringify(t))}catch(r){console.error("Failed to save stakeholders v2:",r)}}function p6e(e){const t=new Date().toISOString();return{id:crypto.randomUUID(),tenantId:e.tenantId||"",name:e.name||"",email:e.email,group:e.group||"Other",type:e.type||"individual",createdAt:t,updatedAt:t}}function JX(e){if(mE(e).length>0)return;const a=[{tenantId:e,name:"Board of Directors",group:"Board",type:"team"},{tenantId:e,name:"Chief Executive Officer",group:"CEO",type:"individual"},{tenantId:e,name:"Chief Financial Officer",group:"CFO & Finance",type:"individual"},{tenantId:e,name:"Chief Risk Officer",group:"CRO / Risk",type:"individual"},{tenantId:e,name:"Chief Operating Officer",group:"COO & Operations",type:"individual"},{tenantId:e,name:"Chief Information Officer",group:"CIO / CISO (IT)",type:"individual"},{tenantId:e,name:"Chief Human Resources Officer",group:"CHRO / HR",type:"individual"},{tenantId:e,name:"Compliance Team",group:"Compliance & Legal",type:"team"},{tenantId:e,name:"Internal Audit",group:"Internal Audit",type:"team"}].map(s=>p6e(s));m6e(e,a)}const xj=[{industry:"Assisted Living",description:"Senior care facilities providing housing, healthcare, and daily living assistance",icon:"heart-pulse",goals:[{id:"al-resident-satisfaction",title:"Achieve 95% Resident Satisfaction Score",description:"Improve quality of care and resident experience through enhanced services, activities, and personalized care plans",category:"Quality of Care",timeframe:"12 months",metrics:["Monthly satisfaction surveys","Family feedback scores","Resident retention rate"],stakeholders:["Director of Nursing","Activities Coordinator","Family Relations Manager"]},{id:"al-staff-retention",title:"Reduce Staff Turnover to Below 25%",description:"Improve employee satisfaction and retention through competitive compensation, training programs, and workplace culture initiatives",category:"Human Resources",timeframe:"12 months",metrics:["Quarterly turnover rate","Employee satisfaction scores","Average tenure"],stakeholders:["HR Director","Facility Administrator","Department Managers"]},{id:"al-occupancy-rate",title:"Maintain 92% Occupancy Rate",description:"Optimize census through targeted marketing, community partnerships, and referral programs",category:"Business Development",timeframe:"12 months",metrics:["Monthly occupancy percentage","New admissions per month","Referral source tracking"],stakeholders:["Marketing Director","Admissions Coordinator","Executive Director"]},{id:"al-medication-safety",title:"Achieve Zero Medication Errors",description:"Implement enhanced medication management protocols, staff training, and technology solutions",category:"Safety & Compliance",timeframe:"6 months",metrics:["Medication error incidents","Near-miss reports","Audit compliance scores"],stakeholders:["Director of Nursing","Pharmacy Consultant","Quality Assurance Manager"]},{id:"al-falls-reduction",title:"Reduce Falls by 30%",description:"Implement fall prevention program including environmental modifications, exercise programs, and risk assessments",category:"Safety & Compliance",timeframe:"9 months",metrics:["Monthly fall incidents","Fall risk assessments completed","Injury-free days"],stakeholders:["Director of Nursing","Physical Therapist","Maintenance Director"]},{id:"al-revenue-growth",title:"Increase Revenue by 15%",description:"Grow revenue through occupancy optimization, ancillary services, and rate adjustments",category:"Financial",timeframe:"12 months",metrics:["Monthly revenue","Revenue per occupied bed","Ancillary service revenue"],stakeholders:["Executive Director","CFO","Business Office Manager"]}]},{industry:"Restaurant",description:"Food service establishments including casual dining, quick service, and fine dining",icon:"utensils",goals:[{id:"rest-customer-satisfaction",title:"Achieve 4.5+ Star Average Rating",description:"Improve customer experience through food quality, service excellence, and ambiance enhancements",category:"Customer Experience",timeframe:"6 months",metrics:["Online review ratings","Customer feedback scores","Repeat customer rate"],stakeholders:["General Manager","Head Chef","Front of House Manager"]},{id:"rest-food-cost",title:"Reduce Food Cost to 28% of Revenue",description:"Optimize menu pricing, reduce waste, and negotiate better supplier contracts",category:"Financial",timeframe:"9 months",metrics:["Monthly food cost percentage","Waste tracking","Supplier cost variance"],stakeholders:["Head Chef","General Manager","Purchasing Manager"]},{id:"rest-table-turnover",title:"Increase Table Turnover by 20%",description:"Improve operational efficiency through better reservation management, kitchen speed, and service flow",category:"Operations",timeframe:"6 months",metrics:["Average table turnover time","Covers per day","Kitchen ticket times"],stakeholders:["General Manager","Head Chef","Host/Hostess Lead"]},{id:"rest-labor-cost",title:"Maintain Labor Cost at 30% of Revenue",description:"Optimize staffing levels, improve scheduling efficiency, and cross-train employees",category:"Financial",timeframe:"12 months",metrics:["Labor cost percentage","Sales per labor hour","Overtime hours"],stakeholders:["General Manager","Assistant Manager","HR Manager"]},{id:"rest-online-orders",title:"Grow Online Orders to 25% of Revenue",description:"Expand digital presence, optimize delivery partnerships, and enhance online ordering experience",category:"Business Development",timeframe:"12 months",metrics:["Online order revenue","Order volume","Average order value"],stakeholders:["General Manager","Marketing Manager","Operations Manager"]}]},{industry:"Retail Store",description:"Brick-and-mortar retail operations selling consumer goods",icon:"store",goals:[{id:"retail-sales-growth",title:"Increase Same-Store Sales by 12%",description:"Drive revenue growth through merchandising, promotions, and customer engagement strategies",category:"Sales",timeframe:"12 months",metrics:["Monthly same-store sales","Average transaction value","Conversion rate"],stakeholders:["Store Manager","Visual Merchandiser","Sales Associates"]},{id:"retail-inventory-turnover",title:"Achieve 6x Inventory Turnover Rate",description:"Optimize inventory management to reduce carrying costs and improve cash flow",category:"Operations",timeframe:"12 months",metrics:["Inventory turnover ratio","Days inventory outstanding","Stockout rate"],stakeholders:["Store Manager","Inventory Manager","Buyers"]},{id:"retail-customer-loyalty",title:"Grow Loyalty Program to 5,000 Active Members",description:"Build customer retention through rewards program, personalized offers, and engagement campaigns",category:"Customer Experience",timeframe:"9 months",metrics:["Active loyalty members","Repeat purchase rate","Member spend vs non-member"],stakeholders:["Store Manager","Marketing Coordinator","Customer Service Lead"]},{id:"retail-shrinkage",title:"Reduce Shrinkage to Below 1.5%",description:"Minimize inventory loss through improved security, processes, and employee training",category:"Loss Prevention",timeframe:"12 months",metrics:["Shrinkage percentage","Incident reports","Audit compliance"],stakeholders:["Store Manager","Loss Prevention Specialist","Operations Manager"]},{id:"retail-omnichannel",title:"Launch Buy Online, Pick Up In-Store (BOPIS)",description:"Implement omnichannel capabilities to meet customer expectations and drive foot traffic",category:"Technology",timeframe:"6 months",metrics:["BOPIS orders per week","Pickup conversion rate","Customer satisfaction"],stakeholders:["Store Manager","IT Manager","Operations Manager"]}]},{industry:"Dental Practice",description:"General and specialty dental care providers",icon:"tooth",goals:[{id:"dental-patient-retention",title:"Achieve 85% Patient Retention Rate",description:"Improve patient loyalty through excellent care, communication, and recall systems",category:"Patient Care",timeframe:"12 months",metrics:["Annual retention rate","Recall appointment completion","Patient satisfaction scores"],stakeholders:["Practice Manager","Dentists","Hygienists"]},{id:"dental-new-patients",title:"Acquire 50 New Patients Per Month",description:"Grow patient base through marketing, referrals, and community outreach",category:"Business Development",timeframe:"12 months",metrics:["New patient appointments","Referral sources","Marketing ROI"],stakeholders:["Practice Manager","Marketing Coordinator","Front Desk Staff"]},{id:"dental-case-acceptance",title:"Increase Treatment Acceptance Rate to 75%",description:"Improve case presentation, patient education, and financing options",category:"Revenue",timeframe:"9 months",metrics:["Treatment acceptance rate","Average case value","Financing utilization"],stakeholders:["Dentists","Treatment Coordinator","Practice Manager"]},{id:"dental-schedule-efficiency",title:"Reduce No-Shows to Below 5%",description:"Implement reminder systems, scheduling policies, and patient communication protocols",category:"Operations",timeframe:"6 months",metrics:["No-show rate","Cancellation rate","Schedule utilization"],stakeholders:["Front Desk Manager","Practice Manager","Office Coordinator"]},{id:"dental-collections",title:"Achieve 98% Collection Rate",description:"Optimize billing processes, insurance verification, and payment policies",category:"Financial",timeframe:"12 months",metrics:["Collection rate","Days in A/R","Write-off percentage"],stakeholders:["Billing Manager","Practice Manager","Front Desk Staff"]}]},{industry:"Law Firm",description:"Legal services providers including solo practitioners and small firms",icon:"scale",goals:[{id:"law-billable-hours",title:"Increase Billable Hours by 15%",description:"Improve attorney productivity through better time management, delegation, and case selection",category:"Revenue",timeframe:"12 months",metrics:["Monthly billable hours","Realization rate","Utilization rate"],stakeholders:["Managing Partner","Associates","Practice Manager"]},{id:"law-client-acquisition",title:"Acquire 30 New Clients Per Quarter",description:"Grow client base through networking, referrals, digital marketing, and thought leadership",category:"Business Development",timeframe:"12 months",metrics:["New client intake","Lead conversion rate","Referral sources"],stakeholders:["Managing Partner","Marketing Director","Business Development Manager"]},{id:"law-collection-rate",title:"Achieve 95% Collection Rate on Billed Services",description:"Improve billing practices, client communication, and payment terms",category:"Financial",timeframe:"9 months",metrics:["Collection rate","Days sales outstanding","Write-off percentage"],stakeholders:["Billing Manager","Managing Partner","Accounting Staff"]},{id:"law-client-satisfaction",title:"Maintain 90% Client Satisfaction Score",description:"Deliver exceptional service through communication, responsiveness, and results",category:"Client Relations",timeframe:"12 months",metrics:["Client satisfaction surveys","Referral rate","Online reviews"],stakeholders:["Managing Partner","Associates","Client Relations Manager"]},{id:"law-case-management",title:"Implement Digital Case Management System",description:"Modernize operations with technology to improve efficiency and client service",category:"Technology",timeframe:"6 months",metrics:["System adoption rate","Time saved per case","Client portal usage"],stakeholders:["Managing Partner","IT Consultant","Practice Manager"]}]},{industry:"Accounting Firm",description:"Professional accounting, tax, and advisory services",icon:"calculator",goals:[{id:"acct-revenue-per-client",title:"Increase Revenue Per Client by 20%",description:"Expand service offerings and cross-sell advisory services to existing clients",category:"Revenue",timeframe:"12 months",metrics:["Average revenue per client","Service mix","Cross-sell rate"],stakeholders:["Managing Partner","Client Service Managers","Advisory Team"]},{id:"acct-client-retention",title:"Achieve 95% Client Retention Rate",description:"Deliver exceptional service and proactive communication to maintain long-term relationships",category:"Client Relations",timeframe:"12 months",metrics:["Annual retention rate","Client satisfaction scores","Referral rate"],stakeholders:["Managing Partner","Client Service Managers","All Staff"]},{id:"acct-automation",title:"Automate 40% of Routine Tasks",description:"Implement technology solutions to improve efficiency and reduce manual work",category:"Technology",timeframe:"9 months",metrics:["Hours saved per month","Error rate reduction","Staff productivity"],stakeholders:["Managing Partner","IT Manager","Operations Manager"]},{id:"acct-advisory-revenue",title:"Grow Advisory Services to 30% of Revenue",description:"Shift from compliance to advisory services for higher margins and client value",category:"Business Development",timeframe:"18 months",metrics:["Advisory revenue percentage","New advisory engagements","Margin improvement"],stakeholders:["Managing Partner","Advisory Team Lead","Business Development"]},{id:"acct-staff-development",title:"Achieve 100% CPE Compliance",description:"Invest in staff development through training, certifications, and continuing education",category:"Human Resources",timeframe:"12 months",metrics:["CPE hours completed","Certifications earned","Training satisfaction"],stakeholders:["Managing Partner","HR Manager","All Professional Staff"]}]},{industry:"Fitness Center",description:"Gyms, fitness studios, and wellness centers",icon:"dumbbell",goals:[{id:"gym-membership-growth",title:"Grow Active Memberships to 800 Members",description:"Increase membership base through marketing, referrals, and community engagement",category:"Business Development",timeframe:"12 months",metrics:["Active memberships","New member sign-ups","Member acquisition cost"],stakeholders:["General Manager","Sales Manager","Marketing Coordinator"]},{id:"gym-retention-rate",title:"Achieve 85% Annual Retention Rate",description:"Improve member experience through programming, engagement, and customer service",category:"Member Experience",timeframe:"12 months",metrics:["Annual retention rate","Average membership length","Cancellation reasons"],stakeholders:["General Manager","Member Services Manager","Fitness Director"]},{id:"gym-personal-training",title:"Increase Personal Training Revenue by 30%",description:"Grow high-margin personal training services through sales, marketing, and trainer development",category:"Revenue",timeframe:"9 months",metrics:["PT revenue","Sessions per week","Trainer utilization rate"],stakeholders:["Fitness Director","Personal Training Manager","Sales Team"]},{id:"gym-class-attendance",title:"Achieve 75% Average Class Capacity",description:"Optimize class schedule, instructor quality, and member engagement",category:"Operations",timeframe:"6 months",metrics:["Average class attendance","Class capacity percentage","Member satisfaction"],stakeholders:["Fitness Director","Group Fitness Coordinator","Instructors"]},{id:"gym-cleanliness",title:"Maintain 95% Cleanliness Satisfaction Score",description:"Ensure facility cleanliness and maintenance through protocols and staff training",category:"Operations",timeframe:"12 months",metrics:["Cleanliness survey scores","Maintenance response time","Inspection results"],stakeholders:["General Manager","Facilities Manager","Cleaning Staff"]}]},{industry:"Real Estate Agency",description:"Residential and commercial real estate brokerage services",icon:"home",goals:[{id:"re-transaction-volume",title:"Close 120 Transactions Annually",description:"Increase sales volume through lead generation, agent productivity, and market expansion",category:"Sales",timeframe:"12 months",metrics:["Closed transactions","Transaction value","Market share"],stakeholders:["Broker/Owner","Sales Manager","Agents"]},{id:"re-agent-productivity",title:"Achieve $8M Average Production Per Agent",description:"Improve agent performance through training, tools, and support systems",category:"Operations",timeframe:"12 months",metrics:["Production per agent","Transactions per agent","Commission per transaction"],stakeholders:["Broker/Owner","Sales Manager","Training Director"]},{id:"re-listing-inventory",title:"Maintain 40+ Active Listings",description:"Build listing inventory through prospecting, marketing, and seller relationships",category:"Business Development",timeframe:"12 months",metrics:["Active listings","Listing conversion rate","Days on market"],stakeholders:["Broker/Owner","Listing Agents","Marketing Manager"]},{id:"re-client-satisfaction",title:"Achieve 95% Client Satisfaction Score",description:"Deliver exceptional service throughout the transaction process",category:"Client Experience",timeframe:"12 months",metrics:["Client satisfaction surveys","Online reviews","Referral rate"],stakeholders:["Broker/Owner","All Agents","Transaction Coordinator"]},{id:"re-digital-presence",title:"Generate 200 Online Leads Per Month",description:"Build digital marketing presence through website, social media, and advertising",category:"Marketing",timeframe:"9 months",metrics:["Monthly leads","Lead conversion rate","Website traffic"],stakeholders:["Broker/Owner","Marketing Manager","Agents"]}]},{industry:"Auto Repair Shop",description:"Automotive service and repair facilities",icon:"wrench",goals:[{id:"auto-revenue-growth",title:"Increase Monthly Revenue to $100K",description:"Grow revenue through customer acquisition, service expansion, and pricing optimization",category:"Financial",timeframe:"12 months",metrics:["Monthly revenue","Average repair order","Customer count"],stakeholders:["Shop Owner","Service Manager","Service Advisors"]},{id:"auto-customer-retention",title:"Achieve 70% Customer Return Rate",description:"Build customer loyalty through quality work, communication, and follow-up",category:"Customer Experience",timeframe:"12 months",metrics:["Return customer rate","Customer satisfaction scores","Online reviews"],stakeholders:["Shop Owner","Service Manager","All Technicians"]},{id:"auto-bay-utilization",title:"Achieve 80% Bay Utilization Rate",description:"Optimize scheduling and workflow to maximize productive capacity",category:"Operations",timeframe:"9 months",metrics:["Bay utilization percentage","Jobs per day","Average job completion time"],stakeholders:["Service Manager","Shop Foreman","Technicians"]},{id:"auto-first-time-fix",title:"Achieve 95% First-Time Fix Rate",description:"Improve diagnostic accuracy and repair quality to reduce comebacks",category:"Quality",timeframe:"12 months",metrics:["First-time fix rate","Comeback percentage","Warranty claims"],stakeholders:["Service Manager","Lead Technician","All Technicians"]},{id:"auto-technician-efficiency",title:"Achieve 90% Technician Efficiency Rate",description:"Improve technician productivity through training, tools, and workflow optimization",category:"Operations",timeframe:"12 months",metrics:["Efficiency rate","Billed hours vs clock hours","Comebacks per technician"],stakeholders:["Service Manager","Shop Foreman","Technicians"]}]},{industry:"Marketing Agency",description:"Digital and traditional marketing services providers",icon:"megaphone",goals:[{id:"mkt-client-acquisition",title:"Acquire 12 New Clients Annually",description:"Grow client base through networking, content marketing, and referrals",category:"Business Development",timeframe:"12 months",metrics:["New clients signed","Lead conversion rate","Client acquisition cost"],stakeholders:["Agency Owner","Business Development Manager","Account Directors"]},{id:"mkt-client-retention",title:"Achieve 90% Client Retention Rate",description:"Deliver measurable results and exceptional service to maintain long-term relationships",category:"Client Relations",timeframe:"12 months",metrics:["Annual retention rate","Client satisfaction scores","Contract renewals"],stakeholders:["Agency Owner","Account Directors","All Team Members"]},{id:"mkt-revenue-per-client",title:"Increase Average Client Value to $5K/Month",description:"Expand service offerings and demonstrate ROI to grow account sizes",category:"Revenue",timeframe:"12 months",metrics:["Average monthly retainer","Service mix","Upsell rate"],stakeholders:["Agency Owner","Account Directors","Strategy Team"]},{id:"mkt-team-utilization",title:"Achieve 75% Billable Utilization Rate",description:"Optimize team productivity and project management for profitability",category:"Operations",timeframe:"9 months",metrics:["Billable hours percentage","Project profitability","Capacity utilization"],stakeholders:["Agency Owner","Operations Manager","Project Managers"]},{id:"mkt-thought-leadership",title:"Publish 50 Pieces of Thought Leadership Content",description:"Build agency brand and generate leads through content marketing",category:"Marketing",timeframe:"12 months",metrics:["Content pieces published","Website traffic","Lead generation"],stakeholders:["Agency Owner","Content Director","Marketing Team"]}]},{industry:"HVAC Company",description:"Heating, ventilation, and air conditioning services",icon:"wind",goals:[{id:"hvac-revenue-growth",title:"Increase Annual Revenue by 25%",description:"Grow revenue through service agreements, installations, and market expansion",category:"Financial",timeframe:"12 months",metrics:["Annual revenue","Revenue by service type","Market share"],stakeholders:["Owner","General Manager","Sales Manager"]},{id:"hvac-service-agreements",title:"Grow Maintenance Agreements to 500 Active Contracts",description:"Build recurring revenue through preventive maintenance programs",category:"Business Development",timeframe:"12 months",metrics:["Active service agreements","Renewal rate","Agreement revenue"],stakeholders:["Owner","Service Manager","Sales Team"]},{id:"hvac-first-call-resolution",title:"Achieve 85% First-Call Resolution Rate",description:"Improve technician training, truck stock, and diagnostic capabilities",category:"Operations",timeframe:"9 months",metrics:["First-call resolution rate","Callback percentage","Customer satisfaction"],stakeholders:["Service Manager","Lead Technician","All Technicians"]},{id:"hvac-response-time",title:"Achieve 2-Hour Average Response Time",description:"Optimize scheduling, routing, and staffing for faster service",category:"Customer Service",timeframe:"6 months",metrics:["Average response time","Emergency call response","On-time arrival rate"],stakeholders:["Service Manager","Dispatcher","Technicians"]},{id:"hvac-installation-margin",title:"Achieve 35% Gross Margin on Installations",description:"Improve estimating, project management, and installation efficiency",category:"Financial",timeframe:"12 months",metrics:["Installation gross margin","Job profitability","Material waste"],stakeholders:["Owner","Installation Manager","Estimators"]}]}];function g6e(){return xj.map(e=>e.industry)}function x6e(e){const t=e.toLowerCase(),r=[];return xj.forEach(a=>{a.goals.forEach(s=>{(s.title.toLowerCase().includes(t)||s.description.toLowerCase().includes(t)||s.category.toLowerCase().includes(t))&&r.push(s)})}),r}const v6e={"Assisted Living":ZR,Restaurant:Vre,"Retail Store":I9,"Dental Practice":ZR,"Law Firm":hre,"Accounting Firm":Nee,"Fitness Center":ate,"Real Estate Agency":_te,"Auto Repair Shop":Wre,"Marketing Agency":Wte,"HVAC Company":F9};function ZX({open:e,onOpenChange:t,onSelectTemplate:r}){const[a,s]=N.useState(null),[i,o]=N.useState(""),[l,d]=N.useState("industries"),u=N.useMemo(()=>g6e(),[]),f=N.useMemo(()=>a?xj.find(v=>v.industry===a):null,[a]),m=N.useMemo(()=>i.trim()?x6e(i):[],[i]),p=v=>{s(v),d("templates")},g=v=>{r(v,a||""),t(!1)},b=()=>{d("industries"),s(null)};return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs(xr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[l==="templates"&&a&&n.jsx(le,{variant:"ghost",size:"sm",onClick:b,className:"mr-2",children:" Back"}),"Goal Templates"]}),n.jsx(Sr,{children:l==="industries"?"Choose an industry to browse pre-built SMART goal templates":`Browse ${a} goal templates`})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Rl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(et,{placeholder:"Search templates by keyword...",value:i,onChange:v=>o(v.target.value),className:"pl-10"})]}),n.jsx(pu,{className:"flex-1 -mx-6 px-6",children:i.trim()?n.jsx("div",{className:"space-y-3",children:m.length===0?n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:['No templates found matching "',i,'"']}):m.map(v=>n.jsx(t9,{template:v,onSelect:()=>g(v)},v.id))}):l==="industries"?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(v=>{const y=xj.find(_=>_.industry===v),j=v6e[v]||I9;return n.jsx("button",{onClick:()=>p(v),className:"p-4 border border-border rounded-lg hover:border-primary hover:bg-accent transition-colors text-left",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:n.jsx(j,{className:"w-6 h-6 text-primary"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold",children:v}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:y==null?void 0:y.description}),n.jsxs(be,{variant:"secondary",className:"mt-2",children:[(y==null?void 0:y.goals.length)||0," templates"]})]})]})},v)})}):n.jsx("div",{className:"space-y-3",children:f==null?void 0:f.goals.map(v=>n.jsx(t9,{template:v,onSelect:()=>g(v)},v.id))})})]})})}function t9({template:e,onSelect:t}){return n.jsx("div",{className:"p-4 border border-border rounded-lg hover:border-primary transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[n.jsx("h3",{className:"font-semibold",children:e.title}),n.jsx(be,{variant:"outline",className:"shrink-0",children:e.category})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e.description}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[n.jsx(be,{variant:"secondary",className:"text-xs",children:e.timeframe}),n.jsxs(be,{variant:"secondary",className:"text-xs",children:[e.metrics.length," KPIs"]}),n.jsxs(be,{variant:"secondary",className:"text-xs",children:[e.stakeholders.length," stakeholders"]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Key Metrics:"}),n.jsx("ul",{className:"text-xs text-muted-foreground space-y-0.5",children:e.metrics.slice(0,3).map((r,a)=>n.jsxs("li",{className:"flex items-start gap-1",children:[n.jsx(su,{className:"w-3 h-3 mt-0.5 shrink-0"}),n.jsx("span",{children:r})]},a))})]})]}),n.jsxs(le,{onClick:t,size:"sm",children:["Use Template",n.jsx(Eh,{className:"w-4 h-4 ml-2"})]})]})})}function y6e(){const{tenant:e}=Fr(),{canEdit:t,isReadOnly:r}=kg(),[a,s]=j9(),i=Sg(),[o,l]=N.useState([]),[d,u]=N.useState([]),[f,m]=N.useState(null),[p,g]=N.useState(!1),[b,v]=N.useState(!1),[y,j]=N.useState(!1),[_,C]=N.useState(0),A=25;N.useEffect(()=>{var Q,F,z,H;JX(e.tenantId);const U=mE(e.tenantId),J=(Q=U.find(X=>X.group==="CFO & Finance"&&X.type==="individual"))==null?void 0:Q.id,V=(F=U.find(X=>X.group==="COO & Operations"&&X.type==="individual"))==null?void 0:F.id,G=(z=U.find(X=>X.group==="CEO"&&X.type==="individual"))==null?void 0:z.id,q=(H=U.find(X=>X.group==="CRO / Risk"&&X.type==="individual"))==null?void 0:H.id;YX(e.tenantId,{cfo:J,coo:V,ceo:G,cro:q});const Y=KX(e.tenantId);l(Y),u(U)},[e.tenantId]);const S=N.useMemo(()=>({category:a.get("category")||void 0,stakeholder_id:a.get("stakeholder_id")||void 0,status:a.get("status")||void 0,time_horizon:a.get("time_horizon")||void 0,q:a.get("q")||void 0}),[a]),T=U=>{const J=new URLSearchParams;Object.entries(U).forEach(([V,G])=>{G&&J.set(V,G)}),s(J),C(0)},O=N.useMemo(()=>o.filter(U=>{var J;if(S.category&&U.category!==S.category||S.status&&U.status!==S.status||S.time_horizon&&U.time_horizon!==S.time_horizon)return!1;if(S.stakeholder_id){const V=U.owners.some(q=>q.stakeholder_id===S.stakeholder_id),G=U.related_stakeholders.includes(S.stakeholder_id);if(!V&&!G)return!1}if(S.q){const V=S.q.toLowerCase(),G=U.statement.toLowerCase().includes(V),q=(J=U.description)==null?void 0:J.toLowerCase().includes(V),Y=U.tags.some(F=>F.toLowerCase().includes(V)),Q=U.kpis.some(F=>F.name.toLowerCase().includes(V));if(!G&&!q&&!Y&&!Q)return!1}return!0}),[o,S]),R=U=>{m(U),g(!0)},M=U=>{const J=o.filter(V=>V.id!==U);l(J),qk(e.tenantId,J)},I=U=>{i(`/retina/goals/new?edit=${U.id}`)},D=(U,J)=>{const V=encodeURIComponent(JSON.stringify({template:U,industry:J}));i(`/retina/goals/new?template=${V}`)},$=async(U,J)=>{let V=[...o];U.forEach(G=>{const q=V.findIndex(Y=>Y.id===G.id||Y.statement.toLowerCase()===G.statement.toLowerCase()&&Y.category===G.category);q!==-1?J==="replace"?V[q]=G:J==="merge"&&(V[q]={...V[q],...G,id:V[q].id,updated_at:Date.now()}):V.push({...G,tenant_id:e.tenantId,created_at:Date.now(),updated_at:Date.now()})}),l(V),qk(e.tenantId,V)},K=N.useMemo(()=>({total:o.length,active:o.filter(U=>U.status==="active").length,draft:o.filter(U=>U.status==="draft").length,highPriority:o.filter(U=>U.priority<=2).length}),[o]);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[n.jsx(eu,{className:"w-8 h-8"}),"Goals & Objectives"]}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage organizational goals with SMART validation"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(le,{variant:"outline",onClick:()=>j(!0),children:[n.jsx(qi,{className:"w-4 h-4 mr-2"}),"Templates"]}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("span",{children:n.jsxs(le,{variant:"outline",onClick:()=>v(!0),disabled:r(),children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),n.jsx(jv,{className:"w-4 h-4 mr-2"}),"Import/Export"]})})}),r()&&n.jsx(St,{children:n.jsx("p",{children:"Read-only access"})})]})}),n.jsx(le,{variant:"outline",asChild:!0,children:n.jsxs(qr,{to:"/retina/goals/map",children:[n.jsx(jy,{className:"w-4 h-4 mr-2"}),"Dependency Map"]})}),n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("span",{children:n.jsx(le,{disabled:r(),asChild:t(),children:t()?n.jsxs(qr,{to:"/retina/goals/new",children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"New Goal"]}):n.jsxs(n.Fragment,{children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"New Goal"]})})})}),r()&&n.jsx(St,{children:n.jsx("p",{children:"Read-only access"})})]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Goals"}),n.jsx("p",{className:"text-2xl font-bold mt-1",children:K.total})]}),n.jsx(eu,{className:"w-8 h-8 text-muted-foreground"})]})})}),n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Active"}),n.jsx("p",{className:"text-2xl font-bold mt-1 text-green-600",children:K.active})]}),n.jsx($r,{className:"w-8 h-8 text-green-600"})]})})}),n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Draft"}),n.jsx("p",{className:"text-2xl font-bold mt-1 text-gray-600",children:K.draft})]}),n.jsx(vc,{className:"w-8 h-8 text-gray-600"})]})})}),n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"High Priority"}),n.jsx("p",{className:"text-2xl font-bold mt-1 text-red-600",children:K.highPriority})]}),n.jsx(yn,{className:"w-8 h-8 text-red-600"})]})})})]}),n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6",children:n.jsx(HX,{filters:S,onFiltersChange:T,stakeholders:d})})}),n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6",children:n.jsx(h6e,{goals:O,stakeholders:d,onRowClick:R,page:_,pageSize:A,onPageChange:C})})}),n.jsx(GX,{open:p,onOpenChange:g,goal:f,stakeholders:d,allGoals:o,onEdit:I,onDelete:M}),n.jsx(f6e,{open:b,onOpenChange:v,goals:o,onImport:$,onAuditEvent:(U,J)=>{console.log("Audit event:",U,J)}}),n.jsx(ZX,{open:y,onOpenChange:j,onSelectTemplate:D})]})}function b6e(){return n.jsx("div",{className:"p-8",children:n.jsx(y6e,{})})}function j6e(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let Vk=1;class w6e{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:a,...s}=t,i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:Vk++,o=this.toasts.find(d=>d.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...t,id:i,title:a}),{...d,...t,id:i,dismissible:l,title:a}):d):this.addToast({title:a,...s,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(a=>a({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let a;r.loading!==void 0&&(a=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=a!==void 0,o;const l=s.then(async u=>{if(o=["resolve",u],pe.isValidElement(u))i=!1,this.create({id:a,type:"default",message:u});else if(S6e(u)&&!u.ok){i=!1;const m=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,p=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,b=typeof m=="object"&&!pe.isValidElement(m)?m:{message:m};this.create({id:a,type:"error",description:p,...b})}else if(u instanceof Error){i=!1;const m=typeof r.error=="function"?await r.error(u):r.error,p=typeof r.description=="function"?await r.description(u):r.description,b=typeof m=="object"&&!pe.isValidElement(m)?m:{message:m};this.create({id:a,type:"error",description:p,...b})}else if(r.success!==void 0){i=!1;const m=typeof r.success=="function"?await r.success(u):r.success,p=typeof r.description=="function"?await r.description(u):r.description,b=typeof m=="object"&&!pe.isValidElement(m)?m:{message:m};this.create({id:a,type:"success",description:p,...b})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){i=!1;const f=typeof r.error=="function"?await r.error(u):r.error,m=typeof r.description=="function"?await r.description(u):r.description,g=typeof f=="object"&&!pe.isValidElement(f)?f:{message:f};this.create({id:a,type:"error",description:m,...g})}}).finally(()=>{i&&(this.dismiss(a),a=void 0),r.finally==null||r.finally.call(r)}),d=()=>new Promise((u,f)=>l.then(()=>o[0]==="reject"?f(o[1]):u(o[1])).catch(f));return typeof a!="string"&&typeof a!="number"?{unwrap:d}:Object.assign(a,{unwrap:d})},this.custom=(t,r)=>{const a=(r==null?void 0:r.id)||Vk++;return this.create({jsx:t(a),id:a,...r}),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ml=new w6e,N6e=(e,t)=>{const r=(t==null?void 0:t.id)||Vk++;return ml.addToast({title:e,...t,id:r}),r},S6e=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",C6e=N6e,_6e=()=>ml.toasts,A6e=()=>ml.getActiveToasts(),Yx=Object.assign(C6e,{success:ml.success,info:ml.info,warning:ml.warning,error:ml.error,custom:ml.custom,message:ml.message,promise:ml.promise,dismiss:ml.dismiss,loading:ml.loading},{getHistory:_6e,getToasts:A6e});j6e("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Qy(){const{tenantId:e}=Fr(),[t,r]=N.useState([]),[a,s]=N.useState(!0),[i,o]=N.useState(null),l=N.useCallback(()=>{try{s(!0);const b=`retina_stakeholders_v2_${e}`,v=localStorage.getItem(b);if(v){const y=JSON.parse(v);r(y)}else{const y=[{id:"stakeholder-1",tenantId:e,name:"Board of Directors",group:"Board",type:"team",email:"board@example.com",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"stakeholder-2",tenantId:e,name:"CEO",group:"C-Suite",type:"individual",email:"ceo@example.com",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"stakeholder-3",tenantId:e,name:"CFO",group:"C-Suite",type:"individual",email:"cfo@example.com",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"stakeholder-4",tenantId:e,name:"COO",group:"C-Suite",type:"individual",email:"coo@example.com",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"stakeholder-5",tenantId:e,name:"Product Team",group:"Product",type:"team",email:"product@example.com",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"stakeholder-6",tenantId:e,name:"Engineering Team",group:"Engineering",type:"team",email:"engineering@example.com",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];localStorage.setItem(b,JSON.stringify(y)),r(y)}o(null)}catch(b){o("Failed to load stakeholders"),console.error("Error loading stakeholders:",b)}finally{s(!1)}},[e]),d=N.useCallback(b=>{try{const v=`retina_stakeholders_v2_${e}`;localStorage.setItem(v,JSON.stringify(b)),r(b)}catch(v){throw console.error("Error saving stakeholders:",v),new Error("Failed to save stakeholders")}},[e]),u=N.useCallback(async b=>{try{const v={...b,id:`stakeholder-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},y=[...t,v];return d(y),await new Promise(j=>setTimeout(j,300)),v}catch(v){throw console.error("Error creating stakeholder:",v),new Error("Failed to create stakeholder")}},[t,d]),f=N.useCallback(async(b,v)=>{try{const y=t.map(_=>_.id===b?{..._,...v,updatedAt:new Date().toISOString()}:_);d(y),await new Promise(_=>setTimeout(_,300));const j=y.find(_=>_.id===b);if(!j)throw new Error("Stakeholder not found");return j}catch(y){throw console.error("Error updating stakeholder:",y),new Error("Failed to update stakeholder")}},[t,d]),m=N.useCallback(async b=>{try{const v=t.filter(y=>y.id!==b);d(v),await new Promise(y=>setTimeout(y,300))}catch(v){throw console.error("Error deleting stakeholder:",v),new Error("Failed to delete stakeholder")}},[t,d]),p=N.useCallback(b=>t.filter(v=>v.group===b),[t]),g=N.useCallback(b=>{const v=b.toLowerCase();return t.filter(y=>{var j;return y.name.toLowerCase().includes(v)||((j=y.email)==null?void 0:j.toLowerCase().includes(v))||y.group.toLowerCase().includes(v)})},[t]);return N.useEffect(()=>{l()},[l]),{stakeholders:t,loading:a,error:i,createStakeholder:u,updateStakeholder:f,deleteStakeholder:m,getStakeholdersByGroup:p,searchStakeholders:g,refetch:l}}function Hk(e){const t=[],r=[],a={specific:!1,measurable:!1,achievable:!1,relevant:!1,timeBound:!1},s=e.currentStep||6,i=s>=2,o=s>=3,l=s>=2,d=s>=4,u=s>=2;i?e.statement.length<10?t.push("Statement must be at least 10 characters long"):(a.specific=!0,["increase","decrease","improve","reduce","achieve","develop","implement","establish","enhance","optimize","deliver","launch","build","create","grow"].some(v=>e.statement.toLowerCase().includes(v))||r.push("Consider using action words (e.g., increase, improve, achieve) for clarity")):a.specific=!0,o?e.kpis.length===0?t.push("At least one KPI is required"):(a.measurable=!0,e.kpis.filter(b=>b.target!==void 0||b.rangeMin!==void 0&&b.rangeMax!==void 0).length===0&&r.push("KPIs should have targets or ranges for better measurability")):a.measurable=!0,l?e.description&&e.description.length>20?a.achievable=!0:r.push("Add a description to explain how this goal is achievable"):a.achievable=!0,d?e.category&&e.owners.length>0?a.relevant=!0:(e.category||r.push("Select a category to show relevance to organizational objectives"),e.owners.length===0&&t.push("At least one owner is required")):a.relevant=!0,u?e.time_horizon||e.timeHorizon?a.timeBound=!0:t.push("Time horizon is required"):a.timeBound=!0;const f=Object.values(a).filter(Boolean).length*20,p=t.length===0?f:Math.max(0,f-t.length*10);return{isValid:t.length===0,errors:t,warnings:r,score:p,criteria:a}}function k6e(){return{specific:"Be clear and specific about what you want to achieve. Use action words like 'increase', 'improve', or 'develop'.",measurable:"Define Key Performance Indicators (KPIs) with concrete targets or ranges so you can track progress objectively.",achievable:"Explain in the description how this goal can be realistically accomplished with the resources you have.",relevant:"Make sure the goal matters to your business by selecting the right category and assigning owners.",timeBound:"Set a clear deadline (Short/Mid/Long Term) so everyone knows when this should be done."}}function O6e(e){const t=[];return e.criteria.specific||t.push("Make your statement more specific by including what, who, and why."),e.criteria.measurable||t.push("Add at least one way to measure success with a target number or range."),e.criteria.achievable||t.push("Add a description explaining how you'll accomplish this with the resources you have."),e.criteria.relevant||t.push("Pick a category and assign owners to show this goal matters to your business."),e.criteria.timeBound||t.push("Choose a deadline (Short/Mid/Long Term) so everyone knows when this should be done."),t}function E6e(e){const t=new Map;return e.forEach(r=>{t.has(r.goalId)||t.set(r.goalId,new Set),r.dependsOn.forEach(a=>{t.has(a)||t.set(a,new Set),t.get(a).add(r.goalId)}),r.enables.forEach(a=>{t.get(r.goalId).add(a)})}),t}function QX(e,t,r,a,s){r.add(e),a.add(e),s.push(e);const i=t.get(e)||new Set;for(const o of i)if(r.has(o)){if(a.has(o)){const l=s.indexOf(o);return s.slice(l).concat(o)}}else{const l=QX(o,t,r,a,s);if(l)return l}return a.delete(e),s.pop(),null}function T6e(e,t,r,a){const s=[...e.filter(l=>l.goalId!==t),{goalId:t,dependsOn:r,enables:a}],i=E6e(s),o=new Set;for(const l of i.keys())if(!o.has(l)){const d=QX(l,i,o,new Set,[]);if(d)return{hasCycle:!0,cycle:d,message:`Circular dependency detected: ${d.join("  ")}`}}return{hasCycle:!1,message:"No circular dependencies detected"}}function R6e(e,t,r,a){if(t.includes(e)||r.includes(e))return{isValid:!1,error:"A goal cannot depend on itself"};if(t.filter(o=>r.includes(o)).length>0)return{isValid:!1,error:"A goal cannot both depend on and enable the same goal"};const i=T6e(a,e,t,r);return i.hasCycle?{isValid:!1,error:i.message}:{isValid:!0}}function P6e({formData:e,setFormData:t,currentStep:r,stakeholders:a,goals:s}){var l,d,u,f;const[i,o]=N.useState(null);if(N.useEffect(()=>{if(r===2||r===6){const m=Hk({statement:e.statement||"",description:e.description,kpis:e.kpis||[],owners:e.owners||[],time_horizon:e.time_horizon,category:e.category,currentStep:r});o(m)}},[e,r]),r===1){const m=["Strategic","Financial","Customer","Operational","Innovation","People","Compliance","Sustainability","Quality","Growth"];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Select Goal Category"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Pick where this goal lives (e.g., Finance or Operations)."})]}),n.jsx(nu,{value:e.category,onValueChange:p=>t({...e,category:p}),children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:m.map(p=>n.jsxs("div",{className:"relative",children:[n.jsx(yi,{value:p,id:p,className:"peer sr-only"}),n.jsxs(Ne,{htmlFor:p,className:"flex items-center justify-between p-4 border-2 border-border rounded-lg cursor-pointer hover:bg-accent peer-data-[state=checked]:border-primary peer-data-[state=checked]:bg-primary/5",children:[n.jsx("span",{className:"font-medium",children:p}),e.category===p&&n.jsx(ri,{className:"w-5 h-5 text-primary"})]})]},p))})})]})}if(r===2){const m=k6e(),p=i?O6e(i):[];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Define Your Goal"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Say exactly what you want to achieve, by when."})]}),n.jsxs(Ae,{className:"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:[n.jsx(He,{className:"pb-3",children:n.jsxs(Ge,{className:"text-sm flex items-center gap-2",children:[n.jsx(Or,{className:"w-4 h-4"}),"SMART Goal Helper (Specific, Measurable, Achievable, Relevant, Time-bound)"]})}),n.jsxs(Re,{className:"space-y-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Specific:"})," ",m.specific]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Measurable:"})," ",m.measurable]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Achievable:"})," ",m.achievable]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Relevant:"})," ",m.relevant]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Time-bound:"})," ",m.timeBound]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ne,{htmlFor:"statement",children:["Goal Statement ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ua,{id:"statement",placeholder:"Enter a clear, specific goal statement (10-600 characters)",value:e.statement,onChange:g=>t({...e,statement:g.target.value}),rows:3,maxLength:600}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[n.jsxs("span",{children:[((l=e.statement)==null?void 0:l.length)||0," / 600 characters"]}),e.statement&&e.statement.length>=10&&n.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[n.jsx(ri,{className:"w-3 h-3"}),"Minimum length met"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"description",children:"Description (optional)"}),n.jsx(ua,{id:"description",placeholder:"Additional context or details",value:e.description,onChange:g=>t({...e,description:g.target.value}),rows:4})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ne,{children:["Time Horizon (How long will it take?)"," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"flex-1",children:n.jsx(et,{type:"number",min:"1",placeholder:"Enter duration",value:((d=e.time_horizon_detail)==null?void 0:d.value)||"",onChange:g=>{var y;const b=g.target.value?parseInt(g.target.value):void 0,v=((y=e.time_horizon_detail)==null?void 0:y.unit)||"months";if(b&&b>0){const j=Uk(b,v);t({...e,time_horizon:j,time_horizon_detail:{value:b,unit:v,category:j}})}else t({...e,time_horizon:void 0,time_horizon_detail:void 0})}})}),n.jsx("div",{className:"w-40",children:n.jsxs(Et,{value:((u=e.time_horizon_detail)==null?void 0:u.unit)||"months",onValueChange:g=>{var j;const b=g,v=((j=e.time_horizon_detail)==null?void 0:j.value)||1,y=Uk(v,b);t({...e,time_horizon:y,time_horizon_detail:{value:v,unit:b,category:y}})},children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Unit"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"days",children:"Days"}),n.jsx(we,{value:"weeks",children:"Weeks"}),n.jsx(we,{value:"months",children:"Months"}),n.jsx(we,{value:"quarters",children:"Quarters"}),n.jsx(we,{value:"years",children:"Years"})]})]})})]}),e.time_horizon&&e.time_horizon_detail&&n.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[n.jsx(be,{variant:"secondary",className:"capitalize",children:e.time_horizon.replace("_"," ")}),n.jsxs("span",{children:[e.time_horizon==="short_term"&&"( 12 months) - Quick wins and immediate priorities",e.time_horizon==="mid_term"&&"(1-3 years) - Strategic initiatives and growth",e.time_horizon==="long_term"&&"(3+ years) - Transformational and visionary goals"]})]})]}),i&&n.jsxs(Ae,{className:i.score>=80?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-950":i.score>=60?"border-yellow-200 dark:border-yellow-800 bg-yellow-50 dark:bg-yellow-950":"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-950",children:[n.jsx(He,{className:"pb-3",children:n.jsxs(Ge,{className:"text-sm flex items-center gap-2",children:[i.score>=80?n.jsx(ri,{className:"w-4 h-4 text-green-600"}):i.score>=60?n.jsx(yn,{className:"w-4 h-4 text-yellow-600"}):n.jsx(yn,{className:"w-4 h-4 text-red-600"}),"SMART Validation Score: ",i.score,"/100",i.score>=80&&n.jsx(be,{variant:"default",className:"ml-2",children:"Excellent"}),i.score>=60&&i.score<80&&n.jsx(be,{variant:"secondary",className:"ml-2",children:"Good - Can Improve"}),i.score<60&&n.jsx(be,{variant:"destructive",className:"ml-2",children:"Needs Improvement"})]})}),n.jsxs(Re,{className:"space-y-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"SMART Criteria:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(i.criteria).map(([g,b])=>n.jsxs(be,{variant:b?"default":"secondary",className:"capitalize",children:[b?"":""," ",g]},g))})]}),i.errors.length>0&&n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:" Required Actions:"}),n.jsx("ul",{className:"list-disc list-inside text-sm space-y-1 text-red-600 dark:text-red-400",children:i.errors.map((g,b)=>n.jsx("li",{children:g},b))})]}),p.length>0&&n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm font-medium",children:" Suggestions:"}),n.jsx("ul",{className:"list-disc list-inside text-sm space-y-1 text-muted-foreground",children:p.map((g,b)=>n.jsx("li",{children:g},b))})]}),i.score<60&&n.jsx("div",{className:"mt-3 p-3 bg-red-100 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:n.jsx("div",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:" Your goal needs improvement to meet SMART criteria. Please address the required actions above before proceeding."})})]})]})]})}if(r===3){const m=["Revenue Growth","Customer Satisfaction Score (CSAT)","Net Promoter Score (NPS)","Customer Retention Rate","Market Share","Operating Margin","Return on Investment (ROI)","Employee Satisfaction","Time to Market","Cost Reduction","Quality Score","Productivity Rate","Sales Conversion Rate","Customer Acquisition Cost (CAC)","Churn Rate","Average Order Value (AOV)","Lead Generation","Website Traffic","Compliance Rate","Carbon Footprint Reduction"],p=["%","$","","","units","days","hours","points","score","count","rate","ratio","kg","tons","liters"],g=()=>{t({...e,kpis:[...e.kpis||[],{name:"",target:void 0,range_min:void 0,range_max:void 0,unit:"",direction:"higher_is_better",measurement_freq:"monthly"}]})},b=y=>{const j=[...e.kpis||[]];j.splice(y,1),t({...e,kpis:j})},v=(y,j,_)=>{const C=[...e.kpis||[]];C[y]={...C[y],[j]:_},t({...e,kpis:C})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Key Performance Indicators (KPIs)"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"How will you measure success? Add at least one metric."})]}),n.jsx("div",{className:"space-y-4",children:(e.kpis||[]).map((y,j)=>n.jsxs(Ae,{children:[n.jsx(He,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(Ge,{className:"text-sm",children:["Metric #",j+1]}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>b(j),children:n.jsx(mo,{className:"w-4 h-4"})})]})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Metric Name *"}),n.jsxs(Et,{value:y.name,onValueChange:_=>{_==="__custom__"?v(j,"name",""):v(j,"name",_)},children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Select or type custom metric"})}),n.jsxs(Ot,{children:[m.map(_=>n.jsx(we,{value:_,children:_},_)),n.jsx(we,{value:"__custom__",children:n.jsx("span",{className:"italic text-muted-foreground",children:"Custom metric..."})})]})]}),y.name===""&&n.jsx(et,{placeholder:"Enter custom metric name",value:y.name,onChange:_=>v(j,"name",_.target.value),className:"mt-2"}),y.name&&!m.includes(y.name)&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(et,{placeholder:"Enter custom metric name",value:y.name,onChange:_=>v(j,"name",_.target.value)}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>v(j,"name",""),children:"Clear"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Unit"}),n.jsxs(Et,{value:y.unit,onValueChange:_=>{_==="__custom__"?v(j,"unit",""):v(j,"unit",_)},children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Select or type custom unit"})}),n.jsxs(Ot,{children:[p.map(_=>n.jsx(we,{value:_,children:_},_)),n.jsx(we,{value:"__custom__",children:n.jsx("span",{className:"italic text-muted-foreground",children:"Custom unit..."})})]})]}),y.unit===""&&n.jsx(et,{placeholder:"Enter custom unit",value:y.unit,onChange:_=>v(j,"unit",_.target.value),className:"mt-2"}),y.unit&&!p.includes(y.unit)&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(et,{placeholder:"Enter custom unit",value:y.unit,onChange:_=>v(j,"unit",_.target.value)}),n.jsx(le,{variant:"ghost",size:"sm",onClick:()=>v(j,"unit",""),children:"Clear"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Target Value"}),n.jsx(et,{type:"number",placeholder:"e.g., 100",value:y.target||"",onChange:_=>v(j,"target",_.target.value?parseFloat(_.target.value):void 0)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Range Min"}),n.jsx(et,{type:"number",placeholder:"e.g., 80",value:y.range_min||"",onChange:_=>v(j,"range_min",_.target.value?parseFloat(_.target.value):void 0)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Range Max"}),n.jsx(et,{type:"number",placeholder:"e.g., 120",value:y.range_max||"",onChange:_=>v(j,"range_max",_.target.value?parseFloat(_.target.value):void 0)})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Direction"}),n.jsxs(Et,{value:y.direction,onValueChange:_=>v(j,"direction",_),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"higher_is_better",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx($r,{className:"w-4 h-4"}),"Higher is Better"]})}),n.jsx(we,{value:"lower_is_better",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fa,{className:"w-4 h-4"}),"Lower is Better"]})}),n.jsx(we,{value:"range",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wl,{className:"w-4 h-4"}),"Range"]})})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Measurement Frequency"}),n.jsxs(Et,{value:y.measurement_freq,onValueChange:_=>v(j,"measurement_freq",_),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"daily",children:"Daily"}),n.jsx(we,{value:"weekly",children:"Weekly"}),n.jsx(we,{value:"monthly",children:"Monthly"}),n.jsx(we,{value:"quarterly",children:"Quarterly"}),n.jsx(we,{value:"annually",children:"Annually"})]})]})]})]})]})]},j))}),n.jsxs(le,{onClick:g,variant:"outline",className:"w-full",children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Add Metric"]}),(e.kpis||[]).length===0&&n.jsx(Ae,{className:"border-yellow-200 dark:border-yellow-800 bg-yellow-50 dark:bg-yellow-950",children:n.jsx(Re,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(yn,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:"At least one metric is required"}),n.jsx("div",{className:"text-yellow-700 dark:text-yellow-300 mt-1",children:"Add at least one way to measure progress toward this goal."})]})]})})})]})}if(r===4){const m=(v,y)=>{const j=(e.owners||[]).findIndex(_=>_.stakeholder_id===v);if(j>=0){const _=[...e.owners||[]];_[j].role===y?_.splice(j,1):_[j]={stakeholder_id:v,role:y},t({...e,owners:_})}else t({...e,owners:[...e.owners||[],{stakeholder_id:v,role:y}]})},p=v=>{var y;return(y=(e.owners||[]).find(j=>j.stakeholder_id===v))==null?void 0:y.role},g=a.reduce((v,y)=>(v[y.group]||(v[y.group]=[]),v[y.group].push(y),v),{}),b=(e.owners||[]).some(v=>v.role==="owner");return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Assign Owners & Stakeholders"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Who is responsible for this goal?"})]}),!b&&n.jsx(Ae,{className:"border-yellow-200 dark:border-yellow-800 bg-yellow-50 dark:bg-yellow-950",children:n.jsx(Re,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(yn,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:"At least one owner is required"}),n.jsx("div",{className:"text-yellow-700 dark:text-yellow-300 mt-1",children:"Choose at least one person who will be responsible for making this goal happen."})]})]})})}),n.jsx("div",{className:"space-y-4",children:Object.entries(g).map(([v,y])=>n.jsxs(Ae,{children:[n.jsx(He,{className:"pb-3",children:n.jsx(Ge,{className:"text-sm",children:v})}),n.jsx(Re,{className:"space-y-2",children:y.map(j=>{const _=p(j.id);return n.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-sm",children:j.name}),j.email&&n.jsx("div",{className:"text-xs text-muted-foreground",children:j.email})]}),n.jsx("div",{className:"flex gap-1",children:["owner","co_owner","contributor","consumer"].map(C=>n.jsxs(le,{size:"sm",variant:_===C?"default":"outline",onClick:()=>m(j.id,C),className:"text-xs",children:[C==="owner"&&"Owner",C==="co_owner"&&"Co-Owner",C==="contributor"&&"Contributor",C==="consumer"&&"Consumer"]},C))})]},j.id)})})]},v))})]})}if(r===5){const m=s.filter(b=>b.status==="Active"),p=(b,v)=>{const y=(e.dependencies||[]).findIndex(j=>j.goalId===b&&j.type===v);if(y>=0){const j=[...e.dependencies||[]];j.splice(y,1),t({...e,dependencies:j})}else t({...e,dependencies:[...e.dependencies||[],{goalId:b,type:v}]})},g=(b,v)=>(e.dependencies||[]).some(y=>y.goalId===b&&y.type===v);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Goal Dependencies (Optional)"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Does this goal rely on or enable another goal?"})]}),n.jsx(Ae,{className:"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:n.jsxs(Re,{className:"pt-6 space-y-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Depends On:"})," This goal needs another goal to finish first before it can start."]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Enables:"})," Completing this goal will unlock or make another goal possible."]})]})}),m.length===0?n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6 text-center text-muted-foreground",children:"No active goals available for linking"})}):n.jsx("div",{className:"space-y-3",children:m.map(b=>n.jsx(Ae,{children:n.jsx(Re,{className:"pt-6",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-sm",children:b.statement}),n.jsxs("div",{className:"flex gap-2 mt-1",children:[n.jsx(be,{variant:"secondary",className:"text-xs",children:b.category}),n.jsx(be,{variant:"outline",className:"text-xs",children:b.time_horizon})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(le,{size:"sm",variant:g(b.id,"depends_on")?"default":"outline",onClick:()=>p(b.id,"depends_on"),className:"text-xs",children:[g(b.id,"depends_on")?" ":"","Depends On"]}),n.jsxs(le,{size:"sm",variant:g(b.id,"enables")?"default":"outline",onClick:()=>p(b.id,"enables"),className:"text-xs",children:[g(b.id,"enables")?" ":"","Enables"]})]})]})})},b.id))})]})}return r===6?((e.owners||[]).some(m=>m.role==="owner"),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Review Your Goal"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Review all details before creating the goal"})]}),i&&n.jsxs(Ae,{className:i.isValid?"border-green-200 dark:border-green-800":"border-red-200 dark:border-red-800",children:[n.jsx(He,{className:"pb-3",children:n.jsxs(Ge,{className:"text-sm flex items-center gap-2",children:[i.isValid?n.jsx(ri,{className:"w-4 h-4 text-green-600"}):n.jsx(yn,{className:"w-4 h-4 text-red-600"}),"SMART Validation: ",i.score,"/100"]})}),n.jsxs(Re,{children:[n.jsx("div",{className:"flex gap-2",children:Object.entries(i.criteria).map(([m,p])=>n.jsx(be,{variant:p?"default":"secondary",className:"capitalize",children:m},m))}),i.errors.length>0&&n.jsxs("div",{className:"mt-3 space-y-1",children:[n.jsx("div",{className:"text-sm font-medium text-red-600",children:"Errors:"}),n.jsx("ul",{className:"list-disc list-inside text-sm text-red-600 space-y-1",children:i.errors.map((m,p)=>n.jsx("li",{children:m},p))})]})]})]}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-sm",children:"Goal Summary"})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Category"}),n.jsx(be,{children:e.category})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Statement"}),n.jsx("div",{className:"text-sm",children:e.statement})]}),e.description&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Description"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:e.description})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"KPIs"}),n.jsx("div",{className:"space-y-1",children:(e.kpis||[]).map((m,p)=>n.jsxs("div",{className:"text-sm",children:[" ",m.name," ",m.target&&`(Target: ${m.target}${m.unit})`]},p))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Owners & Stakeholders"}),n.jsx("div",{className:"space-y-1",children:(e.owners||[]).map((m,p)=>{const g=a.find(b=>b.id===m.stakeholder_id);return n.jsxs("div",{className:"text-sm flex items-center gap-2",children:[" ",g==null?void 0:g.name,n.jsx(be,{variant:"outline",className:"text-xs",children:m.role})]},p)})})]}),(e.dependencies||[]).length>0&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Dependencies"}),n.jsx("div",{className:"space-y-1",children:(e.dependencies||[]).map((m,p)=>{const g=s.find(b=>b.id===m.goalId);return n.jsxs("div",{className:"text-sm flex items-center gap-2",children:[" ",g==null?void 0:g.statement,n.jsx(be,{variant:"outline",className:"text-xs",children:m.type==="depends_on"?"Depends On":"Enables"})]},p)})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Priority"}),n.jsx(be,{variant:"secondary",children:e.priority})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Time Horizon"}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx(be,{variant:"secondary",children:e.time_horizon_detail?`${e.time_horizon_detail.value} ${e.time_horizon_detail.unit}`:e.time_horizon}),e.time_horizon&&n.jsxs("span",{className:"text-xs text-muted-foreground capitalize",children:["(",e.time_horizon.replace("_"," "),")"]})]})]})]})]})]}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx(Ge,{className:"text-sm",children:"Priority"})}),n.jsx(Re,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{children:"Priority (How important is it?) *"}),n.jsxs(Et,{value:(f=e.priority)==null?void 0:f.toString(),onValueChange:m=>t({...e,priority:parseInt(m)}),children:[n.jsx(kt,{children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"1",children:"1 - Critical"}),n.jsx(we,{value:"2",children:"2 - High"}),n.jsx(we,{value:"3",children:"3 - Medium"}),n.jsx(we,{value:"4",children:"4 - Low"}),n.jsx(we,{value:"5",children:"5 - Very Low"})]})]})]})})]})]})):null}function M6e({open:e,onOpenChange:t,tenantId:r,onSuccess:a}){const{createGoal:s,goals:i}=Kg(),{stakeholders:o}=Qy(),[l,d]=j9(),[u,f]=N.useState(1),[m,p]=N.useState(!1),[g,b]=N.useState(!1),[v,y]=N.useState({category:void 0,statement:"",description:"",status:"draft",priority:3,time_horizon:void 0,kpis:[],owners:[],related_stakeholders:[],dependencies:{depends_on:[],enables:[]},tags:[]});N.useEffect(()=>{const I=l.get("template");if(I)try{const{template:D,industry:$}=JSON.parse(decodeURIComponent(I));j(D,$),l.delete("template"),d(l)}catch(D){console.error("Failed to parse template:",D)}},[]);const j=(I,D)=>{const $=I.timeframe.match(/(\d+)\s*(\w+)/),K=$?parseInt($[1]):12,U=$?$[2].toLowerCase():"months";let J="months";U.includes("day")?J="days":U.includes("week")?J="weeks":U.includes("month")?J="months":U.includes("quarter")?J="quarters":U.includes("year")&&(J="years");const V=Uk(K,J);y({category:I.category,statement:I.title,description:I.description,status:"draft",priority:3,time_horizon:V,time_horizon_detail:{value:K,unit:J,category:V},kpis:I.metrics.map((G,q)=>({id:`kpi-${Date.now()}-${q}`,name:G,target:100,current:0,unit:"%"})),owners:[],related_stakeholders:[],dependencies:{depends_on:[],enables:[]},tags:[D,"template"]}),Yx.success("Template Applied",{description:`${I.title} template has been loaded. Review and customize as needed.`})},_=(I,D)=>{j(I,D),b(!1)},C=6,A=u/C*100,S=I=>{switch(I){case 1:return v.category?{isValid:!0}:{isValid:!1,error:"Please select a category"};case 2:if(!v.statement||v.statement.length<10)return{isValid:!1,error:"Statement must be at least 10 characters"};const D=Hk({statement:v.statement||"",description:v.description,kpis:v.kpis||[],owners:v.owners||[],time_horizon:v.time_horizon,category:v.category,currentStep:2});return D.score<60?{isValid:!1,error:`SMART score too low (${D.score}/100). Please improve your goal statement to meet SMART criteria (minimum 60/100 required).`}:{isValid:!0};case 3:return!v.kpis||v.kpis.length===0?{isValid:!1,error:"At least one KPI is required"}:{isValid:!0};case 4:return!v.owners||v.owners.length===0?{isValid:!1,error:"At least one owner is required"}:v.owners.some(U=>U.role==="owner")?{isValid:!0}:{isValid:!1,error:"At least one stakeholder must be assigned as owner"};case 5:if(v.dependencies&&v.dependencies.length>0){const U=i.map(q=>{var Y,Q;return{goalId:q.id,dependsOn:((Y=q.dependencies)==null?void 0:Y.filter(F=>F.type==="depends_on").map(F=>F.goalId))||[],enables:((Q=q.dependencies)==null?void 0:Q.filter(F=>F.type==="enables").map(F=>F.goalId))||[]}}),J=v.dependencies.filter(q=>q.type==="depends_on").map(q=>q.goalId),V=v.dependencies.filter(q=>q.type==="enables").map(q=>q.goalId),G=R6e("new-goal",J,V,U);if(!G.isValid)return{isValid:!1,error:G.error}}return{isValid:!0};case 6:const K=Hk({statement:v.statement||"",description:v.description,kpis:v.kpis||[],owners:v.owners||[],time_horizon:v.time_horizon,category:v.category,currentStep:6});return K.score<80?{isValid:!1,error:`SMART score must be at least 80/100 to create goal (current: ${K.score}/100). Please review and improve your goal.`}:K.isValid?{isValid:!0}:{isValid:!1,error:K.errors.join(", ")};default:return{isValid:!0}}},T=()=>{const I=S(u);if(!I.isValid){Yx.error(I.error,{description:"Please fix the validation errors before proceeding"});return}u<C&&f(u+1)},O=()=>{u>1&&f(u-1)},R=async()=>{const I=S(6);if(!I.isValid){Yx.error(I.error,{description:"Please fix the validation errors before saving"});return}try{p(!0),await s({category:v.category,statement:v.statement,description:v.description,status:"active",priority:v.priority||3,time_horizon:v.time_horizon,kpis:v.kpis||[],owners:v.owners||[],related_stakeholders:v.related_stakeholders||[],dependencies:v.dependencies||{depends_on:[],enables:[]},tags:v.tags||[]}),Yx.success("Goal Created",{description:"Your goal has been successfully created"}),t(!1),a&&a()}catch{Yx.error("Failed to create goal",{description:"Please try again or contact support"})}finally{p(!1)}},M=["Category","Statement & Description","KPIs & Targets","Owners & Stakeholders","Dependencies","Review & Save"];return n.jsx(Nr,{open:e,onOpenChange:t,children:n.jsxs(gr,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsx(xr,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(vr,{children:["Create New Goal - ",M[u-1]]}),n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>b(!0),disabled:m,children:[n.jsx(qi,{className:"w-4 h-4 mr-2"}),"Browse Templates"]})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Step ",u," of ",C]}),n.jsxs("span",{className:"font-medium",children:[Math.round(A),"%"]})]}),n.jsx(hy,{value:A,className:"h-2"})]}),n.jsx("div",{className:"flex items-center justify-between",children:M.map((I,D)=>{const $=D+1,K=$<u,U=$===u;return n.jsxs("div",{className:"flex flex-col items-center gap-1 flex-1",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors ${K?"bg-primary text-primary-foreground":U?"bg-primary/20 text-primary border-2 border-primary":"bg-muted text-muted-foreground"}`,children:K?n.jsx(su,{className:"w-4 h-4"}):$}),n.jsx("span",{className:"text-xs text-center text-muted-foreground hidden md:block",children:I})]},$)})}),n.jsx("div",{className:"flex-1 overflow-y-auto py-4",children:n.jsx(P6e,{formData:v,setFormData:y,currentStep:u,stakeholders:o,goals:i})}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[n.jsxs(le,{variant:"outline",onClick:O,disabled:u===1||m,children:[n.jsx(T9,{className:"w-4 h-4 mr-2"}),"Back"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(le,{variant:"ghost",asChild:!0,disabled:m,children:n.jsx(qr,{to:"/retina/goals",children:"Cancel"})}),u<C?n.jsxs(le,{onClick:T,disabled:m,children:["Next",n.jsx(ti,{className:"w-4 h-4 ml-2"})]}):n.jsxs(le,{onClick:R,disabled:m,children:[m?"Saving...":"Create Goal",n.jsx(su,{className:"w-4 h-4 ml-2"})]})]})]}),n.jsx(ZX,{open:g,onOpenChange:b,onSelectTemplate:_})]})})}function D6e(){const{tenant:e}=Fr(),[t,r]=N.useState(!0),[a,s]=N.useState(!1);N.useEffect(()=>{r(!0)},[]);const i=l=>{r(l),l||s(!0)},o=()=>{s(!0)};return a?n.jsx("div",{className:"p-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"mb-4",children:"Redirecting to goals..."}),n.jsx(le,{asChild:!0,children:n.jsx(qr,{to:"/retina/goals",children:"Go to Goals"})})]})}):n.jsxs("div",{className:"p-8",children:[!t&&n.jsx("div",{className:"mb-4",children:n.jsx(le,{asChild:!0,variant:"outline",children:n.jsxs(qr,{to:"/retina/goals",children:[n.jsx(O9,{className:"w-4 h-4 mr-2"}),"Back to Goals"]})})}),n.jsx(M6e,{open:t,onOpenChange:i,tenantId:e.tenantId,onSuccess:o})]})}function L6e(e){const{tenantId:t}=Fr(),[r,a]=N.useState({nodes:[],edges:[]}),[s,i]=N.useState(!0),[o,l]=N.useState(null),d=N.useCallback(()=>{try{i(!0);const g=`retina_goals_v2_${t}`,b=localStorage.getItem(g);if(!b){a({nodes:[],edges:[]}),l(null),i(!1);return}const v=JSON.parse(b);let y=v;e&&(y=v.filter(A=>{var S;if(e.category&&A.category!==e.category||e.status&&A.status!==e.status||e.time_horizon&&A.time_horizon!==e.time_horizon)return!1;if(e.stakeholder_id){const T=A.owners.some(R=>R.stakeholder_id===e.stakeholder_id),O=A.related_stakeholders.includes(e.stakeholder_id);if(!T&&!O)return!1}if(e.q){const T=e.q.toLowerCase(),O=A.statement.toLowerCase().includes(T),R=(S=A.description)==null?void 0:S.toLowerCase().includes(T),M=A.tags.some(D=>D.toLowerCase().includes(T)),I=A.kpis.some(D=>D.name.toLowerCase().includes(T));if(!O&&!R&&!M&&!I)return!1}return!0}));const j=y.map(A=>({id:A.id,label:A.statement,category:A.category,status:A.status})),_=[],C=new Set(j.map(A=>A.id));y.forEach(A=>{A.dependencies.depends_on.forEach(S=>{C.has(S)&&_.push({from:S,to:A.id,type:"depends_on"})}),A.dependencies.enables.forEach(S=>{C.has(S)&&_.push({from:A.id,to:S,type:"enables"})})}),a({nodes:j,edges:_}),l(null)}catch(g){l("Failed to load dependency graph"),console.error("Error loading graph:",g)}finally{i(!1)}},[t,e]);N.useEffect(()=>{d()},[d]);const u=N.useCallback(g=>{const b=new Set;return r.edges.forEach(v=>{v.from===g&&b.add(v.to),v.to===g&&b.add(v.from)}),r.nodes.filter(v=>b.has(v.id))},[r]),f=N.useCallback(g=>r.edges.filter(b=>b.to===g),[r]),m=N.useCallback(g=>r.edges.filter(b=>b.from===g),[r]),p=N.useMemo(()=>{const g=r.nodes.length,b=r.edges.length,v=r.edges.filter(S=>S.type==="depends_on").length,y=r.edges.filter(S=>S.type==="enables").length,j=new Set(r.edges.map(S=>S.to)),_=r.nodes.filter(S=>!j.has(S.id)),C=new Set(r.edges.map(S=>S.from)),A=r.nodes.filter(S=>!C.has(S.id));return{nodeCount:g,edgeCount:b,dependsOnCount:v,enablesCount:y,rootNodeCount:_.length,leafNodeCount:A.length}},[r]);return{graph:r,loading:s,error:o,refetch:d,getConnectedNodes:u,getIncomingEdges:f,getOutgoingEdges:m,stats:p}}function I6e({graph:e,onNodeClick:t,className:r}){const a=N.useRef(null),s=N.useRef(null),[i,o]=N.useState({width:800,height:600}),[l,d]=N.useState(1),[u,f]=N.useState({x:0,y:0}),[m,p]=N.useState(null),g=N.useRef(null),b=A=>({Financial:"#3b82f6",Operational:"#10b981",Strategic:"#8b5cf6","Compliance & Regulatory":"#f59e0b","People & Culture":"#ec4899","Resilience & Continuity":"#06b6d4","Technology & Digital":"#6366f1","Sustainability & ESG":"#22c55e","Customer & Market":"#f97316","Innovation & Learning":"#a855f7"})[A]||"#6b7280",v=A=>{switch(A){case"active":return 1;case"draft":return .6;case"paused":return .5;case"retired":return .3;default:return 1}};N.useEffect(()=>{const A=()=>{if(s.current){const{width:S,height:T}=s.current.getBoundingClientRect();o({width:S,height:T})}};return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]),N.useEffect(()=>{if(!(!a.current||e.nodes.length===0))return Lb(()=>import("./index-DDa-RNf7.js"),[]).then(A=>{const S=a.current,{width:T,height:O}=i;for(;S.firstChild;)S.removeChild(S.firstChild);const R=document.createElementNS("http://www.w3.org/2000/svg","g");R.setAttribute("transform",`translate(${u.x},${u.y}) scale(${l})`),S.appendChild(R);const M=e.nodes.map(Y=>({...Y})),I=e.edges.map(Y=>({source:Y.from,target:Y.to,type:Y.type})),D=A.forceSimulation(M).force("link",A.forceLink(I).id(Y=>Y.id).distance(150)).force("charge",A.forceManyBody().strength(-300)).force("center",A.forceCenter(T/2,O/2)).force("collision",A.forceCollide().radius(50));g.current=D;const $=document.createElementNS("http://www.w3.org/2000/svg","defs"),K=document.createElementNS("http://www.w3.org/2000/svg","marker");K.setAttribute("id","arrow-depends-on"),K.setAttribute("viewBox","0 -5 10 10"),K.setAttribute("refX","25"),K.setAttribute("refY","0"),K.setAttribute("markerWidth","6"),K.setAttribute("markerHeight","6"),K.setAttribute("orient","auto");const U=document.createElementNS("http://www.w3.org/2000/svg","path");U.setAttribute("d","M0,-5L10,0L0,5"),U.setAttribute("fill","#64748b"),K.appendChild(U),$.appendChild(K);const J=document.createElementNS("http://www.w3.org/2000/svg","marker");J.setAttribute("id","arrow-enables"),J.setAttribute("viewBox","0 -5 10 10"),J.setAttribute("refX","25"),J.setAttribute("refY","0"),J.setAttribute("markerWidth","6"),J.setAttribute("markerHeight","6"),J.setAttribute("orient","auto");const V=document.createElementNS("http://www.w3.org/2000/svg","path");V.setAttribute("d","M0,-5L10,0L0,5"),V.setAttribute("fill","#94a3b8"),J.appendChild(V),$.appendChild(J),R.appendChild($);const G=I.map(Y=>{const Q=document.createElementNS("http://www.w3.org/2000/svg","line");return Q.setAttribute("stroke",Y.type==="depends_on"?"#64748b":"#94a3b8"),Q.setAttribute("stroke-width","2"),Q.setAttribute("stroke-dasharray",Y.type==="enables"?"5,5":"0"),Q.setAttribute("marker-end",`url(#arrow-${Y.type})`),Q.setAttribute("opacity","0.6"),R.appendChild(Q),{element:Q,data:Y}}),q=M.map(Y=>{const Q=document.createElementNS("http://www.w3.org/2000/svg","g");Q.setAttribute("cursor","pointer");const F=document.createElementNS("http://www.w3.org/2000/svg","circle");F.setAttribute("r","20"),F.setAttribute("fill",b(Y.category)),F.setAttribute("opacity",v(Y.status).toString()),F.setAttribute("stroke","#fff"),F.setAttribute("stroke-width","2"),Q.appendChild(F);const z=document.createElementNS("http://www.w3.org/2000/svg","text");z.setAttribute("text-anchor","middle"),z.setAttribute("dy","35"),z.setAttribute("font-size","12"),z.setAttribute("fill","currentColor"),z.textContent=Y.label.length>30?Y.label.slice(0,30)+"...":Y.label,Q.appendChild(z),Q.addEventListener("click",()=>{p(Y.id),t&&t(Y)}),Q.addEventListener("mouseenter",()=>{F.setAttribute("stroke-width","3"),F.setAttribute("r","22")}),Q.addEventListener("mouseleave",()=>{F.setAttribute("stroke-width","2"),F.setAttribute("r","20")});let H=!1,X=0,ne=0;Q.addEventListener("mousedown",ge=>{H=!0,X=ge.clientX,ne=ge.clientY,Y.fx=Y.x,Y.fy=Y.y,ge.stopPropagation()});const ie=ge=>{if(!H)return;const he=(ge.clientX-X)/l,ue=(ge.clientY-ne)/l;Y.fx=(Y.fx||Y.x||0)+he,Y.fy=(Y.fy||Y.y||0)+ue,X=ge.clientX,ne=ge.clientY,D.alpha(.3).restart()},ce=()=>{H&&(H=!1,Y.fx=null,Y.fy=null)};return document.addEventListener("mousemove",ie),document.addEventListener("mouseup",ce),R.appendChild(Q),{element:Q,data:Y,circle:F}});D.on("tick",()=>{G.forEach(({element:Y,data:Q})=>{const F=Q.source,z=Q.target;Y.setAttribute("x1",(F.x||0).toString()),Y.setAttribute("y1",(F.y||0).toString()),Y.setAttribute("x2",(z.x||0).toString()),Y.setAttribute("y2",(z.y||0).toString())}),q.forEach(({element:Y,data:Q})=>{Y.setAttribute("transform",`translate(${Q.x||0},${Q.y||0})`)})}),m&&q.forEach(({circle:Y,data:Q})=>{Q.id===m&&(Y.setAttribute("stroke","#f59e0b"),Y.setAttribute("stroke-width","4"))})}),()=>{g.current&&g.current.stop()}},[e,i,l,u,m,t]);const y=()=>{d(A=>Math.min(A*1.2,3))},j=()=>{d(A=>Math.max(A/1.2,.3))},_=()=>{d(1),f({x:0,y:0}),p(null),g.current&&g.current.alpha(1).restart()},C=()=>{d(1),f({x:0,y:0})};return e.nodes.length===0?n.jsx(Ae,{className:r,children:n.jsx("div",{className:"flex items-center justify-center h-[600px] text-muted-foreground",children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("p",{className:"text-lg font-medium",children:"No goals to display"}),n.jsx("p",{className:"text-sm",children:"Create goals to see the dependency graph"})]})})}):n.jsx(Ae,{className:r,children:n.jsxs("div",{className:"relative h-[600px]",ref:s,children:[n.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2",children:[n.jsx(le,{variant:"outline",size:"icon",onClick:y,children:n.jsx(B9,{className:"w-4 h-4"})}),n.jsx(le,{variant:"outline",size:"icon",onClick:j,children:n.jsx(z9,{className:"w-4 h-4"})}),n.jsx(le,{variant:"outline",size:"icon",onClick:C,children:n.jsx(a3,{className:"w-4 h-4"})}),n.jsx(le,{variant:"outline",size:"icon",onClick:_,children:n.jsx($i,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"absolute top-4 left-4 z-10 bg-background/95 backdrop-blur border border-border rounded-lg p-3 space-y-2",children:[n.jsx("p",{className:"text-xs font-semibold",children:"Edge Types"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-0.5 bg-slate-500"}),n.jsx("span",{className:"text-xs",children:"Depends On"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-0.5 bg-slate-400 border-dashed border-t-2 border-slate-400"}),n.jsx("span",{className:"text-xs",children:"Enables"})]})]}),n.jsx("div",{className:"absolute bottom-4 left-4 z-10 bg-background/95 backdrop-blur border border-border rounded-lg p-3",children:n.jsxs("div",{className:"flex gap-4 text-xs",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Nodes:"})," ",n.jsx("span",{className:"font-medium",children:e.nodes.length})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Edges:"})," ",n.jsx("span",{className:"font-medium",children:e.edges.length})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Zoom:"})," ",n.jsxs("span",{className:"font-medium",children:[Math.round(l*100),"%"]})]})]})}),n.jsx("svg",{ref:a,width:i.width,height:i.height,className:"w-full h-full"})]})})}function $6e(){const{tenantId:e}=Fr(),[t,r]=N.useState({}),[a,s]=N.useState(!0),[i,o]=N.useState(null);pe.useEffect(()=>{var T,O,R,M;JX(e);const j=mE(e),_=(T=j.find(I=>I.group==="CFO & Finance"&&I.type==="individual"))==null?void 0:T.id,C=(O=j.find(I=>I.group==="COO & Operations"&&I.type==="individual"))==null?void 0:O.id,A=(R=j.find(I=>I.group==="CEO"&&I.type==="individual"))==null?void 0:R.id,S=(M=j.find(I=>I.group==="CRO / Risk"&&I.type==="individual"))==null?void 0:M.id;YX(e,{cfo:_,coo:C,ceo:A,cro:S})},[e]);const{graph:l,loading:d,stats:u}=L6e(t),{allGoals:f}=Kg(),{stakeholders:m}=Qy(),p=i&&f.find(j=>j.id===i)||null,g=j=>{o(j.id)},b=()=>{o(null)},v=j=>{console.log("Edit goal:",j)},y=j=>{console.log("Delete goal:",j)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(jy,{className:"w-6 h-6"}),n.jsx("h1",{className:"text-3xl font-bold",children:"Goals Dependency Map"})]}),n.jsx("p",{className:"text-muted-foreground",children:"Visualize goal relationships and dependencies"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(le,{variant:"outline",asChild:!0,children:n.jsxs(qr,{to:"/retina/goals",children:[n.jsx(M9,{className:"w-4 h-4 mr-2"}),"Table View"]})}),n.jsx(le,{asChild:!0,children:n.jsxs(qr,{to:"/retina/goals/new",children:[n.jsx(Pn,{className:"w-4 h-4 mr-2"}),"New Goal"]})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[n.jsxs(Ae,{className:"p-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Goals"}),n.jsx("p",{className:"text-2xl font-bold",children:u.nodeCount})]}),n.jsxs(Ae,{className:"p-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Dependencies"}),n.jsx("p",{className:"text-2xl font-bold",children:u.edgeCount})]}),n.jsxs(Ae,{className:"p-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Depends On"}),n.jsx("p",{className:"text-2xl font-bold",children:u.dependsOnCount})]}),n.jsxs(Ae,{className:"p-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Enables"}),n.jsx("p",{className:"text-2xl font-bold",children:u.enablesCount})]}),n.jsxs(Ae,{className:"p-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Root Goals"}),n.jsx("p",{className:"text-2xl font-bold",children:u.rootNodeCount})]}),n.jsxs(Ae,{className:"p-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Leaf Goals"}),n.jsx("p",{className:"text-2xl font-bold",children:u.leafNodeCount})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(le,{variant:"outline",size:"sm",onClick:()=>s(!a),children:[n.jsx(Cg,{className:"w-4 h-4 mr-2"}),a?"Hide":"Show"," Filters"]}),Object.keys(t).length>0&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:[Object.keys(t).length," filter(s) active"]})]}),a&&n.jsx(Ae,{className:"p-6",children:n.jsx(HX,{filters:t,onFiltersChange:r,stakeholders:m})}),n.jsx(ja,{}),d?n.jsx(Ae,{className:"p-12",children:n.jsx("div",{className:"flex items-center justify-center",children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading graph..."})]})})}):n.jsx(I6e,{graph:l,onNodeClick:g}),n.jsx(GX,{open:!!p,onOpenChange:b,goal:p,stakeholders:m,allGoals:f,onEdit:v,onDelete:y})]})}function F6e(e){const{allGoals:t}=Kg();return N.useMemo(()=>{const a=[],s=[],i=[],o=[],l=[];return t.forEach(d=>{const u=d.owners.find(f=>f.stakeholder_id===e);u?d.owners.length===1?(a.push(d),l.push({goal:d,relationshipType:"owner",ownershipPercentage:100})):(s.push(d),l.push({goal:d,relationshipType:"co-owner",ownershipPercentage:u.ownership_percentage})):d.related_stakeholders.includes(e)&&(d.depends_on&&d.depends_on.length>0?(o.push(d),l.push({goal:d,relationshipType:"consumer"})):(i.push(d),l.push({goal:d,relationshipType:"contributor"})))}),{owns:a,coOwns:s,contributes:i,consumes:o,all:l,totalCount:l.length}},[t,e])}function B6e(){const{allGoals:e}=Kg();return N.useMemo(()=>{const r=new Map;return e.forEach(a=>{a.owners.forEach(s=>{const i=r.get(s.stakeholder_id)||{owns:0,coOwns:0,contributes:0,consumes:0,total:0};a.owners.length===1?i.owns+=1:i.coOwns+=1,i.total+=1,r.set(s.stakeholder_id,i)}),a.related_stakeholders.forEach(s=>{if(a.owners.some(o=>o.stakeholder_id===s))return;const i=r.get(s)||{owns:0,coOwns:0,contributes:0,consumes:0,total:0};a.depends_on&&a.depends_on.length>0?i.consumes+=1:i.contributes+=1,i.total+=1,r.set(s,i)})}),r},[e])}function z6e({onStakeholderClick:e}){const{tenantId:t}=Fr(),{stakeholders:r,loading:a,createStakeholder:s}=Qy(),i=B6e(),[o,l]=N.useState(""),[d,u]=N.useState("all"),[f,m]=N.useState("all"),[p,g]=N.useState(!1),[b,v]=N.useState(""),[y,j]=N.useState(""),[_,C]=N.useState("C-Suite"),[A,S]=N.useState("individual"),[T,O]=N.useState(!1),R=async()=>{if(b.trim()){O(!0);try{await s({tenantId:t,name:b.trim(),email:y.trim()||void 0,group:_,type:A}),v(""),j(""),C("C-Suite"),S("individual"),g(!1)}catch(U){console.error("Failed to create stakeholder:",U)}finally{O(!1)}}},M=N.useMemo(()=>{const U=new Set(r.map(J=>J.group));return Array.from(U).sort()},[r]),I=N.useMemo(()=>r.filter(U=>{var J;if(o){const V=o.toLowerCase(),G=U.name.toLowerCase().includes(V),q=(J=U.email)==null?void 0:J.toLowerCase().includes(V),Y=U.group.toLowerCase().includes(V);if(!G&&!q&&!Y)return!1}return!(d!=="all"&&U.group!==d||f!=="all"&&U.type!==f)}),[r,o,d,f]),D=N.useMemo(()=>{const U=new Map;return I.forEach(J=>{const V=J.group;U.has(V)||U.set(V,[]),U.get(V).push(J)}),U},[I]),$=U=>{switch(U){case"individual":return n.jsx(wv,{className:"h-4 w-4"});case"team":return n.jsx(Uo,{className:"h-4 w-4"});case"external":return n.jsx(Ph,{className:"h-4 w-4"})}},K=U=>{switch(U){case"individual":return"Individual";case"team":return"Team";case"external":return"External"}};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-muted-foreground",children:"Loading stakeholders..."})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"Stakeholder Directory"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[I.length," of ",r.length," stakeholders"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(le,{onClick:()=>g(!0),children:[n.jsx(Pn,{className:"h-4 w-4 mr-2"}),"New Stakeholder"]}),n.jsx(le,{asChild:!0,variant:"outline",children:n.jsxs(qr,{to:"/retina/goals/matrix",children:[n.jsx(yv,{className:"h-4 w-4 mr-2"}),"Ownership Matrix"]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Rl,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(et,{placeholder:"Search stakeholders...",value:o,onChange:U=>l(U.target.value),className:"pl-9"})]}),n.jsxs(Et,{value:d,onValueChange:U=>u(U),children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Filter by group"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Groups"}),M.map(U=>n.jsx(we,{value:U,children:U},U))]})]}),n.jsxs(Et,{value:f,onValueChange:U=>m(U),children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Filter by type"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Types"}),n.jsx(we,{value:"individual",children:"Individual"}),n.jsx(we,{value:"team",children:"Team"}),n.jsx(we,{value:"external",children:"External"})]})]})]}),I.length===0?n.jsx(Ae,{children:n.jsxs(Re,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Uo,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No stakeholders found"})]})}):n.jsx("div",{className:"space-y-6",children:Array.from(D.entries()).map(([U,J])=>n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-lg font-medium",children:U}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:J.map(V=>{const G=i.get(V.id)||{owns:0,coOwns:0,contributes:0,consumes:0,total:0};return n.jsxs(Ae,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e==null?void 0:e(V.id),children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(Ge,{className:"text-base",children:V.name}),n.jsx(mt,{className:"text-xs mt-1",children:V.email||"No email"})]}),n.jsxs(be,{variant:"outline",className:"flex items-center gap-1",children:[$(V.type),K(V.type)]})]})}),n.jsx(Re,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Linked Goals"}),n.jsx("span",{className:"font-semibold",children:G.total})]}),G.total>0&&n.jsxs("div",{className:"flex flex-wrap gap-1",children:[G.owns>0&&n.jsxs(be,{variant:"default",className:"text-xs",children:["Owns: ",G.owns]}),G.coOwns>0&&n.jsxs(be,{variant:"secondary",className:"text-xs",children:["Co-owns: ",G.coOwns]}),G.contributes>0&&n.jsxs(be,{variant:"outline",className:"text-xs",children:["Contributes: ",G.contributes]}),G.consumes>0&&n.jsxs(be,{variant:"outline",className:"text-xs",children:["Consumes: ",G.consumes]})]})]})})]},V.id)})})]},U))}),n.jsx(Nr,{open:p,onOpenChange:g,children:n.jsxs(gr,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"New Stakeholder"}),n.jsx(Sr,{children:"Add a new stakeholder to the directory"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"name",children:"Name *"}),n.jsx(et,{id:"name",placeholder:"e.g., CFO, COO, Product Manager",value:b,onChange:U=>v(U.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"email",children:"Email"}),n.jsx(et,{id:"email",type:"email",placeholder:"email@example.com",value:y,onChange:U=>j(U.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"group",children:"Group *"}),n.jsxs(Et,{value:_,onValueChange:U=>C(U),children:[n.jsx(kt,{id:"group",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"Board",children:"Board"}),n.jsx(we,{value:"C-Suite",children:"C-Suite"}),n.jsx(we,{value:"Product",children:"Product"}),n.jsx(we,{value:"Engineering",children:"Engineering"}),n.jsx(we,{value:"Operations",children:"Operations"}),n.jsx(we,{value:"Finance",children:"Finance"}),n.jsx(we,{value:"Sales",children:"Sales"}),n.jsx(we,{value:"Marketing",children:"Marketing"}),n.jsx(we,{value:"HR",children:"HR"}),n.jsx(we,{value:"Legal",children:"Legal"}),n.jsx(we,{value:"External",children:"External"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ne,{htmlFor:"type",children:"Type *"}),n.jsxs(Et,{value:A,onValueChange:U=>S(U),children:[n.jsx(kt,{id:"type",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"individual",children:"Individual"}),n.jsx(we,{value:"team",children:"Team"}),n.jsx(we,{value:"external",children:"External"})]})]})]})]}),n.jsxs(bn,{children:[n.jsx(le,{variant:"outline",onClick:()=>g(!1),disabled:T,children:"Cancel"}),n.jsx(le,{onClick:R,disabled:!b.trim()||T,children:T?"Creating...":"Create Stakeholder"})]})]})})]})}function eJ({open:e,onOpenChange:t,stakeholderId:r}){const{stakeholders:a}=Qy(),s=N.useMemo(()=>a.find(u=>u.id===r),[a,r]),i=F6e(r||""),o=u=>{switch(u){case"individual":return n.jsx(wv,{className:"h-4 w-4"});case"team":return n.jsx(Uo,{className:"h-4 w-4"});case"external":return n.jsx(Ph,{className:"h-4 w-4"});default:return n.jsx(wv,{className:"h-4 w-4"})}},l=u=>{switch(u){case"active":return"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20";case"draft":return"bg-blue-500/10 text-blue-700 dark:text-blue-400 border-blue-500/20";case"paused":return"bg-yellow-500/10 text-yellow-700 dark:text-yellow-400 border-yellow-500/20";case"retired":return"bg-gray-500/10 text-gray-700 dark:text-gray-400 border-gray-500/20";default:return"bg-gray-500/10 text-gray-700 dark:text-gray-400 border-gray-500/20"}},d=(u,f)=>n.jsxs(Ae,{className:"hover:shadow-md transition-shadow",children:[n.jsx(He,{children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(Ge,{className:"text-sm",children:u.statement}),n.jsx(mt,{className:"text-xs mt-1",children:u.category})]}),n.jsx(be,{variant:"outline",className:l(u.status),children:u.status})]})}),n.jsxs(Re,{className:"space-y-3",children:[f!==void 0&&n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Ownership"}),n.jsxs(be,{variant:"secondary",children:[f,"%"]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Time Horizon"}),n.jsx("span",{className:"font-medium",children:u.time_horizon})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Priority"}),n.jsx(be,{variant:"outline",children:u.priority})]}),u.kpis.length>0&&n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"KPIs"}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[u.kpis.slice(0,3).map((m,p)=>n.jsx(be,{variant:"outline",className:"text-xs",children:m.name},p)),u.kpis.length>3&&n.jsxs(be,{variant:"outline",className:"text-xs",children:["+",u.kpis.length-3," more"]})]})]}),n.jsx(le,{variant:"ghost",size:"sm",className:"w-full",asChild:!0,children:n.jsxs(qr,{to:`/retina/goals?goal=${u.id}`,children:["View Goal",n.jsx(Eh,{className:"h-3 w-3 ml-2"})]})})]})]},u.id);return s?n.jsx(am,{open:e,onOpenChange:t,children:n.jsxs(Pf,{className:"sm:max-w-2xl overflow-y-auto",children:[n.jsx(Mf,{children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:o(s.type)}),n.jsxs("div",{className:"flex-1",children:[n.jsx(Df,{children:s.name}),n.jsxs(Lf,{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(be,{variant:"outline",children:s.group}),n.jsx(be,{variant:"secondary",children:s.type})]}),s.email&&n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Xh,{className:"h-3 w-3"}),s.email]})]})]})]})}),n.jsxs("div",{className:"mt-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs(Ae,{children:[n.jsx(He,{className:"pb-3",children:n.jsx(Ge,{className:"text-sm font-medium",children:"Total Goals"})}),n.jsx(Re,{children:n.jsx("div",{className:"text-2xl font-bold",children:i.totalCount})})]}),n.jsxs(Ae,{children:[n.jsx(He,{className:"pb-3",children:n.jsx(Ge,{className:"text-sm font-medium",children:"Ownership"})}),n.jsx(Re,{children:n.jsx("div",{className:"text-2xl font-bold",children:i.owns.length+i.coOwns.length})})]})]}),n.jsxs(si,{defaultValue:"owns",className:"w-full",children:[n.jsxs(zs,{className:"grid w-full grid-cols-4",children:[n.jsxs(hr,{value:"owns",className:"text-xs",children:["Owns (",i.owns.length,")"]}),n.jsxs(hr,{value:"co-owns",className:"text-xs",children:["Co-owns (",i.coOwns.length,")"]}),n.jsxs(hr,{value:"contributes",className:"text-xs",children:["Contributes (",i.contributes.length,")"]}),n.jsxs(hr,{value:"consumes",className:"text-xs",children:["Consumes (",i.consumes.length,")"]})]}),n.jsx(Cr,{value:"owns",className:"space-y-4 mt-4",children:i.owns.length===0?n.jsx(Ae,{children:n.jsxs(Re,{className:"flex flex-col items-center justify-center py-8",children:[n.jsx(eu,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No owned goals"})]})}):n.jsx("div",{className:"space-y-3",children:i.owns.map(u=>d(u,100))})}),n.jsx(Cr,{value:"co-owns",className:"space-y-4 mt-4",children:i.coOwns.length===0?n.jsx(Ae,{children:n.jsxs(Re,{className:"flex flex-col items-center justify-center py-8",children:[n.jsx(Uo,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No co-owned goals"})]})}):n.jsx("div",{className:"space-y-3",children:i.all.filter(u=>u.relationshipType==="co-owner").map(u=>d(u.goal,u.ownershipPercentage))})}),n.jsx(Cr,{value:"contributes",className:"space-y-4 mt-4",children:i.contributes.length===0?n.jsx(Ae,{children:n.jsxs(Re,{className:"flex flex-col items-center justify-center py-8",children:[n.jsx($r,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No contributing goals"})]})}):n.jsx("div",{className:"space-y-3",children:i.contributes.map(u=>d(u))})}),n.jsx(Cr,{value:"consumes",className:"space-y-4 mt-4",children:i.consumes.length===0?n.jsx(Ae,{children:n.jsxs(Re,{className:"flex flex-col items-center justify-center py-8",children:[n.jsx(ba,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No consuming goals"})]})}):n.jsx("div",{className:"space-y-3",children:i.consumes.map(u=>d(u))})})]})]})]})}):null}function q6e(){const[e,t]=N.useState(null),[r,a]=N.useState(!1),s=i=>{t(i),a(!0)};return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx(z6e,{onStakeholderClick:s}),n.jsx(eJ,{open:r,onOpenChange:a,stakeholderId:e})]})}function U6e({onGoalClick:e,onStakeholderClick:t}){const{allGoals:r,loading:a}=Kg(),{stakeholders:s,loading:i}=Qy(),[o,l]=N.useState("all"),[d,u]=N.useState("all"),[f,m]=N.useState("all"),p=N.useMemo(()=>{const y=new Set(s.map(j=>j.group));return Array.from(y).sort()},[s]),g=N.useMemo(()=>r.filter(y=>!(o!=="all"&&y.category!==o||d!=="all"&&y.status!==d||f!=="all"&&y.time_horizon!==f)),[r,o,d,f]),b=N.useMemo(()=>g.map(y=>{const j=new Map;return y.owners.forEach(_=>{const C=s.find(A=>A.id===_.stakeholder_id);if(C){const A=C.group;j.has(A)||j.set(A,[]),j.get(A).push(C.name)}}),{goal:y,groupOwners:j}}),[g,s]),v=y=>{switch(y){case"active":return"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20";case"draft":return"bg-blue-500/10 text-blue-700 dark:text-blue-400 border-blue-500/20";case"paused":return"bg-yellow-500/10 text-yellow-700 dark:text-yellow-400 border-yellow-500/20";case"retired":return"bg-gray-500/10 text-gray-700 dark:text-gray-400 border-gray-500/20";default:return"bg-gray-500/10 text-gray-700 dark:text-gray-400 border-gray-500/20"}};return a||i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-muted-foreground",children:"Loading matrix..."})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(le,{variant:"ghost",size:"sm",asChild:!0,children:n.jsxs(qr,{to:"/retina/stakeholders",children:[n.jsx(O9,{className:"h-4 w-4 mr-2"}),"Back to Directory"]})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"Stakeholder Ownership Matrix"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[g.length," goals  ",p.length," groups"]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs(Et,{value:o,onValueChange:y=>l(y),children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Filter by category"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Categories"}),n.jsx(we,{value:"Financial",children:"Financial"}),n.jsx(we,{value:"Operational",children:"Operational"}),n.jsx(we,{value:"Strategic",children:"Strategic"}),n.jsx(we,{value:"Compliance",children:"Compliance"}),n.jsx(we,{value:"Innovation",children:"Innovation"}),n.jsx(we,{value:"Customer",children:"Customer"}),n.jsx(we,{value:"Employee",children:"Employee"}),n.jsx(we,{value:"ESG",children:"ESG"}),n.jsx(we,{value:"Technology",children:"Technology"}),n.jsx(we,{value:"Other",children:"Other"})]})]}),n.jsxs(Et,{value:d,onValueChange:y=>u(y),children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Filter by status"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Statuses"}),n.jsx(we,{value:"draft",children:"Draft"}),n.jsx(we,{value:"active",children:"Active"}),n.jsx(we,{value:"paused",children:"Paused"}),n.jsx(we,{value:"retired",children:"Retired"})]})]}),n.jsxs(Et,{value:f,onValueChange:y=>m(y),children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Filter by time horizon"})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Horizons"}),n.jsx(we,{value:"short",children:"Short (0-1 year)"}),n.jsx(we,{value:"medium",children:"Medium (1-3 years)"}),n.jsx(we,{value:"long",children:"Long (3+ years)"})]})]})]}),g.length===0?n.jsx(Ae,{children:n.jsxs(Re,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Uo,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No goals found"})]})}):n.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-muted/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"sticky left-0 z-10 bg-muted/50 px-4 py-3 text-left text-sm font-medium min-w-[300px]",children:"Goal"}),p.map(y=>n.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium min-w-[150px]",children:y},y))]})}),n.jsx("tbody",{className:"divide-y divide-border",children:b.map(({goal:y,groupOwners:j})=>n.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[n.jsx("td",{className:"sticky left-0 z-10 bg-background px-4 py-3",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm font-medium cursor-pointer hover:text-primary",onClick:()=>e==null?void 0:e(y.id),children:y.statement}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(be,{variant:"outline",className:"text-xs",children:y.category}),n.jsx(be,{variant:"outline",className:`text-xs ${v(y.status)}`,children:y.status}),n.jsx(be,{variant:"secondary",className:"text-xs",children:y.time_horizon})]})]})}),p.map(_=>{const C=j.get(_)||[];return n.jsx("td",{className:"px-4 py-3 text-center",children:C.length>0?n.jsxs("div",{className:"flex flex-col items-center gap-1",children:[n.jsx(be,{variant:"default",className:"text-xs",children:C.length}),n.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[C.slice(0,2).map((A,S)=>n.jsx(be,{variant:"outline",className:"text-xs",children:A.split(" ")[0]},S)),C.length>2&&n.jsxs(be,{variant:"outline",className:"text-xs",children:["+",C.length-2]})]})]}):n.jsx("span",{className:"text-muted-foreground text-xs",children:""})},_)})]},y.id))})]})})}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{className:"text-base",children:"Matrix Summary"}),n.jsx(mt,{children:"Ownership distribution across stakeholder groups"})]}),n.jsx(Re,{children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Goals"}),n.jsx("div",{className:"text-2xl font-bold",children:g.length})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Stakeholder Groups"}),n.jsx("div",{className:"text-2xl font-bold",children:p.length})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Owners"}),n.jsx("div",{className:"text-2xl font-bold",children:g.reduce((y,j)=>y+j.owners.length,0)})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Owners/Goal"}),n.jsx("div",{className:"text-2xl font-bold",children:g.length>0?(g.reduce((y,j)=>y+j.owners.length,0)/g.length).toFixed(1):0})]})]})})]})]})}function V6e(){const e=Sg(),[t,r]=N.useState(null),[a,s]=N.useState(!1),i=l=>{e(`/retina/goals?goal=${l}`)},o=l=>{r(l),s(!0)};return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx(U6e,{onGoalClick:i,onStakeholderClick:o}),n.jsx(eJ,{open:a,onOpenChange:s,stakeholderId:t})]})}function H6e(){const{tenant:e}=Fr(),{getDecisionsByStatus:t}=Vo(),r=t(e.tenantId,"closed"),[a,s]=N.useState(!1),[i,o]=N.useState(null),[l,d]=N.useState(""),[u,f]=N.useState("date"),m=r.filter(p=>p.title.toLowerCase().includes(l.toLowerCase())).sort((p,g)=>u==="date"?g.closedAt-p.closedAt:p.title.localeCompare(g.title));return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(qr,{to:"/retina",className:"hover:text-foreground transition-colors",children:"Retina"}),n.jsx(ti,{className:"w-4 h-4"}),n.jsx(qr,{to:"/retina/modules",className:"hover:text-foreground transition-colors",children:"Modules"}),n.jsx(ti,{className:"w-4 h-4"}),n.jsx(qr,{to:"/retina/modules/i-decide",className:"hover:text-foreground transition-colors",children:"i-Decide"}),n.jsx(ti,{className:"w-4 h-4"}),n.jsx("span",{className:"text-foreground font-medium",children:"Closed Decisions"})]}),n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Closed Decisions"}),n.jsx(be,{variant:"secondary",className:"text-sm",children:e.tenantName})]}),n.jsxs("p",{className:"text-muted-foreground",children:["View and manage all closed decisions for ",e.tenantName]})]}),r.length>0&&n.jsxs(le,{variant:"outline",onClick:()=>q4e(r),children:[n.jsx(qn,{className:"w-4 h-4 mr-2"}),"Export Decisions CSV"]})]}),r.length>0&&n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Rl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(et,{placeholder:"Search decisions...",value:l,onChange:p=>d(p.target.value),className:"pl-9"})]}),n.jsxs(Et,{value:u,onValueChange:p=>f(p),children:[n.jsx(kt,{className:"w-[180px]",children:n.jsx(Tt,{})}),n.jsxs(Ot,{children:[n.jsx(we,{value:"date",children:"Sort by Date"}),n.jsx(we,{value:"title",children:"Sort by Title"})]})]})]}),n.jsxs(Ae,{children:[n.jsx(He,{children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx(Ge,{children:m.length===r.length?`${r.length} Decisions`:`${m.length} of ${r.length} Decisions`}),n.jsxs(mt,{children:["All closed decisions for ",e.tenantName]})]})})}),n.jsx(Re,{children:m.length===0?n.jsx("div",{className:"text-center py-12",children:l?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:['No decisions found matching "',l,'"']}),n.jsx(le,{variant:"outline",size:"sm",onClick:()=>d(""),children:"Clear search"})]}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"No closed decisions yet"})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(p=>{var g;return n.jsxs("div",{className:"relative p-4 border border-border rounded-lg space-y-3 hover:bg-accent/50 transition-colors cursor-pointer group",children:[n.jsx(At,{children:n.jsxs(Ct,{children:[n.jsx(_t,{asChild:!0,children:n.jsx("button",{onClick:b=>{b.stopPropagation(),o(p.id),s(!0)},className:"absolute -top-2 -right-2 w-8 h-8 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 transition-all hover:scale-110 flex items-center justify-center shadow-md z-10 opacity-0 group-hover:opacity-100",children:n.jsx(L9,{className:"w-4 h-4"})})}),n.jsx(St,{children:n.jsx("p",{children:"View feedback loop"})})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-semibold text-sm line-clamp-2",children:p.title}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ba,{className:"w-4 h-4 text-green-600 shrink-0"}),n.jsx("span",{className:"text-xs text-muted-foreground truncate",children:(g=p.options.find(b=>b.id===p.chosenOptionId))==null?void 0:g.label})]}),n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(p.closedAt).toLocaleDateString()}),p.metrics&&n.jsxs(be,{variant:"outline",className:"text-xs",children:["RAROC: ",p.metrics.raroc.toFixed(2)]})]})]}),p.description&&n.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:p.description})]},p.id)})})})]}),i&&(()=>{const p=r.find(y=>y.id===i);if(!p)return null;const g=p.options.find(y=>y.id===p.chosenOptionId),b=Math.random()>.3,v=b&&Math.random()>.4;return n.jsx(GO,{open:a,onOpenChange:s,decisionTitle:p.title,decisionDate:p.closedAt||Date.now(),chosenOption:(g==null?void 0:g.label)||"Unknown Option",outcomeData:b?{logged:!0,date:(p.closedAt||Date.now())+360*60*60*1e3,summary:Math.random()>.5?"Performance exceeded expectations":"Results tracking close to projections"}:{logged:!1},adjustmentData:v?{count:Math.floor(Math.random()*3)+1,lastAdjustment:"Tightened VaR95 threshold by 5%",date:(p.closedAt||Date.now())+480*60*60*1e3}:{count:0}})})()]})}function r9(e,t,r){const[a,s,i]=[e,t,r].map(o=>{const l=o/255;return l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4)});return .2126*a+.7152*s+.0722*i}function n9(e){if(e.startsWith("#")){const a=e.slice(1);if(a.length===3)return{r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16)};if(a.length===6)return{r:parseInt(a.slice(0,2),16),g:parseInt(a.slice(2,4),16),b:parseInt(a.slice(4,6),16)}}const t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(t)return{r:parseInt(t[1]),g:parseInt(t[2]),b:parseInt(t[3])};const r=e.match(/hsla?\((\d+),\s*(\d+)%,\s*(\d+)%/);if(r){const a=parseInt(r[1])/360,s=parseInt(r[2])/100,i=parseInt(r[3])/100;let o,l,d;if(s===0)o=l=d=i;else{const u=(p,g,b)=>(b<0&&(b+=1),b>1&&(b-=1),b<.16666666666666666?p+(g-p)*6*b:b<.5?g:b<.6666666666666666?p+(g-p)*(.6666666666666666-b)*6:p),f=i<.5?i*(1+s):i+s-i*s,m=2*i-f;o=u(m,f,a+1/3),l=u(m,f,a),d=u(m,f,a-1/3)}return{r:Math.round(o*255),g:Math.round(l*255),b:Math.round(d*255)}}return null}function G6e(e,t){const r=n9(e),a=n9(t);if(!r||!a)return console.warn("Could not parse colors:",{foreground:e,background:t}),0;const s=r9(r.r,r.g,r.b),i=r9(a.r,a.g,a.b),o=Math.max(s,i),l=Math.min(s,i);return(o+.05)/(l+.05)}function W6e(e,t,r=!1,a=""){const s=G6e(e,t),i=r?3:4.5;return{pass:s>=i,ratio:Math.round(s*100)/100,required:i,foreground:e,background:t,context:a}}function K6e(e){const t=[],r=document.documentElement,a=getComputedStyle(r);return[{fg:"--foreground",bg:"--background",context:"Body text"},{fg:"--primary-foreground",bg:"--primary",context:"Primary button"},{fg:"--secondary-foreground",bg:"--secondary",context:"Secondary button"},{fg:"--muted-foreground",bg:"--muted",context:"Muted text"},{fg:"--accent-foreground",bg:"--accent",context:"Accent text"},{fg:"--card-foreground",bg:"--card",context:"Card text"},{fg:"--popover-foreground",bg:"--popover",context:"Popover text"}].forEach(({fg:i,bg:o,context:l})=>{const d=a.getPropertyValue(i),u=a.getPropertyValue(o);if(d&&u){const f=`hsl(${d})`,m=`hsl(${u})`;t.push(W6e(f,m,!1,`${l} (${e})`))}}),t}function Y6e(e){const t=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'],r=Array.from(e.querySelectorAll(t.join(", "))),a=[],i=r.map(l=>{const d=l.getAttribute("tabindex");return d?parseInt(d):0}).filter(l=>l>0);return i.length>0&&a.push(`Found ${i.length} elements with positive tabindex (anti-pattern)`),e.querySelectorAll('[role="region"], [role="navigation"], section, nav').length===0&&a.push("No ARIA landmarks found for screen reader navigation"),{pass:a.length===0,issues:a,focusableElements:r.length}}function X6e(e){const t=[],r=[];["[onclick]",'[role="button"]','[role="tab"]','[role="slider"]',".cursor-pointer"].forEach(i=>{e.querySelectorAll(i).forEach(l=>{var g;const d=l,u=d.tagName.toLowerCase(),f=d.getAttribute("role"),m=d.getAttribute("tabindex");r.push(`${u}${f?`[role="${f}"]`:""}`),u!=="button"&&u!=="a"&&m===null&&t.push(`Element ${u}${f?` with role="${f}"`:""} is not keyboard accessible`),d.getAttribute("aria-label")||d.getAttribute("aria-labelledby")||((g=d.textContent)==null?void 0:g.trim())||t.push(`Element ${u}${f?` with role="${f}"`:""} has no accessible label`)})});const s=e.querySelectorAll('[role="gridcell"]');return s.length>0&&s.forEach(i=>{i.hasAttribute("tabindex")||t.push("Grid cell missing tabindex for keyboard navigation")}),{pass:t.length===0,issues:t,testedElements:[...new Set(r)]}}function J6e(e){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,r=e.querySelectorAll('[class*="animate-"], [class*="transition-"]');let a=!0;return t&&r.length>0&&r.forEach(s=>{const i=getComputedStyle(s),o=i.animationDuration,l=i.transitionDuration;(o&&o!=="0s"||l&&l!=="0s")&&(a=!1)}),{pass:!t||a,respectsPreference:a,animatedElements:r.length}}function tJ(e,t){const r=K6e(t),a=Y6e(e),s=X6e(e),i=J6e(e),o=r.every(l=>l.pass)&&a.pass&&s.pass&&i.pass;return{contrast:r,focusOrder:a,keyboardNav:s,reducedMotion:i,overallPass:o,timestamp:Date.now()}}function Z6e(e){let t=`=== Accessibility Audit Report ===

`;return t+=`CONTRAST CHECKS (WCAG AA):
`,e.contrast.forEach(r=>{const a=r.pass?" PASS":" FAIL";t+=`  ${a} ${r.context}: ${r.ratio}:1 (required: ${r.required}:1)
`}),t+=`
`,t+=`FOCUS ORDER:
`,t+=`  ${e.focusOrder.pass?" PASS":" FAIL"}
`,t+=`  Focusable elements: ${e.focusOrder.focusableElements}
`,e.focusOrder.issues.length>0&&(t+=`  Issues:
`,e.focusOrder.issues.forEach(r=>{t+=`    - ${r}
`})),t+=`
`,t+=`KEYBOARD NAVIGATION:
`,t+=`  ${e.keyboardNav.pass?" PASS":" FAIL"}
`,t+=`  Tested elements: ${e.keyboardNav.testedElements.join(", ")}
`,e.keyboardNav.issues.length>0&&(t+=`  Issues:
`,e.keyboardNav.issues.forEach(r=>{t+=`    - ${r}
`})),t+=`
`,t+=`REDUCED MOTION:
`,t+=`  ${e.reducedMotion.pass?" PASS":" FAIL"}
`,t+=`  Respects preference: ${e.reducedMotion.respectsPreference?"Yes":"No"}
`,t+=`  Animated elements: ${e.reducedMotion.animatedElements}
`,t+=`
`,t+=`OVERALL: ${e.overallPass?" ALL CHECKS PASSED":" SOME CHECKS FAILED"}
`,t}function xA({level:e,onRunAudit:t}){const r=N.useRef(null),[a,s]=N.useState(!1),i=()=>{r.current&&(s(!0),setTimeout(()=>{const o=tJ(r.current,e);t(e,o),s(!1)},100))};return n.jsx(A9,{defaultLevel:e,children:n.jsxs("div",{ref:r,className:"h-full flex flex-col bg-background text-foreground",children:[n.jsxs("div",{className:"p-4 border-b border-border bg-card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h3",{className:"text-lg font-semibold capitalize",children:[e," Level"]}),n.jsxs(le,{size:"sm",onClick:i,disabled:a,children:[n.jsx(s3,{className:"w-4 h-4 mr-2"}),a?"Running...":"Run Audit"]})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[e==="basic"&&"Friendly, spacious interface for beginners",e==="intermediate"&&"Balanced interface for regular users",e==="advanced"&&"Dense, efficient interface for experts"]})]}),n.jsx(pu,{className:"flex-1 p-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Typography"}),n.jsx(mt,{children:"Text samples at this level"})]}),n.jsxs(Re,{className:"space-y-2",children:[n.jsx("h1",{className:"text-4xl font-bold",children:"Heading 1"}),n.jsx("h2",{className:"text-3xl font-semibold",children:"Heading 2"}),n.jsx("h3",{className:"text-2xl font-semibold",children:"Heading 3"}),n.jsx("p",{className:"text-base",children:"Body text: The quick brown fox jumps over the lazy dog. This is a sample paragraph to demonstrate text rendering and contrast."}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Muted text: Secondary information with reduced emphasis."})]})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Interactive Elements"}),n.jsx(mt,{children:"Buttons and controls"})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(le,{children:"Primary Button"}),n.jsx(le,{variant:"secondary",children:"Secondary"}),n.jsx(le,{variant:"outline",children:"Outline"}),n.jsx(le,{variant:"ghost",children:"Ghost"}),n.jsx(le,{variant:"destructive",children:"Destructive"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(be,{children:"Default Badge"}),n.jsx(be,{variant:"secondary",children:"Secondary"}),n.jsx(be,{variant:"outline",children:"Outline"}),n.jsx(be,{variant:"destructive",children:"Destructive"})]})]})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Form Elements"}),n.jsx(mt,{children:"Input fields and controls"})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:`input-${e}`,className:"text-sm font-medium",children:"Text Input"}),n.jsx("input",{id:`input-${e}`,type:"text",placeholder:"Enter text...",className:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:`select-${e}`,className:"text-sm font-medium",children:"Select"}),n.jsxs("select",{id:`select-${e}`,className:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground",children:[n.jsx("option",{children:"Option 1"}),n.jsx("option",{children:"Option 2"}),n.jsx("option",{children:"Option 3"})]})]})]})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Navigation"}),n.jsx(mt,{children:"Tabs and navigation elements"})]}),n.jsx(Re,{children:n.jsxs(si,{defaultValue:"tab1",children:[n.jsxs(zs,{children:[n.jsx(hr,{value:"tab1",children:"Tab 1"}),n.jsx(hr,{value:"tab2",children:"Tab 2"}),n.jsx(hr,{value:"tab3",children:"Tab 3"})]}),n.jsx(Cr,{value:"tab1",className:"pt-4",children:n.jsx("p",{className:"text-sm",children:"Content for tab 1"})}),n.jsx(Cr,{value:"tab2",className:"pt-4",children:n.jsx("p",{className:"text-sm",children:"Content for tab 2"})}),n.jsx(Cr,{value:"tab3",className:"pt-4",children:n.jsx("p",{className:"text-sm",children:"Content for tab 3"})})]})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Alerts"}),n.jsx(mt,{children:"Status messages"})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs(Fs,{children:[n.jsx(ba,{className:"h-4 w-4"}),n.jsx(gl,{children:"Success"}),n.jsx(ei,{children:"Your changes have been saved successfully."})]}),n.jsxs(Fs,{variant:"destructive",children:[n.jsx(vp,{className:"h-4 w-4"}),n.jsx(gl,{children:"Error"}),n.jsx(ei,{children:"There was a problem processing your request."})]})]})]})]})})]})})}function Q6e({reports:e}){const t=["basic","intermediate","advanced"],r=a=>a?n.jsx(ba,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):n.jsx(vp,{className:"w-5 h-5 text-red-600 dark:text-red-400"});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Accessibility Audit Results"}),n.jsx("p",{className:"text-muted-foreground",children:"WCAG AA compliance checks for all three interface levels"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.map(a=>{const s=e[a];return s?n.jsxs(Ae,{className:s.overallPass?"border-green-500":"border-red-500",children:[n.jsxs(He,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ge,{className:"capitalize",children:a}),r(s.overallPass)]}),n.jsx(mt,{children:s.overallPass?"All checks passed":"Some checks failed"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Mh,{className:"w-4 h-4"}),"Contrast"]}),r(s.contrast.every(i=>i.pass))]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(nP,{className:"w-4 h-4"}),"Focus Order"]}),r(s.focusOrder.pass)]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(QR,{className:"w-4 h-4"}),"Keyboard Nav"]}),r(s.keyboardNav.pass)]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Lp,{className:"w-4 h-4"}),"Reduced Motion"]}),r(s.reducedMotion.pass)]})]})]},a):n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{className:"capitalize",children:a}),n.jsx(mt,{children:"No audit run yet"})]}),n.jsx(Re,{children:n.jsx("p",{className:"text-sm text-muted-foreground",children:'Click "Run Audit" to test this level'})})]},a)})}),n.jsxs(si,{defaultValue:"basic",className:"w-full",children:[n.jsxs(zs,{className:"grid w-full grid-cols-3",children:[n.jsx(hr,{value:"basic",children:"Basic"}),n.jsx(hr,{value:"intermediate",children:"Intermediate"}),n.jsx(hr,{value:"advanced",children:"Advanced"})]}),t.map(a=>{const s=e[a];return n.jsx(Cr,{value:a,className:"space-y-4",children:s?n.jsxs(n.Fragment,{children:[n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(Mh,{className:"w-5 h-5"}),"Contrast Checks (WCAG AA)"]}),n.jsxs(mt,{children:[s.contrast.filter(i=>i.pass).length," of"," ",s.contrast.length," passed"]})]}),n.jsx(Re,{children:n.jsx("div",{className:"space-y-2",children:s.contrast.map((i,o)=>n.jsxs("div",{className:"flex items-center justify-between text-sm p-2 rounded bg-muted/50",children:[n.jsx("span",{children:i.context}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"font-mono",children:[i.ratio,":1 (req: ",i.required,":1)"]}),r(i.pass)]})]},o))})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(nP,{className:"w-5 h-5"}),"Focus Order"]}),n.jsxs(mt,{children:[s.focusOrder.focusableElements," focusable elements"]})]}),n.jsx(Re,{children:s.focusOrder.issues.length===0?n.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:" No issues found"}):n.jsx("ul",{className:"space-y-1 text-sm",children:s.focusOrder.issues.map((i,o)=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(vp,{className:"w-4 h-4 mt-0.5 text-red-600 dark:text-red-400 flex-shrink-0"}),n.jsx("span",{children:i})]},o))})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(QR,{className:"w-5 h-5"}),"Keyboard Navigation"]}),n.jsxs(mt,{children:["Tested:"," ",s.keyboardNav.testedElements.join(", ")||"No interactive elements"]})]}),n.jsx(Re,{children:s.keyboardNav.issues.length===0?n.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:" No issues found"}):n.jsx("ul",{className:"space-y-1 text-sm",children:s.keyboardNav.issues.map((i,o)=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(vp,{className:"w-4 h-4 mt-0.5 text-red-600 dark:text-red-400 flex-shrink-0"}),n.jsx("span",{children:i})]},o))})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(Lp,{className:"w-5 h-5"}),"Reduced Motion"]}),n.jsxs(mt,{children:[s.reducedMotion.animatedElements," animated elements"]})]}),n.jsx(Re,{children:n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("p",{children:["Respects preference:"," ",n.jsx("span",{className:s.reducedMotion.respectsPreference?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:s.reducedMotion.respectsPreference?"Yes":"No"})]}),s.reducedMotion.pass?n.jsx("p",{className:"text-green-600 dark:text-green-400",children:" Reduced motion support is working"}):n.jsx("p",{className:"text-red-600 dark:text-red-400",children:" Animations are still running despite user preference"})]})})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Raw Report"}),n.jsx(mt,{children:"Complete audit output"})]}),n.jsx(Re,{children:n.jsx(pu,{className:"h-64 w-full rounded border border-border",children:n.jsx("pre",{className:"p-4 text-xs font-mono",children:Z6e(s)})})})]})]}):n.jsxs(Fs,{children:[n.jsx(tn,{className:"h-4 w-4"}),n.jsx(gl,{children:"No Audit Data"}),n.jsx(ei,{children:"Run the audit for this level to see detailed results."})]})},a)})]})]})}function eMe(){const[e,t]=N.useState({basic:null,intermediate:null,advanced:null}),r=(s,i)=>{t(o=>({...o,[s]:i}))},a=()=>{["basic","intermediate","advanced"].forEach(i=>{const o=document.querySelector(`[data-level="${i}"]`);if(o){const l=tJ(o,i);r(i,l)}})};return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"border-b border-border bg-card",children:n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Theme Check Playground"}),n.jsx("p",{className:"text-muted-foreground",children:"Preview and test accessibility across all three interface levels"})]}),n.jsxs(le,{onClick:a,size:"lg",children:[n.jsx(s3,{className:"w-5 h-5 mr-2"}),"Run All Audits"]})]})})}),n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsxs(si,{defaultValue:"preview",className:"w-full",children:[n.jsxs(zs,{className:"grid w-full grid-cols-2 mb-6",children:[n.jsx(hr,{value:"preview",children:"Level Previews"}),n.jsx(hr,{value:"results",children:"Audit Results"})]}),n.jsx(Cr,{value:"preview",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"border border-border rounded-lg overflow-hidden h-[800px]","data-level":"basic",children:n.jsx(xA,{level:"basic",onRunAudit:r})}),n.jsx("div",{className:"border border-border rounded-lg overflow-hidden h-[800px]","data-level":"intermediate",children:n.jsx(xA,{level:"intermediate",onRunAudit:r})}),n.jsx("div",{className:"border border-border rounded-lg overflow-hidden h-[800px]","data-level":"advanced",children:n.jsx(xA,{level:"advanced",onRunAudit:r})})]})}),n.jsx(Cr,{value:"results",children:n.jsx(Q6e,{reports:e})})]})})]})}function tMe(){const{tenant:e}=Fr(),{addAudit:t}=Vo();return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(qr,{to:"/retina",className:"hover:text-foreground transition-colors",children:"Retina"}),n.jsx(ti,{className:"w-4 h-4"}),n.jsx("span",{className:"text-foreground font-medium",children:"Settings"})]}),n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Settings"}),n.jsx(be,{variant:"secondary",className:"text-sm",children:e.tenantName})]}),n.jsx("p",{className:"text-muted-foreground",children:"Configure your preferences and system settings"})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(D9,{className:"w-5 h-5 text-primary"}),n.jsx(Ge,{children:"Interface Level"})]}),n.jsx(mt,{children:"Choose your preferred interface complexity. This affects the density of controls, information display, and available features across the application."})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsx(qX,{variant:"global",onLevelChange:(r,a)=>{t("settings.interface.level.changed",{level:r,isTemporary:a,timestamp:Date.now()})}}),n.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg space-y-2",children:[n.jsx("h4",{className:"text-sm font-medium",children:"What changes?"}),n.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Basic:"})," Simplified layout, essential controls only"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Intermediate:"})," Balanced view with common features"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Advanced:"})," Full analytics, dense information display"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Auto:"})," Adapts based on page context and user behavior"]})]})]}),n.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-md",children:n.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:[n.jsx("strong",{children:"Tip:"}),' You can temporarily override this setting on individual decision pages using the "View Mode" dropdown.']})})]})]}),n.jsxs(Ae,{className:"opacity-50",children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"More Settings Coming Soon"}),n.jsx(mt,{children:"Additional configuration options will be available here"})]}),n.jsx(Re,{children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Stay tuned for more customization options including notifications, data preferences, and integration settings."})})]})]})]})}function rMe({moduleName:e,moduleKey:t}){return n.jsx("div",{className:"flex items-center justify-center min-h-[60vh] p-6",children:n.jsxs(Ae,{className:"max-w-md w-full",children:[n.jsxs(He,{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center",children:n.jsx(Sre,{className:"h-8 w-8 text-muted-foreground"})})}),n.jsx(Ge,{className:"text-xl",children:"Module Disabled"})]}),n.jsxs(Re,{className:"space-y-4 text-center",children:[n.jsxs("p",{className:"text-muted-foreground",children:["The ",n.jsx("strong",{children:e})," module is currently disabled for this tenant."]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Contact your administrator or enable this module in the admin settings."}),n.jsxs("div",{className:"flex flex-col gap-2 pt-4",children:[n.jsx(le,{asChild:!0,children:n.jsxs(qr,{to:"/retina/admin",children:[n.jsx(Mp,{className:"h-4 w-4 mr-2"}),"Go to Admin Settings"]})}),n.jsx(le,{variant:"outline",asChild:!0,children:n.jsx(qr,{to:"/retina",children:"Back to Dashboard"})})]})]})]})})}function cp({moduleKey:e,moduleName:t,children:r}){const{tenant:a}=Fr();return eae(a.tenantId,e)?n.jsx(n.Fragment,{children:r}):n.jsx(rMe,{moduleName:t,moduleKey:e})}function nMe({onNavigateToDecision:e,onAuditEvent:t}){const{tenant:r}=Fr(),[a,s]=N.useState([]),[i,o]=N.useState([]),[l,d]=N.useState(""),[u,f]=N.useState("all"),[m,p]=N.useState(0);N.useEffect(()=>{g();const C=setInterval(g,3e4);return()=>clearInterval(C)},[r.tenantId]),N.useEffect(()=>{b()},[a,l,u]);const g=()=>{const C=Ny(r.tenantId);s(C),p(V9(r.tenantId))},b=()=>{let C=[...a];if(u==="pending"?C=C.filter(A=>!A.acknowledged):u==="acknowledged"&&(C=C.filter(A=>A.acknowledged)),l){const A=l.toLowerCase();C=C.filter(S=>S.decision_title.toLowerCase().includes(A)||S.triggered_by.some(T=>T.signal_label.toLowerCase().includes(A)))}C.sort((A,S)=>S.tagged_at-A.tagged_at),o(C)},v=C=>{ane(C),g(),t&&t("revaluation_tag.acknowledged",{decisionId:C,tenantId:r.tenantId,timestamp:Date.now()})},y=C=>{e&&e(C)},j=(C,A)=>A>C?n.jsx($r,{className:"h-4 w-4 text-green-500"}):A<C?n.jsx(fa,{className:"h-4 w-4 text-red-500"}):null,_=C=>{const A=(C.new_value-C.old_value)/C.old_value*100;return`${A>=0?"+":""}${A.toFixed(1)}%`};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs(Ae,{children:[n.jsx(He,{className:"pb-3",children:n.jsx(Ge,{className:"text-sm font-medium",children:"Pending Tags"})}),n.jsx(Re,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"h-5 w-5 text-amber-500"}),n.jsx("span",{className:"text-2xl font-bold",children:m})]})})]}),n.jsxs(Ae,{children:[n.jsx(He,{className:"pb-3",children:n.jsx(Ge,{className:"text-sm font-medium",children:"Total Tags"})}),n.jsx(Re,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vc,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("span",{className:"text-2xl font-bold",children:a.length})]})})]}),n.jsxs(Ae,{children:[n.jsx(He,{className:"pb-3",children:n.jsx(Ge,{className:"text-sm font-medium",children:"Acknowledged"})}),n.jsx(Re,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ba,{className:"h-5 w-5 text-green-500"}),n.jsx("span",{className:"text-2xl font-bold",children:a.filter(C=>C.acknowledged).length})]})})]})]}),n.jsxs(Ae,{children:[n.jsxs(He,{children:[n.jsx(Ge,{children:"Re-evaluation Tags"}),n.jsx(mt,{children:"Decisions flagged for re-evaluation due to signal updates"})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Rl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(et,{placeholder:"Search by decision or signal...",value:l,onChange:C=>d(C.target.value),className:"pl-9"})]}),n.jsxs(Et,{value:u,onValueChange:C=>f(C),children:[n.jsxs(kt,{className:"w-full md:w-[200px]",children:[n.jsx(Cg,{className:"h-4 w-4 mr-2"}),n.jsx(Tt,{})]}),n.jsxs(Ot,{children:[n.jsx(we,{value:"all",children:"All Tags"}),n.jsx(we,{value:"pending",children:"Pending Only"}),n.jsx(we,{value:"acknowledged",children:"Acknowledged Only"})]})]})]}),i.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(vc,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:l||u!=="all"?"No tags match your filters":"No re-evaluation tags yet"})]}):n.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:n.jsxs(Ho,{children:[n.jsx(Go,{children:n.jsxs(Yn,{children:[n.jsx(Mt,{children:"Decision"}),n.jsx(Mt,{children:"Signal Updates"}),n.jsx(Mt,{children:"Tagged"}),n.jsx(Mt,{children:"Status"}),n.jsx(Mt,{className:"text-right",children:"Actions"})]})}),n.jsx(Wo,{children:i.map(C=>n.jsxs(Yn,{children:[n.jsx(Rt,{children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:C.decision_title}),n.jsx("div",{className:"text-xs text-muted-foreground",children:C.decision_id})]})}),n.jsx(Rt,{children:n.jsxs("div",{className:"space-y-1",children:[C.triggered_by.slice(0,2).map((A,S)=>n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[j(A.old_value,A.new_value),n.jsx("span",{className:"font-medium",children:A.signal_label}),n.jsx(be,{variant:"outline",className:"text-xs",children:_(A)})]},S)),C.triggered_by.length>2&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",C.triggered_by.length-2," more"]})]})}),n.jsxs(Rt,{children:[n.jsx("div",{className:"text-sm",children:new Date(C.tagged_at).toLocaleDateString()}),n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(C.tagged_at).toLocaleTimeString()})]}),n.jsx(Rt,{children:C.acknowledged?n.jsxs(be,{variant:"secondary",className:"gap-1",children:[n.jsx(ba,{className:"h-3 w-3"}),"Acknowledged"]}):n.jsxs(be,{variant:"destructive",className:"gap-1",children:[n.jsx(tn,{className:"h-3 w-3"}),"Pending"]})}),n.jsx(Rt,{className:"text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(le,{variant:"outline",size:"sm",onClick:()=>y(C.decision_id),children:"View"}),!C.acknowledged&&n.jsx(le,{variant:"default",size:"sm",onClick:()=>v(C.decision_id),children:"Acknowledge"})]})})]},`${C.decision_id}-${C.tagged_at}`))})]})})]})]})]})}function aMe(){const{decisions:e}=Vo();return N.useEffect(()=>(dne(),cne(()=>e,r=>{if(console.log("Re-evaluation tag created:",r),r.triggered_by&&r.triggered_by.length>0){const a=localStorage.getItem("retina-tenant-id")||"t-demo";rPe(r.triggered_by,a,s=>{console.log("Auto-refresh completed:",s)})}})),[e]),null}function sMe(){return n.jsx(WQ,{children:n.jsx(IQ,{children:n.jsxs(A9,{enableRouteThemes:!0,children:[n.jsx(aMe,{}),n.jsxs(hQ,{children:[n.jsx(oa,{path:"/",element:n.jsx(uQ,{to:"/retina",replace:!0})}),n.jsx(oa,{path:"/retina",element:n.jsx(qa,{children:n.jsx(EAe,{})})}),n.jsx(oa,{path:"/retina/modules",element:n.jsx(qa,{children:n.jsx(RAe,{})})}),n.jsx(oa,{path:"/retina/modules/i-decide",element:n.jsx(qa,{children:n.jsx(cp,{moduleKey:"i-decide",moduleName:"i-Decide",children:n.jsx(bPe,{})})})}),n.jsx(oa,{path:"/retina/modules/i-decide/closed",element:n.jsx(qa,{children:n.jsx(cp,{moduleKey:"i-decide",moduleName:"i-Decide",children:n.jsx(H6e,{})})})}),n.jsx(oa,{path:"/retina/portfolios",element:n.jsx(qa,{children:n.jsx(HPe,{})})}),n.jsx(oa,{path:"/retina/learning-feed",element:n.jsx(qa,{children:n.jsx(l6e,{})})}),n.jsx(oa,{path:"/retina/goals",element:n.jsx(qa,{children:n.jsx(b6e,{})})}),n.jsx(oa,{path:"/retina/goals/new",element:n.jsx(qa,{children:n.jsx(D6e,{})})}),n.jsx(oa,{path:"/retina/goals/map",element:n.jsx(qa,{children:n.jsx($6e,{})})}),n.jsx(oa,{path:"/retina/goals/matrix",element:n.jsx(qa,{children:n.jsx(V6e,{})})}),n.jsx(oa,{path:"/retina/stakeholders",element:n.jsx(qa,{children:n.jsx(q6e,{})})}),n.jsx(oa,{path:"/retina/revaluation-tags",element:n.jsx(qa,{children:n.jsx(nMe,{})})}),n.jsx(oa,{path:"/playground/theme-check",element:n.jsx(eMe,{})}),n.jsx(oa,{path:"/retina/modules/i-scan",element:n.jsx(qa,{children:n.jsx(cp,{moduleKey:"i-scan",moduleName:"i-Scan",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"i-Scan Module"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Module placeholder - coming soon"})]})})})}),n.jsx(oa,{path:"/retina/modules/i-event",element:n.jsx(qa,{children:n.jsx(cp,{moduleKey:"i-event",moduleName:"i-Event",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"i-Event Module"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Module placeholder - coming soon"})]})})})}),n.jsx(oa,{path:"/retina/modules/i-audit",element:n.jsx(qa,{children:n.jsx(cp,{moduleKey:"i-audit",moduleName:"i-Audit",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"i-Audit Module"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Module placeholder - coming soon"})]})})})}),n.jsx(oa,{path:"/retina/modules/fragile-i",element:n.jsx(qa,{children:n.jsx(cp,{moduleKey:"fragile-i",moduleName:"Fragile-i",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Fragile-i Module"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Module placeholder - coming soon"})]})})})}),n.jsx(oa,{path:"/retina/admin",element:n.jsx(qa,{children:n.jsx(n6e,{})})}),n.jsx(oa,{path:"/retina/audit",element:n.jsx(qa,{children:n.jsx(e6e,{})})}),n.jsx(oa,{path:"/retina/admin/tenant-demo",element:n.jsx(qa,{children:n.jsx(JPe,{})})}),n.jsx(oa,{path:"/retina/admin/users",element:n.jsx(qa,{children:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"User Management"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Admin section - coming soon"})]})})}),n.jsx(oa,{path:"/retina/admin/settings",element:n.jsx(qa,{children:n.jsx(tMe,{})})}),n.jsx(oa,{path:"/retina/admin/data",element:n.jsx(qa,{children:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Data Management"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Admin section - coming soon"})]})})})]})]})})})}window.React=pe;window.ReactDOM=pZ;function iMe(){return n.jsx(pe.StrictMode,{children:n.jsx(sMe,{})})}const oMe=bZ.createRoot(document.getElementById("root"));oMe.render(n.jsx(iMe,{}));export{Rn as _,G0 as c,jn as g};
